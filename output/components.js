this["rl_components"] =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "output";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	__webpack_require__(2);
	__webpack_require__(3);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	__webpack_require__(6);
	__webpack_require__(13);
	var behaviors = __webpack_require__(14);
	exports.behaviors = behaviors;
	var components = __webpack_require__(26);
	exports.components = components;
	var filters = __webpack_require__(210);
	exports.filters = filters;
	var services = __webpack_require__(138);
	exports.services = services;
	var types = __webpack_require__(212);
	exports.types = types;
	exports.moduleName = 'rl.ui';
	angular.module(exports.moduleName, [
	    'ui.bootstrap',
	    'ui.bootstrap-slider',
	    'ngSanitize',
	    typescript_angular_utilities_1.name,
	    behaviors.moduleName,
	    components.moduleName,
	    filters.moduleName,
	    services.moduleName,
	]);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWkubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidWkubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLFFBQU8sc0JBQXNCLENBQUMsQ0FBQTtBQUM5QixRQUFPLGtCQUFrQixDQUFDLENBQUE7QUFFMUIsNkNBQXdDLDhCQUE4QixDQUFDLENBQUE7QUFFdkUsUUFBTyw4Q0FBOEMsQ0FBQyxDQUFBO0FBRXRELFFBQU8sZUFBZSxDQUFDLENBQUE7QUFFdkIsSUFBWSxTQUFTLFdBQU0sOEJBQThCLENBQUMsQ0FBQTtBQU1qRCxpQkFBUztBQUxsQixJQUFZLFVBQVUsV0FBTSxnQ0FBZ0MsQ0FBQyxDQUFBO0FBS3pDLGtCQUFVO0FBSjlCLElBQVksT0FBTyxXQUFNLDBCQUEwQixDQUFDLENBQUE7QUFJcEIsZUFBTztBQUh2QyxJQUFZLFFBQVEsV0FBTSw0QkFBNEIsQ0FBQyxDQUFBO0FBR2QsZ0JBQVE7QUFGakQsSUFBWSxLQUFLLFdBQU0sc0JBQXNCLENBQUMsQ0FBQTtBQUVLLGFBQUs7QUFFN0Msa0JBQVUsR0FBVyxPQUFPLENBQUM7QUFFeEMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFO0lBQzFCLGNBQWM7SUFDZCxxQkFBcUI7SUFDckIsWUFBWTtJQUNaLG1DQUFlO0lBRWYsU0FBUyxDQUFDLFVBQVU7SUFDcEIsVUFBVSxDQUFDLFVBQVU7SUFDckIsT0FBTyxDQUFDLFVBQVU7SUFDbEIsUUFBUSxDQUFDLFVBQVU7Q0FDbkIsQ0FBQyxDQUFDIn0=

/***/ },
/* 1 */
/***/ function(module, exports) {

	(function() { module.exports = this["angular"]; }());

/***/ },
/* 2 */
/***/ function(module, exports) {

	(function() { module.exports = this["angular-ui"]; }());

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(4);
	module.exports = 'ngSanitize';


/***/ },
/* 4 */
/***/ function(module, exports) {

	/**
	 * @license AngularJS v1.5.0
	 * (c) 2010-2016 Google, Inc. http://angularjs.org
	 * License: MIT
	 */
	(function(window, angular, undefined) {'use strict';
	
	/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
	 *     Any commits to this file should be reviewed with security in mind.  *
	 *   Changes to this file can potentially create security vulnerabilities. *
	 *          An approval from 2 Core members with history of modifying      *
	 *                         this file is required.                          *
	 *                                                                         *
	 *  Does the change somehow allow for arbitrary javascript to be executed? *
	 *    Or allows for someone to change the prototype of built-in objects?   *
	 *     Or gives undesired access to variables likes document or window?    *
	 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */
	
	var $sanitizeMinErr = angular.$$minErr('$sanitize');
	
	/**
	 * @ngdoc module
	 * @name ngSanitize
	 * @description
	 *
	 * # ngSanitize
	 *
	 * The `ngSanitize` module provides functionality to sanitize HTML.
	 *
	 *
	 * <div doc-module-components="ngSanitize"></div>
	 *
	 * See {@link ngSanitize.$sanitize `$sanitize`} for usage.
	 */
	
	/**
	 * @ngdoc service
	 * @name $sanitize
	 * @kind function
	 *
	 * @description
	 *   Sanitizes an html string by stripping all potentially dangerous tokens.
	 *
	 *   The input is sanitized by parsing the HTML into tokens. All safe tokens (from a whitelist) are
	 *   then serialized back to properly escaped html string. This means that no unsafe input can make
	 *   it into the returned string.
	 *
	 *   The whitelist for URL sanitization of attribute values is configured using the functions
	 *   `aHrefSanitizationWhitelist` and `imgSrcSanitizationWhitelist` of {@link ng.$compileProvider
	 *   `$compileProvider`}.
	 *
	 *   The input may also contain SVG markup if this is enabled via {@link $sanitizeProvider}.
	 *
	 * @param {string} html HTML input.
	 * @returns {string} Sanitized HTML.
	 *
	 * @example
	   <example module="sanitizeExample" deps="angular-sanitize.js">
	   <file name="index.html">
	     <script>
	         angular.module('sanitizeExample', ['ngSanitize'])
	           .controller('ExampleController', ['$scope', '$sce', function($scope, $sce) {
	             $scope.snippet =
	               '<p style="color:blue">an html\n' +
	               '<em onmouseover="this.textContent=\'PWN3D!\'">click here</em>\n' +
	               'snippet</p>';
	             $scope.deliberatelyTrustDangerousSnippet = function() {
	               return $sce.trustAsHtml($scope.snippet);
	             };
	           }]);
	     </script>
	     <div ng-controller="ExampleController">
	        Snippet: <textarea ng-model="snippet" cols="60" rows="3"></textarea>
	       <table>
	         <tr>
	           <td>Directive</td>
	           <td>How</td>
	           <td>Source</td>
	           <td>Rendered</td>
	         </tr>
	         <tr id="bind-html-with-sanitize">
	           <td>ng-bind-html</td>
	           <td>Automatically uses $sanitize</td>
	           <td><pre>&lt;div ng-bind-html="snippet"&gt;<br/>&lt;/div&gt;</pre></td>
	           <td><div ng-bind-html="snippet"></div></td>
	         </tr>
	         <tr id="bind-html-with-trust">
	           <td>ng-bind-html</td>
	           <td>Bypass $sanitize by explicitly trusting the dangerous value</td>
	           <td>
	           <pre>&lt;div ng-bind-html="deliberatelyTrustDangerousSnippet()"&gt;
	&lt;/div&gt;</pre>
	           </td>
	           <td><div ng-bind-html="deliberatelyTrustDangerousSnippet()"></div></td>
	         </tr>
	         <tr id="bind-default">
	           <td>ng-bind</td>
	           <td>Automatically escapes</td>
	           <td><pre>&lt;div ng-bind="snippet"&gt;<br/>&lt;/div&gt;</pre></td>
	           <td><div ng-bind="snippet"></div></td>
	         </tr>
	       </table>
	       </div>
	   </file>
	   <file name="protractor.js" type="protractor">
	     it('should sanitize the html snippet by default', function() {
	       expect(element(by.css('#bind-html-with-sanitize div')).getInnerHtml()).
	         toBe('<p>an html\n<em>click here</em>\nsnippet</p>');
	     });
	
	     it('should inline raw snippet if bound to a trusted value', function() {
	       expect(element(by.css('#bind-html-with-trust div')).getInnerHtml()).
	         toBe("<p style=\"color:blue\">an html\n" +
	              "<em onmouseover=\"this.textContent='PWN3D!'\">click here</em>\n" +
	              "snippet</p>");
	     });
	
	     it('should escape snippet without any filter', function() {
	       expect(element(by.css('#bind-default div')).getInnerHtml()).
	         toBe("&lt;p style=\"color:blue\"&gt;an html\n" +
	              "&lt;em onmouseover=\"this.textContent='PWN3D!'\"&gt;click here&lt;/em&gt;\n" +
	              "snippet&lt;/p&gt;");
	     });
	
	     it('should update', function() {
	       element(by.model('snippet')).clear();
	       element(by.model('snippet')).sendKeys('new <b onclick="alert(1)">text</b>');
	       expect(element(by.css('#bind-html-with-sanitize div')).getInnerHtml()).
	         toBe('new <b>text</b>');
	       expect(element(by.css('#bind-html-with-trust div')).getInnerHtml()).toBe(
	         'new <b onclick="alert(1)">text</b>');
	       expect(element(by.css('#bind-default div')).getInnerHtml()).toBe(
	         "new &lt;b onclick=\"alert(1)\"&gt;text&lt;/b&gt;");
	     });
	   </file>
	   </example>
	 */
	
	
	/**
	 * @ngdoc provider
	 * @name $sanitizeProvider
	 *
	 * @description
	 * Creates and configures {@link $sanitize} instance.
	 */
	function $SanitizeProvider() {
	  var svgEnabled = false;
	
	  this.$get = ['$$sanitizeUri', function($$sanitizeUri) {
	    if (svgEnabled) {
	      angular.extend(validElements, svgElements);
	    }
	    return function(html) {
	      var buf = [];
	      htmlParser(html, htmlSanitizeWriter(buf, function(uri, isImage) {
	        return !/^unsafe:/.test($$sanitizeUri(uri, isImage));
	      }));
	      return buf.join('');
	    };
	  }];
	
	
	  /**
	   * @ngdoc method
	   * @name $sanitizeProvider#enableSvg
	   * @kind function
	   *
	   * @description
	   * Enables a subset of svg to be supported by the sanitizer.
	   *
	   * <div class="alert alert-warning">
	   *   <p>By enabling this setting without taking other precautions, you might expose your
	   *   application to click-hijacking attacks. In these attacks, sanitized svg elements could be positioned
	   *   outside of the containing element and be rendered over other elements on the page (e.g. a login
	   *   link). Such behavior can then result in phishing incidents.</p>
	   *
	   *   <p>To protect against these, explicitly setup `overflow: hidden` css rule for all potential svg
	   *   tags within the sanitized content:</p>
	   *
	   *   <br>
	   *
	   *   <pre><code>
	   *   .rootOfTheIncludedContent svg {
	   *     overflow: hidden !important;
	   *   }
	   *   </code></pre>
	   * </div>
	   *
	   * @param {boolean=} regexp New regexp to whitelist urls with.
	   * @returns {boolean|ng.$sanitizeProvider} Returns the currently configured value if called
	   *    without an argument or self for chaining otherwise.
	   */
	  this.enableSvg = function(enableSvg) {
	    if (angular.isDefined(enableSvg)) {
	      svgEnabled = enableSvg;
	      return this;
	    } else {
	      return svgEnabled;
	    }
	  };
	}
	
	function sanitizeText(chars) {
	  var buf = [];
	  var writer = htmlSanitizeWriter(buf, angular.noop);
	  writer.chars(chars);
	  return buf.join('');
	}
	
	
	// Regular Expressions for parsing tags and attributes
	var SURROGATE_PAIR_REGEXP = /[\uD800-\uDBFF][\uDC00-\uDFFF]/g,
	  // Match everything outside of normal chars and " (quote character)
	  NON_ALPHANUMERIC_REGEXP = /([^\#-~ |!])/g;
	
	
	// Good source of info about elements and attributes
	// http://dev.w3.org/html5/spec/Overview.html#semantics
	// http://simon.html5.org/html-elements
	
	// Safe Void Elements - HTML5
	// http://dev.w3.org/html5/spec/Overview.html#void-elements
	var voidElements = toMap("area,br,col,hr,img,wbr");
	
	// Elements that you can, intentionally, leave open (and which close themselves)
	// http://dev.w3.org/html5/spec/Overview.html#optional-tags
	var optionalEndTagBlockElements = toMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),
	    optionalEndTagInlineElements = toMap("rp,rt"),
	    optionalEndTagElements = angular.extend({},
	                                            optionalEndTagInlineElements,
	                                            optionalEndTagBlockElements);
	
	// Safe Block Elements - HTML5
	var blockElements = angular.extend({}, optionalEndTagBlockElements, toMap("address,article," +
	        "aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5," +
	        "h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul"));
	
	// Inline Elements - HTML5
	var inlineElements = angular.extend({}, optionalEndTagInlineElements, toMap("a,abbr,acronym,b," +
	        "bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s," +
	        "samp,small,span,strike,strong,sub,sup,time,tt,u,var"));
	
	// SVG Elements
	// https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Elements
	// Note: the elements animate,animateColor,animateMotion,animateTransform,set are intentionally omitted.
	// They can potentially allow for arbitrary javascript to be executed. See #11290
	var svgElements = toMap("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph," +
	        "hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline," +
	        "radialGradient,rect,stop,svg,switch,text,title,tspan");
	
	// Blocked Elements (will be stripped)
	var blockedElements = toMap("script,style");
	
	var validElements = angular.extend({},
	                                   voidElements,
	                                   blockElements,
	                                   inlineElements,
	                                   optionalEndTagElements);
	
	//Attributes that have href and hence need to be sanitized
	var uriAttrs = toMap("background,cite,href,longdesc,src,xlink:href");
	
	var htmlAttrs = toMap('abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,' +
	    'color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,' +
	    'ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,' +
	    'scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,' +
	    'valign,value,vspace,width');
	
	// SVG attributes (without "id" and "name" attributes)
	// https://wiki.whatwg.org/wiki/Sanitization_rules#svg_Attributes
	var svgAttrs = toMap('accent-height,accumulate,additive,alphabetic,arabic-form,ascent,' +
	    'baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,' +
	    'cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,' +
	    'font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,' +
	    'height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,' +
	    'marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,' +
	    'max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,' +
	    'path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,' +
	    'requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,' +
	    'stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,' +
	    'stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,' +
	    'stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,' +
	    'underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,' +
	    'width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,' +
	    'xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan', true);
	
	var validAttrs = angular.extend({},
	                                uriAttrs,
	                                svgAttrs,
	                                htmlAttrs);
	
	function toMap(str, lowercaseKeys) {
	  var obj = {}, items = str.split(','), i;
	  for (i = 0; i < items.length; i++) {
	    obj[lowercaseKeys ? angular.lowercase(items[i]) : items[i]] = true;
	  }
	  return obj;
	}
	
	var inertBodyElement;
	(function(window) {
	  var doc;
	  if (window.document && window.document.implementation) {
	    doc = window.document.implementation.createHTMLDocument("inert");
	  } else {
	    throw $sanitizeMinErr('noinert', "Can't create an inert html document");
	  }
	  var docElement = doc.documentElement || doc.getDocumentElement();
	  var bodyElements = docElement.getElementsByTagName('body');
	
	  // usually there should be only one body element in the document, but IE doesn't have any, so we need to create one
	  if (bodyElements.length === 1) {
	    inertBodyElement = bodyElements[0];
	  } else {
	    var html = doc.createElement('html');
	    inertBodyElement = doc.createElement('body');
	    html.appendChild(inertBodyElement);
	    doc.appendChild(html);
	  }
	})(window);
	
	/**
	 * @example
	 * htmlParser(htmlString, {
	 *     start: function(tag, attrs) {},
	 *     end: function(tag) {},
	 *     chars: function(text) {},
	 *     comment: function(text) {}
	 * });
	 *
	 * @param {string} html string
	 * @param {object} handler
	 */
	function htmlParser(html, handler) {
	  if (html === null || html === undefined) {
	    html = '';
	  } else if (typeof html !== 'string') {
	    html = '' + html;
	  }
	  inertBodyElement.innerHTML = html;
	
	  //mXSS protection
	  var mXSSAttempts = 5;
	  do {
	    if (mXSSAttempts === 0) {
	      throw $sanitizeMinErr('uinput', "Failed to sanitize html because the input is unstable");
	    }
	    mXSSAttempts--;
	
	    // strip custom-namespaced attributes on IE<=11
	    if (document.documentMode <= 11) {
	      stripCustomNsAttrs(inertBodyElement);
	    }
	    html = inertBodyElement.innerHTML; //trigger mXSS
	    inertBodyElement.innerHTML = html;
	  } while (html !== inertBodyElement.innerHTML);
	
	  var node = inertBodyElement.firstChild;
	  while (node) {
	    switch (node.nodeType) {
	      case 1: // ELEMENT_NODE
	        handler.start(node.nodeName.toLowerCase(), attrToMap(node.attributes));
	        break;
	      case 3: // TEXT NODE
	        handler.chars(node.textContent);
	        break;
	    }
	
	    var nextNode;
	    if (!(nextNode = node.firstChild)) {
	      if (node.nodeType == 1) {
	        handler.end(node.nodeName.toLowerCase());
	      }
	      nextNode = node.nextSibling;
	      if (!nextNode) {
	        while (nextNode == null) {
	          node = node.parentNode;
	          if (node === inertBodyElement) break;
	          nextNode = node.nextSibling;
	          if (node.nodeType == 1) {
	            handler.end(node.nodeName.toLowerCase());
	          }
	        }
	      }
	    }
	    node = nextNode;
	  }
	
	  while (node = inertBodyElement.firstChild) {
	    inertBodyElement.removeChild(node);
	  }
	}
	
	function attrToMap(attrs) {
	  var map = {};
	  for (var i = 0, ii = attrs.length; i < ii; i++) {
	    var attr = attrs[i];
	    map[attr.name] = attr.value;
	  }
	  return map;
	}
	
	
	/**
	 * Escapes all potentially dangerous characters, so that the
	 * resulting string can be safely inserted into attribute or
	 * element text.
	 * @param value
	 * @returns {string} escaped text
	 */
	function encodeEntities(value) {
	  return value.
	    replace(/&/g, '&amp;').
	    replace(SURROGATE_PAIR_REGEXP, function(value) {
	      var hi = value.charCodeAt(0);
	      var low = value.charCodeAt(1);
	      return '&#' + (((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000) + ';';
	    }).
	    replace(NON_ALPHANUMERIC_REGEXP, function(value) {
	      return '&#' + value.charCodeAt(0) + ';';
	    }).
	    replace(/</g, '&lt;').
	    replace(/>/g, '&gt;');
	}
	
	/**
	 * create an HTML/XML writer which writes to buffer
	 * @param {Array} buf use buf.join('') to get out sanitized html string
	 * @returns {object} in the form of {
	 *     start: function(tag, attrs) {},
	 *     end: function(tag) {},
	 *     chars: function(text) {},
	 *     comment: function(text) {}
	 * }
	 */
	function htmlSanitizeWriter(buf, uriValidator) {
	  var ignoreCurrentElement = false;
	  var out = angular.bind(buf, buf.push);
	  return {
	    start: function(tag, attrs) {
	      tag = angular.lowercase(tag);
	      if (!ignoreCurrentElement && blockedElements[tag]) {
	        ignoreCurrentElement = tag;
	      }
	      if (!ignoreCurrentElement && validElements[tag] === true) {
	        out('<');
	        out(tag);
	        angular.forEach(attrs, function(value, key) {
	          var lkey=angular.lowercase(key);
	          var isImage = (tag === 'img' && lkey === 'src') || (lkey === 'background');
	          if (validAttrs[lkey] === true &&
	            (uriAttrs[lkey] !== true || uriValidator(value, isImage))) {
	            out(' ');
	            out(key);
	            out('="');
	            out(encodeEntities(value));
	            out('"');
	          }
	        });
	        out('>');
	      }
	    },
	    end: function(tag) {
	      tag = angular.lowercase(tag);
	      if (!ignoreCurrentElement && validElements[tag] === true && voidElements[tag] !== true) {
	        out('</');
	        out(tag);
	        out('>');
	      }
	      if (tag == ignoreCurrentElement) {
	        ignoreCurrentElement = false;
	      }
	    },
	    chars: function(chars) {
	      if (!ignoreCurrentElement) {
	        out(encodeEntities(chars));
	      }
	    }
	  };
	}
	
	
	/**
	 * When IE9-11 comes across an unknown namespaced attribute e.g. 'xlink:foo' it adds 'xmlns:ns1' attribute to declare
	 * ns1 namespace and prefixes the attribute with 'ns1' (e.g. 'ns1:xlink:foo'). This is undesirable since we don't want
	 * to allow any of these custom attributes. This method strips them all.
	 *
	 * @param node Root element to process
	 */
	function stripCustomNsAttrs(node) {
	  if (node.nodeType === Node.ELEMENT_NODE) {
	    var attrs = node.attributes;
	    for (var i = 0, l = attrs.length; i < l; i++) {
	      var attrNode = attrs[i];
	      var attrName = attrNode.name.toLowerCase();
	      if (attrName === 'xmlns:ns1' || attrName.indexOf('ns1:') === 0) {
	        node.removeAttributeNode(attrNode);
	        i--;
	        l--;
	      }
	    }
	  }
	
	  var nextNode = node.firstChild;
	  if (nextNode) {
	    stripCustomNsAttrs(nextNode);
	  }
	
	  nextNode = node.nextSibling;
	  if (nextNode) {
	    stripCustomNsAttrs(nextNode);
	  }
	}
	
	
	
	// define ngSanitize module and register $sanitize service
	angular.module('ngSanitize', []).provider('$sanitize', $SanitizeProvider);
	
	/* global sanitizeText: false */
	
	/**
	 * @ngdoc filter
	 * @name linky
	 * @kind function
	 *
	 * @description
	 * Finds links in text input and turns them into html links. Supports `http/https/ftp/mailto` and
	 * plain email address links.
	 *
	 * Requires the {@link ngSanitize `ngSanitize`} module to be installed.
	 *
	 * @param {string} text Input text.
	 * @param {string} target Window (`_blank|_self|_parent|_top`) or named frame to open links in.
	 * @param {object|function(url)} [attributes] Add custom attributes to the link element.
	 *
	 *    Can be one of:
	 *
	 *    - `object`: A map of attributes
	 *    - `function`: Takes the url as a parameter and returns a map of attributes
	 *
	 *    If the map of attributes contains a value for `target`, it overrides the value of
	 *    the target parameter.
	 *
	 *
	 * @returns {string} Html-linkified and {@link $sanitize sanitized} text.
	 *
	 * @usage
	   <span ng-bind-html="linky_expression | linky"></span>
	 *
	 * @example
	   <example module="linkyExample" deps="angular-sanitize.js">
	     <file name="index.html">
	       <div ng-controller="ExampleController">
	       Snippet: <textarea ng-model="snippet" cols="60" rows="3"></textarea>
	       <table>
	         <tr>
	           <th>Filter</th>
	           <th>Source</th>
	           <th>Rendered</th>
	         </tr>
	         <tr id="linky-filter">
	           <td>linky filter</td>
	           <td>
	             <pre>&lt;div ng-bind-html="snippet | linky"&gt;<br>&lt;/div&gt;</pre>
	           </td>
	           <td>
	             <div ng-bind-html="snippet | linky"></div>
	           </td>
	         </tr>
	         <tr id="linky-target">
	          <td>linky target</td>
	          <td>
	            <pre>&lt;div ng-bind-html="snippetWithSingleURL | linky:'_blank'"&gt;<br>&lt;/div&gt;</pre>
	          </td>
	          <td>
	            <div ng-bind-html="snippetWithSingleURL | linky:'_blank'"></div>
	          </td>
	         </tr>
	         <tr id="linky-custom-attributes">
	          <td>linky custom attributes</td>
	          <td>
	            <pre>&lt;div ng-bind-html="snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}"&gt;<br>&lt;/div&gt;</pre>
	          </td>
	          <td>
	            <div ng-bind-html="snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}"></div>
	          </td>
	         </tr>
	         <tr id="escaped-html">
	           <td>no filter</td>
	           <td><pre>&lt;div ng-bind="snippet"&gt;<br>&lt;/div&gt;</pre></td>
	           <td><div ng-bind="snippet"></div></td>
	         </tr>
	       </table>
	     </file>
	     <file name="script.js">
	       angular.module('linkyExample', ['ngSanitize'])
	         .controller('ExampleController', ['$scope', function($scope) {
	           $scope.snippet =
	             'Pretty text with some links:\n'+
	             'http://angularjs.org/,\n'+
	             'mailto:us@somewhere.org,\n'+
	             'another@somewhere.org,\n'+
	             'and one more: ftp://127.0.0.1/.';
	           $scope.snippetWithSingleURL = 'http://angularjs.org/';
	         }]);
	     </file>
	     <file name="protractor.js" type="protractor">
	       it('should linkify the snippet with urls', function() {
	         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).
	             toBe('Pretty text with some links: http://angularjs.org/, us@somewhere.org, ' +
	                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');
	         expect(element.all(by.css('#linky-filter a')).count()).toEqual(4);
	       });
	
	       it('should not linkify snippet without the linky filter', function() {
	         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText()).
	             toBe('Pretty text with some links: http://angularjs.org/, mailto:us@somewhere.org, ' +
	                  'another@somewhere.org, and one more: ftp://127.0.0.1/.');
	         expect(element.all(by.css('#escaped-html a')).count()).toEqual(0);
	       });
	
	       it('should update', function() {
	         element(by.model('snippet')).clear();
	         element(by.model('snippet')).sendKeys('new http://link.');
	         expect(element(by.id('linky-filter')).element(by.binding('snippet | linky')).getText()).
	             toBe('new http://link.');
	         expect(element.all(by.css('#linky-filter a')).count()).toEqual(1);
	         expect(element(by.id('escaped-html')).element(by.binding('snippet')).getText())
	             .toBe('new http://link.');
	       });
	
	       it('should work with the target property', function() {
	        expect(element(by.id('linky-target')).
	            element(by.binding("snippetWithSingleURL | linky:'_blank'")).getText()).
	            toBe('http://angularjs.org/');
	        expect(element(by.css('#linky-target a')).getAttribute('target')).toEqual('_blank');
	       });
	
	       it('should optionally add custom attributes', function() {
	        expect(element(by.id('linky-custom-attributes')).
	            element(by.binding("snippetWithSingleURL | linky:'_self':{rel: 'nofollow'}")).getText()).
	            toBe('http://angularjs.org/');
	        expect(element(by.css('#linky-custom-attributes a')).getAttribute('rel')).toEqual('nofollow');
	       });
	     </file>
	   </example>
	 */
	angular.module('ngSanitize').filter('linky', ['$sanitize', function($sanitize) {
	  var LINKY_URL_REGEXP =
	        /((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,
	      MAILTO_REGEXP = /^mailto:/i;
	
	  var linkyMinErr = angular.$$minErr('linky');
	  var isString = angular.isString;
	
	  return function(text, target, attributes) {
	    if (text == null || text === '') return text;
	    if (!isString(text)) throw linkyMinErr('notstring', 'Expected string but received: {0}', text);
	
	    var match;
	    var raw = text;
	    var html = [];
	    var url;
	    var i;
	    while ((match = raw.match(LINKY_URL_REGEXP))) {
	      // We can not end in these as they are sometimes found at the end of the sentence
	      url = match[0];
	      // if we did not match ftp/http/www/mailto then assume mailto
	      if (!match[2] && !match[4]) {
	        url = (match[3] ? 'http://' : 'mailto:') + url;
	      }
	      i = match.index;
	      addText(raw.substr(0, i));
	      addLink(url, match[0].replace(MAILTO_REGEXP, ''));
	      raw = raw.substring(i + match[0].length);
	    }
	    addText(raw);
	    return $sanitize(html.join(''));
	
	    function addText(text) {
	      if (!text) {
	        return;
	      }
	      html.push(sanitizeText(text));
	    }
	
	    function addLink(url, text) {
	      var key;
	      html.push('<a ');
	      if (angular.isFunction(attributes)) {
	        attributes = attributes(url);
	      }
	      if (angular.isObject(attributes)) {
	        for (key in attributes) {
	          html.push(key + '="' + attributes[key] + '" ');
	        }
	      } else {
	        attributes = {};
	      }
	      if (angular.isDefined(target) && !('target' in attributes)) {
	        html.push('target="',
	                  target,
	                  '" ');
	      }
	      html.push('href="',
	                url.replace(/"/g, '&quot;'),
	                '">');
	      addText(text);
	      html.push('</a>');
	    }
	  };
	}]);
	
	
	})(window, window.angular);


/***/ },
/* 5 */
/***/ function(module, exports) {

	(function() { module.exports = this["rl_utilities"]; }());

/***/ },
/* 6 */
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(7);
	var Slider = __webpack_require__(11);
	
	angular.module('ui.bootstrap-slider', [])
	    .directive('slider', ['$parse', '$timeout', '$rootScope', function ($parse, $timeout, $rootScope) {
	        return {
	            restrict: 'AE',
	            replace: true,
	            template: '<div><input class="slider-input" type="text" style="width:100%" /></div>',
	            require: 'ngModel',
	            scope: {
	                max: "=",
	                min: "=",
	                step: "=",
	                value: "=",
	                ngModel: '=',
	                ngDisabled: '=',
	                range: '=',
	                sliderid: '=',
	                ticks: '=',
	                ticksLabels: '=',
	                ticksSnapBounds: '=',
	                ticksPositions: '=',
	                scale: '=',
	                formatter: '&',
	                onStartSlide: '&',
	                onStopSlide: '&',
	                onSlide: '&'
	            },
	            link: function ($scope, element, attrs, ngModelCtrl, $compile) {
	                var ngModelDeregisterFn, ngDisabledDeregisterFn;
	
	                initSlider();
	
	                function initSlider() {
	                    var options = {};
	
	                    function setOption(key, value, defaultValue) {
	                        options[key] = value || defaultValue;
	                    }
	
	                    function setFloatOption(key, value, defaultValue) {
	                        options[key] = value || value === 0 ? parseFloat(value) : defaultValue;
	                    }
	
	                    function setBooleanOption(key, value, defaultValue) {
	                        options[key] = value ? value + '' === 'true' : defaultValue;
	                    }
	
	                    function getArrayOrValue(value) {
	                        return (angular.isString(value) && value.indexOf("[") === 0) ? angular.fromJson(value) : value;
	                    }
	
	                    setOption('id', $scope.sliderid);
	                    setOption('orientation', attrs.orientation, 'horizontal');
	                    setOption('selection', attrs.selection, 'before');
	                    setOption('handle', attrs.handle, 'round');
	                    setOption('tooltip', attrs.sliderTooltip || attrs.tooltip, 'show');
	                    setOption('tooltip_position', attrs.sliderTooltipPosition, 'top');
	                    setOption('tooltipseparator', attrs.tooltipseparator, ':');
	                    setOption('ticks', $scope.ticks);
	                    setOption('ticks_labels', $scope.ticksLabels);
	                    setOption('ticks_snap_bounds', $scope.ticksSnapBounds);
	                    setOption('ticks_positions', $scope.ticksPositions);
	                    setOption('scale', $scope.scale, 'linear');
	
	                    setFloatOption('min', $scope.min, 0);
	                    setFloatOption('max', $scope.max, 10);
	                    setFloatOption('step', $scope.step, 1);
	                    var strNbr = options.step + '';
	                    var decimals = strNbr.substring(strNbr.lastIndexOf('.') + 1);
	                    setFloatOption('precision', attrs.precision, decimals);
	
	                    setBooleanOption('tooltip_split', attrs.tooltipsplit, false);
	                    setBooleanOption('enabled', attrs.enabled, true);
	                    setBooleanOption('naturalarrowkeys', attrs.naturalarrowkeys, false);
	                    setBooleanOption('reversed', attrs.reversed, false);
	
	                    setBooleanOption('range', $scope.range, false);
	                    if (options.range) {
	                        if (angular.isArray($scope.value)) {
	                            options.value = $scope.value;
	                        }
	                        else if (angular.isString($scope.value)) {
	                            options.value = getArrayOrValue($scope.value);
	                            if (!angular.isArray(options.value)) {
	                                var value = parseFloat($scope.value);
	                                if (isNaN(value)) value = 5;
	
	                                if (value < $scope.min) {
	                                    value = $scope.min;
	                                    options.value = [value, options.max];
	                                }
	                                else if (value > $scope.max) {
	                                    value = $scope.max;
	                                    options.value = [options.min, value];
	                                }
	                                else {
	                                    options.value = [options.min, options.max];
	                                }
	                            }
	                        }
	                        else {
	                            options.value = [options.min, options.max]; // This is needed, because of value defined at $.fn.slider.defaults - default value 5 prevents creating range slider
	                        }
	                        $scope.ngModel = options.value; // needed, otherwise turns value into [null, ##]
	                    }
	                    else {
	                        setFloatOption('value', $scope.value, 5);
	                    }
	
	                    if ($scope.formatter) options.formatter = $scope.$eval($scope.formatter);
	
	
	                    // check if slider jQuery plugin exists
	                    if ('$' in window && $.fn.slider) {
	                        // adding methods to jQuery slider plugin prototype
	                        $.fn.slider.constructor.prototype.disable = function () {
	                            this.picker.off();
	                        };
	                        $.fn.slider.constructor.prototype.enable = function () {
	                            this.picker.on();
	                        };
	                    }
	
	                    // destroy previous slider to reset all options
	                    if (element[0].__slider)
	                        element[0].__slider.destroy();
	
	                    var slider = new Slider(element[0].getElementsByClassName('slider-input')[0], options);
	                    element[0].__slider = slider;
	
	                    // everything that needs slider element
	                    var updateEvent = getArrayOrValue(attrs.updateevent);
	                    if (angular.isString(updateEvent)) {
	                        // if only single event name in string
	                        updateEvent = [updateEvent];
	                    }
	                    else {
	                        // default to slide event
	                        updateEvent = ['slide'];
	                    }
	                    angular.forEach(updateEvent, function (sliderEvent) {
	                        slider.on(sliderEvent, function (ev) {
	                            ngModelCtrl.$setViewValue(ev);
	                            $timeout(function () {
	                                $scope.$apply();
	                            });
	                        });
	                    });
	                    slider.on('change', function (ev) {
	                        ngModelCtrl.$setViewValue(ev.newValue);
	                        $timeout(function () {
	                            $scope.$apply();
	                        });
	                    });
	
	                    // Event listeners
	                    var sliderEvents = {
	                        slideStart: 'onStartSlide',
	                        slide: 'onSlide',
	                        slideStop: 'onStopSlide'
	                    };
	                    angular.forEach(sliderEvents, function (sliderEventAttr, sliderEvent) {
	                        var fn = $parse(attrs[sliderEventAttr]);
	                        slider.on(sliderEvent, function (ev) {
	                            if ($scope[sliderEventAttr]) {
	
	                                var callback = function () {
	                                    fn($scope.$parent, { $event: ev, value: ev });
	                                }
	
	                                if ($rootScope.$$phase) {
	                                    $scope.$evalAsync(callback);
	                                } else {
	                                    $scope.$apply(callback);
	                                }
	                            }
	                        });
	                    });
	
	                    // deregister ngDisabled watcher to prevent memory leaks
	                    if (angular.isFunction(ngDisabledDeregisterFn)) {
	                        ngDisabledDeregisterFn();
	                        ngDisabledDeregisterFn = null;
	                    }
	
	                    ngDisabledDeregisterFn = $scope.$watch('ngDisabled', function (value) {
	                        if (value) {
	                            slider.disable();
	                        }
	                        else {
	                            slider.enable();
	                        }
	                    });
	
	                    // deregister ngModel watcher to prevent memory leaks
	                    if (angular.isFunction(ngModelDeregisterFn)) ngModelDeregisterFn();
	                    ngModelDeregisterFn = $scope.$watch('ngModel', function (value) {
	                        if($scope.range){
	                            slider.setValue(value);
	                        }else{
	                            slider.setValue(parseFloat(value));
	                        }
	                    }, true);
	                }
	
	
	                var watchers = ['min', 'max', 'step', 'range', 'scale'];
	                angular.forEach(watchers, function (prop) {
	                    $scope.$watch(prop, function () {
	                        initSlider();
	                    });
	                });
	            }
	        };
	    }])
	;

/***/ },
/* 7 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(8);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../node_modules/css-loader/index.js!./bootstrap-slider.min.css", function() {
				var newContent = require("!!./../../node_modules/css-loader/index.js!./bootstrap-slider.min.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 8 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, "/*! =======================================================\r\n                      VERSION  5.1.1\r\n========================================================= */\r\n/*! =========================================================\r\n * bootstrap-slider.js\r\n *\r\n * Maintainers:\r\n *\t\tKyle Kemp\r\n *\t\t\t- Twitter: @seiyria\r\n *\t\t\t- Github:  seiyria\r\n *\t\tRohit Kalkur\r\n *\t\t\t- Twitter: @Rovolutionary\r\n *\t\t\t- Github:  rovolution\r\n *\r\n * =========================================================\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================= */.slider{display:inline-block;vertical-align:middle;position:relative}.slider.slider-horizontal{width:210px;height:20px}.slider.slider-horizontal .slider-track{height:10px;width:100%;margin-top:-5px;top:50%;left:0}.slider.slider-horizontal .slider-selection,.slider.slider-horizontal .slider-track-low,.slider.slider-horizontal .slider-track-high{height:100%;top:0;bottom:0}.slider.slider-horizontal .slider-tick,.slider.slider-horizontal .slider-handle{margin-left:-10px;margin-top:-5px}.slider.slider-horizontal .slider-tick.triangle,.slider.slider-horizontal .slider-handle.triangle{border-width:0 10px 10px 10px;width:0;height:0;border-bottom-color:#0480be;margin-top:0}.slider.slider-horizontal .slider-tick-label-container{white-space:nowrap;margin-top:20px}.slider.slider-horizontal .slider-tick-label-container .slider-tick-label{padding-top:4px;display:inline-block;text-align:center}.slider.slider-vertical{height:210px;width:20px}.slider.slider-vertical .slider-track{width:10px;height:100%;margin-left:-5px;left:50%;top:0}.slider.slider-vertical .slider-selection{width:100%;left:0;top:0;bottom:0}.slider.slider-vertical .slider-track-low,.slider.slider-vertical .slider-track-high{width:100%;left:0;right:0}.slider.slider-vertical .slider-tick,.slider.slider-vertical .slider-handle{margin-left:-5px;margin-top:-10px}.slider.slider-vertical .slider-tick.triangle,.slider.slider-vertical .slider-handle.triangle{border-width:10px 0 10px 10px;width:1px;height:1px;border-left-color:#0480be;margin-left:0}.slider.slider-disabled .slider-handle{background-image:-webkit-linear-gradient(top,#dfdfdf 0,#bebebe 100%);background-image:-o-linear-gradient(top,#dfdfdf 0,#bebebe 100%);background-image:linear-gradient(to bottom,#dfdfdf 0,#bebebe 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffdfdfdf',endColorstr='#ffbebebe',GradientType=0)}.slider.slider-disabled .slider-track{background-image:-webkit-linear-gradient(top,#e5e5e5 0,#e9e9e9 100%);background-image:-o-linear-gradient(top,#e5e5e5 0,#e9e9e9 100%);background-image:linear-gradient(to bottom,#e5e5e5 0,#e9e9e9 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffe5e5e5',endColorstr='#ffe9e9e9',GradientType=0);cursor:not-allowed}.slider input{display:none}.slider .tooltip.top{margin-top:-36px}.slider .tooltip-inner{white-space:nowrap}.slider .hide{display:none}.slider-track{position:absolute;cursor:pointer;background-image:-webkit-linear-gradient(top,#f5f5f5 0,#f9f9f9 100%);background-image:-o-linear-gradient(top,#f5f5f5 0,#f9f9f9 100%);background-image:linear-gradient(to bottom,#f5f5f5 0,#f9f9f9 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff5f5f5',endColorstr='#fff9f9f9',GradientType=0);-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);border-radius:4px}.slider-selection{position:absolute;background-image:-webkit-linear-gradient(top,#f9f9f9 0,#f5f5f5 100%);background-image:-o-linear-gradient(top,#f9f9f9 0,#f5f5f5 100%);background-image:linear-gradient(to bottom,#f9f9f9 0,#f5f5f5 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff9f9f9',endColorstr='#fff5f5f5',GradientType=0);-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border-radius:4px}.slider-selection.tick-slider-selection{background-image:-webkit-linear-gradient(top,#89cdef 0,#81bfde 100%);background-image:-o-linear-gradient(top,#89cdef 0,#81bfde 100%);background-image:linear-gradient(to bottom,#89cdef 0,#81bfde 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff89cdef',endColorstr='#ff81bfde',GradientType=0)}.slider-track-low,.slider-track-high{position:absolute;background:transparent;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border-radius:4px}.slider-handle{position:absolute;width:20px;height:20px;background-color:#337ab7;background-image:-webkit-linear-gradient(top,#149bdf 0,#0480be 100%);background-image:-o-linear-gradient(top,#149bdf 0,#0480be 100%);background-image:linear-gradient(to bottom,#149bdf 0,#0480be 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff149bdf',endColorstr='#ff0480be',GradientType=0);filter:none;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);border:0 solid transparent}.slider-handle.round{border-radius:50%}.slider-handle.triangle{background:transparent none}.slider-handle.custom{background:transparent none}.slider-handle.custom::before{line-height:20px;font-size:20px;content:'\\2605';color:#726204}.slider-tick{position:absolute;width:20px;height:20px;background-image:-webkit-linear-gradient(top,#f9f9f9 0,#f5f5f5 100%);background-image:-o-linear-gradient(top,#f9f9f9 0,#f5f5f5 100%);background-image:linear-gradient(to bottom,#f9f9f9 0,#f5f5f5 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fff9f9f9',endColorstr='#fff5f5f5',GradientType=0);-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;filter:none;opacity:.8;border:0 solid transparent}.slider-tick.round{border-radius:50%}.slider-tick.triangle{background:transparent none}.slider-tick.custom{background:transparent none}.slider-tick.custom::before{line-height:20px;font-size:20px;content:'\\2605';color:#726204}.slider-tick.in-selection{background-image:-webkit-linear-gradient(top,#89cdef 0,#81bfde 100%);background-image:-o-linear-gradient(top,#89cdef 0,#81bfde 100%);background-image:linear-gradient(to bottom,#89cdef 0,#81bfde 100%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff89cdef',endColorstr='#ff81bfde',GradientType=0);opacity:1}", ""]);
	
	// exports


/***/ },
/* 9 */
/***/ function(module, exports) {

	/*
		MIT License http://www.opensource.org/licenses/mit-license.php
		Author Tobias Koppers @sokra
	*/
	// css base code, injected by the css-loader
	module.exports = function() {
		var list = [];
	
		// return the list of modules as css string
		list.toString = function toString() {
			var result = [];
			for(var i = 0; i < this.length; i++) {
				var item = this[i];
				if(item[2]) {
					result.push("@media " + item[2] + "{" + item[1] + "}");
				} else {
					result.push(item[1]);
				}
			}
			return result.join("");
		};
	
		// import a list of modules into the list
		list.i = function(modules, mediaQuery) {
			if(typeof modules === "string")
				modules = [[null, modules, ""]];
			var alreadyImportedModules = {};
			for(var i = 0; i < this.length; i++) {
				var id = this[i][0];
				if(typeof id === "number")
					alreadyImportedModules[id] = true;
			}
			for(i = 0; i < modules.length; i++) {
				var item = modules[i];
				// skip already imported module
				// this implementation is not 100% perfect for weird media query combinations
				//  when a module is imported multiple times with different media queries.
				//  I hope this will never occur (Hey this way we have smaller bundles)
				if(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
					if(mediaQuery && !item[2]) {
						item[2] = mediaQuery;
					} else if(mediaQuery) {
						item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
					}
					list.push(item);
				}
			}
		};
		return list;
	};


/***/ },
/* 10 */
/***/ function(module, exports, __webpack_require__) {

	/*
		MIT License http://www.opensource.org/licenses/mit-license.php
		Author Tobias Koppers @sokra
	*/
	var stylesInDom = {},
		memoize = function(fn) {
			var memo;
			return function () {
				if (typeof memo === "undefined") memo = fn.apply(this, arguments);
				return memo;
			};
		},
		isOldIE = memoize(function() {
			return /msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase());
		}),
		getHeadElement = memoize(function () {
			return document.head || document.getElementsByTagName("head")[0];
		}),
		singletonElement = null,
		singletonCounter = 0,
		styleElementsInsertedAtTop = [];
	
	module.exports = function(list, options) {
		if(false) {
			if(typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");
		}
	
		options = options || {};
		// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
		// tags it will allow on a page
		if (typeof options.singleton === "undefined") options.singleton = isOldIE();
	
		// By default, add <style> tags to the bottom of <head>.
		if (typeof options.insertAt === "undefined") options.insertAt = "bottom";
	
		var styles = listToStyles(list);
		addStylesToDom(styles, options);
	
		return function update(newList) {
			var mayRemove = [];
			for(var i = 0; i < styles.length; i++) {
				var item = styles[i];
				var domStyle = stylesInDom[item.id];
				domStyle.refs--;
				mayRemove.push(domStyle);
			}
			if(newList) {
				var newStyles = listToStyles(newList);
				addStylesToDom(newStyles, options);
			}
			for(var i = 0; i < mayRemove.length; i++) {
				var domStyle = mayRemove[i];
				if(domStyle.refs === 0) {
					for(var j = 0; j < domStyle.parts.length; j++)
						domStyle.parts[j]();
					delete stylesInDom[domStyle.id];
				}
			}
		};
	}
	
	function addStylesToDom(styles, options) {
		for(var i = 0; i < styles.length; i++) {
			var item = styles[i];
			var domStyle = stylesInDom[item.id];
			if(domStyle) {
				domStyle.refs++;
				for(var j = 0; j < domStyle.parts.length; j++) {
					domStyle.parts[j](item.parts[j]);
				}
				for(; j < item.parts.length; j++) {
					domStyle.parts.push(addStyle(item.parts[j], options));
				}
			} else {
				var parts = [];
				for(var j = 0; j < item.parts.length; j++) {
					parts.push(addStyle(item.parts[j], options));
				}
				stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
			}
		}
	}
	
	function listToStyles(list) {
		var styles = [];
		var newStyles = {};
		for(var i = 0; i < list.length; i++) {
			var item = list[i];
			var id = item[0];
			var css = item[1];
			var media = item[2];
			var sourceMap = item[3];
			var part = {css: css, media: media, sourceMap: sourceMap};
			if(!newStyles[id])
				styles.push(newStyles[id] = {id: id, parts: [part]});
			else
				newStyles[id].parts.push(part);
		}
		return styles;
	}
	
	function insertStyleElement(options, styleElement) {
		var head = getHeadElement();
		var lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];
		if (options.insertAt === "top") {
			if(!lastStyleElementInsertedAtTop) {
				head.insertBefore(styleElement, head.firstChild);
			} else if(lastStyleElementInsertedAtTop.nextSibling) {
				head.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);
			} else {
				head.appendChild(styleElement);
			}
			styleElementsInsertedAtTop.push(styleElement);
		} else if (options.insertAt === "bottom") {
			head.appendChild(styleElement);
		} else {
			throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");
		}
	}
	
	function removeStyleElement(styleElement) {
		styleElement.parentNode.removeChild(styleElement);
		var idx = styleElementsInsertedAtTop.indexOf(styleElement);
		if(idx >= 0) {
			styleElementsInsertedAtTop.splice(idx, 1);
		}
	}
	
	function createStyleElement(options) {
		var styleElement = document.createElement("style");
		styleElement.type = "text/css";
		insertStyleElement(options, styleElement);
		return styleElement;
	}
	
	function createLinkElement(options) {
		var linkElement = document.createElement("link");
		linkElement.rel = "stylesheet";
		insertStyleElement(options, linkElement);
		return linkElement;
	}
	
	function addStyle(obj, options) {
		var styleElement, update, remove;
	
		if (options.singleton) {
			var styleIndex = singletonCounter++;
			styleElement = singletonElement || (singletonElement = createStyleElement(options));
			update = applyToSingletonTag.bind(null, styleElement, styleIndex, false);
			remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);
		} else if(obj.sourceMap &&
			typeof URL === "function" &&
			typeof URL.createObjectURL === "function" &&
			typeof URL.revokeObjectURL === "function" &&
			typeof Blob === "function" &&
			typeof btoa === "function") {
			styleElement = createLinkElement(options);
			update = updateLink.bind(null, styleElement);
			remove = function() {
				removeStyleElement(styleElement);
				if(styleElement.href)
					URL.revokeObjectURL(styleElement.href);
			};
		} else {
			styleElement = createStyleElement(options);
			update = applyToTag.bind(null, styleElement);
			remove = function() {
				removeStyleElement(styleElement);
			};
		}
	
		update(obj);
	
		return function updateStyle(newObj) {
			if(newObj) {
				if(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)
					return;
				update(obj = newObj);
			} else {
				remove();
			}
		};
	}
	
	var replaceText = (function () {
		var textStore = [];
	
		return function (index, replacement) {
			textStore[index] = replacement;
			return textStore.filter(Boolean).join('\n');
		};
	})();
	
	function applyToSingletonTag(styleElement, index, remove, obj) {
		var css = remove ? "" : obj.css;
	
		if (styleElement.styleSheet) {
			styleElement.styleSheet.cssText = replaceText(index, css);
		} else {
			var cssNode = document.createTextNode(css);
			var childNodes = styleElement.childNodes;
			if (childNodes[index]) styleElement.removeChild(childNodes[index]);
			if (childNodes.length) {
				styleElement.insertBefore(cssNode, childNodes[index]);
			} else {
				styleElement.appendChild(cssNode);
			}
		}
	}
	
	function applyToTag(styleElement, obj) {
		var css = obj.css;
		var media = obj.media;
	
		if(media) {
			styleElement.setAttribute("media", media)
		}
	
		if(styleElement.styleSheet) {
			styleElement.styleSheet.cssText = css;
		} else {
			while(styleElement.firstChild) {
				styleElement.removeChild(styleElement.firstChild);
			}
			styleElement.appendChild(document.createTextNode(css));
		}
	}
	
	function updateLink(linkElement, obj) {
		var css = obj.css;
		var sourceMap = obj.sourceMap;
	
		if(sourceMap) {
			// http://stackoverflow.com/a/26603875
			css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";
		}
	
		var blob = new Blob([css], { type: "text/css" });
	
		var oldSrc = linkElement.href;
	
		linkElement.href = URL.createObjectURL(blob);
	
		if(oldSrc)
			URL.revokeObjectURL(oldSrc);
	}


/***/ },
/* 11 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! =======================================================
	                      VERSION  5.1.1
	========================================================= */
	/*! =========================================================
	 * bootstrap-slider.js
	 *
	 * Maintainers:
	 *		Kyle Kemp
	 *			- Twitter: @seiyria
	 *			- Github:  seiyria
	 *		Rohit Kalkur
	 *			- Twitter: @Rovolutionary
	 *			- Github:  rovolution
	 *
	 * =========================================================
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * ========================================================= */
	!function(a,b){if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(12)], __WEBPACK_AMD_DEFINE_FACTORY__ = (b), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else if("object"==typeof module&&module.exports){var c;try{c=require("jquery")}catch(d){c=null}module.exports=b(c)}else a.Slider=b(a.jQuery)}(this,function(a){var b;return function(a){"use strict";function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l&&l!==k)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}var m=this.map(function(){var d=a.data(this,b);return d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d)),a(this)});return!m||m.length>1?m:m[0]}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;c(a)}(a),function(a){function c(b,c){function d(a,b){var c="data-slider-"+b.replace(/_/g,"-"),d=a.getAttribute(c);try{return JSON.parse(d)}catch(e){return d}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof b?this.element=document.querySelector(b):b instanceof HTMLElement&&(this.element=b),c=c?c:{};for(var f=Object.keys(this.defaultOptions),g=0;g<f.length;g++){var h=f[g],i=c[h];i="undefined"!=typeof i?i:d(this.element,h),i=null!==i?i:this.defaultOptions[h],this.options||(this.options={}),this.options[h]=i}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var j,k,l,m,n,o=this.element.style.width,p=!1,q=this.element.parentNode;if(this.sliderElem)p=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var r=document.createElement("div");if(r.className="slider-track",k=document.createElement("div"),k.className="slider-track-low",j=document.createElement("div"),j.className="slider-selection",l=document.createElement("div"),l.className="slider-track-high",m=document.createElement("div"),m.className="slider-handle min-slider-handle",n=document.createElement("div"),n.className="slider-handle max-slider-handle",r.appendChild(k),r.appendChild(j),r.appendChild(l),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(g=0;g<this.options.ticks.length;g++){var s=document.createElement("div");s.className="slider-tick",this.ticks.push(s),r.appendChild(s)}j.className+=" tick-slider-selection"}if(r.appendChild(m),r.appendChild(n),this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",g=0;g<this.options.ticks_labels.length;g++){var t=document.createElement("div");t.className="slider-tick-label",t.innerHTML=this.options.ticks_labels[g],this.tickLabels.push(t),this.tickLabelContainer.appendChild(t)}var u=function(a){var b=document.createElement("div");b.className="tooltip-arrow";var c=document.createElement("div");c.className="tooltip-inner",a.appendChild(b),a.appendChild(c)},v=document.createElement("div");v.className="tooltip tooltip-main",u(v);var w=document.createElement("div");w.className="tooltip tooltip-min",u(w);var x=document.createElement("div");x.className="tooltip tooltip-max",u(x),this.sliderElem.appendChild(r),this.sliderElem.appendChild(v),this.sliderElem.appendChild(w),this.sliderElem.appendChild(x),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),q.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(a&&(this.$element=a(this.element),this.$sliderElem=a(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),e[this.options.scale]&&(this.options.scale=e[this.options.scale]),p===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(a){this._removeProperty(this.trackLow,a),this._removeProperty(this.trackSelection,a),this._removeProperty(this.trackHigh,a)},this),[this.handle1,this.handle2].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(a){this._removeProperty(a,"left"),this._removeProperty(a,"top"),this._removeProperty(a,"margin-left"),this._removeProperty(a,"margin-top"),this._removeClass(a,"right"),this._removeClass(a,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=o,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this._state.value=this.options.range?[this.options.value,this.options.max]:this.options.value,this.trackLow=k||this.trackLow,this.trackSelection=j||this.trackSelection,this.trackHigh=l||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=m||this.handle1,this.handle2=n||this.handle2,p===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),g=0;g<this.ticks.length;g++)this._removeClass(this.ticks[g],"round triangle hide");var y=["round","triangle","custom"],z=-1!==y.indexOf(this.options.handle);if(z)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),g=0;g<this.ticks.length;g++)this._addClass(this.ticks[g],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchCapable&&this.sliderElem.addEventListener("touchstart",this.mousedown,!1),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var d={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},e={linear:{toValue:function(a){var b=a/100*(this.options.max-this.options.min);if(this.options.ticks_positions.length>0){for(var c,d,e,f=0,g=0;g<this.options.ticks_positions.length;g++)if(a<=this.options.ticks_positions[g]){c=g>0?this.options.ticks[g-1]:0,e=g>0?this.options.ticks_positions[g-1]:0,d=this.options.ticks[g],f=this.options.ticks_positions[g];break}if(g>0){var h=(a-e)/(f-e);b=c+h*(d-c)}}var i=this.options.min+Math.round(b/this.options.step)*this.options.step;return i<this.options.min?this.options.min:i>this.options.max?this.options.max:i},toPercentage:function(a){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var b,c,d,e=0,f=0;f<this.options.ticks.length;f++)if(a<=this.options.ticks[f]){b=f>0?this.options.ticks[f-1]:0,d=f>0?this.options.ticks_positions[f-1]:0,c=this.options.ticks[f],e=this.options.ticks_positions[f];break}if(f>0){var g=(a-b)/(c-b);return d+g*(e-d)}}return 100*(a-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(a){var b=0===this.options.min?0:Math.log(this.options.min),c=Math.log(this.options.max),d=Math.exp(b+(c-b)*a/100);return d=this.options.min+Math.round((d-this.options.min)/this.options.step)*this.options.step,d<this.options.min?this.options.min:d>this.options.max?this.options.max:d},toPercentage:function(a){if(this.options.max===this.options.min)return 0;var b=Math.log(this.options.max),c=0===this.options.min?0:Math.log(this.options.min),d=0===a?0:Math.log(a);return 100*(d-c)/(b-c)}}};if(b=function(a,b){return c.call(this,a,b),this},b.prototype={_init:function(){},constructor:b,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(a){return Array.isArray(a)?a[0]+" : "+a[1]:a},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(a,b,c){a||(a=0);var d=this.getValue();this._state.value=this._validateInputValue(a);var e=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=e(this._state.value[0]),this._state.value[1]=e(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=e(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),this._state.value[1]="after"===this.options.selection?this.options.max:this.options.min),this._state.percentage=this.options.max>this.options.min?[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:[0,0,100],this._layout();var f=this.options.range?this._state.value:this._state.value[0];return b===!0&&this._trigger("slide",f),d!==f&&c===!0&&this._trigger("change",{oldValue:d,newValue:f}),this._setDataVal(f),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),a&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(a,b){return this._bindNonQueryEventHandler(a,b),this},off:function(b,c){a?(this.$element.off(b,c),this.$sliderElem.off(b,c)):this._unbindNonQueryEventHandler(b,c)},getAttribute:function(a){return a?this.options[a]:this.options},setAttribute:function(a,b){return this.options[a]=b,this},refresh:function(){return this._removeSliderEventHandlers(),c.call(this,this.element,this.options),a&&a.data(this.element,"slider",this),this},relayout:function(){return this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.handle2.removeEventListener("focus",this.handle2Keydown,!1),this.handle2.removeEventListener("blur",this.handle2Keydown,!1),this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.mousedown,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1)},_bindNonQueryEventHandler:function(a,b){void 0===this.eventToCallbackMap[a]&&(this.eventToCallbackMap[a]=[]),this.eventToCallbackMap[a].push(b)},_unbindNonQueryEventHandler:function(a,b){var c=this.eventToCallbackMap[a];if(void 0!==c)for(var d=0;d<c.length;d++)if(c[d]===b){c.splice(d,1);break}},_cleanUpEventCallbacksMap:function(){for(var a=Object.keys(this.eventToCallbackMap),b=0;b<a.length;b++){var c=a[b];this.eventToCallbackMap[c]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var a;if(a=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=a[0]+"%",this.handle2.style[this.stylePos]=a[1]+"%",Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var b=Math.max.apply(Math,this.options.ticks),c=Math.min.apply(Math,this.options.ticks),d="vertical"===this.options.orientation?"height":"width",e="vertical"===this.options.orientation?"marginTop":"marginLeft",f=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var g=0;if(0===this.options.ticks_positions.length)this.tickLabelContainer.style[e]=-f/2+"px",g=this.tickLabelContainer.offsetHeight;else for(h=0;h<this.tickLabelContainer.childNodes.length;h++)this.tickLabelContainer.childNodes[h].offsetHeight>g&&(g=this.tickLabelContainer.childNodes[h].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=g+"px")}for(var h=0;h<this.options.ticks.length;h++){var i=this.options.ticks_positions[h]||100*(this.options.ticks[h]-c)/(b-c);this.ticks[h].style[this.stylePos]=i+"%",this._removeClass(this.ticks[h],"in-selection"),this.options.range?i>=a[0]&&i<=a[1]&&this._addClass(this.ticks[h],"in-selection"):"after"===this.options.selection&&i>=a[0]?this._addClass(this.ticks[h],"in-selection"):"before"===this.options.selection&&i<=a[0]&&this._addClass(this.ticks[h],"in-selection"),this.tickLabels[h]&&(this.tickLabels[h].style[d]=f+"px",void 0!==this.options.ticks_positions[h]&&(this.tickLabels[h].style.position="absolute",this.tickLabels[h].style[this.stylePos]=this.options.ticks_positions[h]+"%",this.tickLabels[h].style[e]=-f/2+"px"))}}var j;if(this.options.range){j=this.options.formatter(this._state.value),this._setText(this.tooltipInner,j),this.tooltip.style[this.stylePos]=(a[1]+a[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var k=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,k);var l=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,l),this.tooltip_min.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=a[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else j=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,j),this.tooltip.style[this.stylePos]=a[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(a[0],a[1])+"%",this.trackSelection.style.top=Math.min(a[0],a[1])+"%",this.trackSelection.style.height=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(a[0],a[1])+"%",this.trackSelection.style.left=Math.min(a[0],a[1])+"%",this.trackSelection.style.width=Math.abs(a[0]-a[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(a[0],a[1])-Math.abs(a[0]-a[1])+"%";var m=this.tooltip_min.getBoundingClientRect(),n=this.tooltip_max.getBoundingClientRect();m.right>n.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_removeProperty:function(a,b){a.style.removeProperty?a.style.removeProperty(b):a.style.removeAttribute(b)},_mousedown:function(a){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var b=this._getPercentage(a);if(this.options.range){var c=Math.abs(this._state.percentage[0]-b),d=Math.abs(this._state.percentage[1]-b);this._state.dragged=d>c?0:1}else this._state.dragged=0;this._state.percentage[this._state.dragged]=b,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var e=this._calculateValue();return this._trigger("slideStart",e),this._setDataVal(e),this.setValue(e,!1,!0),this._pauseEvent(a),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_triggerFocusOnHandle:function(a){0===a&&this.handle1.focus(),1===a&&this.handle2.focus()},_keydown:function(a,b){if(!this._state.enabled)return!1;var c;switch(b.keyCode){case 37:case 40:c=-1;break;case 39:case 38:c=1}if(c){if(this.options.natural_arrow_keys){var d="vertical"===this.options.orientation&&!this.options.reversed,e="horizontal"===this.options.orientation&&this.options.reversed;(d||e)&&(c=-c)}var f=this._state.value[a]+c*this.options.step;return this.options.range&&(f=[a?this._state.value[0]:f,a?f:this._state.value[1]]),this._trigger("slideStart",f),this._setDataVal(f),this.setValue(f,!0,!0),this._setDataVal(f),this._trigger("slideStop",f),this._layout(),this._pauseEvent(b),!1}},_pauseEvent:function(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.returnValue=!1},_mousemove:function(a){if(!this._state.enabled)return!1;var b=this._getPercentage(a);this._adjustPercentageForRangeSliders(b),this._state.percentage[this._state.dragged]=b,this._layout();var c=this._calculateValue(!0);return this.setValue(c,!0,!0),!1},_adjustPercentageForRangeSliders:function(a){if(this.options.range){var b=this._getNumDigitsAfterDecimalPlace(a);b=b?b-1:0;var c=this._applyToFixedAndParseFloat(a,b);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],b)<c?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],b)>c&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var a=this._calculateValue(!0);return this._layout(),this._setDataVal(a),this._trigger("slideStop",a),!1},_calculateValue:function(a){var b;if(this.options.range?(b=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(b[0]=this._toValue(this._state.percentage[0]),b[0]=this._applyPrecision(b[0])),100!==this._state.percentage[1]&&(b[1]=this._toValue(this._state.percentage[1]),b[1]=this._applyPrecision(b[1]))):(b=this._toValue(this._state.percentage[0]),b=parseFloat(b),b=this._applyPrecision(b)),a){for(var c=[b,1/0],d=0;d<this.options.ticks.length;d++){var e=Math.abs(this.options.ticks[d]-b);e<=c[1]&&(c=[this.options.ticks[d],e])}if(c[1]<=this.options.ticks_snap_bounds)return c[0]}return b},_applyPrecision:function(a){var b=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(a,b)},_getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0},_applyToFixedAndParseFloat:function(a,b){var c=a.toFixed(b);return parseFloat(c)},_getPercentage:function(a){!this.touchCapable||"touchstart"!==a.type&&"touchmove"!==a.type||(a=a.touches[0]);var b=a[this.mousePos],c=this._state.offset[this.stylePos],d=b-c,e=d/this._state.size*100;return e=Math.round(e/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(e=100-e),Math.max(0,Math.min(100,e))},_validateInputValue:function(a){if("number"==typeof a)return a;if(Array.isArray(a))return this._validateArray(a),a;throw new Error(d.formatInvalidInputErrorMsg(a))},_validateArray:function(a){for(var b=0;b<a.length;b++){var c=a[b];if("number"!=typeof c)throw new Error(d.formatInvalidInputErrorMsg(c))}},_setDataVal:function(a){this.element.setAttribute("data-value",a),this.element.setAttribute("value",a),this.element.value=a},_trigger:function(b,c){c=c||0===c?c:void 0;var d=this.eventToCallbackMap[b];if(d&&d.length)for(var e=0;e<d.length;e++){var f=d[e];f(c)}a&&this._triggerJQueryEvent(b,c)},_triggerJQueryEvent:function(a,b){var c={type:a,value:b};this.$element.trigger(c),this.$sliderElem.trigger(c)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(a,b){"undefined"!=typeof a.innerText?a.innerText=b:"undefined"!=typeof a.textContent&&(a.textContent=b)},_removeClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)");d=d.replace(g," ")}a.className=d.trim()},_addClass:function(a,b){for(var c=b.split(" "),d=a.className,e=0;e<c.length;e++){var f=c[e],g=new RegExp("(?:\\s|^)"+f+"(?:\\s|$)"),h=g.test(d);h||(d+=" "+f)}a.className=d.trim()},_offsetLeft:function(a){return a.getBoundingClientRect().left},_offsetTop:function(a){for(var b=a.offsetTop;(a=a.offsetParent)&&!isNaN(a.offsetTop);)b+=a.offsetTop;return b},_offset:function(a){return{left:this._offsetLeft(a),top:this._offsetTop(a)}},_css:function(b,c,d){if(a)a.style(b,c,d);else{var e=c.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()});b.style[e]=d}},_toValue:function(a){return this.options.scale.toValue.apply(this,[a])},_toPercentage:function(a){return this.options.scale.toPercentage.apply(this,[a])},_setTooltipPosition:function(){var a=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var b=this.options.tooltip_position||"right",c="left"===b?"right":"left";a.forEach(function(a){this._addClass(a,b),a.style[c]="100%"}.bind(this))}else a.forEach("bottom"===this.options.tooltip_position?function(a){this._addClass(a,"bottom"),a.style.top="22px"}.bind(this):function(a){this._addClass(a,"top"),a.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},a){var f=a.fn.slider?"bootstrapSlider":"slider";a.bridget(f,b)}}(a),b});

/***/ },
/* 12 */
/***/ function(module, exports) {

	(function() { module.exports = this["$"]; }());

/***/ },
/* 13 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (root, factory) {
	  if (true) {
	    // AMD. Register as an anonymous module unless amdModuleId is set
	    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function () {
	      return (root['SignaturePad'] = factory());
	    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	  } else if (typeof exports === 'object') {
	    // Node. Does not work with strict CommonJS, but
	    // only CommonJS-like environments that support module.exports,
	    // like Node.
	    module.exports = factory();
	  } else {
	    root['SignaturePad'] = factory();
	  }
	}(this, function () {
	
	/*!
	 * Signature Pad v1.5.3
	 * https://github.com/szimek/signature_pad
	 *
	 * Copyright 2016 Szymon Nowak
	 * Released under the MIT license
	 *
	 * The main idea and some parts of the code (e.g. drawing variable width Bzier curve) are taken from:
	 * http://corner.squareup.com/2012/07/smoother-signatures.html
	 *
	 * Implementation of interpolation using cubic Bzier curves is taken from:
	 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
	 *
	 * Algorithm for approximated length of a Bzier curve is taken from:
	 * http://www.lemoda.net/maths/bezier-length/index.html
	 *
	 */
	var SignaturePad = (function (document) {
	    "use strict";
	
	    var SignaturePad = function (canvas, options) {
	        var self = this,
	            opts = options || {};
	
	        this.velocityFilterWeight = opts.velocityFilterWeight || 0.7;
	        this.minWidth = opts.minWidth || 0.5;
	        this.maxWidth = opts.maxWidth || 2.5;
	        this.dotSize = opts.dotSize || function () {
	            return (this.minWidth + this.maxWidth) / 2;
	        };
	        this.penColor = opts.penColor || "black";
	        this.backgroundColor = opts.backgroundColor || "rgba(0,0,0,0)";
	        this.onEnd = opts.onEnd;
	        this.onBegin = opts.onBegin;
	
	        this._canvas = canvas;
	        this._ctx = canvas.getContext("2d");
	        this.clear();
	
	        // we need add these inline so they are available to unbind while still having
	        //  access to 'self' we could use _.bind but it's not worth adding a dependency
	        this._handleMouseDown = function (event) {
	            if (event.which === 1) {
	                self._mouseButtonDown = true;
	                self._strokeBegin(event);
	            }
	        };
	
	        this._handleMouseMove = function (event) {
	            if (self._mouseButtonDown) {
	                self._strokeUpdate(event);
	            }
	        };
	
	        this._handleMouseUp = function (event) {
	            if (event.which === 1 && self._mouseButtonDown) {
	                self._mouseButtonDown = false;
	                self._strokeEnd(event);
	            }
	        };
	
	        this._handleTouchStart = function (event) {
	            if (event.targetTouches.length == 1) {
	                var touch = event.changedTouches[0];
	                self._strokeBegin(touch);
	             }
	        };
	
	        this._handleTouchMove = function (event) {
	            // Prevent scrolling.
	            event.preventDefault();
	
	            var touch = event.targetTouches[0];
	            self._strokeUpdate(touch);
	        };
	
	        this._handleTouchEnd = function (event) {
	            var wasCanvasTouched = event.target === self._canvas;
	            if (wasCanvasTouched) {
	                event.preventDefault();
	                self._strokeEnd(event);
	            }
	        };
	
	        this._handleMouseEvents();
	        this._handleTouchEvents();
	    };
	
	    SignaturePad.prototype.clear = function () {
	        var ctx = this._ctx,
	            canvas = this._canvas;
	
	        ctx.fillStyle = this.backgroundColor;
	        ctx.clearRect(0, 0, canvas.width, canvas.height);
	        ctx.fillRect(0, 0, canvas.width, canvas.height);
	        this._reset();
	    };
	
	    SignaturePad.prototype.toDataURL = function (imageType, quality) {
	        var canvas = this._canvas;
	        return canvas.toDataURL.apply(canvas, arguments);
	    };
	
	    SignaturePad.prototype.fromDataURL = function (dataUrl) {
	        var self = this,
	            image = new Image(),
	            ratio = window.devicePixelRatio || 1,
	            width = this._canvas.width / ratio,
	            height = this._canvas.height / ratio;
	
	        this._reset();
	        image.src = dataUrl;
	        image.onload = function () {
	            self._ctx.drawImage(image, 0, 0, width, height);
	        };
	        this._isEmpty = false;
	    };
	
	    SignaturePad.prototype._strokeUpdate = function (event) {
	        var point = this._createPoint(event);
	        this._addPoint(point);
	    };
	
	    SignaturePad.prototype._strokeBegin = function (event) {
	        this._reset();
	        this._strokeUpdate(event);
	        if (typeof this.onBegin === 'function') {
	            this.onBegin(event);
	        }
	    };
	
	    SignaturePad.prototype._strokeDraw = function (point) {
	        var ctx = this._ctx,
	            dotSize = typeof(this.dotSize) === 'function' ? this.dotSize() : this.dotSize;
	
	        ctx.beginPath();
	        this._drawPoint(point.x, point.y, dotSize);
	        ctx.closePath();
	        ctx.fill();
	    };
	
	    SignaturePad.prototype._strokeEnd = function (event) {
	        var canDrawCurve = this.points.length > 2,
	            point = this.points[0];
	
	        if (!canDrawCurve && point) {
	            this._strokeDraw(point);
	        }
	        if (typeof this.onEnd === 'function') {
	            this.onEnd(event);
	        }
	    };
	
	    SignaturePad.prototype._handleMouseEvents = function () {
	        this._mouseButtonDown = false;
	
	        this._canvas.addEventListener("mousedown", this._handleMouseDown);
	        this._canvas.addEventListener("mousemove", this._handleMouseMove);
	        document.addEventListener("mouseup", this._handleMouseUp);
	    };
	
	    SignaturePad.prototype._handleTouchEvents = function () {
	        // Pass touch events to canvas element on mobile IE11 and Edge.
	        this._canvas.style.msTouchAction = 'none';
	        this._canvas.style.touchAction = 'none';
	
	        this._canvas.addEventListener("touchstart", this._handleTouchStart);
	        this._canvas.addEventListener("touchmove", this._handleTouchMove);
	        this._canvas.addEventListener("touchend", this._handleTouchEnd);
	    };
	
	    SignaturePad.prototype.on = function () {
	        this._handleMouseEvents();
	        this._handleTouchEvents();
	    };
	
	    SignaturePad.prototype.off = function () {
	        this._canvas.removeEventListener("mousedown", this._handleMouseDown);
	        this._canvas.removeEventListener("mousemove", this._handleMouseMove);
	        document.removeEventListener("mouseup", this._handleMouseUp);
	
	        this._canvas.removeEventListener("touchstart", this._handleTouchStart);
	        this._canvas.removeEventListener("touchmove", this._handleTouchMove);
	        this._canvas.removeEventListener("touchend", this._handleTouchEnd);
	    };
	
	    SignaturePad.prototype.isEmpty = function () {
	        return this._isEmpty;
	    };
	
	    SignaturePad.prototype._reset = function () {
	        this.points = [];
	        this._lastVelocity = 0;
	        this._lastWidth = (this.minWidth + this.maxWidth) / 2;
	        this._isEmpty = true;
	        this._ctx.fillStyle = this.penColor;
	    };
	
	    SignaturePad.prototype._createPoint = function (event) {
	        var rect = this._canvas.getBoundingClientRect();
	        return new Point(
	            event.clientX - rect.left,
	            event.clientY - rect.top
	        );
	    };
	
	    SignaturePad.prototype._addPoint = function (point) {
	        var points = this.points,
	            c2, c3,
	            curve, tmp;
	
	        points.push(point);
	
	        if (points.length > 2) {
	            // To reduce the initial lag make it work with 3 points
	            // by copying the first point to the beginning.
	            if (points.length === 3) points.unshift(points[0]);
	
	            tmp = this._calculateCurveControlPoints(points[0], points[1], points[2]);
	            c2 = tmp.c2;
	            tmp = this._calculateCurveControlPoints(points[1], points[2], points[3]);
	            c3 = tmp.c1;
	            curve = new Bezier(points[1], c2, c3, points[2]);
	            this._addCurve(curve);
	
	            // Remove the first element from the list,
	            // so that we always have no more than 4 points in points array.
	            points.shift();
	        }
	    };
	
	    SignaturePad.prototype._calculateCurveControlPoints = function (s1, s2, s3) {
	        var dx1 = s1.x - s2.x, dy1 = s1.y - s2.y,
	            dx2 = s2.x - s3.x, dy2 = s2.y - s3.y,
	
	            m1 = {x: (s1.x + s2.x) / 2.0, y: (s1.y + s2.y) / 2.0},
	            m2 = {x: (s2.x + s3.x) / 2.0, y: (s2.y + s3.y) / 2.0},
	
	            l1 = Math.sqrt(dx1*dx1 + dy1*dy1),
	            l2 = Math.sqrt(dx2*dx2 + dy2*dy2),
	
	            dxm = (m1.x - m2.x),
	            dym = (m1.y - m2.y),
	
	            k = l2 / (l1 + l2),
	            cm = {x: m2.x + dxm*k, y: m2.y + dym*k},
	
	            tx = s2.x - cm.x,
	            ty = s2.y - cm.y;
	
	        return {
	            c1: new Point(m1.x + tx, m1.y + ty),
	            c2: new Point(m2.x + tx, m2.y + ty)
	        };
	    };
	
	    SignaturePad.prototype._addCurve = function (curve) {
	        var startPoint = curve.startPoint,
	            endPoint = curve.endPoint,
	            velocity, newWidth;
	
	        velocity = endPoint.velocityFrom(startPoint);
	        velocity = this.velocityFilterWeight * velocity
	            + (1 - this.velocityFilterWeight) * this._lastVelocity;
	
	        newWidth = this._strokeWidth(velocity);
	        this._drawCurve(curve, this._lastWidth, newWidth);
	
	        this._lastVelocity = velocity;
	        this._lastWidth = newWidth;
	    };
	
	    SignaturePad.prototype._drawPoint = function (x, y, size) {
	        var ctx = this._ctx;
	
	        ctx.moveTo(x, y);
	        ctx.arc(x, y, size, 0, 2 * Math.PI, false);
	        this._isEmpty = false;
	    };
	
	    SignaturePad.prototype._drawCurve = function (curve, startWidth, endWidth) {
	        var ctx = this._ctx,
	            widthDelta = endWidth - startWidth,
	            drawSteps, width, i, t, tt, ttt, u, uu, uuu, x, y;
	
	        drawSteps = Math.floor(curve.length());
	        ctx.beginPath();
	        for (i = 0; i < drawSteps; i++) {
	            // Calculate the Bezier (x, y) coordinate for this step.
	            t = i / drawSteps;
	            tt = t * t;
	            ttt = tt * t;
	            u = 1 - t;
	            uu = u * u;
	            uuu = uu * u;
	
	            x = uuu * curve.startPoint.x;
	            x += 3 * uu * t * curve.control1.x;
	            x += 3 * u * tt * curve.control2.x;
	            x += ttt * curve.endPoint.x;
	
	            y = uuu * curve.startPoint.y;
	            y += 3 * uu * t * curve.control1.y;
	            y += 3 * u * tt * curve.control2.y;
	            y += ttt * curve.endPoint.y;
	
	            width = startWidth + ttt * widthDelta;
	            this._drawPoint(x, y, width);
	        }
	        ctx.closePath();
	        ctx.fill();
	    };
	
	    SignaturePad.prototype._strokeWidth = function (velocity) {
	        return Math.max(this.maxWidth / (velocity + 1), this.minWidth);
	    };
	
	
	    var Point = function (x, y, time) {
	        this.x = x;
	        this.y = y;
	        this.time = time || new Date().getTime();
	    };
	
	    Point.prototype.velocityFrom = function (start) {
	        return (this.time !== start.time) ? this.distanceTo(start) / (this.time - start.time) : 1;
	    };
	
	    Point.prototype.distanceTo = function (start) {
	        return Math.sqrt(Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2));
	    };
	
	    var Bezier = function (startPoint, control1, control2, endPoint) {
	        this.startPoint = startPoint;
	        this.control1 = control1;
	        this.control2 = control2;
	        this.endPoint = endPoint;
	    };
	
	    // Returns approximated length.
	    Bezier.prototype.length = function () {
	        var steps = 10,
	            length = 0,
	            i, t, cx, cy, px, py, xdiff, ydiff;
	
	        for (i = 0; i <= steps; i++) {
	            t = i / steps;
	            cx = this._point(t, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x);
	            cy = this._point(t, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);
	            if (i > 0) {
	                xdiff = cx - px;
	                ydiff = cy - py;
	                length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);
	            }
	            px = cx;
	            py = cy;
	        }
	        return length;
	    };
	
	    Bezier.prototype._point = function (t, start, c1, c2, end) {
	        return          start * (1.0 - t) * (1.0 - t)  * (1.0 - t)
	               + 3.0 *  c1    * (1.0 - t) * (1.0 - t)  * t
	               + 3.0 *  c2    * (1.0 - t) * t          * t
	               +        end   * t         * t          * t;
	    };
	
	    return SignaturePad;
	})(document);
	
	return SignaturePad;
	
	}));


/***/ },
/* 14 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	var angular = __webpack_require__(1);
	var alias = __webpack_require__(15);
	exports.alias = alias;
	var autosave = __webpack_require__(16);
	exports.autosave = autosave;
	var popover = __webpack_require__(24);
	exports.popover = popover;
	var required = __webpack_require__(25);
	exports.required = required;
	exports.moduleName = 'rl.ui.behaviors';
	angular.module(exports.moduleName, [
	    alias.moduleName,
	    autosave.moduleName,
	    popover.moduleName,
	    required.moduleName,
	]);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmVoYXZpb3JzLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJlaGF2aW9ycy5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLElBQVksS0FBSyxXQUFNLGVBQWUsQ0FBQyxDQUFBO0FBSzlCLGFBQUs7QUFKZCxJQUFZLFFBQVEsV0FBTSxxQkFBcUIsQ0FBQyxDQUFBO0FBSWhDLGdCQUFRO0FBSHhCLElBQVksT0FBTyxXQUFNLG1CQUFtQixDQUFDLENBQUE7QUFHbkIsZUFBTztBQUZqQyxJQUFZLFFBQVEsV0FBTSxxQkFBcUIsQ0FBQyxDQUFBO0FBRWIsZ0JBQVE7QUFFaEMsa0JBQVUsR0FBVyxpQkFBaUIsQ0FBQztBQUVsRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUU7SUFDMUIsS0FBSyxDQUFDLFVBQVU7SUFDaEIsUUFBUSxDQUFDLFVBQVU7SUFDbkIsT0FBTyxDQUFDLFVBQVU7SUFDbEIsUUFBUSxDQUFDLFVBQVU7Q0FDbkIsQ0FBQyxDQUFDIn0=

/***/ },
/* 15 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.behaviors.alias';
	exports.directiveName = 'rlAlias';
	exports.controllerName = 'AliasController';
	var AliasController = (function () {
	    function AliasController($scope, $attrs, $parse, $interpolate) {
	        this.$scope = $scope;
	        this.$attrs = $attrs;
	        this.$parse = $parse;
	        this.$interpolate = $interpolate;
	        var initialValue = this.getValue();
	        this.resolveAlias(initialValue);
	        $scope.$watch(this.getValue.bind(this), this.resolveAlias.bind(this));
	    }
	    AliasController.prototype.getValue = function () {
	        this.expression = this.$attrs.rlAlias.split(' as ');
	        return this.$parse(this.expression[0])(this.$scope);
	    };
	    AliasController.prototype.resolveAlias = function (value) {
	        var alias = this.$interpolate(this.expression[1])(this.$scope);
	        if (alias != null) {
	            this.$scope[alias] = value;
	        }
	    };
	    AliasController.$inject = ['$scope', '$attrs', '$parse', '$interpolate'];
	    return AliasController;
	}());
	exports.AliasController = AliasController;
	function alias() {
	    return {
	        restrict: 'A',
	        controller: exports.controllerName,
	    };
	}
	exports.alias = alias;
	angular.module(exports.moduleName, [])
	    .directive(exports.directiveName, alias)
	    .controller(exports.controllerName, AliasController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWxpYXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhbGlhcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUV4QixrQkFBVSxHQUFXLHVCQUF1QixDQUFDO0FBQzdDLHFCQUFhLEdBQVcsU0FBUyxDQUFDO0FBQ2xDLHNCQUFjLEdBQVcsaUJBQWlCLENBQUM7QUFNdEQ7SUFFQyx5QkFBb0IsTUFBc0IsRUFDOUIsTUFBd0IsRUFDeEIsTUFBNkIsRUFDN0IsWUFBeUM7UUFIakMsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7UUFDOUIsV0FBTSxHQUFOLE1BQU0sQ0FBa0I7UUFDeEIsV0FBTSxHQUFOLE1BQU0sQ0FBdUI7UUFDN0IsaUJBQVksR0FBWixZQUFZLENBQTZCO1FBQ3BELElBQUksWUFBWSxHQUFRLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUN4QyxJQUFJLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2hDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBSU8sa0NBQVEsR0FBaEI7UUFDQyxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNwRCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFTyxzQ0FBWSxHQUFwQixVQUFxQixLQUFVO1FBQzlCLElBQUksS0FBSyxHQUFXLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUN2RSxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEtBQUssQ0FBQztRQUM1QixDQUFDO0lBQ0YsQ0FBQztJQXRCTSx1QkFBTyxHQUFhLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsY0FBYyxDQUFDLENBQUM7SUF1QjNFLHNCQUFDO0FBQUQsQ0FBQyxBQXhCRCxJQXdCQztBQXhCWSx1QkFBZSxrQkF3QjNCLENBQUE7QUFFRDtJQUNDLE1BQU0sQ0FBQztRQUNOLFFBQVEsRUFBRSxHQUFHO1FBQ2IsVUFBVSxFQUFFLHNCQUFjO0tBQzFCLENBQUM7QUFDSCxDQUFDO0FBTGUsYUFBSyxRQUtwQixDQUFBO0FBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixTQUFTLENBQUMscUJBQWEsRUFBRSxLQUFLLENBQUM7S0FDL0IsVUFBVSxDQUFDLHNCQUFjLEVBQUUsZUFBZSxDQUFDLENBQUMifQ==

/***/ },
/* 16 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __parentChild = typescript_angular_utilities_1.services.parentChildBehavior;
	var __objectUtility = typescript_angular_utilities_1.services.object;
	var autosave_service_1 = __webpack_require__(17);
	exports.moduleName = 'rl.ui.behaviors.autosave';
	exports.directiveName = 'rlAutosave';
	exports.controllerName = 'AutosaveController';
	var AutosaveController = (function () {
	    function AutosaveController($scope, $attrs, $parse, $element, $timeout, autosaveFactory, parentChildBehavior, objectUtility) {
	        this.$scope = $scope;
	        this.$attrs = $attrs;
	        this.$parse = $parse;
	        this.$element = $element;
	        this.$timeout = $timeout;
	        this.autosaveFactory = autosaveFactory;
	        this.parentChildBehavior = parentChildBehavior;
	        this.objectUtility = objectUtility;
	    }
	    AutosaveController.prototype.$onInit = function () {
	        var _this = this;
	        this.keyupListener = function (callback) {
	            _this.$element.on('keyup', function () { _this.$scope.$apply(callback); });
	            return function () {
	                _this.$element.off('keyup');
	            };
	        };
	        var saveExpression = this.$parse(this.$attrs.save);
	        var save = function () {
	            return saveExpression(_this.$scope);
	        };
	        var debounce = this.$parse(this.$attrs.debounceDuration)(this.$scope);
	        this.autosave = this.autosaveFactory.getInstance({
	            save: save,
	            contentForm: this.form,
	            debounceDuration: debounce,
	            triggers: this.$attrs.triggers,
	            setChangeListener: this.keyupListener,
	            saveWhenInvalid: this.$parse(this.$attrs.saveWhenInvalid)(this.$scope),
	        });
	        var behavior = {
	            autosave: this.autosave.autosave,
	        };
	        // register autosave behavior and assign the value back to the parent
	        var childLink = this.$parse(this.$attrs.rlAutosave)(this.$scope);
	        this.parentChildBehavior.registerChildBehavior(childLink, behavior);
	    };
	    AutosaveController.$inject = ['$scope',
	        '$attrs',
	        '$parse',
	        '$element',
	        '$timeout',
	        autosave_service_1.factoryName,
	        __parentChild.serviceName,
	        __objectUtility.serviceName];
	    return AutosaveController;
	}());
	exports.AutosaveController = AutosaveController;
	function autosave() {
	    'use strict';
	    return {
	        restrict: 'A',
	        priority: 1000,
	        require: { form: '?form' },
	        controller: exports.controllerName,
	        bindToController: true,
	    };
	}
	exports.autosave = autosave;
	angular.module(exports.moduleName, [
	    autosave_service_1.moduleName,
	    __objectUtility.moduleName,
	    __parentChild.moduleName,
	])
	    .directive(exports.directiveName, autosave)
	    .controller(exports.controllerName, AutosaveController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0b3NhdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhdXRvc2F2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUV4RCxJQUFPLGFBQWEsR0FBRyx1Q0FBUSxDQUFDLG1CQUFtQixDQUFDO0FBQ3BELElBQU8sZUFBZSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBRXpDLGlDQU1PLDBDQUEwQyxDQUFDLENBQUE7QUFHdkMsa0JBQVUsR0FBVywwQkFBMEIsQ0FBQztBQUNoRCxxQkFBYSxHQUFXLFlBQVksQ0FBQztBQUNyQyxzQkFBYyxHQUFXLG9CQUFvQixDQUFDO0FBY3pEO0lBY0MsNEJBQW9CLE1BQXNCLEVBQy9CLE1BQTJCLEVBQzNCLE1BQTZCLEVBQzdCLFFBQWtDLEVBQ2xDLFFBQWlDLEVBQ2pDLGVBQXdDLEVBQ3hDLG1CQUE4RCxFQUM5RCxhQUE2QztRQVBwQyxXQUFNLEdBQU4sTUFBTSxDQUFnQjtRQUMvQixXQUFNLEdBQU4sTUFBTSxDQUFxQjtRQUMzQixXQUFNLEdBQU4sTUFBTSxDQUF1QjtRQUM3QixhQUFRLEdBQVIsUUFBUSxDQUEwQjtRQUNsQyxhQUFRLEdBQVIsUUFBUSxDQUF5QjtRQUNqQyxvQkFBZSxHQUFmLGVBQWUsQ0FBeUI7UUFDeEMsd0JBQW1CLEdBQW5CLG1CQUFtQixDQUEyQztRQUM5RCxrQkFBYSxHQUFiLGFBQWEsQ0FBZ0M7SUFBRyxDQUFDO0lBRTVELG9DQUFPLEdBQVA7UUFBQSxpQkErQkM7UUE5QkEsSUFBSSxDQUFDLGFBQWEsR0FBRyxVQUFDLFFBQTRCO1lBQ2pELEtBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxjQUFjLEtBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENB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

/***/ },
/* 17 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __notification = typescript_angular_utilities_1.services.notification;
	var autosaveAction_service_1 = __webpack_require__(19);
	var triggers = __webpack_require__(20);
	exports.triggers = triggers;
	var form_service_1 = __webpack_require__(23);
	exports.moduleName = 'rl.ui.services.autosave';
	exports.factoryName = 'autosaveFactory';
	var AutosaveService = (function () {
	    function AutosaveService(notification, autosaveService, options, triggerServiceFactory, formService) {
	        var _this = this;
	        this.notification = notification;
	        this.autosaveService = autosaveService;
	        this.formService = formService;
	        this.autosave = function () {
	            var data = [];
	            for (var _i = 0; _i < arguments.length; _i++) {
	                data[_i - 0] = arguments[_i];
	            }
	            var result = _this.validateAndSave.apply(_this, data);
	            if (_.isBoolean(result)) {
	                return result;
	            }
	            else {
	                _this.autosaveService.trigger(result);
	                return true;
	            }
	        };
	        this.contentForm = options.contentForm || this.nullForm();
	        this.save = options.save;
	        this.saveWhenInvalid = options.saveWhenInvalid;
	        this.triggerService = triggerServiceFactory.getInstance();
	        this.configureTriggers(options);
	        this.triggerService.setTriggers(options.triggers, this.autosave);
	    }
	    AutosaveService.prototype.validateAndSave = function () {
	        var _this = this;
	        var data = [];
	        for (var _i = 0; _i < arguments.length; _i++) {
	            data[_i - 0] = arguments[_i];
	        }
	        if (this.contentForm.$pristine) {
	            return true;
	        }
	        if (this.contentForm.$valid || this.saveWhenInvalid) {
	            var promise = this.save.apply(this, data);
	            if (!_.isUndefined(promise)) {
	                return promise.then(function () {
	                    if (_this.contentForm != null) {
	                        _this.contentForm.$setPristine();
	                    }
	                });
	            }
	            return true;
	        }
	        else {
	            this.notification.warning(this.formService.getAggregateError(this.contentForm));
	            return false;
	        }
	    };
	    AutosaveService.prototype.configureTriggers = function (options) {
	        this.triggerService.triggers.onChange.configure({
	            form: options.contentForm,
	            setChangeListener: options.setChangeListener,
	            debounceDuration: options.debounceDuration,
	            saveWhenInvalid: options.saveWhenInvalid,
	        });
	    };
	    AutosaveService.prototype.nullForm = function () {
	        return {
	            $pristine: false,
	            $dirty: true,
	            $valid: true,
	            $setPristine: function () {
	                return;
	            },
	        };
	    };
	    return AutosaveService;
	}());
	autosaveServiceFactory.$inject = [__notification.serviceName, autosaveAction_service_1.serviceName, triggers.factoryName, form_service_1.serviceName];
	function autosaveServiceFactory(notification, autosaveService, triggerServiceFactory, formService) {
	    'use strict';
	    return {
	        getInstance: function (options) {
	            return new AutosaveService(notification, autosaveService, options, triggerServiceFactory, formService);
	        }
	    };
	}
	angular.module(exports.moduleName, [__notification.moduleName, autosaveAction_service_1.moduleName, triggers.moduleName, form_service_1.moduleName])
	    .factory(exports.factoryName, autosaveServiceFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0b3NhdmUuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImF1dG9zYXZlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxjQUFjLEdBQUcsdUNBQVEsQ0FBQyxZQUFZLENBQUM7QUFFOUMsdUNBSU8sMENBQTBDLENBQUMsQ0FBQTtBQUNsRCxJQUFZLFFBQVEsV0FBTSw2QkFBNkIsQ0FBQyxDQUFBO0FBSS9DLGdCQUFRO0FBSGpCLDZCQUF1RixzQkFBc0IsQ0FBQyxDQUFBO0FBS25HLGtCQUFVLEdBQVcseUJBQXlCLENBQUM7QUFDL0MsbUJBQVcsR0FBVyxpQkFBaUIsQ0FBQztBQWlCbkQ7SUFNQyx5QkFBb0IsWUFBaUQsRUFDekQsZUFBdUMsRUFDL0MsT0FBZ0MsRUFDaEMscUJBQXNELEVBQzlDLFdBQXlCO1FBVnRDLGlCQXdFQztRQWxFb0IsaUJBQVksR0FBWixZQUFZLENBQXFDO1FBQ3pELG9CQUFlLEdBQWYsZUFBZSxDQUF3QjtRQUd2QyxnQkFBVyxHQUFYLFdBQVcsQ0FBYztRQVVyQyxhQUFRLEdBQWtDO1lBQUMsY0FBYztpQkFBZCxXQUFjLENBQWQsc0JBQWMsQ0FBZCxJQUFjO2dCQUFkLDZCQUFjOztZQUN4RCxJQUFJLE1BQU0sR0FBcUMsS0FBSSxDQUFDLGVBQWUsT0FBcEIsS0FBSSxFQUFvQixJQUFJLENBQUMsQ0FBQztZQUM3RSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekIsTUFBTSxDQUFDLE1BQU0sQ0FBQztZQUNmLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDUCxLQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDckMsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNiLENBQUM7UUFDRixDQUFDLENBQUE7UUFqQkEsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUMxRCxJQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7UUFDekIsSUFBSSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUMsZUFBZSxDQUFDO1FBRS9DLElBQUksQ0FBQyxjQUFjLEdBQUcscUJBQXFCLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDMUQsSUFBSSxDQUFDLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2xFLENBQUM7SUFZRCx5Q0FBZSxHQUFmO1FBQUEsaUJBcUJDO1FBckJlLGNBQWM7YUFBZCxXQUFjLENBQWQsc0JBQWMsQ0FBZCxJQUFjO1lBQWQsNkJBQWM7O1FBQzdCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNoQyxNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ2IsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDO1lBQ3JELElBQUksT0FBTyxHQUEyQixJQUFJLENBQUMsSUFBSSxPQUFULElBQUksRUFBUyxJQUFJLENBQUMsQ0FBQztZQUV6RCxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM3QixNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztvQkFDbkIsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO3dCQUM5QixLQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksRUFBRSxDQUFDO29CQUNqQyxDQUFDO2dCQUNGLENBQUMsQ0FBQyxDQUFDO1lBQ0osQ0FBQztZQUVELE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDYixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDUCxJQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1lBQ2hGLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDZCxDQUFDO0lBQ0YsQ0FBQztJQUVPLDJDQUFpQixHQUF6QixVQUEwQixPQUFnQztRQUN6RCxJQUFJLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDO1lBQy9DLElBQUksRUFBRSxPQUFPLENBQUMsV0FBVztZQUN6QixpQkFBaUIsRUFBRSxPQUFPLENBQUMsaUJBQWlCO1lBQzVDLGdCQUFnQixFQUFFLE9BQU8sQ0FBQyxnQkFBZ0I7WUFDMUMsZUFBZSxFQUFFLE9BQU8sQ0FBQyxlQUFlO1NBQ3hDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFTyxrQ0FBUSxHQUFoQjtRQUNDLE1BQU0sQ0FBTTtZQUNYLFNBQVMsRUFBRSxLQUFLO1lBQ2hCLE1BQU0sRUFBRSxJQUFJO1lBQ1osTUFBTSxFQUFFLElBQUk7WUFDWixZQUFZO2dCQUNYLE1BQU0sQ0FBQztZQUNSLENBQUM7U0FDRCxDQUFDO0lBQ0gsQ0FBQztJQUNGLHNCQUFDO0FBQUQsQ0FBQyxBQXhFRCxJQXdFQztBQU1ELHNCQUFzQixDQUFDLE9BQU8sR0FBRyxDQUFDLGNBQWMsQ0FBQyxXQUFXLEVBQUUsb0NBQXlCLEVBQUUsUUFBUSxDQUFDLFdBQVcsRUFBRSwwQkFBZSxDQUFDLENBQUM7QUFDaEksZ0NBQWdDLFlBQWlELEVBQ3hFLGVBQXVDLEVBQ3ZDLHFCQUFzRCxFQUN0RCxXQUF5QjtJQUNqQyxZQUFZLENBQUM7SUFDYixNQUFNLENBQUM7UUFDTixXQUFXLFlBQUMsT0FBZ0M7WUFDM0MsTUFBTSxDQUFDLElBQUksZUFBZSxDQUFDLFlBQVksRUFBRSxlQUFlLEVBQUUsT0FBTyxFQUFFLHFCQUFxQixFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ3hHLENBQUM7S0FDRCxDQUFDO0FBQ0gsQ0FBQztBQUVELE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsbUNBQXdCLEVBQUUsUUFBUSxDQUFDLFVBQVUsRUFBRSx5QkFBVSxDQUFDLENBQUM7S0FDaEgsT0FBTyxDQUFDLG1CQUFXLEVBQUUsc0JBQXNCLENBQUMsQ0FBQyJ9

/***/ },
/* 18 */
/***/ function(module, exports) {

	(function() { module.exports = this["_"]; }());

/***/ },
/* 19 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var ng = __webpack_require__(1);
	exports.moduleName = 'rl.utilities.services.autosaveAction';
	exports.serviceName = 'autosaveAction';
	var AutosaveActionService = (function () {
	    function AutosaveActionService($timeout) {
	        var _this = this;
	        this.$timeout = $timeout;
	        this.completeMessageDuration = 1000;
	        this.autosaveSuccessful = function (data) {
	            return _this.resolveAutosave(data, true);
	        };
	        this.autosaveFailed = function (data) {
	            return _this.resolveAutosave(data, false);
	        };
	        this.resolveAutosave = function (data, success) {
	            _this._saving = false;
	            _this._complete = true;
	            _this._successful = success;
	            _this.$timeout(function () {
	                _this._complete = false;
	            }, _this.completeMessageDuration);
	            return data;
	        };
	    }
	    Object.defineProperty(AutosaveActionService.prototype, "saving", {
	        get: function () {
	            return this._saving;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(AutosaveActionService.prototype, "complete", {
	        get: function () {
	            return this._complete;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(AutosaveActionService.prototype, "successful", {
	        get: function () {
	            return this._successful;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    AutosaveActionService.prototype.trigger = function (promise) {
	        this._saving = true;
	        return promise.then(this.autosaveSuccessful)
	            .catch(this.autosaveFailed);
	    };
	    AutosaveActionService.$inject = ['$timeout'];
	    return AutosaveActionService;
	}());
	ng.module(exports.moduleName, [])
	    .service(exports.serviceName, AutosaveActionService);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXV0b3NhdmVBY3Rpb24uc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImF1dG9zYXZlQWN0aW9uLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxFQUFFLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkIsa0JBQVUsR0FBVyxzQ0FBc0MsQ0FBQztBQUM1RCxtQkFBVyxHQUFXLGdCQUFnQixDQUFDO0FBU2xEO0lBRUMsK0JBQW9CLFFBQTRCO1FBRmpELGlCQStDQztRQTdDb0IsYUFBUSxHQUFSLFFBQVEsQ0FBb0I7UUFFeEMsNEJBQXVCLEdBQVcsSUFBSSxDQUFDO1FBd0J2Qyx1QkFBa0IsR0FBeUIsVUFBQyxJQUFTO1lBQzVELE1BQU0sQ0FBQyxLQUFJLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQztRQUN6QyxDQUFDLENBQUE7UUFFTyxtQkFBYyxHQUF5QixVQUFDLElBQVM7WUFDeEQsTUFBTSxDQUFDLEtBQUksQ0FBQyxlQUFlLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FBQTtRQUVPLG9CQUFlLEdBQTJDLFVBQUMsSUFBUyxFQUFFLE9BQWdCO1lBQzdGLEtBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSyxDQUFDO1lBQ3JCLEtBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1lBQ3RCLEtBQUksQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDO1lBRTNCLEtBQUksQ0FBQyxRQUFRLENBQUM7Z0JBQ2IsS0FBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7WUFDeEIsQ0FBQyxFQUFFLEtBQUksQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO1lBRWpDLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDYixDQUFDLENBQUE7SUE1Q2tELENBQUM7SUFRcEQsc0JBQUkseUNBQU07YUFBVjtZQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3JCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksMkNBQVE7YUFBWjtZQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3ZCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNkNBQVU7YUFBZDtZQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ3pCLENBQUM7OztPQUFBO0lBRUQsdUNBQU8sR0FBUCxVQUFRLE9BQXlCO1FBQ2hDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1FBQ3BCLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQzthQUN4QyxLQUFLLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUF6Qk0sNkJBQU8sR0FBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBOEN6Qyw0QkFBQztBQUFELENBQUMsQUEvQ0QsSUErQ0M7QUFFRCxFQUFFLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQ3ZCLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLHFCQUFxQixDQUFDLENBQUMifQ==

/***/ },
/* 20 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var onChangeTrigger_1 = __webpack_require__(21);
	var trigger_1 = __webpack_require__(22);
	__export(__webpack_require__(21));
	__export(__webpack_require__(22));
	exports.defaultTriggers = 'onChange';
	exports.moduleName = 'rl.ui.services.autosave.triggers';
	exports.factoryName = 'autosaveTriggers';
	var TriggerService = (function () {
	    function TriggerService($rootScope, $timeout) {
	        this.triggers = {
	            onChange: new onChangeTrigger_1.OnChangeTrigger($rootScope, $timeout),
	            none: new trigger_1.Trigger('none'),
	        };
	    }
	    TriggerService.prototype.setTriggers = function (triggerString, autosave) {
	        if (triggerString == null) {
	            triggerString = exports.defaultTriggers;
	        }
	        _.each(this.triggers, function (trigger) {
	            if (trigger.hasMatch(triggerString)) {
	                trigger.setTrigger(autosave);
	            }
	        });
	    };
	    return TriggerService;
	}());
	triggerServiceFactory.$inject = ['$rootScope', '$timeout'];
	function triggerServiceFactory($rootScope, $timeout) {
	    return {
	        getInstance: function () {
	            return new TriggerService($rootScope, $timeout);
	        },
	    };
	}
	angular.module(exports.moduleName, [])
	    .factory(exports.factoryName, triggerServiceFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJpZ2dlcnMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRyaWdnZXJzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7O0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsZ0NBQWtELG1CQUFtQixDQUFDLENBQUE7QUFDdEUsd0JBQWtDLFdBQVcsQ0FBQyxDQUFBO0FBRTlDLGlCQUFjLG1CQUFtQixDQUFDLEVBQUE7QUFDbEMsaUJBQWMsV0FBVyxDQUFDLEVBQUE7QUFFZix1QkFBZSxHQUFXLFVBQVUsQ0FBQztBQUVyQyxrQkFBVSxHQUFXLGtDQUFrQyxDQUFDO0FBQ3hELG1CQUFXLEdBQVcsa0JBQWtCLENBQUM7QUFvQnBEO0lBR0Msd0JBQVksVUFBcUMsRUFBRSxRQUFpQztRQUNuRixJQUFJLENBQUMsUUFBUSxHQUFHO1lBQ2YsUUFBUSxFQUFFLElBQUksaUNBQWUsQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDO1lBQ25ELElBQUksRUFBRSxJQUFJLGlCQUFPLENBQU8sTUFBTSxDQUFDO1NBQy9CLENBQUM7SUFDSCxDQUFDO0lBRUQsb0NBQVcsR0FBWCxVQUFZLGFBQXFCLEVBQUUsUUFBb0I7UUFDdEQsRUFBRSxDQUFDLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDM0IsYUFBYSxHQUFHLHVCQUFlLENBQUM7UUFDakMsQ0FBQztRQUVELENBQUMsQ0FBQyxJQUFJLENBQU0sSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFDLE9BQXNCO1lBQ2pELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxPQUFPLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlCLENBQUM7UUFDRixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFDRixxQkFBQztBQUFELENBQUMsQUFyQkQsSUFxQkM7QUFNRCxxQkFBcUIsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxZQUFZLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDM0QsK0JBQStCLFVBQXFDLEVBQUUsUUFBaUM7SUFDdEcsTUFBTSxDQUFDO1FBQ04sV0FBVztZQUNWLE1BQU0sQ0FBQyxJQUFJLGNBQWMsQ0FBQyxVQUFVLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDakQsQ0FBQztLQUNELENBQUM7QUFDSCxDQUFDO0FBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixPQUFPLENBQUMsbUJBQVcsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDIn0=

/***/ },
/* 21 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var _ = __webpack_require__(18);
	var trigger_1 = __webpack_require__(22);
	var OnChangeTrigger = (function (_super) {
	    __extends(OnChangeTrigger, _super);
	    function OnChangeTrigger($rootScope, $timeout) {
	        _super.call(this, 'onChange');
	        this.$rootScope = $rootScope;
	        this.$timeout = $timeout;
	        this.debounceDuration = 1000;
	    }
	    OnChangeTrigger.prototype.setTrigger = function (autosave) {
	        var _this = this;
	        if (_.isUndefined(this.settings)) {
	            return;
	        }
	        this.initListeners();
	        this.$rootScope.$watch(function () {
	            return _this.settings.form != null
	                ? _this.settings.form.$dirty
	                : false;
	        }, function () { _this.triggerSaveAction(autosave); });
	        this.$rootScope.$watch(function () {
	            return _this.settings.form != null
	                ? _this.settings.form.$valid
	                : false;
	        }, function () { _this.triggerSaveAction(autosave); });
	    };
	    OnChangeTrigger.prototype.triggerSaveAction = function (autosave) {
	        var _this = this;
	        if (this.settings.form.$dirty && (this.settings.form.$valid || this.settings.saveWhenInvalid)) {
	            this.setTimer(autosave);
	            this.clearListener = this.setListener(function () {
	                _this.setTimer(autosave);
	            });
	        }
	    };
	    OnChangeTrigger.prototype.setTimer = function (autosave) {
	        var _this = this;
	        if (this.timer != null) {
	            this.$timeout.cancel(this.timer);
	        }
	        this.timer = this.$timeout(function () {
	            _this.clearListener();
	            autosave();
	        }, this.debounceDuration);
	    };
	    OnChangeTrigger.prototype.initListeners = function () {
	        this.setListener = this.settings.setChangeListener || this.nullSetListener;
	        this.clearListener = this.nullClearListener;
	    };
	    OnChangeTrigger.prototype.nullSetListener = function () {
	        console.log('No change listener available');
	        return this.nullClearListener;
	    };
	    OnChangeTrigger.prototype.nullClearListener = function () {
	        console.log('No change listener register');
	    };
	    return OnChangeTrigger;
	}(trigger_1.Trigger));
	exports.OnChangeTrigger = OnChangeTrigger;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib25DaGFuZ2VUcmlnZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsib25DaGFuZ2VUcmlnZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7Ozs7O0FBR2IsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsd0JBQWtDLFdBQVcsQ0FBQyxDQUFBO0FBVTlDO0lBQXFDLG1DQUF5QjtJQU03RCx5QkFBb0IsVUFBZ0MsRUFBVSxRQUE0QjtRQUN6RixrQkFBTSxVQUFVLENBQUMsQ0FBQztRQURDLGVBQVUsR0FBVixVQUFVLENBQXNCO1FBQVUsYUFBUSxHQUFSLFFBQVEsQ0FBb0I7UUFMbEYscUJBQWdCLEdBQVcsSUFBSSxDQUFDO0lBT3hDLENBQUM7SUFFRCxvQ0FBVSxHQUFWLFVBQVcsUUFBc0I7UUFBakMsaUJBa0JDO1FBakJBLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUM7UUFDUixDQUFDO1FBRUQsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBRXJCLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDO1lBQ3RCLE1BQU0sQ0FBQyxLQUFJLENBQUMsUUFBUSxDQUFDLElBQUksSUFBSSxJQUFJO2tCQUM5QixLQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNO2tCQUN6QixLQUFLLENBQUM7UUFDVixDQUFDLEVBQUUsY0FBUSxLQUFJLENBQUMsaUJBQWlCLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUVoRCxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQztZQUN0QixNQUFNLENBQUMsS0FBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksSUFBSTtrQkFDOUIsS0FBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTTtrQkFDekIsS0FBSyxDQUFDO1FBQ1YsQ0FBQyxFQUFFLGNBQVEsS0FBSSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVPLDJDQUFpQixHQUF6QixVQUEwQixRQUFvQjtRQUE5QyxpQkFRQztRQVBBLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUMvRixJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRXhCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztnQkFDckMsS0FBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUN6QixDQUFDLENBQUMsQ0FBQztRQUNKLENBQUM7SUFDRixDQUFDO0lBRU8sa0NBQVEsR0FBaEIsVUFBaUIsUUFBc0I7UUFBdkMsaUJBU0M7UUFSQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDeEIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2xDLENBQUM7UUFFRCxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDMUIsS0FBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3JCLFFBQVEsRUFBRSxDQUFDO1FBQ1osQ0FBQyxFQUFFLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQzNCLENBQUM7SUFFTyx1Q0FBYSxHQUFyQjtRQUNDLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsZUFBZSxDQUFDO1FBQzNFLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixDQUFDO0lBQzdDLENBQUM7SUFFTyx5Q0FBZSxHQUF2QjtRQUNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsOEJBQThCLENBQUMsQ0FBQztRQUM1QyxNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDO0lBQy9CLENBQUM7SUFFTywyQ0FBaUIsR0FBekI7UUFDQyxPQUFPLENBQUMsR0FBRyxDQUFDLDZCQUE2QixDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUNGLHNCQUFDO0FBQUQsQ0FBQyxBQWhFRCxDQUFxQyxpQkFBTyxHQWdFM0M7QUFoRVksdUJBQWUsa0JBZ0UzQixDQUFBIn0=

/***/ },
/* 22 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var _ = __webpack_require__(18);
	var Trigger = (function () {
	    function Trigger(aliases, triggerAction) {
	        this.triggerAction = triggerAction;
	        this.aliases = aliases.split(' ');
	    }
	    Trigger.prototype.setTrigger = function (autosave) {
	        if (_.isFunction(this.triggerAction)) {
	            this.triggerAction(this.settings);
	        }
	    };
	    Trigger.prototype.hasMatch = function (triggers) {
	        var _this = this;
	        var triggerList = triggers.split(' ');
	        return _.some(triggerList, function (trigger) {
	            return _.some(_this.aliases, function (alias) {
	                return trigger === alias;
	            });
	        });
	    };
	    Trigger.prototype.configure = function (settings) {
	        this.settings = settings;
	    };
	    return Trigger;
	}());
	exports.Trigger = Trigger;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJpZ2dlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRyaWdnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFTNUI7SUFJQyxpQkFBWSxPQUFlLEVBQVUsYUFBNkM7UUFBN0Msa0JBQWEsR0FBYixhQUFhLENBQWdDO1FBQ2pGLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNuQyxDQUFDO0lBRUQsNEJBQVUsR0FBVixVQUFXLFFBQXNCO1FBQ2hDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUN0QyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNuQyxDQUFDO0lBQ0YsQ0FBQztJQUVELDBCQUFRLEdBQVIsVUFBUyxRQUFnQjtRQUF6QixpQkFPQztRQU5BLElBQUksV0FBVyxHQUFhLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDaEQsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLFVBQUMsT0FBZTtZQUMxQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsT0FBTyxFQUFFLFVBQUMsS0FBYTtnQkFDekMsTUFBTSxDQUFDLE9BQU8sS0FBSyxLQUFLLENBQUM7WUFDMUIsQ0FBQyxDQUFDLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRCwyQkFBUyxHQUFULFVBQVUsUUFBbUI7UUFDNUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7SUFDMUIsQ0FBQztJQUNGLGNBQUM7QUFBRCxDQUFDLEFBMUJELElBMEJDO0FBMUJZLGVBQU8sVUEwQm5CLENBQUEifQ==

/***/ },
/* 23 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.services.form';
	exports.serviceName = 'formService';
	var FormService = (function () {
	    function FormService() {
	    }
	    FormService.prototype.getAggregateError = function (form) {
	        var filteredForm = _.filter(form, function (prop) {
	            return prop != null && prop.rlErrorMessage != null;
	        });
	        var errors = _.mapValues(filteredForm, 'rlErrorMessage');
	        return _.first(errors);
	    };
	    return FormService;
	}());
	angular.module(exports.moduleName, [])
	    .service(exports.serviceName, FormService);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZm9ybS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBSXhCLGtCQUFVLEdBQVcscUJBQXFCLENBQUM7QUFDM0MsbUJBQVcsR0FBVyxhQUFhLENBQUM7QUFNL0M7SUFBQTtJQVFBLENBQUM7SUFQQSx1Q0FBaUIsR0FBakIsVUFBa0IsSUFBb0I7UUFDckMsSUFBSSxZQUFZLEdBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsVUFBQyxJQUFTO1lBQ2hELE1BQU0sQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO1FBQ0gsSUFBSSxNQUFNLEdBQWtCLENBQUMsQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLGdCQUFnQixDQUFDLENBQUM7UUFDeEUsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDeEIsQ0FBQztJQUNGLGtCQUFDO0FBQUQsQ0FBQyxBQVJELElBUUM7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLFdBQVcsQ0FBQyxDQUFDIn0=

/***/ },
/* 24 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __guid = typescript_angular_utilities_1.services.guid;
	exports.moduleName = 'rl.ui.behaviors.popover';
	exports.directiveName = 'rlPopover';
	exports.controllerName = 'PopoverController';
	var PopoverController = (function () {
	    function PopoverController($attrs, $element, $compile, $scope, $parse, $templateCache, guid) {
	        this.$attrs = $attrs;
	        this.$element = $element;
	        this.$compile = $compile;
	        this.$scope = $scope;
	        this.$parse = $parse;
	        this.$templateCache = $templateCache;
	        this.guid = guid;
	    }
	    PopoverController.prototype.$onInit = function () {
	        if (this.$parse(this.$attrs.textOnly)(this.$scope)) {
	            this.$element.attr('uib-popover', this.$attrs.rlPopover);
	        }
	        else {
	            var templatePath = this.guid.random() + '.html';
	            var templateContent = '<div>' + this.$parse(this.$attrs.rlPopover)(this.$scope) + '</div>';
	            if (templateContent != null) {
	                this.$templateCache.put(templatePath, templateContent);
	                this.$element.attr('uib-popover-template', '\'' + templatePath + '\'');
	            }
	        }
	        this.$element.removeAttr('rl-popover');
	        this.$compile(this.$element)(this.$scope);
	    };
	    PopoverController.$inject = ['$attrs',
	        '$element',
	        '$compile',
	        '$scope',
	        '$parse',
	        '$templateCache',
	        __guid.serviceName];
	    return PopoverController;
	}());
	exports.PopoverController = PopoverController;
	function popover() {
	    'use strict';
	    return {
	        restrict: 'A',
	        priority: 300,
	        controller: exports.controllerName,
	    };
	}
	exports.popover = popover;
	angular.module(exports.moduleName, [])
	    .directive(exports.directiveName, popover)
	    .controller(exports.controllerName, PopoverController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9wb3Zlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInBvcG92ZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxNQUFNLEdBQUcsdUNBQVEsQ0FBQyxJQUFJLENBQUM7QUFFbkIsa0JBQVUsR0FBVyx5QkFBeUIsQ0FBQztBQUMvQyxxQkFBYSxHQUFXLFdBQVcsQ0FBQztBQUNwQyxzQkFBYyxHQUFXLG1CQUFtQixDQUFDO0FBT3hEO0lBUUMsMkJBQW9CLE1BQTBCLEVBQ2xDLFFBQWtDLEVBQ2xDLFFBQWlDLEVBQ2pDLE1BQXNCLEVBQ3RCLE1BQTZCLEVBQzdCLGNBQTZDLEVBQzdDLElBQXlCO1FBTmpCLFdBQU0sR0FBTixNQUFNLENBQW9CO1FBQ2xDLGFBQVEsR0FBUixRQUFRLENBQTBCO1FBQ2xDLGFBQVEsR0FBUixRQUFRLENBQXlCO1FBQ2pDLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQ3RCLFdBQU0sR0FBTixNQUFNLENBQXVCO1FBQzdCLG1CQUFjLEdBQWQsY0FBYyxDQUErQjtRQUM3QyxTQUFJLEdBQUosSUFBSSxDQUFxQjtJQUFJLENBQUM7SUFFMUMsbUNBQU8sR0FBUDtRQUNDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3BELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzFELENBQUM7UUFDRCxJQUFJLENBQUMsQ0FBQztZQUNMLElBQUksWUFBWSxHQUFXLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDO1lBQ3hELElBQUksZUFBZSxHQUFXLE9BQU8sR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLFFBQVEsQ0FBQztZQUVuRyxFQUFFLENBQUMsQ0FBQyxlQUFlLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDN0IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLGVBQWUsQ0FBQyxDQUFDO2dCQUN2RCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxJQUFJLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQ3hFLENBQUM7UUFDRixDQUFDO1FBRUQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUEvQk0seUJBQU8sR0FBYSxDQUFDLFFBQVE7UUFDNUIsVUFBVTtRQUNWLFVBQVU7UUFDVixRQUFRO1FBQ1IsUUFBUTtRQUNSLGdCQUFnQjtRQUNoQixNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7SUEwQjdCLHdCQUFDO0FBQUQsQ0FBQyxBQWpDRCxJQWlDQztBQWpDWSx5QkFBaUIsb0JBaUM3QixDQUFBO0FBRUQ7SUFDQyxZQUFZLENBQUM7SUFDYixNQUFNLENBQUM7UUFDTixRQUFRLEVBQUUsR0FBRztRQUNiLFFBQVEsRUFBRSxHQUFHO1FBQ2IsVUFBVSxFQUFFLHNCQUFjO0tBQzFCLENBQUM7QUFDSCxDQUFDO0FBUGUsZUFBTyxVQU90QixDQUFBO0FBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixTQUFTLENBQUMscUJBQWEsRUFBRSxPQUFPLENBQUM7S0FDakMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsaUJBQWlCLENBQUMsQ0FBQyJ9

/***/ },
/* 25 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.behaviors.required';
	exports.directiveName = 'rlRequired';
	exports.controllerName = 'RequiredController';
	var RequiredController = (function () {
	    function RequiredController($scope, $attrs, $interpolate) {
	        this.$scope = $scope;
	        this.$attrs = $attrs;
	        this.$interpolate = $interpolate;
	    }
	    RequiredController.prototype.$onInit = function () {
	        this.message = this.$interpolate(this.$attrs.rlRequired)(this.$scope);
	    };
	    RequiredController.$inject = ['$scope', '$attrs', '$interpolate'];
	    return RequiredController;
	}());
	exports.RequiredController = RequiredController;
	function required() {
	    return {
	        restrict: 'A',
	        priority: 200,
	        controller: exports.controllerName,
	    };
	}
	angular.module(exports.moduleName, [])
	    .directive(exports.directiveName, required)
	    .controller(exports.controllerName, RequiredController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVxdWlyZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyZXF1aXJlZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQU94QixrQkFBVSxHQUFXLDBCQUEwQixDQUFDO0FBQ2hELHFCQUFhLEdBQVcsWUFBWSxDQUFDO0FBQ3JDLHNCQUFjLEdBQVcsb0JBQW9CLENBQUM7QUFNekQ7SUFFQyw0QkFBb0IsTUFBc0IsRUFDOUIsTUFBMkIsRUFDM0IsWUFBeUM7UUFGakMsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7UUFDOUIsV0FBTSxHQUFOLE1BQU0sQ0FBcUI7UUFDM0IsaUJBQVksR0FBWixZQUFZLENBQTZCO0lBQUcsQ0FBQztJQUl6RCxvQ0FBTyxHQUFQO1FBQ0MsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFUTSwwQkFBTyxHQUFhLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxjQUFjLENBQUMsQ0FBQztJQVVqRSx5QkFBQztBQUFELENBQUMsQUFYRCxJQVdDO0FBWFksMEJBQWtCLHFCQVc5QixDQUFBO0FBRUQ7SUFDQyxNQUFNLENBQUM7UUFDTixRQUFRLEVBQUUsR0FBRztRQUNiLFFBQVEsRUFBRSxHQUFHO1FBQ2IsVUFBVSxFQUFFLHNCQUFjO0tBQzFCLENBQUM7QUFDSCxDQUFDO0FBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixTQUFTLENBQUMscUJBQWEsRUFBRSxRQUFRLENBQUM7S0FDbEMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyJ9

/***/ },
/* 26 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var busy = __webpack_require__(27);
	exports.busy = busy;
	var button = __webpack_require__(31);
	exports.button = button;
	var buttonAsync = __webpack_require__(33);
	exports.buttonAsync = buttonAsync;
	var buttonLink = __webpack_require__(35);
	exports.buttonLink = buttonLink;
	var buttonSubmit = __webpack_require__(37);
	exports.buttonSubmit = buttonSubmit;
	var buttonToggle = __webpack_require__(39);
	exports.buttonToggle = buttonToggle;
	var cardContainer = __webpack_require__(41);
	exports.cardContainer = cardContainer;
	var checkbox = __webpack_require__(105);
	exports.checkbox = checkbox;
	var commaList = __webpack_require__(109);
	exports.commaList = commaList;
	var dateTime = __webpack_require__(110);
	exports.dateTime = dateTime;
	var dateTimeStatic = __webpack_require__(118);
	exports.dateTimeStatic = dateTimeStatic;
	var dialog = __webpack_require__(120);
	exports.dialog = dialog;
	var form = __webpack_require__(128);
	exports.form = form;
	var genericContainer = __webpack_require__(129);
	exports.genericContainer = genericContainer;
	var lazyLoad = __webpack_require__(132);
	exports.lazyLoad = lazyLoad;
	var longClickButton = __webpack_require__(133);
	exports.longClickButton = longClickButton;
	var messageLog = __webpack_require__(135);
	exports.messageLog = messageLog;
	var multiStepIndicator = __webpack_require__(149);
	exports.multiStepIndicator = multiStepIndicator;
	var radio = __webpack_require__(151);
	exports.radio = radio;
	var ratingBar = __webpack_require__(154);
	exports.ratingBar = ratingBar;
	var richTextEditor = __webpack_require__(159);
	exports.richTextEditor = richTextEditor;
	var select = __webpack_require__(169);
	exports.select = select;
	var signaturePad = __webpack_require__(175);
	exports.signaturePad = signaturePad;
	var simpleCardList = __webpack_require__(176);
	exports.simpleCardList = simpleCardList;
	var spinner = __webpack_require__(180);
	exports.spinner = spinner;
	var stringWithWatermark = __webpack_require__(186);
	exports.stringWithWatermark = stringWithWatermark;
	var tabs = __webpack_require__(187);
	exports.tabs = tabs;
	var templateRenderer = __webpack_require__(194);
	exports.templateRenderer = templateRenderer;
	var textarea = __webpack_require__(195);
	exports.textarea = textarea;
	var textbox = __webpack_require__(197);
	exports.textbox = textbox;
	var typeahead = __webpack_require__(199);
	exports.typeahead = typeahead;
	var typeaheadList = __webpack_require__(201);
	exports.typeaheadList = typeaheadList;
	var userRating = __webpack_require__(205);
	exports.userRating = userRating;
	var validationGroup = __webpack_require__(208);
	exports.validationGroup = validationGroup;
	var componentsDefaultTheme_1 = __webpack_require__(30);
	exports.defaultThemeValueName = componentsDefaultTheme_1.defaultThemeValueName;
	exports.moduleName = 'rl.ui.components';
	angular.module(exports.moduleName, [
	    busy.moduleName,
	    button.moduleName,
	    buttonAsync.moduleName,
	    buttonLink.moduleName,
	    buttonSubmit.moduleName,
	    buttonToggle.moduleName,
	    cardContainer.moduleName,
	    checkbox.moduleName,
	    commaList.moduleName,
	    dateTime.moduleName,
	    dateTimeStatic.moduleName,
	    dialog.moduleName,
	    form.moduleName,
	    genericContainer.moduleName,
	    lazyLoad.moduleName,
	    longClickButton.moduleName,
	    messageLog.moduleName,
	    multiStepIndicator.moduleName,
	    radio.moduleName,
	    ratingBar.moduleName,
	    richTextEditor.moduleName,
	    select.moduleName,
	    signaturePad.moduleName,
	    simpleCardList.moduleName,
	    spinner.moduleName,
	    stringWithWatermark.moduleName,
	    tabs.moduleName,
	    templateRenderer.moduleName,
	    textarea.moduleName,
	    textbox.moduleName,
	    typeahead.moduleName,
	    typeaheadList.moduleName,
	    userRating.moduleName,
	    validationGroup.moduleName,
	])
	    .value(componentsDefaultTheme_1.defaultThemeValueName, componentsDefaultTheme_1.defaultThemeValue);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50cy5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjb21wb25lbnRzLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyxJQUFZLElBQUksV0FBTSxhQUFhLENBQUMsQ0FBQTtBQXlDbkMsWUFBSTtBQXhDTCxJQUFZLE1BQU0sV0FBTSxpQkFBaUIsQ0FBQyxDQUFBO0FBeUN6QyxjQUFNO0FBeENQLElBQVksV0FBVyxXQUFNLDJCQUEyQixDQUFDLENBQUE7QUF5Q3hELG1CQUFXO0FBeENaLElBQVksVUFBVSxXQUFNLHlCQUF5QixDQUFDLENBQUE7QUF5Q3JELGtCQUFVO0FBeENYLElBQVksWUFBWSxXQUFNLDZCQUE2QixDQUFDLENBQUE7QUF5QzNELG9CQUFZO0FBeENiLElBQVksWUFBWSxXQUFNLDZCQUE2QixDQUFDLENBQUE7QUF5QzNELG9CQUFZO0FBeENiLElBQVksYUFBYSxXQUFNLHNDQUFzQyxDQUFDLENBQUE7QUF5Q3JFLHFCQUFhO0FBeENkLElBQVksUUFBUSxXQUFNLHFCQUFxQixDQUFDLENBQUE7QUF5Qy9DLGdCQUFRO0FBeENULElBQVksU0FBUyxXQUFNLHVCQUF1QixDQUFDLENBQUE7QUF5Q2xELGlCQUFTO0FBeENWLElBQVksUUFBUSxXQUFNLHFCQUFxQixDQUFDLENBQUE7QUF5Qy9DLGdCQUFRO0FBeENULElBQVksY0FBYyxXQUFNLGlDQUFpQyxDQUFDLENBQUE7QUF5Q2pFLHNCQUFjO0FBeENmLElBQVksTUFBTSxXQUFNLGlCQUFpQixDQUFDLENBQUE7QUF5Q3pDLGNBQU07QUF4Q1AsSUFBWSxJQUFJLFdBQU0sYUFBYSxDQUFDLENBQUE7QUF5Q25DLFlBQUk7QUF4Q0wsSUFBWSxnQkFBZ0IsV0FBTSxxQ0FBcUMsQ0FBQyxDQUFBO0FBeUN2RSx3QkFBZ0I7QUF2Q2pCLElBQVksUUFBUSxXQUFNLHFC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

/***/ },
/* 27 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	__webpack_require__(28);
	var angular = __webpack_require__(1);
	var componentsDefaultTheme_1 = __webpack_require__(30);
	exports.moduleName = 'rl.ui.components.busy';
	exports.componentName = 'rlBusy';
	var BusyController = (function () {
	    function BusyController(useDefaultTheme) {
	        this.useDefaultTheme = useDefaultTheme;
	    }
	    BusyController.$inject = [componentsDefaultTheme_1.defaultThemeValueName];
	    return BusyController;
	}());
	var busy = {
	    template: "<i class=\"busy rl-{{::busy.size}}\" ng-class=\"{ 'default-theme': busy.useDefaultTheme }\" ng-show=\"busy.loading\"></i>",
	    controller: BusyController,
	    controllerAs: 'busy',
	    bindings: {
	        loading: '<',
	        // Valid values are:
	        // `lg`, `2x`, `3x`, `4x`, and `5x`
	        size: '@',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, busy);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVzeS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJ1c3kudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsUUFBTyxZQUFZLENBQUMsQ0FBQTtBQUVwQixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyx1Q0FBc0MsMkJBQTJCLENBQUMsQ0FBQTtBQUV2RCxrQkFBVSxHQUFXLHVCQUF1QixDQUFDO0FBQzdDLHFCQUFhLEdBQVcsUUFBUSxDQUFDO0FBTTVDO0lBRUMsd0JBQW1CLGVBQXdCO1FBQXhCLG9CQUFlLEdBQWYsZUFBZSxDQUFTO0lBQUksQ0FBQztJQUR6QyxzQkFBTyxHQUFhLENBQUMsOENBQXFCLENBQUMsQ0FBQztJQUVwRCxxQkFBQztBQUFELENBQUMsQUFIRCxJQUdDO0FBRUQsSUFBSSxJQUFJLEdBQThCO0lBQ3JDLFFBQVEsRUFBRSwySEFBcUg7SUFDL0gsVUFBVSxFQUFFLGNBQWM7SUFDMUIsWUFBWSxFQUFFLE1BQU07SUFDcEIsUUFBUSxFQUFFO1FBQ1QsT0FBTyxFQUFFLEdBQUc7UUFDWixvQkFBb0I7UUFDcEIsbUNBQW1DO1FBQ25DLElBQUksRUFBRSxHQUFHO0tBQ1Q7Q0FDRCxDQUFDO0FBRUYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixTQUFTLENBQUMscUJBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQyJ9

/***/ },
/* 28 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(29);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../../node_modules/css-loader/index.js!./busy.css", function() {
				var newContent = require("!!./../../../node_modules/css-loader/index.js!./busy.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 29 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, ".default-theme.busy {\r\n\t-webkit-animation: fa-spin 2s infinite linear;\r\n\tanimation: fa-spin 2s infinite linear;\r\n\tdisplay: inline-block;\r\n\tfont-size: inherit;\r\n\tfont-style: normal;\r\n\tfont-family: FontAwesome;\r\n}\r\n\r\n.default-theme.busy:before {\r\n\tcontent: \"\\F110\"; /* fa-spinner */\r\n}", ""]);
	
	// exports


/***/ },
/* 30 */
/***/ function(module, exports) {

	"use strict";
	exports.defaultThemeValueName = 'useDefaultTheme';
	exports.defaultThemeValue = true;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50c0RlZmF1bHRUaGVtZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNvbXBvbmVudHNEZWZhdWx0VGhlbWUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFXLDZCQUFxQixHQUFXLGlCQUFpQixDQUFDO0FBQ2xELHlCQUFpQixHQUFZLElBQUksQ0FBQyJ9

/***/ },
/* 31 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.components.button';
	exports.componentName = 'rlButton';
	exports.controllerName = 'ButtonController';
	var ButtonController = (function () {
	    function ButtonController() {
	        this.type = this.type != null ? this.type : 'default';
	        this.configuredSize = this.size != null ? 'btn-' + this.size : null;
	    }
	    return ButtonController;
	}());
	exports.ButtonController = ButtonController;
	var button = {
	    transclude: true,
	    template: __webpack_require__(32),
	    bindings: {
	        action: '&',
	        type: '@',
	        ngDisabled: '<?',
	        size: '@',
	    },
	    controller: exports.controllerName,
	    controllerAs: 'button',
	};
	function buildButton(options) {
	    var clone = _.clone(button);
	    clone.require = options.require;
	    clone.transclude = options.transclude != null ? options.transclude : clone.transclude;
	    clone.template = options.template;
	    clone.controller = options.controller || clone.controller;
	    clone.controllerAs = options.controllerAs || clone.controllerAs;
	    clone.bindings = _.assign({}, clone.bindings, options.bindings);
	    _.each(clone.bindings, function (binding, key) {
	        if (binding == null) {
	            delete clone.bindings[key];
	        }
	    });
	    return clone;
	}
	exports.buildButton = buildButton;
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, button)
	    .controller(exports.controllerName, ButtonController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYnV0dG9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUV4QixrQkFBVSxHQUFXLHlCQUF5QixDQUFDO0FBQy9DLHFCQUFhLEdBQVcsVUFBVSxDQUFDO0FBQ25DLHNCQUFjLEdBQVcsa0JBQWtCLENBQUM7QUFXdkQ7SUFTQztRQUNDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUM7UUFDdEQsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksR0FBRyxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDckUsQ0FBQztJQUNGLHVCQUFDO0FBQUQsQ0FBQyxBQWJELElBYUM7QUFiWSx3QkFBZ0IsbUJBYTVCLENBQUE7QUFFRCxJQUFJLE1BQU0sR0FBOEI7SUFDdkMsVUFBVSxFQUFFLElBQUk7SUFDaEIsUUFBUSxFQUFFLE9BQU8sQ0FBQyxlQUFlLENBQUM7SUFDbEMsUUFBUSxFQUFFO1FBQ1QsTUFBTSxFQUFFLEdBQUc7UUFDWCxJQUFJLEVBQUUsR0FBRztRQUNULFVBQVUsRUFBRSxJQUFJO1FBQ2hCLElBQUksRUFBRSxHQUFHO0tBQ1Q7SUFDRCxVQUFVLEVBQUUsc0JBQWM7SUFDMUIsWUFBWSxFQUFFLFFBQVE7Q0FDdEIsQ0FBQztBQUVGLHFCQUE0QixPQUF1QjtJQUNsRCxJQUFJLEtBQUssR0FBUSxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ2pDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztJQUNoQyxLQUFLLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxVQUFVLElBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQztJQUN0RixLQUFLLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7SUFDbEMsS0FBSyxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxJQUFJLEtBQUssQ0FBQyxVQUFVLENBQUM7SUFDMUQsS0FBSyxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSxJQUFJLEtBQUssQ0FBQyxZQUFZLENBQUM7SUFDaEUsS0FBSyxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNoRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsVUFBQyxPQUFZLEVBQUUsR0FBVztRQUNoRCxFQUFFLENBQUMsQ0FBQyxPQUFPLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNyQixPQUFPLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUIsQ0FBQztJQUNGLENBQUMsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUNkLENBQUM7QUFkZSxtQkFBVyxjQWMxQixDQUFBO0FBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixTQUFTLENBQUMscUJBQWEsRUFBRSxNQUFNLENBQUM7S0FDaEMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyJ9

/***/ },
/* 32 */
/***/ function(module, exports) {

	module.exports = "<button type=\"button\" class=\"btn btn-{{::button.type}} {{::button.configuredSize}}\" ng-click=\"button.action()\" ng-disabled=\"button.ngDisabled\">\r\n\t<span ng-transclude></span>\r\n</button>"

/***/ },
/* 33 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __promiseUtility = typescript_angular_utilities_1.services.promise;
	var button_1 = __webpack_require__(31);
	exports.moduleName = 'rl.ui.components.buttonAsync';
	exports.componentName = 'rlButtonAsync';
	exports.controllerName = 'ButtonAsyncController';
	var ButtonAsyncController = (function (_super) {
	    __extends(ButtonAsyncController, _super);
	    function ButtonAsyncController(promiseUtility) {
	        _super.call(this);
	        this.promiseUtility = promiseUtility;
	    }
	    ButtonAsyncController.prototype.trigger = function () {
	        var _this = this;
	        if (!this.busy) {
	            this.busy = true;
	            var result = this.action();
	            if (this.promiseUtility.isPromise(result) && _.isFunction(result.finally)) {
	                result.finally(function () {
	                    _this.busy = false;
	                });
	            }
	            else if (result !== true) {
	                this.busy = false;
	            }
	        }
	    };
	    ButtonAsyncController.$inject = [__promiseUtility.serviceName];
	    return ButtonAsyncController;
	}(button_1.ButtonController));
	exports.ButtonAsyncController = ButtonAsyncController;
	var buttonAsync = button_1.buildButton({
	    template: __webpack_require__(34),
	    bindings: {
	        busy: '<?',
	        rightAligned: '<?',
	    },
	    controller: exports.controllerName,
	});
	angular.module(exports.moduleName, [__promiseUtility.moduleName])
	    .component(exports.componentName, buttonAsync)
	    .controller(exports.controllerName, ButtonAsyncController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uQXN5bmMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJidXR0b25Bc3luYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBRXhELElBQU8sZ0JBQWdCLEdBQUcsdUNBQVEsQ0FBQyxPQUFPLENBQUM7QUFFM0MsdUJBQThDLGtCQUFrQixDQUFDLENBQUE7QUFFdEQsa0JBQVUsR0FBVyw4QkFBOEIsQ0FBQztBQUVwRCxxQkFBYSxHQUFXLGVBQWUsQ0FBQztBQUN4QyxzQkFBYyxHQUFXLHVCQUF1QixDQUFDO0FBVzVEO0lBQTJDLHlDQUFnQjtJQU8xRCwrQkFBb0IsY0FBZ0Q7UUFDbkUsaUJBQU8sQ0FBQztRQURXLG1CQUFjLEdBQWQsY0FBYyxDQUFrQztJQUVwRSxDQUFDO0lBRUQsdUNBQU8sR0FBUDtRQUFBLGlCQWFDO1FBWkEsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNoQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztZQUVqQixJQUFJLE1BQU0sR0FBaUQsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1lBQ3pFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDM0UsTUFBTSxDQUFDLE9BQU8sQ0FBQztvQkFDZCxLQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztnQkFDbkIsQ0FBQyxDQUFDLENBQUM7WUFDSixDQUFDO1lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFNLE1BQU0sS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUNqQyxJQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztZQUNuQixDQUFDO1FBQ0YsQ0FBQztJQUNGLENBQUM7SUFsQk0sNkJBQU8sR0FBYSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBbUIzRCw0QkFBQztBQUFELENBQUMsQUF6QkQsQ0FBMkMseUJBQWdCLEdBeUIxRDtBQXpCWSw2QkFBcUIsd0JBeUJqQyxDQUFBO0FBRUQsSUFBSSxXQUFXLEdBQThCLG9CQUFXLENBQUM7SUFDeEQsUUFBUSxFQUFFLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQztJQUN2QyxRQUFRLEVBQUU7UUFDVCxJQUFJLEVBQUUsSUFBSTtRQUNWLFlBQVksRUFBRSxJQUFJO0tBQ2xCO0lBQ0QsVUFBVSxFQUFFLHNCQUFjO0NBQzFCLENBQUMsQ0FBQztBQUVILE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ3ZELFNBQVMsQ0FBQyxxQkFBYSxFQUFFLFdBQVcsQ0FBQztLQUNyQyxVQUFVLENBQUMsc0JBQWMsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDIn0=

/***/ },
/* 34 */
/***/ function(module, exports) {

	module.exports = "<button type=\"button\" class=\"btn btn-{{::button.type}} {{::button.configuredSize}}\" ng-click=\"button.trigger()\" ng-disabled=\"button.busy || button.ngDisabled\">\r\n\t<rl-busy ng-if=\"::button.rightAligned\" loading=\"button.busy\"></rl-busy>\r\n\t<span ng-transclude></span>\r\n\t<rl-busy ng-if=\"::!button.rightAligned\" loading=\"button.busy\"></rl-busy>\r\n</button>"

/***/ },
/* 35 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var button_1 = __webpack_require__(31);
	exports.moduleName = 'rl.ui.components.buttonLink';
	exports.componentName = 'rlButtonLink';
	exports.controllerName = 'ButtonLinkController';
	var ButtonLinkController = (function (_super) {
	    __extends(ButtonLinkController, _super);
	    function ButtonLinkController() {
	        _super.call(this);
	        this.target = this.newTab ? '_blank' : '_self';
	    }
	    return ButtonLinkController;
	}(button_1.ButtonController));
	exports.ButtonLinkController = ButtonLinkController;
	var buttonLink = button_1.buildButton({
	    template: __webpack_require__(36),
	    bindings: {
	        link: '@',
	        newTab: '<?',
	        action: null,
	    },
	    controller: exports.controllerName,
	});
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, buttonLink)
	    .controller(exports.controllerName, ButtonLinkController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uTGluay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJ1dHRvbkxpbmsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMERBQTBEO0FBRTFELFlBQVksQ0FBQzs7Ozs7O0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsdUJBQThDLGtCQUFrQixDQUFDLENBQUE7QUFFdEQsa0JBQVUsR0FBVyw2QkFBNkIsQ0FBQztBQUNuRCxxQkFBYSxHQUFXLGNBQWMsQ0FBQztBQUN2QyxzQkFBYyxHQUFXLHNCQUFzQixDQUFDO0FBRTNEO0lBQTBDLHdDQUFnQjtJQU96RDtRQUNDLGlCQUFPLENBQUM7UUFDUixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxHQUFHLE9BQU8sQ0FBQztJQUNoRCxDQUFDO0lBQ0YsMkJBQUM7QUFBRCxDQUFDLEFBWEQsQ0FBMEMseUJBQWdCLEdBV3pEO0FBWFksNEJBQW9CLHVCQVdoQyxDQUFBO0FBRUQsSUFBSSxVQUFVLEdBQThCLG9CQUFXLENBQUM7SUFDdkQsUUFBUSxFQUFFLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztJQUN0QyxRQUFRLEVBQUU7UUFDVCxJQUFJLEVBQUUsR0FBRztRQUNULE1BQU0sRUFBRSxJQUFJO1FBQ1osTUFBTSxFQUFFLElBQUk7S0FDWjtJQUNELFVBQVUsRUFBRSxzQkFBYztDQUMxQixDQUFDLENBQUM7QUFFSCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLFVBQVUsQ0FBQztLQUNwQyxVQUFVLENBQUMsc0JBQWMsRUFBRSxvQkFBb0IsQ0FBQyxDQUFDIn0=

/***/ },
/* 36 */
/***/ function(module, exports) {

	module.exports = "<a class=\"btn btn-{{::button.type}} {{::button.configuredSize}}\" ng-href=\"{{button.link}}\" ng-disabled=\"button.ngDisabled\" target=\"{{::button.target}}\">\r\n\t<span ng-transclude></span>\r\n</a>"

/***/ },
/* 37 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var button_1 = __webpack_require__(31);
	exports.moduleName = 'rl.ui.components.buttonSubmit';
	exports.componentName = 'rlButtonSubmit';
	var buttonSubmit = button_1.buildButton({
	    template: __webpack_require__(38),
	    bindings: {
	        rightAligned: '<?',
	        saving: '<?',
	        action: null,
	    },
	});
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, buttonSubmit);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uU3VibWl0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYnV0dG9uU3VibWl0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyx1QkFBNEIsa0JBQWtCLENBQUMsQ0FBQTtBQUVwQyxrQkFBVSxHQUFXLCtCQUErQixDQUFDO0FBQ3JELHFCQUFhLEdBQVcsZ0JBQWdCLENBQUM7QUFFcEQsSUFBSSxZQUFZLEdBQThCLG9CQUFXLENBQUM7SUFDeEQsUUFBUSxFQUFFLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztJQUN4QyxRQUFRLEVBQUU7UUFDVCxZQUFZLEVBQUUsSUFBSTtRQUNsQixNQUFNLEVBQUUsSUFBSTtRQUNaLE1BQU0sRUFBRSxJQUFJO0tBQ1o7Q0FDRCxDQUFDLENBQUM7QUFFSixPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLFlBQVksQ0FBQyxDQUFDIn0=

/***/ },
/* 38 */
/***/ function(module, exports) {

	module.exports = "<button type=\"submit\" class=\"btn btn-{{::button.type}} {{::button.configuredSize}}\" ng-disabled=\"button.saving || button.ngDisabled\">\r\n\t<rl-busy ng-if=\"::button.rightAligned\" loading=\"button.saving\"></rl-busy>\r\n\t<span ng-transclude></span>\r\n\t<rl-busy ng-if=\"::!button.rightAligned\" loading=\"button.saving\"></rl-busy>\r\n</button>"

/***/ },
/* 39 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var button_1 = __webpack_require__(31);
	exports.moduleName = 'rl.ui.components.buttonToggle';
	exports.componentName = 'rlButtonToggle';
	exports.controllerName = 'ButtonToggleController';
	var ButtonToggleController = (function (_super) {
	    __extends(ButtonToggleController, _super);
	    function ButtonToggleController() {
	        _super.call(this);
	    }
	    Object.defineProperty(ButtonToggleController.prototype, "checked", {
	        get: function () {
	            return this.ngModel.$viewValue;
	        },
	        set: function (value) {
	            this.ngModel.$setViewValue(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    ButtonToggleController.prototype.clicked = function () {
	        if (!this.ngDisabled) {
	            this.checked = !this.checked;
	            this.onToggle({ value: this.checked });
	        }
	    };
	    return ButtonToggleController;
	}(button_1.ButtonController));
	exports.ButtonToggleController = ButtonToggleController;
	var buttonToggle = button_1.buildButton({
	    require: { ngModel: '^ngModel' },
	    template: __webpack_require__(40),
	    controller: exports.controllerName,
	    controllerAs: 'buttonToggle',
	    bindings: {
	        onToggle: '&',
	        action: null,
	    },
	});
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, buttonToggle)
	    .controller(exports.controllerName, ButtonToggleController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnV0dG9uVG9nZ2xlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYnV0dG9uVG9nZ2xlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7Ozs7O0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFJbkMsdUJBQThDLGtCQUFrQixDQUFDLENBQUE7QUFFdEQsa0JBQVUsR0FBVywrQkFBK0IsQ0FBQztBQUNyRCxxQkFBYSxHQUFXLGdCQUFnQixDQUFDO0FBQ3pDLHNCQUFjLEdBQVcsd0JBQXdCLENBQUM7QUFhN0Q7SUFBNEMsMENBQWdCO0lBYTNEO1FBQ0MsaUJBQU8sQ0FBQztJQUNULENBQUM7SUFWRCxzQkFBSSwyQ0FBTzthQUFYO1lBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ2hDLENBQUM7YUFFRCxVQUFZLEtBQWM7WUFDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQzs7O09BSkE7SUFVRCx3Q0FBTyxHQUFQO1FBQ0MsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUN0QixJQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUM3QixJQUFJLENBQUMsUUFBUSxDQUFDLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ3hDLENBQUM7SUFDRixDQUFDO0lBQ0YsNkJBQUM7QUFBRCxDQUFDLEFBdkJELENBQTRDLHlCQUFnQixHQXVCM0Q7QUF2QlksOEJBQXNCLHlCQXVCbEMsQ0FBQTtBQUVELElBQUksWUFBWSxHQUE4QixvQkFBVyxDQUFDO0lBQ3pELE9BQU8sRUFBRSxFQUFFLE9BQU8sRUFBRSxVQUFVLEVBQUU7SUFDaEMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztJQUN4QyxVQUFVLEVBQUUsc0JBQWM7SUFDMUIsWUFBWSxFQUFFLGNBQWM7SUFDNUIsUUFBUSxFQUFFO1FBQ1QsUUFBUSxFQUFFLEdBQUc7UUFDYixNQUFNLEVBQUUsSUFBSTtLQUNaO0NBQ0QsQ0FBQyxDQUFDO0FBRUgsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixTQUFTLENBQUMscUJBQWEsRUFBRSxZQUFZLENBQUM7S0FDdEMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsc0JBQXNCLENBQUMsQ0FBQyJ9

/***/ },
/* 40 */
/***/ function(module, exports) {

	module.exports = "<button type=\"button\" class=\"btn btn-{{::buttonToggle.type}} {{::buttonToggle.configuredSize}}\"\r\n\t\tng-class=\"{ active : buttonToggle.checked }\" ng-click=\"buttonToggle.clicked()\" ng-disabled=\"buttonToggle.ngDisabled\">\r\n\t<i ng-show=\"buttonToggle.checked\" class=\"fa fa-check completed\"></i> <span ng-transclude></span>\r\n</button>"

/***/ },
/* 41 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __array = typescript_angular_utilities_1.services.array;
	var __parentChild = typescript_angular_utilities_1.services.parentChildBehavior;
	var __genericSearchFilter = typescript_angular_utilities_1.services.genericSearchFilter;
	var card = __webpack_require__(42);
	exports.card = card;
	var cardSearch = __webpack_require__(51);
	exports.cardSearch = cardSearch;
	var columnHeader = __webpack_require__(53);
	exports.columnHeader = columnHeader;
	var dataSources = __webpack_require__(55);
	exports.dataSources = dataSources;
	var filters = __webpack_require__(70);
	exports.filters = filters;
	var itemCount = __webpack_require__(91);
	exports.itemCount = itemCount;
	var pager = __webpack_require__(93);
	exports.pager = pager;
	var pageSize = __webpack_require__(95);
	exports.pageSize = pageSize;
	var selectionControl = __webpack_require__(97);
	exports.selectionControl = selectionControl;
	var sorts = __webpack_require__(56);
	exports.sorts = sorts;
	var cardContainer_1 = __webpack_require__(99);
	var builder = __webpack_require__(101);
	exports.builder = builder;
	var defaultComponents_1 = __webpack_require__(102);
	__export(__webpack_require__(99));
	exports.moduleName = 'rl.ui.components.cardContainer';
	angular.module(exports.moduleName, [
	    // dependencies
	    dataSources.dataPager.moduleName,
	    __object.moduleName,
	    __array.moduleName,
	    __parentChild.moduleName,
	    __genericSearchFilter.moduleName,
	    // components
	    card.moduleName,
	    cardSearch.moduleName,
	    columnHeader.moduleName,
	    itemCount.moduleName,
	    pager.moduleName,
	    pageSize.moduleName,
	    selectionControl.moduleName,
	    // submodules
	    dataSources.moduleName,
	    filters.moduleName,
	    sorts.moduleName,
	])
	    .component(cardContainer_1.componentName, cardContainer_1.cardContainer)
	    .controller(cardContainer_1.controllerName, cardContainer_1.CardContainerController)
	    .factory(builder.factoryName, builder.cardContainerBuilderFactory)
	    .component(defaultComponents_1.headerComponentName, defaultComponents_1.defaultContainerHeader)
	    .component(defaultComponents_1.footerComponentName, defaultComponents_1.defaultContainerFooter);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyZENvbnRhaW5lci5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjYXJkQ29udGFpbmVyLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUN4RCxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUNsQyxJQUFPLE9BQU8sR0FBRyx1Q0FBUSxDQUFDLEtBQUssQ0FBQztBQUNoQyxJQUFPLGFBQWEsR0FBRyx1Q0FBUSxDQUFDLG1CQUFtQixDQUFDO0FBQ3BELElBQU8scUJBQXFCLEdBQUcsdUNBQVEsQ0FBQyxtQkFBbUIsQ0FBQztBQUU1RCxJQUFZLElBQUksV0FBTSxhQUFhLENBQUMsQ0FBQTtBQWlCbkMsWUFBSTtBQWhCTCxJQUFZLFVBQVUsV0FBTSx5QkFBeUIsQ0FBQyxDQUFBO0FBaUJyRCxrQkFBVTtBQWhCWCxJQUFZLFlBQVksV0FBTSw2QkFBNkIsQ0FBQyxDQUFBO0FBaUIzRCxvQkFBWTtBQWhCYixJQUFZLFdBQVcsV0FBTSxrQ0FBa0MsQ0FBQyxDQUFBO0FBaUIvRCxtQkFBVztBQWhCWixJQUFZLE9BQU8sV0FBTSwwQkFBMEIsQ0FBQyxDQUFBO0FBaUJuRCxlQUFPO0FBaEJSLElBQVksU0FBUyxXQUFNLHVCQUF1QixDQUFDLENBQUE7QUFpQmxELGlCQUFTO0FBaEJWLElBQVksS0FBSyxXQUFNLGVBQWUsQ0FBQyxDQUFBO0FBaUJ0QyxhQUFLO0FBaEJOLElBQVksUUFBUSxXQUFNLHFCQUFxQixDQUFDLENBQUE7QUFpQi9DLGdCQUFRO0FBaEJULElBQVksZ0JBQWdCLFdBQU0scUNBQXFDLENBQUMsQ0FBQTtBQWlCdkUsd0JBQWdCO0FBaEJqQixJQUFZLEtBQUssV0FBTSxzQkFBc0IsQ0FBQyxDQUFBO0FBaUI3QyxhQUFLO0FBZk4sOEJBQXNGLGlCQUFpQixDQUFDLENBQUE7QUFDeEcsSUFBWSxPQUFPLFdBQU0sZ0NBQWdDLENBQUMsQ0FBQTtBQUl6RCxlQUFPO0FBSFIsa0NBQXlHLHFCQUFxQixDQUFDLENBQUE7QUFnQi9ILGlCQUFjLGlCQUFpQixDQUFDLEVBQUE7QUFHckIsa0JBQVUsR0FBVyxnQ0FBZ0MsQ0FBQztBQUVqRSxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUU7SUFDMUIsZUFBZTtJQUNmLFdBQVcsQ0FBQyxTQUFTLENBQUMsVUFBVTtJQUNoQyxRQUFRLENBQUMsVUFBVTtJQUNuQixPQUFPLENBQUMsVUFBVTtJQUNsQixhQUFhLENBQUMsVUFBVTtJQUN4QixxQkFBcUIsQ0FBQyxVQUFVO0lBRWhDLGFBQWE7SUFDYixJQUFJLENBQUMsVUFBVTtJQUNmLFVBQVUsQ0FBQyxVQUFVO0lBQ3JCLFlBQVksQ0FBQyxVQUFVO0lBQ3ZCLFNBQVMsQ0FBQyxVQUFVO0lBQ3BCLEtBQUssQ0FBQyxVQUFVO0lBQ2hCLFFBQVEsQ0FBQyxVQUFVO0lBQ25CLGdCQUFnQixDQUFDLFVBQVU7SUFFM0IsYUFBYTtJQUNiLFdBQVcsQ0FBQyxVQUFVO0lBQ3RCLE9BQU8sQ0FBQyxVQUFVO0lBQ2xCLEtBQUssQ0FBQyxVQUFVO0NBQ2hCLENBQUM7S0FDQSxTQUFTLENBQUMsNkJBQWEsRUFBRSw2QkFBYSxDQUFDO0tBQ3ZDLFVBQVUsQ0FBQyw4QkFBYyxFQUFFLHVDQUF1QixDQUFDO0tBQ25ELE9BQU8sQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQztLQUNqRSxTQUFTLENBQUMsdUNBQW1CLEVBQUUsMENBQXNCLENBQUM7S0FDdEQsU0FBUyxDQUFDLHVDQUFtQixFQUFFLDBDQUFzQixDQUFDLENBQUMifQ==

/***/ },
/* 42 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../typings/jquery/jquery.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var Rx = __webpack_require__(43);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __parentChild = typescript_angular_utilities_1.services.parentChildBehavior;
	var __object = typescript_angular_utilities_1.services.object;
	var headerColumn_module_1 = __webpack_require__(46);
	exports.moduleName = 'rl.ui.components.cardContainer.card';
	exports.componentName = 'rlCard';
	exports.controllerName = 'CardController';
	var CardController = (function () {
	    function CardController($scope, $controller, $q, $element, parentChild, object) {
	        var _this = this;
	        this.$scope = $scope;
	        this.$q = $q;
	        this.$element = $element;
	        this.parentChild = parentChild;
	        this.showContent = false;
	        this.dirty = false;
	        this.autosaveLink = {};
	        this.autosave = function () {
	            if (_this.showContent === false) {
	                return true;
	            }
	            return _this.parentChild.triggerChildBehavior(_this.autosaveLink, function (behavior) {
	                if (behavior.autosave()) {
	                    _this.showContent = false;
	                    return true;
	                }
	                else {
	                    return false;
	                }
	            });
	        };
	        if (this.cardAs) {
	            $scope[this.cardAs] = this.item;
	        }
	        $scope.collapse = this.autosave;
	        $scope.setSelected = this.setSelected.bind(this);
	        this.refresh = new Rx.Subject();
	        $scope.refresh = function () {
	            _this.source.refresh();
	            _this.refresh.onNext(null);
	        };
	        $scope.remove = function () {
	            _this.source.remove(_this.item);
	        };
	        $scope.containerData = this.containerData;
	        if (object.isNullOrWhitespace(this.cardController) === false) {
	            var controller = $controller(this.cardController, { $scope: $scope });
	            if (object.isNullOrWhitespace(this.cardControllerAs) === false) {
	                $scope[this.cardControllerAs] = controller;
	            }
	        }
	        parentChild.registerChildBehavior(this.item, {
	            close: this.autosave,
	        });
	    }
	    CardController.prototype.toggleContent = function () {
	        if (!this.showContent) {
	            this.open();
	        }
	        else {
	            this.autosave();
	        }
	    };
	    CardController.prototype.validateCard = function () {
	        var behavior = this.parentChild.getChildBehavior(this.item);
	        if (_.isFunction(behavior.validateCard)) {
	            return behavior.validateCard();
	        }
	        else {
	            return true;
	        }
	    };
	    CardController.prototype.saveCard = function () {
	        var behavior = this.parentChild.getChildBehavior(this.item);
	        if (_.isFunction(behavior.saveCard)) {
	            return behavior.saveCard();
	        }
	        else {
	            return this.$q.when();
	        }
	    };
	    CardController.prototype.clickCard = function () {
	        this.parentChild.triggerChildBehavior(this.item, function (behavior) {
	            if (_.isFunction(behavior.clickCard)) {
	                return behavior.clickCard();
	            }
	        });
	    };
	    CardController.prototype.$postLink = function () {
	        var _this = this;
	        this.cardContainer.makeCard(this.$scope, function (content) {
	            var contentArea = _this.$element.find('.content-template');
	            contentArea.append(content);
	            _this.hasBody = content.length > 0;
	        }, null, 'contentSlot');
	        this.cardContainer.makeCard(this.$scope, function (footer) {
	            _this.hasFooter = (footer.length > 0);
	            if (_this.hasFooter) {
	                var footerArea = _this.$element.find('.footer-template');
	                footerArea.append(footer);
	            }
	        }, null, 'footerSlot');
	    };
	    CardController.prototype.open = function () {
	        this.parentChild.triggerChildBehavior(this.item, function (behavior) {
	            if (_.isFunction(behavior.initCard)) {
	                behavior.initCard();
	            }
	        });
	        if (this.cardContainer.openCard()) {
	            this.showContent = true;
	        }
	    };
	    CardController.prototype.setSelected = function (value) {
	        if (_.isUndefined(this.item.viewData)) {
	            this.item.viewData = {};
	        }
	        this.item.viewData.selected = value;
	        this.selectionChanged();
	    };
	    CardController.$inject = ['$scope', '$controller', '$q', '$element', __parentChild.serviceName, __object.serviceName];
	    return CardController;
	}());
	exports.CardController = CardController;
	var card = {
	    template: __webpack_require__(50),
	    require: { cardContainer: '^^rlCardContainer' },
	    controller: exports.controllerName,
	    controllerAs: '__card',
	    bindings: {
	        columns: '<?',
	        item: '=',
	        clickable: '<?',
	        source: '=',
	        containerData: '<?',
	        cardController: '<?',
	        cardControllerAs: '<?',
	        cardAs: '<?',
	        permanentFooter: '<?',
	        selectable: '<?',
	        selectionChanged: '&',
	        saveWhenInvalid: '<?',
	    },
	};
	angular.module(exports.moduleName, [
	    __parentChild.moduleName,
	    __object.moduleName,
	    headerColumn_module_1.moduleName,
	])
	    .component(exports.componentName, card)
	    .controller(exports.controllerName, CardController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNhcmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsa0VBQWtFO0FBRWxFLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBQzVCLElBQVksRUFBRSxXQUFNLElBQUksQ0FBQyxDQUFBO0FBRXpCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sYUFBYSxHQUFHLHVDQUFRLENBQUMsbUJBQW1CLENBQUM7QUFDcEQsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFFbEMsb0NBQXFELG9DQUFvQyxDQUFDLENBQUE7QUFNL0Usa0JBQVUsR0FBVyxxQ0FBcUMsQ0FBQztBQUMzRCxxQkFBYSxHQUFXLFFBQVEsQ0FBQztBQUNqQyxzQkFBYyxHQUFXLGdCQUFnQixDQUFDO0FBbUNyRDtJQXdCQyx3QkFBb0IsTUFBa0IsRUFDbEMsV0FBdUMsRUFDL0IsRUFBcUIsRUFDckIsUUFBa0MsRUFDbEMsV0FBc0QsRUFDOUQsTUFBK0I7UUE3QnBDLGlCQWdKQztRQXhIb0IsV0FBTSxHQUFOLE1BQU0sQ0FBWTtRQUUxQixPQUFFLEdBQUYsRUFBRSxDQUFtQjtRQUNyQixhQUFRLEdBQVIsUUFBUSxDQUEwQjtRQUNsQyxnQkFBVyxHQUFYLFdBQVcsQ0FBMkM7UUFibEUsZ0JBQVcsR0FBWSxLQUFLLENBQUM7UUFDN0IsVUFBSyxHQUFZLEtBQUssQ0FBQztRQUN2QixpQkFBWSxHQUFpRCxFQUFFLENBQUM7UUEyRnhELGFBQVEsR0FBb0I7WUFDbkMsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLFdBQVcsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNoQyxNQUFNLENBQUMsSUFBSSxDQUFDO1lBQ2IsQ0FBQztZQUVELE1BQU0sQ0FBQyxLQUFJLENBQUMsV0FBVyxDQUFDLG9C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

/***/ },
/* 43 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module, global, process) {// Copyright (c) Microsoft, All rights reserved. See License.txt in the project root for license information.
	
	;(function (undefined) {
	
	  var objectTypes = {
	    'function': true,
	    'object': true
	  };
	
	  function checkGlobal(value) {
	    return (value && value.Object === Object) ? value : null;
	  }
	
	  var freeExports = (objectTypes[typeof exports] && exports && !exports.nodeType) ? exports : null;
	  var freeModule = (objectTypes[typeof module] && module && !module.nodeType) ? module : null;
	  var freeGlobal = checkGlobal(freeExports && freeModule && typeof global === 'object' && global);
	  var freeSelf = checkGlobal(objectTypes[typeof self] && self);
	  var freeWindow = checkGlobal(objectTypes[typeof window] && window);
	  var moduleExports = (freeModule && freeModule.exports === freeExports) ? freeExports : null;
	  var thisGlobal = checkGlobal(objectTypes[typeof this] && this);
	  var root = freeGlobal || ((freeWindow !== (thisGlobal && thisGlobal.window)) && freeWindow) || freeSelf || thisGlobal || Function('return this')();
	
	  var Rx = {
	    internals: {},
	    config: {
	      Promise: root.Promise
	    },
	    helpers: { }
	  };
	
	  // Defaults
	  var noop = Rx.helpers.noop = function () { },
	    identity = Rx.helpers.identity = function (x) { return x; },
	    defaultNow = Rx.helpers.defaultNow = Date.now,
	    defaultComparer = Rx.helpers.defaultComparer = function (x, y) { return isEqual(x, y); },
	    defaultSubComparer = Rx.helpers.defaultSubComparer = function (x, y) { return x > y ? 1 : (x < y ? -1 : 0); },
	    defaultKeySerializer = Rx.helpers.defaultKeySerializer = function (x) { return x.toString(); },
	    defaultError = Rx.helpers.defaultError = function (err) { throw err; },
	    isPromise = Rx.helpers.isPromise = function (p) { return !!p && typeof p.subscribe !== 'function' && typeof p.then === 'function'; },
	    isFunction = Rx.helpers.isFunction = (function () {
	
	      var isFn = function (value) {
	        return typeof value == 'function' || false;
	      };
	
	      // fallback for older versions of Chrome and Safari
	      if (isFn(/x/)) {
	        isFn = function(value) {
	          return typeof value == 'function' && toString.call(value) == '[object Function]';
	        };
	      }
	
	      return isFn;
	    }());
	
	  function cloneArray(arr) { for(var a = [], i = 0, len = arr.length; i < len; i++) { a.push(arr[i]); } return a;}
	
	  var errorObj = {e: {}};
	  
	  function tryCatcherGen(tryCatchTarget) {
	    return function tryCatcher() {
	      try {
	        return tryCatchTarget.apply(this, arguments);
	      } catch (e) {
	        errorObj.e = e;
	        return errorObj;
	      }
	    };
	  }
	
	  var tryCatch = Rx.internals.tryCatch = function tryCatch(fn) {
	    if (!isFunction(fn)) { throw new TypeError('fn must be a function'); }
	    return tryCatcherGen(fn);
	  };
	
	  function thrower(e) {
	    throw e;
	  }
	
	  Rx.config.longStackSupport = false;
	  var hasStacks = false, stacks = tryCatch(function () { throw new Error(); })();
	  hasStacks = !!stacks.e && !!stacks.e.stack;
	
	  // All code after this point will be filtered from stack traces reported by RxJS
	  var rStartingLine = captureLine(), rFileName;
	
	  var STACK_JUMP_SEPARATOR = 'From previous event:';
	
	  function makeStackTraceLong(error, observable) {
	    // If possible, transform the error stack trace by removing Node and RxJS
	    // cruft, then concatenating with the stack trace of `observable`.
	    if (hasStacks &&
	        observable.stack &&
	        typeof error === 'object' &&
	        error !== null &&
	        error.stack &&
	        error.stack.indexOf(STACK_JUMP_SEPARATOR) === -1
	    ) {
	      var stacks = [];
	      for (var o = observable; !!o; o = o.source) {
	        if (o.stack) {
	          stacks.unshift(o.stack);
	        }
	      }
	      stacks.unshift(error.stack);
	
	      var concatedStacks = stacks.join('\n' + STACK_JUMP_SEPARATOR + '\n');
	      error.stack = filterStackString(concatedStacks);
	    }
	  }
	
	  function filterStackString(stackString) {
	    var lines = stackString.split('\n'), desiredLines = [];
	    for (var i = 0, len = lines.length; i < len; i++) {
	      var line = lines[i];
	
	      if (!isInternalFrame(line) && !isNodeFrame(line) && line) {
	        desiredLines.push(line);
	      }
	    }
	    return desiredLines.join('\n');
	  }
	
	  function isInternalFrame(stackLine) {
	    var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);
	    if (!fileNameAndLineNumber) {
	      return false;
	    }
	    var fileName = fileNameAndLineNumber[0], lineNumber = fileNameAndLineNumber[1];
	
	    return fileName === rFileName &&
	      lineNumber >= rStartingLine &&
	      lineNumber <= rEndingLine;
	  }
	
	  function isNodeFrame(stackLine) {
	    return stackLine.indexOf('(module.js:') !== -1 ||
	      stackLine.indexOf('(node.js:') !== -1;
	  }
	
	  function captureLine() {
	    if (!hasStacks) { return; }
	
	    try {
	      throw new Error();
	    } catch (e) {
	      var lines = e.stack.split('\n');
	      var firstLine = lines[0].indexOf('@') > 0 ? lines[1] : lines[2];
	      var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);
	      if (!fileNameAndLineNumber) { return; }
	
	      rFileName = fileNameAndLineNumber[0];
	      return fileNameAndLineNumber[1];
	    }
	  }
	
	  function getFileNameAndLineNumber(stackLine) {
	    // Named functions: 'at functionName (filename:lineNumber:columnNumber)'
	    var attempt1 = /at .+ \((.+):(\d+):(?:\d+)\)$/.exec(stackLine);
	    if (attempt1) { return [attempt1[1], Number(attempt1[2])]; }
	
	    // Anonymous functions: 'at filename:lineNumber:columnNumber'
	    var attempt2 = /at ([^ ]+):(\d+):(?:\d+)$/.exec(stackLine);
	    if (attempt2) { return [attempt2[1], Number(attempt2[2])]; }
	
	    // Firefox style: 'function@filename:lineNumber or @filename:lineNumber'
	    var attempt3 = /.*@(.+):(\d+)$/.exec(stackLine);
	    if (attempt3) { return [attempt3[1], Number(attempt3[2])]; }
	  }
	
	  var EmptyError = Rx.EmptyError = function() {
	    this.message = 'Sequence contains no elements.';
	    Error.call(this);
	  };
	  EmptyError.prototype = Object.create(Error.prototype);
	  EmptyError.prototype.name = 'EmptyError';
	
	  var ObjectDisposedError = Rx.ObjectDisposedError = function() {
	    this.message = 'Object has been disposed';
	    Error.call(this);
	  };
	  ObjectDisposedError.prototype = Object.create(Error.prototype);
	  ObjectDisposedError.prototype.name = 'ObjectDisposedError';
	
	  var ArgumentOutOfRangeError = Rx.ArgumentOutOfRangeError = function () {
	    this.message = 'Argument out of range';
	    Error.call(this);
	  };
	  ArgumentOutOfRangeError.prototype = Object.create(Error.prototype);
	  ArgumentOutOfRangeError.prototype.name = 'ArgumentOutOfRangeError';
	
	  var NotSupportedError = Rx.NotSupportedError = function (message) {
	    this.message = message || 'This operation is not supported';
	    Error.call(this);
	  };
	  NotSupportedError.prototype = Object.create(Error.prototype);
	  NotSupportedError.prototype.name = 'NotSupportedError';
	
	  var NotImplementedError = Rx.NotImplementedError = function (message) {
	    this.message = message || 'This operation is not implemented';
	    Error.call(this);
	  };
	  NotImplementedError.prototype = Object.create(Error.prototype);
	  NotImplementedError.prototype.name = 'NotImplementedError';
	
	  var notImplemented = Rx.helpers.notImplemented = function () {
	    throw new NotImplementedError();
	  };
	
	  var notSupported = Rx.helpers.notSupported = function () {
	    throw new NotSupportedError();
	  };
	
	  // Shim in iterator support
	  var $iterator$ = (typeof Symbol === 'function' && Symbol.iterator) ||
	    '_es6shim_iterator_';
	  // Bug for mozilla version
	  if (root.Set && typeof new root.Set()['@@iterator'] === 'function') {
	    $iterator$ = '@@iterator';
	  }
	
	  var doneEnumerator = Rx.doneEnumerator = { done: true, value: undefined };
	
	  var isIterable = Rx.helpers.isIterable = function (o) {
	    return o && o[$iterator$] !== undefined;
	  };
	
	  var isArrayLike = Rx.helpers.isArrayLike = function (o) {
	    return o && o.length !== undefined;
	  };
	
	  Rx.helpers.iterator = $iterator$;
	
	  var bindCallback = Rx.internals.bindCallback = function (func, thisArg, argCount) {
	    if (typeof thisArg === 'undefined') { return func; }
	    switch(argCount) {
	      case 0:
	        return function() {
	          return func.call(thisArg)
	        };
	      case 1:
	        return function(arg) {
	          return func.call(thisArg, arg);
	        };
	      case 2:
	        return function(value, index) {
	          return func.call(thisArg, value, index);
	        };
	      case 3:
	        return function(value, index, collection) {
	          return func.call(thisArg, value, index, collection);
	        };
	    }
	
	    return function() {
	      return func.apply(thisArg, arguments);
	    };
	  };
	
	  /** Used to determine if values are of the language type Object */
	  var dontEnums = ['toString',
	    'toLocaleString',
	    'valueOf',
	    'hasOwnProperty',
	    'isPrototypeOf',
	    'propertyIsEnumerable',
	    'constructor'],
	  dontEnumsLength = dontEnums.length;
	
	var argsTag = '[object Arguments]',
	    arrayTag = '[object Array]',
	    boolTag = '[object Boolean]',
	    dateTag = '[object Date]',
	    errorTag = '[object Error]',
	    funcTag = '[object Function]',
	    mapTag = '[object Map]',
	    numberTag = '[object Number]',
	    objectTag = '[object Object]',
	    regexpTag = '[object RegExp]',
	    setTag = '[object Set]',
	    stringTag = '[object String]',
	    weakMapTag = '[object WeakMap]';
	
	var arrayBufferTag = '[object ArrayBuffer]',
	    float32Tag = '[object Float32Array]',
	    float64Tag = '[object Float64Array]',
	    int8Tag = '[object Int8Array]',
	    int16Tag = '[object Int16Array]',
	    int32Tag = '[object Int32Array]',
	    uint8Tag = '[object Uint8Array]',
	    uint8ClampedTag = '[object Uint8ClampedArray]',
	    uint16Tag = '[object Uint16Array]',
	    uint32Tag = '[object Uint32Array]';
	
	var typedArrayTags = {};
	typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
	typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
	typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
	typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
	typedArrayTags[uint32Tag] = true;
	typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
	typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
	typedArrayTags[dateTag] = typedArrayTags[errorTag] =
	typedArrayTags[funcTag] = typedArrayTags[mapTag] =
	typedArrayTags[numberTag] = typedArrayTags[objectTag] =
	typedArrayTags[regexpTag] = typedArrayTags[setTag] =
	typedArrayTags[stringTag] = typedArrayTags[weakMapTag] = false;
	
	var objectProto = Object.prototype,
	    hasOwnProperty = objectProto.hasOwnProperty,
	    objToString = objectProto.toString,
	    MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;
	
	var keys = Object.keys || (function() {
	    var hasOwnProperty = Object.prototype.hasOwnProperty,
	        hasDontEnumBug = !({ toString: null }).propertyIsEnumerable('toString'),
	        dontEnums = [
	          'toString',
	          'toLocaleString',
	          'valueOf',
	          'hasOwnProperty',
	          'isPrototypeOf',
	          'propertyIsEnumerable',
	          'constructor'
	        ],
	        dontEnumsLength = dontEnums.length;
	
	    return function(obj) {
	      if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {
	        throw new TypeError('Object.keys called on non-object');
	      }
	
	      var result = [], prop, i;
	
	      for (prop in obj) {
	        if (hasOwnProperty.call(obj, prop)) {
	          result.push(prop);
	        }
	      }
	
	      if (hasDontEnumBug) {
	        for (i = 0; i < dontEnumsLength; i++) {
	          if (hasOwnProperty.call(obj, dontEnums[i])) {
	            result.push(dontEnums[i]);
	          }
	        }
	      }
	      return result;
	    };
	  }());
	
	function equalObjects(object, other, equalFunc, isLoose, stackA, stackB) {
	  var objProps = keys(object),
	      objLength = objProps.length,
	      othProps = keys(other),
	      othLength = othProps.length;
	
	  if (objLength !== othLength && !isLoose) {
	    return false;
	  }
	  var index = objLength, key;
	  while (index--) {
	    key = objProps[index];
	    if (!(isLoose ? key in other : hasOwnProperty.call(other, key))) {
	      return false;
	    }
	  }
	  var skipCtor = isLoose;
	  while (++index < objLength) {
	    key = objProps[index];
	    var objValue = object[key],
	        othValue = other[key],
	        result;
	
	    if (!(result === undefined ? equalFunc(objValue, othValue, isLoose, stackA, stackB) : result)) {
	      return false;
	    }
	    skipCtor || (skipCtor = key === 'constructor');
	  }
	  if (!skipCtor) {
	    var objCtor = object.constructor,
	        othCtor = other.constructor;
	
	    if (objCtor !== othCtor &&
	        ('constructor' in object && 'constructor' in other) &&
	        !(typeof objCtor === 'function' && objCtor instanceof objCtor &&
	          typeof othCtor === 'function' && othCtor instanceof othCtor)) {
	      return false;
	    }
	  }
	  return true;
	}
	
	function equalByTag(object, other, tag) {
	  switch (tag) {
	    case boolTag:
	    case dateTag:
	      return +object === +other;
	
	    case errorTag:
	      return object.name === other.name && object.message === other.message;
	
	    case numberTag:
	      return (object !== +object) ?
	        other !== +other :
	        object === +other;
	
	    case regexpTag:
	    case stringTag:
	      return object === (other + '');
	  }
	  return false;
	}
	
	var isObject = Rx.internals.isObject = function(value) {
	  var type = typeof value;
	  return !!value && (type === 'object' || type === 'function');
	};
	
	function isObjectLike(value) {
	  return !!value && typeof value === 'object';
	}
	
	function isLength(value) {
	  return typeof value === 'number' && value > -1 && value % 1 === 0 && value <= MAX_SAFE_INTEGER;
	}
	
	var isHostObject = (function() {
	  try {
	    Object({ 'toString': 0 } + '');
	  } catch(e) {
	    return function() { return false; };
	  }
	  return function(value) {
	    return typeof value.toString !== 'function' && typeof (value + '') === 'string';
	  };
	}());
	
	function isTypedArray(value) {
	  return isObjectLike(value) && isLength(value.length) && !!typedArrayTags[objToString.call(value)];
	}
	
	var isArray = Array.isArray || function(value) {
	  return isObjectLike(value) && isLength(value.length) && objToString.call(value) === arrayTag;
	};
	
	function arraySome (array, predicate) {
	  var index = -1,
	      length = array.length;
	
	  while (++index < length) {
	    if (predicate(array[index], index, array)) {
	      return true;
	    }
	  }
	  return false;
	}
	
	function equalArrays(array, other, equalFunc, isLoose, stackA, stackB) {
	  var index = -1,
	      arrLength = array.length,
	      othLength = other.length;
	
	  if (arrLength !== othLength && !(isLoose && othLength > arrLength)) {
	    return false;
	  }
	  // Ignore non-index properties.
	  while (++index < arrLength) {
	    var arrValue = array[index],
	        othValue = other[index],
	        result;
	
	    if (result !== undefined) {
	      if (result) {
	        continue;
	      }
	      return false;
	    }
	    // Recursively compare arrays (susceptible to call stack limits).
	    if (isLoose) {
	      if (!arraySome(other, function(othValue) {
	            return arrValue === othValue || equalFunc(arrValue, othValue, isLoose, stackA, stackB);
	          })) {
	        return false;
	      }
	    } else if (!(arrValue === othValue || equalFunc(arrValue, othValue, isLoose, stackA, stackB))) {
	      return false;
	    }
	  }
	  return true;
	}
	
	function baseIsEqualDeep(object, other, equalFunc, isLoose, stackA, stackB) {
	  var objIsArr = isArray(object),
	      othIsArr = isArray(other),
	      objTag = arrayTag,
	      othTag = arrayTag;
	
	  if (!objIsArr) {
	    objTag = objToString.call(object);
	    if (objTag === argsTag) {
	      objTag = objectTag;
	    } else if (objTag !== objectTag) {
	      objIsArr = isTypedArray(object);
	    }
	  }
	  if (!othIsArr) {
	    othTag = objToString.call(other);
	    if (othTag === argsTag) {
	      othTag = objectTag;
	    }
	  }
	  var objIsObj = objTag === objectTag && !isHostObject(object),
	      othIsObj = othTag === objectTag && !isHostObject(other),
	      isSameTag = objTag === othTag;
	
	  if (isSameTag && !(objIsArr || objIsObj)) {
	    return equalByTag(object, other, objTag);
	  }
	  if (!isLoose) {
	    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),
	        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');
	
	    if (objIsWrapped || othIsWrapped) {
	      return equalFunc(objIsWrapped ? object.value() : object, othIsWrapped ? other.value() : other, isLoose, stackA, stackB);
	    }
	  }
	  if (!isSameTag) {
	    return false;
	  }
	  // Assume cyclic values are equal.
	  // For more information on detecting circular references see https://es5.github.io/#JO.
	  stackA || (stackA = []);
	  stackB || (stackB = []);
	
	  var length = stackA.length;
	  while (length--) {
	    if (stackA[length] === object) {
	      return stackB[length] === other;
	    }
	  }
	  // Add `object` and `other` to the stack of traversed objects.
	  stackA.push(object);
	  stackB.push(other);
	
	  var result = (objIsArr ? equalArrays : equalObjects)(object, other, equalFunc, isLoose, stackA, stackB);
	
	  stackA.pop();
	  stackB.pop();
	
	  return result;
	}
	
	function baseIsEqual(value, other, isLoose, stackA, stackB) {
	  if (value === other) {
	    return true;
	  }
	  if (value == null || other == null || (!isObject(value) && !isObjectLike(other))) {
	    return value !== value && other !== other;
	  }
	  return baseIsEqualDeep(value, other, baseIsEqual, isLoose, stackA, stackB);
	}
	
	var isEqual = Rx.internals.isEqual = function (value, other) {
	  return baseIsEqual(value, other);
	};
	
	  var hasProp = {}.hasOwnProperty,
	      slice = Array.prototype.slice;
	
	  var inherits = Rx.internals.inherits = function (child, parent) {
	    function __() { this.constructor = child; }
	    __.prototype = parent.prototype;
	    child.prototype = new __();
	  };
	
	  var addProperties = Rx.internals.addProperties = function (obj) {
	    for(var sources = [], i = 1, len = arguments.length; i < len; i++) { sources.push(arguments[i]); }
	    for (var idx = 0, ln = sources.length; idx < ln; idx++) {
	      var source = sources[idx];
	      for (var prop in source) {
	        obj[prop] = source[prop];
	      }
	    }
	  };
	
	  // Rx Utils
	  var addRef = Rx.internals.addRef = function (xs, r) {
	    return new AnonymousObservable(function (observer) {
	      return new BinaryDisposable(r.getDisposable(), xs.subscribe(observer));
	    });
	  };
	
	  function arrayInitialize(count, factory) {
	    var a = new Array(count);
	    for (var i = 0; i < count; i++) {
	      a[i] = factory();
	    }
	    return a;
	  }
	
	  function IndexedItem(id, value) {
	    this.id = id;
	    this.value = value;
	  }
	
	  IndexedItem.prototype.compareTo = function (other) {
	    var c = this.value.compareTo(other.value);
	    c === 0 && (c = this.id - other.id);
	    return c;
	  };
	
	  var PriorityQueue = Rx.internals.PriorityQueue = function (capacity) {
	    this.items = new Array(capacity);
	    this.length = 0;
	  };
	
	  var priorityProto = PriorityQueue.prototype;
	  priorityProto.isHigherPriority = function (left, right) {
	    return this.items[left].compareTo(this.items[right]) < 0;
	  };
	
	  priorityProto.percolate = function (index) {
	    if (index >= this.length || index < 0) { return; }
	    var parent = index - 1 >> 1;
	    if (parent < 0 || parent === index) { return; }
	    if (this.isHigherPriority(index, parent)) {
	      var temp = this.items[index];
	      this.items[index] = this.items[parent];
	      this.items[parent] = temp;
	      this.percolate(parent);
	    }
	  };
	
	  priorityProto.heapify = function (index) {
	    +index || (index = 0);
	    if (index >= this.length || index < 0) { return; }
	    var left = 2 * index + 1,
	        right = 2 * index + 2,
	        first = index;
	    if (left < this.length && this.isHigherPriority(left, first)) {
	      first = left;
	    }
	    if (right < this.length && this.isHigherPriority(right, first)) {
	      first = right;
	    }
	    if (first !== index) {
	      var temp = this.items[index];
	      this.items[index] = this.items[first];
	      this.items[first] = temp;
	      this.heapify(first);
	    }
	  };
	
	  priorityProto.peek = function () { return this.items[0].value; };
	
	  priorityProto.removeAt = function (index) {
	    this.items[index] = this.items[--this.length];
	    this.items[this.length] = undefined;
	    this.heapify();
	  };
	
	  priorityProto.dequeue = function () {
	    var result = this.peek();
	    this.removeAt(0);
	    return result;
	  };
	
	  priorityProto.enqueue = function (item) {
	    var index = this.length++;
	    this.items[index] = new IndexedItem(PriorityQueue.count++, item);
	    this.percolate(index);
	  };
	
	  priorityProto.remove = function (item) {
	    for (var i = 0; i < this.length; i++) {
	      if (this.items[i].value === item) {
	        this.removeAt(i);
	        return true;
	      }
	    }
	    return false;
	  };
	  PriorityQueue.count = 0;
	
	  /**
	   * Represents a group of disposable resources that are disposed together.
	   * @constructor
	   */
	  var CompositeDisposable = Rx.CompositeDisposable = function () {
	    var args = [], i, len;
	    if (Array.isArray(arguments[0])) {
	      args = arguments[0];
	    } else {
	      len = arguments.length;
	      args = new Array(len);
	      for(i = 0; i < len; i++) { args[i] = arguments[i]; }
	    }
	    this.disposables = args;
	    this.isDisposed = false;
	    this.length = args.length;
	  };
	
	  var CompositeDisposablePrototype = CompositeDisposable.prototype;
	
	  /**
	   * Adds a disposable to the CompositeDisposable or disposes the disposable if the CompositeDisposable is disposed.
	   * @param {Mixed} item Disposable to add.
	   */
	  CompositeDisposablePrototype.add = function (item) {
	    if (this.isDisposed) {
	      item.dispose();
	    } else {
	      this.disposables.push(item);
	      this.length++;
	    }
	  };
	
	  /**
	   * Removes and disposes the first occurrence of a disposable from the CompositeDisposable.
	   * @param {Mixed} item Disposable to remove.
	   * @returns {Boolean} true if found; false otherwise.
	   */
	  CompositeDisposablePrototype.remove = function (item) {
	    var shouldDispose = false;
	    if (!this.isDisposed) {
	      var idx = this.disposables.indexOf(item);
	      if (idx !== -1) {
	        shouldDispose = true;
	        this.disposables.splice(idx, 1);
	        this.length--;
	        item.dispose();
	      }
	    }
	    return shouldDispose;
	  };
	
	  /**
	   *  Disposes all disposables in the group and removes them from the group.
	   */
	  CompositeDisposablePrototype.dispose = function () {
	    if (!this.isDisposed) {
	      this.isDisposed = true;
	      var len = this.disposables.length, currentDisposables = new Array(len);
	      for(var i = 0; i < len; i++) { currentDisposables[i] = this.disposables[i]; }
	      this.disposables = [];
	      this.length = 0;
	
	      for (i = 0; i < len; i++) {
	        currentDisposables[i].dispose();
	      }
	    }
	  };
	
	  /**
	   * Provides a set of static methods for creating Disposables.
	   * @param {Function} dispose Action to run during the first call to dispose. The action is guaranteed to be run at most once.
	   */
	  var Disposable = Rx.Disposable = function (action) {
	    this.isDisposed = false;
	    this.action = action || noop;
	  };
	
	  /** Performs the task of cleaning up resources. */
	  Disposable.prototype.dispose = function () {
	    if (!this.isDisposed) {
	      this.action();
	      this.isDisposed = true;
	    }
	  };
	
	  /**
	   * Creates a disposable object that invokes the specified action when disposed.
	   * @param {Function} dispose Action to run during the first call to dispose. The action is guaranteed to be run at most once.
	   * @return {Disposable} The disposable object that runs the given action upon disposal.
	   */
	  var disposableCreate = Disposable.create = function (action) { return new Disposable(action); };
	
	  /**
	   * Gets the disposable that does nothing when disposed.
	   */
	  var disposableEmpty = Disposable.empty = { dispose: noop };
	
	  /**
	   * Validates whether the given object is a disposable
	   * @param {Object} Object to test whether it has a dispose method
	   * @returns {Boolean} true if a disposable object, else false.
	   */
	  var isDisposable = Disposable.isDisposable = function (d) {
	    return d && isFunction(d.dispose);
	  };
	
	  var checkDisposed = Disposable.checkDisposed = function (disposable) {
	    if (disposable.isDisposed) { throw new ObjectDisposedError(); }
	  };
	
	  var disposableFixup = Disposable._fixup = function (result) {
	    return isDisposable(result) ? result : disposableEmpty;
	  };
	
	  // Single assignment
	  var SingleAssignmentDisposable = Rx.SingleAssignmentDisposable = function () {
	    this.isDisposed = false;
	    this.current = null;
	  };
	  SingleAssignmentDisposable.prototype.getDisposable = function () {
	    return this.current;
	  };
	  SingleAssignmentDisposable.prototype.setDisposable = function (value) {
	    if (this.current) { throw new Error('Disposable has already been assigned'); }
	    var shouldDispose = this.isDisposed;
	    !shouldDispose && (this.current = value);
	    shouldDispose && value && value.dispose();
	  };
	  SingleAssignmentDisposable.prototype.dispose = function () {
	    if (!this.isDisposed) {
	      this.isDisposed = true;
	      var old = this.current;
	      this.current = null;
	      old && old.dispose();
	    }
	  };
	
	  // Multiple assignment disposable
	  var SerialDisposable = Rx.SerialDisposable = function () {
	    this.isDisposed = false;
	    this.current = null;
	  };
	  SerialDisposable.prototype.getDisposable = function () {
	    return this.current;
	  };
	  SerialDisposable.prototype.setDisposable = function (value) {
	    var shouldDispose = this.isDisposed;
	    if (!shouldDispose) {
	      var old = this.current;
	      this.current = value;
	    }
	    old && old.dispose();
	    shouldDispose && value && value.dispose();
	  };
	  SerialDisposable.prototype.dispose = function () {
	    if (!this.isDisposed) {
	      this.isDisposed = true;
	      var old = this.current;
	      this.current = null;
	    }
	    old && old.dispose();
	  };
	
	  var BinaryDisposable = Rx.BinaryDisposable = function (first, second) {
	    this._first = first;
	    this._second = second;
	    this.isDisposed = false;
	  };
	
	  BinaryDisposable.prototype.dispose = function () {
	    if (!this.isDisposed) {
	      this.isDisposed = true;
	      var old1 = this._first;
	      this._first = null;
	      old1 && old1.dispose();
	      var old2 = this._second;
	      this._second = null;
	      old2 && old2.dispose();
	    }
	  };
	
	  var NAryDisposable = Rx.NAryDisposable = function (disposables) {
	    this._disposables = disposables;
	    this.isDisposed = false;
	  };
	
	  NAryDisposable.prototype.dispose = function () {
	    if (!this.isDisposed) {
	      this.isDisposed = true;
	      for (var i = 0, len = this._disposables.length; i < len; i++) {
	        this._disposables[i].dispose();
	      }
	      this._disposables.length = 0;
	    }
	  };
	
	  /**
	   * Represents a disposable resource that only disposes its underlying disposable resource when all dependent disposable objects have been disposed.
	   */
	  var RefCountDisposable = Rx.RefCountDisposable = (function () {
	
	    function InnerDisposable(disposable) {
	      this.disposable = disposable;
	      this.disposable.count++;
	      this.isInnerDisposed = false;
	    }
	
	    InnerDisposable.prototype.dispose = function () {
	      if (!this.disposable.isDisposed && !this.isInnerDisposed) {
	        this.isInnerDisposed = true;
	        this.disposable.count--;
	        if (this.disposable.count === 0 && this.disposable.isPrimaryDisposed) {
	          this.disposable.isDisposed = true;
	          this.disposable.underlyingDisposable.dispose();
	        }
	      }
	    };
	
	    /**
	     * Initializes a new instance of the RefCountDisposable with the specified disposable.
	     * @constructor
	     * @param {Disposable} disposable Underlying disposable.
	      */
	    function RefCountDisposable(disposable) {
	      this.underlyingDisposable = disposable;
	      this.isDisposed = false;
	      this.isPrimaryDisposed = false;
	      this.count = 0;
	    }
	
	    /**
	     * Disposes the underlying disposable only when all dependent disposables have been disposed
	     */
	    RefCountDisposable.prototype.dispose = function () {
	      if (!this.isDisposed && !this.isPrimaryDisposed) {
	        this.isPrimaryDisposed = true;
	        if (this.count === 0) {
	          this.isDisposed = true;
	          this.underlyingDisposable.dispose();
	        }
	      }
	    };
	
	    /**
	     * Returns a dependent disposable that when disposed decreases the refcount on the underlying disposable.
	     * @returns {Disposable} A dependent disposable contributing to the reference count that manages the underlying disposable's lifetime.
	     */
	    RefCountDisposable.prototype.getDisposable = function () {
	      return this.isDisposed ? disposableEmpty : new InnerDisposable(this);
	    };
	
	    return RefCountDisposable;
	  })();
	
	  function ScheduledDisposable(scheduler, disposable) {
	    this.scheduler = scheduler;
	    this.disposable = disposable;
	    this.isDisposed = false;
	  }
	
	  function scheduleItem(s, self) {
	    if (!self.isDisposed) {
	      self.isDisposed = true;
	      self.disposable.dispose();
	    }
	  }
	
	  ScheduledDisposable.prototype.dispose = function () {
	    this.scheduler.schedule(this, scheduleItem);
	  };
	
	  var ScheduledItem = Rx.internals.ScheduledItem = function (scheduler, state, action, dueTime, comparer) {
	    this.scheduler = scheduler;
	    this.state = state;
	    this.action = action;
	    this.dueTime = dueTime;
	    this.comparer = comparer || defaultSubComparer;
	    this.disposable = new SingleAssignmentDisposable();
	  };
	
	  ScheduledItem.prototype.invoke = function () {
	    this.disposable.setDisposable(this.invokeCore());
	  };
	
	  ScheduledItem.prototype.compareTo = function (other) {
	    return this.comparer(this.dueTime, other.dueTime);
	  };
	
	  ScheduledItem.prototype.isCancelled = function () {
	    return this.disposable.isDisposed;
	  };
	
	  ScheduledItem.prototype.invokeCore = function () {
	    return disposableFixup(this.action(this.scheduler, this.state));
	  };
	
	  /** Provides a set of static properties to access commonly used schedulers. */
	  var Scheduler = Rx.Scheduler = (function () {
	
	    function Scheduler() { }
	
	    /** Determines whether the given object is a scheduler */
	    Scheduler.isScheduler = function (s) {
	      return s instanceof Scheduler;
	    };
	
	    var schedulerProto = Scheduler.prototype;
	
	    /**
	   * Schedules an action to be executed.
	   * @param state State passed to the action to be executed.
	   * @param {Function} action Action to be executed.
	   * @returns {Disposable} The disposable object used to cancel the scheduled action (best effort).
	   */
	    schedulerProto.schedule = function (state, action) {
	      throw new NotImplementedError();
	    };
	
	  /**
	   * Schedules an action to be executed after dueTime.
	   * @param state State passed to the action to be executed.
	   * @param {Function} action Action to be executed.
	   * @param {Number} dueTime Relative time after which to execute the action.
	   * @returns {Disposable} The disposable object used to cancel the scheduled action (best effort).
	   */
	    schedulerProto.scheduleFuture = function (state, dueTime, action) {
	      var dt = dueTime;
	      dt instanceof Date && (dt = dt - this.now());
	      dt = Scheduler.normalize(dt);
	
	      if (dt === 0) { return this.schedule(state, action); }
	
	      return this._scheduleFuture(state, dt, action);
	    };
	
	    schedulerProto._scheduleFuture = function (state, dueTime, action) {
	      throw new NotImplementedError();
	    };
	
	    /** Gets the current time according to the local machine's system clock. */
	    Scheduler.now = defaultNow;
	
	    /** Gets the current time according to the local machine's system clock. */
	    Scheduler.prototype.now = defaultNow;
	
	    /**
	     * Normalizes the specified TimeSpan value to a positive value.
	     * @param {Number} timeSpan The time span value to normalize.
	     * @returns {Number} The specified TimeSpan value if it is zero or positive; otherwise, 0
	     */
	    Scheduler.normalize = function (timeSpan) {
	      timeSpan < 0 && (timeSpan = 0);
	      return timeSpan;
	    };
	
	    return Scheduler;
	  }());
	
	  var normalizeTime = Scheduler.normalize, isScheduler = Scheduler.isScheduler;
	
	  (function (schedulerProto) {
	
	    function invokeRecImmediate(scheduler, pair) {
	      var state = pair[0], action = pair[1], group = new CompositeDisposable();
	      action(state, innerAction);
	      return group;
	
	      function innerAction(state2) {
	        var isAdded = false, isDone = false;
	
	        var d = scheduler.schedule(state2, scheduleWork);
	        if (!isDone) {
	          group.add(d);
	          isAdded = true;
	        }
	
	        function scheduleWork(_, state3) {
	          if (isAdded) {
	            group.remove(d);
	          } else {
	            isDone = true;
	          }
	          action(state3, innerAction);
	          return disposableEmpty;
	        }
	      }
	    }
	
	    function invokeRecDate(scheduler, pair) {
	      var state = pair[0], action = pair[1], group = new CompositeDisposable();
	      action(state, innerAction);
	      return group;
	
	      function innerAction(state2, dueTime1) {
	        var isAdded = false, isDone = false;
	
	        var d = scheduler.scheduleFuture(state2, dueTime1, scheduleWork);
	        if (!isDone) {
	          group.add(d);
	          isAdded = true;
	        }
	
	        function scheduleWork(_, state3) {
	          if (isAdded) {
	            group.remove(d);
	          } else {
	            isDone = true;
	          }
	          action(state3, innerAction);
	          return disposableEmpty;
	        }
	      }
	    }
	
	    /**
	     * Schedules an action to be executed recursively.
	     * @param {Mixed} state State passed to the action to be executed.
	     * @param {Function} action Action to execute recursively. The last parameter passed to the action is used to trigger recursive scheduling of the action, passing in recursive invocation state.
	     * @returns {Disposable} The disposable object used to cancel the scheduled action (best effort).
	     */
	    schedulerProto.scheduleRecursive = function (state, action) {
	      return this.schedule([state, action], invokeRecImmediate);
	    };
	
	    /**
	     * Schedules an action to be executed recursively after a specified relative or absolute due time.
	     * @param {Mixed} state State passed to the action to be executed.
	     * @param {Function} action Action to execute recursively. The last parameter passed to the action is used to trigger recursive scheduling of the action, passing in the recursive due time and invocation state.
	     * @param {Number | Date} dueTime Relative or absolute time after which to execute the action for the first time.
	     * @returns {Disposable} The disposable object used to cancel the scheduled action (best effort).
	     */
	    schedulerProto.scheduleRecursiveFuture = function (state, dueTime, action) {
	      return this.scheduleFuture([state, action], dueTime, invokeRecDate);
	    };
	
	  }(Scheduler.prototype));
	
	  (function (schedulerProto) {
	
	    /**
	     * Schedules a periodic piece of work by dynamically discovering the scheduler's capabilities. The periodic task will be scheduled using window.setInterval for the base implementation.
	     * @param {Mixed} state Initial state passed to the action upon the first iteration.
	     * @param {Number} period Period for running the work periodically.
	     * @param {Function} action Action to be executed, potentially updating the state.
	     * @returns {Disposable} The disposable object used to cancel the scheduled recurring action (best effort).
	     */
	    schedulerProto.schedulePeriodic = function(state, period, action) {
	      if (typeof root.setInterval === 'undefined') { throw new NotSupportedError(); }
	      period = normalizeTime(period);
	      var s = state, id = root.setInterval(function () { s = action(s); }, period);
	      return disposableCreate(function () { root.clearInterval(id); });
	    };
	
	  }(Scheduler.prototype));
	
	  (function (schedulerProto) {
	    /**
	     * Returns a scheduler that wraps the original scheduler, adding exception handling for scheduled actions.
	     * @param {Function} handler Handler that's run if an exception is caught. The exception will be rethrown if the handler returns false.
	     * @returns {Scheduler} Wrapper around the original scheduler, enforcing exception handling.
	     */
	    schedulerProto.catchError = schedulerProto['catch'] = function (handler) {
	      return new CatchScheduler(this, handler);
	    };
	  }(Scheduler.prototype));
	
	  var SchedulePeriodicRecursive = Rx.internals.SchedulePeriodicRecursive = (function () {
	    function createTick(self) {
	      return function tick(command, recurse) {
	        recurse(0, self._period);
	        var state = tryCatch(self._action)(self._state);
	        if (state === errorObj) {
	          self._cancel.dispose();
	          thrower(state.e);
	        }
	        self._state = state;
	      };
	    }
	
	    function SchedulePeriodicRecursive(scheduler, state, period, action) {
	      this._scheduler = scheduler;
	      this._state = state;
	      this._period = period;
	      this._action = action;
	    }
	
	    SchedulePeriodicRecursive.prototype.start = function () {
	      var d = new SingleAssignmentDisposable();
	      this._cancel = d;
	      d.setDisposable(this._scheduler.scheduleRecursiveFuture(0, this._period, createTick(this)));
	
	      return d;
	    };
	
	    return SchedulePeriodicRecursive;
	  }());
	
	  /** Gets a scheduler that schedules work immediately on the current thread. */
	   var ImmediateScheduler = (function (__super__) {
	    inherits(ImmediateScheduler, __super__);
	    function ImmediateScheduler() {
	      __super__.call(this);
	    }
	
	    ImmediateScheduler.prototype.schedule = function (state, action) {
	      return disposableFixup(action(this, state));
	    };
	
	    return ImmediateScheduler;
	  }(Scheduler));
	
	  var immediateScheduler = Scheduler.immediate = new ImmediateScheduler();
	
	  /**
	   * Gets a scheduler that schedules work as soon as possible on the current thread.
	   */
	  var CurrentThreadScheduler = (function (__super__) {
	    var queue;
	
	    function runTrampoline () {
	      while (queue.length > 0) {
	        var item = queue.dequeue();
	        !item.isCancelled() && item.invoke();
	      }
	    }
	
	    inherits(CurrentThreadScheduler, __super__);
	    function CurrentThreadScheduler() {
	      __super__.call(this);
	    }
	
	    CurrentThreadScheduler.prototype.schedule = function (state, action) {
	      var si = new ScheduledItem(this, state, action, this.now());
	
	      if (!queue) {
	        queue = new PriorityQueue(4);
	        queue.enqueue(si);
	
	        var result = tryCatch(runTrampoline)();
	        queue = null;
	        if (result === errorObj) { thrower(result.e); }
	      } else {
	        queue.enqueue(si);
	      }
	      return si.disposable;
	    };
	
	    CurrentThreadScheduler.prototype.scheduleRequired = function () { return !queue; };
	
	    return CurrentThreadScheduler;
	  }(Scheduler));
	
	  var currentThreadScheduler = Scheduler.currentThread = new CurrentThreadScheduler();
	
	  var scheduleMethod, clearMethod;
	
	  var localTimer = (function () {
	    var localSetTimeout, localClearTimeout = noop;
	    if (!!root.setTimeout) {
	      localSetTimeout = root.setTimeout;
	      localClearTimeout = root.clearTimeout;
	    } else if (!!root.WScript) {
	      localSetTimeout = function (fn, time) {
	        root.WScript.Sleep(time);
	        fn();
	      };
	    } else {
	      throw new NotSupportedError();
	    }
	
	    return {
	      setTimeout: localSetTimeout,
	      clearTimeout: localClearTimeout
	    };
	  }());
	  var localSetTimeout = localTimer.setTimeout,
	    localClearTimeout = localTimer.clearTimeout;
	
	  (function () {
	
	    var nextHandle = 1, tasksByHandle = {}, currentlyRunning = false;
	
	    clearMethod = function (handle) {
	      delete tasksByHandle[handle];
	    };
	
	    function runTask(handle) {
	      if (currentlyRunning) {
	        localSetTimeout(function () { runTask(handle); }, 0);
	      } else {
	        var task = tasksByHandle[handle];
	        if (task) {
	          currentlyRunning = true;
	          var result = tryCatch(task)();
	          clearMethod(handle);
	          currentlyRunning = false;
	          if (result === errorObj) { thrower(result.e); }
	        }
	      }
	    }
	
	    var reNative = new RegExp('^' +
	      String(toString)
	        .replace(/[.*+?^${}()|[\]\\]/g, '\\$&')
	        .replace(/toString| for [^\]]+/g, '.*?') + '$'
	    );
	
	    var setImmediate = typeof (setImmediate = freeGlobal && moduleExports && freeGlobal.setImmediate) == 'function' &&
	      !reNative.test(setImmediate) && setImmediate;
	
	    function postMessageSupported () {
	      // Ensure not in a worker
	      if (!root.postMessage || root.importScripts) { return false; }
	      var isAsync = false, oldHandler = root.onmessage;
	      // Test for async
	      root.onmessage = function () { isAsync = true; };
	      root.postMessage('', '*');
	      root.onmessage = oldHandler;
	
	      return isAsync;
	    }
	
	    // Use in order, setImmediate, nextTick, postMessage, MessageChannel, script readystatechanged, setTimeout
	    if (isFunction(setImmediate)) {
	      scheduleMethod = function (action) {
	        var id = nextHandle++;
	        tasksByHandle[id] = action;
	        setImmediate(function () { runTask(id); });
	
	        return id;
	      };
	    } else if (typeof process !== 'undefined' && {}.toString.call(process) === '[object process]') {
	      scheduleMethod = function (action) {
	        var id = nextHandle++;
	        tasksByHandle[id] = action;
	        process.nextTick(function () { runTask(id); });
	
	        return id;
	      };
	    } else if (postMessageSupported()) {
	      var MSG_PREFIX = 'ms.rx.schedule' + Math.random();
	
	      var onGlobalPostMessage = function (event) {
	        // Only if we're a match to avoid any other global events
	        if (typeof event.data === 'string' && event.data.substring(0, MSG_PREFIX.length) === MSG_PREFIX) {
	          runTask(event.data.substring(MSG_PREFIX.length));
	        }
	      };
	
	      root.addEventListener('message', onGlobalPostMessage, false);
	
	      scheduleMethod = function (action) {
	        var id = nextHandle++;
	        tasksByHandle[id] = action;
	        root.postMessage(MSG_PREFIX + id, '*');
	        return id;
	      };
	    } else if (!!root.MessageChannel) {
	      var channel = new root.MessageChannel();
	
	      channel.port1.onmessage = function (e) { runTask(e.data); };
	
	      scheduleMethod = function (action) {
	        var id = nextHandle++;
	        tasksByHandle[id] = action;
	        channel.port2.postMessage(id);
	        return id;
	      };
	    } else if ('document' in root && 'onreadystatechange' in root.document.createElement('script')) {
	
	      scheduleMethod = function (action) {
	        var scriptElement = root.document.createElement('script');
	        var id = nextHandle++;
	        tasksByHandle[id] = action;
	
	        scriptElement.onreadystatechange = function () {
	          runTask(id);
	          scriptElement.onreadystatechange = null;
	          scriptElement.parentNode.removeChild(scriptElement);
	          scriptElement = null;
	        };
	        root.document.documentElement.appendChild(scriptElement);
	        return id;
	      };
	
	    } else {
	      scheduleMethod = function (action) {
	        var id = nextHandle++;
	        tasksByHandle[id] = action;
	        localSetTimeout(function () {
	          runTask(id);
	        }, 0);
	
	        return id;
	      };
	    }
	  }());
	
	  /**
	   * Gets a scheduler that schedules work via a timed callback based upon platform.
	   */
	   var DefaultScheduler = (function (__super__) {
	     inherits(DefaultScheduler, __super__);
	     function DefaultScheduler() {
	       __super__.call(this);
	     }
	
	     function scheduleAction(disposable, action, scheduler, state) {
	       return function schedule() {
	         disposable.setDisposable(Disposable._fixup(action(scheduler, state)));
	       };
	     }
	
	     function ClearDisposable(id) {
	       this._id = id;
	       this.isDisposed = false;
	     }
	
	     ClearDisposable.prototype.dispose = function () {
	       if (!this.isDisposed) {
	         this.isDisposed = true;
	         clearMethod(this._id);
	       }
	     };
	
	     function LocalClearDisposable(id) {
	       this._id = id;
	       this.isDisposed = false;
	     }
	
	     LocalClearDisposable.prototype.dispose = function () {
	       if (!this.isDisposed) {
	         this.isDisposed = true;
	         localClearTimeout(this._id);
	       }
	     };
	
	    DefaultScheduler.prototype.schedule = function (state, action) {
	      var disposable = new SingleAssignmentDisposable(),
	          id = scheduleMethod(scheduleAction(disposable, action, this, state));
	      return new BinaryDisposable(disposable, new ClearDisposable(id));
	    };
	
	    DefaultScheduler.prototype._scheduleFuture = function (state, dueTime, action) {
	      if (dueTime === 0) { return this.schedule(state, action); }
	      var disposable = new SingleAssignmentDisposable(),
	          id = localSetTimeout(scheduleAction(disposable, action, this, state), dueTime);
	      return new BinaryDisposable(disposable, new LocalClearDisposable(id));
	    };
	
	    return DefaultScheduler;
	  }(Scheduler));
	
	  var defaultScheduler = Scheduler['default'] = Scheduler.async = new DefaultScheduler();
	
	  var CatchScheduler = (function (__super__) {
	    inherits(CatchScheduler, __super__);
	
	    function CatchScheduler(scheduler, handler) {
	      this._scheduler = scheduler;
	      this._handler = handler;
	      this._recursiveOriginal = null;
	      this._recursiveWrapper = null;
	      __super__.call(this);
	    }
	
	    CatchScheduler.prototype.schedule = function (state, action) {
	      return this._scheduler.schedule(state, this._wrap(action));
	    };
	
	    CatchScheduler.prototype._scheduleFuture = function (state, dueTime, action) {
	      return this._scheduler.schedule(state, dueTime, this._wrap(action));
	    };
	
	    CatchScheduler.prototype.now = function () { return this._scheduler.now(); };
	
	    CatchScheduler.prototype._clone = function (scheduler) {
	        return new CatchScheduler(scheduler, this._handler);
	    };
	
	    CatchScheduler.prototype._wrap = function (action) {
	      var parent = this;
	      return function (self, state) {
	        var res = tryCatch(action)(parent._getRecursiveWrapper(self), state);
	        if (res === errorObj) {
	          if (!parent._handler(res.e)) { thrower(res.e); }
	          return disposableEmpty;
	        }
	        return disposableFixup(res);
	      };
	    };
	
	    CatchScheduler.prototype._getRecursiveWrapper = function (scheduler) {
	      if (this._recursiveOriginal !== scheduler) {
	        this._recursiveOriginal = scheduler;
	        var wrapper = this._clone(scheduler);
	        wrapper._recursiveOriginal = scheduler;
	        wrapper._recursiveWrapper = wrapper;
	        this._recursiveWrapper = wrapper;
	      }
	      return this._recursiveWrapper;
	    };
	
	    CatchScheduler.prototype.schedulePeriodic = function (state, period, action) {
	      var self = this, failed = false, d = new SingleAssignmentDisposable();
	
	      d.setDisposable(this._scheduler.schedulePeriodic(state, period, function (state1) {
	        if (failed) { return null; }
	        var res = tryCatch(action)(state1);
	        if (res === errorObj) {
	          failed = true;
	          if (!self._handler(res.e)) { thrower(res.e); }
	          d.dispose();
	          return null;
	        }
	        return res;
	      }));
	
	      return d;
	    };
	
	    return CatchScheduler;
	  }(Scheduler));
	
	  /**
	   *  Represents a notification to an observer.
	   */
	  var Notification = Rx.Notification = (function () {
	    function Notification() {
	
	    }
	
	    Notification.prototype._accept = function (onNext, onError, onCompleted) {
	      throw new NotImplementedError();
	    };
	
	    Notification.prototype._acceptObserver = function (onNext, onError, onCompleted) {
	      throw new NotImplementedError();
	    };
	
	    /**
	     * Invokes the delegate corresponding to the notification or the observer's method corresponding to the notification and returns the produced result.
	     * @param {Function | Observer} observerOrOnNext Function to invoke for an OnNext notification or Observer to invoke the notification on..
	     * @param {Function} onError Function to invoke for an OnError notification.
	     * @param {Function} onCompleted Function to invoke for an OnCompleted notification.
	     * @returns {Any} Result produced by the observation.
	     */
	    Notification.prototype.accept = function (observerOrOnNext, onError, onCompleted) {
	      return observerOrOnNext && typeof observerOrOnNext === 'object' ?
	        this._acceptObserver(observerOrOnNext) :
	        this._accept(observerOrOnNext, onError, onCompleted);
	    };
	
	    /**
	     * Returns an observable sequence with a single notification.
	     *
	     * @memberOf Notifications
	     * @param {Scheduler} [scheduler] Scheduler to send out the notification calls on.
	     * @returns {Observable} The observable sequence that surfaces the behavior of the notification upon subscription.
	     */
	    Notification.prototype.toObservable = function (scheduler) {
	      var self = this;
	      isScheduler(scheduler) || (scheduler = immediateScheduler);
	      return new AnonymousObservable(function (o) {
	        return scheduler.schedule(self, function (_, notification) {
	          notification._acceptObserver(o);
	          notification.kind === 'N' && o.onCompleted();
	        });
	      });
	    };
	
	    return Notification;
	  })();
	
	  var OnNextNotification = (function (__super__) {
	    inherits(OnNextNotification, __super__);
	    function OnNextNotification(value) {
	      this.value = value;
	      this.kind = 'N';
	    }
	
	    OnNextNotification.prototype._accept = function (onNext) {
	      return onNext(this.value);
	    };
	
	    OnNextNotification.prototype._acceptObserver = function (o) {
	      return o.onNext(this.value);
	    };
	
	    OnNextNotification.prototype.toString = function () {
	      return 'OnNext(' + this.value + ')';
	    };
	
	    return OnNextNotification;
	  }(Notification));
	
	  var OnErrorNotification = (function (__super__) {
	    inherits(OnErrorNotification, __super__);
	    function OnErrorNotification(error) {
	      this.error = error;
	      this.kind = 'E';
	    }
	
	    OnErrorNotification.prototype._accept = function (onNext, onError) {
	      return onError(this.error);
	    };
	
	    OnErrorNotification.prototype._acceptObserver = function (o) {
	      return o.onError(this.error);
	    };
	
	    OnErrorNotification.prototype.toString = function () {
	      return 'OnError(' + this.error + ')';
	    };
	
	    return OnErrorNotification;
	  }(Notification));
	
	  var OnCompletedNotification = (function (__super__) {
	    inherits(OnCompletedNotification, __super__);
	    function OnCompletedNotification() {
	      this.kind = 'C';
	    }
	
	    OnCompletedNotification.prototype._accept = function (onNext, onError, onCompleted) {
	      return onCompleted();
	    };
	
	    OnCompletedNotification.prototype._acceptObserver = function (o) {
	      return o.onCompleted();
	    };
	
	    OnCompletedNotification.prototype.toString = function () {
	      return 'OnCompleted()';
	    };
	
	    return OnCompletedNotification;
	  }(Notification));
	
	  /**
	   * Creates an object that represents an OnNext notification to an observer.
	   * @param {Any} value The value contained in the notification.
	   * @returns {Notification} The OnNext notification containing the value.
	   */
	  var notificationCreateOnNext = Notification.createOnNext = function (value) {
	    return new OnNextNotification(value);
	  };
	
	  /**
	   * Creates an object that represents an OnError notification to an observer.
	   * @param {Any} error The exception contained in the notification.
	   * @returns {Notification} The OnError notification containing the exception.
	   */
	  var notificationCreateOnError = Notification.createOnError = function (error) {
	    return new OnErrorNotification(error);
	  };
	
	  /**
	   * Creates an object that represents an OnCompleted notification to an observer.
	   * @returns {Notification} The OnCompleted notification.
	   */
	  var notificationCreateOnCompleted = Notification.createOnCompleted = function () {
	    return new OnCompletedNotification();
	  };
	
	  /**
	   * Supports push-style iteration over an observable sequence.
	   */
	  var Observer = Rx.Observer = function () { };
	
	  /**
	   *  Creates a notification callback from an observer.
	   * @returns The action that forwards its input notification to the underlying observer.
	   */
	  Observer.prototype.toNotifier = function () {
	    var observer = this;
	    return function (n) { return n.accept(observer); };
	  };
	
	  /**
	   *  Hides the identity of an observer.
	   * @returns An observer that hides the identity of the specified observer.
	   */
	  Observer.prototype.asObserver = function () {
	    var self = this;
	    return new AnonymousObserver(
	      function (x) { self.onNext(x); },
	      function (err) { self.onError(err); },
	      function () { self.onCompleted(); });
	  };
	
	  /**
	   *  Checks access to the observer for grammar violations. This includes checking for multiple OnError or OnCompleted calls, as well as reentrancy in any of the observer methods.
	   *  If a violation is detected, an Error is thrown from the offending observer method call.
	   * @returns An observer that checks callbacks invocations against the observer grammar and, if the checks pass, forwards those to the specified observer.
	   */
	  Observer.prototype.checked = function () { return new CheckedObserver(this); };
	
	  /**
	   *  Creates an observer from the specified OnNext, along with optional OnError, and OnCompleted actions.
	   * @param {Function} [onNext] Observer's OnNext action implementation.
	   * @param {Function} [onError] Observer's OnError action implementation.
	   * @param {Function} [onCompleted] Observer's OnCompleted action implementation.
	   * @returns {Observer} The observer object implemented using the given actions.
	   */
	  var observerCreate = Observer.create = function (onNext, onError, onCompleted) {
	    onNext || (onNext = noop);
	    onError || (onError = defaultError);
	    onCompleted || (onCompleted = noop);
	    return new AnonymousObserver(onNext, onError, onCompleted);
	  };
	
	  /**
	   *  Creates an observer from a notification callback.
	   * @param {Function} handler Action that handles a notification.
	   * @returns The observer object that invokes the specified handler using a notification corresponding to each message it receives.
	   */
	  Observer.fromNotifier = function (handler, thisArg) {
	    var cb = bindCallback(handler, thisArg, 1);
	    return new AnonymousObserver(function (x) {
	      return cb(notificationCreateOnNext(x));
	    }, function (e) {
	      return cb(notificationCreateOnError(e));
	    }, function () {
	      return cb(notificationCreateOnCompleted());
	    });
	  };
	
	  /**
	   * Schedules the invocation of observer methods on the given scheduler.
	   * @param {Scheduler} scheduler Scheduler to schedule observer messages on.
	   * @returns {Observer} Observer whose messages are scheduled on the given scheduler.
	   */
	  Observer.prototype.notifyOn = function (scheduler) {
	    return new ObserveOnObserver(scheduler, this);
	  };
	
	  Observer.prototype.makeSafe = function(disposable) {
	    return new AnonymousSafeObserver(this._onNext, this._onError, this._onCompleted, disposable);
	  };
	
	  /**
	   * Abstract base class for implementations of the Observer class.
	   * This base class enforces the grammar of observers where OnError and OnCompleted are terminal messages.
	   */
	  var AbstractObserver = Rx.internals.AbstractObserver = (function (__super__) {
	    inherits(AbstractObserver, __super__);
	
	    /**
	     * Creates a new observer in a non-stopped state.
	     */
	    function AbstractObserver() {
	      this.isStopped = false;
	    }
	
	    // Must be implemented by other observers
	    AbstractObserver.prototype.next = notImplemented;
	    AbstractObserver.prototype.error = notImplemented;
	    AbstractObserver.prototype.completed = notImplemented;
	
	    /**
	     * Notifies the observer of a new element in the sequence.
	     * @param {Any} value Next element in the sequence.
	     */
	    AbstractObserver.prototype.onNext = function (value) {
	      !this.isStopped && this.next(value);
	    };
	
	    /**
	     * Notifies the observer that an exception has occurred.
	     * @param {Any} error The error that has occurred.
	     */
	    AbstractObserver.prototype.onError = function (error) {
	      if (!this.isStopped) {
	        this.isStopped = true;
	        this.error(error);
	      }
	    };
	
	    /**
	     * Notifies the observer of the end of the sequence.
	     */
	    AbstractObserver.prototype.onCompleted = function () {
	      if (!this.isStopped) {
	        this.isStopped = true;
	        this.completed();
	      }
	    };
	
	    /**
	     * Disposes the observer, causing it to transition to the stopped state.
	     */
	    AbstractObserver.prototype.dispose = function () { this.isStopped = true; };
	
	    AbstractObserver.prototype.fail = function (e) {
	      if (!this.isStopped) {
	        this.isStopped = true;
	        this.error(e);
	        return true;
	      }
	
	      return false;
	    };
	
	    return AbstractObserver;
	  }(Observer));
	
	  /**
	   * Class to create an Observer instance from delegate-based implementations of the on* methods.
	   */
	  var AnonymousObserver = Rx.AnonymousObserver = (function (__super__) {
	    inherits(AnonymousObserver, __super__);
	
	    /**
	     * Creates an observer from the specified OnNext, OnError, and OnCompleted actions.
	     * @param {Any} onNext Observer's OnNext action implementation.
	     * @param {Any} onError Observer's OnError action implementation.
	     * @param {Any} onCompleted Observer's OnCompleted action implementation.
	     */
	    function AnonymousObserver(onNext, onError, onCompleted) {
	      __super__.call(this);
	      this._onNext = onNext;
	      this._onError = onError;
	      this._onCompleted = onCompleted;
	    }
	
	    /**
	     * Calls the onNext action.
	     * @param {Any} value Next element in the sequence.
	     */
	    AnonymousObserver.prototype.next = function (value) {
	      this._onNext(value);
	    };
	
	    /**
	     * Calls the onError action.
	     * @param {Any} error The error that has occurred.
	     */
	    AnonymousObserver.prototype.error = function (error) {
	      this._onError(error);
	    };
	
	    /**
	     *  Calls the onCompleted action.
	     */
	    AnonymousObserver.prototype.completed = function () {
	      this._onCompleted();
	    };
	
	    return AnonymousObserver;
	  }(AbstractObserver));
	
	  var CheckedObserver = (function (__super__) {
	    inherits(CheckedObserver, __super__);
	
	    function CheckedObserver(observer) {
	      __super__.call(this);
	      this._observer = observer;
	      this._state = 0; // 0 - idle, 1 - busy, 2 - done
	    }
	
	    var CheckedObserverPrototype = CheckedObserver.prototype;
	
	    CheckedObserverPrototype.onNext = function (value) {
	      this.checkAccess();
	      var res = tryCatch(this._observer.onNext).call(this._observer, value);
	      this._state = 0;
	      res === errorObj && thrower(res.e);
	    };
	
	    CheckedObserverPrototype.onError = function (err) {
	      this.checkAccess();
	      var res = tryCatch(this._observer.onError).call(this._observer, err);
	      this._state = 2;
	      res === errorObj && thrower(res.e);
	    };
	
	    CheckedObserverPrototype.onCompleted = function () {
	      this.checkAccess();
	      var res = tryCatch(this._observer.onCompleted).call(this._observer);
	      this._state = 2;
	      res === errorObj && thrower(res.e);
	    };
	
	    CheckedObserverPrototype.checkAccess = function () {
	      if (this._state === 1) { throw new Error('Re-entrancy detected'); }
	      if (this._state === 2) { throw new Error('Observer completed'); }
	      if (this._state === 0) { this._state = 1; }
	    };
	
	    return CheckedObserver;
	  }(Observer));
	
	  var ScheduledObserver = Rx.internals.ScheduledObserver = (function (__super__) {
	    inherits(ScheduledObserver, __super__);
	
	    function ScheduledObserver(scheduler, observer) {
	      __super__.call(this);
	      this.scheduler = scheduler;
	      this.observer = observer;
	      this.isAcquired = false;
	      this.hasFaulted = false;
	      this.queue = [];
	      this.disposable = new SerialDisposable();
	    }
	
	    function enqueueNext(observer, x) { return function () { observer.onNext(x); }; }
	    function enqueueError(observer, e) { return function () { observer.onError(e); }; }
	    function enqueueCompleted(observer) { return function () { observer.onCompleted(); }; }
	
	    ScheduledObserver.prototype.next = function (x) {
	      this.queue.push(enqueueNext(this.observer, x));
	    };
	
	    ScheduledObserver.prototype.error = function (e) {
	      this.queue.push(enqueueError(this.observer, e));
	    };
	
	    ScheduledObserver.prototype.completed = function () {
	      this.queue.push(enqueueCompleted(this.observer));
	    };
	
	
	    function scheduleMethod(state, recurse) {
	      var work;
	      if (state.queue.length > 0) {
	        work = state.queue.shift();
	      } else {
	        state.isAcquired = false;
	        return;
	      }
	      var res = tryCatch(work)();
	      if (res === errorObj) {
	        state.queue = [];
	        state.hasFaulted = true;
	        return thrower(res.e);
	      }
	      recurse(state);
	    }
	
	    ScheduledObserver.prototype.ensureActive = function () {
	      var isOwner = false;
	      if (!this.hasFaulted && this.queue.length > 0) {
	        isOwner = !this.isAcquired;
	        this.isAcquired = true;
	      }
	      isOwner &&
	        this.disposable.setDisposable(this.scheduler.scheduleRecursive(this, scheduleMethod));
	    };
	
	    ScheduledObserver.prototype.dispose = function () {
	      __super__.prototype.dispose.call(this);
	      this.disposable.dispose();
	    };
	
	    return ScheduledObserver;
	  }(AbstractObserver));
	
	  var ObserveOnObserver = (function (__super__) {
	    inherits(ObserveOnObserver, __super__);
	
	    function ObserveOnObserver(scheduler, observer, cancel) {
	      __super__.call(this, scheduler, observer);
	      this._cancel = cancel;
	    }
	
	    ObserveOnObserver.prototype.next = function (value) {
	      __super__.prototype.next.call(this, value);
	      this.ensureActive();
	    };
	
	    ObserveOnObserver.prototype.error = function (e) {
	      __super__.prototype.error.call(this, e);
	      this.ensureActive();
	    };
	
	    ObserveOnObserver.prototype.completed = function () {
	      __super__.prototype.completed.call(this);
	      this.ensureActive();
	    };
	
	    ObserveOnObserver.prototype.dispose = function () {
	      __super__.prototype.dispose.call(this);
	      this._cancel && this._cancel.dispose();
	      this._cancel = null;
	    };
	
	    return ObserveOnObserver;
	  })(ScheduledObserver);
	
	  var observableProto;
	
	  /**
	   * Represents a push-style collection.
	   */
	  var Observable = Rx.Observable = (function () {
	
	    function makeSubscribe(self, subscribe) {
	      return function (o) {
	        var oldOnError = o.onError;
	        o.onError = function (e) {
	          makeStackTraceLong(e, self);
	          oldOnError.call(o, e);
	        };
	
	        return subscribe.call(self, o);
	      };
	    }
	
	    function Observable() {
	      if (Rx.config.longStackSupport && hasStacks) {
	        var oldSubscribe = this._subscribe;
	        var e = tryCatch(thrower)(new Error()).e;
	        this.stack = e.stack.substring(e.stack.indexOf('\n') + 1);
	        this._subscribe = makeSubscribe(this, oldSubscribe);
	      }
	    }
	
	    observableProto = Observable.prototype;
	
	    /**
	    * Determines whether the given object is an Observable
	    * @param {Any} An object to determine whether it is an Observable
	    * @returns {Boolean} true if an Observable, else false.
	    */
	    Observable.isObservable = function (o) {
	      return o && isFunction(o.subscribe);
	    };
	
	    /**
	     *  Subscribes an o to the observable sequence.
	     *  @param {Mixed} [oOrOnNext] The object that is to receive notifications or an action to invoke for each element in the observable sequence.
	     *  @param {Function} [onError] Action to invoke upon exceptional termination of the observable sequence.
	     *  @param {Function} [onCompleted] Action to invoke upon graceful termination of the observable sequence.
	     *  @returns {Diposable} A disposable handling the subscriptions and unsubscriptions.
	     */
	    observableProto.subscribe = observableProto.forEach = function (oOrOnNext, onError, onCompleted) {
	      return this._subscribe(typeof oOrOnNext === 'object' ?
	        oOrOnNext :
	        observerCreate(oOrOnNext, onError, onCompleted));
	    };
	
	    /**
	     * Subscribes to the next value in the sequence with an optional "this" argument.
	     * @param {Function} onNext The function to invoke on each element in the observable sequence.
	     * @param {Any} [thisArg] Object to use as this when executing callback.
	     * @returns {Disposable} A disposable handling the subscriptions and unsubscriptions.
	     */
	    observableProto.subscribeOnNext = function (onNext, thisArg) {
	      return this._subscribe(observerCreate(typeof thisArg !== 'undefined' ? function(x) { onNext.call(thisArg, x); } : onNext));
	    };
	
	    /**
	     * Subscribes to an exceptional condition in the sequence with an optional "this" argument.
	     * @param {Function} onError The function to invoke upon exceptional termination of the observable sequence.
	     * @param {Any} [thisArg] Object to use as this when executing callback.
	     * @returns {Disposable} A disposable handling the subscriptions and unsubscriptions.
	     */
	    observableProto.subscribeOnError = function (onError, thisArg) {
	      return this._subscribe(observerCreate(null, typeof thisArg !== 'undefined' ? function(e) { onError.call(thisArg, e); } : onError));
	    };
	
	    /**
	     * Subscribes to the next value in the sequence with an optional "this" argument.
	     * @param {Function} onCompleted The function to invoke upon graceful termination of the observable sequence.
	     * @param {Any} [thisArg] Object to use as this when executing callback.
	     * @returns {Disposable} A disposable handling the subscriptions and unsubscriptions.
	     */
	    observableProto.subscribeOnCompleted = function (onCompleted, thisArg) {
	      return this._subscribe(observerCreate(null, null, typeof thisArg !== 'undefined' ? function() { onCompleted.call(thisArg); } : onCompleted));
	    };
	
	    return Observable;
	  })();
	
	  var ObservableBase = Rx.ObservableBase = (function (__super__) {
	    inherits(ObservableBase, __super__);
	
	    function fixSubscriber(subscriber) {
	      return subscriber && isFunction(subscriber.dispose) ? subscriber :
	        isFunction(subscriber) ? disposableCreate(subscriber) : disposableEmpty;
	    }
	
	    function setDisposable(s, state) {
	      var ado = state[0], self = state[1];
	      var sub = tryCatch(self.subscribeCore).call(self, ado);
	      if (sub === errorObj && !ado.fail(errorObj.e)) { thrower(errorObj.e); }
	      ado.setDisposable(fixSubscriber(sub));
	    }
	
	    function ObservableBase() {
	      __super__.call(this);
	    }
	
	    ObservableBase.prototype._subscribe = function (o) {
	      var ado = new AutoDetachObserver(o), state = [ado, this];
	
	      if (currentThreadScheduler.scheduleRequired()) {
	        currentThreadScheduler.schedule(state, setDisposable);
	      } else {
	        setDisposable(null, state);
	      }
	      return ado;
	    };
	
	    ObservableBase.prototype.subscribeCore = notImplemented;
	
	    return ObservableBase;
	  }(Observable));
	
	var FlatMapObservable = Rx.FlatMapObservable = (function(__super__) {
	
	    inherits(FlatMapObservable, __super__);
	
	    function FlatMapObservable(source, selector, resultSelector, thisArg) {
	      this.resultSelector = isFunction(resultSelector) ? resultSelector : null;
	      this.selector = bindCallback(isFunction(selector) ? selector : function() { return selector; }, thisArg, 3);
	      this.source = source;
	      __super__.call(this);
	    }
	
	    FlatMapObservable.prototype.subscribeCore = function(o) {
	      return this.source.subscribe(new InnerObserver(o, this.selector, this.resultSelector, this));
	    };
	
	    inherits(InnerObserver, AbstractObserver);
	    function InnerObserver(observer, selector, resultSelector, source) {
	      this.i = 0;
	      this.selector = selector;
	      this.resultSelector = resultSelector;
	      this.source = source;
	      this.o = observer;
	      AbstractObserver.call(this);
	    }
	
	    InnerObserver.prototype._wrapResult = function(result, x, i) {
	      return this.resultSelector ?
	        result.map(function(y, i2) { return this.resultSelector(x, y, i, i2); }, this) :
	        result;
	    };
	
	    InnerObserver.prototype.next = function(x) {
	      var i = this.i++;
	      var result = tryCatch(this.selector)(x, i, this.source);
	      if (result === errorObj) { return this.o.onError(result.e); }
	
	      isPromise(result) && (result = observableFromPromise(result));
	      (isArrayLike(result) || isIterable(result)) && (result = Observable.from(result));
	      this.o.onNext(this._wrapResult(result, x, i));
	    };
	
	    InnerObserver.prototype.error = function(e) { this.o.onError(e); };
	
	    InnerObserver.prototype.completed = function() { this.o.onCompleted(); };
	
	    return FlatMapObservable;
	
	}(ObservableBase));
	
	  var Enumerable = Rx.internals.Enumerable = function () { };
	
	  function IsDisposedDisposable(state) {
	    this._s = state;
	    this.isDisposed = false;
	  }
	
	  IsDisposedDisposable.prototype.dispose = function () {
	    if (!this.isDisposed) {
	      this.isDisposed = true;
	      this._s.isDisposed = true;
	    }
	  };
	
	  var ConcatEnumerableObservable = (function(__super__) {
	    inherits(ConcatEnumerableObservable, __super__);
	    function ConcatEnumerableObservable(sources) {
	      this.sources = sources;
	      __super__.call(this);
	    }
	
	    function scheduleMethod(state, recurse) {
	      if (state.isDisposed) { return; }
	      var currentItem = tryCatch(state.e.next).call(state.e);
	      if (currentItem === errorObj) { return state.o.onError(currentItem.e); }
	      if (currentItem.done) { return state.o.onCompleted(); }
	
	      // Check if promise
	      var currentValue = currentItem.value;
	      isPromise(currentValue) && (currentValue = observableFromPromise(currentValue));
	
	      var d = new SingleAssignmentDisposable();
	      state.subscription.setDisposable(d);
	      d.setDisposable(currentValue.subscribe(new InnerObserver(state, recurse)));
	    }
	
	    ConcatEnumerableObservable.prototype.subscribeCore = function (o) {
	      var subscription = new SerialDisposable();
	      var state = {
	        isDisposed: false,
	        o: o,
	        subscription: subscription,
	        e: this.sources[$iterator$]()
	      };
	
	      var cancelable = currentThreadScheduler.scheduleRecursive(state, scheduleMethod);
	      return new NAryDisposable([subscription, cancelable, new IsDisposedDisposable(state)]);
	    };
	
	    function InnerObserver(state, recurse) {
	      this._state = state;
	      this._recurse = recurse;
	      AbstractObserver.call(this);
	    }
	
	    inherits(InnerObserver, AbstractObserver);
	
	    InnerObserver.prototype.next = function (x) { this._state.o.onNext(x); };
	    InnerObserver.prototype.error = function (e) { this._state.o.onError(e); };
	    InnerObserver.prototype.completed = function () { this._recurse(this._state); };
	
	    return ConcatEnumerableObservable;
	  }(ObservableBase));
	
	  Enumerable.prototype.concat = function () {
	    return new ConcatEnumerableObservable(this);
	  };
	
	  var CatchErrorObservable = (function(__super__) {
	    function CatchErrorObservable(sources) {
	      this.sources = sources;
	      __super__.call(this);
	    }
	
	    inherits(CatchErrorObservable, __super__);
	
	    function scheduleMethod(state, recurse) {
	      if (state.isDisposed) { return; }
	      var currentItem = tryCatch(state.e.next).call(state.e);
	      if (currentItem === errorObj) { return state.o.onError(currentItem.e); }
	      if (currentItem.done) { return state.lastError !== null ? state.o.onError(state.lastError) : state.o.onCompleted(); }
	
	      var currentValue = currentItem.value;
	      isPromise(currentValue) && (currentValue = observableFromPromise(currentValue));
	
	      var d = new SingleAssignmentDisposable();
	      state.subscription.setDisposable(d);
	      d.setDisposable(currentValue.subscribe(new InnerObserver(state, recurse)));
	    }
	
	    CatchErrorObservable.prototype.subscribeCore = function (o) {
	      var subscription = new SerialDisposable();
	      var state = {
	        isDisposed: false,
	        e: this.sources[$iterator$](),
	        subscription: subscription,
	        lastError: null,
	        o: o
	      };
	
	      var cancelable = currentThreadScheduler.scheduleRecursive(state, scheduleMethod);
	      return new NAryDisposable([subscription, cancelable, new IsDisposedDisposable(state)]);
	    };
	
	    function InnerObserver(state, recurse) {
	      this._state = state;
	      this._recurse = recurse;
	      AbstractObserver.call(this);
	    }
	
	    inherits(InnerObserver, AbstractObserver);
	
	    InnerObserver.prototype.next = function (x) { this._state.o.onNext(x); };
	    InnerObserver.prototype.error = function (e) { this._state.lastError = e; this._recurse(this._state); };
	    InnerObserver.prototype.completed = function () { this._state.o.onCompleted(); };
	
	    return CatchErrorObservable;
	  }(ObservableBase));
	
	  Enumerable.prototype.catchError = function () {
	    return new CatchErrorObservable(this);
	  };
	
	  var RepeatEnumerable = (function (__super__) {
	    inherits(RepeatEnumerable, __super__);
	    function RepeatEnumerable(v, c) {
	      this.v = v;
	      this.c = c == null ? -1 : c;
	    }
	
	    RepeatEnumerable.prototype[$iterator$] = function () {
	      return new RepeatEnumerator(this);
	    };
	
	    function RepeatEnumerator(p) {
	      this.v = p.v;
	      this.l = p.c;
	    }
	
	    RepeatEnumerator.prototype.next = function () {
	      if (this.l === 0) { return doneEnumerator; }
	      if (this.l > 0) { this.l--; }
	      return { done: false, value: this.v };
	    };
	
	    return RepeatEnumerable;
	  }(Enumerable));
	
	  var enumerableRepeat = Enumerable.repeat = function (value, repeatCount) {
	    return new RepeatEnumerable(value, repeatCount);
	  };
	
	  var OfEnumerable = (function(__super__) {
	    inherits(OfEnumerable, __super__);
	    function OfEnumerable(s, fn, thisArg) {
	      this.s = s;
	      this.fn = fn ? bindCallback(fn, thisArg, 3) : null;
	    }
	    OfEnumerable.prototype[$iterator$] = function () {
	      return new OfEnumerator(this);
	    };
	
	    function OfEnumerator(p) {
	      this.i = -1;
	      this.s = p.s;
	      this.l = this.s.length;
	      this.fn = p.fn;
	    }
	
	    OfEnumerator.prototype.next = function () {
	     return ++this.i < this.l ?
	       { done: false, value: !this.fn ? this.s[this.i] : this.fn(this.s[this.i], this.i, this.s) } :
	       doneEnumerator;
	    };
	
	    return OfEnumerable;
	  }(Enumerable));
	
	  var enumerableOf = Enumerable.of = function (source, selector, thisArg) {
	    return new OfEnumerable(source, selector, thisArg);
	  };
	
	var ObserveOnObservable = (function (__super__) {
	  inherits(ObserveOnObservable, __super__);
	  function ObserveOnObservable(source, s) {
	    this.source = source;
	    this._s = s;
	    __super__.call(this);
	  }
	
	  ObserveOnObservable.prototype.subscribeCore = function (o) {
	    return this.source.subscribe(new ObserveOnObserver(this._s, o));
	  };
	
	  return ObserveOnObservable;
	}(ObservableBase));
	
	   /**
	   *  Wraps the source sequence in order to run its observer callbacks on the specified scheduler.
	   *
	   *  This only invokes observer callbacks on a scheduler. In case the subscription and/or unsubscription actions have side-effects
	   *  that require to be run on a scheduler, use subscribeOn.
	   *
	   *  @param {Scheduler} scheduler Scheduler to notify observers on.
	   *  @returns {Observable} The source sequence whose observations happen on the specified scheduler.
	   */
	  observableProto.observeOn = function (scheduler) {
	    return new ObserveOnObservable(this, scheduler);
	  };
	
	  var SubscribeOnObservable = (function (__super__) {
	    inherits(SubscribeOnObservable, __super__);
	    function SubscribeOnObservable(source, s) {
	      this.source = source;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    function scheduleMethod(scheduler, state) {
	      var source = state[0], d = state[1], o = state[2];
	      d.setDisposable(new ScheduledDisposable(scheduler, source.subscribe(o)));
	    }
	
	    SubscribeOnObservable.prototype.subscribeCore = function (o) {
	      var m = new SingleAssignmentDisposable(), d = new SerialDisposable();
	      d.setDisposable(m);
	      m.setDisposable(this._s.schedule([this.source, d, o], scheduleMethod));
	      return d;
	    };
	
	    return SubscribeOnObservable;
	  }(ObservableBase));
	
	   /**
	   *  Wraps the source sequence in order to run its subscription and unsubscription logic on the specified scheduler. This operation is not commonly used;
	   *  see the remarks section for more information on the distinction between subscribeOn and observeOn.
	
	   *  This only performs the side-effects of subscription and unsubscription on the specified scheduler. In order to invoke observer
	   *  callbacks on a scheduler, use observeOn.
	
	   *  @param {Scheduler} scheduler Scheduler to perform subscription and unsubscription actions on.
	   *  @returns {Observable} The source sequence whose subscriptions and unsubscriptions happen on the specified scheduler.
	   */
	  observableProto.subscribeOn = function (scheduler) {
	    return new SubscribeOnObservable(this, scheduler);
	  };
	
	  var FromPromiseObservable = (function(__super__) {
	    inherits(FromPromiseObservable, __super__);
	    function FromPromiseObservable(p, s) {
	      this._p = p;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    function scheduleNext(s, state) {
	      var o = state[0], data = state[1];
	      o.onNext(data);
	      o.onCompleted();
	    }
	
	    function scheduleError(s, state) {
	      var o = state[0], err = state[1];
	      o.onError(err);
	    }
	
	    FromPromiseObservable.prototype.subscribeCore = function(o) {
	      var sad = new SingleAssignmentDisposable(), self = this;
	
	      this._p
	        .then(function (data) {
	          sad.setDisposable(self._s.schedule([o, data], scheduleNext));
	        }, function (err) {
	          sad.setDisposable(self._s.schedule([o, err], scheduleError));
	        });
	
	      return sad;
	    };
	
	    return FromPromiseObservable;
	  }(ObservableBase));
	
	  /**
	  * Converts a Promise to an Observable sequence
	  * @param {Promise} An ES6 Compliant promise.
	  * @returns {Observable} An Observable sequence which wraps the existing promise success and failure.
	  */
	  var observableFromPromise = Observable.fromPromise = function (promise, scheduler) {
	    scheduler || (scheduler = defaultScheduler);
	    return new FromPromiseObservable(promise, scheduler);
	  };
	
	  /*
	   * Converts an existing observable sequence to an ES6 Compatible Promise
	   * @example
	   * var promise = Rx.Observable.return(42).toPromise(RSVP.Promise);
	   *
	   * // With config
	   * Rx.config.Promise = RSVP.Promise;
	   * var promise = Rx.Observable.return(42).toPromise();
	   * @param {Function} [promiseCtor] The constructor of the promise. If not provided, it looks for it in Rx.config.Promise.
	   * @returns {Promise} An ES6 compatible promise with the last value from the observable sequence.
	   */
	  observableProto.toPromise = function (promiseCtor) {
	    promiseCtor || (promiseCtor = Rx.config.Promise);
	    if (!promiseCtor) { throw new NotSupportedError('Promise type not provided nor in Rx.config.Promise'); }
	    var source = this;
	    return new promiseCtor(function (resolve, reject) {
	      // No cancellation can be done
	      var value;
	      source.subscribe(function (v) {
	        value = v;
	      }, reject, function () {
	        resolve(value);
	      });
	    });
	  };
	
	  var ToArrayObservable = (function(__super__) {
	    inherits(ToArrayObservable, __super__);
	    function ToArrayObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    ToArrayObservable.prototype.subscribeCore = function(o) {
	      return this.source.subscribe(new InnerObserver(o));
	    };
	
	    inherits(InnerObserver, AbstractObserver);
	    function InnerObserver(o) {
	      this.o = o;
	      this.a = [];
	      AbstractObserver.call(this);
	    }
	    
	    InnerObserver.prototype.next = function (x) { this.a.push(x); };
	    InnerObserver.prototype.error = function (e) { this.o.onError(e);  };
	    InnerObserver.prototype.completed = function () { this.o.onNext(this.a); this.o.onCompleted(); };
	
	    return ToArrayObservable;
	  }(ObservableBase));
	
	  /**
	  * Creates an array from an observable sequence.
	  * @returns {Observable} An observable sequence containing a single element with a list containing all the elements of the source sequence.
	  */
	  observableProto.toArray = function () {
	    return new ToArrayObservable(this);
	  };
	
	  /**
	   *  Creates an observable sequence from a specified subscribe method implementation.
	   * @example
	   *  var res = Rx.Observable.create(function (observer) { return function () { } );
	   *  var res = Rx.Observable.create(function (observer) { return Rx.Disposable.empty; } );
	   *  var res = Rx.Observable.create(function (observer) { } );
	   * @param {Function} subscribe Implementation of the resulting observable sequence's subscribe method, returning a function that will be wrapped in a Disposable.
	   * @returns {Observable} The observable sequence with the specified implementation for the Subscribe method.
	   */
	  Observable.create = function (subscribe, parent) {
	    return new AnonymousObservable(subscribe, parent);
	  };
	
	  var Defer = (function(__super__) {
	    inherits(Defer, __super__);
	    function Defer(factory) {
	      this._f = factory;
	      __super__.call(this);
	    }
	
	    Defer.prototype.subscribeCore = function (o) {
	      var result = tryCatch(this._f)();
	      if (result === errorObj) { return observableThrow(result.e).subscribe(o);}
	      isPromise(result) && (result = observableFromPromise(result));
	      return result.subscribe(o);
	    };
	
	    return Defer;
	  }(ObservableBase));
	
	  /**
	   *  Returns an observable sequence that invokes the specified factory function whenever a new observer subscribes.
	   *
	   * @example
	   *  var res = Rx.Observable.defer(function () { return Rx.Observable.fromArray([1,2,3]); });
	   * @param {Function} observableFactory Observable factory function to invoke for each observer that subscribes to the resulting sequence or Promise.
	   * @returns {Observable} An observable sequence whose observers trigger an invocation of the given observable factory function.
	   */
	  var observableDefer = Observable.defer = function (observableFactory) {
	    return new Defer(observableFactory);
	  };
	
	  var EmptyObservable = (function(__super__) {
	    inherits(EmptyObservable, __super__);
	    function EmptyObservable(scheduler) {
	      this.scheduler = scheduler;
	      __super__.call(this);
	    }
	
	    EmptyObservable.prototype.subscribeCore = function (observer) {
	      var sink = new EmptySink(observer, this.scheduler);
	      return sink.run();
	    };
	
	    function EmptySink(observer, scheduler) {
	      this.observer = observer;
	      this.scheduler = scheduler;
	    }
	
	    function scheduleItem(s, state) {
	      state.onCompleted();
	      return disposableEmpty;
	    }
	
	    EmptySink.prototype.run = function () {
	      var state = this.observer;
	      return this.scheduler === immediateScheduler ?
	        scheduleItem(null, state) :
	        this.scheduler.schedule(state, scheduleItem);
	    };
	
	    return EmptyObservable;
	  }(ObservableBase));
	
	  var EMPTY_OBSERVABLE = new EmptyObservable(immediateScheduler);
	
	  /**
	   *  Returns an empty observable sequence, using the specified scheduler to send out the single OnCompleted message.
	   *
	   * @example
	   *  var res = Rx.Observable.empty();
	   *  var res = Rx.Observable.empty(Rx.Scheduler.timeout);
	   * @param {Scheduler} [scheduler] Scheduler to send the termination call on.
	   * @returns {Observable} An observable sequence with no elements.
	   */
	  var observableEmpty = Observable.empty = function (scheduler) {
	    isScheduler(scheduler) || (scheduler = immediateScheduler);
	    return scheduler === immediateScheduler ? EMPTY_OBSERVABLE : new EmptyObservable(scheduler);
	  };
	
	  var FromObservable = (function(__super__) {
	    inherits(FromObservable, __super__);
	    function FromObservable(iterable, fn, scheduler) {
	      this._iterable = iterable;
	      this._fn = fn;
	      this._scheduler = scheduler;
	      __super__.call(this);
	    }
	
	    function createScheduleMethod(o, it, fn) {
	      return function loopRecursive(i, recurse) {
	        var next = tryCatch(it.next).call(it);
	        if (next === errorObj) { return o.onError(next.e); }
	        if (next.done) { return o.onCompleted(); }
	
	        var result = next.value;
	
	        if (isFunction(fn)) {
	          result = tryCatch(fn)(result, i);
	          if (result === errorObj) { return o.onError(result.e); }
	        }
	
	        o.onNext(result);
	        recurse(i + 1);
	      };
	    }
	
	    FromObservable.prototype.subscribeCore = function (o) {
	      var list = Object(this._iterable),
	          it = getIterable(list);
	
	      return this._scheduler.scheduleRecursive(0, createScheduleMethod(o, it, this._fn));
	    };
	
	    return FromObservable;
	  }(ObservableBase));
	
	  var maxSafeInteger = Math.pow(2, 53) - 1;
	
	  function StringIterable(s) {
	    this._s = s;
	  }
	
	  StringIterable.prototype[$iterator$] = function () {
	    return new StringIterator(this._s);
	  };
	
	  function StringIterator(s) {
	    this._s = s;
	    this._l = s.length;
	    this._i = 0;
	  }
	
	  StringIterator.prototype[$iterator$] = function () {
	    return this;
	  };
	
	  StringIterator.prototype.next = function () {
	    return this._i < this._l ? { done: false, value: this._s.charAt(this._i++) } : doneEnumerator;
	  };
	
	  function ArrayIterable(a) {
	    this._a = a;
	  }
	
	  ArrayIterable.prototype[$iterator$] = function () {
	    return new ArrayIterator(this._a);
	  };
	
	  function ArrayIterator(a) {
	    this._a = a;
	    this._l = toLength(a);
	    this._i = 0;
	  }
	
	  ArrayIterator.prototype[$iterator$] = function () {
	    return this;
	  };
	
	  ArrayIterator.prototype.next = function () {
	    return this._i < this._l ? { done: false, value: this._a[this._i++] } : doneEnumerator;
	  };
	
	  function numberIsFinite(value) {
	    return typeof value === 'number' && root.isFinite(value);
	  }
	
	  function isNan(n) {
	    return n !== n;
	  }
	
	  function getIterable(o) {
	    var i = o[$iterator$], it;
	    if (!i && typeof o === 'string') {
	      it = new StringIterable(o);
	      return it[$iterator$]();
	    }
	    if (!i && o.length !== undefined) {
	      it = new ArrayIterable(o);
	      return it[$iterator$]();
	    }
	    if (!i) { throw new TypeError('Object is not iterable'); }
	    return o[$iterator$]();
	  }
	
	  function sign(value) {
	    var number = +value;
	    if (number === 0) { return number; }
	    if (isNaN(number)) { return number; }
	    return number < 0 ? -1 : 1;
	  }
	
	  function toLength(o) {
	    var len = +o.length;
	    if (isNaN(len)) { return 0; }
	    if (len === 0 || !numberIsFinite(len)) { return len; }
	    len = sign(len) * Math.floor(Math.abs(len));
	    if (len <= 0) { return 0; }
	    if (len > maxSafeInteger) { return maxSafeInteger; }
	    return len;
	  }
	
	  /**
	  * This method creates a new Observable sequence from an array-like or iterable object.
	  * @param {Any} arrayLike An array-like or iterable object to convert to an Observable sequence.
	  * @param {Function} [mapFn] Map function to call on every element of the array.
	  * @param {Any} [thisArg] The context to use calling the mapFn if provided.
	  * @param {Scheduler} [scheduler] Optional scheduler to use for scheduling.  If not provided, defaults to Scheduler.currentThread.
	  */
	  var observableFrom = Observable.from = function (iterable, mapFn, thisArg, scheduler) {
	    if (iterable == null) {
	      throw new Error('iterable cannot be null.')
	    }
	    if (mapFn && !isFunction(mapFn)) {
	      throw new Error('mapFn when provided must be a function');
	    }
	    if (mapFn) {
	      var mapper = bindCallback(mapFn, thisArg, 2);
	    }
	    isScheduler(scheduler) || (scheduler = currentThreadScheduler);
	    return new FromObservable(iterable, mapper, scheduler);
	  }
	
	  var FromArrayObservable = (function(__super__) {
	    inherits(FromArrayObservable, __super__);
	    function FromArrayObservable(args, scheduler) {
	      this._args = args;
	      this._scheduler = scheduler;
	      __super__.call(this);
	    }
	
	    function scheduleMethod(o, args) {
	      var len = args.length;
	      return function loopRecursive (i, recurse) {
	        if (i < len) {
	          o.onNext(args[i]);
	          recurse(i + 1);
	        } else {
	          o.onCompleted();
	        }
	      };
	    }
	
	    FromArrayObservable.prototype.subscribeCore = function (o) {
	      return this._scheduler.scheduleRecursive(0, scheduleMethod(o, this._args));
	    };
	
	    return FromArrayObservable;
	  }(ObservableBase));
	
	  /**
	  *  Converts an array to an observable sequence, using an optional scheduler to enumerate the array.
	  * @deprecated use Observable.from or Observable.of
	  * @param {Scheduler} [scheduler] Scheduler to run the enumeration of the input sequence on.
	  * @returns {Observable} The observable sequence whose elements are pulled from the given enumerable sequence.
	  */
	  var observableFromArray = Observable.fromArray = function (array, scheduler) {
	    isScheduler(scheduler) || (scheduler = currentThreadScheduler);
	    return new FromArrayObservable(array, scheduler)
	  };
	
	  var GenerateObservable = (function (__super__) {
	    inherits(GenerateObservable, __super__);
	    function GenerateObservable(state, cndFn, itrFn, resFn, s) {
	      this._initialState = state;
	      this._cndFn = cndFn;
	      this._itrFn = itrFn;
	      this._resFn = resFn;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    function scheduleRecursive(state, recurse) {
	      if (state.first) {
	        state.first = false;
	      } else {
	        state.newState = tryCatch(state.self._itrFn)(state.newState);
	        if (state.newState === errorObj) { return state.o.onError(state.newState.e); }
	      }
	      var hasResult = tryCatch(state.self._cndFn)(state.newState);
	      if (hasResult === errorObj) { return state.o.onError(hasResult.e); }
	      if (hasResult) {
	        var result = tryCatch(state.self._resFn)(state.newState);
	        if (result === errorObj) { return state.o.onError(result.e); }
	        state.o.onNext(result);
	        recurse(state);
	      } else {
	        state.o.onCompleted();
	      }
	    }
	
	    GenerateObservable.prototype.subscribeCore = function (o) {
	      var state = {
	        o: o,
	        self: this,
	        first: true,
	        newState: this._initialState
	      };
	      return this._s.scheduleRecursive(state, scheduleRecursive);
	    };
	
	    return GenerateObservable;
	  }(ObservableBase));
	
	  /**
	   *  Generates an observable sequence by running a state-driven loop producing the sequence's elements, using the specified scheduler to send out observer messages.
	   *
	   * @example
	   *  var res = Rx.Observable.generate(0, function (x) { return x < 10; }, function (x) { return x + 1; }, function (x) { return x; });
	   *  var res = Rx.Observable.generate(0, function (x) { return x < 10; }, function (x) { return x + 1; }, function (x) { return x; }, Rx.Scheduler.timeout);
	   * @param {Mixed} initialState Initial state.
	   * @param {Function} condition Condition to terminate generation (upon returning false).
	   * @param {Function} iterate Iteration step function.
	   * @param {Function} resultSelector Selector function for results produced in the sequence.
	   * @param {Scheduler} [scheduler] Scheduler on which to run the generator loop. If not provided, defaults to Scheduler.currentThread.
	   * @returns {Observable} The generated sequence.
	   */
	  Observable.generate = function (initialState, condition, iterate, resultSelector, scheduler) {
	    isScheduler(scheduler) || (scheduler = currentThreadScheduler);
	    return new GenerateObservable(initialState, condition, iterate, resultSelector, scheduler);
	  };
	
	  function observableOf (scheduler, array) {
	    isScheduler(scheduler) || (scheduler = currentThreadScheduler);
	    return new FromArrayObservable(array, scheduler);
	  }
	
	  /**
	  *  This method creates a new Observable instance with a variable number of arguments, regardless of number or type of the arguments.
	  * @returns {Observable} The observable sequence whose elements are pulled from the given arguments.
	  */
	  Observable.of = function () {
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    return new FromArrayObservable(args, currentThreadScheduler);
	  };
	
	  /**
	  *  This method creates a new Observable instance with a variable number of arguments, regardless of number or type of the arguments.
	  * @param {Scheduler} scheduler A scheduler to use for scheduling the arguments.
	  * @returns {Observable} The observable sequence whose elements are pulled from the given arguments.
	  */
	  Observable.ofWithScheduler = function (scheduler) {
	    var len = arguments.length, args = new Array(len - 1);
	    for(var i = 1; i < len; i++) { args[i - 1] = arguments[i]; }
	    return new FromArrayObservable(args, scheduler);
	  };
	
	  /**
	   * Creates an Observable sequence from changes to an array using Array.observe.
	   * @param {Array} array An array to observe changes.
	   * @returns {Observable} An observable sequence containing changes to an array from Array.observe.
	   */
	  Observable.ofArrayChanges = function(array) {
	    if (!Array.isArray(array)) { throw new TypeError('Array.observe only accepts arrays.'); }
	    if (typeof Array.observe !== 'function' && typeof Array.unobserve !== 'function') { throw new TypeError('Array.observe is not supported on your platform') }
	    return new AnonymousObservable(function(observer) {
	      function observerFn(changes) {
	        for(var i = 0, len = changes.length; i < len; i++) {
	          observer.onNext(changes[i]);
	        }
	      }
	      
	      Array.observe(array, observerFn);
	
	      return function () {
	        Array.unobserve(array, observerFn);
	      };
	    });
	  };
	
	  /**
	   * Creates an Observable sequence from changes to an object using Object.observe.
	   * @param {Object} obj An object to observe changes.
	   * @returns {Observable} An observable sequence containing changes to an object from Object.observe.
	   */
	  Observable.ofObjectChanges = function(obj) {
	    if (obj == null) { throw new TypeError('object must not be null or undefined.'); }
	    if (typeof Object.observe !== 'function' && typeof Object.unobserve !== 'function') { throw new TypeError('Object.observe is not supported on your platform') }
	    return new AnonymousObservable(function(observer) {
	      function observerFn(changes) {
	        for(var i = 0, len = changes.length; i < len; i++) {
	          observer.onNext(changes[i]);
	        }
	      }
	
	      Object.observe(obj, observerFn);
	
	      return function () {
	        Object.unobserve(obj, observerFn);
	      };
	    });
	  };
	
	  var NeverObservable = (function(__super__) {
	    inherits(NeverObservable, __super__);
	    function NeverObservable() {
	      __super__.call(this);
	    }
	
	    NeverObservable.prototype.subscribeCore = function (observer) {
	      return disposableEmpty;
	    };
	
	    return NeverObservable;
	  }(ObservableBase));
	
	  var NEVER_OBSERVABLE = new NeverObservable();
	
	  /**
	   * Returns a non-terminating observable sequence, which can be used to denote an infinite duration (e.g. when using reactive joins).
	   * @returns {Observable} An observable sequence whose observers will never get called.
	   */
	  var observableNever = Observable.never = function () {
	    return NEVER_OBSERVABLE;
	  };
	
	  var PairsObservable = (function(__super__) {
	    inherits(PairsObservable, __super__);
	    function PairsObservable(o, scheduler) {
	      this._o = o;
	      this._keys = Object.keys(o);
	      this._scheduler = scheduler;
	      __super__.call(this);
	    }
	
	    function scheduleMethod(o, obj, keys) {
	      return function loopRecursive(i, recurse) {
	        if (i < keys.length) {
	          var key = keys[i];
	          o.onNext([key, obj[key]]);
	          recurse(i + 1);
	        } else {
	          o.onCompleted();
	        }
	      };
	    }
	
	    PairsObservable.prototype.subscribeCore = function (o) {
	      return this._scheduler.scheduleRecursive(0, scheduleMethod(o, this._o, this._keys));
	    };
	
	    return PairsObservable;
	  }(ObservableBase));
	
	  /**
	   * Convert an object into an observable sequence of [key, value] pairs.
	   * @param {Object} obj The object to inspect.
	   * @param {Scheduler} [scheduler] Scheduler to run the enumeration of the input sequence on.
	   * @returns {Observable} An observable sequence of [key, value] pairs from the object.
	   */
	  Observable.pairs = function (obj, scheduler) {
	    scheduler || (scheduler = currentThreadScheduler);
	    return new PairsObservable(obj, scheduler);
	  };
	
	    var RangeObservable = (function(__super__) {
	    inherits(RangeObservable, __super__);
	    function RangeObservable(start, count, scheduler) {
	      this.start = start;
	      this.rangeCount = count;
	      this.scheduler = scheduler;
	      __super__.call(this);
	    }
	
	    function loopRecursive(start, count, o) {
	      return function loop (i, recurse) {
	        if (i < count) {
	          o.onNext(start + i);
	          recurse(i + 1);
	        } else {
	          o.onCompleted();
	        }
	      };
	    }
	
	    RangeObservable.prototype.subscribeCore = function (o) {
	      return this.scheduler.scheduleRecursive(
	        0,
	        loopRecursive(this.start, this.rangeCount, o)
	      );
	    };
	
	    return RangeObservable;
	  }(ObservableBase));
	
	  /**
	  *  Generates an observable sequence of integral numbers within a specified range, using the specified scheduler to send out observer messages.
	  * @param {Number} start The value of the first integer in the sequence.
	  * @param {Number} count The number of sequential integers to generate.
	  * @param {Scheduler} [scheduler] Scheduler to run the generator loop on. If not specified, defaults to Scheduler.currentThread.
	  * @returns {Observable} An observable sequence that contains a range of sequential integral numbers.
	  */
	  Observable.range = function (start, count, scheduler) {
	    isScheduler(scheduler) || (scheduler = currentThreadScheduler);
	    return new RangeObservable(start, count, scheduler);
	  };
	
	  var RepeatObservable = (function(__super__) {
	    inherits(RepeatObservable, __super__);
	    function RepeatObservable(value, repeatCount, scheduler) {
	      this.value = value;
	      this.repeatCount = repeatCount == null ? -1 : repeatCount;
	      this.scheduler = scheduler;
	      __super__.call(this);
	    }
	
	    RepeatObservable.prototype.subscribeCore = function (observer) {
	      var sink = new RepeatSink(observer, this);
	      return sink.run();
	    };
	
	    return RepeatObservable;
	  }(ObservableBase));
	
	  function RepeatSink(observer, parent) {
	    this.observer = observer;
	    this.parent = parent;
	  }
	
	  RepeatSink.prototype.run = function () {
	    var observer = this.observer, value = this.parent.value;
	    function loopRecursive(i, recurse) {
	      if (i === -1 || i > 0) {
	        observer.onNext(value);
	        i > 0 && i--;
	      }
	      if (i === 0) { return observer.onCompleted(); }
	      recurse(i);
	    }
	
	    return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount, loopRecursive);
	  };
	
	  /**
	   *  Generates an observable sequence that repeats the given element the specified number of times, using the specified scheduler to send out observer messages.
	   * @param {Mixed} value Element to repeat.
	   * @param {Number} repeatCount [Optiona] Number of times to repeat the element. If not specified, repeats indefinitely.
	   * @param {Scheduler} scheduler Scheduler to run the producer loop on. If not specified, defaults to Scheduler.immediate.
	   * @returns {Observable} An observable sequence that repeats the given element the specified number of times.
	   */
	  Observable.repeat = function (value, repeatCount, scheduler) {
	    isScheduler(scheduler) || (scheduler = currentThreadScheduler);
	    return new RepeatObservable(value, repeatCount, scheduler);
	  };
	
	  var JustObservable = (function(__super__) {
	    inherits(JustObservable, __super__);
	    function JustObservable(value, scheduler) {
	      this._value = value;
	      this._scheduler = scheduler;
	      __super__.call(this);
	    }
	
	    JustObservable.prototype.subscribeCore = function (o) {
	      var state = [this._value, o];
	      return this._scheduler === immediateScheduler ?
	        scheduleItem(null, state) :
	        this._scheduler.schedule(state, scheduleItem);
	    };
	
	    function scheduleItem(s, state) {
	      var value = state[0], observer = state[1];
	      observer.onNext(value);
	      observer.onCompleted();
	      return disposableEmpty;
	    }
	
	    return JustObservable;
	  }(ObservableBase));
	
	  /**
	   *  Returns an observable sequence that contains a single element, using the specified scheduler to send out observer messages.
	   *  There is an alias called 'just' or browsers <IE9.
	   * @param {Mixed} value Single element in the resulting observable sequence.
	   * @param {Scheduler} scheduler Scheduler to send the single element on. If not specified, defaults to Scheduler.immediate.
	   * @returns {Observable} An observable sequence containing the single specified element.
	   */
	  var observableReturn = Observable['return'] = Observable.just = function (value, scheduler) {
	    isScheduler(scheduler) || (scheduler = immediateScheduler);
	    return new JustObservable(value, scheduler);
	  };
	
	  var ThrowObservable = (function(__super__) {
	    inherits(ThrowObservable, __super__);
	    function ThrowObservable(error, scheduler) {
	      this._error = error;
	      this._scheduler = scheduler;
	      __super__.call(this);
	    }
	
	    ThrowObservable.prototype.subscribeCore = function (o) {
	      var state = [this._error, o];
	      return this._scheduler === immediateScheduler ?
	        scheduleItem(null, state) :
	        this._scheduler.schedule(state, scheduleItem);
	    };
	
	    function scheduleItem(s, state) {
	      var e = state[0], o = state[1];
	      o.onError(e);
	      return disposableEmpty;
	    }
	
	    return ThrowObservable;
	  }(ObservableBase));
	
	  /**
	   *  Returns an observable sequence that terminates with an exception, using the specified scheduler to send out the single onError message.
	   *  There is an alias to this method called 'throwError' for browsers <IE9.
	   * @param {Mixed} error An object used for the sequence's termination.
	   * @param {Scheduler} scheduler Scheduler to send the exceptional termination call on. If not specified, defaults to Scheduler.immediate.
	   * @returns {Observable} The observable sequence that terminates exceptionally with the specified exception object.
	   */
	  var observableThrow = Observable['throw'] = function (error, scheduler) {
	    isScheduler(scheduler) || (scheduler = immediateScheduler);
	    return new ThrowObservable(error, scheduler);
	  };
	
	  var UsingObservable = (function (__super__) {
	    inherits(UsingObservable, __super__);
	    function UsingObservable(resFn, obsFn) {
	      this._resFn = resFn;
	      this._obsFn = obsFn;
	      __super__.call(this);
	    }
	
	    UsingObservable.prototype.subscribeCore = function (o) {
	      var disposable = disposableEmpty;
	      var resource = tryCatch(this._resFn)();
	      if (resource === errorObj) {
	        return new BinaryDisposable(observableThrow(resource.e).subscribe(o), disposable);
	      }
	      resource && (disposable = resource);
	      var source = tryCatch(this._obsFn)(resource);
	      if (source === errorObj) {
	        return new BinaryDisposable(observableThrow(source.e).subscribe(o), disposable);
	      }
	      return new BinaryDisposable(source.subscribe(o), disposable);
	    };
	
	    return UsingObservable;
	  }(ObservableBase));
	
	  /**
	   * Constructs an observable sequence that depends on a resource object, whose lifetime is tied to the resulting observable sequence's lifetime.
	   * @param {Function} resourceFactory Factory function to obtain a resource object.
	   * @param {Function} observableFactory Factory function to obtain an observable sequence that depends on the obtained resource.
	   * @returns {Observable} An observable sequence whose lifetime controls the lifetime of the dependent resource object.
	   */
	  Observable.using = function (resourceFactory, observableFactory) {
	    return new UsingObservable(resourceFactory, observableFactory);
	  };
	
	  /**
	   * Propagates the observable sequence or Promise that reacts first.
	   * @param {Observable} rightSource Second observable sequence or Promise.
	   * @returns {Observable} {Observable} An observable sequence that surfaces either of the given sequences, whichever reacted first.
	   */
	  observableProto.amb = function (rightSource) {
	    var leftSource = this;
	    return new AnonymousObservable(function (observer) {
	      var choice,
	        leftChoice = 'L', rightChoice = 'R',
	        leftSubscription = new SingleAssignmentDisposable(),
	        rightSubscription = new SingleAssignmentDisposable();
	
	      isPromise(rightSource) && (rightSource = observableFromPromise(rightSource));
	
	      function choiceL() {
	        if (!choice) {
	          choice = leftChoice;
	          rightSubscription.dispose();
	        }
	      }
	
	      function choiceR() {
	        if (!choice) {
	          choice = rightChoice;
	          leftSubscription.dispose();
	        }
	      }
	
	      var leftSubscribe = observerCreate(
	        function (left) {
	          choiceL();
	          choice === leftChoice && observer.onNext(left);
	        },
	        function (e) {
	          choiceL();
	          choice === leftChoice && observer.onError(e);
	        },
	        function () {
	          choiceL();
	          choice === leftChoice && observer.onCompleted();
	        }
	      );
	      var rightSubscribe = observerCreate(
	        function (right) {
	          choiceR();
	          choice === rightChoice && observer.onNext(right);
	        },
	        function (e) {
	          choiceR();
	          choice === rightChoice && observer.onError(e);
	        },
	        function () {
	          choiceR();
	          choice === rightChoice && observer.onCompleted();
	        }
	      );
	
	      leftSubscription.setDisposable(leftSource.subscribe(leftSubscribe));
	      rightSubscription.setDisposable(rightSource.subscribe(rightSubscribe));
	
	      return new BinaryDisposable(leftSubscription, rightSubscription);
	    });
	  };
	
	  function amb(p, c) { return p.amb(c); }
	
	  /**
	   * Propagates the observable sequence or Promise that reacts first.
	   * @returns {Observable} An observable sequence that surfaces any of the given sequences, whichever reacted first.
	   */
	  Observable.amb = function () {
	    var acc = observableNever(), items;
	    if (Array.isArray(arguments[0])) {
	      items = arguments[0];
	    } else {
	      var len = arguments.length;
	      items = new Array(items);
	      for(var i = 0; i < len; i++) { items[i] = arguments[i]; }
	    }
	    for (var i = 0, len = items.length; i < len; i++) {
	      acc = amb(acc, items[i]);
	    }
	    return acc;
	  };
	
	  var CatchObservable = (function (__super__) {
	    inherits(CatchObservable, __super__);
	    function CatchObservable(source, fn) {
	      this.source = source;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    CatchObservable.prototype.subscribeCore = function (o) {
	      var d1 = new SingleAssignmentDisposable(), subscription = new SerialDisposable();
	      subscription.setDisposable(d1);
	      d1.setDisposable(this.source.subscribe(new CatchObserver(o, subscription, this._fn)));
	      return subscription;
	    };
	
	    return CatchObservable;
	  }(ObservableBase));
	
	  var CatchObserver = (function(__super__) {
	    inherits(CatchObserver, __super__);
	    function CatchObserver(o, s, fn) {
	      this._o = o;
	      this._s = s;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    CatchObserver.prototype.next = function (x) { this._o.onNext(x); };
	    CatchObserver.prototype.completed = function () { return this._o.onCompleted(); };
	    CatchObserver.prototype.error = function (e) {
	      var result = tryCatch(this._fn)(e);
	      if (result === errorObj) { return this._o.onError(result.e); }
	      isPromise(result) && (result = observableFromPromise(result));
	
	      var d = new SingleAssignmentDisposable();
	      this._s.setDisposable(d);
	      d.setDisposable(result.subscribe(this._o));
	    };
	
	    return CatchObserver;
	  }(AbstractObserver));
	
	  /**
	   * Continues an observable sequence that is terminated by an exception with the next observable sequence.
	   * @param {Mixed} handlerOrSecond Exception handler function that returns an observable sequence given the error that occurred in the first sequence, or a second observable sequence used to produce results when an error occurred in the first sequence.
	   * @returns {Observable} An observable sequence containing the first sequence's elements, followed by the elements of the handler sequence in case an exception occurred.
	   */
	  observableProto['catch'] = function (handlerOrSecond) {
	    return isFunction(handlerOrSecond) ? new CatchObservable(this, handlerOrSecond) : observableCatch([this, handlerOrSecond]);
	  };
	
	  /**
	   * Continues an observable sequence that is terminated by an exception with the next observable sequence.
	   * @param {Array | Arguments} args Arguments or an array to use as the next sequence if an error occurs.
	   * @returns {Observable} An observable sequence containing elements from consecutive source sequences until a source sequence terminates successfully.
	   */
	  var observableCatch = Observable['catch'] = function () {
	    var items;
	    if (Array.isArray(arguments[0])) {
	      items = arguments[0];
	    } else {
	      var len = arguments.length;
	      items = new Array(len);
	      for(var i = 0; i < len; i++) { items[i] = arguments[i]; }
	    }
	    return enumerableOf(items).catchError();
	  };
	
	  /**
	   * Merges the specified observable sequences into one observable sequence by using the selector function whenever any of the observable sequences or Promises produces an element.
	   * This can be in the form of an argument list of observables or an array.
	   *
	   * @example
	   * 1 - obs = observable.combineLatest(obs1, obs2, obs3, function (o1, o2, o3) { return o1 + o2 + o3; });
	   * 2 - obs = observable.combineLatest([obs1, obs2, obs3], function (o1, o2, o3) { return o1 + o2 + o3; });
	   * @returns {Observable} An observable sequence containing the result of combining elements of the sources using the specified result selector function.
	   */
	  observableProto.combineLatest = function () {
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    if (Array.isArray(args[0])) {
	      args[0].unshift(this);
	    } else {
	      args.unshift(this);
	    }
	    return combineLatest.apply(this, args);
	  };
	
	  function falseFactory() { return false; }
	  function argumentsToArray() {
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    return args;
	  }
	
	  var CombineLatestObservable = (function(__super__) {
	    inherits(CombineLatestObservable, __super__);
	    function CombineLatestObservable(params, cb) {
	      this._params = params;
	      this._cb = cb;
	      __super__.call(this);
	    }
	
	    CombineLatestObservable.prototype.subscribeCore = function(observer) {
	      var len = this._params.length,
	          subscriptions = new Array(len);
	
	      var state = {
	        hasValue: arrayInitialize(len, falseFactory),
	        hasValueAll: false,
	        isDone: arrayInitialize(len, falseFactory),
	        values: new Array(len)
	      };
	
	      for (var i = 0; i < len; i++) {
	        var source = this._params[i], sad = new SingleAssignmentDisposable();
	        subscriptions[i] = sad;
	        isPromise(source) && (source = observableFromPromise(source));
	        sad.setDisposable(source.subscribe(new CombineLatestObserver(observer, i, this._cb, state)));
	      }
	
	      return new NAryDisposable(subscriptions);
	    };
	
	    return CombineLatestObservable;
	  }(ObservableBase));
	
	  var CombineLatestObserver = (function (__super__) {
	    inherits(CombineLatestObserver, __super__);
	    function CombineLatestObserver(o, i, cb, state) {
	      this._o = o;
	      this._i = i;
	      this._cb = cb;
	      this._state = state;
	      __super__.call(this);
	    }
	
	    function notTheSame(i) {
	      return function (x, j) {
	        return j !== i;
	      };
	    }
	
	    CombineLatestObserver.prototype.next = function (x) {
	      this._state.values[this._i] = x;
	      this._state.hasValue[this._i] = true;
	      if (this._state.hasValueAll || (this._state.hasValueAll = this._state.hasValue.every(identity))) {
	        var res = tryCatch(this._cb).apply(null, this._state.values);
	        if (res === errorObj) { return this._o.onError(res.e); }
	        this._o.onNext(res);
	      } else if (this._state.isDone.filter(notTheSame(this._i)).every(identity)) {
	        this._o.onCompleted();
	      }
	    };
	
	    CombineLatestObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    CombineLatestObserver.prototype.completed = function () {
	      this._state.isDone[this._i] = true;
	      this._state.isDone.every(identity) && this._o.onCompleted();
	    };
	
	    return CombineLatestObserver;
	  }(AbstractObserver));
	
	  /**
	  * Merges the specified observable sequences into one observable sequence by using the selector function whenever any of the observable sequences or Promises produces an element.
	  *
	  * @example
	  * 1 - obs = Rx.Observable.combineLatest(obs1, obs2, obs3, function (o1, o2, o3) { return o1 + o2 + o3; });
	  * 2 - obs = Rx.Observable.combineLatest([obs1, obs2, obs3], function (o1, o2, o3) { return o1 + o2 + o3; });
	  * @returns {Observable} An observable sequence containing the result of combining elements of the sources using the specified result selector function.
	  */
	  var combineLatest = Observable.combineLatest = function () {
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    var resultSelector = isFunction(args[len - 1]) ? args.pop() : argumentsToArray;
	    Array.isArray(args[0]) && (args = args[0]);
	    return new CombineLatestObservable(args, resultSelector);
	  };
	
	  /**
	   * Concatenates all the observable sequences.  This takes in either an array or variable arguments to concatenate.
	   * @returns {Observable} An observable sequence that contains the elements of each given sequence, in sequential order.
	   */
	  observableProto.concat = function () {
	    for(var args = [], i = 0, len = arguments.length; i < len; i++) { args.push(arguments[i]); }
	    args.unshift(this);
	    return observableConcat.apply(null, args);
	  };
	
	  var ConcatObserver = (function(__super__) {
	    inherits(ConcatObserver, __super__);
	    function ConcatObserver(s, fn) {
	      this._s = s;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    ConcatObserver.prototype.next = function (x) { this._s.o.onNext(x); };
	    ConcatObserver.prototype.error = function (e) { this._s.o.onError(e); };
	    ConcatObserver.prototype.completed = function () { this._s.i++; this._fn(this._s); };
	
	    return ConcatObserver;
	  }(AbstractObserver));
	
	  var ConcatObservable = (function(__super__) {
	    inherits(ConcatObservable, __super__);
	    function ConcatObservable(sources) {
	      this._sources = sources;
	      __super__.call(this);
	    }
	
	    function scheduleRecursive (state, recurse) {
	      if (state.disposable.isDisposed) { return; }
	      if (state.i === state.sources.length) { return state.o.onCompleted(); }
	
	      // Check if promise
	      var currentValue = state.sources[state.i];
	      isPromise(currentValue) && (currentValue = observableFromPromise(currentValue));
	
	      var d = new SingleAssignmentDisposable();
	      state.subscription.setDisposable(d);
	      d.setDisposable(currentValue.subscribe(new ConcatObserver(state, recurse)));
	    }
	
	    ConcatObservable.prototype.subscribeCore = function(o) {
	      var subscription = new SerialDisposable();
	      var disposable = disposableCreate(noop);
	      var state = {
	        o: o,
	        i: 0,
	        subscription: subscription,
	        disposable: disposable,
	        sources: this._sources
	      };
	
	      var cancelable = immediateScheduler.scheduleRecursive(state, scheduleRecursive);
	      return new NAryDisposable([subscription, disposable, cancelable]);
	    };
	
	    return ConcatObservable;
	  }(ObservableBase));
	
	  /**
	   * Concatenates all the observable sequences.
	   * @param {Array | Arguments} args Arguments or an array to concat to the observable sequence.
	   * @returns {Observable} An observable sequence that contains the elements of each given sequence, in sequential order.
	   */
	  var observableConcat = Observable.concat = function () {
	    var args;
	    if (Array.isArray(arguments[0])) {
	      args = arguments[0];
	    } else {
	      args = new Array(arguments.length);
	      for(var i = 0, len = arguments.length; i < len; i++) { args[i] = arguments[i]; }
	    }
	    return new ConcatObservable(args);
	  };
	
	  /**
	   * Concatenates an observable sequence of observable sequences.
	   * @returns {Observable} An observable sequence that contains the elements of each observed inner sequence, in sequential order.
	   */
	  observableProto.concatAll = function () {
	    return this.merge(1);
	  };
	
	  var MergeObservable = (function (__super__) {
	    inherits(MergeObservable, __super__);
	
	    function MergeObservable(source, maxConcurrent) {
	      this.source = source;
	      this.maxConcurrent = maxConcurrent;
	      __super__.call(this);
	    }
	
	    MergeObservable.prototype.subscribeCore = function(observer) {
	      var g = new CompositeDisposable();
	      g.add(this.source.subscribe(new MergeObserver(observer, this.maxConcurrent, g)));
	      return g;
	    };
	
	    return MergeObservable;
	
	  }(ObservableBase));
	
	  var MergeObserver = (function (__super__) {
	    function MergeObserver(o, max, g) {
	      this.o = o;
	      this.max = max;
	      this.g = g;
	      this.done = false;
	      this.q = [];
	      this.activeCount = 0;
	      __super__.call(this);
	    }
	
	    inherits(MergeObserver, __super__);
	
	    MergeObserver.prototype.handleSubscribe = function (xs) {
	      var sad = new SingleAssignmentDisposable();
	      this.g.add(sad);
	      isPromise(xs) && (xs = observableFromPromise(xs));
	      sad.setDisposable(xs.subscribe(new InnerObserver(this, sad)));
	    };
	
	    MergeObserver.prototype.next = function (innerSource) {
	      if(this.activeCount < this.max) {
	        this.activeCount++;
	        this.handleSubscribe(innerSource);
	      } else {
	        this.q.push(innerSource);
	      }
	    };
	    MergeObserver.prototype.error = function (e) { this.o.onError(e); };
	    MergeObserver.prototype.completed = function () { this.done = true; this.activeCount === 0 && this.o.onCompleted(); };
	
	    function InnerObserver(parent, sad) {
	      this.parent = parent;
	      this.sad = sad;
	      __super__.call(this);
	    }
	
	    inherits(InnerObserver, __super__);
	
	    InnerObserver.prototype.next = function (x) { this.parent.o.onNext(x); };
	    InnerObserver.prototype.error = function (e) { this.parent.o.onError(e); };
	    InnerObserver.prototype.completed = function () {
	      this.parent.g.remove(this.sad);
	      if (this.parent.q.length > 0) {
	        this.parent.handleSubscribe(this.parent.q.shift());
	      } else {
	        this.parent.activeCount--;
	        this.parent.done && this.parent.activeCount === 0 && this.parent.o.onCompleted();
	      }
	    };
	
	    return MergeObserver;
	  }(AbstractObserver));
	
	  /**
	  * Merges an observable sequence of observable sequences into an observable sequence, limiting the number of concurrent subscriptions to inner sequences.
	  * Or merges two observable sequences into a single observable sequence.
	  * @param {Mixed} [maxConcurrentOrOther] Maximum number of inner observable sequences being subscribed to concurrently or the second observable sequence.
	  * @returns {Observable} The observable sequence that merges the elements of the inner sequences.
	  */
	  observableProto.merge = function (maxConcurrentOrOther) {
	    return typeof maxConcurrentOrOther !== 'number' ?
	      observableMerge(this, maxConcurrentOrOther) :
	      new MergeObservable(this, maxConcurrentOrOther);
	  };
	
	  /**
	   * Merges all the observable sequences into a single observable sequence.
	   * The scheduler is optional and if not specified, the immediate scheduler is used.
	   * @returns {Observable} The observable sequence that merges the elements of the observable sequences.
	   */
	  var observableMerge = Observable.merge = function () {
	    var scheduler, sources = [], i, len = arguments.length;
	    if (!arguments[0]) {
	      scheduler = immediateScheduler;
	      for(i = 1; i < len; i++) { sources.push(arguments[i]); }
	    } else if (isScheduler(arguments[0])) {
	      scheduler = arguments[0];
	      for(i = 1; i < len; i++) { sources.push(arguments[i]); }
	    } else {
	      scheduler = immediateScheduler;
	      for(i = 0; i < len; i++) { sources.push(arguments[i]); }
	    }
	    if (Array.isArray(sources[0])) {
	      sources = sources[0];
	    }
	    return observableOf(scheduler, sources).mergeAll();
	  };
	
	  var MergeAllObservable = (function (__super__) {
	    inherits(MergeAllObservable, __super__);
	
	    function MergeAllObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    MergeAllObservable.prototype.subscribeCore = function (o) {
	      var g = new CompositeDisposable(), m = new SingleAssignmentDisposable();
	      g.add(m);
	      m.setDisposable(this.source.subscribe(new MergeAllObserver(o, g)));
	      return g;
	    };
	
	    return MergeAllObservable;
	  }(ObservableBase));
	
	  var MergeAllObserver = (function (__super__) {
	    function MergeAllObserver(o, g) {
	      this.o = o;
	      this.g = g;
	      this.done = false;
	      __super__.call(this);
	    }
	
	    inherits(MergeAllObserver, __super__);
	
	    MergeAllObserver.prototype.next = function(innerSource) {
	      var sad = new SingleAssignmentDisposable();
	      this.g.add(sad);
	      isPromise(innerSource) && (innerSource = observableFromPromise(innerSource));
	      sad.setDisposable(innerSource.subscribe(new InnerObserver(this, sad)));
	    };
	
	    MergeAllObserver.prototype.error = function (e) {
	      this.o.onError(e);
	    };
	
	    MergeAllObserver.prototype.completed = function () {
	      this.done = true;
	      this.g.length === 1 && this.o.onCompleted();
	    };
	
	    function InnerObserver(parent, sad) {
	      this.parent = parent;
	      this.sad = sad;
	      __super__.call(this);
	    }
	
	    inherits(InnerObserver, __super__);
	
	    InnerObserver.prototype.next = function (x) {
	      this.parent.o.onNext(x);
	    };
	    InnerObserver.prototype.error = function (e) {
	      this.parent.o.onError(e);
	    };
	    InnerObserver.prototype.completed = function () {
	      this.parent.g.remove(this.sad);
	      this.parent.done && this.parent.g.length === 1 && this.parent.o.onCompleted();
	    };
	
	    return MergeAllObserver;
	  }(AbstractObserver));
	
	  /**
	  * Merges an observable sequence of observable sequences into an observable sequence.
	  * @returns {Observable} The observable sequence that merges the elements of the inner sequences.
	  */
	  observableProto.mergeAll = function () {
	    return new MergeAllObservable(this);
	  };
	
	  var CompositeError = Rx.CompositeError = function(errors) {
	    this.innerErrors = errors;
	    this.message = 'This contains multiple errors. Check the innerErrors';
	    Error.call(this);
	  };
	  CompositeError.prototype = Object.create(Error.prototype);
	  CompositeError.prototype.name = 'CompositeError';
	
	  var MergeDelayErrorObservable = (function(__super__) {
	    inherits(MergeDelayErrorObservable, __super__);
	    function MergeDelayErrorObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    MergeDelayErrorObservable.prototype.subscribeCore = function (o) {
	      var group = new CompositeDisposable(),
	        m = new SingleAssignmentDisposable(),
	        state = { isStopped: false, errors: [], o: o };
	
	      group.add(m);
	      m.setDisposable(this.source.subscribe(new MergeDelayErrorObserver(group, state)));
	
	      return group;
	    };
	
	    return MergeDelayErrorObservable;
	  }(ObservableBase));
	
	  var MergeDelayErrorObserver = (function(__super__) {
	    inherits(MergeDelayErrorObserver, __super__);
	    function MergeDelayErrorObserver(group, state) {
	      this._group = group;
	      this._state = state;
	      __super__.call(this);
	    }
	
	    function setCompletion(o, errors) {
	      if (errors.length === 0) {
	        o.onCompleted();
	      } else if (errors.length === 1) {
	        o.onError(errors[0]);
	      } else {
	        o.onError(new CompositeError(errors));
	      }
	    }
	
	    MergeDelayErrorObserver.prototype.next = function (x) {
	      var inner = new SingleAssignmentDisposable();
	      this._group.add(inner);
	
	      // Check for promises support
	      isPromise(x) && (x = observableFromPromise(x));
	      inner.setDisposable(x.subscribe(new InnerObserver(inner, this._group, this._state)));
	    };
	
	    MergeDelayErrorObserver.prototype.error = function (e) {
	      this._state.errors.push(e);
	      this._state.isStopped = true;
	      this._group.length === 1 && setCompletion(this._state.o, this._state.errors);
	    };
	
	    MergeDelayErrorObserver.prototype.completed = function () {
	      this._state.isStopped = true;
	      this._group.length === 1 && setCompletion(this._state.o, this._state.errors);
	    };
	
	    inherits(InnerObserver, __super__);
	    function InnerObserver(inner, group, state) {
	      this._inner = inner;
	      this._group = group;
	      this._state = state;
	      __super__.call(this);
	    }
	
	    InnerObserver.prototype.next = function (x) { this._state.o.onNext(x); };
	    InnerObserver.prototype.error = function (e) {
	      this._state.errors.push(e);
	      this._group.remove(this._inner);
	      this._state.isStopped && this._group.length === 1 && setCompletion(this._state.o, this._state.errors);
	    };
	    InnerObserver.prototype.completed = function () {
	      this._group.remove(this._inner);
	      this._state.isStopped && this._group.length === 1 && setCompletion(this._state.o, this._state.errors);
	    };
	
	    return MergeDelayErrorObserver;
	  }(AbstractObserver));
	
	  /**
	  * Flattens an Observable that emits Observables into one Observable, in a way that allows an Observer to
	  * receive all successfully emitted items from all of the source Observables without being interrupted by
	  * an error notification from one of them.
	  *
	  * This behaves like Observable.prototype.mergeAll except that if any of the merged Observables notify of an
	  * error via the Observer's onError, mergeDelayError will refrain from propagating that
	  * error notification until all of the merged Observables have finished emitting items.
	  * @param {Array | Arguments} args Arguments or an array to merge.
	  * @returns {Observable} an Observable that emits all of the items emitted by the Observables emitted by the Observable
	  */
	  Observable.mergeDelayError = function() {
	    var args;
	    if (Array.isArray(arguments[0])) {
	      args = arguments[0];
	    } else {
	      var len = arguments.length;
	      args = new Array(len);
	      for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    }
	    var source = observableOf(null, args);
	    return new MergeDelayErrorObservable(source);
	  };
	
	  /**
	   * Continues an observable sequence that is terminated normally or by an exception with the next observable sequence.
	   * @param {Observable} second Second observable sequence used to produce results after the first sequence terminates.
	   * @returns {Observable} An observable sequence that concatenates the first and second sequence, even if the first sequence terminates exceptionally.
	   */
	  observableProto.onErrorResumeNext = function (second) {
	    if (!second) { throw new Error('Second observable is required'); }
	    return onErrorResumeNext([this, second]);
	  };
	
	  var OnErrorResumeNextObservable = (function(__super__) {
	    inherits(OnErrorResumeNextObservable, __super__);
	    function OnErrorResumeNextObservable(sources) {
	      this.sources = sources;
	      __super__.call(this);
	    }
	
	    function scheduleMethod(state, recurse) {
	      if (state.pos < state.sources.length) {
	        var current = state.sources[state.pos++];
	        isPromise(current) && (current = observableFromPromise(current));
	        var d = new SingleAssignmentDisposable();
	        state.subscription.setDisposable(d);
	        d.setDisposable(current.subscribe(new OnErrorResumeNextObserver(state, recurse)));
	      } else {
	        state.o.onCompleted();
	      }
	    }
	
	    OnErrorResumeNextObservable.prototype.subscribeCore = function (o) {
	      var subscription = new SerialDisposable(),
	          state = {pos: 0, subscription: subscription, o: o, sources: this.sources },
	          cancellable = immediateScheduler.scheduleRecursive(state, scheduleMethod);
	
	      return new BinaryDisposable(subscription, cancellable);
	    };
	
	    return OnErrorResumeNextObservable;
	  }(ObservableBase));
	
	  var OnErrorResumeNextObserver = (function(__super__) {
	    inherits(OnErrorResumeNextObserver, __super__);
	    function OnErrorResumeNextObserver(state, recurse) {
	      this._state = state;
	      this._recurse = recurse;
	      __super__.call(this);
	    }
	
	    OnErrorResumeNextObserver.prototype.next = function (x) { this._state.o.onNext(x); };
	    OnErrorResumeNextObserver.prototype.error = function () { this._recurse(this._state); };
	    OnErrorResumeNextObserver.prototype.completed = function () { this._recurse(this._state); };
	
	    return OnErrorResumeNextObserver;
	  }(AbstractObserver));
	
	  /**
	   * Continues an observable sequence that is terminated normally or by an exception with the next observable sequence.
	   * @returns {Observable} An observable sequence that concatenates the source sequences, even if a sequence terminates exceptionally.
	   */
	  var onErrorResumeNext = Observable.onErrorResumeNext = function () {
	    var sources = [];
	    if (Array.isArray(arguments[0])) {
	      sources = arguments[0];
	    } else {
	      var len = arguments.length;
	      sources = new Array(len);
	      for(var i = 0; i < len; i++) { sources[i] = arguments[i]; }
	    }
	    return new OnErrorResumeNextObservable(sources);
	  };
	
	  var SkipUntilObservable = (function(__super__) {
	    inherits(SkipUntilObservable, __super__);
	
	    function SkipUntilObservable(source, other) {
	      this._s = source;
	      this._o = isPromise(other) ? observableFromPromise(other) : other;
	      this._open = false;
	      __super__.call(this);
	    }
	
	    SkipUntilObservable.prototype.subscribeCore = function(o) {
	      var leftSubscription = new SingleAssignmentDisposable();
	      leftSubscription.setDisposable(this._s.subscribe(new SkipUntilSourceObserver(o, this)));
	
	      isPromise(this._o) && (this._o = observableFromPromise(this._o));
	
	      var rightSubscription = new SingleAssignmentDisposable();
	      rightSubscription.setDisposable(this._o.subscribe(new SkipUntilOtherObserver(o, this, rightSubscription)));
	
	      return new BinaryDisposable(leftSubscription, rightSubscription);
	    };
	
	    return SkipUntilObservable;
	  }(ObservableBase));
	
	  var SkipUntilSourceObserver = (function(__super__) {
	    inherits(SkipUntilSourceObserver, __super__);
	    function SkipUntilSourceObserver(o, p) {
	      this._o = o;
	      this._p = p;
	      __super__.call(this);
	    }
	
	    SkipUntilSourceObserver.prototype.next = function (x) {
	      this._p._open && this._o.onNext(x);
	    };
	
	    SkipUntilSourceObserver.prototype.error = function (err) {
	      this._o.onError(err);
	    };
	
	    SkipUntilSourceObserver.prototype.onCompleted = function () {
	      this._p._open && this._o.onCompleted();
	    };
	
	    return SkipUntilSourceObserver;
	  }(AbstractObserver));
	
	  var SkipUntilOtherObserver = (function(__super__) {
	    inherits(SkipUntilOtherObserver, __super__);
	    function SkipUntilOtherObserver(o, p, r) {
	      this._o = o;
	      this._p = p;
	      this._r = r;
	      __super__.call(this);
	    }
	
	    SkipUntilOtherObserver.prototype.next = function () {
	      this._p._open = true;
	      this._r.dispose();
	    };
	
	    SkipUntilOtherObserver.prototype.error = function (err) {
	      this._o.onError(err);
	    };
	
	    SkipUntilOtherObserver.prototype.onCompleted = function () {
	      this._r.dispose();
	    };
	
	    return SkipUntilOtherObserver;
	  }(AbstractObserver));
	
	  /**
	   * Returns the values from the source observable sequence only after the other observable sequence produces a value.
	   * @param {Observable | Promise} other The observable sequence or Promise that triggers propagation of elements of the source sequence.
	   * @returns {Observable} An observable sequence containing the elements of the source sequence starting from the point the other sequence triggered propagation.
	   */
	  observableProto.skipUntil = function (other) {
	    return new SkipUntilObservable(this, other);
	  };
	
	  var SwitchObservable = (function(__super__) {
	    inherits(SwitchObservable, __super__);
	    function SwitchObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    SwitchObservable.prototype.subscribeCore = function (o) {
	      var inner = new SerialDisposable(), s = this.source.subscribe(new SwitchObserver(o, inner));
	      return new BinaryDisposable(s, inner);
	    };
	
	    inherits(SwitchObserver, AbstractObserver);
	    function SwitchObserver(o, inner) {
	      this.o = o;
	      this.inner = inner;
	      this.stopped = false;
	      this.latest = 0;
	      this.hasLatest = false;
	      AbstractObserver.call(this);
	    }
	
	    SwitchObserver.prototype.next = function (innerSource) {
	      var d = new SingleAssignmentDisposable(), id = ++this.latest;
	      this.hasLatest = true;
	      this.inner.setDisposable(d);
	      isPromise(innerSource) && (innerSource = observableFromPromise(innerSource));
	      d.setDisposable(innerSource.subscribe(new InnerObserver(this, id)));
	    };
	
	    SwitchObserver.prototype.error = function (e) {
	      this.o.onError(e);
	    };
	
	    SwitchObserver.prototype.completed = function () {
	      this.stopped = true;
	      !this.hasLatest && this.o.onCompleted();
	    };
	
	    inherits(InnerObserver, AbstractObserver);
	    function InnerObserver(parent, id) {
	      this.parent = parent;
	      this.id = id;
	      AbstractObserver.call(this);
	    }
	    InnerObserver.prototype.next = function (x) {
	      this.parent.latest === this.id && this.parent.o.onNext(x);
	    };
	
	    InnerObserver.prototype.error = function (e) {
	      this.parent.latest === this.id && this.parent.o.onError(e);
	    };
	
	    InnerObserver.prototype.completed = function () {
	      if (this.parent.latest === this.id) {
	        this.parent.hasLatest = false;
	        this.parent.stopped && this.parent.o.onCompleted();
	      }
	    };
	
	    return SwitchObservable;
	  }(ObservableBase));
	
	  /**
	  * Transforms an observable sequence of observable sequences into an observable sequence producing values only from the most recent observable sequence.
	  * @returns {Observable} The observable sequence that at any point in time produces the elements of the most recent inner observable sequence that has been received.
	  */
	  observableProto['switch'] = observableProto.switchLatest = function () {
	    return new SwitchObservable(this);
	  };
	
	  var TakeUntilObservable = (function(__super__) {
	    inherits(TakeUntilObservable, __super__);
	
	    function TakeUntilObservable(source, other) {
	      this.source = source;
	      this.other = isPromise(other) ? observableFromPromise(other) : other;
	      __super__.call(this);
	    }
	
	    TakeUntilObservable.prototype.subscribeCore = function(o) {
	      return new BinaryDisposable(
	        this.source.subscribe(o),
	        this.other.subscribe(new TakeUntilObserver(o))
	      );
	    };
	
	    return TakeUntilObservable;
	  }(ObservableBase));
	
	  var TakeUntilObserver = (function(__super__) {
	    inherits(TakeUntilObserver, __super__);
	    function TakeUntilObserver(o) {
	      this._o = o;
	      __super__.call(this);
	    }
	
	    TakeUntilObserver.prototype.next = function () {
	      this._o.onCompleted();
	    };
	
	    TakeUntilObserver.prototype.error = function (err) {
	      this._o.onError(err);
	    };
	
	    TakeUntilObserver.prototype.onCompleted = noop;
	
	    return TakeUntilObserver;
	  }(AbstractObserver));
	
	  /**
	   * Returns the values from the source observable sequence until the other observable sequence produces a value.
	   * @param {Observable | Promise} other Observable sequence or Promise that terminates propagation of elements of the source sequence.
	   * @returns {Observable} An observable sequence containing the elements of the source sequence up to the point the other sequence interrupted further propagation.
	   */
	  observableProto.takeUntil = function (other) {
	    return new TakeUntilObservable(this, other);
	  };
	
	  function falseFactory() { return false; }
	  function argumentsToArray() {
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    return args;
	  }
	
	  var WithLatestFromObservable = (function(__super__) {
	    inherits(WithLatestFromObservable, __super__);
	    function WithLatestFromObservable(source, sources, resultSelector) {
	      this._s = source;
	      this._ss = sources;
	      this._cb = resultSelector;
	      __super__.call(this);
	    }
	
	    WithLatestFromObservable.prototype.subscribeCore = function (o) {
	      var len = this._ss.length;
	      var state = {
	        hasValue: arrayInitialize(len, falseFactory),
	        hasValueAll: false,
	        values: new Array(len)
	      };
	
	      var n = this._ss.length, subscriptions = new Array(n + 1);
	      for (var i = 0; i < n; i++) {
	        var other = this._ss[i], sad = new SingleAssignmentDisposable();
	        isPromise(other) && (other = observableFromPromise(other));
	        sad.setDisposable(other.subscribe(new WithLatestFromOtherObserver(o, i, state)));
	        subscriptions[i] = sad;
	      }
	
	      var outerSad = new SingleAssignmentDisposable();
	      outerSad.setDisposable(this._s.subscribe(new WithLatestFromSourceObserver(o, this._cb, state)));
	      subscriptions[n] = outerSad;
	
	      return new NAryDisposable(subscriptions);
	    };
	
	    return WithLatestFromObservable;
	  }(ObservableBase));
	
	  var WithLatestFromOtherObserver = (function (__super__) {
	    inherits(WithLatestFromOtherObserver, __super__);
	    function WithLatestFromOtherObserver(o, i, state) {
	      this._o = o;
	      this._i = i;
	      this._state = state;
	      __super__.call(this);
	    }
	
	    WithLatestFromOtherObserver.prototype.next = function (x) {
	      this._state.values[this._i] = x;
	      this._state.hasValue[this._i] = true;
	      this._state.hasValueAll = this._state.hasValue.every(identity);
	    };
	
	    WithLatestFromOtherObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    WithLatestFromOtherObserver.prototype.completed = noop;
	
	    return WithLatestFromOtherObserver;
	  }(AbstractObserver));
	
	  var WithLatestFromSourceObserver = (function (__super__) {
	    inherits(WithLatestFromSourceObserver, __super__);
	    function WithLatestFromSourceObserver(o, cb, state) {
	      this._o = o;
	      this._cb = cb;
	      this._state = state;
	      __super__.call(this);
	    }
	
	    WithLatestFromSourceObserver.prototype.next = function (x) {
	      var allValues = [x].concat(this._state.values);
	      if (!this._state.hasValueAll) { return; }
	      var res = tryCatch(this._cb).apply(null, allValues);
	      if (res === errorObj) { return this._o.onError(res.e); }
	      this._o.onNext(res);
	    };
	
	    WithLatestFromSourceObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    WithLatestFromSourceObserver.prototype.completed = function () {
	      this._o.onCompleted();
	    };
	
	    return WithLatestFromSourceObserver;
	  }(AbstractObserver));
	
	  /**
	   * Merges the specified observable sequences into one observable sequence by using the selector function only when the (first) source observable sequence produces an element.
	   * @returns {Observable} An observable sequence containing the result of combining elements of the sources using the specified result selector function.
	   */
	  observableProto.withLatestFrom = function () {
	    if (arguments.length === 0) { throw new Error('invalid arguments'); }
	
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    var resultSelector = isFunction(args[len - 1]) ? args.pop() : argumentsToArray;
	    Array.isArray(args[0]) && (args = args[0]);
	
	    return new WithLatestFromObservable(this, args, resultSelector);
	  };
	
	  function falseFactory() { return false; }
	  function emptyArrayFactory() { return []; }
	
	  var ZipObservable = (function(__super__) {
	    inherits(ZipObservable, __super__);
	    function ZipObservable(sources, resultSelector) {
	      this._s = sources;
	      this._cb = resultSelector;
	      __super__.call(this);
	    }
	
	    ZipObservable.prototype.subscribeCore = function(observer) {
	      var n = this._s.length,
	          subscriptions = new Array(n),
	          done = arrayInitialize(n, falseFactory),
	          q = arrayInitialize(n, emptyArrayFactory);
	
	      for (var i = 0; i < n; i++) {
	        var source = this._s[i], sad = new SingleAssignmentDisposable();
	        subscriptions[i] = sad;
	        isPromise(source) && (source = observableFromPromise(source));
	        sad.setDisposable(source.subscribe(new ZipObserver(observer, i, this, q, done)));
	      }
	
	      return new NAryDisposable(subscriptions);
	    };
	
	    return ZipObservable;
	  }(ObservableBase));
	
	  var ZipObserver = (function (__super__) {
	    inherits(ZipObserver, __super__);
	    function ZipObserver(o, i, p, q, d) {
	      this._o = o;
	      this._i = i;
	      this._p = p;
	      this._q = q;
	      this._d = d;
	      __super__.call(this);
	    }
	
	    function notEmpty(x) { return x.length > 0; }
	    function shiftEach(x) { return x.shift(); }
	    function notTheSame(i) {
	      return function (x, j) {
	        return j !== i;
	      };
	    }
	
	    ZipObserver.prototype.next = function (x) {
	      this._q[this._i].push(x);
	      if (this._q.every(notEmpty)) {
	        var queuedValues = this._q.map(shiftEach);
	        var res = tryCatch(this._p._cb).apply(null, queuedValues);
	        if (res === errorObj) { return this._o.onError(res.e); }
	        this._o.onNext(res);
	      } else if (this._d.filter(notTheSame(this._i)).every(identity)) {
	        this._o.onCompleted();
	      }
	    };
	
	    ZipObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    ZipObserver.prototype.completed = function () {
	      this._d[this._i] = true;
	      this._d.every(identity) && this._o.onCompleted();
	    };
	
	    return ZipObserver;
	  }(AbstractObserver));
	
	  /**
	   * Merges the specified observable sequences into one observable sequence by using the selector function whenever all of the observable sequences or an array have produced an element at a corresponding index.
	   * The last element in the arguments must be a function to invoke for each series of elements at corresponding indexes in the args.
	   * @returns {Observable} An observable sequence containing the result of combining elements of the args using the specified result selector function.
	   */
	  observableProto.zip = function () {
	    if (arguments.length === 0) { throw new Error('invalid arguments'); }
	
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    var resultSelector = isFunction(args[len - 1]) ? args.pop() : argumentsToArray;
	    Array.isArray(args[0]) && (args = args[0]);
	
	    var parent = this;
	    args.unshift(parent);
	
	    return new ZipObservable(args, resultSelector);
	  };
	
	  /**
	   * Merges the specified observable sequences into one observable sequence by using the selector function whenever all of the observable sequences have produced an element at a corresponding index.
	   * @param arguments Observable sources.
	   * @param {Function} resultSelector Function to invoke for each series of elements at corresponding indexes in the sources.
	   * @returns {Observable} An observable sequence containing the result of combining elements of the sources using the specified result selector function.
	   */
	  Observable.zip = function () {
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    if (Array.isArray(args[0])) {
	      args = isFunction(args[1]) ? args[0].concat(args[1]) : args[0];
	    }
	    var first = args.shift();
	    return first.zip.apply(first, args);
	  };
	
	function falseFactory() { return false; }
	function emptyArrayFactory() { return []; }
	function argumentsToArray() {
	  var len = arguments.length, args = new Array(len);
	  for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	  return args;
	}
	
	var ZipIterableObservable = (function(__super__) {
	  inherits(ZipIterableObservable, __super__);
	  function ZipIterableObservable(sources, cb) {
	    this.sources = sources;
	    this._cb = cb;
	    __super__.call(this);
	  }
	
	  ZipIterableObservable.prototype.subscribeCore = function (o) {
	    var sources = this.sources, len = sources.length, subscriptions = new Array(len);
	
	    var state = {
	      q: arrayInitialize(len, emptyArrayFactory),
	      done: arrayInitialize(len, falseFactory),
	      cb: this._cb,
	      o: o
	    };
	
	    for (var i = 0; i < len; i++) {
	      (function (i) {
	        var source = sources[i], sad = new SingleAssignmentDisposable();
	        (isArrayLike(source) || isIterable(source)) && (source = observableFrom(source));
	
	        subscriptions[i] = sad;
	        sad.setDisposable(source.subscribe(new ZipIterableObserver(state, i)));
	      }(i));
	    }
	
	    return new NAryDisposable(subscriptions);
	  };
	
	  return ZipIterableObservable;
	}(ObservableBase));
	
	var ZipIterableObserver = (function (__super__) {
	  inherits(ZipIterableObserver, __super__);
	  function ZipIterableObserver(s, i) {
	    this._s = s;
	    this._i = i;
	    __super__.call(this);
	  }
	
	  function notEmpty(x) { return x.length > 0; }
	  function shiftEach(x) { return x.shift(); }
	  function notTheSame(i) {
	    return function (x, j) {
	      return j !== i;
	    };
	  }
	
	  ZipIterableObserver.prototype.next = function (x) {
	    this._s.q[this._i].push(x);
	    if (this._s.q.every(notEmpty)) {
	      var queuedValues = this._s.q.map(shiftEach),
	          res = tryCatch(this._s.cb).apply(null, queuedValues);
	      if (res === errorObj) { return this._s.o.onError(res.e); }
	      this._s.o.onNext(res);
	    } else if (this._s.done.filter(notTheSame(this._i)).every(identity)) {
	      this._s.o.onCompleted();
	    }
	  };
	
	  ZipIterableObserver.prototype.error = function (e) { this._s.o.onError(e); };
	
	  ZipIterableObserver.prototype.completed = function () {
	    this._s.done[this._i] = true;
	    this._s.done.every(identity) && this._s.o.onCompleted();
	  };
	
	  return ZipIterableObserver;
	}(AbstractObserver));
	
	/**
	 * Merges the specified observable sequences into one observable sequence by using the selector function whenever all of the observable sequences or an array have produced an element at a corresponding index.
	 * The last element in the arguments must be a function to invoke for each series of elements at corresponding indexes in the args.
	 * @returns {Observable} An observable sequence containing the result of combining elements of the args using the specified result selector function.
	 */
	observableProto.zipIterable = function () {
	  if (arguments.length === 0) { throw new Error('invalid arguments'); }
	
	  var len = arguments.length, args = new Array(len);
	  for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	  var resultSelector = isFunction(args[len - 1]) ? args.pop() : argumentsToArray;
	
	  var parent = this;
	  args.unshift(parent);
	  return new ZipIterableObservable(args, resultSelector);
	};
	
	  function asObservable(source) {
	    return function subscribe(o) { return source.subscribe(o); };
	  }
	
	  /**
	   *  Hides the identity of an observable sequence.
	   * @returns {Observable} An observable sequence that hides the identity of the source sequence.
	   */
	  observableProto.asObservable = function () {
	    return new AnonymousObservable(asObservable(this), this);
	  };
	
	  function toArray(x) { return x.toArray(); }
	  function notEmpty(x) { return x.length > 0; }
	
	  /**
	   *  Projects each element of an observable sequence into zero or more buffers which are produced based on element count information.
	   * @param {Number} count Length of each buffer.
	   * @param {Number} [skip] Number of elements to skip between creation of consecutive buffers. If not provided, defaults to the count.
	   * @returns {Observable} An observable sequence of buffers.
	   */
	  observableProto.bufferWithCount = function (count, skip) {
	    typeof skip !== 'number' && (skip = count);
	    return this.windowWithCount(count, skip)
	      .flatMap(toArray)
	      .filter(notEmpty);
	  };
	
	  var DematerializeObservable = (function (__super__) {
	    inherits(DematerializeObservable, __super__);
	    function DematerializeObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    DematerializeObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new DematerializeObserver(o));
	    };
	
	    return DematerializeObservable;
	  }(ObservableBase));
	
	  var DematerializeObserver = (function (__super__) {
	    inherits(DematerializeObserver, __super__);
	
	    function DematerializeObserver(o) {
	      this._o = o;
	      __super__.call(this);
	    }
	
	    DematerializeObserver.prototype.next = function (x) { x.accept(this._o); };
	    DematerializeObserver.prototype.error = function (e) { this._o.onError(e); };
	    DematerializeObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return DematerializeObserver;
	  }(AbstractObserver));
	
	  /**
	   * Dematerializes the explicit notification values of an observable sequence as implicit notifications.
	   * @returns {Observable} An observable sequence exhibiting the behavior corresponding to the source sequence's notification values.
	   */
	  observableProto.dematerialize = function () {
	    return new DematerializeObservable(this);
	  };
	
	  var DistinctUntilChangedObservable = (function(__super__) {
	    inherits(DistinctUntilChangedObservable, __super__);
	    function DistinctUntilChangedObservable(source, keyFn, comparer) {
	      this.source = source;
	      this.keyFn = keyFn;
	      this.comparer = comparer;
	      __super__.call(this);
	    }
	
	    DistinctUntilChangedObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new DistinctUntilChangedObserver(o, this.keyFn, this.comparer));
	    };
	
	    return DistinctUntilChangedObservable;
	  }(ObservableBase));
	
	  var DistinctUntilChangedObserver = (function(__super__) {
	    inherits(DistinctUntilChangedObserver, __super__);
	    function DistinctUntilChangedObserver(o, keyFn, comparer) {
	      this.o = o;
	      this.keyFn = keyFn;
	      this.comparer = comparer;
	      this.hasCurrentKey = false;
	      this.currentKey = null;
	      __super__.call(this);
	    }
	
	    DistinctUntilChangedObserver.prototype.next = function (x) {
	      var key = x, comparerEquals;
	      if (isFunction(this.keyFn)) {
	        key = tryCatch(this.keyFn)(x);
	        if (key === errorObj) { return this.o.onError(key.e); }
	      }
	      if (this.hasCurrentKey) {
	        comparerEquals = tryCatch(this.comparer)(this.currentKey, key);
	        if (comparerEquals === errorObj) { return this.o.onError(comparerEquals.e); }
	      }
	      if (!this.hasCurrentKey || !comparerEquals) {
	        this.hasCurrentKey = true;
	        this.currentKey = key;
	        this.o.onNext(x);
	      }
	    };
	    DistinctUntilChangedObserver.prototype.error = function(e) {
	      this.o.onError(e);
	    };
	    DistinctUntilChangedObserver.prototype.completed = function () {
	      this.o.onCompleted();
	    };
	
	    return DistinctUntilChangedObserver;
	  }(AbstractObserver));
	
	  /**
	  *  Returns an observable sequence that contains only distinct contiguous elements according to the keyFn and the comparer.
	  * @param {Function} [keyFn] A function to compute the comparison key for each element. If not provided, it projects the value.
	  * @param {Function} [comparer] Equality comparer for computed key values. If not provided, defaults to an equality comparer function.
	  * @returns {Observable} An observable sequence only containing the distinct contiguous elements, based on a computed key value, from the source sequence.
	  */
	  observableProto.distinctUntilChanged = function (keyFn, comparer) {
	    comparer || (comparer = defaultComparer);
	    return new DistinctUntilChangedObservable(this, keyFn, comparer);
	  };
	
	  var TapObservable = (function(__super__) {
	    inherits(TapObservable,__super__);
	    function TapObservable(source, observerOrOnNext, onError, onCompleted) {
	      this.source = source;
	      this._oN = observerOrOnNext;
	      this._oE = onError;
	      this._oC = onCompleted;
	      __super__.call(this);
	    }
	
	    TapObservable.prototype.subscribeCore = function(o) {
	      return this.source.subscribe(new InnerObserver(o, this));
	    };
	
	    inherits(InnerObserver, AbstractObserver);
	    function InnerObserver(o, p) {
	      this.o = o;
	      this.t = !p._oN || isFunction(p._oN) ?
	        observerCreate(p._oN || noop, p._oE || noop, p._oC || noop) :
	        p._oN;
	      this.isStopped = false;
	      AbstractObserver.call(this);
	    }
	    InnerObserver.prototype.next = function(x) {
	      var res = tryCatch(this.t.onNext).call(this.t, x);
	      if (res === errorObj) { this.o.onError(res.e); }
	      this.o.onNext(x);
	    };
	    InnerObserver.prototype.error = function(err) {
	      var res = tryCatch(this.t.onError).call(this.t, err);
	      if (res === errorObj) { return this.o.onError(res.e); }
	      this.o.onError(err);
	    };
	    InnerObserver.prototype.completed = function() {
	      var res = tryCatch(this.t.onCompleted).call(this.t);
	      if (res === errorObj) { return this.o.onError(res.e); }
	      this.o.onCompleted();
	    };
	
	    return TapObservable;
	  }(ObservableBase));
	
	  /**
	  *  Invokes an action for each element in the observable sequence and invokes an action upon graceful or exceptional termination of the observable sequence.
	  *  This method can be used for debugging, logging, etc. of query behavior by intercepting the message stream to run arbitrary actions for messages on the pipeline.
	  * @param {Function | Observer} observerOrOnNext Action to invoke for each element in the observable sequence or an o.
	  * @param {Function} [onError]  Action to invoke upon exceptional termination of the observable sequence. Used if only the observerOrOnNext parameter is also a function.
	  * @param {Function} [onCompleted]  Action to invoke upon graceful termination of the observable sequence. Used if only the observerOrOnNext parameter is also a function.
	  * @returns {Observable} The source sequence with the side-effecting behavior applied.
	  */
	  observableProto['do'] = observableProto.tap = observableProto.doAction = function (observerOrOnNext, onError, onCompleted) {
	    return new TapObservable(this, observerOrOnNext, onError, onCompleted);
	  };
	
	  /**
	  *  Invokes an action for each element in the observable sequence.
	  *  This method can be used for debugging, logging, etc. of query behavior by intercepting the message stream to run arbitrary actions for messages on the pipeline.
	  * @param {Function} onNext Action to invoke for each element in the observable sequence.
	  * @param {Any} [thisArg] Object to use as this when executing callback.
	  * @returns {Observable} The source sequence with the side-effecting behavior applied.
	  */
	  observableProto.doOnNext = observableProto.tapOnNext = function (onNext, thisArg) {
	    return this.tap(typeof thisArg !== 'undefined' ? function (x) { onNext.call(thisArg, x); } : onNext);
	  };
	
	  /**
	  *  Invokes an action upon exceptional termination of the observable sequence.
	  *  This method can be used for debugging, logging, etc. of query behavior by intercepting the message stream to run arbitrary actions for messages on the pipeline.
	  * @param {Function} onError Action to invoke upon exceptional termination of the observable sequence.
	  * @param {Any} [thisArg] Object to use as this when executing callback.
	  * @returns {Observable} The source sequence with the side-effecting behavior applied.
	  */
	  observableProto.doOnError = observableProto.tapOnError = function (onError, thisArg) {
	    return this.tap(noop, typeof thisArg !== 'undefined' ? function (e) { onError.call(thisArg, e); } : onError);
	  };
	
	  /**
	  *  Invokes an action upon graceful termination of the observable sequence.
	  *  This method can be used for debugging, logging, etc. of query behavior by intercepting the message stream to run arbitrary actions for messages on the pipeline.
	  * @param {Function} onCompleted Action to invoke upon graceful termination of the observable sequence.
	  * @param {Any} [thisArg] Object to use as this when executing callback.
	  * @returns {Observable} The source sequence with the side-effecting behavior applied.
	  */
	  observableProto.doOnCompleted = observableProto.tapOnCompleted = function (onCompleted, thisArg) {
	    return this.tap(noop, null, typeof thisArg !== 'undefined' ? function () { onCompleted.call(thisArg); } : onCompleted);
	  };
	
	  var FinallyObservable = (function (__super__) {
	    inherits(FinallyObservable, __super__);
	    function FinallyObservable(source, fn, thisArg) {
	      this.source = source;
	      this._fn = bindCallback(fn, thisArg, 0);
	      __super__.call(this);
	    }
	
	    FinallyObservable.prototype.subscribeCore = function (o) {
	      var d = tryCatch(this.source.subscribe).call(this.source, o);
	      if (d === errorObj) {
	        this._fn();
	        thrower(d.e);
	      }
	
	      return new FinallyDisposable(d, this._fn);
	    };
	
	    function FinallyDisposable(s, fn) {
	      this.isDisposed = false;
	      this._s = s;
	      this._fn = fn;
	    }
	    FinallyDisposable.prototype.dispose = function () {
	      if (!this.isDisposed) {
	        var res = tryCatch(this._s.dispose).call(this._s);
	        this._fn();
	        res === errorObj && thrower(res.e);
	      }
	    };
	
	    return FinallyObservable;
	
	  }(ObservableBase));
	
	  /**
	   *  Invokes a specified action after the source observable sequence terminates gracefully or exceptionally.
	   * @param {Function} finallyAction Action to invoke after the source observable sequence terminates.
	   * @returns {Observable} Source sequence with the action-invoking termination behavior applied.
	   */
	  observableProto['finally'] = function (action, thisArg) {
	    return new FinallyObservable(this, action, thisArg);
	  };
	
	  var IgnoreElementsObservable = (function(__super__) {
	    inherits(IgnoreElementsObservable, __super__);
	
	    function IgnoreElementsObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    IgnoreElementsObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new InnerObserver(o));
	    };
	
	    function InnerObserver(o) {
	      this.o = o;
	      this.isStopped = false;
	    }
	    InnerObserver.prototype.onNext = noop;
	    InnerObserver.prototype.onError = function (err) {
	      if(!this.isStopped) {
	        this.isStopped = true;
	        this.o.onError(err);
	      }
	    };
	    InnerObserver.prototype.onCompleted = function () {
	      if(!this.isStopped) {
	        this.isStopped = true;
	        this.o.onCompleted();
	      }
	    };
	    InnerObserver.prototype.dispose = function() { this.isStopped = true; };
	    InnerObserver.prototype.fail = function (e) {
	      if (!this.isStopped) {
	        this.isStopped = true;
	        this.observer.onError(e);
	        return true;
	      }
	
	      return false;
	    };
	
	    return IgnoreElementsObservable;
	  }(ObservableBase));
	
	  /**
	   *  Ignores all elements in an observable sequence leaving only the termination messages.
	   * @returns {Observable} An empty observable sequence that signals termination, successful or exceptional, of the source sequence.
	   */
	  observableProto.ignoreElements = function () {
	    return new IgnoreElementsObservable(this);
	  };
	
	  var MaterializeObservable = (function (__super__) {
	    inherits(MaterializeObservable, __super__);
	    function MaterializeObservable(source, fn) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    MaterializeObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new MaterializeObserver(o));
	    };
	
	    return MaterializeObservable;
	  }(ObservableBase));
	
	  var MaterializeObserver = (function (__super__) {
	    inherits(MaterializeObserver, __super__);
	
	    function MaterializeObserver(o) {
	      this._o = o;
	      __super__.call(this);
	    }
	
	    MaterializeObserver.prototype.next = function (x) { this._o.onNext(notificationCreateOnNext(x)) };
	    MaterializeObserver.prototype.error = function (e) { this._o.onNext(notificationCreateOnError(e)); this._o.onCompleted(); };
	    MaterializeObserver.prototype.completed = function () { this._o.onNext(notificationCreateOnCompleted()); this._o.onCompleted(); };
	
	    return MaterializeObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Materializes the implicit notifications of an observable sequence as explicit notification values.
	   * @returns {Observable} An observable sequence containing the materialized notification values from the source sequence.
	   */
	  observableProto.materialize = function () {
	    return new MaterializeObservable(this);
	  };
	
	  /**
	   *  Repeats the observable sequence a specified number of times. If the repeat count is not specified, the sequence repeats indefinitely.
	   * @param {Number} [repeatCount]  Number of times to repeat the sequence. If not provided, repeats the sequence indefinitely.
	   * @returns {Observable} The observable sequence producing the elements of the given sequence repeatedly.
	   */
	  observableProto.repeat = function (repeatCount) {
	    return enumerableRepeat(this, repeatCount).concat();
	  };
	
	  /**
	   *  Repeats the source observable sequence the specified number of times or until it successfully terminates. If the retry count is not specified, it retries indefinitely.
	   *  Note if you encounter an error and want it to retry once, then you must use .retry(2);
	   *
	   * @example
	   *  var res = retried = retry.repeat();
	   *  var res = retried = retry.repeat(2);
	   * @param {Number} [retryCount]  Number of times to retry the sequence. If not provided, retry the sequence indefinitely.
	   * @returns {Observable} An observable sequence producing the elements of the given sequence repeatedly until it terminates successfully.
	   */
	  observableProto.retry = function (retryCount) {
	    return enumerableRepeat(this, retryCount).catchError();
	  };
	
	  function repeat(value) {
	    return {
	      '@@iterator': function () {
	        return {
	          next: function () {
	            return { done: false, value: value };
	          }
	        };
	      }
	    };
	  }
	
	  var RetryWhenObservable = (function(__super__) {
	    function createDisposable(state) {
	      return {
	        isDisposed: false,
	        dispose: function () {
	          if (!this.isDisposed) {
	            this.isDisposed = true;
	            state.isDisposed = true;
	          }
	        }
	      };
	    }
	
	    function RetryWhenObservable(source, notifier) {
	      this.source = source;
	      this._notifier = notifier;
	      __super__.call(this);
	    }
	
	    inherits(RetryWhenObservable, __super__);
	
	    RetryWhenObservable.prototype.subscribeCore = function (o) {
	      var exceptions = new Subject(),
	        notifier = new Subject(),
	        handled = this._notifier(exceptions),
	        notificationDisposable = handled.subscribe(notifier);
	
	      var e = this.source['@@iterator']();
	
	      var state = { isDisposed: false },
	        lastError,
	        subscription = new SerialDisposable();
	      var cancelable = currentThreadScheduler.scheduleRecursive(null, function (_, recurse) {
	        if (state.isDisposed) { return; }
	        var currentItem = e.next();
	
	        if (currentItem.done) {
	          if (lastError) {
	            o.onError(lastError);
	          } else {
	            o.onCompleted();
	          }
	          return;
	        }
	
	        // Check if promise
	        var currentValue = currentItem.value;
	        isPromise(currentValue) && (currentValue = observableFromPromise(currentValue));
	
	        var outer = new SingleAssignmentDisposable();
	        var inner = new SingleAssignmentDisposable();
	        subscription.setDisposable(new BinaryDisposable(inner, outer));
	        outer.setDisposable(currentValue.subscribe(
	          function(x) { o.onNext(x); },
	          function (exn) {
	            inner.setDisposable(notifier.subscribe(recurse, function(ex) {
	              o.onError(ex);
	            }, function() {
	              o.onCompleted();
	            }));
	
	            exceptions.onNext(exn);
	            outer.dispose();
	          },
	          function() { o.onCompleted(); }));
	      });
	
	      return new NAryDisposable([notificationDisposable, subscription, cancelable, createDisposable(state)]);
	    };
	
	    return RetryWhenObservable;
	  }(ObservableBase));
	
	  observableProto.retryWhen = function (notifier) {
	    return new RetryWhenObservable(repeat(this), notifier);
	  };
	
	  function repeat(value) {
	    return {
	      '@@iterator': function () {
	        return {
	          next: function () {
	            return { done: false, value: value };
	          }
	        };
	      }
	    };
	  }
	
	  var RepeatWhenObservable = (function(__super__) {
	    function createDisposable(state) {
	      return {
	        isDisposed: false,
	        dispose: function () {
	          if (!this.isDisposed) {
	            this.isDisposed = true;
	            state.isDisposed = true;
	          }
	        }
	      };
	    }
	
	    function RepeatWhenObservable(source, notifier) {
	      this.source = source;
	      this._notifier = notifier;
	      __super__.call(this);
	    }
	
	    inherits(RepeatWhenObservable, __super__);
	
	    RepeatWhenObservable.prototype.subscribeCore = function (o) {
	      var completions = new Subject(),
	        notifier = new Subject(),
	        handled = this._notifier(completions),
	        notificationDisposable = handled.subscribe(notifier);
	
	      var e = this.source['@@iterator']();
	
	      var state = { isDisposed: false },
	        lastError,
	        subscription = new SerialDisposable();
	      var cancelable = currentThreadScheduler.scheduleRecursive(null, function (_, recurse) {
	        if (state.isDisposed) { return; }
	        var currentItem = e.next();
	
	        if (currentItem.done) {
	          if (lastError) {
	            o.onError(lastError);
	          } else {
	            o.onCompleted();
	          }
	          return;
	        }
	
	        // Check if promise
	        var currentValue = currentItem.value;
	        isPromise(currentValue) && (currentValue = observableFromPromise(currentValue));
	
	        var outer = new SingleAssignmentDisposable();
	        var inner = new SingleAssignmentDisposable();
	        subscription.setDisposable(new BinaryDisposable(inner, outer));
	        outer.setDisposable(currentValue.subscribe(
	          function(x) { o.onNext(x); },
	          function (exn) { o.onError(exn); },
	          function() {
	            inner.setDisposable(notifier.subscribe(recurse, function(ex) {
	              o.onError(ex);
	            }, function() {
	              o.onCompleted();
	            }));
	
	            completions.onNext(null);
	            outer.dispose();
	          }));
	      });
	
	      return new NAryDisposable([notificationDisposable, subscription, cancelable, createDisposable(state)]);
	    };
	
	    return RepeatWhenObservable;
	  }(ObservableBase));
	
	  observableProto.repeatWhen = function (notifier) {
	    return new RepeatWhenObservable(repeat(this), notifier);
	  };
	
	  var ScanObservable = (function(__super__) {
	    inherits(ScanObservable, __super__);
	    function ScanObservable(source, accumulator, hasSeed, seed) {
	      this.source = source;
	      this.accumulator = accumulator;
	      this.hasSeed = hasSeed;
	      this.seed = seed;
	      __super__.call(this);
	    }
	
	    ScanObservable.prototype.subscribeCore = function(o) {
	      return this.source.subscribe(new ScanObserver(o,this));
	    };
	
	    return ScanObservable;
	  }(ObservableBase));
	
	  var ScanObserver = (function (__super__) {
	    inherits(ScanObserver, __super__);
	    function ScanObserver(o, parent) {
	      this._o = o;
	      this._p = parent;
	      this._fn = parent.accumulator;
	      this._hs = parent.hasSeed;
	      this._s = parent.seed;
	      this._ha = false;
	      this._a = null;
	      this._hv = false;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    ScanObserver.prototype.next = function (x) {
	      !this._hv && (this._hv = true);
	      if (this._ha) {
	        this._a = tryCatch(this._fn)(this._a, x, this._i, this._p);
	      } else {
	        this._a = this._hs ? tryCatch(this._fn)(this._s, x, this._i, this._p) : x;
	        this._ha = true;
	      }
	      if (this._a === errorObj) { return this._o.onError(this._a.e); }
	      this._o.onNext(this._a);
	      this._i++;
	    };
	
	    ScanObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    ScanObserver.prototype.completed = function () {
	      !this._hv && this._hs && this._o.onNext(this._s);
	      this._o.onCompleted();
	    };
	
	    return ScanObserver;
	  }(AbstractObserver));
	
	  /**
	  *  Applies an accumulator function over an observable sequence and returns each intermediate result. The optional seed value is used as the initial accumulator value.
	  *  For aggregation behavior with no intermediate results, see Observable.aggregate.
	  * @param {Mixed} [seed] The initial accumulator value.
	  * @param {Function} accumulator An accumulator function to be invoked on each element.
	  * @returns {Observable} An observable sequence containing the accumulated values.
	  */
	  observableProto.scan = function () {
	    var hasSeed = false, seed, accumulator = arguments[0];
	    if (arguments.length === 2) {
	      hasSeed = true;
	      seed = arguments[1];
	    }
	    return new ScanObservable(this, accumulator, hasSeed, seed);
	  };
	
	  var SkipLastObservable = (function (__super__) {
	    inherits(SkipLastObservable, __super__);
	    function SkipLastObservable(source, c) {
	      this.source = source;
	      this._c = c;
	      __super__.call(this);
	    }
	
	    SkipLastObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new SkipLastObserver(o, this._c));
	    };
	
	    return SkipLastObservable;
	  }(ObservableBase));
	
	  var SkipLastObserver = (function (__super__) {
	    inherits(SkipLastObserver, __super__);
	    function SkipLastObserver(o, c) {
	      this._o = o;
	      this._c = c;
	      this._q = [];
	      __super__.call(this);
	    }
	
	    SkipLastObserver.prototype.next = function (x) {
	      this._q.push(x);
	      this._q.length > this._c && this._o.onNext(this._q.shift());
	    };
	
	    SkipLastObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    SkipLastObserver.prototype.completed = function () {
	      this._o.onCompleted();
	    };
	
	    return SkipLastObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Bypasses a specified number of elements at the end of an observable sequence.
	   * @description
	   *  This operator accumulates a queue with a length enough to store the first `count` elements. As more elements are
	   *  received, elements are taken from the front of the queue and produced on the result sequence. This causes elements to be delayed.
	   * @param count Number of elements to bypass at the end of the source sequence.
	   * @returns {Observable} An observable sequence containing the source sequence elements except for the bypassed ones at the end.
	   */
	  observableProto.skipLast = function (count) {
	    if (count < 0) { throw new ArgumentOutOfRangeError(); }
	    return new SkipLastObservable(this, count);
	  };
	
	  /**
	   *  Prepends a sequence of values to an observable sequence with an optional scheduler and an argument list of values to prepend.
	   *  @example
	   *  var res = source.startWith(1, 2, 3);
	   *  var res = source.startWith(Rx.Scheduler.timeout, 1, 2, 3);
	   * @param {Arguments} args The specified values to prepend to the observable sequence
	   * @returns {Observable} The source sequence prepended with the specified values.
	   */
	  observableProto.startWith = function () {
	    var values, scheduler, start = 0;
	    if (!!arguments.length && isScheduler(arguments[0])) {
	      scheduler = arguments[0];
	      start = 1;
	    } else {
	      scheduler = immediateScheduler;
	    }
	    for(var args = [], i = start, len = arguments.length; i < len; i++) { args.push(arguments[i]); }
	    return enumerableOf([observableFromArray(args, scheduler), this]).concat();
	  };
	
	  var TakeLastObserver = (function (__super__) {
	    inherits(TakeLastObserver, __super__);
	    function TakeLastObserver(o, c) {
	      this._o = o;
	      this._c = c;
	      this._q = [];
	      __super__.call(this);
	    }
	
	    TakeLastObserver.prototype.next = function (x) {
	      this._q.push(x);
	      this._q.length > this._c && this._q.shift();
	    };
	
	    TakeLastObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    TakeLastObserver.prototype.completed = function () {
	      while (this._q.length > 0) { this._o.onNext(this._q.shift()); }
	      this._o.onCompleted();
	    };
	
	    return TakeLastObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Returns a specified number of contiguous elements from the end of an observable sequence.
	   * @description
	   *  This operator accumulates a buffer with a length enough to store elements count elements. Upon completion of
	   *  the source sequence, this buffer is drained on the result sequence. This causes the elements to be delayed.
	   * @param {Number} count Number of elements to take from the end of the source sequence.
	   * @returns {Observable} An observable sequence containing the specified number of elements from the end of the source sequence.
	   */
	  observableProto.takeLast = function (count) {
	    if (count < 0) { throw new ArgumentOutOfRangeError(); }
	    var source = this;
	    return new AnonymousObservable(function (o) {
	      return source.subscribe(new TakeLastObserver(o, count));
	    }, source);
	  };
	
	  var TakeLastBufferObserver = (function (__super__) {
	    inherits(TakeLastBufferObserver, __super__);
	    function TakeLastBufferObserver(o, c) {
	      this._o = o;
	      this._c = c;
	      this._q = [];
	      __super__.call(this);
	    }
	
	    TakeLastBufferObserver.prototype.next = function (x) {
	      this._q.push(x);
	      this._q.length > this._c && this._q.shift();
	    };
	
	    TakeLastBufferObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    TakeLastBufferObserver.prototype.completed = function () {
	      this._o.onNext(this._q);
	      this._o.onCompleted();
	    };
	
	    return TakeLastBufferObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Returns an array with the specified number of contiguous elements from the end of an observable sequence.
	   *
	   * @description
	   *  This operator accumulates a buffer with a length enough to store count elements. Upon completion of the
	   *  source sequence, this buffer is produced on the result sequence.
	   * @param {Number} count Number of elements to take from the end of the source sequence.
	   * @returns {Observable} An observable sequence containing a single array with the specified number of elements from the end of the source sequence.
	   */
	  observableProto.takeLastBuffer = function (count) {
	    if (count < 0) { throw new ArgumentOutOfRangeError(); }
	    var source = this;
	    return new AnonymousObservable(function (o) {
	      return source.subscribe(new TakeLastBufferObserver(o, count));
	    }, source);
	  };
	
	  /**
	   *  Projects each element of an observable sequence into zero or more windows which are produced based on element count information.
	   * @param {Number} count Length of each window.
	   * @param {Number} [skip] Number of elements to skip between creation of consecutive windows. If not specified, defaults to the count.
	   * @returns {Observable} An observable sequence of windows.
	   */
	  observableProto.windowWithCount = function (count, skip) {
	    var source = this;
	    +count || (count = 0);
	    Math.abs(count) === Infinity && (count = 0);
	    if (count <= 0) { throw new ArgumentOutOfRangeError(); }
	    skip == null && (skip = count);
	    +skip || (skip = 0);
	    Math.abs(skip) === Infinity && (skip = 0);
	
	    if (skip <= 0) { throw new ArgumentOutOfRangeError(); }
	    return new AnonymousObservable(function (observer) {
	      var m = new SingleAssignmentDisposable(),
	        refCountDisposable = new RefCountDisposable(m),
	        n = 0,
	        q = [];
	
	      function createWindow () {
	        var s = new Subject();
	        q.push(s);
	        observer.onNext(addRef(s, refCountDisposable));
	      }
	
	      createWindow();
	
	      m.setDisposable(source.subscribe(
	        function (x) {
	          for (var i = 0, len = q.length; i < len; i++) { q[i].onNext(x); }
	          var c = n - count + 1;
	          c >= 0 && c % skip === 0 && q.shift().onCompleted();
	          ++n % skip === 0 && createWindow();
	        },
	        function (e) {
	          while (q.length > 0) { q.shift().onError(e); }
	          observer.onError(e);
	        },
	        function () {
	          while (q.length > 0) { q.shift().onCompleted(); }
	          observer.onCompleted();
	        }
	      ));
	      return refCountDisposable;
	    }, source);
	  };
	
	  function concatMap(source, selector, thisArg) {
	    var selectorFunc = bindCallback(selector, thisArg, 3);
	    return source.map(function (x, i) {
	      var result = selectorFunc(x, i, source);
	      isPromise(result) && (result = observableFromPromise(result));
	      (isArrayLike(result) || isIterable(result)) && (result = observableFrom(result));
	      return result;
	    }).concatAll();
	  }
	
	  /**
	   *  One of the Following:
	   *  Projects each element of an observable sequence to an observable sequence and merges the resulting observable sequences into one observable sequence.
	   *
	   * @example
	   *  var res = source.concatMap(function (x) { return Rx.Observable.range(0, x); });
	   *  Or:
	   *  Projects each element of an observable sequence to an observable sequence, invokes the result selector for the source element and each of the corresponding inner sequence's elements, and merges the results into one observable sequence.
	   *
	   *  var res = source.concatMap(function (x) { return Rx.Observable.range(0, x); }, function (x, y) { return x + y; });
	   *  Or:
	   *  Projects each element of the source observable sequence to the other observable sequence and merges the resulting observable sequences into one observable sequence.
	   *
	   *  var res = source.concatMap(Rx.Observable.fromArray([1,2,3]));
	   * @param {Function} selector A transform function to apply to each element or an observable sequence to project each element from the
	   * source sequence onto which could be either an observable or Promise.
	   * @param {Function} [resultSelector]  A transform function to apply to each element of the intermediate sequence.
	   * @returns {Observable} An observable sequence whose elements are the result of invoking the one-to-many transform function collectionSelector on each element of the input sequence and then mapping each of those sequence elements and their corresponding source element to a result element.
	   */
	  observableProto.selectConcat = observableProto.concatMap = function (selector, resultSelector, thisArg) {
	    if (isFunction(selector) && isFunction(resultSelector)) {
	      return this.concatMap(function (x, i) {
	        var selectorResult = selector(x, i);
	        isPromise(selectorResult) && (selectorResult = observableFromPromise(selectorResult));
	        (isArrayLike(selectorResult) || isIterable(selectorResult)) && (selectorResult = observableFrom(selectorResult));
	
	        return selectorResult.map(function (y, i2) {
	          return resultSelector(x, y, i, i2);
	        });
	      });
	    }
	    return isFunction(selector) ?
	      concatMap(this, selector, thisArg) :
	      concatMap(this, function () { return selector; });
	  };
	
	  /**
	   * Projects each notification of an observable sequence to an observable sequence and concats the resulting observable sequences into one observable sequence.
	   * @param {Function} onNext A transform function to apply to each element; the second parameter of the function represents the index of the source element.
	   * @param {Function} onError A transform function to apply when an error occurs in the source sequence.
	   * @param {Function} onCompleted A transform function to apply when the end of the source sequence is reached.
	   * @param {Any} [thisArg] An optional "this" to use to invoke each transform.
	   * @returns {Observable} An observable sequence whose elements are the result of invoking the one-to-many transform function corresponding to each notification in the input sequence.
	   */
	  observableProto.concatMapObserver = observableProto.selectConcatObserver = function(onNext, onError, onCompleted, thisArg) {
	    var source = this,
	        onNextFunc = bindCallback(onNext, thisArg, 2),
	        onErrorFunc = bindCallback(onError, thisArg, 1),
	        onCompletedFunc = bindCallback(onCompleted, thisArg, 0);
	    return new AnonymousObservable(function (observer) {
	      var index = 0;
	      return source.subscribe(
	        function (x) {
	          var result;
	          try {
	            result = onNextFunc(x, index++);
	          } catch (e) {
	            observer.onError(e);
	            return;
	          }
	          isPromise(result) && (result = observableFromPromise(result));
	          observer.onNext(result);
	        },
	        function (err) {
	          var result;
	          try {
	            result = onErrorFunc(err);
	          } catch (e) {
	            observer.onError(e);
	            return;
	          }
	          isPromise(result) && (result = observableFromPromise(result));
	          observer.onNext(result);
	          observer.onCompleted();
	        },
	        function () {
	          var result;
	          try {
	            result = onCompletedFunc();
	          } catch (e) {
	            observer.onError(e);
	            return;
	          }
	          isPromise(result) && (result = observableFromPromise(result));
	          observer.onNext(result);
	          observer.onCompleted();
	        });
	    }, this).concatAll();
	  };
	
	  var DefaultIfEmptyObserver = (function (__super__) {
	    inherits(DefaultIfEmptyObserver, __super__);
	    function DefaultIfEmptyObserver(o, d) {
	      this._o = o;
	      this._d = d;
	      this._f = false;
	      __super__.call(this);
	    }
	
	    DefaultIfEmptyObserver.prototype.next = function (x) {
	      this._f = true;
	      this._o.onNext(x);
	    };
	
	    DefaultIfEmptyObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    DefaultIfEmptyObserver.prototype.completed = function () {
	      !this._f && this._o.onNext(this._d);
	      this._o.onCompleted();
	    };
	
	    return DefaultIfEmptyObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Returns the elements of the specified sequence or the specified value in a singleton sequence if the sequence is empty.
	   *
	   *  var res = obs = xs.defaultIfEmpty();
	   *  2 - obs = xs.defaultIfEmpty(false);
	   *
	   * @memberOf Observable#
	   * @param defaultValue The value to return if the sequence is empty. If not provided, this defaults to null.
	   * @returns {Observable} An observable sequence that contains the specified default value if the source is empty; otherwise, the elements of the source itself.
	   */
	    observableProto.defaultIfEmpty = function (defaultValue) {
	      var source = this;
	      defaultValue === undefined && (defaultValue = null);
	      return new AnonymousObservable(function (o) {
	        return source.subscribe(new DefaultIfEmptyObserver(o, defaultValue));
	      }, source);
	    };
	
	  // Swap out for Array.findIndex
	  function arrayIndexOfComparer(array, item, comparer) {
	    for (var i = 0, len = array.length; i < len; i++) {
	      if (comparer(array[i], item)) { return i; }
	    }
	    return -1;
	  }
	
	  function HashSet(comparer) {
	    this.comparer = comparer;
	    this.set = [];
	  }
	  HashSet.prototype.push = function(value) {
	    var retValue = arrayIndexOfComparer(this.set, value, this.comparer) === -1;
	    retValue && this.set.push(value);
	    return retValue;
	  };
	
	  var DistinctObservable = (function (__super__) {
	    inherits(DistinctObservable, __super__);
	    function DistinctObservable(source, keyFn, cmpFn) {
	      this.source = source;
	      this._keyFn = keyFn;
	      this._cmpFn = cmpFn;
	      __super__.call(this);
	    }
	
	    DistinctObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new DistinctObserver(o, this._keyFn, this._cmpFn));
	    };
	
	    return DistinctObservable;
	  }(ObservableBase));
	
	  var DistinctObserver = (function (__super__) {
	    inherits(DistinctObserver, __super__);
	    function DistinctObserver(o, keyFn, cmpFn) {
	      this._o = o;
	      this._keyFn = keyFn;
	      this._h = new HashSet(cmpFn);
	      __super__.call(this);
	    }
	
	    DistinctObserver.prototype.next = function (x) {
	      var key = x;
	      if (isFunction(this._keyFn)) {
	        key = tryCatch(this._keyFn)(x);
	        if (key === errorObj) { return this._o.onError(key.e); }
	      }
	      this._h.push(key) && this._o.onNext(x);
	    };
	
	    DistinctObserver.prototype.error = function (e) { this._o.onError(e); };
	    DistinctObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return DistinctObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Returns an observable sequence that contains only distinct elements according to the keySelector and the comparer.
	   *  Usage of this operator should be considered carefully due to the maintenance of an internal lookup structure which can grow large.
	   *
	   * @example
	   *  var res = obs = xs.distinct();
	   *  2 - obs = xs.distinct(function (x) { return x.id; });
	   *  2 - obs = xs.distinct(function (x) { return x.id; }, function (a,b) { return a === b; });
	   * @param {Function} [keySelector]  A function to compute the comparison key for each element.
	   * @param {Function} [comparer]  Used to compare items in the collection.
	   * @returns {Observable} An observable sequence only containing the distinct elements, based on a computed key value, from the source sequence.
	   */
	  observableProto.distinct = function (keySelector, comparer) {
	    comparer || (comparer = defaultComparer);
	    return new DistinctObservable(this, keySelector, comparer);
	  };
	
	  /**
	   *  Groups the elements of an observable sequence according to a specified key selector function and comparer and selects the resulting elements by using a specified function.
	   *
	   * @example
	   *  var res = observable.groupBy(function (x) { return x.id; });
	   *  2 - observable.groupBy(function (x) { return x.id; }), function (x) { return x.name; });
	   *  3 - observable.groupBy(function (x) { return x.id; }), function (x) { return x.name; }, function (x) { return x.toString(); });
	   * @param {Function} keySelector A function to extract the key for each element.
	   * @param {Function} [elementSelector]  A function to map each source element to an element in an observable group.
	   * @returns {Observable} A sequence of observable groups, each of which corresponds to a unique key value, containing all elements that share that same key value.
	   */
	  observableProto.groupBy = function (keySelector, elementSelector) {
	    return this.groupByUntil(keySelector, elementSelector, observableNever);
	  };
	
	    /**
	     *  Groups the elements of an observable sequence according to a specified key selector function.
	     *  A duration selector function is used to control the lifetime of groups. When a group expires, it receives an OnCompleted notification. When a new element with the same
	     *  key value as a reclaimed group occurs, the group will be reborn with a new lifetime request.
	     *
	     * @example
	     *  var res = observable.groupByUntil(function (x) { return x.id; }, null,  function () { return Rx.Observable.never(); });
	     *  2 - observable.groupBy(function (x) { return x.id; }), function (x) { return x.name; },  function () { return Rx.Observable.never(); });
	     *  3 - observable.groupBy(function (x) { return x.id; }), function (x) { return x.name; },  function () { return Rx.Observable.never(); }, function (x) { return x.toString(); });
	     * @param {Function} keySelector A function to extract the key for each element.
	     * @param {Function} durationSelector A function to signal the expiration of a group.
	     * @returns {Observable}
	     *  A sequence of observable groups, each of which corresponds to a unique key value, containing all elements that share that same key value.
	     *  If a group's lifetime expires, a new group with the same key value can be created once an element with such a key value is encoutered.
	     *
	     */
	    observableProto.groupByUntil = function (keySelector, elementSelector, durationSelector) {
	      var source = this;
	      return new AnonymousObservable(function (o) {
	        var map = new Map(),
	          groupDisposable = new CompositeDisposable(),
	          refCountDisposable = new RefCountDisposable(groupDisposable),
	          handleError = function (e) { return function (item) { item.onError(e); }; };
	
	        groupDisposable.add(
	          source.subscribe(function (x) {
	            var key = tryCatch(keySelector)(x);
	            if (key === errorObj) {
	              map.forEach(handleError(key.e));
	              return o.onError(key.e);
	            }
	
	            var fireNewMapEntry = false, writer = map.get(key);
	            if (writer === undefined) {
	              writer = new Subject();
	              map.set(key, writer);
	              fireNewMapEntry = true;
	            }
	
	            if (fireNewMapEntry) {
	              var group = new GroupedObservable(key, writer, refCountDisposable),
	                durationGroup = new GroupedObservable(key, writer);
	              var duration = tryCatch(durationSelector)(durationGroup);
	              if (duration === errorObj) {
	                map.forEach(handleError(duration.e));
	                return o.onError(duration.e);
	              }
	
	              o.onNext(group);
	
	              var md = new SingleAssignmentDisposable();
	              groupDisposable.add(md);
	
	              md.setDisposable(duration.take(1).subscribe(
	                noop,
	                function (e) {
	                  map.forEach(handleError(e));
	                  o.onError(e);
	                },
	                function () {
	                  if (map['delete'](key)) { writer.onCompleted(); }
	                  groupDisposable.remove(md);
	                }));
	            }
	
	            var element = x;
	            if (isFunction(elementSelector)) {
	              element = tryCatch(elementSelector)(x);
	              if (element === errorObj) {
	                map.forEach(handleError(element.e));
	                return o.onError(element.e);
	              }
	            }
	
	            writer.onNext(element);
	        }, function (e) {
	          map.forEach(handleError(e));
	          o.onError(e);
	        }, function () {
	          map.forEach(function (item) { item.onCompleted(); });
	          o.onCompleted();
	        }));
	
	      return refCountDisposable;
	    }, source);
	  };
	
	  var MapObservable = (function (__super__) {
	    inherits(MapObservable, __super__);
	
	    function MapObservable(source, selector, thisArg) {
	      this.source = source;
	      this.selector = bindCallback(selector, thisArg, 3);
	      __super__.call(this);
	    }
	
	    function innerMap(selector, self) {
	      return function (x, i, o) { return selector.call(this, self.selector(x, i, o), i, o); };
	    }
	
	    MapObservable.prototype.internalMap = function (selector, thisArg) {
	      return new MapObservable(this.source, innerMap(selector, this), thisArg);
	    };
	
	    MapObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new InnerObserver(o, this.selector, this));
	    };
	
	    inherits(InnerObserver, AbstractObserver);
	    function InnerObserver(o, selector, source) {
	      this.o = o;
	      this.selector = selector;
	      this.source = source;
	      this.i = 0;
	      AbstractObserver.call(this);
	    }
	
	    InnerObserver.prototype.next = function(x) {
	      var result = tryCatch(this.selector)(x, this.i++, this.source);
	      if (result === errorObj) { return this.o.onError(result.e); }
	      this.o.onNext(result);
	    };
	
	    InnerObserver.prototype.error = function (e) {
	      this.o.onError(e);
	    };
	
	    InnerObserver.prototype.completed = function () {
	      this.o.onCompleted();
	    };
	
	    return MapObservable;
	
	  }(ObservableBase));
	
	  /**
	  * Projects each element of an observable sequence into a new form by incorporating the element's index.
	  * @param {Function} selector A transform function to apply to each source element; the second parameter of the function represents the index of the source element.
	  * @param {Any} [thisArg] Object to use as this when executing callback.
	  * @returns {Observable} An observable sequence whose elements are the result of invoking the transform function on each element of source.
	  */
	  observableProto.map = observableProto.select = function (selector, thisArg) {
	    var selectorFn = typeof selector === 'function' ? selector : function () { return selector; };
	    return this instanceof MapObservable ?
	      this.internalMap(selectorFn, thisArg) :
	      new MapObservable(this, selectorFn, thisArg);
	  };
	
	  function plucker(args, len) {
	    return function mapper(x) {
	      var currentProp = x;
	      for (var i = 0; i < len; i++) {
	        var p = currentProp[args[i]];
	        if (typeof p !== 'undefined') {
	          currentProp = p;
	        } else {
	          return undefined;
	        }
	      }
	      return currentProp;
	    };
	  }
	
	  /**
	   * Retrieves the value of a specified nested property from all elements in
	   * the Observable sequence.
	   * @param {Arguments} arguments The nested properties to pluck.
	   * @returns {Observable} Returns a new Observable sequence of property values.
	   */
	  observableProto.pluck = function () {
	    var len = arguments.length, args = new Array(len);
	    if (len === 0) { throw new Error('List of properties cannot be empty.'); }
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    return this.map(plucker(args, len));
	  };
	
	observableProto.flatMap = observableProto.selectMany = function(selector, resultSelector, thisArg) {
	    return new FlatMapObservable(this, selector, resultSelector, thisArg).mergeAll();
	};
	
	  /**
	   * Projects each notification of an observable sequence to an observable sequence and merges the resulting observable sequences into one observable sequence.
	   * @param {Function} onNext A transform function to apply to each element; the second parameter of the function represents the index of the source element.
	   * @param {Function} onError A transform function to apply when an error occurs in the source sequence.
	   * @param {Function} onCompleted A transform function to apply when the end of the source sequence is reached.
	   * @param {Any} [thisArg] An optional "this" to use to invoke each transform.
	   * @returns {Observable} An observable sequence whose elements are the result of invoking the one-to-many transform function corresponding to each notification in the input sequence.
	   */
	  observableProto.flatMapObserver = observableProto.selectManyObserver = function (onNext, onError, onCompleted, thisArg) {
	    var source = this;
	    return new AnonymousObservable(function (observer) {
	      var index = 0;
	
	      return source.subscribe(
	        function (x) {
	          var result;
	          try {
	            result = onNext.call(thisArg, x, index++);
	          } catch (e) {
	            observer.onError(e);
	            return;
	          }
	          isPromise(result) && (result = observableFromPromise(result));
	          observer.onNext(result);
	        },
	        function (err) {
	          var result;
	          try {
	            result = onError.call(thisArg, err);
	          } catch (e) {
	            observer.onError(e);
	            return;
	          }
	          isPromise(result) && (result = observableFromPromise(result));
	          observer.onNext(result);
	          observer.onCompleted();
	        },
	        function () {
	          var result;
	          try {
	            result = onCompleted.call(thisArg);
	          } catch (e) {
	            observer.onError(e);
	            return;
	          }
	          isPromise(result) && (result = observableFromPromise(result));
	          observer.onNext(result);
	          observer.onCompleted();
	        });
	    }, source).mergeAll();
	  };
	
	Rx.Observable.prototype.flatMapLatest = function(selector, resultSelector, thisArg) {
	    return new FlatMapObservable(this, selector, resultSelector, thisArg).switchLatest();
	};
	  var SkipObservable = (function(__super__) {
	    inherits(SkipObservable, __super__);
	    function SkipObservable(source, count) {
	      this.source = source;
	      this._count = count;
	      __super__.call(this);
	    }
	
	    SkipObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new SkipObserver(o, this._count));
	    };
	
	    function SkipObserver(o, c) {
	      this._o = o;
	      this._r = c;
	      AbstractObserver.call(this);
	    }
	
	    inherits(SkipObserver, AbstractObserver);
	
	    SkipObserver.prototype.next = function (x) {
	      if (this._r <= 0) {
	        this._o.onNext(x);
	      } else {
	        this._r--;
	      }
	    };
	    SkipObserver.prototype.error = function(e) { this._o.onError(e); };
	    SkipObserver.prototype.completed = function() { this._o.onCompleted(); };
	
	    return SkipObservable;
	  }(ObservableBase));
	
	  /**
	   * Bypasses a specified number of elements in an observable sequence and then returns the remaining elements.
	   * @param {Number} count The number of elements to skip before returning the remaining elements.
	   * @returns {Observable} An observable sequence that contains the elements that occur after the specified index in the input sequence.
	   */
	  observableProto.skip = function (count) {
	    if (count < 0) { throw new ArgumentOutOfRangeError(); }
	    return new SkipObservable(this, count);
	  };
	
	  var SkipWhileObservable = (function (__super__) {
	    inherits(SkipWhileObservable, __super__);
	    function SkipWhileObservable(source, fn) {
	      this.source = source;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    SkipWhileObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new SkipWhileObserver(o, this));
	    };
	
	    return SkipWhileObservable;
	  }(ObservableBase));
	
	  var SkipWhileObserver = (function (__super__) {
	    inherits(SkipWhileObserver, __super__);
	
	    function SkipWhileObserver(o, p) {
	      this._o = o;
	      this._p = p;
	      this._i = 0;
	      this._r = false;
	      __super__.call(this);
	    }
	
	    SkipWhileObserver.prototype.next = function (x) {
	      if (!this._r) {
	        var res = tryCatch(this._p._fn)(x, this._i++, this._p);
	        if (res === errorObj) { return this._o.onError(res.e); }
	        this._r = !res;
	      }
	      this._r && this._o.onNext(x);
	    };
	    SkipWhileObserver.prototype.error = function (e) { this._o.onError(e); };
	    SkipWhileObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return SkipWhileObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Bypasses elements in an observable sequence as long as a specified condition is true and then returns the remaining elements.
	   *  The element's index is used in the logic of the predicate function.
	   *
	   *  var res = source.skipWhile(function (value) { return value < 10; });
	   *  var res = source.skipWhile(function (value, index) { return value < 10 || index < 10; });
	   * @param {Function} predicate A function to test each element for a condition; the second parameter of the function represents the index of the source element.
	   * @param {Any} [thisArg] Object to use as this when executing callback.
	   * @returns {Observable} An observable sequence that contains the elements from the input sequence starting at the first element in the linear series that does not pass the test specified by predicate.
	   */
	  observableProto.skipWhile = function (predicate, thisArg) {
	    var fn = bindCallback(predicate, thisArg, 3);
	    return new SkipWhileObservable(this, fn);
	  };
	
	  var TakeObservable = (function(__super__) {
	    inherits(TakeObservable, __super__);
	    function TakeObservable(source, count) {
	      this.source = source;
	      this._count = count;
	      __super__.call(this);
	    }
	
	    TakeObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new TakeObserver(o, this._count));
	    };
	
	    function TakeObserver(o, c) {
	      this._o = o;
	      this._c = c;
	      this._r = c;
	      AbstractObserver.call(this);
	    }
	
	    inherits(TakeObserver, AbstractObserver);
	
	    TakeObserver.prototype.next = function (x) {
	      if (this._r-- > 0) {
	        this._o.onNext(x);
	        this._r <= 0 && this._o.onCompleted();
	      }
	    };
	
	    TakeObserver.prototype.error = function (e) { this._o.onError(e); };
	    TakeObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return TakeObservable;
	  }(ObservableBase));
	
	  /**
	   *  Returns a specified number of contiguous elements from the start of an observable sequence, using the specified scheduler for the edge case of take(0).
	   * @param {Number} count The number of elements to return.
	   * @param {Scheduler} [scheduler] Scheduler used to produce an OnCompleted message in case <paramref name="count count</paramref> is set to 0.
	   * @returns {Observable} An observable sequence that contains the specified number of elements from the start of the input sequence.
	   */
	  observableProto.take = function (count, scheduler) {
	    if (count < 0) { throw new ArgumentOutOfRangeError(); }
	    if (count === 0) { return observableEmpty(scheduler); }
	    return new TakeObservable(this, count);
	  };
	
	  var TakeWhileObservable = (function (__super__) {
	    inherits(TakeWhileObservable, __super__);
	    function TakeWhileObservable(source, fn) {
	      this.source = source;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    TakeWhileObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new TakeWhileObserver(o, this));
	    };
	
	    return TakeWhileObservable;
	  }(ObservableBase));
	
	  var TakeWhileObserver = (function (__super__) {
	    inherits(TakeWhileObserver, __super__);
	
	    function TakeWhileObserver(o, p) {
	      this._o = o;
	      this._p = p;
	      this._i = 0;
	      this._r = true;
	      __super__.call(this);
	    }
	
	    TakeWhileObserver.prototype.next = function (x) {
	      if (this._r) {
	        this._r = tryCatch(this._p._fn)(x, this._i++, this._p);
	        if (this._r === errorObj) { return this._o.onError(this._r.e); }
	      }
	      if (this._r) {
	        this._o.onNext(x);
	      } else {
	        this._o.onCompleted();
	      }
	    };
	    TakeWhileObserver.prototype.error = function (e) { this._o.onError(e); };
	    TakeWhileObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return TakeWhileObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Returns elements from an observable sequence as long as a specified condition is true.
	   *  The element's index is used in the logic of the predicate function.
	   * @param {Function} predicate A function to test each element for a condition; the second parameter of the function represents the index of the source element.
	   * @param {Any} [thisArg] Object to use as this when executing callback.
	   * @returns {Observable} An observable sequence that contains the elements from the input sequence that occur before the element at which the test no longer passes.
	   */
	  observableProto.takeWhile = function (predicate, thisArg) {
	    var fn = bindCallback(predicate, thisArg, 3);
	    return new TakeWhileObservable(this, fn);
	  };
	
	  var FilterObservable = (function (__super__) {
	    inherits(FilterObservable, __super__);
	
	    function FilterObservable(source, predicate, thisArg) {
	      this.source = source;
	      this.predicate = bindCallback(predicate, thisArg, 3);
	      __super__.call(this);
	    }
	
	    FilterObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new InnerObserver(o, this.predicate, this));
	    };
	
	    function innerPredicate(predicate, self) {
	      return function(x, i, o) { return self.predicate(x, i, o) && predicate.call(this, x, i, o); }
	    }
	
	    FilterObservable.prototype.internalFilter = function(predicate, thisArg) {
	      return new FilterObservable(this.source, innerPredicate(predicate, this), thisArg);
	    };
	
	    inherits(InnerObserver, AbstractObserver);
	    function InnerObserver(o, predicate, source) {
	      this.o = o;
	      this.predicate = predicate;
	      this.source = source;
	      this.i = 0;
	      AbstractObserver.call(this);
	    }
	
	    InnerObserver.prototype.next = function(x) {
	      var shouldYield = tryCatch(this.predicate)(x, this.i++, this.source);
	      if (shouldYield === errorObj) {
	        return this.o.onError(shouldYield.e);
	      }
	      shouldYield && this.o.onNext(x);
	    };
	
	    InnerObserver.prototype.error = function (e) {
	      this.o.onError(e);
	    };
	
	    InnerObserver.prototype.completed = function () {
	      this.o.onCompleted();
	    };
	
	    return FilterObservable;
	
	  }(ObservableBase));
	
	  /**
	  *  Filters the elements of an observable sequence based on a predicate by incorporating the element's index.
	  * @param {Function} predicate A function to test each source element for a condition; the second parameter of the function represents the index of the source element.
	  * @param {Any} [thisArg] Object to use as this when executing callback.
	  * @returns {Observable} An observable sequence that contains elements from the input sequence that satisfy the condition.
	  */
	  observableProto.filter = observableProto.where = function (predicate, thisArg) {
	    return this instanceof FilterObservable ? this.internalFilter(predicate, thisArg) :
	      new FilterObservable(this, predicate, thisArg);
	  };
	
	  var ExtremaByObservable = (function (__super__) {
	    inherits(ExtremaByObservable, __super__);
	    function ExtremaByObservable(source, k, c) {
	      this.source = source;
	      this._k = k;
	      this._c = c;
	      __super__.call(this);
	    }
	
	    ExtremaByObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new ExtremaByObserver(o, this._k, this._c));
	    };
	
	    return ExtremaByObservable;
	  }(ObservableBase));
	
	  var ExtremaByObserver = (function (__super__) {
	    inherits(ExtremaByObserver, __super__);
	    function ExtremaByObserver(o, k, c) {
	      this._o = o;
	      this._k = k;
	      this._c = c;
	      this._v = null;
	      this._hv = false;
	      this._l = [];
	      __super__.call(this);
	    }
	
	    ExtremaByObserver.prototype.next = function (x) {
	      var key = tryCatch(this._k)(x);
	      if (key === errorObj) { return this._o.onError(key.e); }
	      var comparison = 0;
	      if (!this._hv) {
	        this._hv = true;
	        this._v = key;
	      } else {
	        comparison = tryCatch(this._c)(key, this._v);
	        if (comparison === errorObj) { return this._o.onError(comparison.e); }
	      }
	      if (comparison > 0) {
	        this._v = key;
	        this._l = [];
	      }
	      if (comparison >= 0) { this._l.push(x); }
	    };
	
	    ExtremaByObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    ExtremaByObserver.prototype.completed = function () {
	      this._o.onNext(this._l);
	      this._o.onCompleted();
	    };
	
	    return ExtremaByObserver;
	  }(AbstractObserver));
	
	  function firstOnly(x) {
	    if (x.length === 0) { throw new EmptyError(); }
	    return x[0];
	  }
	
	  var ReduceObservable = (function(__super__) {
	    inherits(ReduceObservable, __super__);
	    function ReduceObservable(source, accumulator, hasSeed, seed) {
	      this.source = source;
	      this.accumulator = accumulator;
	      this.hasSeed = hasSeed;
	      this.seed = seed;
	      __super__.call(this);
	    }
	
	    ReduceObservable.prototype.subscribeCore = function(observer) {
	      return this.source.subscribe(new ReduceObserver(observer,this));
	    };
	
	    return ReduceObservable;
	  }(ObservableBase));
	
	  var ReduceObserver = (function (__super__) {
	    inherits(ReduceObserver, __super__);
	    function ReduceObserver(o, parent) {
	      this._o = o;
	      this._p = parent;
	      this._fn = parent.accumulator;
	      this._hs = parent.hasSeed;
	      this._s = parent.seed;
	      this._ha = false;
	      this._a = null;
	      this._hv = false;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    ReduceObserver.prototype.next = function (x) {
	      !this._hv && (this._hv = true);
	      if (this._ha) {
	        this._a = tryCatch(this._fn)(this._a, x, this._i, this._p);
	      } else {
	        this._a = this._hs ? tryCatch(this._fn)(this._s, x, this._i, this._p) : x;
	        this._ha = true;
	      }
	      if (this._a === errorObj) { return this._o.onError(this._a.e); }
	      this._i++;
	    };
	
	    ReduceObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    ReduceObserver.prototype.completed = function () {
	      this._hv && this._o.onNext(this._a);
	      !this._hv && this._hs && this._o.onNext(this._s);
	      !this._hv && !this._hs && this._o.onError(new EmptyError());
	      this._o.onCompleted();
	    };
	
	    return ReduceObserver;
	  }(AbstractObserver));
	
	  /**
	  * Applies an accumulator function over an observable sequence, returning the result of the aggregation as a single element in the result sequence. The specified seed value is used as the initial accumulator value.
	  * For aggregation behavior with incremental intermediate results, see Observable.scan.
	  * @param {Function} accumulator An accumulator function to be invoked on each element.
	  * @param {Any} [seed] The initial accumulator value.
	  * @returns {Observable} An observable sequence containing a single element with the final accumulator value.
	  */
	  observableProto.reduce = function () {
	    var hasSeed = false, seed, accumulator = arguments[0];
	    if (arguments.length === 2) {
	      hasSeed = true;
	      seed = arguments[1];
	    }
	    return new ReduceObservable(this, accumulator, hasSeed, seed);
	  };
	
	  var SomeObservable = (function (__super__) {
	    inherits(SomeObservable, __super__);
	    function SomeObservable(source, fn) {
	      this.source = source;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    SomeObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new SomeObserver(o, this._fn, this.source));
	    };
	
	    return SomeObservable;
	  }(ObservableBase));
	
	  var SomeObserver = (function (__super__) {
	    inherits(SomeObserver, __super__);
	
	    function SomeObserver(o, fn, s) {
	      this._o = o;
	      this._fn = fn;
	      this._s = s;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    SomeObserver.prototype.next = function (x) {
	      var result = tryCatch(this._fn)(x, this._i++, this._s);
	      if (result === errorObj) { return this._o.onError(result.e); }
	      if (Boolean(result)) {
	        this._o.onNext(true);
	        this._o.onCompleted();
	      }
	    };
	    SomeObserver.prototype.error = function (e) { this._o.onError(e); };
	    SomeObserver.prototype.completed = function () {
	      this._o.onNext(false);
	      this._o.onCompleted();
	    };
	
	    return SomeObserver;
	  }(AbstractObserver));
	
	  /**
	   * Determines whether any element of an observable sequence satisfies a condition if present, else if any items are in the sequence.
	   * @param {Function} [predicate] A function to test each element for a condition.
	   * @returns {Observable} An observable sequence containing a single element determining whether any elements in the source sequence pass the test in the specified predicate if given, else if any items are in the sequence.
	   */
	  observableProto.some = function (predicate, thisArg) {
	    var fn = bindCallback(predicate, thisArg, 3);
	    return new SomeObservable(this, fn);
	  };
	
	  var IsEmptyObservable = (function (__super__) {
	    inherits(IsEmptyObservable, __super__);
	    function IsEmptyObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    IsEmptyObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new IsEmptyObserver(o));
	    };
	
	    return IsEmptyObservable;
	  }(ObservableBase));
	
	  var IsEmptyObserver = (function(__super__) {
	    inherits(IsEmptyObserver, __super__);
	    function IsEmptyObserver(o) {
	      this._o = o;
	      __super__.call(this);
	    }
	
	    IsEmptyObserver.prototype.next = function () {
	      this._o.onNext(false);
	      this._o.onCompleted();
	    };
	    IsEmptyObserver.prototype.error = function (e) { this._o.onError(e); };
	    IsEmptyObserver.prototype.completed = function () {
	      this._o.onNext(true);
	      this._o.onCompleted();
	    };
	
	    return IsEmptyObserver;
	  }(AbstractObserver));
	
	  /**
	   * Determines whether an observable sequence is empty.
	   * @returns {Observable} An observable sequence containing a single element determining whether the source sequence is empty.
	   */
	  observableProto.isEmpty = function () {
	    return new IsEmptyObservable(this);
	  };
	
	  var EveryObservable = (function (__super__) {
	    inherits(EveryObservable, __super__);
	    function EveryObservable(source, fn) {
	      this.source = source;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    EveryObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new EveryObserver(o, this._fn, this.source));
	    };
	
	    return EveryObservable;
	  }(ObservableBase));
	
	  var EveryObserver = (function (__super__) {
	    inherits(EveryObserver, __super__);
	
	    function EveryObserver(o, fn, s) {
	      this._o = o;
	      this._fn = fn;
	      this._s = s;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    EveryObserver.prototype.next = function (x) {
	      var result = tryCatch(this._fn)(x, this._i++, this._s);
	      if (result === errorObj) { return this._o.onError(result.e); }
	      if (!Boolean(result)) {
	        this._o.onNext(false);
	        this._o.onCompleted();
	      }
	    };
	    EveryObserver.prototype.error = function (e) { this._o.onError(e); };
	    EveryObserver.prototype.completed = function () {
	      this._o.onNext(true);
	      this._o.onCompleted();
	    };
	
	    return EveryObserver;
	  }(AbstractObserver));
	
	  /**
	   * Determines whether all elements of an observable sequence satisfy a condition.
	   * @param {Function} [predicate] A function to test each element for a condition.
	   * @param {Any} [thisArg] Object to use as this when executing callback.
	   * @returns {Observable} An observable sequence containing a single element determining whether all elements in the source sequence pass the test in the specified predicate.
	   */
	  observableProto.every = function (predicate, thisArg) {
	    var fn = bindCallback(predicate, thisArg, 3);
	    return new EveryObservable(this, fn);
	  };
	
	  var IncludesObservable = (function (__super__) {
	    inherits(IncludesObservable, __super__);
	    function IncludesObservable(source, elem, idx) {
	      var n = +idx || 0;
	      Math.abs(n) === Infinity && (n = 0);
	
	      this.source = source;
	      this._elem = elem;
	      this._n = n;
	      __super__.call(this);
	    }
	
	    IncludesObservable.prototype.subscribeCore = function (o) {
	      if (this._n < 0) {
	        o.onNext(false);
	        o.onCompleted();
	        return disposableEmpty;
	      }
	
	      return this.source.subscribe(new IncludesObserver(o, this._elem, this._n));
	    };
	
	    return IncludesObservable;
	  }(ObservableBase));
	
	  var IncludesObserver = (function (__super__) {
	    inherits(IncludesObserver, __super__);
	    function IncludesObserver(o, elem, n) {
	      this._o = o;
	      this._elem = elem;
	      this._n = n;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    function comparer(a, b) {
	      return (a === 0 && b === 0) || (a === b || (isNaN(a) && isNaN(b)));
	    }
	
	    IncludesObserver.prototype.next = function (x) {
	      if (this._i++ >= this._n && comparer(x, this._elem)) {
	        this._o.onNext(true);
	        this._o.onCompleted();
	      }
	    };
	    IncludesObserver.prototype.error = function (e) { this._o.onError(e); };
	    IncludesObserver.prototype.completed = function () { this._o.onNext(false); this._o.onCompleted(); };
	
	    return IncludesObserver;
	  }(AbstractObserver));
	
	  /**
	   * Determines whether an observable sequence includes a specified element with an optional equality comparer.
	   * @param searchElement The value to locate in the source sequence.
	   * @param {Number} [fromIndex] An equality comparer to compare elements.
	   * @returns {Observable} An observable sequence containing a single element determining whether the source sequence includes an element that has the specified value from the given index.
	   */
	  observableProto.includes = function (searchElement, fromIndex) {
	    return new IncludesObservable(this, searchElement, fromIndex);
	  };
	
	  var CountObservable = (function (__super__) {
	    inherits(CountObservable, __super__);
	    function CountObservable(source, fn) {
	      this.source = source;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    CountObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new CountObserver(o, this._fn, this.source));
	    };
	
	    return CountObservable;
	  }(ObservableBase));
	
	  var CountObserver = (function (__super__) {
	    inherits(CountObserver, __super__);
	
	    function CountObserver(o, fn, s) {
	      this._o = o;
	      this._fn = fn;
	      this._s = s;
	      this._i = 0;
	      this._c = 0;
	      __super__.call(this);
	    }
	
	    CountObserver.prototype.next = function (x) {
	      if (this._fn) {
	        var result = tryCatch(this._fn)(x, this._i++, this._s);
	        if (result === errorObj) { return this._o.onError(result.e); }
	        Boolean(result) && (this._c++);
	      } else {
	        this._c++;
	      }
	    };
	    CountObserver.prototype.error = function (e) { this._o.onError(e); };
	    CountObserver.prototype.completed = function () {
	      this._o.onNext(this._c);
	      this._o.onCompleted();
	    };
	
	    return CountObserver;
	  }(AbstractObserver));
	
	  /**
	   * Returns an observable sequence containing a value that represents how many elements in the specified observable sequence satisfy a condition if provided, else the count of items.
	   * @example
	   * res = source.count();
	   * res = source.count(function (x) { return x > 3; });
	   * @param {Function} [predicate]A function to test each element for a condition.
	   * @param {Any} [thisArg] Object to use as this when executing callback.
	   * @returns {Observable} An observable sequence containing a single element with a number that represents how many elements in the input sequence satisfy the condition in the predicate function if provided, else the count of items in the sequence.
	   */
	  observableProto.count = function (predicate, thisArg) {
	    var fn = bindCallback(predicate, thisArg, 3);
	    return new CountObservable(this, fn);
	  };
	
	  var IndexOfObservable = (function (__super__) {
	    inherits(IndexOfObservable, __super__);
	    function IndexOfObservable(source, e, n) {
	      this.source = source;
	      this._e = e;
	      this._n = n;
	      __super__.call(this);
	    }
	
	    IndexOfObservable.prototype.subscribeCore = function (o) {
	      if (this._n < 0) {
	        o.onNext(-1);
	        o.onCompleted();
	        return disposableEmpty;
	      }
	
	      return this.source.subscribe(new IndexOfObserver(o, this._e, this._n));
	    };
	
	    return IndexOfObservable;
	  }(ObservableBase));
	
	  var IndexOfObserver = (function (__super__) {
	    inherits(IndexOfObserver, __super__);
	    function IndexOfObserver(o, e, n) {
	      this._o = o;
	      this._e = e;
	      this._n = n;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    IndexOfObserver.prototype.next = function (x) {
	      if (this._i >= this._n && x === this._e) {
	        this._o.onNext(this._i);
	        this._o.onCompleted();
	      }
	      this._i++;
	    };
	    IndexOfObserver.prototype.error = function (e) { this._o.onError(e); };
	    IndexOfObserver.prototype.completed = function () { this._o.onNext(-1); this._o.onCompleted(); };
	
	    return IndexOfObserver;
	  }(AbstractObserver));
	
	  /**
	   * Returns the first index at which a given element can be found in the observable sequence, or -1 if it is not present.
	   * @param {Any} searchElement Element to locate in the array.
	   * @param {Number} [fromIndex] The index to start the search.  If not specified, defaults to 0.
	   * @returns {Observable} And observable sequence containing the first index at which a given element can be found in the observable sequence, or -1 if it is not present.
	   */
	  observableProto.indexOf = function(searchElement, fromIndex) {
	    var n = +fromIndex || 0;
	    Math.abs(n) === Infinity && (n = 0);
	    return new IndexOfObservable(this, searchElement, n);
	  };
	
	  var SumObservable = (function (__super__) {
	    inherits(SumObservable, __super__);
	    function SumObservable(source, fn) {
	      this.source = source;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    SumObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new SumObserver(o, this._fn, this.source));
	    };
	
	    return SumObservable;
	  }(ObservableBase));
	
	  var SumObserver = (function (__super__) {
	    inherits(SumObserver, __super__);
	
	    function SumObserver(o, fn, s) {
	      this._o = o;
	      this._fn = fn;
	      this._s = s;
	      this._i = 0;
	      this._c = 0;
	      __super__.call(this);
	    }
	
	    SumObserver.prototype.next = function (x) {
	      if (this._fn) {
	        var result = tryCatch(this._fn)(x, this._i++, this._s);
	        if (result === errorObj) { return this._o.onError(result.e); }
	        this._c += result;
	      } else {
	        this._c += x;
	      }
	    };
	    SumObserver.prototype.error = function (e) { this._o.onError(e); };
	    SumObserver.prototype.completed = function () {
	      this._o.onNext(this._c);
	      this._o.onCompleted();
	    };
	
	    return SumObserver;
	  }(AbstractObserver));
	
	  /**
	   * Computes the sum of a sequence of values that are obtained by invoking an optional transform function on each element of the input sequence, else if not specified computes the sum on each item in the sequence.
	   * @param {Function} [selector] A transform function to apply to each element.
	   * @param {Any} [thisArg] Object to use as this when executing callback.
	   * @returns {Observable} An observable sequence containing a single element with the sum of the values in the source sequence.
	   */
	  observableProto.sum = function (keySelector, thisArg) {
	    var fn = bindCallback(keySelector, thisArg, 3);
	    return new SumObservable(this, fn);
	  };
	
	  /**
	   * Returns the elements in an observable sequence with the minimum key value according to the specified comparer.
	   * @example
	   * var res = source.minBy(function (x) { return x.value; });
	   * var res = source.minBy(function (x) { return x.value; }, function (x, y) { return x - y; });
	   * @param {Function} keySelector Key selector function.
	   * @param {Function} [comparer] Comparer used to compare key values.
	   * @returns {Observable} An observable sequence containing a list of zero or more elements that have a minimum key value.
	   */
	  observableProto.minBy = function (keySelector, comparer) {
	    comparer || (comparer = defaultSubComparer);
	    return new ExtremaByObservable(this, keySelector, function (x, y) { return comparer(x, y) * -1; });
	  };
	
	  /**
	   * Returns the minimum element in an observable sequence according to the optional comparer else a default greater than less than check.
	   * @example
	   * var res = source.min();
	   * var res = source.min(function (x, y) { return x.value - y.value; });
	   * @param {Function} [comparer] Comparer used to compare elements.
	   * @returns {Observable} An observable sequence containing a single element with the minimum element in the source sequence.
	   */
	  observableProto.min = function (comparer) {
	    return this.minBy(identity, comparer).map(firstOnly);
	  };
	
	  /**
	   * Returns the elements in an observable sequence with the maximum  key value according to the specified comparer.
	   * @example
	   * var res = source.maxBy(function (x) { return x.value; });
	   * var res = source.maxBy(function (x) { return x.value; }, function (x, y) { return x - y;; });
	   * @param {Function} keySelector Key selector function.
	   * @param {Function} [comparer]  Comparer used to compare key values.
	   * @returns {Observable} An observable sequence containing a list of zero or more elements that have a maximum key value.
	   */
	  observableProto.maxBy = function (keySelector, comparer) {
	    comparer || (comparer = defaultSubComparer);
	    return new ExtremaByObservable(this, keySelector, comparer);
	  };
	
	  /**
	   * Returns the maximum value in an observable sequence according to the specified comparer.
	   * @example
	   * var res = source.max();
	   * var res = source.max(function (x, y) { return x.value - y.value; });
	   * @param {Function} [comparer] Comparer used to compare elements.
	   * @returns {Observable} An observable sequence containing a single element with the maximum element in the source sequence.
	   */
	  observableProto.max = function (comparer) {
	    return this.maxBy(identity, comparer).map(firstOnly);
	  };
	
	  var AverageObservable = (function (__super__) {
	    inherits(AverageObservable, __super__);
	    function AverageObservable(source, fn) {
	      this.source = source;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    AverageObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new AverageObserver(o, this._fn, this.source));
	    };
	
	    return AverageObservable;
	  }(ObservableBase));
	
	  var AverageObserver = (function(__super__) {
	    inherits(AverageObserver, __super__);
	    function AverageObserver(o, fn, s) {
	      this._o = o;
	      this._fn = fn;
	      this._s = s;
	      this._c = 0;
	      this._t = 0;
	      __super__.call(this);
	    }
	
	    AverageObserver.prototype.next = function (x) {
	      if(this._fn) {
	        var r = tryCatch(this._fn)(x, this._c++, this._s);
	        if (r === errorObj) { return this._o.onError(r.e); }
	        this._t += r;
	      } else {
	        this._c++;
	        this._t += x;
	      }
	    };
	    AverageObserver.prototype.error = function (e) { this._o.onError(e); };
	    AverageObserver.prototype.completed = function () {
	      if (this._c === 0) { return this._o.onError(new EmptyError()); }
	      this._o.onNext(this._t / this._c);
	      this._o.onCompleted();
	    };
	
	    return AverageObserver;
	  }(AbstractObserver));
	
	  /**
	   * Computes the average of an observable sequence of values that are in the sequence or obtained by invoking a transform function on each element of the input sequence if present.
	   * @param {Function} [selector] A transform function to apply to each element.
	   * @param {Any} [thisArg] Object to use as this when executing callback.
	   * @returns {Observable} An observable sequence containing a single element with the average of the sequence of values.
	   */
	  observableProto.average = function (keySelector, thisArg) {
	    var source = this, fn;
	    if (isFunction(keySelector)) {
	      fn = bindCallback(keySelector, thisArg, 3);
	    }
	    return new AverageObservable(source, fn);
	  };
	
	  /**
	   *  Determines whether two sequences are equal by comparing the elements pairwise using a specified equality comparer.
	   *
	   * @example
	   * var res = res = source.sequenceEqual([1,2,3]);
	   * var res = res = source.sequenceEqual([{ value: 42 }], function (x, y) { return x.value === y.value; });
	   * 3 - res = source.sequenceEqual(Rx.Observable.returnValue(42));
	   * 4 - res = source.sequenceEqual(Rx.Observable.returnValue({ value: 42 }), function (x, y) { return x.value === y.value; });
	   * @param {Observable} second Second observable sequence or array to compare.
	   * @param {Function} [comparer] Comparer used to compare elements of both sequences.
	   * @returns {Observable} An observable sequence that contains a single element which indicates whether both sequences are of equal length and their corresponding elements are equal according to the specified equality comparer.
	   */
	  observableProto.sequenceEqual = function (second, comparer) {
	    var first = this;
	    comparer || (comparer = defaultComparer);
	    return new AnonymousObservable(function (o) {
	      var donel = false, doner = false, ql = [], qr = [];
	      var subscription1 = first.subscribe(function (x) {
	        if (qr.length > 0) {
	          var v = qr.shift();
	          var equal = tryCatch(comparer)(v, x);
	          if (equal === errorObj) { return o.onError(equal.e); }
	          if (!equal) {
	            o.onNext(false);
	            o.onCompleted();
	          }
	        } else if (doner) {
	          o.onNext(false);
	          o.onCompleted();
	        } else {
	          ql.push(x);
	        }
	      }, function(e) { o.onError(e); }, function () {
	        donel = true;
	        if (ql.length === 0) {
	          if (qr.length > 0) {
	            o.onNext(false);
	            o.onCompleted();
	          } else if (doner) {
	            o.onNext(true);
	            o.onCompleted();
	          }
	        }
	      });
	
	      (isArrayLike(second) || isIterable(second)) && (second = observableFrom(second));
	      isPromise(second) && (second = observableFromPromise(second));
	      var subscription2 = second.subscribe(function (x) {
	        if (ql.length > 0) {
	          var v = ql.shift();
	          var equal = tryCatch(comparer)(v, x);
	          if (equal === errorObj) { return o.onError(equal.e); }
	          if (!equal) {
	            o.onNext(false);
	            o.onCompleted();
	          }
	        } else if (donel) {
	          o.onNext(false);
	          o.onCompleted();
	        } else {
	          qr.push(x);
	        }
	      }, function(e) { o.onError(e); }, function () {
	        doner = true;
	        if (qr.length === 0) {
	          if (ql.length > 0) {
	            o.onNext(false);
	            o.onCompleted();
	          } else if (donel) {
	            o.onNext(true);
	            o.onCompleted();
	          }
	        }
	      });
	      return new BinaryDisposable(subscription1, subscription2);
	    }, first);
	  };
	
	  var ElementAtObservable = (function (__super__) {
	    inherits(ElementAtObservable, __super__);
	    function ElementAtObservable(source, i, d) {
	      this.source = source;
	      this._i = i;
	      this._d = d;
	      __super__.call(this);
	    }
	
	    ElementAtObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new ElementAtObserver(o, this._i, this._d));
	    };
	
	    return ElementAtObservable;
	  }(ObservableBase));
	
	  var ElementAtObserver = (function (__super__) {
	    inherits(ElementAtObserver, __super__);
	
	    function ElementAtObserver(o, i, d) {
	      this._o = o;
	      this._i = i;
	      this._d = d;
	      __super__.call(this);
	    }
	
	    ElementAtObserver.prototype.next = function (x) {
	      if (this._i-- === 0) {
	        this._o.onNext(x);
	        this._o.onCompleted();
	      }
	    };
	    ElementAtObserver.prototype.error = function (e) { this._o.onError(e); };
	    ElementAtObserver.prototype.completed = function () {
	      if (this._d === undefined) {
	        this._o.onError(new ArgumentOutOfRangeError());
	      } else {
	        this._o.onNext(this._d);
	        this._o.onCompleted();
	      }
	    };
	
	    return ElementAtObserver;
	  }(AbstractObserver));
	
	  /**
	   * Returns the element at a specified index in a sequence or default value if not found.
	   * @param {Number} index The zero-based index of the element to retrieve.
	   * @param {Any} [defaultValue] The default value to use if elementAt does not find a value.
	   * @returns {Observable} An observable sequence that produces the element at the specified position in the source sequence.
	   */
	  observableProto.elementAt =  function (index, defaultValue) {
	    if (index < 0) { throw new ArgumentOutOfRangeError(); }
	    return new ElementAtObservable(this, index, defaultValue);
	  };
	
	  var SingleObserver = (function(__super__) {
	    inherits(SingleObserver, __super__);
	    function SingleObserver(o, obj, s) {
	      this._o = o;
	      this._obj = obj;
	      this._s = s;
	      this._i = 0;
	      this._hv = false;
	      this._v = null;
	      __super__.call(this);
	    }
	
	    SingleObserver.prototype.next = function (x) {
	      var shouldYield = false;
	      if (this._obj.predicate) {
	        var res = tryCatch(this._obj.predicate)(x, this._i++, this._s);
	        if (res === errorObj) { return this._o.onError(res.e); }
	        Boolean(res) && (shouldYield = true);
	      } else if (!this._obj.predicate) {
	        shouldYield = true;
	      }
	      if (shouldYield) {
	        if (this._hv) {
	          return this._o.onError(new Error('Sequence contains more than one matching element'));
	        }
	        this._hv = true;
	        this._v = x;
	      }
	    };
	    SingleObserver.prototype.error = function (e) { this._o.onError(e); };
	    SingleObserver.prototype.completed = function () {
	      if (this._hv) {
	        this._o.onNext(this._v);
	        this._o.onCompleted();
	      }
	      else if (this._obj.defaultValue === undefined) {
	        this._o.onError(new EmptyError());
	      } else {
	        this._o.onNext(this._obj.defaultValue);
	        this._o.onCompleted();
	      }
	    };
	
	    return SingleObserver;
	  }(AbstractObserver));
	
	
	    /**
	     * Returns the only element of an observable sequence that satisfies the condition in the optional predicate, and reports an exception if there is not exactly one element in the observable sequence.
	     * @returns {Observable} Sequence containing the single element in the observable sequence that satisfies the condition in the predicate.
	     */
	    observableProto.single = function (predicate, thisArg) {
	      var obj = {}, source = this;
	      if (typeof arguments[0] === 'object') {
	        obj = arguments[0];
	      } else {
	        obj = {
	          predicate: arguments[0],
	          thisArg: arguments[1],
	          defaultValue: arguments[2]
	        };
	      }
	      if (isFunction (obj.predicate)) {
	        var fn = obj.predicate;
	        obj.predicate = bindCallback(fn, obj.thisArg, 3);
	      }
	      return new AnonymousObservable(function (o) {
	        return source.subscribe(new SingleObserver(o, obj, source));
	      }, source);
	    };
	
	  var FirstObservable = (function (__super__) {
	    inherits(FirstObservable, __super__);
	    function FirstObservable(source, obj) {
	      this.source = source;
	      this._obj = obj;
	      __super__.call(this);
	    }
	
	    FirstObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new FirstObserver(o, this._obj, this.source));
	    };
	
	    return FirstObservable;
	  }(ObservableBase));
	
	  var FirstObserver = (function(__super__) {
	    inherits(FirstObserver, __super__);
	    function FirstObserver(o, obj, s) {
	      this._o = o;
	      this._obj = obj;
	      this._s = s;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    FirstObserver.prototype.next = function (x) {
	      if (this._obj.predicate) {
	        var res = tryCatch(this._obj.predicate)(x, this._i++, this._s);
	        if (res === errorObj) { return this._o.onError(res.e); }
	        if (Boolean(res)) {
	          this._o.onNext(x);
	          this._o.onCompleted();
	        }
	      } else if (!this._obj.predicate) {
	        this._o.onNext(x);
	        this._o.onCompleted();
	      }
	    };
	    FirstObserver.prototype.error = function (e) { this._o.onError(e); };
	    FirstObserver.prototype.completed = function () {
	      if (this._obj.defaultValue === undefined) {
	        this._o.onError(new EmptyError());
	      } else {
	        this._o.onNext(this._obj.defaultValue);
	        this._o.onCompleted();
	      }
	    };
	
	    return FirstObserver;
	  }(AbstractObserver));
	
	  /**
	   * Returns the first element of an observable sequence that satisfies the condition in the predicate if present else the first item in the sequence.
	   * @returns {Observable} Sequence containing the first element in the observable sequence that satisfies the condition in the predicate if provided, else the first item in the sequence.
	   */
	  observableProto.first = function () {
	    var obj = {}, source = this;
	    if (typeof arguments[0] === 'object') {
	      obj = arguments[0];
	    } else {
	      obj = {
	        predicate: arguments[0],
	        thisArg: arguments[1],
	        defaultValue: arguments[2]
	      };
	    }
	    if (isFunction (obj.predicate)) {
	      var fn = obj.predicate;
	      obj.predicate = bindCallback(fn, obj.thisArg, 3);
	    }
	    return new FirstObservable(this, obj);
	  };
	
	  var LastObservable = (function (__super__) {
	    inherits(LastObservable, __super__);
	    function LastObservable(source, obj) {
	      this.source = source;
	      this._obj = obj;
	      __super__.call(this);
	    }
	
	    LastObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new LastObserver(o, this._obj, this.source));
	    };
	
	    return LastObservable;
	  }(ObservableBase));
	
	  var LastObserver = (function(__super__) {
	    inherits(LastObserver, __super__);
	    function LastObserver(o, obj, s) {
	      this._o = o;
	      this._obj = obj;
	      this._s = s;
	      this._i = 0;
	      this._hv = false;
	      this._v = null;
	      __super__.call(this);
	    }
	
	    LastObserver.prototype.next = function (x) {
	      var shouldYield = false;
	      if (this._obj.predicate) {
	        var res = tryCatch(this._obj.predicate)(x, this._i++, this._s);
	        if (res === errorObj) { return this._o.onError(res.e); }
	        Boolean(res) && (shouldYield = true);
	      } else if (!this._obj.predicate) {
	        shouldYield = true;
	      }
	      if (shouldYield) {
	        this._hv = true;
	        this._v = x;
	      }
	    };
	    LastObserver.prototype.error = function (e) { this._o.onError(e); };
	    LastObserver.prototype.completed = function () {
	      if (this._hv) {
	        this._o.onNext(this._v);
	        this._o.onCompleted();
	      }
	      else if (this._obj.defaultValue === undefined) {
	        this._o.onError(new EmptyError());
	      } else {
	        this._o.onNext(this._obj.defaultValue);
	        this._o.onCompleted();
	      }
	    };
	
	    return LastObserver;
	  }(AbstractObserver));
	
	  /**
	   * Returns the last element of an observable sequence that satisfies the condition in the predicate if specified, else the last element.
	   * @returns {Observable} Sequence containing the last element in the observable sequence that satisfies the condition in the predicate.
	   */
	  observableProto.last = function () {
	    var obj = {}, source = this;
	    if (typeof arguments[0] === 'object') {
	      obj = arguments[0];
	    } else {
	      obj = {
	        predicate: arguments[0],
	        thisArg: arguments[1],
	        defaultValue: arguments[2]
	      };
	    }
	    if (isFunction (obj.predicate)) {
	      var fn = obj.predicate;
	      obj.predicate = bindCallback(fn, obj.thisArg, 3);
	    }
	    return new LastObservable(this, obj);
	  };
	
	  var FindValueObserver = (function(__super__) {
	    inherits(FindValueObserver, __super__);
	    function FindValueObserver(observer, source, callback, yieldIndex) {
	      this._o = observer;
	      this._s = source;
	      this._cb = callback;
	      this._y = yieldIndex;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    FindValueObserver.prototype.next = function (x) {
	      var shouldRun = tryCatch(this._cb)(x, this._i, this._s);
	      if (shouldRun === errorObj) { return this._o.onError(shouldRun.e); }
	      if (shouldRun) {
	        this._o.onNext(this._y ? this._i : x);
	        this._o.onCompleted();
	      } else {
	        this._i++;
	      }
	    };
	
	    FindValueObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    FindValueObserver.prototype.completed = function () {
	      this._y && this._o.onNext(-1);
	      this._o.onCompleted();
	    };
	
	    return FindValueObserver;
	  }(AbstractObserver));
	
	  function findValue (source, predicate, thisArg, yieldIndex) {
	    var callback = bindCallback(predicate, thisArg, 3);
	    return new AnonymousObservable(function (o) {
	      return source.subscribe(new FindValueObserver(o, source, callback, yieldIndex));
	    }, source);
	  }
	
	  /**
	   * Searches for an element that matches the conditions defined by the specified predicate, and returns the first occurrence within the entire Observable sequence.
	   * @param {Function} predicate The predicate that defines the conditions of the element to search for.
	   * @param {Any} [thisArg] Object to use as `this` when executing the predicate.
	   * @returns {Observable} An Observable sequence with the first element that matches the conditions defined by the specified predicate, if found; otherwise, undefined.
	   */
	  observableProto.find = function (predicate, thisArg) {
	    return findValue(this, predicate, thisArg, false);
	  };
	
	  /**
	   * Searches for an element that matches the conditions defined by the specified predicate, and returns
	   * an Observable sequence with the zero-based index of the first occurrence within the entire Observable sequence.
	   * @param {Function} predicate The predicate that defines the conditions of the element to search for.
	   * @param {Any} [thisArg] Object to use as `this` when executing the predicate.
	   * @returns {Observable} An Observable sequence with the zero-based index of the first occurrence of an element that matches the conditions defined by match, if found; otherwise, 1.
	  */
	  observableProto.findIndex = function (predicate, thisArg) {
	    return findValue(this, predicate, thisArg, true);
	  };
	
	  var ToSetObservable = (function (__super__) {
	    inherits(ToSetObservable, __super__);
	    function ToSetObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    ToSetObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new ToSetObserver(o));
	    };
	
	    return ToSetObservable;
	  }(ObservableBase));
	
	  var ToSetObserver = (function (__super__) {
	    inherits(ToSetObserver, __super__);
	    function ToSetObserver(o) {
	      this._o = o;
	      this._s = new root.Set();
	      __super__.call(this);
	    }
	
	    ToSetObserver.prototype.next = function (x) {
	      this._s.add(x);
	    };
	
	    ToSetObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    ToSetObserver.prototype.completed = function () {
	      this._o.onNext(this._s);
	      this._o.onCompleted();
	    };
	
	    return ToSetObserver;
	  }(AbstractObserver));
	
	  /**
	   * Converts the observable sequence to a Set if it exists.
	   * @returns {Observable} An observable sequence with a single value of a Set containing the values from the observable sequence.
	   */
	  observableProto.toSet = function () {
	    if (typeof root.Set === 'undefined') { throw new TypeError(); }
	    return new ToSetObservable(this);
	  };
	
	  var ToMapObservable = (function (__super__) {
	    inherits(ToMapObservable, __super__);
	    function ToMapObservable(source, k, e) {
	      this.source = source;
	      this._k = k;
	      this._e = e;
	      __super__.call(this);
	    }
	
	    ToMapObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new ToMapObserver(o, this._k, this._e));
	    };
	
	    return ToMapObservable;
	  }(ObservableBase));
	
	  var ToMapObserver = (function (__super__) {
	    inherits(ToMapObserver, __super__);
	    function ToMapObserver(o, k, e) {
	      this._o = o;
	      this._k = k;
	      this._e = e;
	      this._m = new root.Map();
	      __super__.call(this);
	    }
	
	    ToMapObserver.prototype.next = function (x) {
	      var key = tryCatch(this._k)(x);
	      if (key === errorObj) { return this._o.onError(key.e); }
	      var elem = x;
	      if (this._e) {
	        elem = tryCatch(this._e)(x);
	        if (elem === errorObj) { return this._o.onError(elem.e); }
	      }
	
	      this._m.set(key, elem);
	    };
	
	    ToMapObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    ToMapObserver.prototype.completed = function () {
	      this._o.onNext(this._m);
	      this._o.onCompleted();
	    };
	
	    return ToMapObserver;
	  }(AbstractObserver));
	
	  /**
	  * Converts the observable sequence to a Map if it exists.
	  * @param {Function} keySelector A function which produces the key for the Map.
	  * @param {Function} [elementSelector] An optional function which produces the element for the Map. If not present, defaults to the value from the observable sequence.
	  * @returns {Observable} An observable sequence with a single value of a Map containing the values from the observable sequence.
	  */
	  observableProto.toMap = function (keySelector, elementSelector) {
	    if (typeof root.Map === 'undefined') { throw new TypeError(); }
	    return new ToMapObservable(this, keySelector, elementSelector);
	  };
	
	  var SliceObservable = (function (__super__) {
	    inherits(SliceObservable, __super__);
	    function SliceObservable(source, b, e) {
	      this.source = source;
	      this._b = b;
	      this._e = e;
	      __super__.call(this);
	    }
	
	    SliceObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new SliceObserver(o, this._b, this._e));
	    };
	
	    return SliceObservable;
	  }(ObservableBase));
	
	  var SliceObserver = (function (__super__) {
	    inherits(SliceObserver, __super__);
	
	    function SliceObserver(o, b, e) {
	      this._o = o;
	      this._b = b;
	      this._e = e;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    SliceObserver.prototype.next = function (x) {
	      if (this._i >= this._b) {
	        if (this._e === this._i) {
	          this._o.onCompleted();
	        } else {
	          this._o.onNext(x);
	        }
	      }
	      this._i++;
	    };
	    SliceObserver.prototype.error = function (e) { this._o.onError(e); };
	    SliceObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return SliceObserver;
	  }(AbstractObserver));
	
	  /*
	  * The slice() method returns a shallow copy of a portion of an Observable into a new Observable object.
	  * Unlike the array version, this does not support negative numbers for being or end.
	  * @param {Number} [begin] Zero-based index at which to begin extraction. If omitted, this will default to zero.
	  * @param {Number} [end] Zero-based index at which to end extraction. slice extracts up to but not including end.
	  * If omitted, this will emit the rest of the Observable object.
	  * @returns {Observable} A shallow copy of a portion of an Observable into a new Observable object.
	  */
	  observableProto.slice = function (begin, end) {
	    var start = begin || 0;
	    if (start < 0) { throw new Rx.ArgumentOutOfRangeError(); }
	    if (typeof end === 'number' && end < start) {
	      throw new Rx.ArgumentOutOfRangeError();
	    }
	    return new SliceObservable(this, start, end);
	  };
	
	  var LastIndexOfObservable = (function (__super__) {
	    inherits(LastIndexOfObservable, __super__);
	    function LastIndexOfObservable(source, e, n) {
	      this.source = source;
	      this._e = e;
	      this._n = n;
	      __super__.call(this);
	    }
	
	    LastIndexOfObservable.prototype.subscribeCore = function (o) {
	      if (this._n < 0) {
	        o.onNext(-1);
	        o.onCompleted();
	        return disposableEmpty;
	      }
	
	      return this.source.subscribe(new LastIndexOfObserver(o, this._e, this._n));
	    };
	
	    return LastIndexOfObservable;
	  }(ObservableBase));
	
	  var LastIndexOfObserver = (function (__super__) {
	    inherits(LastIndexOfObserver, __super__);
	    function LastIndexOfObserver(o, e, n) {
	      this._o = o;
	      this._e = e;
	      this._n = n;
	      this._v = 0;
	      this._hv = false;
	      this._i = 0;
	      __super__.call(this);
	    }
	
	    LastIndexOfObserver.prototype.next = function (x) {
	      if (this._i >= this._n && x === this._e) {
	        this._hv = true;
	        this._v = this._i;
	      }
	      this._i++;
	    };
	    LastIndexOfObserver.prototype.error = function (e) { this._o.onError(e); };
	    LastIndexOfObserver.prototype.completed = function () {
	      if (this._hv) {
	        this._o.onNext(this._v);
	      } else {
	        this._o.onNext(-1);
	      }
	      this._o.onCompleted();
	    };
	
	    return LastIndexOfObserver;
	  }(AbstractObserver));
	
	  /**
	   * Returns the last index at which a given element can be found in the observable sequence, or -1 if it is not present.
	   * @param {Any} searchElement Element to locate in the array.
	   * @param {Number} [fromIndex] The index to start the search.  If not specified, defaults to 0.
	   * @returns {Observable} And observable sequence containing the last index at which a given element can be found in the observable sequence, or -1 if it is not present.
	   */
	  observableProto.lastIndexOf = function(searchElement, fromIndex) {
	    var n = +fromIndex || 0;
	    Math.abs(n) === Infinity && (n = 0);
	    return new LastIndexOfObservable(this, searchElement, n);
	  };
	
	  Observable.wrap = function (fn) {
	    function createObservable() {
	      return Observable.spawn.call(this, fn.apply(this, arguments));
	    }
	
	    createObservable.__generatorFunction__ = fn;
	    return createObservable;
	  };
	
	  var spawn = Observable.spawn = function () {
	    var gen = arguments[0], self = this, args = [];
	    for (var i = 1, len = arguments.length; i < len; i++) { args.push(arguments[i]); }
	
	    return new AnonymousObservable(function (o) {
	      var g = new CompositeDisposable();
	
	      if (isFunction(gen)) { gen = gen.apply(self, args); }
	      if (!gen || !isFunction(gen.next)) {
	        o.onNext(gen);
	        return o.onCompleted();
	      }
	
	      function processGenerator(res) {
	        var ret = tryCatch(gen.next).call(gen, res);
	        if (ret === errorObj) { return o.onError(ret.e); }
	        next(ret);
	      }
	
	      processGenerator();
	
	      function onError(err) {
	        var ret = tryCatch(gen.next).call(gen, err);
	        if (ret === errorObj) { return o.onError(ret.e); }
	        next(ret);
	      }
	
	      function next(ret) {
	        if (ret.done) {
	          o.onNext(ret.value);
	          o.onCompleted();
	          return;
	        }
	        var obs = toObservable.call(self, ret.value);
	        var value = null;
	        var hasValue = false;
	        if (Observable.isObservable(obs)) {
	          g.add(obs.subscribe(function(val) {
	            hasValue = true;
	            value = val;
	          }, onError, function() {
	            hasValue && processGenerator(value);
	          }));
	        } else {
	          onError(new TypeError('type not supported'));
	        }
	      }
	
	      return g;
	    });
	  };
	
	  function toObservable(obj) {
	    if (!obj) { return obj; }
	    if (Observable.isObservable(obj)) { return obj; }
	    if (isPromise(obj)) { return Observable.fromPromise(obj); }
	    if (isGeneratorFunction(obj) || isGenerator(obj)) { return spawn.call(this, obj); }
	    if (isFunction(obj)) { return thunkToObservable.call(this, obj); }
	    if (isArrayLike(obj) || isIterable(obj)) { return arrayToObservable.call(this, obj); }
	    if (isObject(obj)) {return objectToObservable.call(this, obj);}
	    return obj;
	  }
	
	  function arrayToObservable (obj) {
	    return Observable.from(obj).concatMap(function(o) {
	      if(Observable.isObservable(o) || isObject(o)) {
	        return toObservable.call(null, o);
	      } else {
	        return Rx.Observable.just(o);
	      }
	    }).toArray();
	  }
	
	  function objectToObservable (obj) {
	    var results = new obj.constructor(), keys = Object.keys(obj), observables = [];
	    for (var i = 0, len = keys.length; i < len; i++) {
	      var key = keys[i];
	      var observable = toObservable.call(this, obj[key]);
	
	      if(observable && Observable.isObservable(observable)) {
	        defer(observable, key);
	      } else {
	        results[key] = obj[key];
	      }
	    }
	
	    return Observable.forkJoin.apply(Observable, observables).map(function() {
	      return results;
	    });
	
	
	    function defer (observable, key) {
	      results[key] = undefined;
	      observables.push(observable.map(function (next) {
	        results[key] = next;
	      }));
	    }
	  }
	
	  function thunkToObservable(fn) {
	    var self = this;
	    return new AnonymousObservable(function (o) {
	      fn.call(self, function () {
	        var err = arguments[0], res = arguments[1];
	        if (err) { return o.onError(err); }
	        if (arguments.length > 2) {
	          var args = [];
	          for (var i = 1, len = arguments.length; i < len; i++) { args.push(arguments[i]); }
	          res = args;
	        }
	        o.onNext(res);
	        o.onCompleted();
	      });
	    });
	  }
	
	  function isGenerator(obj) {
	    return isFunction (obj.next) && isFunction (obj['throw']);
	  }
	
	  function isGeneratorFunction(obj) {
	    var ctor = obj.constructor;
	    if (!ctor) { return false; }
	    if (ctor.name === 'GeneratorFunction' || ctor.displayName === 'GeneratorFunction') { return true; }
	    return isGenerator(ctor.prototype);
	  }
	
	  function isObject(val) {
	    return Object == val.constructor;
	  }
	
	  /**
	   * Invokes the specified function asynchronously on the specified scheduler, surfacing the result through an observable sequence.
	   *
	   * @example
	   * var res = Rx.Observable.start(function () { console.log('hello'); });
	   * var res = Rx.Observable.start(function () { console.log('hello'); }, Rx.Scheduler.timeout);
	   * var res = Rx.Observable.start(function () { this.log('hello'); }, Rx.Scheduler.timeout, console);
	   *
	   * @param {Function} func Function to run asynchronously.
	   * @param {Scheduler} [scheduler]  Scheduler to run the function on. If not specified, defaults to Scheduler.timeout.
	   * @param [context]  The context for the func parameter to be executed.  If not specified, defaults to undefined.
	   * @returns {Observable} An observable sequence exposing the function's result value, or an exception.
	   *
	   * Remarks
	   * * The function is called immediately, not during the subscription of the resulting sequence.
	   * * Multiple subscriptions to the resulting sequence can observe the function's result.
	   */
	  Observable.start = function (func, context, scheduler) {
	    return observableToAsync(func, context, scheduler)();
	  };
	
	  /**
	   * Converts the function into an asynchronous function. Each invocation of the resulting asynchronous function causes an invocation of the original synchronous function on the specified scheduler.
	   * @param {Function} function Function to convert to an asynchronous function.
	   * @param {Scheduler} [scheduler] Scheduler to run the function on. If not specified, defaults to Scheduler.timeout.
	   * @param {Mixed} [context] The context for the func parameter to be executed.  If not specified, defaults to undefined.
	   * @returns {Function} Asynchronous function.
	   */
	  var observableToAsync = Observable.toAsync = function (func, context, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return function () {
	      var args = arguments,
	        subject = new AsyncSubject();
	
	      scheduler.schedule(null, function () {
	        var result;
	        try {
	          result = func.apply(context, args);
	        } catch (e) {
	          subject.onError(e);
	          return;
	        }
	        subject.onNext(result);
	        subject.onCompleted();
	      });
	      return subject.asObservable();
	    };
	  };
	
	function createCbObservable(fn, ctx, selector, args) {
	  var o = new AsyncSubject();
	
	  args.push(createCbHandler(o, ctx, selector));
	  fn.apply(ctx, args);
	
	  return o.asObservable();
	}
	
	function createCbHandler(o, ctx, selector) {
	  return function handler () {
	    var len = arguments.length, results = new Array(len);
	    for(var i = 0; i < len; i++) { results[i] = arguments[i]; }
	
	    if (isFunction(selector)) {
	      results = tryCatch(selector).apply(ctx, results);
	      if (results === errorObj) { return o.onError(results.e); }
	      o.onNext(results);
	    } else {
	      if (results.length <= 1) {
	        o.onNext(results[0]);
	      } else {
	        o.onNext(results);
	      }
	    }
	
	    o.onCompleted();
	  };
	}
	
	/**
	 * Converts a callback function to an observable sequence.
	 *
	 * @param {Function} fn Function with a callback as the last parameter to convert to an Observable sequence.
	 * @param {Mixed} [ctx] The context for the func parameter to be executed.  If not specified, defaults to undefined.
	 * @param {Function} [selector] A selector which takes the arguments from the callback to produce a single item to yield on next.
	 * @returns {Function} A function, when executed with the required parameters minus the callback, produces an Observable sequence with a single value of the arguments to the callback as an array.
	 */
	Observable.fromCallback = function (fn, ctx, selector) {
	  return function () {
	    typeof ctx === 'undefined' && (ctx = this); 
	
	    var len = arguments.length, args = new Array(len)
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    return createCbObservable(fn, ctx, selector, args);
	  };
	};
	
	function createNodeObservable(fn, ctx, selector, args) {
	  var o = new AsyncSubject();
	
	  args.push(createNodeHandler(o, ctx, selector));
	  fn.apply(ctx, args);
	
	  return o.asObservable();
	}
	
	function createNodeHandler(o, ctx, selector) {
	  return function handler () {
	    var err = arguments[0];
	    if (err) { return o.onError(err); }
	
	    var len = arguments.length, results = [];
	    for(var i = 1; i < len; i++) { results[i - 1] = arguments[i]; }
	
	    if (isFunction(selector)) {
	      var results = tryCatch(selector).apply(ctx, results);
	      if (results === errorObj) { return o.onError(results.e); }
	      o.onNext(results);
	    } else {
	      if (results.length <= 1) {
	        o.onNext(results[0]);
	      } else {
	        o.onNext(results);
	      }
	    }
	
	    o.onCompleted();
	  };
	}
	
	/**
	 * Converts a Node.js callback style function to an observable sequence.  This must be in function (err, ...) format.
	 * @param {Function} fn The function to call
	 * @param {Mixed} [ctx] The context for the func parameter to be executed.  If not specified, defaults to undefined.
	 * @param {Function} [selector] A selector which takes the arguments from the callback minus the error to produce a single item to yield on next.
	 * @returns {Function} An async function which when applied, returns an observable sequence with the callback arguments as an array.
	 */
	Observable.fromNodeCallback = function (fn, ctx, selector) {
	  return function () {
	    typeof ctx === 'undefined' && (ctx = this); 
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    return createNodeObservable(fn, ctx, selector, args);
	  };
	};
	
	  function isNodeList(el) {
	    if (root.StaticNodeList) {
	      // IE8 Specific
	      // instanceof is slower than Object#toString, but Object#toString will not work as intended in IE8
	      return el instanceof root.StaticNodeList || el instanceof root.NodeList;
	    } else {
	      return Object.prototype.toString.call(el) === '[object NodeList]';
	    }
	  }
	
	  function ListenDisposable(e, n, fn) {
	    this._e = e;
	    this._n = n;
	    this._fn = fn;
	    this._e.addEventListener(this._n, this._fn, false);
	    this.isDisposed = false;
	  }
	  ListenDisposable.prototype.dispose = function () {
	    if (!this.isDisposed) {
	      this._e.removeEventListener(this._n, this._fn, false);
	      this.isDisposed = true;
	    }
	  };
	
	  function createEventListener (el, eventName, handler) {
	    var disposables = new CompositeDisposable();
	
	    // Asume NodeList or HTMLCollection
	    var elemToString = Object.prototype.toString.call(el);
	    if (isNodeList(el) || elemToString === '[object HTMLCollection]') {
	      for (var i = 0, len = el.length; i < len; i++) {
	        disposables.add(createEventListener(el.item(i), eventName, handler));
	      }
	    } else if (el) {
	      disposables.add(new ListenDisposable(el, eventName, handler));
	    }
	
	    return disposables;
	  }
	
	  /**
	   * Configuration option to determine whether to use native events only
	   */
	  Rx.config.useNativeEvents = false;
	
	  var EventObservable = (function(__super__) {
	    inherits(EventObservable, __super__);
	    function EventObservable(el, name, fn) {
	      this._el = el;
	      this._n = name;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    function createHandler(o, fn) {
	      return function handler () {
	        var results = arguments[0];
	        if (isFunction(fn)) {
	          results = tryCatch(fn).apply(null, arguments);
	          if (results === errorObj) { return o.onError(results.e); }
	        }
	        o.onNext(results);
	      };
	    }
	
	    EventObservable.prototype.subscribeCore = function (o) {
	      return createEventListener(
	        this._el,
	        this._n,
	        createHandler(o, this._fn));
	    };
	
	    return EventObservable;
	  }(ObservableBase));
	
	  /**
	   * Creates an observable sequence by adding an event listener to the matching DOMElement or each item in the NodeList.
	   * @param {Object} element The DOMElement or NodeList to attach a listener.
	   * @param {String} eventName The event name to attach the observable sequence.
	   * @param {Function} [selector] A selector which takes the arguments from the event handler to produce a single item to yield on next.
	   * @returns {Observable} An observable sequence of events from the specified element and the specified event.
	   */
	  Observable.fromEvent = function (element, eventName, selector) {
	    // Node.js specific
	    if (element.addListener) {
	      return fromEventPattern(
	        function (h) { element.addListener(eventName, h); },
	        function (h) { element.removeListener(eventName, h); },
	        selector);
	    }
	
	    // Use only if non-native events are allowed
	    if (!Rx.config.useNativeEvents) {
	      // Handles jq, Angular.js, Zepto, Marionette, Ember.js
	      if (typeof element.on === 'function' && typeof element.off === 'function') {
	        return fromEventPattern(
	          function (h) { element.on(eventName, h); },
	          function (h) { element.off(eventName, h); },
	          selector);
	      }
	    }
	
	    return new EventObservable(element, eventName, selector).publish().refCount();
	  };
	
	  var EventPatternObservable = (function(__super__) {
	    inherits(EventPatternObservable, __super__);
	    function EventPatternObservable(add, del, fn) {
	      this._add = add;
	      this._del = del;
	      this._fn = fn;
	      __super__.call(this);
	    }
	
	    function createHandler(o, fn) {
	      return function handler () {
	        var results = arguments[0];
	        if (isFunction(fn)) {
	          results = tryCatch(fn).apply(null, arguments);
	          if (results === errorObj) { return o.onError(results.e); }
	        }
	        o.onNext(results);
	      };
	    }
	
	    EventPatternObservable.prototype.subscribeCore = function (o) {
	      var fn = createHandler(o, this._fn);
	      var returnValue = this._add(fn);
	      return new EventPatternDisposable(this._del, fn, returnValue);
	    };
	
	    function EventPatternDisposable(del, fn, ret) {
	      this._del = del;
	      this._fn = fn;
	      this._ret = ret;
	      this.isDisposed = false;
	    }
	
	    EventPatternDisposable.prototype.dispose = function () {
	      if(!this.isDisposed) {
	        isFunction(this._del) && this._del(this._fn, this._ret);
	        this.isDisposed = true;
	      }
	    };
	
	    return EventPatternObservable;
	  }(ObservableBase));
	
	  /**
	   * Creates an observable sequence from an event emitter via an addHandler/removeHandler pair.
	   * @param {Function} addHandler The function to add a handler to the emitter.
	   * @param {Function} [removeHandler] The optional function to remove a handler from an emitter.
	   * @param {Function} [selector] A selector which takes the arguments from the event handler to produce a single item to yield on next.
	   * @returns {Observable} An observable sequence which wraps an event from an event emitter
	   */
	  var fromEventPattern = Observable.fromEventPattern = function (addHandler, removeHandler, selector) {
	    return new EventPatternObservable(addHandler, removeHandler, selector).publish().refCount();
	  };
	
	  /**
	   * Invokes the asynchronous function, surfacing the result through an observable sequence.
	   * @param {Function} functionAsync Asynchronous function which returns a Promise to run.
	   * @returns {Observable} An observable sequence exposing the function's result value, or an exception.
	   */
	  Observable.startAsync = function (functionAsync) {
	    var promise = tryCatch(functionAsync)();
	    if (promise === errorObj) { return observableThrow(promise.e); }
	    return observableFromPromise(promise);
	  };
	
	  var PausableObservable = (function (__super__) {
	    inherits(PausableObservable, __super__);
	    function PausableObservable(source, pauser) {
	      this.source = source;
	      this.controller = new Subject();
	
	      if (pauser && pauser.subscribe) {
	        this.pauser = this.controller.merge(pauser);
	      } else {
	        this.pauser = this.controller;
	      }
	
	      __super__.call(this);
	    }
	
	    PausableObservable.prototype._subscribe = function (o) {
	      var conn = this.source.publish(),
	        subscription = conn.subscribe(o),
	        connection = disposableEmpty;
	
	      var pausable = this.pauser.distinctUntilChanged().subscribe(function (b) {
	        if (b) {
	          connection = conn.connect();
	        } else {
	          connection.dispose();
	          connection = disposableEmpty;
	        }
	      });
	
	      return new NAryDisposable([subscription, connection, pausable]);
	    };
	
	    PausableObservable.prototype.pause = function () {
	      this.controller.onNext(false);
	    };
	
	    PausableObservable.prototype.resume = function () {
	      this.controller.onNext(true);
	    };
	
	    return PausableObservable;
	
	  }(Observable));
	
	  /**
	   * Pauses the underlying observable sequence based upon the observable sequence which yields true/false.
	   * @example
	   * var pauser = new Rx.Subject();
	   * var source = Rx.Observable.interval(100).pausable(pauser);
	   * @param {Observable} pauser The observable sequence used to pause the underlying sequence.
	   * @returns {Observable} The observable sequence which is paused based upon the pauser.
	   */
	  observableProto.pausable = function (pauser) {
	    return new PausableObservable(this, pauser);
	  };
	
	  function combineLatestSource(source, subject, resultSelector) {
	    return new AnonymousObservable(function (o) {
	      var hasValue = [false, false],
	        hasValueAll = false,
	        isDone = false,
	        values = new Array(2),
	        err;
	
	      function next(x, i) {
	        values[i] = x;
	        hasValue[i] = true;
	        if (hasValueAll || (hasValueAll = hasValue.every(identity))) {
	          if (err) { return o.onError(err); }
	          var res = tryCatch(resultSelector).apply(null, values);
	          if (res === errorObj) { return o.onError(res.e); }
	          o.onNext(res);
	        }
	        isDone && values[1] && o.onCompleted();
	      }
	
	      return new BinaryDisposable(
	        source.subscribe(
	          function (x) {
	            next(x, 0);
	          },
	          function (e) {
	            if (values[1]) {
	              o.onError(e);
	            } else {
	              err = e;
	            }
	          },
	          function () {
	            isDone = true;
	            values[1] && o.onCompleted();
	          }),
	        subject.subscribe(
	          function (x) {
	            next(x, 1);
	          },
	          function (e) { o.onError(e); },
	          function () {
	            isDone = true;
	            next(true, 1);
	          })
	        );
	    }, source);
	  }
	
	  var PausableBufferedObservable = (function (__super__) {
	    inherits(PausableBufferedObservable, __super__);
	    function PausableBufferedObservable(source, pauser) {
	      this.source = source;
	      this.controller = new Subject();
	
	      if (pauser && pauser.subscribe) {
	        this.pauser = this.controller.merge(pauser);
	      } else {
	        this.pauser = this.controller;
	      }
	
	      __super__.call(this);
	    }
	
	    PausableBufferedObservable.prototype._subscribe = function (o) {
	      var q = [], previousShouldFire;
	
	      function drainQueue() { while (q.length > 0) { o.onNext(q.shift()); } }
	
	      var subscription =
	        combineLatestSource(
	          this.source,
	          this.pauser.startWith(false).distinctUntilChanged(),
	          function (data, shouldFire) {
	            return { data: data, shouldFire: shouldFire };
	          })
	          .subscribe(
	            function (results) {
	              if (previousShouldFire !== undefined && results.shouldFire !== previousShouldFire) {
	                previousShouldFire = results.shouldFire;
	                // change in shouldFire
	                if (results.shouldFire) { drainQueue(); }
	              } else {
	                previousShouldFire = results.shouldFire;
	                // new data
	                if (results.shouldFire) {
	                  o.onNext(results.data);
	                } else {
	                  q.push(results.data);
	                }
	              }
	            },
	            function (err) {
	              drainQueue();
	              o.onError(err);
	            },
	            function () {
	              drainQueue();
	              o.onCompleted();
	            }
	          );
	      return subscription;      
	    };
	
	    PausableBufferedObservable.prototype.pause = function () {
	      this.controller.onNext(false);
	    };
	
	    PausableBufferedObservable.prototype.resume = function () {
	      this.controller.onNext(true);
	    };
	
	    return PausableBufferedObservable;
	
	  }(Observable));
	
	  /**
	   * Pauses the underlying observable sequence based upon the observable sequence which yields true/false,
	   * and yields the values that were buffered while paused.
	   * @example
	   * var pauser = new Rx.Subject();
	   * var source = Rx.Observable.interval(100).pausableBuffered(pauser);
	   * @param {Observable} pauser The observable sequence used to pause the underlying sequence.
	   * @returns {Observable} The observable sequence which is paused based upon the pauser.
	   */
	  observableProto.pausableBuffered = function (pauser) {
	    return new PausableBufferedObservable(this, pauser);
	  };
	
	  var ControlledObservable = (function (__super__) {
	    inherits(ControlledObservable, __super__);
	    function ControlledObservable (source, enableQueue, scheduler) {
	      __super__.call(this);
	      this.subject = new ControlledSubject(enableQueue, scheduler);
	      this.source = source.multicast(this.subject).refCount();
	    }
	
	    ControlledObservable.prototype._subscribe = function (o) {
	      return this.source.subscribe(o);
	    };
	
	    ControlledObservable.prototype.request = function (numberOfItems) {
	      return this.subject.request(numberOfItems == null ? -1 : numberOfItems);
	    };
	
	    return ControlledObservable;
	
	  }(Observable));
	
	  var ControlledSubject = (function (__super__) {
	    inherits(ControlledSubject, __super__);
	    function ControlledSubject(enableQueue, scheduler) {
	      enableQueue == null && (enableQueue = true);
	
	      __super__.call(this);
	      this.subject = new Subject();
	      this.enableQueue = enableQueue;
	      this.queue = enableQueue ? [] : null;
	      this.requestedCount = 0;
	      this.requestedDisposable = null;
	      this.error = null;
	      this.hasFailed = false;
	      this.hasCompleted = false;
	      this.scheduler = scheduler || currentThreadScheduler;
	    }
	
	    addProperties(ControlledSubject.prototype, Observer, {
	      _subscribe: function (o) {
	        return this.subject.subscribe(o);
	      },
	      onCompleted: function () {
	        this.hasCompleted = true;
	        if (!this.enableQueue || this.queue.length === 0) {
	          this.subject.onCompleted();
	          this.disposeCurrentRequest();
	        } else {
	          this.queue.push(Notification.createOnCompleted());
	        }
	      },
	      onError: function (error) {
	        this.hasFailed = true;
	        this.error = error;
	        if (!this.enableQueue || this.queue.length === 0) {
	          this.subject.onError(error);
	          this.disposeCurrentRequest();
	        } else {
	          this.queue.push(Notification.createOnError(error));
	        }
	      },
	      onNext: function (value) {
	        if (this.requestedCount <= 0) {
	          this.enableQueue && this.queue.push(Notification.createOnNext(value));
	        } else {
	          (this.requestedCount-- === 0) && this.disposeCurrentRequest();
	          this.subject.onNext(value);
	        }
	      },
	      _processRequest: function (numberOfItems) {
	        if (this.enableQueue) {
	          while (this.queue.length > 0 && (numberOfItems > 0 || this.queue[0].kind !== 'N')) {
	            var first = this.queue.shift();
	            first.accept(this.subject);
	            if (first.kind === 'N') {
	              numberOfItems--;
	            } else {
	              this.disposeCurrentRequest();
	              this.queue = [];
	            }
	          }
	        }
	
	        return numberOfItems;
	      },
	      request: function (number) {
	        this.disposeCurrentRequest();
	        var self = this;
	
	        this.requestedDisposable = this.scheduler.schedule(number,
	        function(s, i) {
	          var remaining = self._processRequest(i);
	          var stopped = self.hasCompleted || self.hasFailed;
	          if (!stopped && remaining > 0) {
	            self.requestedCount = remaining;
	
	            return disposableCreate(function () {
	              self.requestedCount = 0;
	            });
	              // Scheduled item is still in progress. Return a new
	              // disposable to allow the request to be interrupted
	              // via dispose.
	          }
	        });
	
	        return this.requestedDisposable;
	      },
	      disposeCurrentRequest: function () {
	        if (this.requestedDisposable) {
	          this.requestedDisposable.dispose();
	          this.requestedDisposable = null;
	        }
	      }
	    });
	
	    return ControlledSubject;
	  }(Observable));
	
	  /**
	   * Attaches a controller to the observable sequence with the ability to queue.
	   * @example
	   * var source = Rx.Observable.interval(100).controlled();
	   * source.request(3); // Reads 3 values
	   * @param {bool} enableQueue truthy value to determine if values should be queued pending the next request
	   * @param {Scheduler} scheduler determines how the requests will be scheduled
	   * @returns {Observable} The observable sequence which only propagates values on request.
	   */
	  observableProto.controlled = function (enableQueue, scheduler) {
	
	    if (enableQueue && isScheduler(enableQueue)) {
	      scheduler = enableQueue;
	      enableQueue = true;
	    }
	
	    if (enableQueue == null) {  enableQueue = true; }
	    return new ControlledObservable(this, enableQueue, scheduler);
	  };
	
	  var StopAndWaitObservable = (function (__super__) {
	    inherits(StopAndWaitObservable, __super__);
	    function StopAndWaitObservable (source) {
	      __super__.call(this);
	      this.source = source;
	    }
	
	    function scheduleMethod(s, self) {
	      self.source.request(1);
	    }
	
	    StopAndWaitObservable.prototype._subscribe = function (o) {
	      this.subscription = this.source.subscribe(new StopAndWaitObserver(o, this, this.subscription));
	      return new BinaryDisposable(
	        this.subscription,
	        defaultScheduler.schedule(this, scheduleMethod)
	      );
	    };
	
	    var StopAndWaitObserver = (function (__sub__) {
	      inherits(StopAndWaitObserver, __sub__);
	      function StopAndWaitObserver (observer, observable, cancel) {
	        __sub__.call(this);
	        this.observer = observer;
	        this.observable = observable;
	        this.cancel = cancel;
	        this.scheduleDisposable = null;
	      }
	
	      StopAndWaitObserver.prototype.completed = function () {
	        this.observer.onCompleted();
	        this.dispose();
	      };
	
	      StopAndWaitObserver.prototype.error = function (error) {
	        this.observer.onError(error);
	        this.dispose();
	      };
	
	      function innerScheduleMethod(s, self) {
	        self.observable.source.request(1);
	      }
	
	      StopAndWaitObserver.prototype.next = function (value) {
	        this.observer.onNext(value);
	        this.scheduleDisposable = defaultScheduler.schedule(this, innerScheduleMethod);
	      };
	
	      StopAndWaitObservable.dispose = function () {
	        this.observer = null;
	        if (this.cancel) {
	          this.cancel.dispose();
	          this.cancel = null;
	        }
	        if (this.scheduleDisposable) {
	          this.scheduleDisposable.dispose();
	          this.scheduleDisposable = null;
	        }
	        __sub__.prototype.dispose.call(this);
	      };
	
	      return StopAndWaitObserver;
	    }(AbstractObserver));
	
	    return StopAndWaitObservable;
	  }(Observable));
	
	
	  /**
	   * Attaches a stop and wait observable to the current observable.
	   * @returns {Observable} A stop and wait observable.
	   */
	  ControlledObservable.prototype.stopAndWait = function () {
	    return new StopAndWaitObservable(this);
	  };
	
	  var WindowedObservable = (function (__super__) {
	    inherits(WindowedObservable, __super__);
	    function WindowedObservable(source, windowSize) {
	      __super__.call(this);
	      this.source = source;
	      this.windowSize = windowSize;
	    }
	
	    function scheduleMethod(s, self) {
	      self.source.request(self.windowSize);
	    }
	
	    WindowedObservable.prototype._subscribe = function (o) {
	      this.subscription = this.source.subscribe(new WindowedObserver(o, this, this.subscription));
	      return new BinaryDisposable(
	        this.subscription,
	        defaultScheduler.schedule(this, scheduleMethod)
	      );
	    };
	
	    var WindowedObserver = (function (__sub__) {
	      inherits(WindowedObserver, __sub__);
	      function WindowedObserver(observer, observable, cancel) {
	        this.observer = observer;
	        this.observable = observable;
	        this.cancel = cancel;
	        this.received = 0;
	        this.scheduleDisposable = null;
	        __sub__.call(this);
	      }
	
	      WindowedObserver.prototype.completed = function () {
	        this.observer.onCompleted();
	        this.dispose();
	      };
	
	      WindowedObserver.prototype.error = function (error) {
	        this.observer.onError(error);
	        this.dispose();
	      };
	
	      function innerScheduleMethod(s, self) {
	        self.observable.source.request(self.observable.windowSize);
	      }
	
	      WindowedObserver.prototype.next = function (value) {
	        this.observer.onNext(value);
	        this.received = ++this.received % this.observable.windowSize;
	        this.received === 0 && (this.scheduleDisposable = defaultScheduler.schedule(this, innerScheduleMethod));
	      };
	
	      WindowedObserver.prototype.dispose = function () {
	        this.observer = null;
	        if (this.cancel) {
	          this.cancel.dispose();
	          this.cancel = null;
	        }
	        if (this.scheduleDisposable) {
	          this.scheduleDisposable.dispose();
	          this.scheduleDisposable = null;
	        }
	        __sub__.prototype.dispose.call(this);
	      };
	
	      return WindowedObserver;
	    }(AbstractObserver));
	
	    return WindowedObservable;
	  }(Observable));
	
	  /**
	   * Creates a sliding windowed observable based upon the window size.
	   * @param {Number} windowSize The number of items in the window
	   * @returns {Observable} A windowed observable based upon the window size.
	   */
	  ControlledObservable.prototype.windowed = function (windowSize) {
	    return new WindowedObservable(this, windowSize);
	  };
	
	  /**
	   * Pipes the existing Observable sequence into a Node.js Stream.
	   * @param {Stream} dest The destination Node.js stream.
	   * @returns {Stream} The destination stream.
	   */
	  observableProto.pipe = function (dest) {
	    var source = this.pausableBuffered();
	
	    function onDrain() {
	      source.resume();
	    }
	
	    dest.addListener('drain', onDrain);
	
	    source.subscribe(
	      function (x) {
	        !dest.write(String(x)) && source.pause();
	      },
	      function (err) {
	        dest.emit('error', err);
	      },
	      function () {
	        // Hack check because STDIO is not closable
	        !dest._isStdio && dest.end();
	        dest.removeListener('drain', onDrain);
	      });
	
	    source.resume();
	
	    return dest;
	  };
	
	  var MulticastObservable = (function (__super__) {
	    inherits(MulticastObservable, __super__);
	    function MulticastObservable(source, fn1, fn2) {
	      this.source = source;
	      this._fn1 = fn1;
	      this._fn2 = fn2;
	      __super__.call(this);
	    }
	
	    MulticastObservable.prototype.subscribeCore = function (o) {
	      var connectable = this.source.multicast(this._fn1());
	      return new BinaryDisposable(this._fn2(connectable).subscribe(o), connectable.connect());
	    };
	
	    return MulticastObservable;
	  }(ObservableBase));
	
	  /**
	   * Multicasts the source sequence notifications through an instantiated subject into all uses of the sequence within a selector function. Each
	   * subscription to the resulting sequence causes a separate multicast invocation, exposing the sequence resulting from the selector function's
	   * invocation. For specializations with fixed subject types, see Publish, PublishLast, and Replay.
	   *
	   * @example
	   * 1 - res = source.multicast(observable);
	   * 2 - res = source.multicast(function () { return new Subject(); }, function (x) { return x; });
	   *
	   * @param {Function|Subject} subjectOrSubjectSelector
	   * Factory function to create an intermediate subject through which the source sequence's elements will be multicast to the selector function.
	   * Or:
	   * Subject to push source elements into.
	   *
	   * @param {Function} [selector] Optional selector function which can use the multicasted source sequence subject to the policies enforced by the created subject. Specified only if <paramref name="subjectOrSubjectSelector" is a factory function.
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source sequence within a selector function.
	   */
	  observableProto.multicast = function (subjectOrSubjectSelector, selector) {
	    return isFunction(subjectOrSubjectSelector) ?
	      new MulticastObservable(this, subjectOrSubjectSelector, selector) :
	      new ConnectableObservable(this, subjectOrSubjectSelector);
	  };
	
	  /**
	   * Returns an observable sequence that is the result of invoking the selector on a connectable observable sequence that shares a single subscription to the underlying sequence.
	   * This operator is a specialization of Multicast using a regular Subject.
	   *
	   * @example
	   * var resres = source.publish();
	   * var res = source.publish(function (x) { return x; });
	   *
	   * @param {Function} [selector] Selector function which can use the multicasted source sequence as many times as needed, without causing multiple subscriptions to the source sequence. Subscribers to the given source will receive all notifications of the source from the time of the subscription on.
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source sequence within a selector function.
	   */
	  observableProto.publish = function (selector) {
	    return selector && isFunction(selector) ?
	      this.multicast(function () { return new Subject(); }, selector) :
	      this.multicast(new Subject());
	  };
	
	  /**
	   * Returns an observable sequence that shares a single subscription to the underlying sequence.
	   * This operator is a specialization of publish which creates a subscription when the number of observers goes from zero to one, then shares that subscription with all subsequent observers until the number of observers returns to zero, at which point the subscription is disposed.
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source sequence.
	   */
	  observableProto.share = function () {
	    return this.publish().refCount();
	  };
	
	  /**
	   * Returns an observable sequence that is the result of invoking the selector on a connectable observable sequence that shares a single subscription to the underlying sequence containing only the last notification.
	   * This operator is a specialization of Multicast using a AsyncSubject.
	   *
	   * @example
	   * var res = source.publishLast();
	   * var res = source.publishLast(function (x) { return x; });
	   *
	   * @param selector [Optional] Selector function which can use the multicasted source sequence as many times as needed, without causing multiple subscriptions to the source sequence. Subscribers to the given source will only receive the last notification of the source.
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source sequence within a selector function.
	   */
	  observableProto.publishLast = function (selector) {
	    return selector && isFunction(selector) ?
	      this.multicast(function () { return new AsyncSubject(); }, selector) :
	      this.multicast(new AsyncSubject());
	  };
	
	  /**
	   * Returns an observable sequence that is the result of invoking the selector on a connectable observable sequence that shares a single subscription to the underlying sequence and starts with initialValue.
	   * This operator is a specialization of Multicast using a BehaviorSubject.
	   *
	   * @example
	   * var res = source.publishValue(42);
	   * var res = source.publishValue(function (x) { return x.select(function (y) { return y * y; }) }, 42);
	   *
	   * @param {Function} [selector] Optional selector function which can use the multicasted source sequence as many times as needed, without causing multiple subscriptions to the source sequence. Subscribers to the given source will receive immediately receive the initial value, followed by all notifications of the source from the time of the subscription on.
	   * @param {Mixed} initialValue Initial value received by observers upon subscription.
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source sequence within a selector function.
	   */
	  observableProto.publishValue = function (initialValueOrSelector, initialValue) {
	    return arguments.length === 2 ?
	      this.multicast(function () {
	        return new BehaviorSubject(initialValue);
	      }, initialValueOrSelector) :
	      this.multicast(new BehaviorSubject(initialValueOrSelector));
	  };
	
	  /**
	   * Returns an observable sequence that shares a single subscription to the underlying sequence and starts with an initialValue.
	   * This operator is a specialization of publishValue which creates a subscription when the number of observers goes from zero to one, then shares that subscription with all subsequent observers until the number of observers returns to zero, at which point the subscription is disposed.
	   * @param {Mixed} initialValue Initial value received by observers upon subscription.
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source sequence.
	   */
	  observableProto.shareValue = function (initialValue) {
	    return this.publishValue(initialValue).refCount();
	  };
	
	  /**
	   * Returns an observable sequence that is the result of invoking the selector on a connectable observable sequence that shares a single subscription to the underlying sequence replaying notifications subject to a maximum time length for the replay buffer.
	   * This operator is a specialization of Multicast using a ReplaySubject.
	   *
	   * @example
	   * var res = source.replay(null, 3);
	   * var res = source.replay(null, 3, 500);
	   * var res = source.replay(null, 3, 500, scheduler);
	   * var res = source.replay(function (x) { return x.take(6).repeat(); }, 3, 500, scheduler);
	   *
	   * @param selector [Optional] Selector function which can use the multicasted source sequence as many times as needed, without causing multiple subscriptions to the source sequence. Subscribers to the given source will receive all the notifications of the source subject to the specified replay buffer trimming policy.
	   * @param bufferSize [Optional] Maximum element count of the replay buffer.
	   * @param windowSize [Optional] Maximum time length of the replay buffer.
	   * @param scheduler [Optional] Scheduler where connected observers within the selector function will be invoked on.
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source sequence within a selector function.
	   */
	  observableProto.replay = function (selector, bufferSize, windowSize, scheduler) {
	    return selector && isFunction(selector) ?
	      this.multicast(function () { return new ReplaySubject(bufferSize, windowSize, scheduler); }, selector) :
	      this.multicast(new ReplaySubject(bufferSize, windowSize, scheduler));
	  };
	
	  /**
	   * Returns an observable sequence that shares a single subscription to the underlying sequence replaying notifications subject to a maximum time length for the replay buffer.
	   * This operator is a specialization of replay which creates a subscription when the number of observers goes from zero to one, then shares that subscription with all subsequent observers until the number of observers returns to zero, at which point the subscription is disposed.
	   *
	   * @example
	   * var res = source.shareReplay(3);
	   * var res = source.shareReplay(3, 500);
	   * var res = source.shareReplay(3, 500, scheduler);
	   *
	
	   * @param bufferSize [Optional] Maximum element count of the replay buffer.
	   * @param window [Optional] Maximum time length of the replay buffer.
	   * @param scheduler [Optional] Scheduler where connected observers within the selector function will be invoked on.
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source sequence.
	   */
	  observableProto.shareReplay = function (bufferSize, windowSize, scheduler) {
	    return this.replay(null, bufferSize, windowSize, scheduler).refCount();
	  };
	
	  var InnerSubscription = function (s, o) {
	    this._s = s;
	    this._o = o;
	  };
	
	  InnerSubscription.prototype.dispose = function () {
	    if (!this._s.isDisposed && this._o !== null) {
	      var idx = this._s.observers.indexOf(this._o);
	      this._s.observers.splice(idx, 1);
	      this._o = null;
	    }
	  };
	
	  var RefCountObservable = (function (__super__) {
	    inherits(RefCountObservable, __super__);
	    function RefCountObservable(source) {
	      this.source = source;
	      this._count = 0;
	      this._connectableSubscription = null;
	      __super__.call(this);
	    }
	
	    RefCountObservable.prototype.subscribeCore = function (o) {
	      var subscription = this.source.subscribe(o);
	      ++this._count === 1 && (this._connectableSubscription = this.source.connect());
	      return new RefCountDisposable(this, subscription);
	    };
	
	    function RefCountDisposable(p, s) {
	      this._p = p;
	      this._s = s;
	      this.isDisposed = false;
	    }
	
	    RefCountDisposable.prototype.dispose = function () {
	      if (!this.isDisposed) {
	        this.isDisposed = true;
	        this._s.dispose();
	        --this._p._count === 0 && this._p._connectableSubscription.dispose();
	      }
	    };
	
	    return RefCountObservable;
	  }(ObservableBase));
	
	  var ConnectableObservable = Rx.ConnectableObservable = (function (__super__) {
	    inherits(ConnectableObservable, __super__);
	    function ConnectableObservable(source, subject) {
	      this.source = source;
	      this._connection = null;
	      this._source = source.asObservable();
	      this._subject = subject;
	      __super__.call(this);
	    }
	
	    function ConnectDisposable(parent, subscription) {
	      this._p = parent;
	      this._s = subscription;
	    }
	
	    ConnectDisposable.prototype.dispose = function () {
	      if (this._s) {
	        this._s.dispose();
	        this._s = null;
	        this._p._connection = null;
	      }
	    };
	
	    ConnectableObservable.prototype.connect = function () {
	      if (!this._connection) {
	        var subscription = this._source.subscribe(this._subject);
	        this._connection = new ConnectDisposable(this, subscription);
	      }
	      return this._connection;
	    };
	
	    ConnectableObservable.prototype._subscribe = function (o) {
	      return this._subject.subscribe(o);
	    };
	
	    ConnectableObservable.prototype.refCount = function () {
	      return new RefCountObservable(this);
	    };
	
	    return ConnectableObservable;
	  }(Observable));
	
	  /**
	   * Returns an observable sequence that shares a single subscription to the underlying sequence. This observable sequence
	   * can be resubscribed to, even if all prior subscriptions have ended. (unlike `.publish().refCount()`)
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source.
	   */
	  observableProto.singleInstance = function() {
	    var source = this, hasObservable = false, observable;
	
	    function getObservable() {
	      if (!hasObservable) {
	        hasObservable = true;
	        observable = source['finally'](function() { hasObservable = false; }).publish().refCount();
	      }
	      return observable;
	    }
	
	    return new AnonymousObservable(function(o) {
	      return getObservable().subscribe(o);
	    });
	  };
	
	  /**
	   *  Correlates the elements of two sequences based on overlapping durations.
	   *
	   *  @param {Observable} right The right observable sequence to join elements for.
	   *  @param {Function} leftDurationSelector A function to select the duration (expressed as an observable sequence) of each element of the left observable sequence, used to determine overlap.
	   *  @param {Function} rightDurationSelector A function to select the duration (expressed as an observable sequence) of each element of the right observable sequence, used to determine overlap.
	   *  @param {Function} resultSelector A function invoked to compute a result element for any two overlapping elements of the left and right observable sequences. The parameters passed to the function correspond with the elements from the left and right source sequences for which overlap occurs.
	   *  @returns {Observable} An observable sequence that contains result elements computed from source elements that have an overlapping duration.
	   */
	  observableProto.join = function (right, leftDurationSelector, rightDurationSelector, resultSelector) {
	    var left = this;
	    return new AnonymousObservable(function (o) {
	      var group = new CompositeDisposable();
	      var leftDone = false, rightDone = false;
	      var leftId = 0, rightId = 0;
	      var leftMap = new Map(), rightMap = new Map();
	      var handleError = function (e) { o.onError(e); };
	
	      group.add(left.subscribe(
	        function (value) {
	          var id = leftId++, md = new SingleAssignmentDisposable();
	
	          leftMap.set(id, value);
	          group.add(md);
	
	          var duration = tryCatch(leftDurationSelector)(value);
	          if (duration === errorObj) { return o.onError(duration.e); }
	
	          md.setDisposable(duration.take(1).subscribe(
	            noop,
	            handleError,
	            function () {
	              leftMap['delete'](id) && leftMap.size === 0 && leftDone && o.onCompleted();
	              group.remove(md);
	            }));
	
	          rightMap.forEach(function (v) {
	            var result = tryCatch(resultSelector)(value, v);
	            if (result === errorObj) { return o.onError(result.e); }
	            o.onNext(result);
	          });
	        },
	        handleError,
	        function () {
	          leftDone = true;
	          (rightDone || leftMap.size === 0) && o.onCompleted();
	        })
	      );
	
	      group.add(right.subscribe(
	        function (value) {
	          var id = rightId++, md = new SingleAssignmentDisposable();
	
	          rightMap.set(id, value);
	          group.add(md);
	
	          var duration = tryCatch(rightDurationSelector)(value);
	          if (duration === errorObj) { return o.onError(duration.e); }
	
	          md.setDisposable(duration.take(1).subscribe(
	            noop,
	            handleError,
	            function () {
	              rightMap['delete'](id) && rightMap.size === 0 && rightDone && o.onCompleted();
	              group.remove(md);
	            }));
	
	          leftMap.forEach(function (v) {
	            var result = tryCatch(resultSelector)(v, value);
	            if (result === errorObj) { return o.onError(result.e); }
	            o.onNext(result);
	          });
	        },
	        handleError,
	        function () {
	          rightDone = true;
	          (leftDone || rightMap.size === 0) && o.onCompleted();
	        })
	      );
	      return group;
	    }, left);
	  };
	
	  /**
	   *  Correlates the elements of two sequences based on overlapping durations, and groups the results.
	   *
	   *  @param {Observable} right The right observable sequence to join elements for.
	   *  @param {Function} leftDurationSelector A function to select the duration (expressed as an observable sequence) of each element of the left observable sequence, used to determine overlap.
	   *  @param {Function} rightDurationSelector A function to select the duration (expressed as an observable sequence) of each element of the right observable sequence, used to determine overlap.
	   *  @param {Function} resultSelector A function invoked to compute a result element for any element of the left sequence with overlapping elements from the right observable sequence. The first parameter passed to the function is an element of the left sequence. The second parameter passed to the function is an observable sequence with elements from the right sequence that overlap with the left sequence's element.
	   *  @returns {Observable} An observable sequence that contains result elements computed from source elements that have an overlapping duration.
	   */
	  observableProto.groupJoin = function (right, leftDurationSelector, rightDurationSelector, resultSelector) {
	    var left = this;
	    return new AnonymousObservable(function (o) {
	      var group = new CompositeDisposable();
	      var r = new RefCountDisposable(group);
	      var leftMap = new Map(), rightMap = new Map();
	      var leftId = 0, rightId = 0;
	      var handleError = function (e) { return function (v) { v.onError(e); }; };
	
	      function handleError(e) { };
	
	      group.add(left.subscribe(
	        function (value) {
	          var s = new Subject();
	          var id = leftId++;
	          leftMap.set(id, s);
	
	          var result = tryCatch(resultSelector)(value, addRef(s, r));
	          if (result === errorObj) {
	            leftMap.forEach(handleError(result.e));
	            return o.onError(result.e);
	          }
	          o.onNext(result);
	
	          rightMap.forEach(function (v) { s.onNext(v); });
	
	          var md = new SingleAssignmentDisposable();
	          group.add(md);
	
	          var duration = tryCatch(leftDurationSelector)(value);
	          if (duration === errorObj) {
	            leftMap.forEach(handleError(duration.e));
	            return o.onError(duration.e);
	          }
	
	          md.setDisposable(duration.take(1).subscribe(
	            noop,
	            function (e) {
	              leftMap.forEach(handleError(e));
	              o.onError(e);
	            },
	            function () {
	              leftMap['delete'](id) && s.onCompleted();
	              group.remove(md);
	            }));
	        },
	        function (e) {
	          leftMap.forEach(handleError(e));
	          o.onError(e);
	        },
	        function () { o.onCompleted(); })
	      );
	
	      group.add(right.subscribe(
	        function (value) {
	          var id = rightId++;
	          rightMap.set(id, value);
	
	          var md = new SingleAssignmentDisposable();
	          group.add(md);
	
	          var duration = tryCatch(rightDurationSelector)(value);
	          if (duration === errorObj) {
	            leftMap.forEach(handleError(duration.e));
	            return o.onError(duration.e);
	          }
	
	          md.setDisposable(duration.take(1).subscribe(
	            noop,
	            function (e) {
	              leftMap.forEach(handleError(e));
	              o.onError(e);
	            },
	            function () {
	              rightMap['delete'](id);
	              group.remove(md);
	            }));
	
	          leftMap.forEach(function (v) { v.onNext(value); });
	        },
	        function (e) {
	          leftMap.forEach(handleError(e));
	          o.onError(e);
	        })
	      );
	
	      return r;
	    }, left);
	  };
	
	  function toArray(x) { return x.toArray(); }
	
	  /**
	   *  Projects each element of an observable sequence into zero or more buffers.
	   *  @param {Mixed} bufferOpeningsOrClosingSelector Observable sequence whose elements denote the creation of new windows, or, a function invoked to define the boundaries of the produced windows (a new window is started when the previous one is closed, resulting in non-overlapping windows).
	   *  @param {Function} [bufferClosingSelector] A function invoked to define the closing of each produced window. If a closing selector function is specified for the first parameter, this parameter is ignored.
	   *  @returns {Observable} An observable sequence of windows.
	   */
	  observableProto.buffer = function () {
	    return this.window.apply(this, arguments)
	      .flatMap(toArray);
	  };
	
	  /**
	   *  Projects each element of an observable sequence into zero or more windows.
	   *
	   *  @param {Mixed} windowOpeningsOrClosingSelector Observable sequence whose elements denote the creation of new windows, or, a function invoked to define the boundaries of the produced windows (a new window is started when the previous one is closed, resulting in non-overlapping windows).
	   *  @param {Function} [windowClosingSelector] A function invoked to define the closing of each produced window. If a closing selector function is specified for the first parameter, this parameter is ignored.
	   *  @returns {Observable} An observable sequence of windows.
	   */
	  observableProto.window = function (windowOpeningsOrClosingSelector, windowClosingSelector) {
	    if (arguments.length === 1 && typeof arguments[0] !== 'function') {
	      return observableWindowWithBoundaries.call(this, windowOpeningsOrClosingSelector);
	    }
	    return typeof windowOpeningsOrClosingSelector === 'function' ?
	      observableWindowWithClosingSelector.call(this, windowOpeningsOrClosingSelector) :
	      observableWindowWithOpenings.call(this, windowOpeningsOrClosingSelector, windowClosingSelector);
	  };
	
	  function observableWindowWithOpenings(windowOpenings, windowClosingSelector) {
	    return windowOpenings.groupJoin(this, windowClosingSelector, observableEmpty, function (_, win) {
	      return win;
	    });
	  }
	
	  function observableWindowWithBoundaries(windowBoundaries) {
	    var source = this;
	    return new AnonymousObservable(function (observer) {
	      var win = new Subject(),
	        d = new CompositeDisposable(),
	        r = new RefCountDisposable(d);
	
	      observer.onNext(addRef(win, r));
	
	      d.add(source.subscribe(function (x) {
	        win.onNext(x);
	      }, function (err) {
	        win.onError(err);
	        observer.onError(err);
	      }, function () {
	        win.onCompleted();
	        observer.onCompleted();
	      }));
	
	      isPromise(windowBoundaries) && (windowBoundaries = observableFromPromise(windowBoundaries));
	
	      d.add(windowBoundaries.subscribe(function (w) {
	        win.onCompleted();
	        win = new Subject();
	        observer.onNext(addRef(win, r));
	      }, function (err) {
	        win.onError(err);
	        observer.onError(err);
	      }, function () {
	        win.onCompleted();
	        observer.onCompleted();
	      }));
	
	      return r;
	    }, source);
	  }
	
	  function observableWindowWithClosingSelector(windowClosingSelector) {
	    var source = this;
	    return new AnonymousObservable(function (observer) {
	      var m = new SerialDisposable(),
	        d = new CompositeDisposable(m),
	        r = new RefCountDisposable(d),
	        win = new Subject();
	      observer.onNext(addRef(win, r));
	      d.add(source.subscribe(function (x) {
	          win.onNext(x);
	      }, function (err) {
	          win.onError(err);
	          observer.onError(err);
	      }, function () {
	          win.onCompleted();
	          observer.onCompleted();
	      }));
	
	      function createWindowClose () {
	        var windowClose;
	        try {
	          windowClose = windowClosingSelector();
	        } catch (e) {
	          observer.onError(e);
	          return;
	        }
	
	        isPromise(windowClose) && (windowClose = observableFromPromise(windowClose));
	
	        var m1 = new SingleAssignmentDisposable();
	        m.setDisposable(m1);
	        m1.setDisposable(windowClose.take(1).subscribe(noop, function (err) {
	          win.onError(err);
	          observer.onError(err);
	        }, function () {
	          win.onCompleted();
	          win = new Subject();
	          observer.onNext(addRef(win, r));
	          createWindowClose();
	        }));
	      }
	
	      createWindowClose();
	      return r;
	    }, source);
	  }
	
	  var PairwiseObservable = (function (__super__) {
	    inherits(PairwiseObservable, __super__);
	    function PairwiseObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    PairwiseObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new PairwiseObserver(o));
	    };
	
	    return PairwiseObservable;
	  }(ObservableBase));
	
	  var PairwiseObserver = (function(__super__) {
	    inherits(PairwiseObserver, __super__);
	    function PairwiseObserver(o) {
	      this._o = o;
	      this._p = null;
	      this._hp = false;
	      __super__.call(this);
	    }
	
	    PairwiseObserver.prototype.next = function (x) {
	      if (this._hp) {
	        this._o.onNext([this._p, x]);
	      } else {
	        this._hp = true;
	      }
	      this._p = x;
	    };
	    PairwiseObserver.prototype.error = function (err) { this._o.onError(err); };
	    PairwiseObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return PairwiseObserver;
	  }(AbstractObserver));
	
	  /**
	   * Returns a new observable that triggers on the second and subsequent triggerings of the input observable.
	   * The Nth triggering of the input observable passes the arguments from the N-1th and Nth triggering as a pair.
	   * The argument passed to the N-1th triggering is held in hidden internal state until the Nth triggering occurs.
	   * @returns {Observable} An observable that triggers on successive pairs of observations from the input observable as an array.
	   */
	  observableProto.pairwise = function () {
	    return new PairwiseObservable(this);
	  };
	
	  /**
	   * Returns two observables which partition the observations of the source by the given function.
	   * The first will trigger observations for those values for which the predicate returns true.
	   * The second will trigger observations for those values where the predicate returns false.
	   * The predicate is executed once for each subscribed observer.
	   * Both also propagate all error observations arising from the source and each completes
	   * when the source completes.
	   * @param {Function} predicate
	   *    The function to determine which output Observable will trigger a particular observation.
	   * @returns {Array}
	   *    An array of observables. The first triggers when the predicate returns true,
	   *    and the second triggers when the predicate returns false.
	  */
	  observableProto.partition = function(predicate, thisArg) {
	    var fn = bindCallback(predicate, thisArg, 3);
	    return [
	      this.filter(predicate, thisArg),
	      this.filter(function (x, i, o) { return !fn(x, i, o); })
	    ];
	  };
	
	  var WhileEnumerable = (function(__super__) {
	    inherits(WhileEnumerable, __super__);
	    function WhileEnumerable(c, s) {
	      this.c = c;
	      this.s = s;
	    }
	    WhileEnumerable.prototype[$iterator$] = function () {
	      var self = this;
	      return {
	        next: function () {
	          return self.c() ?
	           { done: false, value: self.s } :
	           { done: true, value: void 0 };
	        }
	      };
	    };
	    return WhileEnumerable;
	  }(Enumerable));
	  
	  function enumerableWhile(condition, source) {
	    return new WhileEnumerable(condition, source);
	  }  
	
	   /**
	   *  Returns an observable sequence that is the result of invoking the selector on the source sequence, without sharing subscriptions.
	   *  This operator allows for a fluent style of writing queries that use the same sequence multiple times.
	   *
	   * @param {Function} selector Selector function which can use the source sequence as many times as needed, without sharing subscriptions to the source sequence.
	   * @returns {Observable} An observable sequence that contains the elements of a sequence produced by multicasting the source sequence within a selector function.
	   */
	  observableProto.letBind = observableProto['let'] = function (func) {
	    return func(this);
	  };
	
	   /**
	   *  Determines whether an observable collection contains values. 
	   *
	   * @example
	   *  1 - res = Rx.Observable.if(condition, obs1);
	   *  2 - res = Rx.Observable.if(condition, obs1, obs2);
	   *  3 - res = Rx.Observable.if(condition, obs1, scheduler);
	   * @param {Function} condition The condition which determines if the thenSource or elseSource will be run.
	   * @param {Observable} thenSource The observable sequence or Promise that will be run if the condition function returns true.
	   * @param {Observable} [elseSource] The observable sequence or Promise that will be run if the condition function returns false. If this is not provided, it defaults to Rx.Observabe.Empty with the specified scheduler.
	   * @returns {Observable} An observable sequence which is either the thenSource or elseSource.
	   */
	  Observable['if'] = function (condition, thenSource, elseSourceOrScheduler) {
	    return observableDefer(function () {
	      elseSourceOrScheduler || (elseSourceOrScheduler = observableEmpty());
	
	      isPromise(thenSource) && (thenSource = observableFromPromise(thenSource));
	      isPromise(elseSourceOrScheduler) && (elseSourceOrScheduler = observableFromPromise(elseSourceOrScheduler));
	
	      // Assume a scheduler for empty only
	      typeof elseSourceOrScheduler.now === 'function' && (elseSourceOrScheduler = observableEmpty(elseSourceOrScheduler));
	      return condition() ? thenSource : elseSourceOrScheduler;
	    });
	  };
	
	   /**
	   *  Concatenates the observable sequences obtained by running the specified result selector for each element in source.
	   * There is an alias for this method called 'forIn' for browsers <IE9
	   * @param {Array} sources An array of values to turn into an observable sequence.
	   * @param {Function} resultSelector A function to apply to each item in the sources array to turn it into an observable sequence.
	   * @returns {Observable} An observable sequence from the concatenated observable sequences.
	   */
	  Observable['for'] = Observable.forIn = function (sources, resultSelector, thisArg) {
	    return enumerableOf(sources, resultSelector, thisArg).concat();
	  };
	
	   /**
	   *  Repeats source as long as condition holds emulating a while loop.
	   * There is an alias for this method called 'whileDo' for browsers <IE9
	   *
	   * @param {Function} condition The condition which determines if the source will be repeated.
	   * @param {Observable} source The observable sequence that will be run if the condition function returns true.
	   * @returns {Observable} An observable sequence which is repeated as long as the condition holds.
	   */
	  var observableWhileDo = Observable['while'] = Observable.whileDo = function (condition, source) {
	    isPromise(source) && (source = observableFromPromise(source));
	    return enumerableWhile(condition, source).concat();
	  };
	
	   /**
	   *  Repeats source as long as condition holds emulating a do while loop.
	   *
	   * @param {Function} condition The condition which determines if the source will be repeated.
	   * @param {Observable} source The observable sequence that will be run if the condition function returns true.
	   * @returns {Observable} An observable sequence which is repeated as long as the condition holds.
	   */
	  observableProto.doWhile = function (condition) {
	    return observableConcat([this, observableWhileDo(condition, this)]);
	  };
	
	   /**
	   *  Uses selector to determine which source in sources to use.
	   * @param {Function} selector The function which extracts the value for to test in a case statement.
	   * @param {Array} sources A object which has keys which correspond to the case statement labels.
	   * @param {Observable} [elseSource] The observable sequence or Promise that will be run if the sources are not matched. If this is not provided, it defaults to Rx.Observabe.empty with the specified scheduler.
	   *
	   * @returns {Observable} An observable sequence which is determined by a case statement.
	   */
	  Observable['case'] = function (selector, sources, defaultSourceOrScheduler) {
	    return observableDefer(function () {
	      isPromise(defaultSourceOrScheduler) && (defaultSourceOrScheduler = observableFromPromise(defaultSourceOrScheduler));
	      defaultSourceOrScheduler || (defaultSourceOrScheduler = observableEmpty());
	
	      isScheduler(defaultSourceOrScheduler) && (defaultSourceOrScheduler = observableEmpty(defaultSourceOrScheduler));
	
	      var result = sources[selector()];
	      isPromise(result) && (result = observableFromPromise(result));
	
	      return result || defaultSourceOrScheduler;
	    });
	  };
	
	  var ExpandObservable = (function(__super__) {
	    inherits(ExpandObservable, __super__);
	    function ExpandObservable(source, fn, scheduler) {
	      this.source = source;
	      this._fn = fn;
	      this._scheduler = scheduler;
	      __super__.call(this);
	    }
	
	    function scheduleRecursive(args, recurse) {
	      var state = args[0], self = args[1];
	      var work;
	      if (state.q.length > 0) {
	        work = state.q.shift();
	      } else {
	        state.isAcquired = false;
	        return;
	      }
	      var m1 = new SingleAssignmentDisposable();
	      state.d.add(m1);
	      m1.setDisposable(work.subscribe(new ExpandObserver(state, self, m1)));
	      recurse([state, self]);
	    }
	
	    ExpandObservable.prototype._ensureActive = function (state) {
	      var isOwner = false;
	      if (state.q.length > 0) {
	        isOwner = !state.isAcquired;
	        state.isAcquired = true;
	      }
	      isOwner && state.m.setDisposable(this._scheduler.scheduleRecursive([state, this], scheduleRecursive));
	    };
	
	    ExpandObservable.prototype.subscribeCore = function (o) {
	      var m = new SerialDisposable(),
	        d = new CompositeDisposable(m),
	        state = {
	          q: [],
	          m: m,
	          d: d,
	          activeCount: 0,
	          isAcquired: false,
	          o: o
	        };
	
	      state.q.push(this.source);
	      state.activeCount++;
	      this._ensureActive(state);
	      return d;
	    };
	
	    return ExpandObservable;
	  }(ObservableBase));
	
	  var ExpandObserver = (function(__super__) {
	    inherits(ExpandObserver, __super__);
	    function ExpandObserver(state, parent, m1) {
	      this._s = state;
	      this._p = parent;
	      this._m1 = m1;
	      __super__.call(this);
	    }
	
	    ExpandObserver.prototype.next = function (x) {
	      this._s.o.onNext(x);
	      var result = tryCatch(this._p._fn)(x);
	      if (result === errorObj) { return this._s.o.onError(result.e); }
	      this._s.q.push(result);
	      this._s.activeCount++;
	      this._p._ensureActive(this._s);
	    };
	
	    ExpandObserver.prototype.error = function (e) {
	      this._s.o.onError(e);
	    };
	
	    ExpandObserver.prototype.completed = function () {
	      this._s.d.remove(this._m1);
	      this._s.activeCount--;
	      this._s.activeCount === 0 && this._s.o.onCompleted();
	    };
	
	    return ExpandObserver;
	  }(AbstractObserver));
	
	   /**
	   *  Expands an observable sequence by recursively invoking selector.
	   *
	   * @param {Function} selector Selector function to invoke for each produced element, resulting in another sequence to which the selector will be invoked recursively again.
	   * @param {Scheduler} [scheduler] Scheduler on which to perform the expansion. If not provided, this defaults to the current thread scheduler.
	   * @returns {Observable} An observable sequence containing all the elements produced by the recursive expansion.
	   */
	  observableProto.expand = function (selector, scheduler) {
	    isScheduler(scheduler) || (scheduler = currentThreadScheduler);
	    return new ExpandObservable(this, selector, scheduler);
	  };
	
	  function argumentsToArray() {
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    return args;
	  }
	
	  var ForkJoinObservable = (function (__super__) {
	    inherits(ForkJoinObservable, __super__);
	    function ForkJoinObservable(sources, cb) {
	      this._sources = sources;
	      this._cb = cb;
	      __super__.call(this);
	    }
	
	    ForkJoinObservable.prototype.subscribeCore = function (o) {
	      if (this._sources.length === 0) {
	        o.onCompleted();
	        return disposableEmpty;
	      }
	
	      var count = this._sources.length;
	      var state = {
	        finished: false,
	        hasResults: new Array(count),
	        hasCompleted: new Array(count),
	        results: new Array(count)
	      };
	
	      var subscriptions = new CompositeDisposable();
	      for (var i = 0, len = this._sources.length; i < len; i++) {
	        var source = this._sources[i];
	        isPromise(source) && (source = observableFromPromise(source));
	        subscriptions.add(source.subscribe(new ForkJoinObserver(o, state, i, this._cb, subscriptions)));
	      }
	
	      return subscriptions;
	    };
	
	    return ForkJoinObservable;
	  }(ObservableBase));
	
	  var ForkJoinObserver = (function(__super__) {
	    inherits(ForkJoinObserver, __super__);
	    function ForkJoinObserver(o, s, i, cb, subs) {
	      this._o = o;
	      this._s = s;
	      this._i = i;
	      this._cb = cb;
	      this._subs = subs;
	      __super__.call(this);
	    }
	
	    ForkJoinObserver.prototype.next = function (x) {
	      if (!this._s.finished) {
	        this._s.hasResults[this._i] = true;
	        this._s.results[this._i] = x;
	      }
	    };
	
	    ForkJoinObserver.prototype.error = function (e) {
	      this._s.finished = true;
	      this._o.onError(e);
	      this._subs.dispose();
	    };
	
	    ForkJoinObserver.prototype.completed = function () {
	      if (!this._s.finished) {
	        if (!this._s.hasResults[this._i]) {
	          return this._o.onCompleted();
	        }
	        this._s.hasCompleted[this._i] = true;
	        for (var i = 0; i < this._s.results.length; i++) {
	          if (!this._s.hasCompleted[i]) { return; }
	        }
	        this._s.finished = true;
	
	        var res = tryCatch(this._cb).apply(null, this._s.results);
	        if (res === errorObj) { return this._o.onError(res.e); }
	
	        this._o.onNext(res);
	        this._o.onCompleted();
	      }
	    };
	
	    return ForkJoinObserver;
	  }(AbstractObserver));
	
	   /**
	   *  Runs all observable sequences in parallel and collect their last elements.
	   *
	   * @example
	   *  1 - res = Rx.Observable.forkJoin([obs1, obs2]);
	   *  1 - res = Rx.Observable.forkJoin(obs1, obs2, ...);
	   * @returns {Observable} An observable sequence with an array collecting the last elements of all the input sequences.
	   */
	  Observable.forkJoin = function () {
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    var resultSelector = isFunction(args[len - 1]) ? args.pop() : argumentsToArray;
	    Array.isArray(args[0]) && (args = args[0]);
	    return new ForkJoinObservable(args, resultSelector);
	  };
	
	   /**
	   *  Runs two observable sequences in parallel and combines their last elemenets.
	   * @param {Observable} second Second observable sequence.
	   * @param {Function} resultSelector Result selector function to invoke with the last elements of both sequences.
	   * @returns {Observable} An observable sequence with the result of calling the selector function with the last elements of both input sequences.
	   */
	  observableProto.forkJoin = function () {
	    var len = arguments.length, args = new Array(len);
	    for(var i = 0; i < len; i++) { args[i] = arguments[i]; }
	    if (Array.isArray(args[0])) {
	      args[0].unshift(this);
	    } else {
	      args.unshift(this);
	    }
	    return Observable.forkJoin.apply(null, args);
	  };
	
	  /**
	   * Comonadic bind operator.
	   * @param {Function} selector A transform function to apply to each element.
	   * @param {Object} scheduler Scheduler used to execute the operation. If not specified, defaults to the ImmediateScheduler.
	   * @returns {Observable} An observable sequence which results from the comonadic bind operation.
	   */
	  observableProto.manySelect = observableProto.extend = function (selector, scheduler) {
	    isScheduler(scheduler) || (scheduler = Rx.Scheduler.immediate);
	    var source = this;
	    return observableDefer(function () {
	      var chain;
	
	      return source
	        .map(function (x) {
	          var curr = new ChainObservable(x);
	
	          chain && chain.onNext(x);
	          chain = curr;
	
	          return curr;
	        })
	        .tap(
	          noop,
	          function (e) { chain && chain.onError(e); },
	          function () { chain && chain.onCompleted(); }
	        )
	        .observeOn(scheduler)
	        .map(selector);
	    }, source);
	  };
	
	  var ChainObservable = (function (__super__) {
	    inherits(ChainObservable, __super__);
	    function ChainObservable(head) {
	      __super__.call(this);
	      this.head = head;
	      this.tail = new AsyncSubject();
	    }
	
	    addProperties(ChainObservable.prototype, Observer, {
	      _subscribe: function (o) {
	        var g = new CompositeDisposable();
	        g.add(currentThreadScheduler.schedule(this, function (_, self) {
	          o.onNext(self.head);
	          g.add(self.tail.mergeAll().subscribe(o));
	        }));
	
	        return g;
	      },
	      onCompleted: function () {
	        this.onNext(Observable.empty());
	      },
	      onError: function (e) {
	        this.onNext(Observable['throw'](e));
	      },
	      onNext: function (v) {
	        this.tail.onNext(v);
	        this.tail.onCompleted();
	      }
	    });
	
	    return ChainObservable;
	
	  }(Observable));
	
	  var Map = root.Map || (function () {
	    function Map() {
	      this.size = 0;
	      this._values = [];
	      this._keys = [];
	    }
	
	    Map.prototype['delete'] = function (key) {
	      var i = this._keys.indexOf(key);
	      if (i === -1) { return false; }
	      this._values.splice(i, 1);
	      this._keys.splice(i, 1);
	      this.size--;
	      return true;
	    };
	
	    Map.prototype.get = function (key) {
	      var i = this._keys.indexOf(key);
	      return i === -1 ? undefined : this._values[i];
	    };
	
	    Map.prototype.set = function (key, value) {
	      var i = this._keys.indexOf(key);
	      if (i === -1) {
	        this._keys.push(key);
	        this._values.push(value);
	        this.size++;
	      } else {
	        this._values[i] = value;
	      }
	      return this;
	    };
	
	    Map.prototype.forEach = function (cb, thisArg) {
	      for (var i = 0; i < this.size; i++) {
	        cb.call(thisArg, this._values[i], this._keys[i]);
	      }
	    };
	
	    return Map;
	  }());
	
	  /**
	   * @constructor
	   * Represents a join pattern over observable sequences.
	   */
	  function Pattern(patterns) {
	    this.patterns = patterns;
	  }
	
	  /**
	   *  Creates a pattern that matches the current plan matches and when the specified observable sequences has an available value.
	   *  @param other Observable sequence to match in addition to the current pattern.
	   *  @return {Pattern} Pattern object that matches when all observable sequences in the pattern have an available value.
	   */
	  Pattern.prototype.and = function (other) {
	    return new Pattern(this.patterns.concat(other));
	  };
	
	  /**
	   *  Matches when all observable sequences in the pattern (specified using a chain of and operators) have an available value and projects the values.
	   *  @param {Function} selector Selector that will be invoked with available values from the source sequences, in the same order of the sequences in the pattern.
	   *  @return {Plan} Plan that produces the projected values, to be fed (with other plans) to the when operator.
	   */
	  Pattern.prototype.thenDo = function (selector) {
	    return new Plan(this, selector);
	  };
	
	  function Plan(expression, selector) {
	    this.expression = expression;
	    this.selector = selector;
	  }
	
	  function handleOnError(o) { return function (e) { o.onError(e); }; }
	  function handleOnNext(self, observer) {
	    return function onNext () {
	      var result = tryCatch(self.selector).apply(self, arguments);
	      if (result === errorObj) { return observer.onError(result.e); }
	      observer.onNext(result);
	    };
	  }
	
	  Plan.prototype.activate = function (externalSubscriptions, observer, deactivate) {
	    var joinObservers = [], errHandler = handleOnError(observer);
	    for (var i = 0, len = this.expression.patterns.length; i < len; i++) {
	      joinObservers.push(planCreateObserver(externalSubscriptions, this.expression.patterns[i], errHandler));
	    }
	    var activePlan = new ActivePlan(joinObservers, handleOnNext(this, observer), function () {
	      for (var j = 0, jlen = joinObservers.length; j < jlen; j++) {
	        joinObservers[j].removeActivePlan(activePlan);
	      }
	      deactivate(activePlan);
	    });
	    for (i = 0, len = joinObservers.length; i < len; i++) {
	      joinObservers[i].addActivePlan(activePlan);
	    }
	    return activePlan;
	  };
	
	  function planCreateObserver(externalSubscriptions, observable, onError) {
	    var entry = externalSubscriptions.get(observable);
	    if (!entry) {
	      var observer = new JoinObserver(observable, onError);
	      externalSubscriptions.set(observable, observer);
	      return observer;
	    }
	    return entry;
	  }
	
	  function ActivePlan(joinObserverArray, onNext, onCompleted) {
	    this.joinObserverArray = joinObserverArray;
	    this.onNext = onNext;
	    this.onCompleted = onCompleted;
	    this.joinObservers = new Map();
	    for (var i = 0, len = this.joinObserverArray.length; i < len; i++) {
	      var joinObserver = this.joinObserverArray[i];
	      this.joinObservers.set(joinObserver, joinObserver);
	    }
	  }
	
	  ActivePlan.prototype.dequeue = function () {
	    this.joinObservers.forEach(function (v) { v.queue.shift(); });
	  };
	
	  ActivePlan.prototype.match = function () {
	    var i, len, hasValues = true;
	    for (i = 0, len = this.joinObserverArray.length; i < len; i++) {
	      if (this.joinObserverArray[i].queue.length === 0) {
	        hasValues = false;
	        break;
	      }
	    }
	    if (hasValues) {
	      var firstValues = [],
	          isCompleted = false;
	      for (i = 0, len = this.joinObserverArray.length; i < len; i++) {
	        firstValues.push(this.joinObserverArray[i].queue[0]);
	        this.joinObserverArray[i].queue[0].kind === 'C' && (isCompleted = true);
	      }
	      if (isCompleted) {
	        this.onCompleted();
	      } else {
	        this.dequeue();
	        var values = [];
	        for (i = 0, len = firstValues.length; i < firstValues.length; i++) {
	          values.push(firstValues[i].value);
	        }
	        this.onNext.apply(this, values);
	      }
	    }
	  };
	
	  var JoinObserver = (function (__super__) {
	    inherits(JoinObserver, __super__);
	
	    function JoinObserver(source, onError) {
	      __super__.call(this);
	      this.source = source;
	      this.onError = onError;
	      this.queue = [];
	      this.activePlans = [];
	      this.subscription = new SingleAssignmentDisposable();
	      this.isDisposed = false;
	    }
	
	    var JoinObserverPrototype = JoinObserver.prototype;
	
	    JoinObserverPrototype.next = function (notification) {
	      if (!this.isDisposed) {
	        if (notification.kind === 'E') {
	          return this.onError(notification.error);
	        }
	        this.queue.push(notification);
	        var activePlans = this.activePlans.slice(0);
	        for (var i = 0, len = activePlans.length; i < len; i++) {
	          activePlans[i].match();
	        }
	      }
	    };
	
	    JoinObserverPrototype.error = noop;
	    JoinObserverPrototype.completed = noop;
	
	    JoinObserverPrototype.addActivePlan = function (activePlan) {
	      this.activePlans.push(activePlan);
	    };
	
	    JoinObserverPrototype.subscribe = function () {
	      this.subscription.setDisposable(this.source.materialize().subscribe(this));
	    };
	
	    JoinObserverPrototype.removeActivePlan = function (activePlan) {
	      this.activePlans.splice(this.activePlans.indexOf(activePlan), 1);
	      this.activePlans.length === 0 && this.dispose();
	    };
	
	    JoinObserverPrototype.dispose = function () {
	      __super__.prototype.dispose.call(this);
	      if (!this.isDisposed) {
	        this.isDisposed = true;
	        this.subscription.dispose();
	      }
	    };
	
	    return JoinObserver;
	  } (AbstractObserver));
	
	  /**
	   *  Creates a pattern that matches when both observable sequences have an available value.
	   *
	   *  @param right Observable sequence to match with the current sequence.
	   *  @return {Pattern} Pattern object that matches when both observable sequences have an available value.
	   */
	  observableProto.and = function (right) {
	    return new Pattern([this, right]);
	  };
	
	  /**
	   *  Matches when the observable sequence has an available value and projects the value.
	   *
	   *  @param {Function} selector Selector that will be invoked for values in the source sequence.
	   *  @returns {Plan} Plan that produces the projected values, to be fed (with other plans) to the when operator.
	   */
	  observableProto.thenDo = function (selector) {
	    return new Pattern([this]).thenDo(selector);
	  };
	
	  /**
	   *  Joins together the results from several patterns.
	   *
	   *  @param plans A series of plans (specified as an Array of as a series of arguments) created by use of the Then operator on patterns.
	   *  @returns {Observable} Observable sequence with the results form matching several patterns.
	   */
	  Observable.when = function () {
	    var len = arguments.length, plans;
	    if (Array.isArray(arguments[0])) {
	      plans = arguments[0];
	    } else {
	      plans = new Array(len);
	      for(var i = 0; i < len; i++) { plans[i] = arguments[i]; }
	    }
	    return new AnonymousObservable(function (o) {
	      var activePlans = [],
	          externalSubscriptions = new Map();
	      var outObserver = observerCreate(
	        function (x) { o.onNext(x); },
	        function (err) {
	          externalSubscriptions.forEach(function (v) { v.onError(err); });
	          o.onError(err);
	        },
	        function (x) { o.onCompleted(); }
	      );
	      try {
	        for (var i = 0, len = plans.length; i < len; i++) {
	          activePlans.push(plans[i].activate(externalSubscriptions, outObserver, function (activePlan) {
	            var idx = activePlans.indexOf(activePlan);
	            activePlans.splice(idx, 1);
	            activePlans.length === 0 && o.onCompleted();
	          }));
	        }
	      } catch (e) {
	        return observableThrow(e).subscribe(o);
	      }
	      var group = new CompositeDisposable();
	      externalSubscriptions.forEach(function (joinObserver) {
	        joinObserver.subscribe();
	        group.add(joinObserver);
	      });
	
	      return group;
	    });
	  };
	
	  var TimerObservable = (function(__super__) {
	    inherits(TimerObservable, __super__);
	    function TimerObservable(dt, s) {
	      this._dt = dt;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    TimerObservable.prototype.subscribeCore = function (o) {
	      return this._s.scheduleFuture(o, this._dt, scheduleMethod);
	    };
	
	    function scheduleMethod(s, o) {
	      o.onNext(0);
	      o.onCompleted();
	    }
	
	    return TimerObservable;
	  }(ObservableBase));
	
	  function _observableTimer(dueTime, scheduler) {
	    return new TimerObservable(dueTime, scheduler);
	  }
	
	  function observableTimerDateAndPeriod(dueTime, period, scheduler) {
	    return new AnonymousObservable(function (observer) {
	      var d = dueTime, p = normalizeTime(period);
	      return scheduler.scheduleRecursiveFuture(0, d, function (count, self) {
	        if (p > 0) {
	          var now = scheduler.now();
	          d = new Date(d.getTime() + p);
	          d.getTime() <= now && (d = new Date(now + p));
	        }
	        observer.onNext(count);
	        self(count + 1, new Date(d));
	      });
	    });
	  }
	
	  function observableTimerTimeSpanAndPeriod(dueTime, period, scheduler) {
	    return dueTime === period ?
	      new AnonymousObservable(function (observer) {
	        return scheduler.schedulePeriodic(0, period, function (count) {
	          observer.onNext(count);
	          return count + 1;
	        });
	      }) :
	      observableDefer(function () {
	        return observableTimerDateAndPeriod(new Date(scheduler.now() + dueTime), period, scheduler);
	      });
	  }
	
	  /**
	   *  Returns an observable sequence that produces a value after each period.
	   *
	   * @example
	   *  1 - res = Rx.Observable.interval(1000);
	   *  2 - res = Rx.Observable.interval(1000, Rx.Scheduler.timeout);
	   *
	   * @param {Number} period Period for producing the values in the resulting sequence (specified as an integer denoting milliseconds).
	   * @param {Scheduler} [scheduler] Scheduler to run the timer on. If not specified, Rx.Scheduler.timeout is used.
	   * @returns {Observable} An observable sequence that produces a value after each period.
	   */
	  var observableinterval = Observable.interval = function (period, scheduler) {
	    return observableTimerTimeSpanAndPeriod(period, period, isScheduler(scheduler) ? scheduler : defaultScheduler);
	  };
	
	  /**
	   *  Returns an observable sequence that produces a value after dueTime has elapsed and then after each period.
	   * @param {Number} dueTime Absolute (specified as a Date object) or relative time (specified as an integer denoting milliseconds) at which to produce the first value.
	   * @param {Mixed} [periodOrScheduler]  Period to produce subsequent values (specified as an integer denoting milliseconds), or the scheduler to run the timer on. If not specified, the resulting timer is not recurring.
	   * @param {Scheduler} [scheduler]  Scheduler to run the timer on. If not specified, the timeout scheduler is used.
	   * @returns {Observable} An observable sequence that produces a value after due time has elapsed and then each period.
	   */
	  var observableTimer = Observable.timer = function (dueTime, periodOrScheduler, scheduler) {
	    var period;
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    if (periodOrScheduler != null && typeof periodOrScheduler === 'number') {
	      period = periodOrScheduler;
	    } else if (isScheduler(periodOrScheduler)) {
	      scheduler = periodOrScheduler;
	    }
	    if ((dueTime instanceof Date || typeof dueTime === 'number') && period === undefined) {
	      return _observableTimer(dueTime, scheduler);
	    }
	    if (dueTime instanceof Date && period !== undefined) {
	      return observableTimerDateAndPeriod(dueTime, periodOrScheduler, scheduler);
	    }
	    return observableTimerTimeSpanAndPeriod(dueTime, period, scheduler);
	  };
	
	  function observableDelayRelative(source, dueTime, scheduler) {
	    return new AnonymousObservable(function (o) {
	      var active = false,
	        cancelable = new SerialDisposable(),
	        exception = null,
	        q = [],
	        running = false,
	        subscription;
	      subscription = source.materialize().timestamp(scheduler).subscribe(function (notification) {
	        var d, shouldRun;
	        if (notification.value.kind === 'E') {
	          q = [];
	          q.push(notification);
	          exception = notification.value.error;
	          shouldRun = !running;
	        } else {
	          q.push({ value: notification.value, timestamp: notification.timestamp + dueTime });
	          shouldRun = !active;
	          active = true;
	        }
	        if (shouldRun) {
	          if (exception !== null) {
	            o.onError(exception);
	          } else {
	            d = new SingleAssignmentDisposable();
	            cancelable.setDisposable(d);
	            d.setDisposable(scheduler.scheduleRecursiveFuture(null, dueTime, function (_, self) {
	              var e, recurseDueTime, result, shouldRecurse;
	              if (exception !== null) {
	                return;
	              }
	              running = true;
	              do {
	                result = null;
	                if (q.length > 0 && q[0].timestamp - scheduler.now() <= 0) {
	                  result = q.shift().value;
	                }
	                if (result !== null) {
	                  result.accept(o);
	                }
	              } while (result !== null);
	              shouldRecurse = false;
	              recurseDueTime = 0;
	              if (q.length > 0) {
	                shouldRecurse = true;
	                recurseDueTime = Math.max(0, q[0].timestamp - scheduler.now());
	              } else {
	                active = false;
	              }
	              e = exception;
	              running = false;
	              if (e !== null) {
	                o.onError(e);
	              } else if (shouldRecurse) {
	                self(null, recurseDueTime);
	              }
	            }));
	          }
	        }
	      });
	      return new BinaryDisposable(subscription, cancelable);
	    }, source);
	  }
	
	  function observableDelayAbsolute(source, dueTime, scheduler) {
	    return observableDefer(function () {
	      return observableDelayRelative(source, dueTime - scheduler.now(), scheduler);
	    });
	  }
	
	  function delayWithSelector(source, subscriptionDelay, delayDurationSelector) {
	    var subDelay, selector;
	    if (isFunction(subscriptionDelay)) {
	      selector = subscriptionDelay;
	    } else {
	      subDelay = subscriptionDelay;
	      selector = delayDurationSelector;
	    }
	    return new AnonymousObservable(function (o) {
	      var delays = new CompositeDisposable(), atEnd = false, subscription = new SerialDisposable();
	
	      function start() {
	        subscription.setDisposable(source.subscribe(
	          function (x) {
	            var delay = tryCatch(selector)(x);
	            if (delay === errorObj) { return o.onError(delay.e); }
	            var d = new SingleAssignmentDisposable();
	            delays.add(d);
	            d.setDisposable(delay.subscribe(
	              function () {
	                o.onNext(x);
	                delays.remove(d);
	                done();
	              },
	              function (e) { o.onError(e); },
	              function () {
	                o.onNext(x);
	                delays.remove(d);
	                done();
	              }
	            ));
	          },
	          function (e) { o.onError(e); },
	          function () {
	            atEnd = true;
	            subscription.dispose();
	            done();
	          }
	        ));
	      }
	
	      function done () {
	        atEnd && delays.length === 0 && o.onCompleted();
	      }
	
	      if (!subDelay) {
	        start();
	      } else {
	        subscription.setDisposable(subDelay.subscribe(start, function (e) { o.onError(e); }, start));
	      }
	
	      return new BinaryDisposable(subscription, delays);
	    }, source);
	  }
	
	  /**
	   *  Time shifts the observable sequence by dueTime.
	   *  The relative time intervals between the values are preserved.
	   *
	   * @param {Number} dueTime Absolute (specified as a Date object) or relative time (specified as an integer denoting milliseconds) by which to shift the observable sequence.
	   * @param {Scheduler} [scheduler] Scheduler to run the delay timers on. If not specified, the timeout scheduler is used.
	   * @returns {Observable} Time-shifted sequence.
	   */
	  observableProto.delay = function () {
	    var firstArg = arguments[0];
	    if (typeof firstArg === 'number' || firstArg instanceof Date) {
	      var dueTime = firstArg, scheduler = arguments[1];
	      isScheduler(scheduler) || (scheduler = defaultScheduler);
	      return dueTime instanceof Date ?
	        observableDelayAbsolute(this, dueTime, scheduler) :
	        observableDelayRelative(this, dueTime, scheduler);
	    } else if (Observable.isObservable(firstArg) || isFunction(firstArg)) {
	      return delayWithSelector(this, firstArg, arguments[1]);
	    } else {
	      throw new Error('Invalid arguments');
	    }
	  };
	
	  var DebounceObservable = (function (__super__) {
	    inherits(DebounceObservable, __super__);
	    function DebounceObservable(source, dt, s) {
	      isScheduler(s) || (s = defaultScheduler);
	      this.source = source;
	      this._dt = dt;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    DebounceObservable.prototype.subscribeCore = function (o) {
	      var cancelable = new SerialDisposable();
	      return new BinaryDisposable(
	        this.source.subscribe(new DebounceObserver(o, this._dt, this._s, cancelable)),
	        cancelable);
	    };
	
	    return DebounceObservable;
	  }(ObservableBase));
	
	  var DebounceObserver = (function (__super__) {
	    inherits(DebounceObserver, __super__);
	    function DebounceObserver(observer, dueTime, scheduler, cancelable) {
	      this._o = observer;
	      this._d = dueTime;
	      this._scheduler = scheduler;
	      this._c = cancelable;
	      this._v = null;
	      this._hv = false;
	      this._id = 0;
	      __super__.call(this);
	    }
	
	    function scheduleFuture(s, state) {
	      state.self._hv && state.self._id === state.currentId && state.self._o.onNext(state.x);
	      state.self._hv = false;
	    }
	
	    DebounceObserver.prototype.next = function (x) {
	      this._hv = true;
	      this._v = x;
	      var currentId = ++this._id, d = new SingleAssignmentDisposable();
	      this._c.setDisposable(d);
	      d.setDisposable(this._scheduler.scheduleFuture(this, this._d, function (_, self) {
	        self._hv && self._id === currentId && self._o.onNext(x);
	        self._hv = false;
	      }));
	    };
	
	    DebounceObserver.prototype.error = function (e) {
	      this._c.dispose();
	      this._o.onError(e);
	      this._hv = false;
	      this._id++;
	    };
	
	    DebounceObserver.prototype.completed = function () {
	      this._c.dispose();
	      this._hv && this._o.onNext(this._v);
	      this._o.onCompleted();
	      this._hv = false;
	      this._id++;
	    };
	
	    return DebounceObserver;
	  }(AbstractObserver));
	
	  function debounceWithSelector(source, durationSelector) {
	    return new AnonymousObservable(function (o) {
	      var value, hasValue = false, cancelable = new SerialDisposable(), id = 0;
	      var subscription = source.subscribe(
	        function (x) {
	          var throttle = tryCatch(durationSelector)(x);
	          if (throttle === errorObj) { return o.onError(throttle.e); }
	
	          isPromise(throttle) && (throttle = observableFromPromise(throttle));
	
	          hasValue = true;
	          value = x;
	          id++;
	          var currentid = id, d = new SingleAssignmentDisposable();
	          cancelable.setDisposable(d);
	          d.setDisposable(throttle.subscribe(
	            function () {
	              hasValue && id === currentid && o.onNext(value);
	              hasValue = false;
	              d.dispose();
	            },
	            function (e) { o.onError(e); },
	            function () {
	              hasValue && id === currentid && o.onNext(value);
	              hasValue = false;
	              d.dispose();
	            }
	          ));
	        },
	        function (e) {
	          cancelable.dispose();
	          o.onError(e);
	          hasValue = false;
	          id++;
	        },
	        function () {
	          cancelable.dispose();
	          hasValue && o.onNext(value);
	          o.onCompleted();
	          hasValue = false;
	          id++;
	        }
	      );
	      return new BinaryDisposable(subscription, cancelable);
	    }, source);
	  }
	
	  observableProto.debounce = function () {
	    if (isFunction (arguments[0])) {
	      return debounceWithSelector(this, arguments[0]);
	    } else if (typeof arguments[0] === 'number') {
	      return new DebounceObservable(this, arguments[0], arguments[1]);
	    } else {
	      throw new Error('Invalid arguments');
	    }
	  };
	
	  /**
	   *  Projects each element of an observable sequence into zero or more windows which are produced based on timing information.
	   * @param {Number} timeSpan Length of each window (specified as an integer denoting milliseconds).
	   * @param {Mixed} [timeShiftOrScheduler]  Interval between creation of consecutive windows (specified as an integer denoting milliseconds), or an optional scheduler parameter. If not specified, the time shift corresponds to the timeSpan parameter, resulting in non-overlapping adjacent windows.
	   * @param {Scheduler} [scheduler]  Scheduler to run windowing timers on. If not specified, the timeout scheduler is used.
	   * @returns {Observable} An observable sequence of windows.
	   */
	  observableProto.windowWithTime = function (timeSpan, timeShiftOrScheduler, scheduler) {
	    var source = this, timeShift;
	    timeShiftOrScheduler == null && (timeShift = timeSpan);
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    if (typeof timeShiftOrScheduler === 'number') {
	      timeShift = timeShiftOrScheduler;
	    } else if (isScheduler(timeShiftOrScheduler)) {
	      timeShift = timeSpan;
	      scheduler = timeShiftOrScheduler;
	    }
	    return new AnonymousObservable(function (observer) {
	      var groupDisposable,
	        nextShift = timeShift,
	        nextSpan = timeSpan,
	        q = [],
	        refCountDisposable,
	        timerD = new SerialDisposable(),
	        totalTime = 0;
	        groupDisposable = new CompositeDisposable(timerD),
	        refCountDisposable = new RefCountDisposable(groupDisposable);
	
	       function createTimer () {
	        var m = new SingleAssignmentDisposable(),
	          isSpan = false,
	          isShift = false;
	        timerD.setDisposable(m);
	        if (nextSpan === nextShift) {
	          isSpan = true;
	          isShift = true;
	        } else if (nextSpan < nextShift) {
	            isSpan = true;
	        } else {
	          isShift = true;
	        }
	        var newTotalTime = isSpan ? nextSpan : nextShift,
	          ts = newTotalTime - totalTime;
	        totalTime = newTotalTime;
	        if (isSpan) {
	          nextSpan += timeShift;
	        }
	        if (isShift) {
	          nextShift += timeShift;
	        }
	        m.setDisposable(scheduler.scheduleFuture(null, ts, function () {
	          if (isShift) {
	            var s = new Subject();
	            q.push(s);
	            observer.onNext(addRef(s, refCountDisposable));
	          }
	          isSpan && q.shift().onCompleted();
	          createTimer();
	        }));
	      };
	      q.push(new Subject());
	      observer.onNext(addRef(q[0], refCountDisposable));
	      createTimer();
	      groupDisposable.add(source.subscribe(
	        function (x) {
	          for (var i = 0, len = q.length; i < len; i++) { q[i].onNext(x); }
	        },
	        function (e) {
	          for (var i = 0, len = q.length; i < len; i++) { q[i].onError(e); }
	          observer.onError(e);
	        },
	        function () {
	          for (var i = 0, len = q.length; i < len; i++) { q[i].onCompleted(); }
	          observer.onCompleted();
	        }
	      ));
	      return refCountDisposable;
	    }, source);
	  };
	
	  /**
	   *  Projects each element of an observable sequence into a window that is completed when either it's full or a given amount of time has elapsed.
	   * @param {Number} timeSpan Maximum time length of a window.
	   * @param {Number} count Maximum element count of a window.
	   * @param {Scheduler} [scheduler]  Scheduler to run windowing timers on. If not specified, the timeout scheduler is used.
	   * @returns {Observable} An observable sequence of windows.
	   */
	  observableProto.windowWithTimeOrCount = function (timeSpan, count, scheduler) {
	    var source = this;
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new AnonymousObservable(function (observer) {
	      var timerD = new SerialDisposable(),
	          groupDisposable = new CompositeDisposable(timerD),
	          refCountDisposable = new RefCountDisposable(groupDisposable),
	          n = 0,
	          windowId = 0,
	          s = new Subject();
	
	      function createTimer(id) {
	        var m = new SingleAssignmentDisposable();
	        timerD.setDisposable(m);
	        m.setDisposable(scheduler.scheduleFuture(null, timeSpan, function () {
	          if (id !== windowId) { return; }
	          n = 0;
	          var newId = ++windowId;
	          s.onCompleted();
	          s = new Subject();
	          observer.onNext(addRef(s, refCountDisposable));
	          createTimer(newId);
	        }));
	      }
	
	      observer.onNext(addRef(s, refCountDisposable));
	      createTimer(0);
	
	      groupDisposable.add(source.subscribe(
	        function (x) {
	          var newId = 0, newWindow = false;
	          s.onNext(x);
	          if (++n === count) {
	            newWindow = true;
	            n = 0;
	            newId = ++windowId;
	            s.onCompleted();
	            s = new Subject();
	            observer.onNext(addRef(s, refCountDisposable));
	          }
	          newWindow && createTimer(newId);
	        },
	        function (e) {
	          s.onError(e);
	          observer.onError(e);
	        }, function () {
	          s.onCompleted();
	          observer.onCompleted();
	        }
	      ));
	      return refCountDisposable;
	    }, source);
	  };
	
	  function toArray(x) { return x.toArray(); }
	
	  /**
	   *  Projects each element of an observable sequence into zero or more buffers which are produced based on timing information.
	   * @param {Number} timeSpan Length of each buffer (specified as an integer denoting milliseconds).
	   * @param {Mixed} [timeShiftOrScheduler]  Interval between creation of consecutive buffers (specified as an integer denoting milliseconds), or an optional scheduler parameter. If not specified, the time shift corresponds to the timeSpan parameter, resulting in non-overlapping adjacent buffers.
	   * @param {Scheduler} [scheduler]  Scheduler to run buffer timers on. If not specified, the timeout scheduler is used.
	   * @returns {Observable} An observable sequence of buffers.
	   */
	  observableProto.bufferWithTime = function (timeSpan, timeShiftOrScheduler, scheduler) {
	    return this.windowWithTime(timeSpan, timeShiftOrScheduler, scheduler).flatMap(toArray);
	  };
	
	  function toArray(x) { return x.toArray(); }
	
	  /**
	   *  Projects each element of an observable sequence into a buffer that is completed when either it's full or a given amount of time has elapsed.
	   * @param {Number} timeSpan Maximum time length of a buffer.
	   * @param {Number} count Maximum element count of a buffer.
	   * @param {Scheduler} [scheduler]  Scheduler to run bufferin timers on. If not specified, the timeout scheduler is used.
	   * @returns {Observable} An observable sequence of buffers.
	   */
	  observableProto.bufferWithTimeOrCount = function (timeSpan, count, scheduler) {
	    return this.windowWithTimeOrCount(timeSpan, count, scheduler).flatMap(toArray);
	  };
	
	  var TimeIntervalObservable = (function (__super__) {
	    inherits(TimeIntervalObservable, __super__);
	    function TimeIntervalObservable(source, s) {
	      this.source = source;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    TimeIntervalObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new TimeIntervalObserver(o, this._s));
	    };
	
	    return TimeIntervalObservable;
	  }(ObservableBase));
	
	  var TimeIntervalObserver = (function (__super__) {
	    inherits(TimeIntervalObserver, __super__);
	
	    function TimeIntervalObserver(o, s) {
	      this._o = o;
	      this._s = s;
	      this._l = s.now();
	      __super__.call(this);
	    }
	
	    TimeIntervalObserver.prototype.next = function (x) {
	      var now = this._s.now(), span = now - this._l;
	      this._l = now;
	      this._o.onNext({ value: x, interval: span });
	    };
	    TimeIntervalObserver.prototype.error = function (e) { this._o.onError(e); };
	    TimeIntervalObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return TimeIntervalObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Records the time interval between consecutive values in an observable sequence.
	   *
	   * @example
	   *  1 - res = source.timeInterval();
	   *  2 - res = source.timeInterval(Rx.Scheduler.timeout);
	   *
	   * @param [scheduler]  Scheduler used to compute time intervals. If not specified, the timeout scheduler is used.
	   * @returns {Observable} An observable sequence with time interval information on values.
	   */
	  observableProto.timeInterval = function (scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new TimeIntervalObservable(this, scheduler);
	  };
	
	  var TimestampObservable = (function (__super__) {
	    inherits(TimestampObservable, __super__);
	    function TimestampObservable(source, s) {
	      this.source = source;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    TimestampObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new TimestampObserver(o, this._s));
	    };
	
	    return TimestampObservable;
	  }(ObservableBase));
	
	  var TimestampObserver = (function (__super__) {
	    inherits(TimestampObserver, __super__);
	    function TimestampObserver(o, s) {
	      this._o = o;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    TimestampObserver.prototype.next = function (x) {
	      this._o.onNext({ value: x, timestamp: this._s.now() });
	    };
	
	    TimestampObserver.prototype.error = function (e) {
	      this._o.onError(e);
	    };
	
	    TimestampObserver.prototype.completed = function () {
	      this._o.onCompleted();
	    };
	
	    return TimestampObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Records the timestamp for each value in an observable sequence.
	   *
	   * @example
	   *  1 - res = source.timestamp(); // produces { value: x, timestamp: ts }
	   *  2 - res = source.timestamp(Rx.Scheduler.default);
	   *
	   * @param {Scheduler} [scheduler]  Scheduler used to compute timestamps. If not specified, the default scheduler is used.
	   * @returns {Observable} An observable sequence with timestamp information on values.
	   */
	  observableProto.timestamp = function (scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new TimestampObservable(this, scheduler);
	  };
	
	  var SampleObservable = (function(__super__) {
	    inherits(SampleObservable, __super__);
	    function SampleObservable(source, sampler) {
	      this.source = source;
	      this._sampler = sampler;
	      __super__.call(this);
	    }
	
	    SampleObservable.prototype.subscribeCore = function (o) {
	      var state = {
	        o: o,
	        atEnd: false,
	        value: null,
	        hasValue: false,
	        sourceSubscription: new SingleAssignmentDisposable()
	      };
	
	      state.sourceSubscription.setDisposable(this.source.subscribe(new SampleSourceObserver(state)));
	      return new BinaryDisposable(
	        state.sourceSubscription,
	        this._sampler.subscribe(new SamplerObserver(state))
	      );
	    };
	
	    return SampleObservable;
	  }(ObservableBase));
	
	  var SamplerObserver = (function(__super__) {
	    inherits(SamplerObserver, __super__);
	    function SamplerObserver(s) {
	      this._s = s;
	      __super__.call(this);
	    }
	
	    SamplerObserver.prototype._handleMessage = function () {
	      if (this._s.hasValue) {
	        this._s.hasValue = false;
	        this._s.o.onNext(this._s.value);
	      }
	      this._s.atEnd && this._s.o.onCompleted();
	    };
	
	    SamplerObserver.prototype.next = function () { this._handleMessage(); };
	    SamplerObserver.prototype.error = function (e) { this._s.onError(e); };
	    SamplerObserver.prototype.completed = function () { this._handleMessage(); };
	
	    return SamplerObserver;
	  }(AbstractObserver));
	
	  var SampleSourceObserver = (function(__super__) {
	    inherits(SampleSourceObserver, __super__);
	    function SampleSourceObserver(s) {
	      this._s = s;
	      __super__.call(this);
	    }
	
	    SampleSourceObserver.prototype.next = function (x) {
	      this._s.hasValue = true;
	      this._s.value = x;
	    };
	    SampleSourceObserver.prototype.error = function (e) { this._s.o.onError(e); };
	    SampleSourceObserver.prototype.completed = function () {
	      this._s.atEnd = true;
	      this._s.sourceSubscription.dispose();
	    };
	
	    return SampleSourceObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Samples the observable sequence at each interval.
	   *
	   * @example
	   *  1 - res = source.sample(sampleObservable); // Sampler tick sequence
	   *  2 - res = source.sample(5000); // 5 seconds
	   *  2 - res = source.sample(5000, Rx.Scheduler.timeout); // 5 seconds
	   *
	   * @param {Mixed} intervalOrSampler Interval at which to sample (specified as an integer denoting milliseconds) or Sampler Observable.
	   * @param {Scheduler} [scheduler]  Scheduler to run the sampling timer on. If not specified, the timeout scheduler is used.
	   * @returns {Observable} Sampled observable sequence.
	   */
	  observableProto.sample = function (intervalOrSampler, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return typeof intervalOrSampler === 'number' ?
	      new SampleObservable(this, observableinterval(intervalOrSampler, scheduler)) :
	      new SampleObservable(this, intervalOrSampler);
	  };
	
	  var TimeoutError = Rx.TimeoutError = function(message) {
	    this.message = message || 'Timeout has occurred';
	    this.name = 'TimeoutError';
	    Error.call(this);
	  };
	  TimeoutError.prototype = Object.create(Error.prototype);
	
	  function timeoutWithSelector(source, firstTimeout, timeoutDurationSelector, other) {
	    if (isFunction(firstTimeout)) {
	      other = timeoutDurationSelector;
	      timeoutDurationSelector = firstTimeout;
	      firstTimeout = observableNever();
	    }
	    Observable.isObservable(other) || (other = observableThrow(new TimeoutError()));
	    return new AnonymousObservable(function (o) {
	      var subscription = new SerialDisposable(),
	        timer = new SerialDisposable(),
	        original = new SingleAssignmentDisposable();
	
	      subscription.setDisposable(original);
	
	      var id = 0, switched = false;
	
	      function setTimer(timeout) {
	        var myId = id, d = new SingleAssignmentDisposable();
	
	        function timerWins() {
	          switched = (myId === id);
	          return switched;
	        }
	
	        timer.setDisposable(d);
	        d.setDisposable(timeout.subscribe(function () {
	          timerWins() && subscription.setDisposable(other.subscribe(o));
	          d.dispose();
	        }, function (e) {
	          timerWins() && o.onError(e);
	        }, function () {
	          timerWins() && subscription.setDisposable(other.subscribe(o));
	        }));
	      };
	
	      setTimer(firstTimeout);
	
	      function oWins() {
	        var res = !switched;
	        if (res) { id++; }
	        return res;
	      }
	
	      original.setDisposable(source.subscribe(function (x) {
	        if (oWins()) {
	          o.onNext(x);
	          var timeout = tryCatch(timeoutDurationSelector)(x);
	          if (timeout === errorObj) { return o.onError(timeout.e); }
	          setTimer(isPromise(timeout) ? observableFromPromise(timeout) : timeout);
	        }
	      }, function (e) {
	        oWins() && o.onError(e);
	      }, function () {
	        oWins() && o.onCompleted();
	      }));
	      return new BinaryDisposable(subscription, timer);
	    }, source);
	  }
	
	  function timeout(source, dueTime, other, scheduler) {
	    if (isScheduler(other)) {
	      scheduler = other;
	      other = observableThrow(new TimeoutError());
	    }
	    if (other instanceof Error) { other = observableThrow(other); }
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    Observable.isObservable(other) || (other = observableThrow(new TimeoutError()));
	    return new AnonymousObservable(function (o) {
	      var id = 0,
	        original = new SingleAssignmentDisposable(),
	        subscription = new SerialDisposable(),
	        switched = false,
	        timer = new SerialDisposable();
	
	      subscription.setDisposable(original);
	
	      function createTimer() {
	        var myId = id;
	        timer.setDisposable(scheduler.scheduleFuture(null, dueTime, function () {
	          switched = id === myId;
	          if (switched) {
	            isPromise(other) && (other = observableFromPromise(other));
	            subscription.setDisposable(other.subscribe(o));
	          }
	        }));
	      }
	
	      createTimer();
	
	      original.setDisposable(source.subscribe(function (x) {
	        if (!switched) {
	          id++;
	          o.onNext(x);
	          createTimer();
	        }
	      }, function (e) {
	        if (!switched) {
	          id++;
	          o.onError(e);
	        }
	      }, function () {
	        if (!switched) {
	          id++;
	          o.onCompleted();
	        }
	      }));
	      return new BinaryDisposable(subscription, timer);
	    }, source);
	  }
	
	  observableProto.timeout = function () {
	    var firstArg = arguments[0];
	    if (firstArg instanceof Date || typeof firstArg === 'number') {
	      return timeout(this, firstArg, arguments[1], arguments[2]);
	    } else if (Observable.isObservable(firstArg) || isFunction(firstArg)) {
	      return timeoutWithSelector(this, firstArg, arguments[1], arguments[2]);
	    } else {
	      throw new Error('Invalid arguments');
	    }
	  };
	
	  var GenerateAbsoluteObservable = (function (__super__) {
	    inherits(GenerateAbsoluteObservable, __super__);
	    function GenerateAbsoluteObservable(state, cndFn, itrFn, resFn, timeFn, s) {
	      this._state = state;
	      this._cndFn = cndFn;
	      this._itrFn = itrFn;
	      this._resFn = resFn;
	      this._timeFn = timeFn;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    function scheduleRecursive(state, recurse) {
	      state.hasResult && state.o.onNext(state.result);
	
	      if (state.first) {
	        state.first = false;
	      } else {
	        state.newState = tryCatch(state.self._itrFn)(state.newState);
	        if (state.newState === errorObj) { return state.o.onError(state.newState.e); }
	      }
	      state.hasResult = tryCatch(state.self._cndFn)(state.newState);
	      if (state.hasResult === errorObj) { return state.o.onError(state.hasResult.e); }
	      if (state.hasResult) {
	        state.result = tryCatch(state.self._resFn)(state.newState);
	        if (state.result === errorObj) { return state.o.onError(state.result.e); }
	        var time = tryCatch(state.self._timeFn)(state.newState);
	        if (time === errorObj) { return state.o.onError(time.e); }
	        recurse(state, time);
	      } else {
	        state.o.onCompleted();
	      }
	    }
	
	    GenerateAbsoluteObservable.prototype.subscribeCore = function (o) {
	      var state = {
	        o: o,
	        self: this,
	        newState: this._state,
	        first: true,
	        hasResult: false
	      };
	      return this._s.scheduleRecursiveFuture(state, new Date(this._s.now()), scheduleRecursive);
	    };
	
	    return GenerateAbsoluteObservable;
	  }(ObservableBase));
	
	  /**
	   *  GenerateAbsolutes an observable sequence by iterating a state from an initial state until the condition fails.
	   *
	   * @example
	   *  res = source.generateWithAbsoluteTime(0,
	   *      function (x) { return return true; },
	   *      function (x) { return x + 1; },
	   *      function (x) { return x; },
	   *      function (x) { return new Date(); }
	   *  });
	   *
	   * @param {Mixed} initialState Initial state.
	   * @param {Function} condition Condition to terminate generation (upon returning false).
	   * @param {Function} iterate Iteration step function.
	   * @param {Function} resultSelector Selector function for results produced in the sequence.
	   * @param {Function} timeSelector Time selector function to control the speed of values being produced each iteration, returning Date values.
	   * @param {Scheduler} [scheduler]  Scheduler on which to run the generator loop. If not specified, the timeout scheduler is used.
	   * @returns {Observable} The generated sequence.
	   */
	  Observable.generateWithAbsoluteTime = function (initialState, condition, iterate, resultSelector, timeSelector, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new GenerateAbsoluteObservable(initialState, condition, iterate, resultSelector, timeSelector, scheduler);
	  };
	
	  var GenerateRelativeObservable = (function (__super__) {
	    inherits(GenerateRelativeObservable, __super__);
	    function GenerateRelativeObservable(state, cndFn, itrFn, resFn, timeFn, s) {
	      this._state = state;
	      this._cndFn = cndFn;
	      this._itrFn = itrFn;
	      this._resFn = resFn;
	      this._timeFn = timeFn;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    function scheduleRecursive(state, recurse) {
	      state.hasResult && state.o.onNext(state.result);
	
	      if (state.first) {
	        state.first = false;
	      } else {
	        state.newState = tryCatch(state.self._itrFn)(state.newState);
	        if (state.newState === errorObj) { return state.o.onError(state.newState.e); }
	      }
	
	      state.hasResult = tryCatch(state.self._cndFn)(state.newState);
	      if (state.hasResult === errorObj) { return state.o.onError(state.hasResult.e); }
	      if (state.hasResult) {
	        state.result = tryCatch(state.self._resFn)(state.newState);
	        if (state.result === errorObj) { return state.o.onError(state.result.e); }
	        var time = tryCatch(state.self._timeFn)(state.newState);
	        if (time === errorObj) { return state.o.onError(time.e); }
	        recurse(state, time);
	      } else {
	        state.o.onCompleted();
	      }
	    }
	
	    GenerateRelativeObservable.prototype.subscribeCore = function (o) {
	      var state = {
	        o: o,
	        self: this,
	        newState: this._state,
	        first: true,
	        hasResult: false
	      };
	      return this._s.scheduleRecursiveFuture(state, 0, scheduleRecursive);
	    };
	
	    return GenerateRelativeObservable;
	  }(ObservableBase));
	
	  /**
	   *  Generates an observable sequence by iterating a state from an initial state until the condition fails.
	   *
	   * @example
	   *  res = source.generateWithRelativeTime(0,
	   *      function (x) { return return true; },
	   *      function (x) { return x + 1; },
	   *      function (x) { return x; },
	   *      function (x) { return 500; }
	   *  );
	   *
	   * @param {Mixed} initialState Initial state.
	   * @param {Function} condition Condition to terminate generation (upon returning false).
	   * @param {Function} iterate Iteration step function.
	   * @param {Function} resultSelector Selector function for results produced in the sequence.
	   * @param {Function} timeSelector Time selector function to control the speed of values being produced each iteration, returning integer values denoting milliseconds.
	   * @param {Scheduler} [scheduler]  Scheduler on which to run the generator loop. If not specified, the timeout scheduler is used.
	   * @returns {Observable} The generated sequence.
	   */
	  Observable.generateWithRelativeTime = function (initialState, condition, iterate, resultSelector, timeSelector, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new GenerateRelativeObservable(initialState, condition, iterate, resultSelector, timeSelector, scheduler);
	  };
	
	  var DelaySubscription = (function(__super__) {
	    inherits(DelaySubscription, __super__);
	    function DelaySubscription(source, dt, s) {
	      this.source = source;
	      this._dt = dt;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    DelaySubscription.prototype.subscribeCore = function (o) {
	      var d = new SerialDisposable();
	
	      d.setDisposable(this._s.scheduleFuture([this.source, o, d], this._dt, scheduleMethod));
	
	      return d;
	    };
	
	    function scheduleMethod(s, state) {
	      var source = state[0], o = state[1], d = state[2];
	      d.setDisposable(source.subscribe(o));
	    }
	
	    return DelaySubscription;
	  }(ObservableBase));
	
	  /**
	   *  Time shifts the observable sequence by delaying the subscription with the specified relative time duration, using the specified scheduler to run timers.
	   *
	   * @example
	   *  1 - res = source.delaySubscription(5000); // 5s
	   *  2 - res = source.delaySubscription(5000, Rx.Scheduler.default); // 5 seconds
	   *
	   * @param {Number} dueTime Relative or absolute time shift of the subscription.
	   * @param {Scheduler} [scheduler]  Scheduler to run the subscription delay timer on. If not specified, the timeout scheduler is used.
	   * @returns {Observable} Time-shifted sequence.
	   */
	  observableProto.delaySubscription = function (dueTime, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new DelaySubscription(this, dueTime, scheduler);
	  };
	
	  var SkipLastWithTimeObservable = (function (__super__) {
	    inherits(SkipLastWithTimeObservable, __super__);
	    function SkipLastWithTimeObservable(source, d, s) {
	      this.source = source;
	      this._d = d;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    SkipLastWithTimeObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new SkipLastWithTimeObserver(o, this));
	    };
	
	    return SkipLastWithTimeObservable;
	  }(ObservableBase));
	
	  var SkipLastWithTimeObserver = (function (__super__) {
	    inherits(SkipLastWithTimeObserver, __super__);
	
	    function SkipLastWithTimeObserver(o, p) {
	      this._o = o;
	      this._s = p._s;
	      this._d = p._d;
	      this._q = [];
	      __super__.call(this);
	    }
	
	    SkipLastWithTimeObserver.prototype.next = function (x) {
	      var now = this._s.now();
	      this._q.push({ interval: now, value: x });
	      while (this._q.length > 0 && now - this._q[0].interval >= this._d) {
	        this._o.onNext(this._q.shift().value);
	      }
	    };
	    SkipLastWithTimeObserver.prototype.error = function (e) { this._o.onError(e); };
	    SkipLastWithTimeObserver.prototype.completed = function () {
	      var now = this._s.now();
	      while (this._q.length > 0 && now - this._q[0].interval >= this._d) {
	        this._o.onNext(this._q.shift().value);
	      }
	      this._o.onCompleted();
	    };
	
	    return SkipLastWithTimeObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Skips elements for the specified duration from the end of the observable source sequence, using the specified scheduler to run timers.
	   * @description
	   *  This operator accumulates a queue with a length enough to store elements received during the initial duration window.
	   *  As more elements are received, elements older than the specified duration are taken from the queue and produced on the
	   *  result sequence. This causes elements to be delayed with duration.
	   * @param {Number} duration Duration for skipping elements from the end of the sequence.
	   * @param {Scheduler} [scheduler]  Scheduler to run the timer on. If not specified, defaults to Rx.Scheduler.timeout
	   * @returns {Observable} An observable sequence with the elements skipped during the specified duration from the end of the source sequence.
	   */
	  observableProto.skipLastWithTime = function (duration, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new SkipLastWithTimeObservable(this, duration, scheduler);
	  };
	
	  var TakeLastWithTimeObservable = (function (__super__) {
	    inherits(TakeLastWithTimeObservable, __super__);
	    function TakeLastWithTimeObservable(source, d, s) {
	      this.source = source;
	      this._d = d;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    TakeLastWithTimeObservable.prototype.subscribeCore = function (o) {
	      return this.source.subscribe(new TakeLastWithTimeObserver(o, this._d, this._s));
	    };
	
	    return TakeLastWithTimeObservable;
	  }(ObservableBase));
	
	  var TakeLastWithTimeObserver = (function (__super__) {
	    inherits(TakeLastWithTimeObserver, __super__);
	
	    function TakeLastWithTimeObserver(o, d, s) {
	      this._o = o;
	      this._d = d;
	      this._s = s;
	      this._q = [];
	      __super__.call(this);
	    }
	
	    TakeLastWithTimeObserver.prototype.next = function (x) {
	      var now = this._s.now();
	      this._q.push({ interval: now, value: x });
	      while (this._q.length > 0 && now - this._q[0].interval >= this._d) {
	        this._q.shift();
	      }
	    };
	    TakeLastWithTimeObserver.prototype.error = function (e) { this._o.onError(e); };
	    TakeLastWithTimeObserver.prototype.completed = function () {
	      var now = this._s.now();
	      while (this._q.length > 0) {
	        var next = this._q.shift();
	        if (now - next.interval <= this._d) { this._o.onNext(next.value); }
	      }
	      this._o.onCompleted();
	    };
	
	    return TakeLastWithTimeObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Returns elements within the specified duration from the end of the observable source sequence, using the specified schedulers to run timers and to drain the collected elements.
	   * @description
	   *  This operator accumulates a queue with a length enough to store elements received during the initial duration window.
	   *  As more elements are received, elements older than the specified duration are taken from the queue and produced on the
	   *  result sequence. This causes elements to be delayed with duration.
	   * @param {Number} duration Duration for taking elements from the end of the sequence.
	   * @param {Scheduler} [scheduler]  Scheduler to run the timer on. If not specified, defaults to Rx.Scheduler.timeout.
	   * @returns {Observable} An observable sequence with the elements taken during the specified duration from the end of the source sequence.
	   */
	  observableProto.takeLastWithTime = function (duration, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new TakeLastWithTimeObservable(this, duration, scheduler);
	  };
	
	  /**
	   *  Returns an array with the elements within the specified duration from the end of the observable source sequence, using the specified scheduler to run timers.
	   * @description
	   *  This operator accumulates a queue with a length enough to store elements received during the initial duration window.
	   *  As more elements are received, elements older than the specified duration are taken from the queue and produced on the
	   *  result sequence. This causes elements to be delayed with duration.
	   * @param {Number} duration Duration for taking elements from the end of the sequence.
	   * @param {Scheduler} scheduler Scheduler to run the timer on. If not specified, defaults to Rx.Scheduler.timeout.
	   * @returns {Observable} An observable sequence containing a single array with the elements taken during the specified duration from the end of the source sequence.
	   */
	  observableProto.takeLastBufferWithTime = function (duration, scheduler) {
	    var source = this;
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new AnonymousObservable(function (o) {
	      var q = [];
	      return source.subscribe(function (x) {
	        var now = scheduler.now();
	        q.push({ interval: now, value: x });
	        while (q.length > 0 && now - q[0].interval >= duration) {
	          q.shift();
	        }
	      }, function (e) { o.onError(e); }, function () {
	        var now = scheduler.now(), res = [];
	        while (q.length > 0) {
	          var next = q.shift();
	          now - next.interval <= duration && res.push(next.value);
	        }
	        o.onNext(res);
	        o.onCompleted();
	      });
	    }, source);
	  };
	
	  var TakeWithTimeObservable = (function (__super__) {
	    inherits(TakeWithTimeObservable, __super__);
	    function TakeWithTimeObservable(source, d, s) {
	      this.source = source;
	      this._d = d;
	      this._s = s;
	      __super__.call(this);
	    }
	
	    function scheduleMethod(s, o) {
	      o.onCompleted();
	    }
	
	    TakeWithTimeObservable.prototype.subscribeCore = function (o) {
	      return new BinaryDisposable(
	        this._s.scheduleFuture(o, this._d, scheduleMethod),
	        this.source.subscribe(o)
	      );
	    };
	
	    return TakeWithTimeObservable;
	  }(ObservableBase));
	
	  /**
	   *  Takes elements for the specified duration from the start of the observable source sequence, using the specified scheduler to run timers.
	   *
	   * @example
	   *  1 - res = source.takeWithTime(5000,  [optional scheduler]);
	   * @description
	   *  This operator accumulates a queue with a length enough to store elements received during the initial duration window.
	   *  As more elements are received, elements older than the specified duration are taken from the queue and produced on the
	   *  result sequence. This causes elements to be delayed with duration.
	   * @param {Number} duration Duration for taking elements from the start of the sequence.
	   * @param {Scheduler} scheduler Scheduler to run the timer on. If not specified, defaults to Rx.Scheduler.timeout.
	   * @returns {Observable} An observable sequence with the elements taken during the specified duration from the start of the source sequence.
	   */
	  observableProto.takeWithTime = function (duration, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new TakeWithTimeObservable(this, duration, scheduler);
	  };
	
	  var SkipWithTimeObservable = (function (__super__) {
	    inherits(SkipWithTimeObservable, __super__);
	    function SkipWithTimeObservable(source, d, s) {
	      this.source = source;
	      this._d = d;
	      this._s = s;
	      this._open = false;
	      __super__.call(this);
	    }
	
	    function scheduleMethod(s, self) {
	      self._open = true;
	    }
	
	    SkipWithTimeObservable.prototype.subscribeCore = function (o) {
	      return new BinaryDisposable(
	        this._s.scheduleFuture(this, this._d, scheduleMethod),
	        this.source.subscribe(new SkipWithTimeObserver(o, this))
	      );
	    };
	
	    return SkipWithTimeObservable;
	  }(ObservableBase));
	
	  var SkipWithTimeObserver = (function (__super__) {
	    inherits(SkipWithTimeObserver, __super__);
	
	    function SkipWithTimeObserver(o, p) {
	      this._o = o;
	      this._p = p;
	      __super__.call(this);
	    }
	
	    SkipWithTimeObserver.prototype.next = function (x) { this._p._open && this._o.onNext(x); };
	    SkipWithTimeObserver.prototype.error = function (e) { this._o.onError(e); };
	    SkipWithTimeObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return SkipWithTimeObserver;
	  }(AbstractObserver));
	
	  /**
	   *  Skips elements for the specified duration from the start of the observable source sequence, using the specified scheduler to run timers.
	   * @description
	   *  Specifying a zero value for duration doesn't guarantee no elements will be dropped from the start of the source sequence.
	   *  This is a side-effect of the asynchrony introduced by the scheduler, where the action that causes callbacks from the source sequence to be forwarded
	   *  may not execute immediately, despite the zero due time.
	   *
	   *  Errors produced by the source sequence are always forwarded to the result sequence, even if the error occurs before the duration.
	   * @param {Number} duration Duration for skipping elements from the start of the sequence.
	   * @param {Scheduler} scheduler Scheduler to run the timer on. If not specified, defaults to Rx.Scheduler.timeout.
	   * @returns {Observable} An observable sequence with the elements skipped during the specified duration from the start of the source sequence.
	   */
	  observableProto.skipWithTime = function (duration, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new SkipWithTimeObservable(this, duration, scheduler);
	  };
	
	  var SkipUntilWithTimeObservable = (function (__super__) {
	    inherits(SkipUntilWithTimeObservable, __super__);
	    function SkipUntilWithTimeObservable(source, startTime, scheduler) {
	      this.source = source;
	      this._st = startTime;
	      this._s = scheduler;
	      __super__.call(this);
	    }
	
	    function scheduleMethod(s, state) {
	      state._open = true;
	    }
	
	    SkipUntilWithTimeObservable.prototype.subscribeCore = function (o) {
	      this._open = false;
	      return new BinaryDisposable(
	        this._s.scheduleFuture(this, this._st, scheduleMethod),
	        this.source.subscribe(new SkipUntilWithTimeObserver(o, this))
	      );
	    };
	
	    return SkipUntilWithTimeObservable;
	  }(ObservableBase));
	
	  var SkipUntilWithTimeObserver = (function (__super__) {
	    inherits(SkipUntilWithTimeObserver, __super__);
	
	    function SkipUntilWithTimeObserver(o, p) {
	      this._o = o;
	      this._p = p;
	      __super__.call(this);
	    }
	
	    SkipUntilWithTimeObserver.prototype.next = function (x) { this._p._open && this._o.onNext(x); };
	    SkipUntilWithTimeObserver.prototype.error = function (e) { this._o.onError(e); };
	    SkipUntilWithTimeObserver.prototype.completed = function () { this._o.onCompleted(); };
	
	    return SkipUntilWithTimeObserver;
	  }(AbstractObserver));
	
	
	  /**
	   *  Skips elements from the observable source sequence until the specified start time, using the specified scheduler to run timers.
	   *  Errors produced by the source sequence are always forwarded to the result sequence, even if the error occurs before the start time.
	   *
	   * @examples
	   *  1 - res = source.skipUntilWithTime(new Date(), [scheduler]);
	   *  2 - res = source.skipUntilWithTime(5000, [scheduler]);
	   * @param {Date|Number} startTime Time to start taking elements from the source sequence. If this value is less than or equal to Date(), no elements will be skipped.
	   * @param {Scheduler} [scheduler] Scheduler to run the timer on. If not specified, defaults to Rx.Scheduler.timeout.
	   * @returns {Observable} An observable sequence with the elements skipped until the specified start time.
	   */
	  observableProto.skipUntilWithTime = function (startTime, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    return new SkipUntilWithTimeObservable(this, startTime, scheduler);
	  };
	
	  /**
	   *  Takes elements for the specified duration until the specified end time, using the specified scheduler to run timers.
	   * @param {Number | Date} endTime Time to stop taking elements from the source sequence. If this value is less than or equal to new Date(), the result stream will complete immediately.
	   * @param {Scheduler} [scheduler] Scheduler to run the timer on.
	   * @returns {Observable} An observable sequence with the elements taken until the specified end time.
	   */
	  observableProto.takeUntilWithTime = function (endTime, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    var source = this;
	    return new AnonymousObservable(function (o) {
	      return new BinaryDisposable(
	        scheduler.scheduleFuture(o, endTime, function (_, o) { o.onCompleted(); }),
	        source.subscribe(o));
	    }, source);
	  };
	
	  /**
	   * Returns an Observable that emits only the first item emitted by the source Observable during sequential time windows of a specified duration.
	   * @param {Number} windowDuration time to wait before emitting another item after emitting the last item
	   * @param {Scheduler} [scheduler] the Scheduler to use internally to manage the timers that handle timeout for each item. If not provided, defaults to Scheduler.timeout.
	   * @returns {Observable} An Observable that performs the throttle operation.
	   */
	  observableProto.throttle = function (windowDuration, scheduler) {
	    isScheduler(scheduler) || (scheduler = defaultScheduler);
	    var duration = +windowDuration || 0;
	    if (duration <= 0) { throw new RangeError('windowDuration cannot be less or equal zero.'); }
	    var source = this;
	    return new AnonymousObservable(function (o) {
	      var lastOnNext = 0;
	      return source.subscribe(
	        function (x) {
	          var now = scheduler.now();
	          if (lastOnNext === 0 || now - lastOnNext >= duration) {
	            lastOnNext = now;
	            o.onNext(x);
	          }
	        },function (e) { o.onError(e); }, function () { o.onCompleted(); }
	      );
	    }, source);
	  };
	
	  var TransduceObserver = (function (__super__) {
	    inherits(TransduceObserver, __super__);
	    function TransduceObserver(o, xform) {
	      this._o = o;
	      this._xform = xform;
	      __super__.call(this);
	    }
	
	    TransduceObserver.prototype.next = function (x) {
	      var res = tryCatch(this._xform['@@transducer/step']).call(this._xform, this._o, x);
	      if (res === errorObj) { this._o.onError(res.e); }
	    };
	
	    TransduceObserver.prototype.error = function (e) { this._o.onError(e); };
	
	    TransduceObserver.prototype.completed = function () {
	      this._xform['@@transducer/result'](this._o);
	    };
	
	    return TransduceObserver;
	  }(AbstractObserver));
	
	  function transformForObserver(o) {
	    return {
	      '@@transducer/init': function() {
	        return o;
	      },
	      '@@transducer/step': function(obs, input) {
	        return obs.onNext(input);
	      },
	      '@@transducer/result': function(obs) {
	        return obs.onCompleted();
	      }
	    };
	  }
	
	  /**
	   * Executes a transducer to transform the observable sequence
	   * @param {Transducer} transducer A transducer to execute
	   * @returns {Observable} An Observable sequence containing the results from the transducer.
	   */
	  observableProto.transduce = function(transducer) {
	    var source = this;
	    return new AnonymousObservable(function(o) {
	      var xform = transducer(transformForObserver(o));
	      return source.subscribe(new TransduceObserver(o, xform));
	    }, source);
	  };
	
	  var SwitchFirstObservable = (function (__super__) {
	    inherits(SwitchFirstObservable, __super__);
	    function SwitchFirstObservable(source) {
	      this.source = source;
	      __super__.call(this);
	    }
	
	    SwitchFirstObservable.prototype.subscribeCore = function (o) {
	      var m = new SingleAssignmentDisposable(),
	        g = new CompositeDisposable(),
	        state = {
	          hasCurrent: false,
	          isStopped: false,
	          o: o,
	          g: g
	        };
	
	      g.add(m);
	      m.setDisposable(this.source.subscribe(new SwitchFirstObserver(state)));
	      return g;
	    };
	
	    return SwitchFirstObservable;
	  }(ObservableBase));
	
	  var SwitchFirstObserver = (function(__super__) {
	    inherits(SwitchFirstObserver, __super__);
	    function SwitchFirstObserver(state) {
	      this._s = state;
	      __super__.call(this);
	    }
	
	    SwitchFirstObserver.prototype.next = function (x) {
	      if (!this._s.hasCurrent) {
	        this._s.hasCurrent = true;
	        isPromise(x) && (x = observableFromPromise(x));
	        var inner = new SingleAssignmentDisposable();
	        this._s.g.add(inner);
	        inner.setDisposable(x.subscribe(new InnerObserver(this._s, inner)));
	      }
	    };
	
	    SwitchFirstObserver.prototype.error = function (e) {
	      this._s.o.onError(e);
	    };
	
	    SwitchFirstObserver.prototype.completed = function () {
	      this._s.isStopped = true;
	      !this._s.hasCurrent && this._s.g.length === 1 && this._s.o.onCompleted();
	    };
	
	    inherits(InnerObserver, __super__);
	    function InnerObserver(state, inner) {
	      this._s = state;
	      this._i = inner;
	      __super__.call(this);
	    }
	
	    InnerObserver.prototype.next = function (x) { this._s.o.onNext(x); };
	    InnerObserver.prototype.error = function (e) { this._s.o.onError(e); };
	    InnerObserver.prototype.completed = function () {
	      this._s.g.remove(this._i);
	      this._s.hasCurrent = false;
	      this._s.isStopped && this._s.g.length === 1 && this._s.o.onCompleted();
	    };
	
	    return SwitchFirstObserver;
	  }(AbstractObserver));
	
	  /**
	   * Performs a exclusive waiting for the first to finish before subscribing to another observable.
	   * Observables that come in between subscriptions will be dropped on the floor.
	   * @returns {Observable} A exclusive observable with only the results that happen when subscribed.
	   */
	  observableProto.switchFirst = function () {
	    return new SwitchFirstObservable(this);
	  };
	
	observableProto.flatMapFirst = observableProto.selectManyFirst = function(selector, resultSelector, thisArg) {
	    return new FlatMapObservable(this, selector, resultSelector, thisArg).switchFirst();
	};
	
	Rx.Observable.prototype.flatMapWithMaxConcurrent = function(limit, selector, resultSelector, thisArg) {
	    return new FlatMapObservable(this, selector, resultSelector, thisArg).merge(limit);
	};
	  /** Provides a set of extension methods for virtual time scheduling. */
	  var VirtualTimeScheduler = Rx.VirtualTimeScheduler = (function (__super__) {
	    inherits(VirtualTimeScheduler, __super__);
	
	    /**
	     * Creates a new virtual time scheduler with the specified initial clock value and absolute time comparer.
	     *
	     * @constructor
	     * @param {Number} initialClock Initial value for the clock.
	     * @param {Function} comparer Comparer to determine causality of events based on absolute time.
	     */
	    function VirtualTimeScheduler(initialClock, comparer) {
	      this.clock = initialClock;
	      this.comparer = comparer;
	      this.isEnabled = false;
	      this.queue = new PriorityQueue(1024);
	      __super__.call(this);
	    }
	
	    var VirtualTimeSchedulerPrototype = VirtualTimeScheduler.prototype;
	
	    VirtualTimeSchedulerPrototype.now = function () {
	      return this.toAbsoluteTime(this.clock);
	    };
	
	    VirtualTimeSchedulerPrototype.schedule = function (state, action) {
	      return this.scheduleAbsolute(state, this.clock, action);
	    };
	
	    VirtualTimeSchedulerPrototype.scheduleFuture = function (state, dueTime, action) {
	      var dt = dueTime instanceof Date ?
	        this.toRelativeTime(dueTime - this.now()) :
	        this.toRelativeTime(dueTime);
	
	      return this.scheduleRelative(state, dt, action);
	    };
	
	    /**
	     * Adds a relative time value to an absolute time value.
	     * @param {Number} absolute Absolute virtual time value.
	     * @param {Number} relative Relative virtual time value to add.
	     * @return {Number} Resulting absolute virtual time sum value.
	     */
	    VirtualTimeSchedulerPrototype.add = notImplemented;
	
	    /**
	     * Converts an absolute time to a number
	     * @param {Any} The absolute time.
	     * @returns {Number} The absolute time in ms
	     */
	    VirtualTimeSchedulerPrototype.toAbsoluteTime = notImplemented;
	
	    /**
	     * Converts the TimeSpan value to a relative virtual time value.
	     * @param {Number} timeSpan TimeSpan value to convert.
	     * @return {Number} Corresponding relative virtual time value.
	     */
	    VirtualTimeSchedulerPrototype.toRelativeTime = notImplemented;
	
	    /**
	     * Schedules a periodic piece of work by dynamically discovering the scheduler's capabilities. The periodic task will be emulated using recursive scheduling.
	     * @param {Mixed} state Initial state passed to the action upon the first iteration.
	     * @param {Number} period Period for running the work periodically.
	     * @param {Function} action Action to be executed, potentially updating the state.
	     * @returns {Disposable} The disposable object used to cancel the scheduled recurring action (best effort).
	     */
	    VirtualTimeSchedulerPrototype.schedulePeriodic = function (state, period, action) {
	      var s = new SchedulePeriodicRecursive(this, state, period, action);
	      return s.start();
	    };
	
	    /**
	     * Schedules an action to be executed after dueTime.
	     * @param {Mixed} state State passed to the action to be executed.
	     * @param {Number} dueTime Relative time after which to execute the action.
	     * @param {Function} action Action to be executed.
	     * @returns {Disposable} The disposable object used to cancel the scheduled action (best effort).
	     */
	    VirtualTimeSchedulerPrototype.scheduleRelative = function (state, dueTime, action) {
	      var runAt = this.add(this.clock, dueTime);
	      return this.scheduleAbsolute(state, runAt, action);
	    };
	
	    /**
	     * Starts the virtual time scheduler.
	     */
	    VirtualTimeSchedulerPrototype.start = function () {
	      if (!this.isEnabled) {
	        this.isEnabled = true;
	        do {
	          var next = this.getNext();
	          if (next !== null) {
	            this.comparer(next.dueTime, this.clock) > 0 && (this.clock = next.dueTime);
	            next.invoke();
	          } else {
	            this.isEnabled = false;
	          }
	        } while (this.isEnabled);
	      }
	    };
	
	    /**
	     * Stops the virtual time scheduler.
	     */
	    VirtualTimeSchedulerPrototype.stop = function () {
	      this.isEnabled = false;
	    };
	
	    /**
	     * Advances the scheduler's clock to the specified time, running all work till that point.
	     * @param {Number} time Absolute time to advance the scheduler's clock to.
	     */
	    VirtualTimeSchedulerPrototype.advanceTo = function (time) {
	      var dueToClock = this.comparer(this.clock, time);
	      if (this.comparer(this.clock, time) > 0) { throw new ArgumentOutOfRangeError(); }
	      if (dueToClock === 0) { return; }
	      if (!this.isEnabled) {
	        this.isEnabled = true;
	        do {
	          var next = this.getNext();
	          if (next !== null && this.comparer(next.dueTime, time) <= 0) {
	            this.comparer(next.dueTime, this.clock) > 0 && (this.clock = next.dueTime);
	            next.invoke();
	          } else {
	            this.isEnabled = false;
	          }
	        } while (this.isEnabled);
	        this.clock = time;
	      }
	    };
	
	    /**
	     * Advances the scheduler's clock by the specified relative time, running all work scheduled for that timespan.
	     * @param {Number} time Relative time to advance the scheduler's clock by.
	     */
	    VirtualTimeSchedulerPrototype.advanceBy = function (time) {
	      var dt = this.add(this.clock, time),
	          dueToClock = this.comparer(this.clock, dt);
	      if (dueToClock > 0) { throw new ArgumentOutOfRangeError(); }
	      if (dueToClock === 0) {  return; }
	
	      this.advanceTo(dt);
	    };
	
	    /**
	     * Advances the scheduler's clock by the specified relative time.
	     * @param {Number} time Relative time to advance the scheduler's clock by.
	     */
	    VirtualTimeSchedulerPrototype.sleep = function (time) {
	      var dt = this.add(this.clock, time);
	      if (this.comparer(this.clock, dt) >= 0) { throw new ArgumentOutOfRangeError(); }
	
	      this.clock = dt;
	    };
	
	    /**
	     * Gets the next scheduled item to be executed.
	     * @returns {ScheduledItem} The next scheduled item.
	     */
	    VirtualTimeSchedulerPrototype.getNext = function () {
	      while (this.queue.length > 0) {
	        var next = this.queue.peek();
	        if (next.isCancelled()) {
	          this.queue.dequeue();
	        } else {
	          return next;
	        }
	      }
	      return null;
	    };
	
	    /**
	     * Schedules an action to be executed at dueTime.
	     * @param {Mixed} state State passed to the action to be executed.
	     * @param {Number} dueTime Absolute time at which to execute the action.
	     * @param {Function} action Action to be executed.
	     * @returns {Disposable} The disposable object used to cancel the scheduled action (best effort).
	     */
	    VirtualTimeSchedulerPrototype.scheduleAbsolute = function (state, dueTime, action) {
	      var self = this;
	
	      function run(scheduler, state1) {
	        self.queue.remove(si);
	        return action(scheduler, state1);
	      }
	
	      var si = new ScheduledItem(this, state, run, dueTime, this.comparer);
	      this.queue.enqueue(si);
	
	      return si.disposable;
	    };
	
	    return VirtualTimeScheduler;
	  }(Scheduler));
	
	  /** Provides a virtual time scheduler that uses Date for absolute time and number for relative time. */
	  Rx.HistoricalScheduler = (function (__super__) {
	    inherits(HistoricalScheduler, __super__);
	
	    /**
	     * Creates a new historical scheduler with the specified initial clock value.
	     * @constructor
	     * @param {Number} initialClock Initial value for the clock.
	     * @param {Function} comparer Comparer to determine causality of events based on absolute time.
	     */
	    function HistoricalScheduler(initialClock, comparer) {
	      var clock = initialClock == null ? 0 : initialClock;
	      var cmp = comparer || defaultSubComparer;
	      __super__.call(this, clock, cmp);
	    }
	
	    var HistoricalSchedulerProto = HistoricalScheduler.prototype;
	
	    /**
	     * Adds a relative time value to an absolute time value.
	     * @param {Number} absolute Absolute virtual time value.
	     * @param {Number} relative Relative virtual time value to add.
	     * @return {Number} Resulting absolute virtual time sum value.
	     */
	    HistoricalSchedulerProto.add = function (absolute, relative) {
	      return absolute + relative;
	    };
	
	    HistoricalSchedulerProto.toAbsoluteTime = function (absolute) {
	      return new Date(absolute).getTime();
	    };
	
	    /**
	     * Converts the TimeSpan value to a relative virtual time value.
	     * @memberOf HistoricalScheduler
	     * @param {Number} timeSpan TimeSpan value to convert.
	     * @return {Number} Corresponding relative virtual time value.
	     */
	    HistoricalSchedulerProto.toRelativeTime = function (timeSpan) {
	      return timeSpan;
	    };
	
	    return HistoricalScheduler;
	  }(Rx.VirtualTimeScheduler));
	
	function OnNextPredicate(predicate) {
	    this.predicate = predicate;
	}
	
	OnNextPredicate.prototype.equals = function (other) {
	  if (other === this) { return true; }
	  if (other == null) { return false; }
	  if (other.kind !== 'N') { return false; }
	  return this.predicate(other.value);
	};
	
	function OnErrorPredicate(predicate) {
	  this.predicate = predicate;
	}
	
	OnErrorPredicate.prototype.equals = function (other) {
	  if (other === this) { return true; }
	  if (other == null) { return false; }
	  if (other.kind !== 'E') { return false; }
	  return this.predicate(other.error);
	};
	
	var ReactiveTest = Rx.ReactiveTest = {
	  /** Default virtual time used for creation of observable sequences in unit tests. */
	  created: 100,
	  /** Default virtual time used to subscribe to observable sequences in unit tests. */
	  subscribed: 200,
	  /** Default virtual time used to dispose subscriptions in unit tests. */
	  disposed: 1000,
	
	  /**
	   * Factory method for an OnNext notification record at a given time with a given value or a predicate function.
	   *
	   * 1 - ReactiveTest.onNext(200, 42);
	   * 2 - ReactiveTest.onNext(200, function (x) { return x.length == 2; });
	   *
	   * @param ticks Recorded virtual time the OnNext notification occurs.
	   * @param value Recorded value stored in the OnNext notification or a predicate.
	   * @return Recorded OnNext notification.
	   */
	  onNext: function (ticks, value) {
	    return typeof value === 'function' ?
	      new Recorded(ticks, new OnNextPredicate(value)) :
	      new Recorded(ticks, Notification.createOnNext(value));
	  },
	  /**
	   * Factory method for an OnError notification record at a given time with a given error.
	   *
	   * 1 - ReactiveTest.onNext(200, new Error('error'));
	   * 2 - ReactiveTest.onNext(200, function (e) { return e.message === 'error'; });
	   *
	   * @param ticks Recorded virtual time the OnError notification occurs.
	   * @param exception Recorded exception stored in the OnError notification.
	   * @return Recorded OnError notification.
	   */
	  onError: function (ticks, error) {
	    return typeof error === 'function' ?
	      new Recorded(ticks, new OnErrorPredicate(error)) :
	      new Recorded(ticks, Notification.createOnError(error));
	  },
	  /**
	   * Factory method for an OnCompleted notification record at a given time.
	   *
	   * @param ticks Recorded virtual time the OnCompleted notification occurs.
	   * @return Recorded OnCompleted notification.
	   */
	  onCompleted: function (ticks) {
	    return new Recorded(ticks, Notification.createOnCompleted());
	  },
	  /**
	   * Factory method for a subscription record based on a given subscription and disposal time.
	   *
	   * @param start Virtual time indicating when the subscription was created.
	   * @param end Virtual time indicating when the subscription was disposed.
	   * @return Subscription object.
	   */
	  subscribe: function (start, end) {
	    return new Subscription(start, end);
	  }
	};
	
	  /**
	   * Creates a new object recording the production of the specified value at the given virtual time.
	   *
	   * @constructor
	   * @param {Number} time Virtual time the value was produced on.
	   * @param {Mixed} value Value that was produced.
	   * @param {Function} comparer An optional comparer.
	   */
	  var Recorded = Rx.Recorded = function (time, value, comparer) {
	    this.time = time;
	    this.value = value;
	    this.comparer = comparer || defaultComparer;
	  };
	
	  /**
	   * Checks whether the given recorded object is equal to the current instance.
	   *
	   * @param {Recorded} other Recorded object to check for equality.
	   * @returns {Boolean} true if both objects are equal; false otherwise.
	   */
	  Recorded.prototype.equals = function (other) {
	    return this.time === other.time && this.comparer(this.value, other.value);
	  };
	
	  /**
	   * Returns a string representation of the current Recorded value.
	   *
	   * @returns {String} String representation of the current Recorded value.
	   */
	  Recorded.prototype.toString = function () {
	    return this.value.toString() + '@' + this.time;
	  };
	
	  /**
	   * Creates a new subscription object with the given virtual subscription and unsubscription time.
	   *
	   * @constructor
	   * @param {Number} subscribe Virtual time at which the subscription occurred.
	   * @param {Number} unsubscribe Virtual time at which the unsubscription occurred.
	   */
	  var Subscription = Rx.Subscription = function (start, end) {
	    this.subscribe = start;
	    this.unsubscribe = end || Number.MAX_VALUE;
	  };
	
	  /**
	   * Checks whether the given subscription is equal to the current instance.
	   * @param other Subscription object to check for equality.
	   * @returns {Boolean} true if both objects are equal; false otherwise.
	   */
	  Subscription.prototype.equals = function (other) {
	    return this.subscribe === other.subscribe && this.unsubscribe === other.unsubscribe;
	  };
	
	  /**
	   * Returns a string representation of the current Subscription value.
	   * @returns {String} String representation of the current Subscription value.
	   */
	  Subscription.prototype.toString = function () {
	    return '(' + this.subscribe + ', ' + (this.unsubscribe === Number.MAX_VALUE ? 'Infinite' : this.unsubscribe) + ')';
	  };
	
	  var MockDisposable = Rx.MockDisposable = function (scheduler) {
	    this.scheduler = scheduler;
	    this.disposes = [];
	    this.disposes.push(this.scheduler.clock);
	  };
	
	  MockDisposable.prototype.dispose = function () {
	    this.disposes.push(this.scheduler.clock);
	  };
	
	  var MockObserver = (function (__super__) {
	    inherits(MockObserver, __super__);
	
	    function MockObserver(scheduler) {
	      __super__.call(this);
	      this.scheduler = scheduler;
	      this.messages = [];
	    }
	
	    var MockObserverPrototype = MockObserver.prototype;
	
	    MockObserverPrototype.onNext = function (value) {
	      this.messages.push(new Recorded(this.scheduler.clock, Notification.createOnNext(value)));
	    };
	
	    MockObserverPrototype.onError = function (e) {
	      this.messages.push(new Recorded(this.scheduler.clock, Notification.createOnError(e)));
	    };
	
	    MockObserverPrototype.onCompleted = function () {
	      this.messages.push(new Recorded(this.scheduler.clock, Notification.createOnCompleted()));
	    };
	
	    return MockObserver;
	  })(Observer);
	
	  function MockPromise(scheduler, messages) {
	    var self = this;
	    this.scheduler = scheduler;
	    this.messages = messages;
	    this.subscriptions = [];
	    this.observers = [];
	    for (var i = 0, len = this.messages.length; i < len; i++) {
	      var message = this.messages[i],
	          notification = message.value;
	      (function (innerNotification) {
	        scheduler.scheduleAbsolute(null, message.time, function () {
	          var obs = self.observers.slice(0);
	
	          for (var j = 0, jLen = obs.length; j < jLen; j++) {
	            innerNotification.accept(obs[j]);
	          }
	          return disposableEmpty;
	        });
	      })(notification);
	    }
	  }
	
	  MockPromise.prototype.then = function (onResolved, onRejected) {
	    var self = this;
	
	    this.subscriptions.push(new Subscription(this.scheduler.clock));
	    var index = this.subscriptions.length - 1;
	
	    var newPromise;
	
	    var observer = Rx.Observer.create(
	      function (x) {
	        var retValue = onResolved(x);
	        if (retValue && typeof retValue.then === 'function') {
	          newPromise = retValue;
	        } else {
	          var ticks = self.scheduler.clock;
	          newPromise = new MockPromise(self.scheduler, [Rx.ReactiveTest.onNext(ticks, undefined), Rx.ReactiveTest.onCompleted(ticks)]);
	        }
	        var idx = self.observers.indexOf(observer);
	        self.observers.splice(idx, 1);
	        self.subscriptions[index] = new Subscription(self.subscriptions[index].subscribe, self.scheduler.clock);
	      },
	      function (err) {
	        onRejected(err);
	        var idx = self.observers.indexOf(observer);
	        self.observers.splice(idx, 1);
	        self.subscriptions[index] = new Subscription(self.subscriptions[index].subscribe, self.scheduler.clock);
	      }
	    );
	    this.observers.push(observer);
	
	    return newPromise || new MockPromise(this.scheduler, this.messages);
	  };
	
	  var HotObservable = (function (__super__) {
	    inherits(HotObservable, __super__);
	
	    function HotObservable(scheduler, messages) {
	      __super__.call(this);
	      var message, notification, observable = this;
	      this.scheduler = scheduler;
	      this.messages = messages;
	      this.subscriptions = [];
	      this.observers = [];
	      for (var i = 0, len = this.messages.length; i < len; i++) {
	        message = this.messages[i];
	        notification = message.value;
	        (function (innerNotification) {
	          scheduler.scheduleAbsolute(null, message.time, function () {
	            var obs = observable.observers.slice(0);
	
	            for (var j = 0, jLen = obs.length; j < jLen; j++) {
	              innerNotification.accept(obs[j]);
	            }
	            return disposableEmpty;
	          });
	        })(notification);
	      }
	    }
	
	    HotObservable.prototype._subscribe = function (o) {
	      var observable = this;
	      this.observers.push(o);
	      this.subscriptions.push(new Subscription(this.scheduler.clock));
	      var index = this.subscriptions.length - 1;
	      return disposableCreate(function () {
	        var idx = observable.observers.indexOf(o);
	        observable.observers.splice(idx, 1);
	        observable.subscriptions[index] = new Subscription(observable.subscriptions[index].subscribe, observable.scheduler.clock);
	      });
	    };
	
	    return HotObservable;
	  })(Observable);
	
	  var ColdObservable = (function (__super__) {
	    inherits(ColdObservable, __super__);
	
	    function ColdObservable(scheduler, messages) {
	      __super__.call(this);
	      this.scheduler = scheduler;
	      this.messages = messages;
	      this.subscriptions = [];
	    }
	
	    ColdObservable.prototype._subscribe = function (o) {
	      var message, notification, observable = this;
	      this.subscriptions.push(new Subscription(this.scheduler.clock));
	      var index = this.subscriptions.length - 1;
	      var d = new CompositeDisposable();
	      for (var i = 0, len = this.messages.length; i < len; i++) {
	        message = this.messages[i];
	        notification = message.value;
	        (function (innerNotification) {
	          d.add(observable.scheduler.scheduleRelative(null, message.time, function () {
	            innerNotification.accept(o);
	            return disposableEmpty;
	          }));
	        })(notification);
	      }
	      return disposableCreate(function () {
	        observable.subscriptions[index] = new Subscription(observable.subscriptions[index].subscribe, observable.scheduler.clock);
	        d.dispose();
	      });
	    };
	
	    return ColdObservable;
	  })(Observable);
	
	  /** Virtual time scheduler used for testing applications and libraries built using Reactive Extensions. */
	  Rx.TestScheduler = (function (__super__) {
	    inherits(TestScheduler, __super__);
	
	    function baseComparer(x, y) {
	      return x > y ? 1 : (x < y ? -1 : 0);
	    }
	
	    function TestScheduler() {
	      __super__.call(this, 0, baseComparer);
	    }
	
	    /**
	     * Schedules an action to be executed at the specified virtual time.
	     *
	     * @param state State passed to the action to be executed.
	     * @param dueTime Absolute virtual time at which to execute the action.
	     * @param action Action to be executed.
	     * @return Disposable object used to cancel the scheduled action (best effort).
	     */
	    TestScheduler.prototype.scheduleAbsolute = function (state, dueTime, action) {
	      dueTime <= this.clock && (dueTime = this.clock + 1);
	      return __super__.prototype.scheduleAbsolute.call(this, state, dueTime, action);
	    };
	    /**
	     * Adds a relative virtual time to an absolute virtual time value.
	     *
	     * @param absolute Absolute virtual time value.
	     * @param relative Relative virtual time value to add.
	     * @return Resulting absolute virtual time sum value.
	     */
	    TestScheduler.prototype.add = function (absolute, relative) {
	      return absolute + relative;
	    };
	    /**
	     * Converts the absolute virtual time value to a DateTimeOffset value.
	     *
	     * @param absolute Absolute virtual time value to convert.
	     * @return Corresponding DateTimeOffset value.
	     */
	    TestScheduler.prototype.toAbsoluteTime = function (absolute) {
	      return new Date(absolute).getTime();
	    };
	    /**
	     * Converts the TimeSpan value to a relative virtual time value.
	     *
	     * @param timeSpan TimeSpan value to convert.
	     * @return Corresponding relative virtual time value.
	     */
	    TestScheduler.prototype.toRelativeTime = function (timeSpan) {
	      return timeSpan;
	    };
	    /**
	     * Starts the test scheduler and uses the specified virtual times to invoke the factory function, subscribe to the resulting sequence, and dispose the subscription.
	     *
	     * @param create Factory method to create an observable sequence.
	     * @param created Virtual time at which to invoke the factory to create an observable sequence.
	     * @param subscribed Virtual time at which to subscribe to the created observable sequence.
	     * @param disposed Virtual time at which to dispose the subscription.
	     * @return Observer with timestamped recordings of notification messages that were received during the virtual time window when the subscription to the source sequence was active.
	     */
	    TestScheduler.prototype.startScheduler = function (createFn, settings) {
	      settings || (settings = {});
	      settings.created == null && (settings.created = ReactiveTest.created);
	      settings.subscribed == null && (settings.subscribed = ReactiveTest.subscribed);
	      settings.disposed == null && (settings.disposed = ReactiveTest.disposed);
	
	      var observer = this.createObserver(), source, subscription;
	
	      this.scheduleAbsolute(null, settings.created, function () {
	        source = createFn();
	        return disposableEmpty;
	      });
	
	      this.scheduleAbsolute(null, settings.subscribed, function () {
	        subscription = source.subscribe(observer);
	        return disposableEmpty;
	      });
	
	      this.scheduleAbsolute(null, settings.disposed, function () {
	        subscription.dispose();
	        return disposableEmpty;
	      });
	
	      this.start();
	
	      return observer;
	    };
	
	    /**
	     * Creates a hot observable using the specified timestamped notification messages either as an array or arguments.
	     * @param messages Notifications to surface through the created sequence at their specified absolute virtual times.
	     * @return Hot observable sequence that can be used to assert the timing of subscriptions and notifications.
	     */
	    TestScheduler.prototype.createHotObservable = function () {
	      var len = arguments.length, args;
	      if (Array.isArray(arguments[0])) {
	        args = arguments[0];
	      } else {
	        args = new Array(len);
	        for (var i = 0; i < len; i++) { args[i] = arguments[i]; }
	      }
	      return new HotObservable(this, args);
	    };
	
	    /**
	     * Creates a cold observable using the specified timestamped notification messages either as an array or arguments.
	     * @param messages Notifications to surface through the created sequence at their specified virtual time offsets from the sequence subscription time.
	     * @return Cold observable sequence that can be used to assert the timing of subscriptions and notifications.
	     */
	    TestScheduler.prototype.createColdObservable = function () {
	      var len = arguments.length, args;
	      if (Array.isArray(arguments[0])) {
	        args = arguments[0];
	      } else {
	        args = new Array(len);
	        for (var i = 0; i < len; i++) { args[i] = arguments[i]; }
	      }
	      return new ColdObservable(this, args);
	    };
	
	    /**
	     * Creates a resolved promise with the given value and ticks
	     * @param {Number} ticks The absolute time of the resolution.
	     * @param {Any} value The value to yield at the given tick.
	     * @returns {MockPromise} A mock Promise which fulfills with the given value.
	     */
	    TestScheduler.prototype.createResolvedPromise = function (ticks, value) {
	      return new MockPromise(this, [Rx.ReactiveTest.onNext(ticks, value), Rx.ReactiveTest.onCompleted(ticks)]);
	    };
	
	    /**
	     * Creates a rejected promise with the given reason and ticks
	     * @param {Number} ticks The absolute time of the resolution.
	     * @param {Any} reason The reason for rejection to yield at the given tick.
	     * @returns {MockPromise} A mock Promise which rejects with the given reason.
	     */
	    TestScheduler.prototype.createRejectedPromise = function (ticks, reason) {
	      return new MockPromise(this, [Rx.ReactiveTest.onError(ticks, reason)]);
	    };
	
	    /**
	     * Creates an observer that records received notification messages and timestamps those.
	     * @return Observer that can be used to assert the timing of received notifications.
	     */
	    TestScheduler.prototype.createObserver = function () {
	      return new MockObserver(this);
	    };
	
	    return TestScheduler;
	  })(VirtualTimeScheduler);
	
	  var AnonymousObservable = Rx.AnonymousObservable = (function (__super__) {
	    inherits(AnonymousObservable, __super__);
	
	    // Fix subscriber to check for undefined or function returned to decorate as Disposable
	    function fixSubscriber(subscriber) {
	      return subscriber && isFunction(subscriber.dispose) ? subscriber :
	        isFunction(subscriber) ? disposableCreate(subscriber) : disposableEmpty;
	    }
	
	    function setDisposable(s, state) {
	      var ado = state[0], self = state[1];
	      var sub = tryCatch(self.__subscribe).call(self, ado);
	      if (sub === errorObj && !ado.fail(errorObj.e)) { thrower(errorObj.e); }
	      ado.setDisposable(fixSubscriber(sub));
	    }
	
	    function AnonymousObservable(subscribe, parent) {
	      this.source = parent;
	      this.__subscribe = subscribe;
	      __super__.call(this);
	    }
	
	    AnonymousObservable.prototype._subscribe = function (o) {
	      var ado = new AutoDetachObserver(o), state = [ado, this];
	
	      if (currentThreadScheduler.scheduleRequired()) {
	        currentThreadScheduler.schedule(state, setDisposable);
	      } else {
	        setDisposable(null, state);
	      }
	      return ado;
	    };
	
	    return AnonymousObservable;
	
	  }(Observable));
	
	  var AutoDetachObserver = (function (__super__) {
	    inherits(AutoDetachObserver, __super__);
	
	    function AutoDetachObserver(observer) {
	      __super__.call(this);
	      this.observer = observer;
	      this.m = new SingleAssignmentDisposable();
	    }
	
	    var AutoDetachObserverPrototype = AutoDetachObserver.prototype;
	
	    AutoDetachObserverPrototype.next = function (value) {
	      var result = tryCatch(this.observer.onNext).call(this.observer, value);
	      if (result === errorObj) {
	        this.dispose();
	        thrower(result.e);
	      }
	    };
	
	    AutoDetachObserverPrototype.error = function (err) {
	      var result = tryCatch(this.observer.onError).call(this.observer, err);
	      this.dispose();
	      result === errorObj && thrower(result.e);
	    };
	
	    AutoDetachObserverPrototype.completed = function () {
	      var result = tryCatch(this.observer.onCompleted).call(this.observer);
	      this.dispose();
	      result === errorObj && thrower(result.e);
	    };
	
	    AutoDetachObserverPrototype.setDisposable = function (value) { this.m.setDisposable(value); };
	    AutoDetachObserverPrototype.getDisposable = function () { return this.m.getDisposable(); };
	
	    AutoDetachObserverPrototype.dispose = function () {
	      __super__.prototype.dispose.call(this);
	      this.m.dispose();
	    };
	
	    return AutoDetachObserver;
	  }(AbstractObserver));
	
	  var UnderlyingObservable = (function (__super__) {
	    inherits(UnderlyingObservable, __super__);
	    function UnderlyingObservable(m, u) {
	      this._m = m;
	      this._u = u;
	      __super__.call(this);
	    }
	
	    UnderlyingObservable.prototype.subscribeCore = function (o) {
	      return new BinaryDisposable(this._m.getDisposable(), this._u.subscribe(o));
	    };
	
	    return UnderlyingObservable;
	  }(ObservableBase));
	
	  var GroupedObservable = (function (__super__) {
	    inherits(GroupedObservable, __super__);
	    function GroupedObservable(key, underlyingObservable, mergedDisposable) {
	      __super__.call(this);
	      this.key = key;
	      this.underlyingObservable = !mergedDisposable ?
	        underlyingObservable :
	        new UnderlyingObservable(mergedDisposable, underlyingObservable);
	    }
	
	    GroupedObservable.prototype._subscribe = function (o) {
	      return this.underlyingObservable.subscribe(o);
	    };
	
	    return GroupedObservable;
	  }(Observable));
	
	  /**
	   *  Represents an object that is both an observable sequence as well as an observer.
	   *  Each notification is broadcasted to all subscribed observers.
	   */
	  var Subject = Rx.Subject = (function (__super__) {
	    inherits(Subject, __super__);
	    function Subject() {
	      __super__.call(this);
	      this.isDisposed = false;
	      this.isStopped = false;
	      this.observers = [];
	      this.hasError = false;
	    }
	
	    addProperties(Subject.prototype, Observer.prototype, {
	      _subscribe: function (o) {
	        checkDisposed(this);
	        if (!this.isStopped) {
	          this.observers.push(o);
	          return new InnerSubscription(this, o);
	        }
	        if (this.hasError) {
	          o.onError(this.error);
	          return disposableEmpty;
	        }
	        o.onCompleted();
	        return disposableEmpty;
	      },
	      /**
	       * Indicates whether the subject has observers subscribed to it.
	       * @returns {Boolean} Indicates whether the subject has observers subscribed to it.
	       */
	      hasObservers: function () { checkDisposed(this); return this.observers.length > 0; },
	      /**
	       * Notifies all subscribed observers about the end of the sequence.
	       */
	      onCompleted: function () {
	        checkDisposed(this);
	        if (!this.isStopped) {
	          this.isStopped = true;
	          for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	            os[i].onCompleted();
	          }
	
	          this.observers.length = 0;
	        }
	      },
	      /**
	       * Notifies all subscribed observers about the exception.
	       * @param {Mixed} error The exception to send to all observers.
	       */
	      onError: function (error) {
	        checkDisposed(this);
	        if (!this.isStopped) {
	          this.isStopped = true;
	          this.error = error;
	          this.hasError = true;
	          for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	            os[i].onError(error);
	          }
	
	          this.observers.length = 0;
	        }
	      },
	      /**
	       * Notifies all subscribed observers about the arrival of the specified element in the sequence.
	       * @param {Mixed} value The value to send to all observers.
	       */
	      onNext: function (value) {
	        checkDisposed(this);
	        if (!this.isStopped) {
	          for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	            os[i].onNext(value);
	          }
	        }
	      },
	      /**
	       * Unsubscribe all observers and release resources.
	       */
	      dispose: function () {
	        this.isDisposed = true;
	        this.observers = null;
	      }
	    });
	
	    /**
	     * Creates a subject from the specified observer and observable.
	     * @param {Observer} observer The observer used to send messages to the subject.
	     * @param {Observable} observable The observable used to subscribe to messages sent from the subject.
	     * @returns {Subject} Subject implemented using the given observer and observable.
	     */
	    Subject.create = function (observer, observable) {
	      return new AnonymousSubject(observer, observable);
	    };
	
	    return Subject;
	  }(Observable));
	
	  /**
	   *  Represents the result of an asynchronous operation.
	   *  The last value before the OnCompleted notification, or the error received through OnError, is sent to all subscribed observers.
	   */
	  var AsyncSubject = Rx.AsyncSubject = (function (__super__) {
	    inherits(AsyncSubject, __super__);
	
	    /**
	     * Creates a subject that can only receive one value and that value is cached for all future observations.
	     * @constructor
	     */
	    function AsyncSubject() {
	      __super__.call(this);
	      this.isDisposed = false;
	      this.isStopped = false;
	      this.hasValue = false;
	      this.observers = [];
	      this.hasError = false;
	    }
	
	    addProperties(AsyncSubject.prototype, Observer.prototype, {
	      _subscribe: function (o) {
	        checkDisposed(this);
	
	        if (!this.isStopped) {
	          this.observers.push(o);
	          return new InnerSubscription(this, o);
	        }
	
	        if (this.hasError) {
	          o.onError(this.error);
	        } else if (this.hasValue) {
	          o.onNext(this.value);
	          o.onCompleted();
	        } else {
	          o.onCompleted();
	        }
	
	        return disposableEmpty;
	      },
	      /**
	       * Indicates whether the subject has observers subscribed to it.
	       * @returns {Boolean} Indicates whether the subject has observers subscribed to it.
	       */
	      hasObservers: function () { checkDisposed(this); return this.observers.length > 0; },
	      /**
	       * Notifies all subscribed observers about the end of the sequence, also causing the last received value to be sent out (if any).
	       */
	      onCompleted: function () {
	        var i, len;
	        checkDisposed(this);
	        if (!this.isStopped) {
	          this.isStopped = true;
	          var os = cloneArray(this.observers), len = os.length;
	
	          if (this.hasValue) {
	            for (i = 0; i < len; i++) {
	              var o = os[i];
	              o.onNext(this.value);
	              o.onCompleted();
	            }
	          } else {
	            for (i = 0; i < len; i++) {
	              os[i].onCompleted();
	            }
	          }
	
	          this.observers.length = 0;
	        }
	      },
	      /**
	       * Notifies all subscribed observers about the error.
	       * @param {Mixed} error The Error to send to all observers.
	       */
	      onError: function (error) {
	        checkDisposed(this);
	        if (!this.isStopped) {
	          this.isStopped = true;
	          this.hasError = true;
	          this.error = error;
	
	          for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	            os[i].onError(error);
	          }
	
	          this.observers.length = 0;
	        }
	      },
	      /**
	       * Sends a value to the subject. The last value received before successful termination will be sent to all subscribed and future observers.
	       * @param {Mixed} value The value to store in the subject.
	       */
	      onNext: function (value) {
	        checkDisposed(this);
	        if (this.isStopped) { return; }
	        this.value = value;
	        this.hasValue = true;
	      },
	      /**
	       * Unsubscribe all observers and release resources.
	       */
	      dispose: function () {
	        this.isDisposed = true;
	        this.observers = null;
	        this.error = null;
	        this.value = null;
	      }
	    });
	
	    return AsyncSubject;
	  }(Observable));
	
	  /**
	   *  Represents a value that changes over time.
	   *  Observers can subscribe to the subject to receive the last (or initial) value and all subsequent notifications.
	   */
	  var BehaviorSubject = Rx.BehaviorSubject = (function (__super__) {
	    inherits(BehaviorSubject, __super__);
	    function BehaviorSubject(value) {
	      __super__.call(this);
	      this.value = value;
	      this.observers = [];
	      this.isDisposed = false;
	      this.isStopped = false;
	      this.hasError = false;
	    }
	
	    addProperties(BehaviorSubject.prototype, Observer.prototype, {
	      _subscribe: function (o) {
	        checkDisposed(this);
	        if (!this.isStopped) {
	          this.observers.push(o);
	          o.onNext(this.value);
	          return new InnerSubscription(this, o);
	        }
	        if (this.hasError) {
	          o.onError(this.error);
	        } else {
	          o.onCompleted();
	        }
	        return disposableEmpty;
	      },
	      /**
	       * Gets the current value or throws an exception.
	       * Value is frozen after onCompleted is called.
	       * After onError is called always throws the specified exception.
	       * An exception is always thrown after dispose is called.
	       * @returns {Mixed} The initial value passed to the constructor until onNext is called; after which, the last value passed to onNext.
	       */
	      getValue: function () {
	        checkDisposed(this);
	        if (this.hasError) { thrower(this.error); }
	        return this.value;
	      },
	      /**
	       * Indicates whether the subject has observers subscribed to it.
	       * @returns {Boolean} Indicates whether the subject has observers subscribed to it.
	       */
	      hasObservers: function () { checkDisposed(this); return this.observers.length > 0; },
	      /**
	       * Notifies all subscribed observers about the end of the sequence.
	       */
	      onCompleted: function () {
	        checkDisposed(this);
	        if (this.isStopped) { return; }
	        this.isStopped = true;
	        for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	          os[i].onCompleted();
	        }
	
	        this.observers.length = 0;
	      },
	      /**
	       * Notifies all subscribed observers about the exception.
	       * @param {Mixed} error The exception to send to all observers.
	       */
	      onError: function (error) {
	        checkDisposed(this);
	        if (this.isStopped) { return; }
	        this.isStopped = true;
	        this.hasError = true;
	        this.error = error;
	
	        for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	          os[i].onError(error);
	        }
	
	        this.observers.length = 0;
	      },
	      /**
	       * Notifies all subscribed observers about the arrival of the specified element in the sequence.
	       * @param {Mixed} value The value to send to all observers.
	       */
	      onNext: function (value) {
	        checkDisposed(this);
	        if (this.isStopped) { return; }
	        this.value = value;
	        for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	          os[i].onNext(value);
	        }
	      },
	      /**
	       * Unsubscribe all observers and release resources.
	       */
	      dispose: function () {
	        this.isDisposed = true;
	        this.observers = null;
	        this.value = null;
	        this.error = null;
	      }
	    });
	
	    return BehaviorSubject;
	  }(Observable));
	
	  /**
	   * Represents an object that is both an observable sequence as well as an observer.
	   * Each notification is broadcasted to all subscribed and future observers, subject to buffer trimming policies.
	   */
	  var ReplaySubject = Rx.ReplaySubject = (function (__super__) {
	
	    var maxSafeInteger = Math.pow(2, 53) - 1;
	
	    function createRemovableDisposable(subject, observer) {
	      return disposableCreate(function () {
	        observer.dispose();
	        !subject.isDisposed && subject.observers.splice(subject.observers.indexOf(observer), 1);
	      });
	    }
	
	    inherits(ReplaySubject, __super__);
	
	    /**
	     *  Initializes a new instance of the ReplaySubject class with the specified buffer size, window size and scheduler.
	     *  @param {Number} [bufferSize] Maximum element count of the replay buffer.
	     *  @param {Number} [windowSize] Maximum time length of the replay buffer.
	     *  @param {Scheduler} [scheduler] Scheduler the observers are invoked on.
	     */
	    function ReplaySubject(bufferSize, windowSize, scheduler) {
	      this.bufferSize = bufferSize == null ? maxSafeInteger : bufferSize;
	      this.windowSize = windowSize == null ? maxSafeInteger : windowSize;
	      this.scheduler = scheduler || currentThreadScheduler;
	      this.q = [];
	      this.observers = [];
	      this.isStopped = false;
	      this.isDisposed = false;
	      this.hasError = false;
	      this.error = null;
	      __super__.call(this);
	    }
	
	    addProperties(ReplaySubject.prototype, Observer.prototype, {
	      _subscribe: function (o) {
	        checkDisposed(this);
	        var so = new ScheduledObserver(this.scheduler, o), subscription = createRemovableDisposable(this, so);
	
	        this._trim(this.scheduler.now());
	        this.observers.push(so);
	
	        for (var i = 0, len = this.q.length; i < len; i++) {
	          so.onNext(this.q[i].value);
	        }
	
	        if (this.hasError) {
	          so.onError(this.error);
	        } else if (this.isStopped) {
	          so.onCompleted();
	        }
	
	        so.ensureActive();
	        return subscription;
	      },
	      /**
	       * Indicates whether the subject has observers subscribed to it.
	       * @returns {Boolean} Indicates whether the subject has observers subscribed to it.
	       */
	      hasObservers: function () { checkDisposed(this); return this.observers.length > 0; },
	      _trim: function (now) {
	        while (this.q.length > this.bufferSize) {
	          this.q.shift();
	        }
	        while (this.q.length > 0 && (now - this.q[0].interval) > this.windowSize) {
	          this.q.shift();
	        }
	      },
	      /**
	       * Notifies all subscribed observers about the arrival of the specified element in the sequence.
	       * @param {Mixed} value The value to send to all observers.
	       */
	      onNext: function (value) {
	        checkDisposed(this);
	        if (this.isStopped) { return; }
	        var now = this.scheduler.now();
	        this.q.push({ interval: now, value: value });
	        this._trim(now);
	
	        for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	          var observer = os[i];
	          observer.onNext(value);
	          observer.ensureActive();
	        }
	      },
	      /**
	       * Notifies all subscribed observers about the exception.
	       * @param {Mixed} error The exception to send to all observers.
	       */
	      onError: function (error) {
	        checkDisposed(this);
	        if (this.isStopped) { return; }
	        this.isStopped = true;
	        this.error = error;
	        this.hasError = true;
	        var now = this.scheduler.now();
	        this._trim(now);
	        for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	          var observer = os[i];
	          observer.onError(error);
	          observer.ensureActive();
	        }
	        this.observers.length = 0;
	      },
	      /**
	       * Notifies all subscribed observers about the end of the sequence.
	       */
	      onCompleted: function () {
	        checkDisposed(this);
	        if (this.isStopped) { return; }
	        this.isStopped = true;
	        var now = this.scheduler.now();
	        this._trim(now);
	        for (var i = 0, os = cloneArray(this.observers), len = os.length; i < len; i++) {
	          var observer = os[i];
	          observer.onCompleted();
	          observer.ensureActive();
	        }
	        this.observers.length = 0;
	      },
	      /**
	       * Unsubscribe all observers and release resources.
	       */
	      dispose: function () {
	        this.isDisposed = true;
	        this.observers = null;
	      }
	    });
	
	    return ReplaySubject;
	  }(Observable));
	
	  var AnonymousSubject = Rx.AnonymousSubject = (function (__super__) {
	    inherits(AnonymousSubject, __super__);
	    function AnonymousSubject(observer, observable) {
	      this.observer = observer;
	      this.observable = observable;
	      __super__.call(this);
	    }
	
	    addProperties(AnonymousSubject.prototype, Observer.prototype, {
	      _subscribe: function (o) {
	        return this.observable.subscribe(o);
	      },
	      onCompleted: function () {
	        this.observer.onCompleted();
	      },
	      onError: function (error) {
	        this.observer.onError(error);
	      },
	      onNext: function (value) {
	        this.observer.onNext(value);
	      }
	    });
	
	    return AnonymousSubject;
	  }(Observable));
	
	  /**
	  * Used to pause and resume streams.
	  */
	  Rx.Pauser = (function (__super__) {
	    inherits(Pauser, __super__);
	    function Pauser() {
	      __super__.call(this);
	    }
	
	    /**
	     * Pauses the underlying sequence.
	     */
	    Pauser.prototype.pause = function () { this.onNext(false); };
	
	    /**
	    * Resumes the underlying sequence.
	    */
	    Pauser.prototype.resume = function () { this.onNext(true); };
	
	    return Pauser;
	  }(Subject));
	
	  if (true) {
	    root.Rx = Rx;
	
	    !(__WEBPACK_AMD_DEFINE_RESULT__ = function() {
	      return Rx;
	    }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	  } else if (freeExports && freeModule) {
	    // in Node.js or RingoJS
	    if (moduleExports) {
	      (freeModule.exports = Rx).Rx = Rx;
	    } else {
	      freeExports.Rx = Rx;
	    }
	  } else {
	    // in a browser or Rhino
	    root.Rx = Rx;
	  }
	
	  // All code before this point will be filtered from stack traces.
	  var rEndingLine = captureLine();
	
	}.call(this));
	
	/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(44)(module), (function() { return this; }()), __webpack_require__(45)))

/***/ },
/* 44 */
/***/ function(module, exports) {

	module.exports = function(module) {
		if(!module.webpackPolyfill) {
			module.deprecate = function() {};
			module.paths = [];
			// module.parent = undefined by default
			module.children = [];
			module.webpackPolyfill = 1;
		}
		return module;
	}


/***/ },
/* 45 */
/***/ function(module, exports) {

	// shim for using process in browser
	
	var process = module.exports = {};
	var queue = [];
	var draining = false;
	var currentQueue;
	var queueIndex = -1;
	
	function cleanUpNextTick() {
	    draining = false;
	    if (currentQueue.length) {
	        queue = currentQueue.concat(queue);
	    } else {
	        queueIndex = -1;
	    }
	    if (queue.length) {
	        drainQueue();
	    }
	}
	
	function drainQueue() {
	    if (draining) {
	        return;
	    }
	    var timeout = setTimeout(cleanUpNextTick);
	    draining = true;
	
	    var len = queue.length;
	    while(len) {
	        currentQueue = queue;
	        queue = [];
	        while (++queueIndex < len) {
	            if (currentQueue) {
	                currentQueue[queueIndex].run();
	            }
	        }
	        queueIndex = -1;
	        len = queue.length;
	    }
	    currentQueue = null;
	    draining = false;
	    clearTimeout(timeout);
	}
	
	process.nextTick = function (fun) {
	    var args = new Array(arguments.length - 1);
	    if (arguments.length > 1) {
	        for (var i = 1; i < arguments.length; i++) {
	            args[i - 1] = arguments[i];
	        }
	    }
	    queue.push(new Item(fun, args));
	    if (queue.length === 1 && !draining) {
	        setTimeout(drainQueue, 0);
	    }
	};
	
	// v8 likes predictible objects
	function Item(fun, array) {
	    this.fun = fun;
	    this.array = array;
	}
	Item.prototype.run = function () {
	    this.fun.apply(null, this.array);
	};
	process.title = 'browser';
	process.browser = true;
	process.env = {};
	process.argv = [];
	process.version = ''; // empty string to avoid regexp issues
	process.versions = {};
	
	function noop() {}
	
	process.on = noop;
	process.addListener = noop;
	process.once = noop;
	process.off = noop;
	process.removeListener = noop;
	process.removeAllListeners = noop;
	process.emit = noop;
	
	process.binding = function (name) {
	    throw new Error('process.binding is not supported');
	};
	
	process.cwd = function () { return '/' };
	process.chdir = function (dir) {
	    throw new Error('process.chdir is not supported');
	};
	process.umask = function() { return 0; };


/***/ },
/* 46 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var headerColumn_1 = __webpack_require__(47);
	var sizeForBreakpoints_1 = __webpack_require__(48);
	exports.moduleName = 'rl.ui.components.cardContainer.card.headerColumn';
	angular.module(exports.moduleName, [
	    typescript_angular_utilities_1.services.string.moduleName,
	])
	    .directive(sizeForBreakpoints_1.sizeForBreakpointsName, sizeForBreakpoints_1.sizeForBreakpoints)
	    .directive(headerColumn_1.directiveName, headerColumn_1.headerColumn)
	    .controller(headerColumn_1.controllerName, headerColumn_1.HeaderColumnController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyQ29sdW1uLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImhlYWRlckNvbHVtbi5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFFeEQsNkJBQW9GLGdCQUFnQixDQUFDLENBQUE7QUFDckcsbUNBQTJELHNCQUFzQixDQUFDLENBQUE7QUFFdkUsa0JBQVUsR0FBVyxrREFBa0QsQ0FBQztBQUVuRixPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUU7SUFDMUIsdUNBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVTtDQUMxQixDQUFDO0tBQ0EsU0FBUyxDQUFDLDJDQUFzQixFQUFFLHVDQUFrQixDQUFDO0tBQ3JELFNBQVMsQ0FBQyw0QkFBYSxFQUFFLDJCQUFZLENBQUM7S0FDdEMsVUFBVSxDQUFDLDZCQUFjLEVBQUUscUNBQXNCLENBQUMsQ0FBQyJ9

/***/ },
/* 47 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../../typings/jquery/jquery.d.ts' />
	'use strict';
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	var card_1 = __webpack_require__(42);
	exports.directiveName = 'rlCardHeaderColumn';
	exports.controllerName = 'CardHeaderColumnController';
	var HeaderColumnController = (function () {
	    function HeaderColumnController() {
	        var _this = this;
	        this.update = function () {
	            _this.value = __transform.getValue(_this.item, _this.column.getValue);
	        };
	    }
	    HeaderColumnController.prototype.$onInit = function () {
	        this.update();
	        this.cardController.refresh.subscribe(this.update);
	    };
	    return HeaderColumnController;
	}());
	exports.HeaderColumnController = HeaderColumnController;
	headerColumn.$inject = ['$compile'];
	function headerColumn($compile) {
	    'use strict';
	    return {
	        restrict: 'E',
	        require: { cardController: '^' + card_1.componentName },
	        template: "\n\t\t\t<div rl-size-for-breakpoints=\"header.column.size\" styling=\"::header.column.styling\" title=\"{{::header.column.description}}\">\n\t\t\t\t<div class=\"template-container\"></div>\n\t\t\t</div>\n\t\t",
	        controller: exports.controllerName,
	        controllerAs: 'header',
	        scope: {},
	        bindToController: {
	            column: '<',
	            item: '<',
	            alias: '<',
	        },
	        compile: function () {
	            return {
	                pre: function (scope) {
	                    var header = scope.header;
	                    if (header.alias != null) {
	                        scope[header.alias] = header.item;
	                    }
	                    var column = header.column;
	                    if (column.templateUrl != null) {
	                        header.renderedTemplate = $compile('<div ng-include="\'' + column.templateUrl + '\'"></div>')(scope);
	                    }
	                    else if (column.template != null) {
	                        header.renderedTemplate = $compile(column.template)(scope);
	                    }
	                    else {
	                        header.renderedTemplate = $compile('<span>{{header.value}}</span>')(scope);
	                    }
	                },
	                post: function (scope, element) {
	                    var container = element.find('.template-container');
	                    container.append(scope.header.renderedTemplate);
	                },
	            };
	        },
	    };
	}
	exports.headerColumn = headerColumn;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyQ29sdW1uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaGVhZGVyQ29sdW1uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHFFQUFxRTtBQUVyRSxZQUFZLENBQUM7QUFJYiw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUN4RCxJQUFPLFdBQVcsR0FBRyx1Q0FBUSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7QUFJbEQscUJBQStELFNBQVMsQ0FBQyxDQUFBO0FBRTlELHFCQUFhLEdBQVcsb0JBQW9CLENBQUM7QUFDN0Msc0JBQWMsR0FBVyw0QkFBNEIsQ0FBQztBQVlqRTtJQUFBO1FBQUEsaUJBa0JDO1FBSFEsV0FBTSxHQUFpQjtZQUM5QixLQUFJLENBQUMsS0FBSyxHQUFHLFdBQVcsQ0FBQyxRQUFRLENBQUMsS0FBSSxDQUFDLElBQUksRUFBRSxLQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3BFLENBQUMsQ0FBQTtJQUNGLENBQUM7SUFSQSx3Q0FBTyxHQUFQO1FBQ0MsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO1FBQ2QsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBS0YsNkJBQUM7QUFBRCxDQUFDLEFBbEJELElBa0JDO0FBbEJZLDhCQUFzQix5QkFrQmxDLENBQUE7QUFFRCxZQUFZLENBQUMsT0FBTyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDcEMsc0JBQTZCLFFBQWlDO0lBQzdELFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFFBQVEsRUFBRSxHQUFHO1FBQ2IsT0FBTyxFQUFFLEVBQUUsY0FBYyxFQUFFLEdBQUcsR0FBRyxvQkFBYSxFQUFFO1FBQ2hELFFBQVEsRUFBRSxrTkFJVDtRQUNELFVBQVUsRUFBRSxzQkFBYztRQUMxQixZQUFZLEVBQUUsUUFBUTtRQUN0QixLQUFLLEVBQUUsRUFBRTtRQUNULGdCQUFnQixFQUFFO1lBQ2pCLE1BQU0sRUFBRSxHQUFHO1lBQ1gsSUFBSSxFQUFFLEdBQUc7WUFDVCxLQUFLLEVBQUUsR0FBRztTQUNWO1FBQ0QsT0FBTztZQUNOLE1BQU0sQ0FBQztnQkFDTixHQUFHLFlBQUMsS0FBbUI7b0JBQ3RCLElBQUksTUFBTSxHQUEyQixLQUFLLENBQUMsTUFBTSxDQUFDO29CQUNsRCxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7d0JBQzFCLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztvQkFDbkMsQ0FBQztvQkFFRCxJQUFJLE1BQU0sR0FBaUIsTUFBTSxDQUFDLE1BQU0sQ0FBQztvQkFDekMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO3dCQUNoQyxNQUFNLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLHFCQUFxQixHQUFHLE1BQU0sQ0FBQyxXQUFXLEdBQUcsWUFBWSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQ3RHLENBQUM7b0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQzt3QkFDcEMsTUFBTSxDQUFDLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7b0JBQzVELENBQUM7b0JBQUMsSUFBSSxDQUFDLENBQUM7d0JBQ1AsTUFBTSxDQUFDLGdCQUFnQixHQUFHLFFBQVEsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDO29CQUM1RSxDQUFDO2dCQUNGLENBQUM7Z0JBQ0QsSUFBSSxZQUFDLEtBQW1CLEVBQ3JCLE9BQWlDO29CQUNuQyxJQUFJLFNBQVMsR0FBVyxPQUFPLENBQUMsSUFBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7b0JBQzVELFNBQVMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO2dCQUNqRCxDQUFDO2FBQ0QsQ0FBQztRQUNILENBQUM7S0FDRCxDQUFDO0FBQ0gsQ0FBQztBQTNDZSxvQkFBWSxlQTJDM0IsQ0FBQSJ9

/***/ },
/* 48 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __string = typescript_angular_utilities_1.services.string;
	var breakpoint_1 = __webpack_require__(49);
	exports.sizeForBreakpointsName = 'rlSizeForBreakpoints';
	sizeForBreakpoints.$inject = ['$parse', __string.serviceName];
	function sizeForBreakpoints($parse, stringUtility) {
	    'use strict';
	    return {
	        restrict: 'A',
	        link: linkDirective
	    };
	    function linkDirective(scope, element, attributes) {
	        var sizes = $parse(attributes.rlSizeForBreakpoints)(scope);
	        var styling = $parse(attributes.styling)(scope);
	        var classes = [];
	        classes.push(getColumnClass(sizes, breakpoint_1.xs));
	        classes.push(getColumnClass(sizes, breakpoint_1.sm));
	        classes.push(getColumnClass(sizes, breakpoint_1.md));
	        classes.push(getColumnClass(sizes, breakpoint_1.lg));
	        element.addClass(classes.join(' '));
	        if (styling != null) {
	            element.addClass(styling);
	        }
	    }
	    function getColumnClass(columnSizes, attribute) {
	        var value = columnSizes[attribute];
	        if (value > 0 && value !== 'hidden') {
	            return stringUtility.substitute('col-{0}-{1}', attribute, value);
	        }
	        else {
	            return 'hidden-' + attribute;
	        }
	    }
	}
	exports.sizeForBreakpoints = sizeForBreakpoints;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2l6ZUZvckJyZWFrcG9pbnRzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2l6ZUZvckJyZWFrcG9pbnRzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUliLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBRWxDLDJCQUErQiw2Q0FBNkMsQ0FBQyxDQUFBO0FBR2xFLDhCQUFzQixHQUFXLHNCQUFzQixDQUFDO0FBT25FLGtCQUFrQixDQUFDLE9BQU8sR0FBRyxDQUFDLFFBQVEsRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDOUQsNEJBQW1DLE1BQTZCLEVBQUUsYUFBNkM7SUFDOUcsWUFBWSxDQUFDO0lBQ2IsTUFBTSxDQUFDO1FBQ04sUUFBUSxFQUFFLEdBQUc7UUFDYixJQUFJLEVBQUUsYUFBYTtLQUNuQixDQUFDO0lBRUYsdUJBQXVCLEtBQXFCLEVBQ3pDLE9BQWlDLEVBQ2pDLFVBQW1DO1FBQ3JDLElBQUksS0FBSyxHQUFvQixNQUFNLENBQUMsVUFBVSxDQUFDLG9CQUFvQixDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDNUUsSUFBSSxPQUFPLEdBQVcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN4RCxJQUFJLE9BQU8sR0FBVSxFQUFFLENBQUM7UUFDeEIsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLGVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDeEMsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLGVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDeEMsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLGVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDeEMsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLGVBQUUsQ0FBQyxDQUFDLENBQUM7UUFFeEMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDcEMsRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDckIsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUMzQixDQUFDO0lBRUYsQ0FBQztJQUVELHdCQUF3QixXQUE0QixFQUFFLFNBQWlCO1FBQ3RFLElBQUksS0FBSyxHQUFvQixXQUFXLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDcEQsRUFBRSxDQUFDLENBQUMsS0FBSyxHQUFHLENBQUMsSUFBSSxLQUFLLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsU0FBUyxFQUFVLEtBQUssQ0FBQyxDQUFDO1FBQzFFLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNQLE1BQU0sQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzlCLENBQUM7SUFDRixDQUFDO0FBQ0YsQ0FBQztBQWpDZSwwQkFBa0IscUJBaUNqQyxDQUFBIn0=

/***/ },
/* 49 */
/***/ function(module, exports) {

	'use strict';
	exports.lg = 'lg';
	exports.md = 'md';
	exports.sm = 'sm';
	exports.xs = 'xs';
	exports.all = [exports.xs, exports.sm, exports.md, exports.lg];
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJlYWtwb2ludC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJyZWFrcG9pbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRUYsVUFBRSxHQUFXLElBQUksQ0FBQztBQUNsQixVQUFFLEdBQVcsSUFBSSxDQUFDO0FBQ2xCLFVBQUUsR0FBVyxJQUFJLENBQUM7QUFDbEIsVUFBRSxHQUFXLElBQUksQ0FBQztBQUVsQixXQUFHLEdBQWEsQ0FBQyxVQUFFLEVBQUUsVUFBRSxFQUFFLFVBQUUsRUFBRSxVQUFFLENBQUMsQ0FBQyJ9

/***/ },
/* 50 */
/***/ function(module, exports) {

	module.exports = "<rl-generic-container selector=\"__card.selectable\">\r\n\t<template when-selector=\"false\" default>\r\n\t\t<div class=\"card\" ng-class=\"{ 'selected': __card.item.viewData.selected }\">\r\n\t\t\t<div class=\"header\" ng-click=\"__card.toggleContent()\" ng-class=\"{ 'active': __card.hasBody || !__card.permanentFooter }\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div ng-repeat=\"column in __card.columns\">\r\n\t\t\t\t\t\t<rl-card-header-column column=\"column\" item=\"__card.item\" alias=\"__card.cardAs\"></rl-card-header-column>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div ng-show=\"__card.showContent\">\r\n\t\t\t\t<ng-form rl-autosave=\"__card.autosaveLink\" save=\"__card.saveCard()\" save-when-invalid=\"__card.saveWhenInvalid\">\r\n\t\t\t\t\t<div class=\"body\" ng-class=\"{ 'active': __card.clickable }\" ng-click=\"__card.clickCard()\">\r\n\t\t\t\t\t\t<div class=\"content-template\"></div>\r\n\t\t\t\t\t\t<div class=\"clearfix\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</ng-form>\r\n\t\t\t</div>\r\n\t\t\t<div ng-show=\"__card.hasFooter && (__card.showContent || __card.permanentFooter)\">\r\n\t\t\t\t<div class=\"footer\">\r\n\t\t\t\t\t<div class=\"footer-template\"></div>\r\n\t\t\t\t\t<div class=\"clearfix\"></div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</template>\r\n\t<template when-selector=\"true\">\r\n\t\t<div class=\"select-group\">\r\n\t\t\t<div class=\"select-column\">\r\n\t\t\t\t<input type=\"checkbox\" class=\"stand-alone-checkbox\" ng-model=\"__card.item.viewData.selected\" ng-change=\"__card.selectionChanged()\"\r\n\t\t\t\t\t   ng-disabled=\"__card.item.viewData.disabledSelection\" title=\"{{__card.item.viewData.selectionTitle}}\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"select-content\">\r\n\r\n\t\t\t\t<div class=\"card selectable\" ng-class=\"{ 'selected': __card.item.viewData.selected }\">\r\n\t\t\t\t\t<div class=\"header active\" ng-click=\"__card.toggleContent()\">\r\n\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t<div ng-repeat=\"column in __card.columns\">\r\n\t\t\t\t\t\t\t\t<rl-card-header-column column=\"column\" item=\"__card.item\"></rl-card-header-column>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div ng-show=\"__card.showContent\">\r\n\t\t\t\t\t\t<ng-form rl-autosave=\"__card.autosaveLink\" save=\"__card.saveCard()\" save-when-invalid=\"__card.saveWhenInvalid\">\r\n\t\t\t\t\t\t\t<div class=\"body\" ng-class=\"{ 'active': __card.clickable }\" ng-click=\"__card.clickCard()\">\r\n\t\t\t\t\t\t\t\t<div class=\"content-template\"></div>\r\n\t\t\t\t\t\t\t\t<div class=\"clearfix\"></div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</ng-form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div ng-show=\"__card.hasFooter && (__card.showContent || __card.permanentFooter)\">\r\n\t\t\t\t\t\t<div class=\"footer\">\r\n\t\t\t\t\t\t\t<div class=\"footer-template\"></div>\r\n\t\t\t\t\t\t\t<div class=\"clearfix\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</template>\r\n</rl-generic-container>"

/***/ },
/* 51 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.components.cardContainer.cardSearch';
	exports.componentName = 'rlCardSearch';
	exports.controllerName = 'CardSearchController';
	exports.defaultSearchPlaceholder = 'Search';
	exports.defaultSearchDelay = 1000;
	var CardSearchController = (function () {
	    function CardSearchController($scope, $timeout) {
	        this.$scope = $scope;
	        this.$timeout = $timeout;
	        this.searchLengthError = false;
	        this.hasSearchFilter = true;
	    }
	    CardSearchController.prototype.$onInit = function () {
	        var _this = this;
	        if (this.cardContainer == null) {
	            return;
	        }
	        this.minSearchError = 'You must enter at least {{cardSearch.minSearchLength}} characters to perform a search';
	        if (this.searchFilter == null) {
	            var filter = this.cardContainer.searchFilter;
	            this.searchFilter = filter;
	            if (filter == null) {
	                this.hasSearchFilter = false;
	            }
	        }
	        if (this.hasSearchFilter) {
	            this.searchPlaceholder = exports.defaultSearchPlaceholder;
	            var dataSource_1 = this.cardContainer.dataSource;
	            var delay_1 = this.delay != null
	                ? this.delay
	                : exports.defaultSearchDelay;
	            var timer_1;
	            this.$scope.$watch(function () { return _this.searchText; }, function (search) {
	                _this.searchFilter.searchText = search;
	                _this.minSearchLength = _this.searchFilter.minSearchLength;
	                _this.validateSearchLength(search, _this.minSearchLength);
	                if (timer_1 != null) {
	                    _this.$timeout.cancel(timer_1);
	                }
	                timer_1 = _this.$timeout(dataSource_1.refresh.bind(dataSource_1), delay_1);
	            });
	            this.$scope.$watch(function () {
	                return _this.searchFilter.searchText;
	            }, function () {
	                _this.searchText = _this.searchFilter.searchText;
	            });
	        }
	    };
	    CardSearchController.prototype.validateSearchLength = function (search, minLength) {
	        // show error if search string exists but is below minimum size
	        this.searchLengthError = search != null
	            && search.length > 0
	            && search.length < minLength;
	    };
	    CardSearchController.$inject = ['$scope', '$timeout'];
	    return CardSearchController;
	}());
	exports.CardSearchController = CardSearchController;
	var cardSearch = {
	    require: { cardContainer: '?^^rlCardContainer' },
	    template: __webpack_require__(52),
	    controller: exports.controllerName,
	    controllerAs: 'cardSearch',
	    bindings: {
	        delay: '<?searchDelay',
	        searchFilter: '<?',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, cardSearch)
	    .controller(exports.controllerName, CardSearchController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyZFNlYXJjaC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNhcmRTZWFyY2gudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFReEIsa0JBQVUsR0FBVywyQ0FBMkMsQ0FBQztBQUNqRSxxQkFBYSxHQUFXLGNBQWMsQ0FBQztBQUN2QyxzQkFBYyxHQUFXLHNCQUFzQixDQUFDO0FBRWhELGdDQUF3QixHQUFXLFFBQVEsQ0FBQztBQUM1QywwQkFBa0IsR0FBVyxJQUFJLENBQUM7QUFNN0M7SUFjQyw4QkFBb0IsTUFBc0IsRUFDOUIsUUFBaUM7UUFEekIsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7UUFDOUIsYUFBUSxHQUFSLFFBQVEsQ0FBeUI7UUFUN0Msc0JBQWlCLEdBQVksS0FBSyxDQUFDO1FBRW5DLG9CQUFlLEdBQVksSUFBSSxDQUFDO0lBT2dCLENBQUM7SUFFakQsc0NBQU8sR0FBUDtRQUFBLGlCQTZDQztRQTVDQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDaEMsTUFBTSxDQUFDO1FBQ1IsQ0FBQztRQUVELElBQUksQ0FBQyxjQUFjLEdBQUcsdUZBQXVGLENBQUM7UUFFOUcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQy9CLElBQUksTUFBTSxHQUErQyxJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQztZQUN6RixJQUFJLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQztZQUUzQixFQUFFLENBQUMsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDcEIsSUFBSSxDQUFDLGVBQWUsR0FBRyxLQUFLLENBQUM7WUFDOUIsQ0FBQztRQUNGLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFD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

/***/ },
/* 52 */
/***/ function(module, exports) {

	module.exports = "<div class=\"input-group\" ng-show=\"cardSearch.hasSearchFilter\" ng-class=\"{ 'has-error': cardSearch.searchLengthError }\">\r\n\t<input class=\"form-control\" type=\"text\" placeholder=\"{{cardSearch.searchPlaceholder}}\" ng-model=\"cardSearch.searchText\"\r\n\t\t   rl-popover=\"cardSearch.minSearchError\" popover-trigger=\"mouseenter\" popover-enable=\"cardSearch.searchLengthError\" />\r\n\t<div class=\"input-group-btn\">\r\n\t\t<button type=\"button\" class=\"btn btn-default\" ng-disabled=\"cardSearch.searchText | isEmpty\" ng-click=\"cardSearch.searchText = null\">\r\n\t\t\t<i class=\"fa fa-times\"></i>\r\n\t\t</button>\r\n\t</div>\r\n</div>"

/***/ },
/* 53 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../typings/jquery/jquery.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var sortDirection_1 = __webpack_require__(54);
	exports.moduleName = 'rl.ui.components.cardContainer.columnHeader';
	exports.directiveName = 'rlColumnHeader';
	cardColumnHeader.$inject = ['$compile'];
	function cardColumnHeader($compile) {
	    'use strict';
	    return {
	        restrict: 'E',
	        template: "\n\t\t\t<div rl-size-for-breakpoints=\"column.size\" ng-click=\"sort()\" title=\"{{::column.description}}\"\n\t\t\t\t\tclass=\"column-header\">\n\t\t\t\t<div class=\"template-container\"></div>\n\t\t\t\t<i ng-show=\"sorting === sortDirection.ascending\" class=\"fa fa-sort-asc\"></i>\n\t\t\t\t<i ng-show=\"sorting === sortDirection.descending\" class=\"fa fa-sort-desc\"></i>\n\t\t\t</div>\n\t\t",
	        scope: {
	            column: '=',
	            sorting: '=',
	            sort: '&',
	        },
	        compile: function () {
	            return {
	                pre: function (scope) {
	                    var column = scope.column;
	                    if (column.headerTemplateUrl != null) {
	                        scope.renderedTemplate = $compile('<div ng-include="\'' + column.headerTemplateUrl + '\'"></div>')(scope);
	                    }
	                    else if (column.headerTemplate != null) {
	                        scope.renderedTemplate = $compile(column.headerTemplate)(scope);
	                    }
	                    else {
	                        scope.renderedTemplate = ('<h5>' + column.label + '</h5');
	                    }
	                },
	                post: function (scope, element) {
	                    if (scope.column.displayColumnHeader != null && scope.column.displayColumnHeader === false) {
	                        element.remove();
	                        return;
	                    }
	                    var container = element.find('.template-container');
	                    container.append(scope.renderedTemplate);
	                    scope.sortDirection = sortDirection_1.SortDirection;
	                },
	            };
	        }
	    };
	}
	exports.cardColumnHeader = cardColumnHeader;
	angular.module(exports.moduleName, [])
	    .directive(exports.directiveName, cardColumnHeader);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sdW1uSGVhZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY29sdW1uSGVhZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGtFQUFrRTtBQUVsRSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyw4QkFBK0Msd0JBQXdCLENBQUMsQ0FBQTtBQUc3RCxrQkFBVSxHQUFXLDZDQUE2QyxDQUFDO0FBQ25FLHFCQUFhLEdBQVcsZ0JBQWdCLENBQUM7QUFXcEQsZ0JBQWdCLENBQUMsT0FBTyxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDeEMsMEJBQWlDLFFBQWlDO0lBQ2pFLFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFFBQVEsRUFBRSxHQUFHO1FBQ2IsUUFBUSxFQUFFLDZZQU9UO1FBQ0QsS0FBSyxFQUFFO1lBQ04sTUFBTSxFQUFFLEdBQUc7WUFDWCxPQUFPLEVBQUUsR0FBRztZQUNaLElBQUksRUFBRSxHQUFHO1NBQ1Q7UUFDRCxPQUFPO1lBQ04sTUFBTSxDQUFDO2dCQUNOLEdBQUcsWUFBQyxLQUE2QjtvQkFDaEMsSUFBSSxNQUFNLEdBQWlCLEtBQUssQ0FBQyxNQUFNLENBQUM7b0JBQ3hDLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO3dCQUN0QyxLQUFLLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLHFCQUFxQixHQUFHLE1BQU0sQ0FBQyxpQkFBaUIsR0FBRyxZQUFZLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDM0csQ0FBQztvQkFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO3dCQUMxQyxLQUFLLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDakUsQ0FBQztvQkFBQyxJQUFJLENBQUMsQ0FBQzt3QkFDUCxLQUFLLENBQUMsZ0JBQWdCLEdBQVEsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsQ0FBQztvQkFDaEUsQ0FBQztnQkFDRixDQUFDO2dCQUNELElBQUksWUFBQyxLQUE2QixFQUFFLE9BQWlDO29CQUNwRSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLG1CQUFtQixJQUFJLElBQUksSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLG1CQUFtQixLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUM7d0JBQzVGLE9BQU8sQ0FBQyxNQUFNLEVBQUUsQ0FBQzt3QkFDakIsTUFBTSxDQUFDO29CQUNSLENBQUM7b0JBQ0QsSUFBSSxTQUFTLEdBQVcsT0FBTyxDQUFDLElBQUksQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO29CQUM1RCxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO29CQUV6QyxLQUFLLENBQUMsYUFBYSxHQUFHLDZCQUFhLENBQUM7Z0JBRXJDLENBQUM7YUFDRCxDQUFDO1FBQ0gsQ0FBQztLQUNELENBQUM7QUFDSCxDQUFDO0FBM0NlLHdCQUFnQixtQkEyQy9CLENBQUE7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLGdCQUFnQixDQUFDLENBQUMifQ==

/***/ },
/* 54 */
/***/ function(module, exports) {

	'use strict';
	var SortDirection = (function () {
	    function SortDirection(value) {
	        this.value = value;
	    }
	    SortDirection.toggle = function (direction) {
	        if (direction === SortDirection.ascending) {
	            return SortDirection.descending;
	        }
	        else if (direction === SortDirection.descending) {
	            return SortDirection.none;
	        }
	        else {
	            return SortDirection.ascending;
	        }
	    };
	    SortDirection.getFullName = function (direction) {
	        'use strict';
	        if (direction === SortDirection.ascending) {
	            return 'ascending';
	        }
	        else if (direction === SortDirection.descending) {
	            return 'descending';
	        }
	        else {
	            return 'none';
	        }
	    };
	    SortDirection.none = new SortDirection(0);
	    SortDirection.ascending = new SortDirection(1);
	    SortDirection.descending = new SortDirection(2);
	    return SortDirection;
	}());
	exports.SortDirection = SortDirection;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydERpcmVjdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNvcnREaXJlY3Rpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBUWI7SUFLQyx1QkFBb0IsS0FBYTtRQUFiLFVBQUssR0FBTCxLQUFLLENBQVE7SUFBSSxDQUFDO0lBRXhCLG9CQUFNLEdBQXBCLFVBQXFCLFNBQXdCO1FBQzVDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsS0FBSyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQztRQUNqQyxDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsS0FBSyxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztRQUMzQixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDUCxNQUFNLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQztRQUNoQyxDQUFDO0lBQ0YsQ0FBQztJQUVhLHlCQUFXLEdBQXpCLFVBQTBCLFNBQXdCO1FBQ2pELFlBQVksQ0FBQztRQUNiLEVBQUUsQ0FBQyxDQUFDLFNBQVMsS0FBSyxhQUFhLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUMzQyxNQUFNLENBQUMsV0FBVyxDQUFDO1FBQ3BCLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsU0FBUyxLQUFLLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ25ELE1BQU0sQ0FBQyxZQUFZLENBQUM7UUFDckIsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ1AsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUNmLENBQUM7SUFDRixDQUFDO0lBekJhLGtCQUFJLEdBQWtCLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzNDLHVCQUFTLEdBQWtCLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hELHdCQUFVLEdBQWtCLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBd0JoRSxvQkFBQztBQUFELENBQUMsQUEzQkQsSUEyQkM7QUEzQlkscUJBQWEsZ0JBMkJ6QixDQUFBIn0=

/***/ },
/* 55 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var sorts_module_1 = __webpack_require__(56);
	var clientServerDataSource = __webpack_require__(60);
	exports.clientServerDataSource = clientServerDataSource;
	var dataPager = __webpack_require__(65);
	exports.dataPager = dataPager;
	var dataServiceDataSource = __webpack_require__(66);
	exports.dataServiceDataSource = dataServiceDataSource;
	var serverSideDataSource = __webpack_require__(67);
	exports.serverSideDataSource = serverSideDataSource;
	var simpleDataSource = __webpack_require__(68);
	exports.simpleDataSource = simpleDataSource;
	var smartDataSource = __webpack_require__(69);
	exports.smartDataSource = smartDataSource;
	var events = __webpack_require__(63);
	exports.events = events;
	var dataSourceProcessor = __webpack_require__(64);
	exports.dataSourceProcessor = dataSourceProcessor;
	var dataSourceBase = __webpack_require__(62);
	exports.dataSourceBase = dataSourceBase;
	exports.moduleName = 'rl.ui.components.cardContainer.dataSources';
	angular.module(exports.moduleName, [
	    typescript_angular_utilities_1.services.object.moduleName,
	    sorts_module_1.moduleName,
	    clientServerDataSource.moduleName,
	    dataPager.moduleName,
	    dataServiceDataSource.moduleName,
	    serverSideDataSource.moduleName,
	    simpleDataSource.moduleName,
	    smartDataSource.moduleName,
	])
	    .service(dataSourceProcessor.processorServiceName, dataSourceProcessor.DataSourceProcessor);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YVNvdXJjZXMubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGF0YVNvdXJjZXMubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBRXhELDZCQUE4Qyx1QkFBdUIsQ0FBQyxDQUFBO0FBQ3RFLElBQVksc0JBQXNCLFdBQU0seURBQXlELENBQUMsQ0FBQTtBQVdqRyw4QkFBc0I7QUFWdkIsSUFBWSxTQUFTLFdBQU0sK0JBQStCLENBQUMsQ0FBQTtBQVcxRCxpQkFBUztBQVZWLElBQVkscUJBQXFCLFdBQU0sdURBQXVELENBQUMsQ0FBQTtBQVc5Riw2QkFBcUI7QUFWdEIsSUFBWSxvQkFBb0IsV0FBTSxxREFBcUQsQ0FBQyxDQUFBO0FBVzNGLDRCQUFvQjtBQVZyQixJQUFZLGdCQUFnQixXQUFNLDZDQUE2QyxDQUFDLENBQUE7QUFXL0Usd0JBQWdCO0FBVmpCLElBQVksZUFBZSxXQUFNLDJDQUEyQyxDQUFDLENBQUE7QUFXNUUsdUJBQWU7QUFWaEIsSUFBWSxNQUFNLFdBQU0sb0JBQW9CLENBQUMsQ0FBQTtBQVc1QyxjQUFNO0FBVlAsSUFBWSxtQkFBbUIsV0FBTSwrQkFBK0IsQ0FBQyxDQUFBO0FBV3BFLDJCQUFtQjtBQVZwQixJQUFZLGNBQWMsV0FBTSwwQkFBMEIsQ0FBQyxDQUFBO0FBVzFELHNCQUFjO0FBTUosa0JBQVUsR0FBVyw0Q0FBNEMsQ0FBQztBQUU3RSxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUU7SUFDMUIsdUNBQVEsQ0FBQyxNQUFNLENBQUMsVUFBVTtJQUMxQix5QkFBZTtJQUVmLHNCQUFzQixDQUFDLFVBQVU7SUFDakMsU0FBUyxDQUFDLFVBQVU7SUFDcEIscUJBQXFCLENBQUMsVUFBVTtJQUNoQyxvQkFBb0IsQ0FBQyxVQUFVO0lBQy9CLGdCQUFnQixDQUFDLFVBQVU7SUFDM0IsZUFBZSxDQUFDLFVBQVU7Q0FDMUIsQ0FBQztLQUNBLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxvQkFBb0IsRUFBRSxtQkFBbUIsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDIn0=

/***/ },
/* 56 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var mergeSort = __webpack_require__(57);
	exports.mergeSort = mergeSort;
	var sorter = __webpack_require__(58);
	exports.sorter = sorter;
	__export(__webpack_require__(59));
	__export(__webpack_require__(54));
	exports.moduleName = 'rl.ui.components.cardContainer.sorts';
	angular.module(exports.moduleName, [
	    mergeSort.moduleName,
	    sorter.moduleName,
	]);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydHMubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic29ydHMubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLElBQVksU0FBUyxXQUFNLCtCQUErQixDQUFDLENBQUE7QUFPMUQsaUJBQVM7QUFOVixJQUFZLE1BQU0sV0FBTSx5QkFBeUIsQ0FBQyxDQUFBO0FBT2pELGNBQU07QUFMUCxpQkFBYyxRQUFRLENBQUMsRUFBQTtBQUN2QixpQkFBYyxpQkFBaUIsQ0FBQyxFQUFBO0FBT3JCLGtCQUFVLEdBQVcsc0NBQXNDLENBQUM7QUFFdkUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFO0lBQzFCLFNBQVMsQ0FBQyxVQUFVO0lBQ3BCLE1BQU0sQ0FBQyxVQUFVO0NBQ2pCLENBQUMsQ0FBQyJ9

/***/ },
/* 57 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	exports.moduleName = 'rl.ui.components.cardContainer.sorts.mergeSort';
	exports.serviceName = 'mergeSort';
	var MergeSort = (function () {
	    function MergeSort() {
	    }
	    MergeSort.prototype.sort = function (data, compare) {
	        if (data.length < 2) {
	            return data;
	        }
	        if (compare == null) {
	            compare = this.defaultCompare;
	        }
	        var mid;
	        var left;
	        var right;
	        mid = data.length / 2;
	        left = this.sort(data.slice(0, mid), compare);
	        right = this.sort(data.slice(mid, data.length), compare);
	        return this.merge(left, right, compare);
	    };
	    MergeSort.prototype.defaultCompare = function (a, b) {
	        return a < b
	            ? typescript_angular_utilities_1.types.CompareResult.less
	            : (a > b ? typescript_angular_utilities_1.types.CompareResult.greater : typescript_angular_utilities_1.types.CompareResult.equal);
	    };
	    MergeSort.prototype.merge = function (left, right, compare) {
	        var result = [];
	        while (left.length && right.length) {
	            if (compare(left[0], right[0]) === typescript_angular_utilities_1.types.CompareResult.greater) {
	                result.push(right.shift());
	            }
	            else {
	                // if equal it should preserve same order (stable)
	                result.push(left.shift());
	            }
	        }
	        if (left.length) {
	            result.push.apply(result, left);
	        }
	        if (right.length) {
	            result.push.apply(result, right);
	        }
	        return result;
	    };
	    return MergeSort;
	}());
	exports.MergeSort = MergeSort;
	angular.module(exports.moduleName, [])
	    .service(exports.serviceName, MergeSort);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVyZ2VTb3J0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtZXJnZVNvcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyw2Q0FBZ0MsOEJBQThCLENBQUMsQ0FBQTtBQUlwRCxrQkFBVSxHQUFXLGdEQUFnRCxDQUFDO0FBQ3RFLG1CQUFXLEdBQVcsV0FBVyxDQUFDO0FBTTdDO0lBQUE7SUFpREEsQ0FBQztJQWhEQSx3QkFBSSxHQUFKLFVBQWdCLElBQWlCLEVBQUUsT0FBcUM7UUFDdkUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDYixDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDckIsT0FBTyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDL0IsQ0FBQztRQUVELElBQUksR0FBVyxDQUFDO1FBQ2hCLElBQUksSUFBVyxDQUFDO1FBQ2hCLElBQUksS0FBWSxDQUFDO1FBRWpCLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUN0QixJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUM5QyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFFekQsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQVksSUFBSSxFQUFFLEtBQUssRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRU8sa0NBQWMsR0FBdEIsVUFBa0MsQ0FBWSxFQUFFLENBQVk7UUFDM0QsTUFBTSxDQUFDLENBQUMsR0FBRyxDQUFDO2NBQ1Qsb0NBQUssQ0FBQyxhQUFhLENBQUMsSUFBSTtjQUN4QixDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsb0NBQUssQ0FBQyxhQUFhLENBQUMsT0FBTyxHQUFHLG9DQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3RFLENBQUM7SUFFTyx5QkFBSyxHQUFiLFVBQXlCLElBQWlCLEVBQUUsS0FBa0IsRUFBRSxPQUFvQztRQUNuRyxJQUFJLE1BQU0sR0FBZ0IsRUFBRSxDQUFDO1FBRTdCLE9BQU8sSUFBSSxDQUFDLE1BQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDcEMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxvQ0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO2dCQUNoRSxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDO1lBQzVCLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDUCxrREFBa0Q7Z0JBQ2xELE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUM7WUFDM0IsQ0FBQztRQUNGLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNqQixNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDakMsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNmLENBQUM7SUFDRixnQkFBQztBQUFELENBQUMsQUFqREQsSUFpREM7QUFqRFksaUJBQVMsWUFpRHJCLENBQUE7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLFNBQVMsQ0FBQyxDQUFDIn0=

/***/ },
/* 58 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	var sortDirection_1 = __webpack_require__(54);
	var mergeSort_service_1 = __webpack_require__(57);
	exports.moduleName = 'rl.ui.components.cardContainer.sorts.sorter';
	exports.serviceName = 'sorter';
	var Sorter = (function () {
	    function Sorter(mergeSort) {
	        this.mergeSort = mergeSort;
	    }
	    Sorter.prototype.sort = function (data, sort) {
	        var _this = this;
	        if (sort === null) {
	            return data;
	        }
	        if (_.isArray(sort)) {
	            var reverseSorts = _.clone(sort);
	            reverseSorts.reverse();
	            return _.reduce(reverseSorts, function (sortedData, nextSort) {
	                return _this.singleSort(sortedData, nextSort);
	            }, data);
	        }
	        return this.singleSort(data, sort);
	    };
	    Sorter.prototype.singleSort = function (data, sort) {
	        var compareFunction = this.buildSortFunction(sort);
	        return this.mergeSort.sort(data, compareFunction);
	    };
	    Sorter.prototype.buildSortFunction = function (sort) {
	        return function (a, b) {
	            if (sort.direction === sortDirection_1.SortDirection.none) {
	                return typescript_angular_utilities_1.types.CompareResult.equal;
	            }
	            var valueOfA = __transform.getValue(a, sort.column.getValue);
	            var valueOfB = __transform.getValue(b, sort.column.getValue);
	            var greaterResult = typescript_angular_utilities_1.types.CompareResult.greater;
	            var lessResult = typescript_angular_utilities_1.types.CompareResult.less;
	            var descendingSort = (sort.direction === sortDirection_1.SortDirection.descending);
	            var flip = sort.column.flipSort;
	            // Exclusive OR... if flipping a descending sort, you get an ascending sort
	            if ((descendingSort || flip) && !(descendingSort && flip)) {
	                greaterResult = typescript_angular_utilities_1.types.CompareResult.less;
	                lessResult = typescript_angular_utilities_1.types.CompareResult.greater;
	            }
	            return valueOfA > valueOfB
	                ? greaterResult
	                : (valueOfA < valueOfB ? lessResult : typescript_angular_utilities_1.types.CompareResult.equal);
	        };
	    };
	    Sorter.$inject = [mergeSort_service_1.serviceName];
	    return Sorter;
	}());
	exports.Sorter = Sorter;
	angular.module(exports.moduleName, [])
	    .service(exports.serviceName, Sorter);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydGVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzb3J0ZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNuQyxJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1Qiw2Q0FBZ0MsOEJBQThCLENBQUMsQ0FBQTtBQUMvRCxJQUFPLFdBQVcsR0FBRyx1Q0FBUSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7QUFHbEQsOEJBQThCLGtCQUFrQixDQUFDLENBQUE7QUFDakQsa0NBQWdFLGdDQUFnQyxDQUFDLENBQUE7QUFFdEYsa0JBQVUsR0FBVyw2Q0FBNkMsQ0FBQztBQUNuRSxtQkFBVyxHQUFXLFFBQVEsQ0FBQztBQU8xQztJQUVDLGdCQUFvQixTQUFxQjtRQUFyQixjQUFTLEdBQVQsU0FBUyxDQUFZO0lBQUksQ0FBQztJQUU5QyxxQkFBSSxHQUFKLFVBQWdCLElBQWlCLEVBQUUsSUFBcUI7UUFBeEQsaUJBZUM7UUFkQSxFQUFFLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNuQixNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ2IsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JCLElBQUksWUFBWSxHQUFxQixDQUFDLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ25ELFlBQVksQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUV2QixNQUFNLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsVUFBQyxVQUFpQixFQUFFLFFBQWU7Z0JBQ2hFLE1BQU0sQ0FBQyxLQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsQ0FBQztZQUM5QyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7UUFDVixDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFTLElBQUksQ0FBQyxDQUFDO0lBQzNDLENBQUM7SUFFTywyQkFBVSxHQUFsQixVQUE4QixJQUFpQixFQUFFLElBQVc7UUFDM0QsSUFBSSxlQUFlLEdBQWdDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNoRixNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLGVBQWUsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFTyxrQ0FBaUIsR0FBekIsVUFBcUMsSUFBVztRQUMvQyxNQUFNLENBQUMsVUFBQyxDQUFZLEVBQUUsQ0FBWTtZQUNqQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxLQUFLLDZCQUFhLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDM0MsTUFBTSxDQUFDLG9DQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQztZQUNsQyxDQUFDO1lBRUQsSUFBSSxRQUFRLEdBQVEsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNsRSxJQUFJLFFBQVEsR0FBUSxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRWxFLElBQUksYUFBYSxHQUF3QixvQ0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUM7WUFDckUsSUFBSSxVQUFVLEdBQXdCLG9DQUFLLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQztZQUcvRCxJQUFJLGNBQWMsR0FBWSxDQUFDLElBQUksQ0FBQyxTQUFTLEtBQUssNkJBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUM1RSxJQUFJLElBQUksR0FBWSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztZQUV6QywyRUFBMkU7WUFDM0UsRUFBRSxDQUFDLENBQUMsQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzNELGFBQWEsR0FBRyxvQ0FBSyxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUM7Z0JBQ3pDLFVBQVUsR0FBRyxvQ0FBSyxDQUFDLGFBQWEsQ0FBQyxPQUFPLENBQUM7WUFDMUMsQ0FBQztZQUVELE1BQU0sQ0FBQyxRQUFRLEdBQUcsUUFBUTtrQkFDdkIsYUFBYTtrQkFDYixDQUFDLFFBQVEsR0FBRyxRQUFRLEdBQUcsVUFBVSxHQUFHLG9DQUFLLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ25FLENBQUMsQ0FBQztJQUNILENBQUM7SUFuRE0sY0FBTyxHQUFhLENBQUMsK0JBQW9CLENBQUMsQ0FBQztJQW9EbkQsYUFBQztBQUFELENBQUMsQUFyREQsSUFxREM7QUFyRFksY0FBTSxTQXFEbEIsQ0FBQTtBQUVELE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxFQUFFLENBQUM7S0FDNUIsT0FBTyxDQUFDLG1CQUFXLEVBQUUsTUFBTSxDQUFDLENBQUMifQ==

/***/ },
/* 59 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	__export(__webpack_require__(54));
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29ydC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNvcnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7O0FBT2IsaUJBQWMsaUJBQWlCLENBQUMsRUFBQSJ9

/***/ },
/* 60 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __observable = typescript_angular_utilities_1.services.observable;
	var __array = typescript_angular_utilities_1.services.array;
	var __object = typescript_angular_utilities_1.services.object;
	var __synchronizedRequests = typescript_angular_utilities_1.services.synchronizedRequests;
	var asyncDataSource_service_1 = __webpack_require__(61);
	var dataSourceProcessor_service_1 = __webpack_require__(64);
	exports.moduleName = 'rl.ui.components.cardContainer.dataSources.clientServerDataSource';
	exports.factoryName = 'clientServerDataSource';
	var ClientServerDataSource = (function (_super) {
	    __extends(ClientServerDataSource, _super);
	    function ClientServerDataSource(getDataSet, searchFilter, getFilterModel, validateModel, observableFactory, dataSourceProcessor, array, object, synchronizedRequestsFactory) {
	        _super.call(this, getDataSet, observableFactory, dataSourceProcessor, array, synchronizedRequestsFactory);
	        this.searchFilter = searchFilter;
	        this.getFilterModel = getFilterModel;
	        this.validateModel = validateModel;
	        this.object = object;
	        this.minSearchLength = 4;
	        this.getFilterModel = this.getFilterModel || function () { return null; };
	        this.validateModel = this.validateModel || function () { return true; };
	        this.countFilterGroups = true;
	        this.search = searchFilter.searchText;
	        this.filterModel = _.clone(this.getFilterModel());
	        searchFilter.minSearchLength = this.minSearchLength;
	    }
	    ClientServerDataSource.prototype.refresh = function () {
	        if (this.searchFilter.searchText !== this.search
	            || this.filterModelChanged()) {
	            this.reload();
	        }
	        else {
	            _super.prototype.refresh.call(this);
	        }
	    };
	    ClientServerDataSource.prototype.reload = function () {
	        this.search = this.searchFilter.searchText;
	        this.filterModel = _.clone(this.getFilterModel());
	        var hasValidSearch = !this.object.isNullOrEmpty(this.search) && this.search.length >= this.minSearchLength;
	        var hasValidFilterModel = this.filterModel != null && this.validateModel(this.filterModel);
	        if (!hasValidSearch && !hasValidFilterModel) {
	            this.resolveReload(null);
	            return;
	        }
	        _super.prototype.reload.call(this);
	    };
	    ClientServerDataSource.prototype.filterModelChanged = function () {
	        return !this.object.areEqual(this.getFilterModel(), this.filterModel);
	    };
	    ClientServerDataSource.prototype.getParams = function () {
	        var searchModel = this.getFilterModel();
	        if (searchModel != null) {
	            searchModel.search = this.search;
	        }
	        else {
	            searchModel = this.search;
	        }
	        return searchModel;
	    };
	    return ClientServerDataSource;
	}(asyncDataSource_service_1.AsyncDataSource));
	exports.ClientServerDataSource = ClientServerDataSource;
	clientServerDataSourceFactory.$inject = [__observable.factoryName, dataSourceProcessor_service_1.processorServiceName, __array.serviceName, __object.serviceName, __synchronizedRequests.factoryName];
	function clientServerDataSourceFactory(observableFactory, dataSourceProcessor, array, object, synchronizedRequestsFactory) {
	    'use strict';
	    return {
	        getInstance: function (getDataSet, searchFilter, getFilterModel, validateModel) {
	            return new ClientServerDataSource(getDataSet, searchFilter, getFilterModel, validateModel, observableFactory, dataSourceProcessor, array, object, synchronizedRequestsFactory);
	        },
	    };
	}
	exports.clientServerDataSourceFactory = clientServerDataSourceFactory;
	angular.module(exports.moduleName, [__observable.moduleName, __array.moduleName, __object.moduleName, __synchronizedRequests.moduleName])
	    .factory(exports.factoryName, clientServerDataSourceFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2xpZW50U2VydmVyRGF0YVNvdXJjZS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY2xpZW50U2VydmVyRGF0YVNvdXJjZS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7Ozs7O0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxZQUFZLEdBQUcsdUNBQVEsQ0FBQyxVQUFVLENBQUM7QUFDMUMsSUFBTyxPQUFPLEdBQUcsdUNBQVEsQ0FBQyxLQUFLLENBQUM7QUFDaEMsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFFbEMsSUFBTyxzQkFBc0IsR0FBRyx1Q0FBUSxDQUFDLG9CQUFvQixDQUFDO0FBRTlELHdDQUFvRSw0QkFBNEIsQ0FBQyxDQUFBO0FBQ2pHLDRDQUEyRCxnQ0FBZ0MsQ0FBQyxDQUFBO0FBRWpGLGtCQUFVLEdBQVcsbUVBQW1FLENBQUM7QUFDekYsbUJBQVcsR0FBVyx3QkFBd0IsQ0FBQztBQW1CMUQ7SUFBdUQsMENBQTBCO0lBS2hGLGdDQUFZLFVBQWlELEVBQ2pELFlBQXdELEVBQ3pELGNBQW9DLEVBQ3BDLGFBQXdDLEVBQy9DLGlCQUF5RCxFQUN6RCxtQkFBeUMsRUFDekMsS0FBNEIsRUFDcEIsTUFBK0IsRUFDdkMsMkJBQWdGO1FBQ25GLGtCQUFNLFVBQVUsRUFBRSxpQkFBaUIsRUFBRSxtQkFBbUIsRUFBRSxLQUFLLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztRQVJuRixpQkFBWSxHQUFaLFlBQVksQ0FBNEM7UUFDekQsbUJBQWMsR0FBZCxjQUFjLENBQXNCO1FBQ3BDLGtCQUFhLEdBQWIsYUFBYSxDQUEyQjtRQUl2QyxXQUFNLEdBQU4sTUFBTSxDQUF5QjtRQVhuQyxvQkFBZSxHQUFXLENBQUMsQ0FBQztRQWVuQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FB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

/***/ },
/* 61 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var dataSourceBase_service_1 = __webpack_require__(62);
	var events = __webpack_require__(63);
	var AsyncDataSource = (function (_super) {
	    __extends(AsyncDataSource, _super);
	    function AsyncDataSource(getDataSet, observableFactory, dataSourceProcessor, array, synchronizedRequestsFactory) {
	        _super.call(this, observableFactory, dataSourceProcessor, array);
	        this.observable.allowableEvents = events.async.all;
	        this.synchronizedRequests = synchronizedRequestsFactory.getInstance(getDataSet, this.resolveReload.bind(this));
	    }
	    Object.defineProperty(AsyncDataSource.prototype, "getDataSet", {
	        set: function (value) {
	            this.synchronizedRequests.dataProvider = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    AsyncDataSource.prototype.reload = function () {
	        this.dataSet = null;
	        this.rawDataSet = null;
	        this.loadingDataSet = true;
	        this.synchronizedRequests.getData(this.getParams());
	    };
	    AsyncDataSource.prototype.resolveReload = function (data) {
	        this.loadingDataSet = false;
	        this.rawDataSet = data;
	        this.processData();
	        this.observable.fire(events.async.reloaded);
	        this.observable.fire(events.redrawing);
	        this.observable.fire(events.changed);
	    };
	    // override with params for getDataSet
	    AsyncDataSource.prototype.getParams = function () {
	        return null;
	    };
	    return AsyncDataSource;
	}(dataSourceBase_service_1.DataSourceBase));
	exports.AsyncDataSource = AsyncDataSource;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXN5bmNEYXRhU291cmNlLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhc3luY0RhdGFTb3VyY2Uuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztBQVViLHVDQUErQiwwQkFBMEIsQ0FBQyxDQUFBO0FBRTFELElBQVksTUFBTSxXQUFNLG9CQUFvQixDQUFDLENBQUE7QUFXN0M7SUFBZ0QsbUNBQXlCO0lBR3hFLHlCQUFZLFVBQXVDLEVBQy9DLGlCQUF5RCxFQUN6RCxtQkFBeUMsRUFDekMsS0FBNEIsRUFDNUIsMkJBQWdGO1FBQ25GLGtCQUFNLGlCQUFpQixFQUFFLG1CQUFtQixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3JELElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQ25ELElBQUksQ0FBQyxvQkFBb0IsR0FBRywyQkFBMkIsQ0FBQyxXQUFXLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDaEgsQ0FBQztJQUVELHNCQUFJLHVDQUFVO2FBQWQsVUFBZSxLQUFrQztZQUNoRCxJQUFJLENBQUMsb0JBQW9CLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUNoRCxDQUFDOzs7T0FBQTtJQUVELGdDQUFNLEdBQU47UUFDQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztRQUNwQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztRQUUzQixJQUFJLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO0lBQ3JELENBQUM7SUFFUyx1Q0FBYSxHQUF2QixVQUF3QixJQUFpQjtRQUN4QyxJQUFJLENBQUMsY0FBYyxHQUFHLEtBQUssQ0FBQztRQUM1QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztRQUV2QixJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM1QyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdkMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFFRCxzQ0FBc0M7SUFDNUIsbUNBQVMsR0FBbkI7UUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDO0lBQ2IsQ0FBQztJQUNGLHNCQUFDO0FBQUQsQ0FBQyxBQXZDRCxDQUFnRCx1Q0FBYyxHQXVDN0Q7QUF2Q1ksdUJBQWUsa0JBdUMzQixDQUFBIn0=

/***/ },
/* 62 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var events = __webpack_require__(63);
	var DataSourceBase = (function () {
	    function DataSourceBase(observableFactory, dataSourceProcessor, array) {
	        this.dataSourceProcessor = dataSourceProcessor;
	        this.array = array;
	        this.sorts = [];
	        this.filters = [];
	        this.count = 0;
	        this.countFilterGroups = false;
	        this.loadingDataSet = false;
	        this.observable = observableFactory.getInstance();
	        this.observable.allowableEvents = events.all;
	    }
	    DataSourceBase.prototype.watch = function (action, event) {
	        return this.observable.register(action, event);
	    };
	    Object.defineProperty(DataSourceBase.prototype, "needsRefinedSearch", {
	        get: function () {
	            var noItemsDisplayed = __object.objectUtility.isNullOrEmpty(this.dataSet);
	            var moreItemsOnServer = this._isEmpty === false || (this.rawDataSet != null && this.rawDataSet.length < this.count);
	            return noItemsDisplayed && moreItemsOnServer;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(DataSourceBase.prototype, "isEmpty", {
	        get: function () {
	            return __object.objectUtility.isNullOrEmpty(this.rawDataSet)
	                && (this._isEmpty != null ? this._isEmpty : true);
	        },
	        set: function (value) {
	            this._isEmpty = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DataSourceBase.prototype.processData = function () {
	        var processedData;
	        if (this.countFilterGroups) {
	            processedData = this.dataSourceProcessor.processAndCount(this.sorts, this.filters, this.pager, this.rawDataSet);
	        }
	        else {
	            processedData = this.dataSourceProcessor.process(this.sorts, this.filters, this.pager, this.rawDataSet);
	        }
	        this.setProcessedData(processedData);
	    };
	    //used when we need to process data but without client filters.
	    DataSourceBase.prototype.processDataNoClientFilters = function () {
	        var processedData;
	        if (this.countFilterGroups) {
	            processedData = this.dataSourceProcessor.processAndCount(this.sorts, null, this.pager, this.rawDataSet);
	        }
	        else {
	            processedData = this.dataSourceProcessor.process(this.sorts, null, this.pager, this.rawDataSet);
	        }
	        this.setProcessedData(processedData);
	    };
	    DataSourceBase.prototype.setProcessedData = function (processedData) {
	        this.count = processedData.count;
	        this.dataSet = processedData.dataSet;
	        this.filteredDataSet = processedData.filteredDataSet;
	    };
	    DataSourceBase.prototype.onSortChange = function () {
	        if (!this.loadingDataSet) {
	            this.filteredDataSet = this.dataSourceProcessor.sort(this.filteredDataSet, this.sorts);
	            this.dataSet = this.dataSourceProcessor.page(this.filteredDataSet, this.pager);
	            this.observable.fire(events.redrawing);
	        }
	    };
	    DataSourceBase.prototype.onPagingChange = function () {
	        if (!this.loadingDataSet) {
	            this.dataSet = this.dataSourceProcessor.page(this.filteredDataSet, this.pager);
	            this.observable.fire(events.redrawing);
	        }
	    };
	    DataSourceBase.prototype.refresh = function () {
	        if (!this.loadingDataSet) {
	            this.processData();
	            this.observable.fire(events.redrawing);
	        }
	    };
	    DataSourceBase.prototype.remove = function (data) {
	        var item = this.array.remove(this.rawDataSet, data);
	        if (item != null) {
	            this.observable.fire(events.removed);
	            this.observable.fire(events.changed);
	            if (this.pager) {
	                this.refresh();
	            }
	        }
	    };
	    DataSourceBase.prototype.push = function (data) {
	        this.rawDataSet.push(data);
	        this.observable.fire(events.added);
	        this.observable.fire(events.changed);
	        this.refresh();
	    };
	    DataSourceBase.prototype.replace = function (oldData, newData) {
	        var locationOfOldData = this.rawDataSet.indexOf(oldData);
	        if (locationOfOldData >= 0) {
	            this.array.replace(this.rawDataSet, oldData, newData);
	            this.observable.fire(events.replaced);
	            this.observable.fire(events.changed);
	            this.refresh();
	        }
	    };
	    return DataSourceBase;
	}());
	exports.DataSourceBase = DataSourceBase;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YVNvdXJjZUJhc2Uuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRhdGFTb3VyY2VCYXNlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsNkNBQWtDLDhCQUE4QixDQUFDLENBQUE7QUFHakUsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFNbEMsSUFBWSxNQUFNLFdBQU0sb0JBQW9CLENBQUMsQ0FBQTtBQUU3QztJQWdCQyx3QkFBWSxpQkFBeUQsRUFDekQsbUJBQXlDLEVBQ3ZDLEtBQTRCO1FBRDlCLHdCQUFtQixHQUFuQixtQkFBbUIsQ0FBc0I7UUFDdkMsVUFBSyxHQUFMLEtBQUssQ0FBdUI7UUFkMUMsVUFBSyxHQUFZLEVBQUUsQ0FBQztRQUNwQixZQUFPLEdBQXNCLEVBQUUsQ0FBQztRQUVoQyxVQUFLLEdBQVcsQ0FBQyxDQUFDO1FBRWxCLHNCQUFpQixHQUFZLEtBQUssQ0FBQztRQUVuQyxtQkFBYyxHQUFZLEtBQUssQ0FBQztRQVEvQixJQUFJLENBQUMsVUFBVSxHQUFHLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2xELElBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUM7SUFDOUMsQ0FBQztJQUVELDhCQUFLLEdBQUwsVUFBbUIsTUFBeUMsRUFBRSxLQUFjO1FBQzNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDaEQsQ0FBQztJQUVELHNCQUFJLDhDQUFrQjthQUF0QjtZQUNDLElBQUksZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzFFLElBQUksaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFFBQVEsS0FBSyxLQUFLLElBQUksQ0FBQyxJQUFJLENB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

/***/ },
/* 63 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var _ = __webpack_require__(18);
	exports.redrawing = 'redrawing';
	exports.changed = 'changed';
	exports.added = 'added';
	exports.removed = 'removed';
	exports.replaced = 'replaced';
	exports.all = [exports.redrawing, exports.changed, exports.added, exports.removed, exports.replaced];
	exports.async = {
	    reloaded: 'reloaded',
	    all: [],
	};
	exports.async.all = _.clone(exports.all);
	exports.async.all.push(exports.async.reloaded);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YVNvdXJjZUV2ZW50cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRhdGFTb3VyY2VFdmVudHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFakIsaUJBQVMsR0FBVyxXQUFXLENBQUM7QUFDaEMsZUFBTyxHQUFXLFNBQVMsQ0FBQztBQUM1QixhQUFLLEdBQVcsT0FBTyxDQUFDO0FBQ3hCLGVBQU8sR0FBVyxTQUFTLENBQUM7QUFDNUIsZ0JBQVEsR0FBVyxVQUFVLENBQUM7QUFFOUIsV0FBRyxHQUFhLENBQUMsaUJBQVMsRUFBRSxlQUFPLEVBQUUsYUFBSyxFQUFFLGVBQU8sRUFBRSxnQkFBUSxDQUFDLENBQUM7QUFRL0QsYUFBSyxHQUFpQjtJQUNoQyxRQUFRLEVBQUUsVUFBVTtJQUVwQixHQUFHLEVBQUUsRUFBRTtDQUNQLENBQUM7QUFFRixhQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBRyxDQUFDLENBQUM7QUFDekIsYUFBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDIn0=

/***/ },
/* 64 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var sorter_service_1 = __webpack_require__(58);
	exports.processorServiceName = 'dataSourceProcessor';
	var DataSourceProcessor = (function () {
	    function DataSourceProcessor(object, sorter) {
	        this.object = object;
	        this.sorter = sorter;
	    }
	    DataSourceProcessor.prototype.process = function (sorts, filters, pager, data) {
	        var processedData = data;
	        processedData = this.sort(processedData, sorts);
	        if (this.object.isNullOrEmpty(filters) === false) {
	            processedData = _.reduce(filters, function (filteredData, filter) {
	                // Filter the data set using the filter function on the filter
	                return _.filter(filteredData, filter.filter.bind(filter));
	            }, processedData);
	        }
	        var result = {
	            count: (processedData != null ? processedData.length : 0),
	            filteredDataSet: processedData,
	            dataSet: processedData,
	        };
	        result.dataSet = this.page(processedData, pager);
	        return result;
	    };
	    DataSourceProcessor.prototype.processAndCount = function (sorts, filters, pager, data) {
	        var _this = this;
	        // If there are no filters that need to updated option counts, use the normal processor
	        if (this.object.isNullOrEmpty(filters)
	            || _.some(filters, function (filter) { return _.isFunction(filter.updateOptionCounts); }) === false) {
	            return this.process(sorts, filters, pager, data);
	        }
	        var processedData = data;
	        processedData = this.sort(processedData, sorts);
	        var wrappedData = this.wrapData(processedData);
	        // Run filtration logic and compute visible items
	        _.each(filters, function (filter /* filters.IFilterWithCounts */) {
	            _.each(wrappedData, function (item) {
	                item.filterData[filter.type] = filter.filter(item.data);
	            });
	        });
	        // Give each filter a chance to update option counts
	        _.each(filters, function (filter /* filters.IFilterWithCounts */) {
	            if (_.isFunction(filter.updateOptionCounts)) {
	                var otherFiltersApplied = _.filter(wrappedData, function (item) {
	                    // Omit the true or false of the current filter an
	                    //  only filter out items removed by other filters
	                    var filterData = _.omit(item.filterData, filter.type); //*filterData
	                    return _.every(_.values(filterData));
	                });
	                filter.updateOptionCounts(_this.unwrapData(otherFiltersApplied));
	            }
	        });
	        // Filter down to final data set by removing items that don't match all filters
	        wrappedData = _.filter(wrappedData, function (item) {
	            return _.every(_.values(item.filterData));
	        });
	        processedData = this.unwrapData(wrappedData);
	        var result = {
	            count: processedData.length,
	            filteredDataSet: processedData,
	            dataSet: processedData,
	        };
	        result.dataSet = this.page(processedData, pager);
	        return result;
	    };
	    DataSourceProcessor.prototype.sort = function (data, sorts) {
	        if (this.object.isNullOrEmpty(sorts) === false) {
	            return this.sorter.sort(data, sorts);
	        }
	        return data;
	    };
	    DataSourceProcessor.prototype.page = function (data, pager) {
	        if (pager != null) {
	            return pager.filter(data);
	        }
	        return data;
	    };
	    DataSourceProcessor.prototype.wrapData = function (data) {
	        return _.map(data, function (item) {
	            return {
	                data: item,
	                filterData: {},
	            };
	        });
	    };
	    DataSourceProcessor.prototype.unwrapData = function (data) {
	        return _.map(data, function (item) {
	            return item.data;
	        });
	    };
	    DataSourceProcessor.$inject = [__object.serviceName, sorter_service_1.serviceName];
	    return DataSourceProcessor;
	}());
	exports.DataSourceProcessor = DataSourceProcessor;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YVNvdXJjZVByb2Nlc3Nvci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGF0YVNvdXJjZVByb2Nlc3Nvci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUFrQyw4QkFBOEIsQ0FBQyxDQUFBO0FBQ2pFLElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBSWxDLCtCQUdPLGdDQUFnQyxDQUFDLENBQUE7QUFFN0IsNEJBQW9CLEdBQVcscUJBQXFCLENBQUM7QUEwQmhFO0lBRUMsNkJBQW9CLE1BQStCLEVBQ3ZDLE1BQWU7UUFEUCxXQUFNLEdBQU4sTUFBTSxDQUF5QjtRQUN2QyxXQUFNLEdBQU4sTUFBTSxDQUFTO0lBQUksQ0FBQztJQUVoQyxxQ0FBTyxHQUFQLFVBQW1CLEtBQWMsRUFDM0IsT0FBMEIsRUFDMUIsS0FBaUIsRUFDakIsSUFBaUI7UUFDdEIsSUFBSSxhQUFhLEdBQWdCLElBQUksQ0FBQztRQUV0QyxhQUFhLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFaEQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQztZQUNsRCxhQUFhLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsVUFBQyxZQUF5QixFQUFFLE1BQXVCO2dCQUNwRiw4REFBOEQ7Z0JBQzlELE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksRUFBRSxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzNELENBQUMsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUNuQixDQUFDO1FBRUQsSUFBSSxNQUFNLEdBQThC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

/***/ },
/* 65 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../../typings/lodashTypeExtensions.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	exports.moduleName = 'rl.ui.components.cardContainer.dataSources.dataPager';
	exports.factoryName = 'dataPager';
	exports.defaultPageSize = 10;
	var DataPager = (function () {
	    function DataPager() {
	        this.pageNumber = 1;
	        this.pageSize = exports.defaultPageSize;
	    }
	    Object.defineProperty(DataPager.prototype, "startItem", {
	        get: function () {
	            return (this.pageNumber - 1) * this.pageSize;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DataPager.prototype.filter = function (dataSet) {
	        return _(dataSet)
	            .drop(this.startItem)
	            .take(this.pageSize)
	            .value();
	    };
	    return DataPager;
	}());
	exports.DataPager = DataPager;
	function dataPagerFactory() {
	    'use strict';
	    return {
	        getInstance: function () {
	            return new DataPager();
	        },
	    };
	}
	exports.dataPagerFactory = dataPagerFactory;
	angular.module(exports.moduleName, [])
	    .factory(exports.factoryName, dataPagerFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YVBhZ2VyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRhUGFnZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw0RUFBNEU7QUFFNUUsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFakIsa0JBQVUsR0FBVyxzREFBc0QsQ0FBQztBQUM1RSxtQkFBVyxHQUFXLFdBQVcsQ0FBQztBQUVsQyx1QkFBZSxHQUFXLEVBQUUsQ0FBQztBQVN4QztJQUFBO1FBQ0MsZUFBVSxHQUFXLENBQUMsQ0FBQztRQUN2QixhQUFRLEdBQVcsdUJBQWUsQ0FBQztJQVlwQyxDQUFDO0lBVkEsc0JBQUksZ0NBQVM7YUFBYjtZQUNDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUM5QyxDQUFDOzs7T0FBQTtJQUVELDBCQUFNLEdBQU4sVUFBTyxPQUFjO1FBQ3BCLE1BQU0sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDO2FBQ2YsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7YUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7YUFDbkIsS0FBSyxFQUFFLENBQUM7SUFDWCxDQUFDO0lBQ0YsZ0JBQUM7QUFBRCxDQUFDLEFBZEQsSUFjQztBQWRZLGlCQUFTLFlBY3JCLENBQUE7QUFNRDtJQUNDLFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFdBQVc7WUFDVixNQUFNLENBQUMsSUFBSSxTQUFTLEVBQUUsQ0FBQztRQUN4QixDQUFDO0tBQ0QsQ0FBQztBQUNILENBQUM7QUFQZSx3QkFBZ0IsbUJBTy9CLENBQUE7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLGdCQUFnQixDQUFDLENBQUMifQ==

/***/ },
/* 66 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __observable = typescript_angular_utilities_1.services.observable;
	var __array = typescript_angular_utilities_1.services.array;
	var __synchronizedRequests = typescript_angular_utilities_1.services.synchronizedRequests;
	var asyncDataSource_service_1 = __webpack_require__(61);
	var dataSourceProcessor_service_1 = __webpack_require__(64);
	exports.moduleName = 'rl.ui.components.cardContainer.dataSources.dataServiceDataSource';
	exports.factoryName = 'dataServiceDataSource';
	var DataServiceDataSource = (function (_super) {
	    __extends(DataServiceDataSource, _super);
	    function DataServiceDataSource(getDataSet, observableFactory, dataSourceProcessor, array, synchronizedRequestsFactory) {
	        _super.call(this, getDataSet, observableFactory, dataSourceProcessor, array, synchronizedRequestsFactory);
	        this.countFilterGroups = true;
	        if (_.isFunction(getDataSet)) {
	            this.reload();
	        }
	    }
	    return DataServiceDataSource;
	}(asyncDataSource_service_1.AsyncDataSource));
	exports.DataServiceDataSource = DataServiceDataSource;
	dataServiceDataSourceFactory.$inject = [__observable.factoryName, dataSourceProcessor_service_1.processorServiceName, __array.serviceName, __synchronizedRequests.factoryName];
	function dataServiceDataSourceFactory(observableFactory, dataSourceProcessor, array, synchronizedRequests) {
	    'use strict';
	    return {
	        getInstance: function (getDataSet) {
	            return new DataServiceDataSource(getDataSet, observableFactory, dataSourceProcessor, array, synchronizedRequests);
	        },
	    };
	}
	exports.dataServiceDataSourceFactory = dataServiceDataSourceFactory;
	angular.module(exports.moduleName, [__observable.moduleName, __array.moduleName])
	    .factory(exports.factoryName, dataServiceDataSourceFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0YVNlcnZpY2VEYXRhU291cmNlLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRhU2VydmljZURhdGFTb3VyY2Uuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sWUFBWSxHQUFHLHVDQUFRLENBQUMsVUFBVSxDQUFDO0FBQzFDLElBQU8sT0FBTyxHQUFHLHVDQUFRLENBQUMsS0FBSyxDQUFDO0FBQ2hDLElBQU8sc0JBQXNCLEdBQUcsdUNBQVEsQ0FBQyxvQkFBb0IsQ0FBQztBQUU5RCx3Q0FBb0UsNEJBQTRCLENBQUMsQ0FBQTtBQUNqRyw0Q0FBMkQsZ0NBQWdDLENBQUMsQ0FBQTtBQUVqRixrQkFBVSxHQUFXLGtFQUFrRSxDQUFDO0FBQ3hGLG1CQUFXLEdBQVcsdUJBQXVCLENBQUM7QUFRekQ7SUFBc0QseUNBQTBCO0lBQy9FLCtCQUFZLFVBQTJDLEVBQ25ELGlCQUF5RCxFQUN6RCxtQkFBeUMsRUFDekMsS0FBNEIsRUFDNUIsMkJBQWdGO1FBQ25GLGtCQUFNLFVBQVUsRUFBRSxpQkFBaUIsRUFBRSxtQkFBbUIsRUFBRSxLQUFLLEVBQUUsMkJBQTJCLENBQUMsQ0FBQztRQUM5RixJQUFJLENBQUMsaUJBQWlCLEdBQUcsSUFBSSxDQUFDO1FBRTlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlCLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNmLENBQUM7SUFDRixDQUFDO0lBQ0YsNEJBQUM7QUFBRCxDQUFDLEFBYkQsQ0FBc0QseUNBQWUsR0FhcEU7QUFiWSw2QkFBcUIsd0JBYWpDLENBQUE7QUFNRCw0QkFBNEIsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLGtEQUFvQixFQUFFLE9BQU8sQ0FBQyxXQUFXLEVBQUUsc0JBQXNCLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDakosc0NBQTZDLGlCQUF5RCxFQUMxRixtQkFBeUMsRUFDekMsS0FBNEIsRUFDNUIsb0JBQXlFO0lBQ3BGLFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFdBQVcsWUFBWSxVQUEyQztZQUNqRSxNQUFNLENBQUMsSUFBSSxxQkFBcUIsQ0FBaUIsVUFBVSxFQUFFLGlCQUFpQixFQUFFLG1CQUFtQixFQUFFLEtBQUssRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO1FBQ25JLENBQUM7S0FDRCxDQUFDO0FBQ0gsQ0FBQztBQVZlLG9DQUE0QiwrQkFVM0MsQ0FBQTtBQUVELE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxDQUFDLFlBQVksQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ3ZFLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLDRCQUE0QixDQUFDLENBQUMifQ==

/***/ },
/* 67 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __observable = typescript_angular_utilities_1.services.observable;
	var __array = typescript_angular_utilities_1.services.array;
	var __object = typescript_angular_utilities_1.services.object;
	var __synchronizedRequests = typescript_angular_utilities_1.services.synchronizedRequests;
	var asyncDataSource_service_1 = __webpack_require__(61);
	var dataSourceProcessor_service_1 = __webpack_require__(64);
	var sort_1 = __webpack_require__(59);
	var events = __webpack_require__(63);
	exports.moduleName = 'rl.ui.components.cardContainer.dataSources.serverSideDataSource';
	exports.factoryName = 'serverSideDataSource';
	var ServerSideDataSource = (function (_super) {
	    __extends(ServerSideDataSource, _super);
	    function ServerSideDataSource(getDataSet, observableFactory, dataSourceProcessor, array, object, synchronizedRequestsFactory) {
	        _super.call(this, getDataSet, observableFactory, dataSourceProcessor, array, synchronizedRequestsFactory);
	        this.object = object;
	    }
	    ServerSideDataSource.prototype.refresh = function () {
	        this.reload();
	    };
	    ServerSideDataSource.prototype.getParams = function () {
	        var filterDictionary = this.array.toDictionary(this.filters, function (filter) {
	            return filter.type;
	        });
	        return {
	            filters: _.mapValues(filterDictionary, function (filter) {
	                if (_.isFunction(filter.serialize)) {
	                    return filter.serialize();
	                }
	                return null;
	            }),
	            sorts: _.map(this.sorts, function (sort) {
	                return {
	                    column: sort.column.label,
	                    direction: sort_1.SortDirection.getFullName(sort.direction),
	                };
	            }),
	            paging: {
	                pageNumber: this.pager.pageNumber,
	                pageSize: this.pager.pageSize,
	            },
	        };
	    };
	    ServerSideDataSource.prototype.resolveReload = function (result) {
	        var data = result;
	        _super.prototype.resolveReload.call(this, data.dataSet);
	        this.setProcessedData({
	            count: data.count,
	            filteredDataSet: data.dataSet,
	            dataSet: data.dataSet,
	        });
	        this.observable.fire(events.redrawing);
	    };
	    return ServerSideDataSource;
	}(asyncDataSource_service_1.AsyncDataSource));
	exports.ServerSideDataSource = ServerSideDataSource;
	serverSideDataSourceFactory.$inject = [__observable.factoryName, dataSourceProcessor_service_1.processorServiceName, __array.serviceName, __object.serviceName, __synchronizedRequests.factoryName];
	function serverSideDataSourceFactory(observableFactory, dataSourceProcessor, array, object, synchronizedRequestsFactory) {
	    'use strict';
	    return {
	        getInstance: function (getDataSet) {
	            return new ServerSideDataSource(getDataSet, observableFactory, dataSourceProcessor, array, object, synchronizedRequestsFactory);
	        },
	    };
	}
	exports.serverSideDataSourceFactory = serverSideDataSourceFactory;
	angular.module(exports.moduleName, [])
	    .factory(exports.factoryName, serverSideDataSourceFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyU2lkZURhdGFTb3VyY2Uuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNlcnZlclNpZGVEYXRhU291cmNlLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7Ozs7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNuQyxJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1Qiw2Q0FBa0MsOEJBQThCLENBQUMsQ0FBQTtBQUNqRSxJQUFPLFlBQVksR0FBRyx1Q0FBUSxDQUFDLFVBQVUsQ0FBQztBQUMxQyxJQUFPLE9BQU8sR0FBRyx1Q0FBUSxDQUFDLEtBQUssQ0FBQztBQUNoQyxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUNsQyxJQUFPLHNCQUFzQixHQUFHLHVDQUFRLENBQUMsb0JBQW9CLENBQUM7QUFFOUQsd0NBQW9FLDRCQUE0QixDQUFDLENBQUE7QUFDakcsNENBQTJELGdDQUFnQyxDQUFDLENBQUE7QUFDNUYscUJBQXFDLGtCQUFrQixDQUFDLENBQUE7QUFDeEQsSUFBWSxNQUFNLFdBQU0scUJBQXFCLENBQUMsQ0FBQTtBQUVuQyxrQkFBVSxHQUFXLGlFQUFpRSxDQUFDO0FBQ3ZGLG1CQUFXLEdBQVcsc0JBQXNCLENBQUM7QUErQnhEO0lBQXFELHdDQUEwQjtJQUM5RSw4QkFBWSxVQUE0QyxFQUNwRCxpQkFBeUQsRUFDekQsbUJBQXlDLEVBQ3pDLEtBQTRCLEVBQ3BCLE1BQStCLEVBQ3ZDLDJCQUFnRjtRQUNuRixrQkFBVyxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsbUJBQW1CLEVBQUUsS0FBSyxFQUFFLDJCQUEyQixDQUFDLENBQUM7UUFGeEYsV0FBTSxHQUFOLE1BQU0sQ0FBeUI7SUFHM0MsQ0FBQztJQUVELHNDQUFPLEdBQVA7UUFDQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDZixDQUFDO0lBRVMsd0NBQVMsR0FB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

/***/ },
/* 68 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __observable = typescript_angular_utilities_1.services.observable;
	var __array = typescript_angular_utilities_1.services.array;
	var dataSourceBase_service_1 = __webpack_require__(62);
	var dataSourceProcessor_service_1 = __webpack_require__(64);
	exports.moduleName = 'rl.ui.components.cardContainer.dataSources.simpleDataSource';
	exports.factoryName = 'simpleDataSource';
	var SimpleDataSource = (function (_super) {
	    __extends(SimpleDataSource, _super);
	    function SimpleDataSource(data, observableFactory, dataSourceProcessor, array) {
	        _super.call(this, observableFactory, dataSourceProcessor, array);
	        this.countFilterGroups = false;
	        this.rawDataSet = data;
	        this.processData();
	    }
	    return SimpleDataSource;
	}(dataSourceBase_service_1.DataSourceBase));
	exports.SimpleDataSource = SimpleDataSource;
	simpleDataSourceFactory.$inject = [__observable.factoryName, dataSourceProcessor_service_1.processorServiceName, __array.serviceName];
	function simpleDataSourceFactory(observableFactory, dataSourceProcessor, array) {
	    'use strict';
	    return {
	        getInstance: function (data) {
	            return new SimpleDataSource(data, observableFactory, dataSourceProcessor, array);
	        },
	    };
	}
	exports.simpleDataSourceFactory = simpleDataSourceFactory;
	angular.module(exports.moduleName, [__observable.moduleName, __array.moduleName])
	    .factory(exports.factoryName, simpleDataSourceFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlRGF0YVNvdXJjZS5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2ltcGxlRGF0YVNvdXJjZS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7Ozs7O0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxZQUFZLEdBQUcsdUNBQVEsQ0FBQyxVQUFVLENBQUM7QUFDMUMsSUFBTyxPQUFPLEdBQUcsdUNBQVEsQ0FBQyxLQUFLLENBQUM7QUFHaEMsdUNBQStCLDJCQUEyQixDQUFDLENBQUE7QUFDM0QsNENBQTJELGdDQUFnQyxDQUFDLENBQUE7QUFFakYsa0JBQVUsR0FBVyw2REFBNkQsQ0FBQztBQUNuRixtQkFBVyxHQUFXLGtCQUFrQixDQUFDO0FBRXBEO0lBQWlELG9DQUF5QjtJQUN6RSwwQkFBWSxJQUFpQixFQUN6QixpQkFBeUQsRUFDekQsbUJBQXlDLEVBQ3pDLEtBQTRCO1FBQy9CLGtCQUFNLGlCQUFpQixFQUFFLG1CQUFtQixFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ3JELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxLQUFLLENBQUM7UUFDL0IsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7UUFDdkIsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFDRix1QkFBQztBQUFELENBQUMsQUFWRCxDQUFpRCx1Q0FBYyxHQVU5RDtBQVZZLHdCQUFnQixtQkFVNUIsQ0FBQTtBQU1ELHVCQUF1QixDQUFDLE9BQU8sR0FBRyxDQUFDLFlBQVksQ0FBQyxXQUFXLEVBQUUsa0RBQW9CLEVBQUUsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ3hHLGlDQUF3QyxpQkFBeUQsRUFDbkYsbUJBQXlDLEVBQ3pDLEtBQTRCO0lBQ3pDLFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFdBQVcsWUFBWSxJQUFpQjtZQUN2QyxNQUFNLENBQUMsSUFBSSxnQkFBZ0IsQ0FBWSxJQUFJLEVBQUUsaUJBQWlCLEVBQUUsbUJBQW1CLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDN0YsQ0FBQztLQUNELENBQUM7QUFDSCxDQUFDO0FBVGUsK0JBQXVCLDBCQVN0QyxDQUFBO0FBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDdkUsT0FBTyxDQUFDLG1CQUFXLEVBQUUsdUJBQXVCLENBQUMsQ0FBQyJ9

/***/ },
/* 69 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __observable = typescript_angular_utilities_1.services.observable;
	var __array = typescript_angular_utilities_1.services.array;
	var __object = typescript_angular_utilities_1.services.object;
	var __synchronizedRequests = typescript_angular_utilities_1.services.synchronizedRequests;
	var asyncDataSource_service_1 = __webpack_require__(61);
	var dataSourceProcessor_service_1 = __webpack_require__(64);
	var sort_1 = __webpack_require__(59);
	exports.moduleName = 'rl.ui.components.cardContainer.dataSources.smartDataSource';
	exports.factoryName = 'smartDataSource';
	var SmartDataSource = (function (_super) {
	    __extends(SmartDataSource, _super);
	    function SmartDataSource(getDataSet, observableFactory, dataSourceProcessor, array, object, synchronizedRequestsFactory) {
	        _super.call(this, getDataSet, observableFactory, dataSourceProcessor, array, synchronizedRequestsFactory);
	        this.object = object;
	        this.throttled = true;
	        this.throttleLimit = 200;
	    }
	    Object.defineProperty(SmartDataSource.prototype, "filters", {
	        get: function () {
	            return this._filters;
	        },
	        set: function (value) {
	            this._filters = value;
	            this.setupSubscriptions();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SmartDataSource.prototype.onSortChange = function () {
	        if (this.throttled) {
	            this.reload();
	        }
	        else {
	            _super.prototype.onSortChange.call(this);
	        }
	    };
	    SmartDataSource.prototype.refresh = function () {
	        if (this.throttled) {
	            this.reload();
	        }
	        else {
	            _super.prototype.refresh.call(this);
	        }
	    };
	    SmartDataSource.prototype.getParams = function () {
	        this.updateAppliedFilters();
	        return {
	            filters: this.appliedFilters,
	            sorts: _.map(this.sorts, function (sort) {
	                return {
	                    column: sort.column.label,
	                    direction: sort_1.SortDirection.getFullName(sort.direction),
	                };
	            }),
	            paging: {
	                pageNumber: 1,
	                pageSize: this.throttleLimit,
	            },
	        };
	    };
	    SmartDataSource.prototype.updateAppliedFilters = function () {
	        var filterDictionary = this.array.toDictionary(this.filters, function (filter) {
	            return filter.type;
	        });
	        this.appliedFilters = _.mapValues(filterDictionary, function (filter) {
	            if (_.isFunction(filter.serialize)) {
	                return filter.serialize();
	            }
	            return null;
	        });
	        this.appliedFilters = _.omitBy(this.appliedFilters, function (value) { return value == null; });
	    };
	    SmartDataSource.prototype.setupSubscriptions = function () {
	        var _this = this;
	        _.each(this.subscriptions, function (subscription) {
	            subscription.dispose();
	        });
	        this.subscriptions = [];
	        _.each(this.filters, function (filter) {
	            if (_.isFunction(filter.subscribe)) {
	                _this.subscriptions.push(filter.subscribe(function () { _this.onFilterChange(filter); }));
	            }
	        });
	    };
	    SmartDataSource.prototype.onFilterChange = function (filter) {
	        if (_.has(this.appliedFilters, filter.type)) {
	            this.reload();
	        }
	    };
	    SmartDataSource.prototype.resolveReload = function (result) {
	        var data = result;
	        this.throttled = (data.count > data.dataSet.length);
	        _super.prototype.resolveReload.call(this, data.dataSet);
	        this.count = data.count;
	        this.isEmpty = data.isEmpty;
	    };
	    return SmartDataSource;
	}(asyncDataSource_service_1.AsyncDataSource));
	exports.SmartDataSource = SmartDataSource;
	smartDataSourceFactory.$inject = [__observable.factoryName, dataSourceProcessor_service_1.processorServiceName, __array.serviceName, __object.serviceName, __synchronizedRequests.factoryName];
	function smartDataSourceFactory(observableFactory, dataSourceProcessor, array, object, synchronizedRequestsFactory) {
	    'use strict';
	    return {
	        getInstance: function (getDataSet) {
	            return new SmartDataSource(getDataSet, observableFactory, dataSourceProcessor, array, object, synchronizedRequestsFactory);
	        },
	    };
	}
	exports.smartDataSourceFactory = smartDataSourceFactory;
	angular.module(exports.moduleName, [])
	    .factory(exports.factoryName, smartDataSourceFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic21hcnREYXRhU291cmNlLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzbWFydERhdGFTb3VyY2Uuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRzVCLDZDQUFrQyw4QkFBOEIsQ0FBQyxDQUFBO0FBQ2pFLElBQU8sWUFBWSxHQUFHLHVDQUFRLENBQUMsVUFBVSxDQUFDO0FBQzFDLElBQU8sT0FBTyxHQUFHLHVDQUFRLENBQUMsS0FBSyxDQUFDO0FBQ2hDLElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBQ2xDLElBQU8sc0JBQXNCLEdBQUcsdUNBQVEsQ0FBQyxvQkFBb0IsQ0FBQztBQUU5RCx3Q0FBb0UsNEJBQTRCLENBQUMsQ0FBQTtBQUNqRyw0Q0FBMkQsZ0NBQWdDLENBQUMsQ0FBQTtBQUM1RixxQkFBcUMsa0JBQWtCLENBQUMsQ0FBQTtBQUU3QyxrQkFBVSxHQUFXLDREQUE0RCxDQUFDO0FBQ2xGLG1CQUFXLEdBQVcsaUJBQWlCLENBQUM7QUFnQ25EO0lBQWdELG1DQUEwQjtJQU96RSx5QkFBWSxVQUE0QyxFQUNwRCxpQkFBeUQsRUFDekQsbUJBQXlDLEVBQ3pDLEtBQTRCLEVBQ3BCLE1BQStCLEVBQ3ZDLDJCQUFnRjtRQUNuRixrQkFBVyxVQUFVLEVBQUUsaUJBQWlCLEVBQUUsbUJBQW1CLEVBQUUsS0FBSyxFQUFFLDJCQUEyQixDQUFDLENBQUM7UUFGeEYsV0FBTSxHQUFOLE1BQU0sQ0FBeUI7UUFWM0MsY0FBUyxHQUFZLElBQUksQ0FBQztRQUlsQixrQkFBYSxHQUFXLEdBQUcsQ0FBQztJQVNwQyxDQUFDO0lBRUQsc0JBQUksb0NBQU87YUFBWDtZQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3RCLENB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

/***/ },
/* 70 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var columnSearchFilter = __webpack_require__(71);
	exports.columnSearchFilter = columnSearchFilter;
	var dateFilter = __webpack_require__(72);
	var filterGroup = __webpack_require__(77);
	exports.filterGroup = filterGroup;
	var selectFilter = __webpack_require__(85);
	exports.selectFilter = selectFilter;
	var cardContainerFilters = __webpack_require__(89);
	__export(__webpack_require__(89));
	exports.moduleName = 'rl.ui.components.cardContainer.filters';
	angular.module(exports.moduleName, [
	    columnSearchFilter.moduleName,
	    dateFilter.moduleName,
	    filterGroup.moduleName,
	    selectFilter.moduleName,
	    cardContainerFilters.moduleName
	]);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVycy5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmaWx0ZXJzLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyxJQUFZLGtCQUFrQixXQUFNLGlEQUFpRCxDQUFDLENBQUE7QUFTN0UsMEJBQWtCO0FBUjNCLElBQVksVUFBVSxXQUFNLGdDQUFnQyxDQUFDLENBQUE7QUFDN0QsSUFBWSxXQUFXLFdBQU0sa0NBQWtDLENBQUMsQ0FBQTtBQU9uQyxtQkFBVztBQU54QyxJQUFZLFlBQVksV0FBTSxvQ0FBb0MsQ0FBQyxDQUFBO0FBTXpCLG9CQUFZO0FBSnRELElBQVksb0JBQW9CLFdBQU0sd0JBQXdCLENBQUMsQ0FBQTtBQUUvRCxpQkFBYyx3QkFBd0IsQ0FBQyxFQUFBO0FBSTVCLGtCQUFVLEdBQVcsd0NBQXdDLENBQUM7QUFFekUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFO0lBQzFCLGtCQUFrQixDQUFDLFVBQVU7SUFDN0IsVUFBVSxDQUFDLFVBQVU7SUFDckIsV0FBVyxDQUFDLFVBQVU7SUFDdEIsWUFBWSxDQUFDLFVBQVU7SUFFdkIsb0JBQW9CLENBQUMsVUFBVTtDQUMvQixDQUFDLENBQUMifQ==

/***/ },
/* 71 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __string = typescript_angular_utilities_1.services.string;
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	exports.moduleName = 'rl.ui.components.cardContainer.filters.columnSearchFilter';
	exports.factoryName = 'columnSearchFilter';
	exports.filterName = 'column-search';
	var ColumnSearchFilter = (function () {
	    function ColumnSearchFilter(object, string) {
	        this.object = object;
	        this.string = string;
	        this.type = exports.filterName;
	    }
	    ColumnSearchFilter.prototype.filter = function (item) {
	        if (this.column == null) {
	            return true;
	        }
	        var value = this.object.toString(__transform.getValue(item, this.column.getValue));
	        var search = this.searchText;
	        if (!this.caseSensitive) {
	            search = search.toLowerCase();
	            value = value.toLowerCase();
	        }
	        return this.string.contains(value, search);
	    };
	    return ColumnSearchFilter;
	}());
	exports.ColumnSearchFilter = ColumnSearchFilter;
	columnSearchFilterFactory.$inject = [__object.serviceName, __string.serviceName];
	function columnSearchFilterFactory(object, string) {
	    'use strict';
	    return {
	        getInstance: function () {
	            return new ColumnSearchFilter(object, string);
	        },
	    };
	}
	exports.columnSearchFilterFactory = columnSearchFilterFactory;
	angular.module(exports.moduleName, [__object.moduleName, __string.moduleName])
	    .factory(exports.factoryName, columnSearchFilterFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sdW1uU2VhcmNoRmlsdGVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjb2x1bW5TZWFyY2hGaWx0ZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyw2Q0FBa0MsOEJBQThCLENBQUMsQ0FBQTtBQUNqRSxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUNsQyxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUNsQyxJQUFPLFdBQVcsR0FBRyx1Q0FBUSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7QUFJdkMsa0JBQVUsR0FBVywyREFBMkQsQ0FBQztBQUNqRixtQkFBVyxHQUFXLG9CQUFvQixDQUFDO0FBQzNDLGtCQUFVLEdBQVcsZUFBZSxDQUFDO0FBUWhEO0lBTUMsNEJBQW9CLE1BQStCLEVBQ3ZDLE1BQXNDO1FBRDlCLFdBQU0sR0FBTixNQUFNLENBQXlCO1FBQ3ZDLFdBQU0sR0FBTixNQUFNLENBQWdDO1FBTmxELFNBQUksR0FBVyxrQkFBVSxDQUFDO0lBTTRCLENBQUM7SUFFdkQsbUNBQU0sR0FBTixVQUFrQixJQUFlO1FBQ2hDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ2IsQ0FBQztRQUVELElBQUksS0FBSyxHQUFXLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUUzRixJQUFJLE1BQU0sR0FBVyxJQUFJLENBQUMsVUFBVSxDQUFDO1FBRXJDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7WUFDekIsTUFBTSxHQUFHLE1BQU0sQ0FBQyxXQUFXLEVBQUUsQ0FBQztZQUM5QixLQUFLLEdBQUcsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQzdCLENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQzVDLENBQUM7SUFDRix5QkFBQztBQUFELENBQUMsQUF6QkQsSUF5QkM7QUF6QlksMEJBQWtCLHFCQXlCOUIsQ0FBQTtBQU1ELHlCQUF5QixDQUFDLE9BQU8sR0FBRyxDQUFDLFFBQVEsQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ2pGLG1DQUEwQyxNQUErQixFQUFFLE1BQXNDO0lBQ2hILFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFdBQVc7WUFDVixNQUFNLENBQUMsSUFBSSxrQkFBa0IsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0MsQ0FBQztLQUNELENBQUM7QUFDSCxDQUFDO0FBUGUsaUNBQXlCLDRCQU94QyxDQUFBO0FBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDcEUsT0FBTyxDQUFDLG1CQUFXLEVBQUUseUJBQXlCLENBQUMsQ0FBQyJ9

/***/ },
/* 72 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __date = typescript_angular_utilities_1.services.date;
	var dateFilter_service_1 = __webpack_require__(73);
	var dateFilter_component_1 = __webpack_require__(75);
	exports.moduleName = 'rl.ui.components.cardContainer.filters.dateFilter';
	__export(__webpack_require__(73));
	__export(__webpack_require__(75));
	angular.module(exports.moduleName, [__date.moduleName])
	    .factory(dateFilter_service_1.factoryName, dateFilter_service_1.dateFilterFactory)
	    .component(dateFilter_component_1.componentName, dateFilter_component_1.dateFilter)
	    .controller(dateFilter_component_1.controllerName, dateFilter_component_1.DateFilterController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZUZpbHRlci5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRlRmlsdGVyLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyw2Q0FBdUIsOEJBQThCLENBQUMsQ0FBQTtBQUN0RCxJQUFPLE1BQU0sR0FBRyx1Q0FBUSxDQUFDLElBQUksQ0FBQztBQUU5QixtQ0FBNkMsc0JBQXNCLENBQUMsQ0FBQTtBQUNwRSxxQ0FBOEUsd0JBQXdCLENBQUMsQ0FBQTtBQUU1RixrQkFBVSxHQUFXLG1EQUFtRCxDQUFDO0FBQ3BGLGlCQUFlLHNCQUFzQixDQUFDLEVBQUE7QUFDdEMsaUJBQWMsd0JBQXdCLENBQUMsRUFBQTtBQUV2QyxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDN0MsT0FBTyxDQUFDLGdDQUFXLEVBQUUsc0NBQWlCLENBQUM7S0FDdkMsU0FBUyxDQUFDLG9DQUFhLEVBQUUsaUNBQVUsQ0FBQztLQUNwQyxVQUFVLENBQUMscUNBQWMsRUFBRSwyQ0FBb0IsQ0FBQyxDQUFDIn0=

/***/ },
/* 73 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var moment = __webpack_require__(74);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __date = typescript_angular_utilities_1.services.date;
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	exports.factoryName = 'rlDateFilterFactory';
	var DateFilter = (function () {
	    function DateFilter(settings, dateUtility) {
	        this.dateUtility = dateUtility;
	        this.valueSelector = settings.valueSelector;
	        this.type = settings.type;
	        this.clearButton = settings.clearButton;
	        this.includeDateRange = settings.includeDateRange;
	        this.includeTime = settings.includeTime != null ? settings.includeTime : false;
	        this.label = settings.label;
	        this.template = "<rl-date-filter filter=\"filter\" source=\"dataSource\" label=\"{{filter.label}}\" include-time=\"filter.includeTime\"\n\t\t\t\t\t\t\t\t\t     include-date-range=\"filter.includeDateRange\" clear-button=\"filter.clearButton\"></rl-date-filter>";
	    }
	    DateFilter.prototype.filter = function (item) {
	        if (!this.dateUtility.isDate(this.selectedDate1)) {
	            return true;
	        }
	        if (this.dateRange) {
	            var itemDate = this.getValue(item);
	            var selectedDate1 = void 0;
	            //have to set the selectedDate1 to a valid Date object for comparisons.
	            if (this.includeTime) {
	                selectedDate1 = moment(this.selectedDate1);
	            }
	            else {
	                //increase it by 1 days. to inlcude the selectec date in the range.
	                selectedDate1 = moment(this.selectedDate1).add(1, 'days');
	            }
	            return this.dateUtility.dateInRange(itemDate, this.selectedDate2, this.selectedDate1);
	        }
	        else {
	            if (this.includeTime) {
	                return this.dateUtility.sameDateTime(this.getValue(item), this.selectedDate1);
	            }
	            else {
	                return this.dateUtility.sameDate(this.getValue(item), this.selectedDate1);
	            }
	        }
	    };
	    DateFilter.prototype.getValue = function (item) {
	        return __transform.getValue(item, this.valueSelector);
	    };
	    return DateFilter;
	}());
	dateFilterFactory.$inject = [__date.serviceName];
	function dateFilterFactory(dateUtility) {
	    return {
	        getInstance: function (settings) {
	            return new DateFilter(settings, dateUtility);
	        },
	    };
	}
	exports.dateFilterFactory = dateFilterFactory;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZUZpbHRlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGF0ZUZpbHRlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUdiLElBQVksTUFBTSxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRWpDLDZDQUFnQyw4QkFBOEIsQ0FBQyxDQUFBO0FBQy9ELElBQU8sTUFBTSxHQUFHLHVDQUFRLENBQUMsSUFBSSxDQUFDO0FBQzlCLElBQU8sV0FBVyxHQUFHLHVDQUFRLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztBQUV2QyxtQkFBVyxHQUFXLHFCQUFxQixDQUFDO0FBdUJ2RDtJQWVDLG9CQUFZLFFBQTZCLEVBQVUsV0FBZ0M7UUFBaEMsZ0JBQVcsR0FBWCxXQUFXLENBQXFCO1FBQ2xGLElBQUksQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQztRQUM1QyxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUM7UUFDMUIsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsV0FBVyxDQUFDO1FBQ3hDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUM7UUFDbEQsSUFBSSxDQUFDLFdBQVcsR0FBRyxRQUFRLENBQUMsV0FBVyxJQUFJLElBQUksR0FBRyxRQUFRLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQztRQUMvRSxJQUFJLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxxUEFDNkYsQ0FBQztJQUMvRyxDQUFDO0lBRUQsMkJBQU0sR0FBTixVQUFPLElBQVM7UUFDZixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNiLENBQUM7UUFFRCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztZQUNwQixJQUFJLFFBQVEsR0FBa0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQTtZQUNqRCxJQUFJLGFBQWEsU0FBZSxDQUFDO1lBRWpDLHVFQUF1RTtZQUN2RSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztnQkFDdEIsYUFBYSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDNUMsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNQLG1FQUFtRTtnQkFDbkUsYUFBYSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztZQUMzRCxDQUFDO1lBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUV2RixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDUCxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztnQkFDdEIsTUFBTSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQy9FLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDUCxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDM0UsQ0FBQztRQUNGLENBQUM7SUFDRixDQUFDO0lBRU8sNkJBQVEsR0FBaEIsVUFBaUIsSUFBUztRQUN6QixNQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFFRixpQkFBQztBQUFELENBQUMsQUF6REQsSUF5REM7QUFNRCxpQkFBaUIsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDakQsMkJBQWtDLFdBQWdDO0lBQ2pFLE1BQU0sQ0FBQztRQUNOLFdBQVcsWUFBQyxRQUE0QjtZQUN2QyxNQUFNLENBQUMsSUFBSSxVQUFVLENBQUMsUUFBUSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQzlDLENBQUM7S0FDRCxDQUFDO0FBQ0gsQ0FBQztBQU5lLHlCQUFpQixvQkFNaEMsQ0FBQSJ9

/***/ },
/* 74 */
/***/ function(module, exports) {

	(function() { module.exports = this["moment"]; }());

/***/ },
/* 75 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/node/node.d.ts' />
	'use strict';
	var moment = __webpack_require__(74);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __date = typescript_angular_utilities_1.services.date;
	exports.componentName = 'rlDateFilter';
	exports.controllerName = 'rlDateFilterController';
	// Optional interface for bound attributes
	var DateOptions;
	(function (DateOptions) {
	    DateOptions[DateOptions["Day"] = 0] = "Day";
	    DateOptions[DateOptions["Week"] = 1] = "Week";
	    DateOptions[DateOptions["Month"] = 2] = "Month";
	})(DateOptions || (DateOptions = {}));
	;
	var DateFilterController = (function () {
	    function DateFilterController($scope, dateUtility, $element) {
	        var _this = this;
	        this.$scope = $scope;
	        this.dateUtility = dateUtility;
	        this.$element = $element;
	        this.count = 0;
	        this.type = "days";
	        this.filter.includeTime = this.includeTime;
	        //this is added to address an agular quirk on the service event list page.
	        //the input field was not clearing correclty when the selectedDate1 value is null.
	        this.inputField = this.$element.find('rl-date-time input');
	        this.filter.dateRange = false;
	        if (this.clearButton == null)
	            this.clearButton = true;
	        $scope.$watch('filter.selectedDate1', function (date) {
	            if (date == null) {
	                _this.inputField.val('');
	                _this.clearCount();
	            }
	            _this.filter.selectedDate1 = date;
	            _this.refreshDataSource();
	        });
	    }
	    Object.defineProperty(DateFilterController.prototype, "selectedDate2", {
	        // public get selectedDate1(): moment.Moment {
	        // 	if (this.filter.selectedDate1 != null) {
	        // 		return moment(this.filter.selectedDate1);
	        // 	} else {
	        // 		return null;
	        // 	}
	        // }
	        // public set selectedDate1(dateString: moment.Moment) {
	        // 	if (this.dateUtility.isDate(dateString)) {
	        // 		this.filter.selectedDate1 = moment(dateString);
	        // 	} else {
	        // 		//clear input field of date value. and rest past day/week count
	        // 		this.inputField.val('');
	        // 		this.clearCount();
	        // 		this.filter.selectedDate1 = null;
	        // 	}
	        // 	this.refreshDataSource();
	        // }
	        get: function () {
	            return this.filter.selectedDate2;
	        },
	        set: function (date) {
	            this.filter.selectedDate2 = date;
	            this.refreshDataSource();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    DateFilterController.prototype.refreshDataSource = function () {
	        if (this.source != null) {
	            this.source.refresh();
	        }
	        else {
	            this.$scope.$emit('dataSource.requestRefresh'); //*event?
	        }
	    };
	    DateFilterController.prototype.clearCount = function () {
	        this.count = 0;
	        this.countChange();
	    };
	    DateFilterController.prototype.decreaseCount = function () {
	        this.count -= 1;
	        this.setDateTimeNowIfNull();
	        //do not allow count below 0
	        if (this.count < 0 || this.count === 0) {
	            this.count = 0;
	        }
	        this.countChange();
	    };
	    DateFilterController.prototype.countChange = function () {
	        if (this.count == null) {
	            this.count = 0;
	        }
	        if (this.count > 0) {
	            this.filter.dateRange = true;
	            // add days has to be a negative number to go backwords.
	            this.selectedDate2 = moment(this.selectedDate1).add((this.count * -1), this.type);
	        }
	        else if (this.count == 0) {
	            //only change this values the first time.
	            if (this.filter.dateRange) {
	                this.filter.dateRange = false;
	                this.selectedDate2 = null;
	            }
	        }
	    };
	    DateFilterController.prototype.increaseCount = function () {
	        this.count += 1;
	        this.setDateTimeNowIfNull();
	        this.countChange();
	    };
	    DateFilterController.prototype.setDateTimeNowIfNull = function () {
	        if (this.selectedDate1 == null) {
	            this.selectedDate1 = this.dateUtility.getNow();
	        }
	    };
	    DateFilterController.prototype.toggle = function () {
	        if (this.type === 'days') {
	            this.type = 'weeks';
	        }
	        else {
	            this.type = 'days';
	        }
	        this.countChange();
	    };
	    DateFilterController.$inject = ['$scope', __date.serviceName, '$element'];
	    return DateFilterController;
	}());
	exports.DateFilterController = DateFilterController;
	exports.dateFilter = {
	    template: __webpack_require__(76),
	    controller: exports.controllerName,
	    controllerAs: 'filter',
	    bindings: {
	        filter: '<',
	        source: '<?',
	        label: '@',
	        includeTime: '<?',
	        includeDateRange: '<?',
	        clearButton: '<?'
	    },
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZUZpbHRlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRlRmlsdGVyLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwyREFBMkQ7QUFFM0QsWUFBWSxDQUFDO0FBR2IsSUFBWSxNQUFNLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFakMsNkNBQXVCLDhCQUE4QixDQUFDLENBQUE7QUFDdEQsSUFBTyxNQUFNLEdBQUcsdUNBQVEsQ0FBQyxJQUFJLENBQUM7QUFNbkIscUJBQWEsR0FBVyxjQUFjLENBQUM7QUFDdkMsc0JBQWMsR0FBVyx3QkFBd0IsQ0FBQztBQUU3RCwwQ0FBMEM7QUFDMUMsSUFBSyxXQUFnQztBQUFyQyxXQUFLLFdBQVc7SUFBRywyQ0FBRyxDQUFBO0lBQUUsNkNBQUksQ0FBQTtJQUFFLCtDQUFLLENBQUE7QUFBQyxDQUFDLEVBQWhDLFdBQVcsS0FBWCxXQUFXLFFBQXFCO0FBQUEsQ0FBQztBQWN0QztJQWNDLDhCQUFvQixNQUFzQixFQUFVLFdBQWdDLEVBQVUsUUFBa0M7UUFkakksaUJBMEhDO1FBNUdvQixXQUFNLEdBQU4sTUFBTSxDQUFnQjtRQUFVLGdCQUFXLEdBQVgsV0FBVyxDQUFxQjtRQUFVLGFBQVEsR0FBUixRQUFRLENBQTBCO1FBWmhJLFVBQUssR0FBVyxDQUFDLENBQUM7UUFNbEIsU0FBSSxHQUFXLE1BQU0sQ0FBQztRQU9yQixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFBO1FBQzFDLDBFQUEwRTtRQUMxRSxrRkFBa0Y7UUFDbEYsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQzNELElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQztRQUM5QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksQ0FBQztZ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

/***/ },
/* 76 */
/***/ function(module, exports) {

	module.exports = "<div class=\"filter-group spinner-container\">\r\n\t<div class=\"content-group\">\r\n\t\t<label>{{::filter.label}}</label>\r\n\t\t<rl-date-time ng-model=\"filter.selectedDate1\" use-time=\"filter.includeTime\" clear-button=\"filter.clearButton\" on-clear-event=\"filter.clearCount()\"\r\n\t\tclass=\"pull-left\"></rl-date-time>\r\n\t</div>\r\n\t<div ng-if=\"filter.includeDateRange\" class=\"content-group\">\r\n\t\t<label>Add previous</label>\r\n\t\t<div class=\"input-group\">\r\n\t\t<span class=\"input-group-btn\">\r\n\t\t\t<button  class=\"btn btn-default\" ng-click=\"filter.decreaseCount();\">\r\n\t\t\t\t<i class=\"fa fa-minus\"></i>\r\n\t\t\t</button>\r\n\t\t</span>\r\n\t\t<input type=\"number\" class=\"form-control\" ng-model=\"filter.count\" ng-change=\"filter.countChange();\" />\r\n\t\t<span class=\"input-group-btn\">\r\n\t\t\t<button class=\"btn btn-default\" ng-click=\"filter.toggle();\">\r\n\t\t\t{{filter.type}}\r\n\t\t\t</button>\r\n\t\t</span>\r\n\t\t<span class=\"input-group-btn\">\r\n\t\t\t<button class=\"btn btn-default\" ng-click=\"filter.increaseCount();\">\r\n\t\t\t\t<i class=\"fa fa-plus\"></i>\r\n\t\t\t</button>\r\n\t\t</span>\r\n\t\t</div>\r\n\t</div>\r\n</div>"

/***/ },
/* 77 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var filterOption = __webpack_require__(78);
	exports.filterOption = filterOption;
	var modeFilterGroup = __webpack_require__(80);
	exports.modeFilterGroup = modeFilterGroup;
	var rangeFilterGroup = __webpack_require__(82);
	exports.rangeFilterGroup = rangeFilterGroup;
	var filterGroup_service_1 = __webpack_require__(81);
	var filterGroup_directive_1 = __webpack_require__(83);
	__export(__webpack_require__(83));
	__export(__webpack_require__(81));
	exports.moduleName = 'rl.ui.components.cardContainer.filters.filterGroup';
	angular.module(exports.moduleName, [
	    typescript_angular_utilities_1.services.object.moduleName,
	    filterOption.moduleName,
	    modeFilterGroup.moduleName,
	    rangeFilterGroup.moduleName,
	])
	    .factory(filterGroup_service_1.factoryName, filterGroup_service_1.filterGroupFactory)
	    .component(filterGroup_directive_1.componentName, filterGroup_directive_1.filterGroup)
	    .controller(filterGroup_directive_1.controllerName, filterGroup_directive_1.FilterGroupController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyR3JvdXAubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZmlsdGVyR3JvdXAubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBRXhELElBQVksWUFBWSxXQUFNLDZCQUE2QixDQUFDLENBQUE7QUFLM0Qsb0JBQVk7QUFKYixJQUFZLGVBQWUsV0FBTSwyQ0FBMkMsQ0FBQyxDQUFBO0FBSzVFLHVCQUFlO0FBSmhCLElBQVksZ0JBQWdCLFdBQU0sNkNBQTZDLENBQUMsQ0FBQTtBQUsvRSx3QkFBZ0I7QUFHakIsb0NBQWdELHVCQUF1QixDQUFDLENBQUE7QUFDeEUsc0NBQWtGLHlCQUF5QixDQUFDLENBQUE7QUFFNUcsaUJBQWMseUJBQXlCLENBQUMsRUFBQTtBQUN4QyxpQkFBYyx1QkFBdUIsQ0FBQyxFQUFBO0FBRTNCLGtCQUFVLEdBQVcsb0RBQW9ELENBQUM7QUFFckYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFO0lBQzFCLHVDQUFRLENBQUMsTUFBTSxDQUFDLFVBQVU7SUFFMUIsWUFBWSxDQUFDLFVBQVU7SUFDdkIsZUFBZSxDQUFDLFVBQVU7SUFDMUIsZ0JBQWdCLENBQUMsVUFBVTtDQUMzQixDQUFDO0tBQ0EsT0FBTyxDQUFDLGlDQUFXLEVBQUUsd0NBQWtCLENBQUM7S0FDeEMsU0FBUyxDQUFDLHFDQUFhLEVBQUUsbUNBQVcsQ0FBQztLQUNyQyxVQUFVLENBQUMsc0NBQWMsRUFBRSw2Q0FBcUIsQ0FBQyxDQUFDIn0=

/***/ },
/* 78 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.components.cardContainer.filters.filterGroup.filterOption';
	exports.componentName = 'rlFilterOption';
	var filterOption = {
	    template: __webpack_require__(79),
	    controllerAs: 'filter',
	    bindings: {
	        activate: '&',
	        isActive: '=active',
	        option: '=',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, filterOption);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyT3B0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZmlsdGVyT3B0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLG1FQUFtRTtBQUVuRSxZQUFZLENBQUM7QUFDYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUV4QixrQkFBVSxHQUFXLGlFQUFpRSxDQUFDO0FBQ3ZGLHFCQUFhLEdBQVcsZ0JBQWdCLENBQUM7QUFFcEQsSUFBSSxZQUFZLEdBQThCO0lBQzdDLFFBQVEsRUFBRSxPQUFPLENBQUMscUJBQXFCLENBQUM7SUFDeEMsWUFBWSxFQUFFLFFBQVE7SUFDdEIsUUFBUSxFQUFFO1FBQ1QsUUFBUSxFQUFFLEdBQUc7UUFDYixRQUFRLEVBQUUsU0FBUztRQUNuQixNQUFNLEVBQUUsR0FBRztLQUNYO0NBQ0QsQ0FBQztBQUVGLE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxFQUFFLENBQUM7S0FDNUIsU0FBUyxDQUFDLHFCQUFhLEVBQUUsWUFBWSxDQUFDLENBQUMifQ==

/***/ },
/* 79 */
/***/ function(module, exports) {

	module.exports = "<div class=\"row filter-option\" ng-class=\"{ 'active': filter.isActive }\" ng-click=\"filter.activate()\">\r\n\t<div class=\"col-xs-1\">\r\n\t\t<i class='fa fa-arrow-right' ng-show=\"filter.isActive == true\"></i>\r\n\t</div>\r\n\t<div class=\"col-xs-1\" ng-if=\"filter.hasIcon\" ng-bind-html=\"filter.option.icon\"></div>\r\n\t<div ng-class=\"{ 'col-xs-6': filter.hasIcon, 'col-xs-7': !filter.hasIcon }\">\r\n\t\t{{filter.option.label}}\r\n\t</div>\r\n\t<div class=\"col-xs-3 text-right\" ng-show=\"filter.option.count != null\">\r\n\t\t({{filter.option.count}})\r\n\t</div>\r\n</div>"

/***/ },
/* 80 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	var filterGroup_service_1 = __webpack_require__(81);
	exports.moduleName = 'rl.ui.components.cardContainer.filters.filterGroup.modeFilterGroup';
	exports.factoryName = 'modeFilterGroup';
	var ModeFilterGroup = (function (_super) {
	    __extends(ModeFilterGroup, _super);
	    function ModeFilterGroup(settings, object) {
	        _super.call(this, settings, object);
	        this.getValue = settings.getValue;
	        settings.options = _.map(settings.options, this.buildModeOption.bind(this));
	        this.initOptions();
	    }
	    ModeFilterGroup.prototype.serialize = function () {
	        var activeOption = this.activeOption;
	        if (activeOption.displayAll) {
	            return null;
	        }
	        return activeOption.value;
	    };
	    ModeFilterGroup.prototype.buildModeOption = function (option) {
	        var _this = this;
	        var modeOption = option;
	        modeOption.filter = function (item) {
	            if (modeOption.displayAll) {
	                return true;
	            }
	            return __transform.getValue(item, _this.getValue) === modeOption.value;
	        };
	        return modeOption;
	    };
	    return ModeFilterGroup;
	}(filterGroup_service_1.FilterGroup));
	exports.ModeFilterGroup = ModeFilterGroup;
	modeFilterGroupFactory.$inject = [__object.serviceName];
	function modeFilterGroupFactory(object) {
	    'use strict';
	    return {
	        getInstance: function (settings) {
	            return new ModeFilterGroup(settings, object);
	        },
	    };
	}
	exports.modeFilterGroupFactory = modeFilterGroupFactory;
	angular.module(exports.moduleName, [__object.moduleName])
	    .factory(exports.factoryName, modeFilterGroupFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kZUZpbHRlckdyb3VwLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtb2RlRmlsdGVyR3JvdXAuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBQ2xDLElBQU8sV0FBVyxHQUFHLHVDQUFRLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztBQUVsRCxvQ0FBeUQsd0JBQXdCLENBQUMsQ0FBQTtBQUV2RSxrQkFBVSxHQUFXLG9FQUFvRSxDQUFDO0FBQzFGLG1CQUFXLEdBQVcsaUJBQWlCLENBQUM7QUF5Qm5EO0lBQXFDLG1DQUFXO0lBRy9DLHlCQUFZLFFBQXVDLEVBQUUsTUFBK0I7UUFDbkYsa0JBQVcsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzdCLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLFFBQVEsQ0FBQztRQUNsQyxRQUFRLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQStDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUMxSCxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDcEIsQ0FBQztJQUVELG1DQUFTLEdBQVQ7UUFDQyxJQUFJLFlBQVksR0FBMkIsSUFBSSxDQUFDLFlBQVksQ0FBQztRQUM3RCxFQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUM3QixNQUFNLENBQUMsSUFBSSxDQUFDO1FBQ2IsQ0FBQztRQUNELE1BQU0sQ0FBQyxZQUFZLENBQUMsS0FBSyxDQUFDO0lBQzNCLENBQUM7SUFFTyx5Q0FBZSxHQUF2QixVQUF3QixNQUFpQztRQUF6RCxpQkFXQztRQVZBLElBQUksVUFBVSxHQUEyQixNQUFNLENBQUM7UUFDaEQsVUFBVSxDQUFDLE1BQU0sR0FBRyxVQUFDLElBQStCO1lBQ25ELEVBQUUsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO2dCQUMzQixNQUFNLENBQUMsSUFBSSxDQUFDO1lBQ2IsQ0FBQztZQUVELE1BQU0sQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxLQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssVUFBVSxDQUFDLEtBQUssQ0FBQztRQUN2RSxDQUFDLENBQUM7UUFFRixNQUFNLENBQUMsVUFBVSxDQUFDO0lBQ25CLENBQUM7SUFDRixzQkFBQztBQUFELENBQUMsQUE5QkQsQ0FBcUMsaUNBQVcsR0E4Qi9DO0FBOUJZLHVCQUFlLGtCQThCM0IsQ0FBQTtBQU1ELHNCQUFzQixDQUFDLE9BQU8sR0FBRyxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUN4RCxnQ0FBdUMsTUFBK0I7SUFDckUsWUFBWSxDQUFDO0lBQ2IsTUFBTSxDQUFDO1FBQ04sV0FBVyxZQUFDLFFBQXVDO1lBQ2xELE1BQU0sQ0FBQyxJQUFJLGVBQWUsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDOUMsQ0FBQztLQUNELENBQUM7QUFDSCxDQUFDO0FBUGUsOEJBQXNCLHlCQU9yQyxDQUFBO0FBRUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQy9DLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLHNCQUFzQixDQUFDLENBQUMifQ==

/***/ },
/* 81 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	exports.factoryName = 'filterGroup';
	var FilterGroup = (function (_super) {
	    __extends(FilterGroup, _super);
	    function FilterGroup(settings, object) {
	        _super.call(this);
	        this.settings = settings;
	        this.object = object;
	        this.template = '<rl-filter-group filter-group="filter" source="dataSource"></rl-filter-group>';
	        this.label = settings.label;
	        this.type = settings.type != null ? settings.type : settings.label;
	        this.initOptions();
	    }
	    FilterGroup.prototype.initOptions = function () {
	        var _this = this;
	        this.options = this.settings.options;
	        this.activeOption = this.setDefaultOption();
	        _.each(this.options, function (option) {
	            if (_.isUndefined(option.type)) {
	                option.type = option.label;
	            }
	            option.type = _this.object.toString(option.type).toLowerCase();
	        });
	    };
	    Object.defineProperty(FilterGroup.prototype, "activeOption", {
	        get: function () {
	            return this._activeOption;
	        },
	        set: function (value) {
	            this._activeOption = value;
	            this.onChange(false);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    FilterGroup.prototype.setDefaultOption = function () {
	        var defaultOption = this.options[0];
	        _.each(this.options, function (item) {
	            if (item.active != null && item.active === true) {
	                defaultOption = item;
	            }
	        });
	        return defaultOption;
	    };
	    FilterGroup.prototype.filter = function (item) {
	        return this.activeOption.filter(item);
	    };
	    FilterGroup.prototype.serialize = function () {
	        if (_.isFunction(this.settings.serialize)) {
	            return this.settings.serialize();
	        }
	        if (_.isFunction(this.activeOption.serialize)) {
	            return this.activeOption.serialize();
	        }
	        return this.activeOption.value;
	    };
	    FilterGroup.prototype.setActiveOption = function (index) {
	        if (index >= 0 && index < this.options.length) {
	            this.activeOption = this.options[index];
	        }
	    };
	    FilterGroup.prototype.setOptionCounts = function (counts) {
	        _.each(this.options, function (option) {
	            if (_.has(counts, option.type)) {
	                option.count = counts[option.type];
	            }
	        });
	    };
	    FilterGroup.prototype.updateOptionCounts = function (filteredDataSet) {
	        _.each(this.options, function (option) {
	            option.count = _.filter(filteredDataSet, option.filter.bind(option)).length;
	        });
	    };
	    return FilterGroup;
	}(typescript_angular_utilities_1.filters.SerializableFilter));
	exports.FilterGroup = FilterGroup;
	filterGroupFactory.$inject = [__object.serviceName];
	function filterGroupFactory(object) {
	    'use strict';
	    return {
	        getInstance: function (settings) {
	            return new FilterGroup(settings, object);
	        },
	    };
	}
	exports.filterGroupFactory = filterGroupFactory;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyR3JvdXAuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZpbHRlckdyb3VwLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7Ozs7QUFHYixJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1Qiw2Q0FBa0MsOEJBQThCLENBQUMsQ0FBQTtBQUNqRSxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUV2QixtQkFBVyxHQUFXLGFBQWEsQ0FBQztBQStCL0M7SUFBaUMsK0JBQStCO0lBTy9ELHFCQUFvQixRQUE4QixFQUFVLE1BQStCO1FBQzFGLGlCQUFPLENBQUM7UUFEVyxhQUFRLEdBQVIsUUFBUSxDQUFzQjtRQUFVLFdBQU0sR0FBTixNQUFNLENBQXlCO1FBSDNGLGFBQVEsR0FBVywrRUFBK0UsQ0FBQztRQUtsRyxJQUFJLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxJQUFJLElBQUksR0FBRyxRQUFRLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFDbkUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRCxpQ0FBVyxHQUFYO1FBQUEsaUJBV0M7UUFWQSxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDO1FBQ3JDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7UUFFNUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFVBQUMsTUFBcUI7WUFDMUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNoQyxNQUFNLENBQUMsSUFBSSxHQUFH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

/***/ },
/* 82 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	var filterGroup_service_1 = __webpack_require__(81);
	exports.moduleName = 'rl.ui.components.cardContainer.filters.filterGroup.rangeFilterGroup';
	exports.factoryName = 'rangeFilterGroup';
	var RangeFilterGroup = (function (_super) {
	    __extends(RangeFilterGroup, _super);
	    function RangeFilterGroup(settings, object) {
	        _super.call(this, settings, object);
	        this.getValue = settings.getValue;
	        settings.options = _.map(settings.options, this.buildRangeOption.bind(this));
	        this.initOptions();
	    }
	    RangeFilterGroup.prototype.serialize = function () {
	        var activeOption = this.activeOption;
	        if (this.isNullOption(activeOption)) {
	            return null;
	        }
	        return {
	            highInclusive: activeOption.highInclusive,
	            highExclusive: activeOption.highExclusive,
	            lowInclusive: activeOption.lowInclusive,
	            lowExclusive: activeOption.lowExclusive,
	        };
	    };
	    RangeFilterGroup.prototype.buildRangeOption = function (option) {
	        var _this = this;
	        var modeOption = option;
	        modeOption.filter = function (item) {
	            var value = __transform.getValue(item, _this.getValue);
	            var result = true;
	            if (_.isUndefined(option.highExclusive) === false) {
	                result = value < option.highExclusive;
	            }
	            else if (_.isUndefined(option.highInclusive) === false) {
	                result = value <= option.highInclusive;
	            }
	            if (_.isUndefined(option.lowExclusive) === false) {
	                result = result && value > option.lowExclusive;
	            }
	            else if (_.isUndefined(option.lowInclusive) === false) {
	                result = result && value >= option.lowInclusive;
	            }
	            return result;
	        };
	        return modeOption;
	    };
	    RangeFilterGroup.prototype.isNullOption = function (option) {
	        return option.highInclusive == null
	            && option.highExclusive == null
	            && option.lowInclusive == null
	            && option.lowExclusive == null;
	    };
	    return RangeFilterGroup;
	}(filterGroup_service_1.FilterGroup));
	rangeFilterGroupFactory.$inject = [__object.serviceName];
	function rangeFilterGroupFactory(object) {
	    'use strict';
	    return {
	        getInstance: function (settings) {
	            return new RangeFilterGroup(settings, object);
	        },
	    };
	}
	exports.rangeFilterGroupFactory = rangeFilterGroupFactory;
	angular.module(exports.moduleName, [__object.moduleName])
	    .factory(exports.factoryName, rangeFilterGroupFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFuZ2VGaWx0ZXJHcm91cC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmFuZ2VGaWx0ZXJHcm91cC5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7Ozs7O0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFDbEMsSUFBTyxXQUFXLEdBQUcsdUNBQVEsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO0FBRWxELG9DQUF5RCx3QkFBd0IsQ0FBQyxDQUFBO0FBRXZFLGtCQUFVLEdBQVcscUVBQXFFLENBQUM7QUFDM0YsbUJBQVcsR0FBVyxrQkFBa0IsQ0FBQztBQW9DcEQ7SUFBK0Isb0NBQVc7SUFHekMsMEJBQVksUUFBd0MsRUFBRSxNQUErQjtRQUNwRixrQkFBVyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDN0IsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDO1FBQ2xDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBaUQsUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDN0gsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRCxvQ0FBUyxHQUFUO1FBQ0MsSUFBSSxZQUFZLEdBQTRCLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDOUQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLElBQUksQ0FBQztRQUNiLENBQUM7UUFDRCxNQUFNLENBQUM7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

/***/ },
/* 83 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../../typings/commonjs.d.ts' />
	'use strict';
	exports.componentName = 'rlFilterGroup';
	exports.controllerName = 'FilterGroupController';
	var FilterGroupController = (function () {
	    function FilterGroupController($scope) {
	        this.$scope = $scope;
	        this.hasIcon = this.icon != null && this.icon !== '';
	        this.showChildren = true;
	    }
	    FilterGroupController.prototype.toggleChildren = function () {
	        this.showChildren = !this.showChildren;
	    };
	    FilterGroupController.prototype.selectOption = function (option) {
	        this.filterGroup.activeOption = option;
	        this.showChildren = false;
	        if (this.source != null) {
	            this.source.refresh();
	        }
	        else {
	            this.$scope.$emit('dataSource.requestRefresh'); //*event?
	        }
	    };
	    FilterGroupController.$inject = ['$scope'];
	    return FilterGroupController;
	}());
	exports.FilterGroupController = FilterGroupController;
	exports.filterGroup = {
	    template: __webpack_require__(84),
	    controller: exports.controllerName,
	    controllerAs: 'controller',
	    bindings: {
	        icon: '=',
	        filterGroup: '=',
	        source: '=',
	    },
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVyR3JvdXAuZGlyZWN0aXZlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZmlsdGVyR3JvdXAuZGlyZWN0aXZlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLGdFQUFnRTtBQUVoRSxZQUFZLENBQUM7QUFVRixxQkFBYSxHQUFXLGVBQWUsQ0FBQztBQUN4QyxzQkFBYyxHQUFXLHVCQUF1QixDQUFDO0FBUTVEO0lBVUMsK0JBQW9CLE1BQXNCO1FBQXRCLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQ3pDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLElBQUksS0FBSyxFQUFFLENBQUM7UUFDckQsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7SUFDMUIsQ0FBQztJQUVELDhDQUFjLEdBQWQ7UUFDQyxJQUFJLENBQUMsWUFBWSxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztJQUN4QyxDQUFDO0lBRUQsNENBQVksR0FBWixVQUFhLE1BQXFCO1FBQ2pDLElBQUksQ0FBQyxXQUFXLENBQUMsWUFBWSxHQUFHLE1BQU0sQ0FBQztRQUN2QyxJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztRQUUxQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN2QixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDUCxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUMsU0FBUztRQUMxRCxDQUFDO0lBQ0YsQ0FBQztJQW5CTSw2QkFBTyxHQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7SUFvQnZDLDRCQUFDO0FBQUQsQ0FBQyxBQTdCRCxJQTZCQztBQTdCWSw2QkFBcUIsd0JBNkJqQyxDQUFBO0FBRVUsbUJBQVcsR0FBOEI7SUFDbkQsUUFBUSxFQUFFLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQztJQUNqRCxVQUFVLEVBQUUsc0JBQWM7SUFDMUIsWUFBWSxFQUFFLFlBQVk7SUFDMUIsUUFBUSxFQUFFO1FBQ1QsSUFBSSxFQUFFLEdBQUc7UUFDVCxXQUFXLEVBQUUsR0FBRztRQUNoQixNQUFNLEVBQUUsR0FBRztLQUNYO0NBQ0QsQ0FBQyJ9

/***/ },
/* 84 */
/***/ function(module, exports) {

	module.exports = "<div class=\"filter-group\">\r\n\t<div class=\"row filter-header\" ng-click=\"controller.toggleChildren()\">\r\n\t\t<div class=\"col-sm-12\">\r\n\t\t\t<i class=\"collapse-icon fa fa-caret-down fa-2x\" ng-show=\"controller.showChildren\" title=\"Hide filter list\"></i>\r\n\t\t\t<i class=\"collapse-icon fa fa-caret-right fa-2x\" ng-hide=\"controller.showChildren\" title=\"Show filter list\"></i>\r\n\t\t\t<div class=\"filter-option\">\r\n\t\t\t\t<div style=\"display:inline-block\" ng-show=\"controller.hasIcon\" ng-bind-html=\"controller.icon\"></div>\r\n\t\t\t\t<h4 style=\"display: inline-block\">{{controller.filterGroup.label}}: {{controller.filterGroup.activeOption.label}}</h4>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div ng-show=\"controller.showChildren\" ng-repeat=\"filterOption in controller.filterGroup.options\">\r\n\t\t<rl-filter-option option=\"filterOption\" active=\"filterGroup.activeOption === filterOption\" activate=\"controller.selectOption(filterOption)\"></rl-filter-option>\r\n\t</div>\r\n</div>\r\n"

/***/ },
/* 85 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var selectFilter_service_1 = __webpack_require__(86);
	var selectFilter_component_1 = __webpack_require__(87);
	exports.moduleName = 'rl.ui.components.cardContainer.filters.selectFilter';
	__export(__webpack_require__(86));
	__export(__webpack_require__(87));
	angular.module(exports.moduleName, [])
	    .factory(selectFilter_service_1.factoryName, selectFilter_service_1.selectFilterFactory)
	    .component(selectFilter_component_1.componentName, selectFilter_component_1.selectFilter)
	    .controller(selectFilter_component_1.controllerName, selectFilter_component_1.SelectFilterController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0RmlsdGVyLm1vZHVsZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNlbGVjdEZpbHRlci5tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDOzs7O0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMscUNBQStDLHdCQUF3QixDQUFDLENBQUE7QUFDeEUsdUNBQWtGLDBCQUVsRixDQUFDLENBRjJHO0FBRWpHLGtCQUFVLEdBQVcscURBQXFELENBQUM7QUFDdEYsaUJBQWUsd0JBQXdCLENBQUMsRUFBQTtBQUN4QyxpQkFBYywwQkFFZCxDQUFDLEVBRnVDO0FBRXhDLE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxFQUUxQixDQUFDO0tBQ0EsT0FBTyxDQUFDLGtDQUFXLEVBQUUsMENBQW1CLENBQUM7S0FDekMsU0FBUyxDQUFDLHNDQUFhLEVBQUUscUNBQVksQ0FBQztLQUN0QyxVQUFVLENBQUMsdUNBQWMsRUFBRSwrQ0FBc0IsQ0FBQyxDQUFDIn0=

/***/ },
/* 86 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	exports.factoryName = 'rlSelectFilterFactory';
	var SelectFilter = (function () {
	    function SelectFilter(settings) {
	        this.type = 'selectFilter';
	        this.valueSelector = settings.valueSelector;
	        this.comparer = settings.comparer;
	        this.options = settings.options;
	        this.getOptions = settings.getOptions;
	        this.label = settings.label;
	        this.displayNameSelector = settings.displayNameSelector;
	        this.nullOption = settings.nullOption;
	        this.template = "<rl-select-filter filter=\"filter\" source=\"dataSource\" options=\"filter.options\" get-options=\"filter.getOptions()\"\n\t\t\t\t\t\t\t\t\t\t   label=\"{{filter.label}}\" selector=\"filter.displayNameSelector\" null-option=\"{{filter.nullOption}}\"></rl-select-filter>";
	    }
	    SelectFilter.prototype.filter = function (item) {
	        if (this.selectedValue == null) {
	            return true;
	        }
	        if (this.comparer != null) {
	            return this.comparer(this.getValue(item), this.selectedValue);
	        }
	        return __object.objectUtility.areEqual(this.getValue(item), this.selectedValue);
	    };
	    SelectFilter.prototype.getValue = function (item) {
	        return __transform.getValue(item, this.valueSelector);
	    };
	    return SelectFilter;
	}());
	function selectFilterFactory() {
	    return {
	        getInstance: function (settings) {
	            return new SelectFilter(settings);
	        },
	    };
	}
	exports.selectFilterFactory = selectFilterFactory;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0RmlsdGVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzZWxlY3RGaWx0ZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFHYiw2Q0FBZ0MsOEJBQThCLENBQUMsQ0FBQTtBQUMvRCxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUNsQyxJQUFPLFdBQVcsR0FBRyx1Q0FBUSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7QUFFdkMsbUJBQVcsR0FBVyx1QkFBdUIsQ0FBQztBQXNCekQ7SUFlQyxzQkFBWSxRQUF1RDtRQWJuRSxTQUFJLEdBQVcsY0FBYyxDQUFDO1FBYzdCLElBQUksQ0FBQyxhQUFhLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQztRQUM1QyxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQyxRQUFRLENBQUM7UUFDbEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxVQUFVLEdBQUcsUUFBUSxDQUFDLFVBQVUsQ0FBQztRQUN0QyxJQUFJLENBQUMsS0FBSyxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFDNUIsSUFBSSxDQUFDLG1CQUFtQixHQUFHLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztRQUN4RCxJQUFJLENBQUMsVUFBVSxHQUFHLFFBQVEsQ0FBQyxVQUFVLENBQUM7UUFDdEMsSUFBSSxDQUFDLFFBQVEsR0FBRywrUUFDa0gsQ0FBQztJQUNwSSxDQUFDO0lBRUQsNkJBQU0sR0FBTixVQUFPLElBQWU7UUFDckIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2hDLE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDYixDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzNCLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQy9ELENBQUM7UUFFRCxNQUFNLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDakYsQ0FBQztJQUVPLCtCQUFRLEdBQWhCLFVBQWlCLElBQWU7UUFDL0IsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN2RCxDQUFDO0lBRUYsbUJBQUM7QUFBRCxDQUFDLEFBM0NELElBMkNDO0FBTUQ7SUFDQyxNQUFNLENBQUM7UUFDTixXQUFXLFlBQXlCLFFBQXVEO1lBQzFGLE1BQU0sQ0FBQyxJQUFJLFlBQVksQ0FBeUIsUUFBUSxDQUFDLENBQUM7UUFDM0QsQ0FBQztLQUNELENBQUM7QUFDSCxDQUFDO0FBTmUsMkJBQW1CLHNCQU1sQyxDQUFBIn0=

/***/ },
/* 87 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../../typings/commonjs.d.ts' />
	'use strict';
	exports.componentName = 'rlSelectFilter';
	exports.controllerName = 'SelectFilterController';
	var SelectFilterController = (function () {
	    function SelectFilterController($scope) {
	        this.$scope = $scope;
	    }
	    Object.defineProperty(SelectFilterController.prototype, "selectedValue", {
	        get: function () {
	            return this.filter.selectedValue;
	        },
	        set: function (v) {
	            this.filter.selectedValue = v;
	            if (this.source != null) {
	                this.source.refresh();
	            }
	            else {
	                this.$scope.$emit('dataSource.requestRefresh'); //*event?
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SelectFilterController.$inject = ['$scope'];
	    return SelectFilterController;
	}());
	exports.SelectFilterController = SelectFilterController;
	exports.selectFilter = {
	    template: __webpack_require__(88),
	    controller: exports.controllerName,
	    controllerAs: 'filter',
	    bindings: {
	        filter: '<',
	        options: '<?',
	        getOptions: '&',
	        source: '<?',
	        label: '@',
	        selector: '<?',
	        nullOption: '@'
	    },
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0RmlsdGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNlbGVjdEZpbHRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsZ0VBQWdFO0FBRWhFLFlBQVksQ0FBQztBQU1GLHFCQUFhLEdBQVcsZ0JBQWdCLENBQUM7QUFDekMsc0JBQWMsR0FBVyx3QkFBd0IsQ0FBQztBQWtCN0Q7SUFVQyxnQ0FBb0IsTUFBc0I7UUFBdEIsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7SUFBSSxDQUFDO0lBRS9DLHNCQUFXLGlEQUFhO2FBQXhCO1lBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO1FBQ2xDLENBQUM7YUFDRCxVQUF5QixDQUFNO1lBQzlCLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQztZQUM5QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ3pCLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDdkIsQ0FBQztZQUFBLElBQUksQ0FBQyxDQUFDO2dCQUNHLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLDJCQUEyQixDQUFDLENBQUMsQ0FBQyxTQUFTO1lBQzdELENBQUM7UUFDUixDQUFDOzs7T0FSQTtJQUxNLDhCQUFPLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQWM3Qiw2QkFBQztBQUFELENBQUMsQUF2QkQsSUF1QkM7QUF2QlksOEJBQXNCLHlCQXVCbEMsQ0FBQTtBQUVVLG9CQUFZLEdBQThCO0lBQ3BELFFBQVEsRUFBRSxPQUFPLENBQUMscUJBQXFCLENBQUM7SUFDeEMsVUFBVSxFQUFFLHNCQUFjO0lBQzFCLFlBQVksRUFBRSxRQUFRO0lBQ3RCLFFBQVEsRUFBRTtRQUNULE1BQU0sRUFBRSxHQUFHO1FBQ1gsT0FBTyxFQUFFLElBQUk7UUFDYixVQUFVLEVBQUUsR0FBRztRQUNmLE1BQU0sRUFBRSxJQUFJO1FBQ1osS0FBSyxFQUFFLEdBQUc7UUFDVixRQUFRLEVBQUUsSUFBSTtRQUNkLFVBQVUsRUFBRSxHQUFHO0tBQ2Y7Q0FDRCxDQUFDIn0=

/***/ },
/* 88 */
/***/ function(module, exports) {

	module.exports = "<div class=\"filter-group\">\r\n\t<rl-select ng-model=\"filter.selectedValue\" options=\"filter.options\" label=\"{{filter.label}}\"\r\n\t\t\t   selector=\"filter.selector\" get-options=\"filter.getOptions()\" null-option=\"{{filter.nullOption}}\"></rl-select>\r\n</div>"

/***/ },
/* 89 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/node/node.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	exports.moduleName = 'rl.ui.components.cardContainer.filters.cardContainerFilters';
	exports.componentName = 'rlCardContainerFilters';
	exports.controllerName = 'CardContainerFiltersController';
	var CardContainerFiltersController = (function () {
	    function CardContainerFiltersController($rootScope) {
	        this.$rootScope = $rootScope;
	    }
	    CardContainerFiltersController.prototype.$onInit = function () {
	        var _this = this;
	        this.renderableFilters = _(this.filters).filter(function (filter) {
	            return filter.template != null;
	        }).map(function (filter) {
	            var scope = _this.$rootScope.$new();
	            scope.filter = filter;
	            scope.dataSource = _this.source;
	            filter.template = {
	                template: filter.template,
	                scope: scope,
	            };
	            return filter;
	        }).value();
	    };
	    CardContainerFiltersController.$inject = ['$rootScope'];
	    return CardContainerFiltersController;
	}());
	exports.CardContainerFiltersController = CardContainerFiltersController;
	var cardContainerFilters = {
	    template: __webpack_require__(90),
	    controller: exports.controllerName,
	    controllerAs: 'controller',
	    bindings: {
	        filters: '<',
	        source: '<',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, cardContainerFilters)
	    .controller(exports.controllerName, CardContainerFiltersController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyZENvbnRhaW5lckZpbHRlcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjYXJkQ29udGFpbmVyRmlsdGVycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwyREFBMkQ7QUFFM0QsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFNakIsa0JBQVUsR0FBVyw2REFBNkQsQ0FBQztBQUNuRixxQkFBYSxHQUFXLHdCQUF3QixDQUFDO0FBQ2pELHNCQUFjLEdBQVcsZ0NBQWdDLENBQUM7QUFnQnJFO0lBTUMsd0NBQW9CLFVBQXFDO1FBQXJDLGVBQVUsR0FBVixVQUFVLENBQTJCO0lBQUksQ0FBQztJQUU5RCxnREFBTyxHQUFQO1FBQUEsaUJBYUM7UUFaQSxJQUFJLENBQUMsaUJBQWlCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsVUFBQyxNQUF5QjtZQUN6RSxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUM7UUFDaEMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFVBQUMsTUFBeUI7WUFDaEMsSUFBSSxLQUFLLEdBQStCLEtBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDL0QsS0FBSyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7WUFDdEIsS0FBSyxDQUFDLFVBQVUsR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxRQUFRLEdBQUc7Z0JBQ2pCLFFBQVEsRUFBVSxNQUFNLENBQUMsUUFBUTtnQkFDakMsS0FBSyxFQUFFLEtBQUs7YUFDWixDQUFDO1lBQ0YsTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUNmLENBQUMsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO0lBQ1osQ0FBQztJQWhCTSxzQ0FBTyxHQUFhLENBQUMsWUFBWSxDQUFDLENBQUM7SUFpQjNDLHFDQUFDO0FBQUQsQ0FBQyxBQXRCRCxJQXNCQztBQXRCWSxzQ0FBOEIsaUNBc0IxQyxDQUFBO0FBRUQsSUFBSSxvQkFBb0IsR0FBOEI7SUFDckQsUUFBUSxFQUFFLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQztJQUNoRCxVQUFVLEVBQUUsc0JBQWM7SUFDMUIsWUFBWSxFQUFFLFlBQVk7SUFDMUIsUUFBUSxFQUFFO1FBQ1QsT0FBTyxFQUFFLEdBQUc7UUFDWixNQUFNLEVBQUUsR0FBRztLQUNYO0NBQ0QsQ0FBQztBQUVGLE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxFQUFFLENBQUM7S0FDNUIsU0FBUyxDQUFDLHFCQUFhLEVBQUUsb0JBQW9CLENBQUM7S0FDOUMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsOEJBQThCLENBQUMsQ0FBQyJ9

/***/ },
/* 90 */
/***/ function(module, exports) {

	module.exports = "<div ng-repeat=\"filter in controller.renderableFilters\">\r\n\t<rl-template-renderer template=\"filter.template\"></rl-template-renderer>\r\n</div>"

/***/ },
/* 91 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.components.cardContainer.itemCount';
	exports.componentName = 'rlItemCount';
	var itemCount = {
	    require: { cardContainer: '?^^rlCardContainer' },
	    template: __webpack_require__(92),
	    controllerAs: 'itemCount',
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, itemCount);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaXRlbUNvdW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaXRlbUNvdW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRXhCLGtCQUFVLEdBQVcsMENBQTBDLENBQUM7QUFDaEUscUJBQWEsR0FBVyxhQUFhLENBQUM7QUFFakQsSUFBSSxTQUFTLEdBQThCO0lBQzFDLE9BQU8sRUFBRSxFQUFFLGFBQWEsRUFBRSxvQkFBb0IsRUFBRTtJQUNoRCxRQUFRLEVBQUUsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0lBQ3JDLFlBQVksRUFBRSxXQUFXO0NBQ3pCLENBQUM7QUFFRixPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLFNBQVMsQ0FBQyxDQUFDIn0=

/***/ },
/* 92 */
/***/ function(module, exports) {

	module.exports = "<p ng-show=\"!itemCount.cardContainer.dataSource.loadingDataSet\">\r\n\tShowing <strong>{{itemCount.cardContainer.dataSource.dataSet.length}} of {{itemCount.cardContainer.dataSource.count}}</strong> total items\r\n</p>"

/***/ },
/* 93 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	exports.moduleName = 'rl.ui.components.cardContainer.pager';
	exports.componentName = 'rlPager';
	exports.controllerName = 'PagerController';
	exports.defaultVisiblePageCount = 5;
	var PagerController = (function () {
	    function PagerController($scope) {
	        var _this = this;
	        this.$scope = $scope;
	        this.canGoBack = false;
	        this.canGoForward = false;
	        this.hasPageFilter = true;
	        this.updatePageCount = function () {
	            var totalItems = _this.dataSource.count;
	            var newLastPage = Math.ceil(totalItems / _this.pager.pageSize);
	            if (newLastPage !== _this.lastPage) {
	                _this.lastPage = newLastPage;
	                _this.currentPage = 1;
	            }
	            _this.updatePaging();
	        };
	    }
	    PagerController.prototype.$onInit = function () {
	        var _this = this;
	        if (this.cardContainer == null) {
	            return;
	        }
	        this.pager = this.cardContainer.dataSource.pager;
	        if (this.pager == null) {
	            this.hasPageFilter = false;
	        }
	        else {
	            this.visiblePageCount = this.pageCount != null ? this.pageCount : exports.defaultVisiblePageCount;
	            this.lastPage = 1;
	            this.dataSource = this.cardContainer.dataSource;
	            this.$scope.$watch(function () { return _this.dataSource.count; }, this.updatePageCount);
	            this.$scope.$watch(function () { return _this.pager.pageSize; }, this.updatePageCount);
	            this.$scope.$watch(function () { return _this.currentPage; }, function (page) {
	                _this.updatePaging();
	                _this.pager.pageNumber = page;
	                _this.dataSource.onPagingChange();
	            });
	        }
	    };
	    PagerController.prototype.updatePaging = function () {
	        var page = this.currentPage;
	        this.canGoBack = page > 1;
	        this.canGoForward = page < this.lastPage;
	        var nonCurrentVisiblePages = this.visiblePageCount - 1;
	        var before = Math.floor(nonCurrentVisiblePages / 2);
	        var after = Math.ceil(nonCurrentVisiblePages / 2);
	        var startPage = page - before;
	        var endPage = page + after;
	        if (startPage < 1) {
	            startPage = 1;
	            endPage = Math.min(this.visiblePageCount, this.lastPage);
	        }
	        else if (endPage > this.lastPage) {
	            endPage = this.lastPage;
	            startPage = Math.max(this.lastPage - nonCurrentVisiblePages, 1);
	        }
	        this.pages = _.range(startPage, endPage + 1);
	    };
	    PagerController.prototype.first = function () {
	        this.currentPage = 1;
	    };
	    PagerController.prototype.previous = function () {
	        if (this.currentPage > 1) {
	            this.currentPage--;
	        }
	    };
	    PagerController.prototype.goto = function (page) {
	        if (page >= 1 && page <= this.lastPage) {
	            this.currentPage = page;
	        }
	    };
	    PagerController.prototype.next = function () {
	        if (this.currentPage < this.lastPage) {
	            this.currentPage++;
	        }
	    };
	    PagerController.prototype.last = function () {
	        this.currentPage = this.lastPage;
	    };
	    PagerController.$inject = ['$scope'];
	    return PagerController;
	}());
	exports.PagerController = PagerController;
	var pager = {
	    require: { cardContainer: '?^^rlCardContainer' },
	    template: __webpack_require__(94),
	    controller: exports.controllerName,
	    controllerAs: 'pager',
	    bindings: {
	        pageCount: '<?visiblePages',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, pager)
	    .controller(exports.controllerName, PagerController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJwYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFFN0QsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFLakIsa0JBQVUsR0FBVyxzQ0FBc0MsQ0FBQztBQUM1RCxxQkFBYSxHQUFXLFNBQVMsQ0FBQztBQUNsQyxzQkFBYyxHQUFXLGlCQUFpQixDQUFDO0FBRTNDLCtCQUF1QixHQUFXLENBQUMsQ0FBQztBQU0vQztJQWdCQyx5QkFBb0IsTUFBc0I7UUFoQjNDLGlCQTBHQztRQTFGb0IsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7UUFaMUMsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUMzQixpQkFBWSxHQUFZLEtBQUssQ0FBQztRQUc5QixrQkFBYSxHQUFZLElBQUksQ0FBQztRQW9DdEIsb0JBQWUsR0FBZTtZQUNyQyxJQUFJLFVBQVUsR0FBVyxLQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQztZQUUvQyxJQUFJLFdBQVcsR0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsR0FBRyxLQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBRXRFLEVBQUUsQ0FBQyxDQUFDLFdBQVcsS0FBSyxLQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztnQkFDbkMsS0FBSSxDQUFDLFFBQVEsR0FBRyxXQUFXLENBQUM7Z0JBQzVCLEtBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxDQUFDO1lBQ3RCLENBQUM7WUFFRCxLQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7UUFDckIsQ0FBQyxDQUFBO0lBdkM0QyxDQUFDO0lBRTlDLGlDQUFPLEdBQVA7UUFBQSxpQkF3QkM7UUF2QkEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFD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

/***/ },
/* 94 */
/***/ function(module, exports) {

	module.exports = "<nav ng-if=\"pager.hasPageFilter\">\r\n\t<ul class=\"pagination\">\r\n\t\t<li title=\"Go to first page\" ng-click=\"pager.first()\"\r\n\t\t\tng-class=\"{ 'disabled': !pager.canGoBack }\">\r\n\t\t\t<a><i class=\"fa fa-angle-double-left\"></i></a>\r\n\t\t</li>\r\n\t\t<li title=\"Go to previous page\" ng-click=\"pager.previous()\"\r\n\t\t\tng-class=\"{ 'disabled': !pager.canGoBack }\">\r\n\t\t\t<a><i class=\"fa fa-angle-left\"></i></a>\r\n\t\t</li>\r\n\t\t<li title=\"Go to page {{pager.page}}\" ng-click=\"pager.goto(page)\"\r\n\t\t\tng-repeat=\"page in pager.pages\"\r\n\t\t\tng-class=\"{ 'active': pager.currentPage == page }\">\r\n\t\t\t<a>{{page}}</a>\r\n\t\t</li>\r\n\t\t<li title=\"Go to next page\" ng-click=\"pager.next()\"\r\n\t\t\tng-class=\"{ 'disabled': !pager.canGoForward }\">\r\n\t\t\t<a><i class=\"fa fa-angle-right\"></i></a>\r\n\t\t</li>\r\n\t\t<li title=\"Go to last page\" ng-click=\"pager.last()\"\r\n\t\t\tng-class=\"{ 'disabled': !pager.canGoForward }\">\r\n\t\t\t<a><i class=\"fa fa-angle-double-right\"></i></a>\r\n\t\t</li>\r\n\t</ul>\r\n</nav>\r\n"

/***/ },
/* 95 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.components.cardContainer.pageSize';
	exports.componentName = 'rlPageSize';
	exports.controllerName = 'PageSizeController';
	exports.availablePageSizes = [10, 25, 50, 100];
	exports.defaultPageSize = 10;
	var PageSizeController = (function () {
	    function PageSizeController($scope) {
	        this.$scope = $scope;
	    }
	    PageSizeController.prototype.$onInit = function () {
	        var _this = this;
	        if (this.cardContainer == null) {
	            return;
	        }
	        this.selectedPageSize = exports.defaultPageSize;
	        this.pageSizes = exports.availablePageSizes;
	        this.hasPageFilter = true;
	        var pager = this.cardContainer.dataSource.pager;
	        if (pager == null) {
	            this.hasPageFilter = false;
	        }
	        else {
	            this.$scope.$watch(function () { return _this.selectedPageSize; }, function (newPageSize) {
	                if (pager != null) {
	                    pager.pageSize = newPageSize;
	                    _this.cardContainer.dataSource.onPagingChange();
	                }
	            });
	        }
	    };
	    PageSizeController.$inject = ['$scope'];
	    return PageSizeController;
	}());
	exports.PageSizeController = PageSizeController;
	var pageSize = {
	    require: { cardContainer: '?^^rlCardContainer' },
	    template: __webpack_require__(96),
	    controller: exports.controllerName,
	    controllerAs: 'controller',
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, pageSize)
	    .controller(exports.controllerName, PageSizeController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZVNpemUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJwYWdlU2l6ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2REFBNkQ7QUFFN0QsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFLeEIsa0JBQVUsR0FBVyx5Q0FBeUMsQ0FBQztBQUMvRCxxQkFBYSxHQUFXLFlBQVksQ0FBQztBQUNyQyxzQkFBYyxHQUFXLG9CQUFvQixDQUFDO0FBRTlDLDBCQUFrQixHQUFhLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDakQsdUJBQWUsR0FBVyxFQUFFLENBQUM7QUFFeEM7SUFPQyw0QkFBb0IsTUFBc0I7UUFBdEIsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7SUFBRyxDQUFDO0lBRTlDLG9DQUFPLEdBQVA7UUFBQSxpQkFxQkM7UUFwQkEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2hDLE1BQU0sQ0FBQztRQUNSLENBQUM7UUFFRCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsdUJBQWUsQ0FBQztRQUN4QyxJQUFJLENBQUMsU0FBUyxHQUFHLDBCQUFrQixDQUFDO1FBQ3BDLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDO1FBRTFCLElBQUksS0FBSyxHQUF5QixJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUM7UUFFdEUsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDbkIsSUFBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFDNUIsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ1AsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsY0FBZ0IsTUFBTSxDQUFDLEtBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFDLFdBQW1CO2dCQUN2RixFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztvQkFDbkIsS0FBSyxDQUFDLFFBQVEsR0FBRyxXQUFXLENBQUM7b0JBQzdCLEtBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDLGNBQWMsRUFBRSxDQUFDO2dCQUNoRCxDQUFDO1lBQ0YsQ0FBQyxDQUFDLENBQUM7UUFDSixDQUFDO0lBQ0YsQ0FBQztJQXhCTSwwQkFBTyxHQUFhLENBQUMsUUFBUSxDQUFDLENBQUM7SUF5QnZDLHlCQUFDO0FBQUQsQ0FBQyxBQS9CRCxJQStCQztBQS9CWSwwQkFBa0IscUJBK0I5QixDQUFBO0FBRUQsSUFBSSxRQUFRLEdBQThCO0lBQ3pDLE9BQU8sRUFBRSxFQUFFLGFBQWEsRUFBRSxvQkFBb0IsRUFBRTtJQUNoRCxRQUFRLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0lBQ3BDLFVBQVUsRUFBRSxzQkFBYztJQUMxQixZQUFZLEVBQUUsWUFBWTtDQUMxQixDQUFDO0FBRUYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixTQUFTLENBQUMscUJBQWEsRUFBRSxRQUFRLENBQUM7S0FDbEMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyJ9

/***/ },
/* 96 */
/***/ function(module, exports) {

	module.exports = "<div ng-show=\"controller.hasPageFilter\">\r\n\t<select class=\"form-control\" title=\"Cards per page\" ng-model=\"controller.selectedPageSize\"\r\n\t\t\tng-options=\"pageSize for pageSize in controller.pageSizes\"></select>\r\n</div>\r\n"

/***/ },
/* 97 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __boolean = typescript_angular_utilities_1.services.boolean;
	exports.moduleName = 'rl.ui.components.cardContainer.selectionControl';
	exports.componentName = 'rlSelectionControl';
	exports.controllerName = 'SelectionControlController';
	var SelectionControlController = (function () {
	    function SelectionControlController($scope, bool) {
	        this.$scope = $scope;
	        this.bool = bool;
	    }
	    SelectionControlController.prototype.$onInit = function () {
	        var _this = this;
	        if (this.cardContainer == null) {
	            return;
	        }
	        this.selectedItems = this.cardContainer.numberSelected;
	        this.pagingEnabled = this.bool.toBool(this.cardContainer.dataSource.pager);
	        this.dataSource = this.cardContainer.dataSource;
	        this.$scope.$watch(function () { return _this.cardContainer.numberSelected; }, function (value) {
	            _this.selectedItems = value;
	        });
	    };
	    SelectionControlController.prototype.selectPage = function () {
	        _.each(this.dataSource.dataSet, function (item) {
	            item.viewData.selected = true;
	        });
	        this.cardContainer.selectionChanged();
	    };
	    SelectionControlController.prototype.selectAll = function () {
	        _.each(this.dataSource.filteredDataSet, function (item) {
	            item.viewData.selected = true;
	        });
	        this.cardContainer.selectionChanged();
	    };
	    SelectionControlController.prototype.clearPage = function () {
	        _.each(this.dataSource.dataSet, function (item) {
	            item.viewData.selected = false;
	        });
	        this.cardContainer.selectionChanged();
	    };
	    SelectionControlController.prototype.clearAll = function () {
	        _.each(this.dataSource.filteredDataSet, function (item) {
	            item.viewData.selected = false;
	        });
	        this.cardContainer.selectionChanged();
	    };
	    SelectionControlController.$inject = ['$scope', __boolean.serviceName];
	    return SelectionControlController;
	}());
	exports.SelectionControlController = SelectionControlController;
	var selectionControl = {
	    require: { cardContainer: '?^^rlCardContainer' },
	    template: __webpack_require__(98),
	    controller: exports.controllerName,
	    controllerAs: 'selection',
	};
	angular.module(exports.moduleName, [__boolean.moduleName])
	    .component(exports.componentName, selectionControl)
	    .controller(exports.controllerName, SelectionControlController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0aW9uQ29udHJvbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNlbGVjdGlvbkNvbnRyb2wudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsNkRBQTZEO0FBRTdELFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sU0FBUyxHQUFHLHVDQUFRLENBQUMsT0FBTyxDQUFDO0FBS3pCLGtCQUFVLEdBQVcsaURBQWlELENBQUM7QUFDdkUscUJBQWEsR0FBVyxvQkFBb0IsQ0FBQztBQUM3QyxzQkFBYyxHQUFXLDRCQUE0QixDQUFDO0FBRWpFO0lBT0Msb0NBQW9CLE1BQXNCLEVBQzlCLElBQStCO1FBRHZCLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQzlCLFNBQUksR0FBSixJQUFJLENBQTJCO0lBQUcsQ0FBQztJQUUvQyw0Q0FBTyxHQUFQO1FBQUEsaUJBWUM7UUFYQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDaEMsTUFBTSxDQUFDO1FBQ1IsQ0FBQztRQUVELElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUM7UUFDdkQsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMzRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsVUFBVSxDQUFDO1FBRWhELElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWdCLE1BQU0sQ0FBQyxLQUFJLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFDLEtBQWE7WUFDN0YsS0FBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7UUFDNUIsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQsK0NBQVUsR0FBVjtRQUNDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsVUFBQyxJQUFTO1lBQ3pDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUMvQixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBRUQsOENBQVMsR0FBVDtRQUNDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLEVBQUUsVUFBQyxJQUFTO1lBQ2pELElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUMvQixDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBRUQsOENBQVMsR0FBVDtRQUNDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsVUFBQyxJQUFTO1lBQ3pDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUNoQyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBRUQsNkNBQVEsR0FBUjtRQUNDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxlQUFlLEVBQUUsVUFBQyxJQUFTO1lBQ2pELElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQztRQUNoQyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUN2QyxDQUFDO0lBaERNLGtDQUFPLEdBQWEsQ0FBQyxRQUFRLEVBQUUsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBaUQ5RCxpQ0FBQztBQUFELENBQUMsQUF2REQsSUF1REM7QUF2RFksa0NBQTBCLDZCQXVEdEMsQ0FBQTtBQUVELElBQUksZ0JBQWdCLEdBQThCO0lBQ2pELE9BQU8sRUFBRSxFQUFFLGFBQWEsRUFBRSxvQkFBb0IsRUFBRTtJQUNoRCxRQUFRLEVBQUUsT0FBTyxDQUFDLHlCQUF5QixDQUFDO0lBQzVDLFVBQVUsRUFBRSxzQkFBYztJQUMxQixZQUFZLEVBQUUsV0FBVztDQUN6QixDQUFDO0FBRUYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ2hELFNBQVMsQ0FBQyxxQkFBYSxFQUFFLGdCQUFnQixDQUFDO0tBQzFDLFVBQVUsQ0FBQyxzQkFBYyxFQUFFLDBCQUEwQixDQUFDLENBQUMifQ==

/***/ },
/* 98 */
/***/ function(module, exports) {

	module.exports = "<div>\r\n\t<div style=\"margin-bottom: 5px\">\r\n\t\t<span><strong>{{selection.selectedItems}}</strong> items selected</span>\r\n\t</div>\r\n\t<div style=\"margin-bottom: 5px\" ng-if=\"selection.pagingEnabled\">\r\n\t\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"selection.selectPage()\">Select page</button>\r\n\t\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"selection.clearPage()\">Clear page</button>\r\n\t</div>\r\n\t<div>\r\n\t\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"selection.selectAll()\">Select all</button>\r\n\t\t<button type=\"button\" class=\"btn btn-default\" ng-click=\"selection.clearAll()\">Clear all</button>\r\n\t</div>\r\n</div>\r\n"

/***/ },
/* 99 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	// /// <reference path='../../../typings/jquery/jquery.d.ts' />
	'use strict';
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __array = typescript_angular_utilities_1.services.array;
	var __parentChild = typescript_angular_utilities_1.services.parentChildBehavior;
	var dataSources_module_1 = __webpack_require__(55);
	var sorts_module_1 = __webpack_require__(56);
	var breakpoint_1 = __webpack_require__(49);
	exports.componentName = 'rlCardContainer';
	exports.controllerName = 'CardContainerController';
	exports.defaultMaxColumnSorts = 2;
	exports.defaultSelectionTitle = 'Select card';
	var CardContainerController = (function () {
	    function CardContainerController($scope, $attrs, $transclude, object, array, dataPagerFactory, parentChild) {
	        var _this = this;
	        this.$scope = $scope;
	        this.object = object;
	        this.array = array;
	        this.dataPagerFactory = dataPagerFactory;
	        this.parentChild = parentChild;
	        this.numberSelected = 0;
	        this.addViewData = function () {
	            _.each(_this.dataSource.rawDataSet, function (item) {
	                if (_.isUndefined(item.viewData)) {
	                    item.viewData = {
	                        selected: false,
	                    };
	                }
	            });
	            _this.updateDisabledSelections();
	        };
	        this.clearFilteredSelections = function () {
	            var nonVisibleItems = _.difference(_this.dataSource.rawDataSet, _this.dataSource.filteredDataSet);
	            _.each(nonVisibleItems, function (item) {
	                if (_.isUndefined(item.viewData)) {
	                    item.viewData = {
	                        selected: false,
	                    };
	                }
	                item.viewData.selected = false;
	                item.viewData.selectionTitle = exports.defaultSelectionTitle;
	            });
	            _this.updateSelected();
	        };
	        this.updateSelected = function () {
	            _this.numberSelected = _.filter(_this.dataSource.filteredDataSet, function (item) {
	                return item.viewData != null && item.viewData.selected;
	            }).length;
	        };
	        this.updateDisabledSelections = function () {
	            if (_this.disablingSelections) {
	                _.each(_this.dataSource.rawDataSet, function (item) {
	                    var disabledReason = _this.disableSelection({ item: item });
	                    item.viewData.disabledSelection = (disabledReason != null);
	                    item.viewData.selectionTitle = (item.viewData.disabledSelection ? disabledReason : exports.defaultSelectionTitle);
	                });
	            }
	        };
	        if (this.builder != null) {
	            this.builder.setCardContainerProperties(this);
	        }
	        this.makeCard = $transclude;
	        this.dataSource = this.source;
	        this.permanentFooters = _.isUndefined(this.permanentFooters) ? false : this.permanentFooters;
	        this.maxColSorts = this.maxColumnSorts != null ? this.maxColumnSorts : exports.defaultMaxColumnSorts;
	        this.disablingSelections = object.isNullOrWhitespace($attrs.disableSelection) === false;
	        this.sortDirection = sorts_module_1.SortDirection;
	        this.syncFilters();
	        this.setupPaging();
	        this.buildColumnSizes();
	        if (this.selectableCards) {
	            //*use card container event service?
	            $scope.$on('updateDisabledSelections', this.updateDisabledSelections);
	            this.dataSource.watch(this.addViewData, 'changed');
	            this.dataSource.watch(this.clearFilteredSelections, 'redrawing');
	            this.addViewData();
	            this.selectionColumn = {
	                label: null,
	                size: null,
	                getValue: function (item) {
	                    return item.viewData.selected;
	                },
	                flipSort: true,
	            };
	        }
	        if (this.dataSource.sorts == null) {
	            this.dataSource.sorts = [];
	        }
	        $scope.containerData = this.containerData;
	    }
	    CardContainerController.prototype.sortSelected = function () {
	        this.sort(this.selectionColumn);
	    };
	    CardContainerController.prototype.openCard = function () {
	        var behaviors = this.parentChild.getAllChildBehaviors(this.dataSource.dataSet);
	        return _.every(_.map(behaviors, function (behavior) { return behavior.close(); }));
	    };
	    CardContainerController.prototype.sort = function (column) {
	        var sortList = this.dataSource.sorts;
	        var firstSort = sortList[0];
	        // If column is already the primary sort, change the direction
	        if (firstSort != null
	            && firstSort.column === column) {
	            firstSort.direction = sorts_module_1.SortDirection.toggle(firstSort.direction);
	            // Clear sort
	            if (firstSort.direction === sorts_module_1.SortDirection.none) {
	                this.clearVisualSortIndicator(firstSort);
	                firstSort = null;
	                // If the column has secondary sorts don't fall back to a
	                //  secondary sort, instead just clear all sorts
	                if (column.secondarySorts != null) {
	                    sortList.length = 0;
	                }
	                else {
	                    sortList.shift();
	                }
	            }
	        }
	        else {
	            // Else make column primary ascending sort
	            // Remove any existing non-primary sorts on column
	            this.array.remove(sortList, function (sort) {
	                return column === sort.column;
	            });
	            // Build ascending sort for column
	            var newSort = {
	                column: column,
	                direction: sorts_module_1.SortDirection.ascending,
	            };
	            sortList.unshift(newSort);
	            firstSort = newSort;
	        }
	        this.updateVisualColumnSorting();
	        // If column has secondary sorts, wipe the sort order and just apply the secondary sorts
	        if (firstSort != null && column.secondarySorts != null) {
	            sortList.length = 0;
	            var secondarySorts = this.buildSecondarySorts(firstSort.direction, column.secondarySorts);
	            sortList.push(firstSort);
	            sortList.push.apply(sortList, secondarySorts);
	        }
	        else {
	            // If not using column secondary sorts, limit the maximum number
	            //  of sorts applied to the maximum number of sorts
	            this.dataSource.sorts = _.take(sortList, this.maxColSorts);
	        }
	        this.dataSource.onSortChange();
	    };
	    CardContainerController.prototype.selectionChanged = function () {
	        this.updateSelected();
	        this.selectionChangedEvent();
	    };
	    CardContainerController.prototype.syncFilters = function () {
	        if (!this.object.isNullOrEmpty(this.filters)) {
	            this.dataSource.filters = this.filters;
	            this.dataSource.refresh();
	        }
	        else if (this.dataSource.filters != null) {
	            this.filters = this.dataSource.filters;
	        }
	    };
	    CardContainerController.prototype.setupPaging = function () {
	        // If paging flag is specified, card container controls pager instance
	        if (this.paging != null) {
	            if (this.paging === false) {
	                this.dataSource.pager = null;
	            }
	            else {
	                this.builder._pager = this.dataPagerFactory.getInstance();
	                this.dataSource.pager = this.builder._pager;
	            }
	        }
	        else if (this.dataSource.pager) {
	            // If the paging flag is not set and the dataSource has a pager, save a reference here
	            this.builder._pager = this.dataSource.pager;
	        }
	    };
	    CardContainerController.prototype.buildColumnSizes = function () {
	        var _this = this;
	        _.each(this.columns, function (column) {
	            var sizes = column.size;
	            if (_.isObject(sizes)) {
	                sizes[breakpoint_1.xs] = _this.object.valueOrDefault(sizes[breakpoint_1.xs], 0);
	                sizes[breakpoint_1.sm] = _this.object.valueOrDefault(sizes[breakpoint_1.sm], sizes[breakpoint_1.xs]);
	                sizes[breakpoint_1.md] = _this.object.valueOrDefault(sizes[breakpoint_1.md], sizes[breakpoint_1.sm]);
	                sizes[breakpoint_1.lg] = _this.object.valueOrDefault(sizes[breakpoint_1.lg], sizes[breakpoint_1.md]);
	            }
	            else {
	                column.size = {
	                    xs: sizes,
	                    sm: sizes,
	                    md: sizes,
	                    lg: sizes,
	                };
	            }
	        });
	    };
	    CardContainerController.prototype.lookupColumn = function (label) {
	        return _.find(this.columns, function (column) {
	            return column.label === label;
	        });
	    };
	    CardContainerController.prototype.buildSecondarySorts = function (direction, secondarySorts) {
	        var _this = this;
	        var sortList = secondarySorts[sorts_module_1.SortDirection.getFullName(direction)];
	        return _.map(sortList, function (sort) {
	            return {
	                direction: sort.direction,
	                column: _this.lookupColumn(sort.column),
	            };
	        });
	    };
	    CardContainerController.prototype.updateVisualColumnSorting = function () {
	        var _this = this;
	        _.each(this.dataSource.sorts, function (sort, index) {
	            // Only first sort should have visible direction
	            if (index === 0) {
	                _this.updateVisualSortIndicator(sort);
	            }
	            else {
	                _this.clearVisualSortIndicator(sort);
	            }
	        });
	    };
	    CardContainerController.prototype.updateVisualSortIndicator = function (sort) {
	        sort.column.sortDirection = sort.direction;
	    };
	    CardContainerController.prototype.clearVisualSortIndicator = function (sort) {
	        sort.column.sortDirection = null;
	    };
	    CardContainerController.$inject = ['$scope', '$attrs', '$transclude', __object.serviceName, __array.serviceName, dataSources_module_1.dataPager.factoryName, __parentChild.serviceName];
	    return CardContainerController;
	}());
	exports.CardContainerController = CardContainerController;
	exports.cardContainer = {
	    transclude: {
	        'containerHeaderSlot': '?rlContainerHeader',
	        'containerFooterSlot': '?rlContainerFooter',
	        'contentSlot': '?rlCardContent',
	        'footerSlot': '?rlCardFooter',
	    },
	    template: __webpack_require__(100),
	    controller: exports.controllerName,
	    controllerAs: 'cardContainer',
	    bindings: {
	        builder: '=?',
	        cardController: '@',
	        cardControllerAs: '@',
	        cardAs: '@',
	        selectionChangedEvent: '&selectionChanged',
	    }
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyZENvbnRhaW5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNhcmRDb250YWluZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMERBQTBEO0FBQzFELCtEQUErRDtBQUUvRCxZQUFZLENBQUM7QUFHYixJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1Qiw2Q0FBa0MsOEJBQThCLENBQUMsQ0FBQTtBQUNqRSxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUNsQyxJQUFPLE9BQU8sR0FBRyx1Q0FBUSxDQUFDLEtBQUssQ0FBQztBQUNoQyxJQUFPLGFBQWEsR0FBRyx1Q0FBUSxDQUFDLG1CQUFtQixDQUFDO0FBSXBELG1DQUF1QyxrQ0FBa0MsQ0FBQyxDQUFBO0FBRTFFLDZCQUFvRSxzQkFBc0IsQ0FBQyxDQUFBO0FBRTNGLDJCQUErQix1Q0FBdUMsQ0FBQyxDQUFBO0FBSTVELHFCQUFhLEdBQVcsaUJBQWlCLENBQUM7QUFDMUMsc0JBQWMsR0FBVyx5QkFBeUIsQ0FBQztBQUVuRCw2QkFBcUIsR0FBVyxDQUFDLENBQUM7QUFDbEMsNkJBQXFCLEdBQVcsYUFBYSxDQUFDO0FBNkR6RDtJQWdDQyxpQ0FBb0IsTUFBMkIsRUFDM0MsTUFBMkIsRUFDM0IsV0FBd0MsRUFDaEMsTUFBK0IsRUFDL0IsS0FBNEIsRUFDNUIsZ0JBQTZDLEVBQzdDLFdBQXNEO1FBdENuRSxpQkFxUkM7UUFyUG9CLFdBQU0sR0FBTixNQUFNLENBQXFCO1FBR25DLFdBQU0sR0FBTixNQUFNLENBQXlCO1FBQy9CLFVBQUssR0FBTCxLQUFLLENBQXVCO1FBQzVCLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBNkI7UUFDN0MsZ0JBQVcsR0FBWCxXQUFXLENBQTJDO1FBZGxFLG1CQUFjLEdBQVcsQ0FBQyxDQUFDO1FBOEtuQixnQkFBVyxHQUFlO1lBQ2pDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVB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

/***/ },
/* 100 */
/***/ function(module, exports) {

	module.exports = "<div class=\"row\">\r\n\t<div class=\"col-md-3 col-xs-12\" ng-if=\"cardContainer.renderFilters\">\r\n\t\t<rl-card-container-filters filters=\"cardContainer.filters\" source=\"cardContainer.dataSource\"></rl-card-container-filters>\r\n\t</div>\r\n\t<div class=\"col-xs-12\" ng-class=\"{ 'col-md-9': cardContainer.renderFilters }\">\r\n\t\t<div class=\"card-container\">\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\"card-container-header\">\r\n\t\t\t\t\t<div ng-transclude=\"containerHeaderSlot\">\r\n\t\t\t\t\t\t<rl-default-card-container-header></rl-default-card-container-header>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<rl-generic-container selector=\"cardContainer.selectableCards\">\r\n\t\t\t\t\t<template when-selector=\"false\" default>\r\n\t\t\t\t\t\t<div class=\"card-columns-header\">\r\n\t\t\t\t\t\t\t<div ng-repeat=\"column in cardContainer.columns\">\r\n\t\t\t\t\t\t\t\t<rl-column-header sort=\"cardContainer.sort(column)\" sorting=\"column.sortDirection\" column=\"column\"></rl-column-header>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"clearfix\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t\t<template when-selector=\"true\">\r\n\t\t\t\t\t\t<div class=\"card-columns-header\">\r\n\t\t\t\t\t\t\t<div class=\"select-group\">\r\n\t\t\t\t\t\t\t\t<div class=\"select-column\">\r\n\t\t\t\t\t\t\t\t\t<i class=\"fa fa-check\" style=\"margin-left: 6px; cursor: pointer\" ng-click=\"cardContainer.sortSelected()\"></i>\r\n\t\t\t\t\t\t\t\t\t<i ng-show=\"cardContainer.sortColumn.sortDirection === cardContainer.sortDirection.ascending\" class=\"fa fa-sort-asc\"></i>\r\n\t\t\t\t\t\t\t\t\t<i ng-show=\"cardContainer.sortColumn.sortDirection === cardContainer.sortDirection.descending\" class=\"fa fa-sort-desc\"></i>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"select-content\">\r\n\t\t\t\t\t\t\t\t\t<div ng-repeat=\"column in cardContainer.columns\">\r\n\t\t\t\t\t\t\t\t\t\t<rl-column-header sort=\"cardContainer.sort(column)\" sorting=\"column.sortDirection\" column=\"column\"></rl-column-header>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div class=\"clearfix\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</rl-generic-container>\r\n\r\n\t\t\t\t<div ng-if=\"cardContainer.dataSource.dataSet | isEmpty:false\">\r\n\t\t\t\t\t<div class=\"card-item-repeat\" ng-repeat=\"card in cardContainer.dataSource.dataSet\">\r\n\t\t\t\t\t\t<rl-card columns=\"cardContainer.columns\" item=\"card\"\r\n\t\t\t\t\t\t\t\tclickable=\"cardContainer.clickableCards\"\r\n\t\t\t\t\t\t\t\tselectable=\"cardContainer.selectableCards\"\r\n\t\t\t\t\t\t\t\tselection-changed=\"cardContainer.selectionChanged()\"\r\n\t\t\t\t\t\t\t\tcontainer-data=\"cardContainer.containerData\"\r\n\t\t\t\t\t\t\t\tsource=\"cardContainer.dataSource\"\r\n\t\t\t\t\t\t\t\tpermanent-footer=\"cardContainer.permanentFooters\"\r\n\t\t\t\t\t\t\t\tcard-controller=\"cardContainer.cardController\"\r\n\t\t\t\t\t\t\t\tcard-controller-as=\"cardContainer.cardControllerAs\"\r\n\t\t\t\t\t\t\t\tcard-as=\"cardContainer.cardAs\"\r\n\t\t\t\t\t\t\t\tsave-when-invalid=\"cardContainer.saveWhenInvalid\"></rl-card>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div ng-if=\"cardContainer.dataSource.needsRefinedSearch\">\r\n\t\t\t\t\tPlease refine your search results\r\n\t\t\t\t</div>\r\n\t\t\t\t<div ng-if=\"cardContainer.dataSource.isEmpty\">\r\n\t\t\t\t\tThere are no items to show\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<rl-busy loading=\"cardContainer.dataSource.loadingDataSet\" size=\"2x\"></rl-busy>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"card-container-footer\">\r\n\t\t\t\t\t<div ng-transclude=\"containerFooterSlot\">\r\n\t\t\t\t\t\t<rl-default-card-container-footer></rl-default-card-container-footer>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>"

/***/ },
/* 101 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __genericSearchFilter = typescript_angular_utilities_1.services.genericSearchFilter;
	var dataSources = __webpack_require__(55);
	var filterGroup = __webpack_require__(77);
	var selectFilter = __webpack_require__(85);
	var dateFilter = __webpack_require__(72);
	var columnSearchFilter_service_1 = __webpack_require__(71);
	exports.factoryName = 'cardContainerBuilder';
	var CardContainerBuilder = (function () {
	    function CardContainerBuilder($injector) {
	        this.$injector = $injector;
	        this.dataSource = new DataSourceBuilder($injector, this);
	        this.filters = new FilterBuilder($injector, this);
	        this._columns = [];
	    }
	    CardContainerBuilder.prototype.useSearch = function (tokenized) {
	        var factory = this.$injector.get(__genericSearchFilter.factoryName);
	        this._searchFilter = factory.getInstance(tokenized);
	        return this._searchFilter;
	    };
	    CardContainerBuilder.prototype.searchFilter = function (filter) {
	        this._searchFilter = filter;
	        return this._searchFilter;
	    };
	    CardContainerBuilder.prototype.usePaging = function () {
	        this._paging = true;
	    };
	    CardContainerBuilder.prototype.addColumn = function (column) {
	        this._columns.push(column);
	    };
	    CardContainerBuilder.prototype.useClickableCards = function () {
	        this._clickableCards = true;
	    };
	    CardContainerBuilder.prototype.usePermanentFooters = function () {
	        this._permanentFooters = true;
	    };
	    CardContainerBuilder.prototype.useSelection = function () {
	        this._selectableCards = true;
	    };
	    CardContainerBuilder.prototype.renderFilters = function () {
	        this._renderFilters = true;
	    };
	    CardContainerBuilder.prototype.saveWhenInvalid = function () {
	        this._saveWhenInvalid = true;
	    };
	    Object.defineProperty(CardContainerBuilder.prototype, "disableSelection", {
	        set: function (value) {
	            if (!this._selectableCards) {
	                this.useSelection();
	            }
	            this._disableSelection = value;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CardContainerBuilder.prototype.setCardContainerProperties = function (cardContainer) {
	        if (this._searchFilter != null) {
	            this._filters.push(this._searchFilter);
	        }
	        cardContainer.source = this._dataSource;
	        cardContainer.filters = this._filters;
	        cardContainer.searchFilter = this._searchFilter;
	        cardContainer.paging = this._paging;
	        cardContainer.columns = this._columns;
	        cardContainer.containerData = this.containerData;
	        cardContainer.clickableCards = this._clickableCards;
	        cardContainer.maxColumnSorts = this.maxColumnSorts;
	        cardContainer.permanentFooters = this._permanentFooters;
	        cardContainer.selectableCards = this._selectableCards;
	        cardContainer.disableSelection = this._disableSelection;
	        cardContainer.renderFilters = this._renderFilters;
	        cardContainer.saveWhenInvalid = this._saveWhenInvalid;
	        if (cardContainer.cardController == null) {
	            cardContainer.cardController = this.cardController;
	        }
	        if (cardContainer.cardControllerAs == null) {
	            cardContainer.cardControllerAs = this.cardControllerAs;
	        }
	        if (cardContainer.cardAs == null) {
	            cardContainer.cardAs = this.cardAs;
	        }
	    };
	    return CardContainerBuilder;
	}());
	exports.CardContainerBuilder = CardContainerBuilder;
	var DataSourceBuilder = (function () {
	    function DataSourceBuilder($injector, parent) {
	        this.$injector = $injector;
	        this.parent = parent;
	        var factory = this.$injector.get(dataSources.simpleDataSource.factoryName);
	        parent._dataSource = factory.getInstance([]);
	    }
	    DataSourceBuilder.prototype.buildSimpleDataSource = function (data) {
	        var factory = this.$injector.get(dataSources.simpleDataSource.factoryName);
	        this.parent._dataSource = factory.getInstance(data);
	        return this.parent._dataSource;
	    };
	    DataSourceBuilder.prototype.buildDataServiceDataSource = function (getDataSet) {
	        var factory = this.$injector.get(dataSources.dataServiceDataSource.factoryName);
	        this.parent._dataSource = factory.getInstance(getDataSet);
	        return this.parent._dataSource;
	    };
	    DataSourceBuilder.prototype.buildClientServerDataSource = function (getDataSet, getFilterModel, validateModel) {
	        if (_.isUndefined(this.parent._searchFilter)) {
	            this.parent.useSearch();
	        }
	        var factory = this.$injector.get(dataSources.clientServerDataSource.factoryName);
	        this.parent._dataSource = factory.getInstance(getDataSet, this.parent._searchFilter, getFilterModel, validateModel);
	        return this.parent._dataSource;
	    };
	    DataSourceBuilder.prototype.buildServerSideDataSource = function (getDataSet) {
	        var factory = this.$injector.get(dataSources.serverSideDataSource.factoryName);
	        this.parent._dataSource = factory.getInstance(getDataSet);
	        return this.parent._dataSource;
	    };
	    DataSourceBuilder.prototype.buildSmartDataSource = function (getDataSet) {
	        var factory = this.$injector.get(dataSources.smartDataSource.factoryName);
	        this.parent._dataSource = factory.getInstance(getDataSet);
	        return this.parent._dataSource;
	    };
	    DataSourceBuilder.prototype.buildCustomDataSource = function (dataSource) {
	        this.parent._dataSource = dataSource;
	        return this.parent._dataSource;
	    };
	    return DataSourceBuilder;
	}());
	exports.DataSourceBuilder = DataSourceBuilder;
	var FilterBuilder = (function () {
	    function FilterBuilder($injector, parent) {
	        this.$injector = $injector;
	        this.parent = parent;
	        this.parent._filters = [];
	    }
	    FilterBuilder.prototype.buildFilterGroup = function (settings) {
	        var factory = this.$injector.get(filterGroup.factoryName);
	        var filter = factory.getInstance(settings);
	        this.parent._filters.push(filter);
	        return filter;
	    };
	    FilterBuilder.prototype.buildModeFilterGroup = function (settings) {
	        var factory = this.$injector.get(filterGroup.modeFilterGroup.factoryName);
	        var filter = factory.getInstance(settings);
	        this.parent._filters.push(filter);
	        return filter;
	    };
	    FilterBuilder.prototype.buildRangeFilterGroup = function (settings) {
	        var factory = this.$injector.get(filterGroup.rangeFilterGroup.factoryName);
	        var filter = factory.getInstance(settings);
	        this.parent._filters.push(filter);
	        return filter;
	    };
	    FilterBuilder.prototype.buildSelectFilter = function (settings) {
	        var factory = this.$injector.get(selectFilter.factoryName);
	        var filter = factory.getInstance(settings);
	        this.parent._filters.push(filter);
	        return filter;
	    };
	    FilterBuilder.prototype.buildDateFilter = function (settings) {
	        var factory = this.$injector.get(dateFilter.factoryName);
	        var filter = factory.getInstance(settings);
	        this.parent._filters.push(filter);
	        return filter;
	    };
	    FilterBuilder.prototype.buildColumnSearchFilter = function () {
	        var factory = this.$injector.get(columnSearchFilter_service_1.factoryName);
	        var filter = factory.getInstance();
	        this.parent._filters.push(filter);
	        return filter;
	    };
	    FilterBuilder.prototype.addCustomFilter = function (filter) {
	        this.parent._filters.push(filter);
	    };
	    return FilterBuilder;
	}());
	exports.FilterBuilder = FilterBuilder;
	cardContainerBuilderFactory.$inject = ['$injector'];
	function cardContainerBuilderFactory($injector) {
	    return {
	        useMock: false,
	        getInstance: function () {
	            return this.useMock ? this.mockBuilder : new CardContainerBuilder($injector);
	        },
	        mockBuilder: new CardContainerBuilder($injector),
	    };
	}
	exports.cardContainerBuilderFactory = cardContainerBuilderFactory;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FyZENvbnRhaW5lckJ1aWxkZXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImNhcmRDb250YWluZXJCdWlsZGVyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBR2IsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQWtDLDhCQUE4QixDQUFDLENBQUE7QUFDakUsSUFBTyxxQkFBcUIsR0FBRyx1Q0FBUSxDQUFDLG1CQUFtQixDQUFDO0FBSTVELElBQVksV0FBVyxXQUFNLGtDQUFrQyxDQUFDLENBQUE7QUFDaEUsSUFBWSxXQUFXLFdBQU0sMENBQTBDLENBQUMsQ0FBQTtBQUN4RSxJQUFZLFlBQVksV0FBTSw0Q0FBNEMsQ0FBQyxDQUFBO0FBQzNFLElBQVksVUFBVSxXQUFNLHdDQUF3QyxDQUFDLENBQUE7QUFDckUsMkNBQXdHLHlEQUF5RCxDQUFDLENBQUE7QUF3QnZKLG1CQUFXLEdBQVcsc0JBQXNCLENBQUM7QUFxRXhEO0lBdUJDLDhCQUFvQixTQUF3QztRQUF4QyxjQUFTLEdBQVQsU0FBUyxDQUErQjtRQUMzRCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksaUJBQWlCLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3pELElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxhQUFhLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ2xELElBQUksQ0FBQyxRQUFRLEdBQUcsRUFBRSxDQUFDO0lBQ3BCLENBQUM7SUFFRCx3Q0FBUyxHQUFULFVBQVUsU0FBbUI7UUFDNUIsSUFBSSxPQUFPLEdBQXNELElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFNLHFCQUFxQixDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzVILElBQUksQ0FBQyxhQUFhLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNwRCxNQUFNLENBQUMsSUFBSSxD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

/***/ },
/* 102 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/node/node.d.ts' />
	'use strict';
	exports.headerComponentName = 'rlDefaultCardContainerHeader';
	exports.footerComponentName = 'rlDefaultCardContainerFooter';
	exports.defaultContainerHeader = {
	    template: __webpack_require__(103),
	};
	exports.defaultContainerFooter = {
	    template: __webpack_require__(104),
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVmYXVsdENvbXBvbmVudHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkZWZhdWx0Q29tcG9uZW50cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwyREFBMkQ7QUFFM0QsWUFBWSxDQUFDO0FBSUYsMkJBQW1CLEdBQVcsOEJBQThCLENBQUM7QUFDN0QsMkJBQW1CLEdBQVcsOEJBQThCLENBQUM7QUFFN0QsOEJBQXNCLEdBQThCO0lBQzlELFFBQVEsRUFBRSxPQUFPLENBQUMsbUNBQW1DLENBQUM7Q0FDdEQsQ0FBQztBQUVTLDhCQUFzQixHQUE4QjtJQUM5RCxRQUFRLEVBQUUsT0FBTyxDQUFDLG1DQUFtQyxDQUFDO0NBQ3RELENBQUMifQ==

/***/ },
/* 103 */
/***/ function(module, exports) {

	module.exports = "<div class=\"row\">\r\n\t<div class=\"col-xs-12 col-sm-9\">\r\n\t\t<rl-card-search></rl-card-search>\r\n\t</div>\r\n\t<div class=\"hidden-xs col-sm-3\">\r\n\t\t<rl-page-size></rl-page-size>\r\n\t</div>\r\n</div>\r\n"

/***/ },
/* 104 */
/***/ function(module, exports) {

	module.exports = "<div class=\"row\">\r\n\t<div ng-if=\"!cardContainer.selectableCards\" class=\"col-sm-6\">\r\n\t\t<rl-item-count></rl-item-count>\r\n\t</div>\r\n\t<span ng-if=\"cardContainer.selectableCards\">\r\n\t\t<div class=\"col-sm-3\">\r\n\t\t\t<rl-selection-control></rl-selection-control>\r\n\t\t</div>\r\n\t\t<div class=\"col-sm-3\">\r\n\t\t\t<rl-item-count></rl-item-count>\r\n\t\t</div>\r\n\t</span>\r\n\t<div class=\"col-sm-6\">\r\n\t\t<rl-pager class=\"pull-right\"></rl-pager>\r\n\t</div>\r\n</div>\r\n"

/***/ },
/* 105 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	__webpack_require__(106);
	var angular = __webpack_require__(1);
	var componentsDefaultTheme_1 = __webpack_require__(30);
	exports.moduleName = 'rl.ui.components.checkbox';
	exports.componentName = 'rlCheckbox';
	exports.controllerName = 'CheckboxController';
	var CheckboxController = (function () {
	    function CheckboxController(useDefaultTheme) {
	        this.useDefaultTheme = useDefaultTheme;
	    }
	    Object.defineProperty(CheckboxController.prototype, "checked", {
	        get: function () {
	            return this.ngModel.$viewValue;
	        },
	        set: function (value) {
	            this.ngModel.$setViewValue(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    CheckboxController.prototype.toggle = function () {
	        if (this.active && !this.ngDisabled) {
	            this.checked = !this.checked;
	            this.onToggle({ value: this.checked });
	        }
	    };
	    CheckboxController.prototype.$onInit = function () {
	        this.active = this.active != null ? this.active : true;
	    };
	    CheckboxController.$inject = [componentsDefaultTheme_1.defaultThemeValueName];
	    return CheckboxController;
	}());
	exports.CheckboxController = CheckboxController;
	exports.checkbox = {
	    require: { ngModel: 'ngModel' },
	    transclude: true,
	    template: __webpack_require__(108),
	    controller: exports.controllerName,
	    controllerAs: 'checkbox',
	    bindings: {
	        ngDisabled: '<?',
	        active: '<?',
	        onToggle: '&',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, exports.checkbox)
	    .controller(exports.controllerName, CheckboxController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hlY2tib3guanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjaGVja2JveC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwwREFBMEQ7QUFFMUQsWUFBWSxDQUFDO0FBRWIsUUFBTyxnQkFBZ0IsQ0FBQyxDQUFBO0FBRXhCLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLHVDQUFzQywyQkFBMkIsQ0FBQyxDQUFBO0FBRXZELGtCQUFVLEdBQVcsMkJBQTJCLENBQUM7QUFDakQscUJBQWEsR0FBVyxZQUFZLENBQUM7QUFDckMsc0JBQWMsR0FBVyxvQkFBb0IsQ0FBQztBQVl6RDtJQXdCQyw0QkFBbUIsZUFBd0I7UUFBeEIsb0JBQWUsR0FBZixlQUFlLENBQVM7SUFBRyxDQUFDO0lBaEIvQyxzQkFBSSx1Q0FBTzthQUFYO1lBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ2hDLENBQUM7YUFFRCxVQUFZLEtBQWM7WUFDekIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQzs7O09BSkE7SUFNRCxtQ0FBTSxHQUFOO1FBQ0MsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQzdCLElBQUksQ0FBQyxRQUFRLENBQUMsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDeEMsQ0FBQztJQUNGLENBQUM7SUFLRCxvQ0FBTyxHQUFQO1FBQ0MsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsTUFBTSxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztJQUN4RCxDQUFDO0lBTE0sMEJBQU8sR0FBYSxDQUFDLDhDQUFxQixDQUFDLENBQUM7SUFNcEQseUJBQUM7QUFBRCxDQUFDLEFBN0JELElBNkJDO0FBN0JZLDBCQUFrQixxQkE2QjlCLENBQUE7QUFFVSxnQkFBUSxHQUE4QjtJQUNoRCxPQUFPLEVBQUUsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFO0lBQy9CLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFFBQVEsRUFBRSxPQUFPLENBQUMsaUJBQWlCLENBQUM7SUFDcEMsVUFBVSxFQUFFLHNCQUFjO0lBQzFCLFlBQVksRUFBRSxVQUFVO0lBQ3hCLFFBQVEsRUFBRTtRQUNULFVBQVUsRUFBRSxJQUFJO1FBQ2hCLE1BQU0sRUFBRSxJQUFJO1FBQ1osUUFBUSxFQUFFLEdBQUc7S0FDYjtDQUNELENBQUM7QUFFRixPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLGdCQUFRLENBQUM7S0FDbEMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyJ9

/***/ },
/* 106 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(107);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../../node_modules/css-loader/index.js!./checkbox.css", function() {
				var newContent = require("!!./../../../node_modules/css-loader/index.js!./checkbox.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 107 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, ".rl-checkbox.default-theme:before {\r\n\tfont-family: FontAwesome;\r\n\tcontent: \"\\F096\"; /*fa-square-o*/\r\n\tfont-size: 1.5em;\r\n\tposition: relative;\r\n\ttop: .05em;\r\n}\r\n\r\n.rl-checkbox-checked.default-theme:before {\r\n\tfont-family: FontAwesome;\r\n\tcontent: \"\\F046\"; /*fa-check-square-o*/\r\n\tfont-size: 1.4em;\r\n}\r\n\r\n.disabled.default-theme:before {\r\n\tcursor: not-allowed;\r\n}", ""]);
	
	// exports


/***/ },
/* 108 */
/***/ function(module, exports) {

	module.exports = "<span ng-click=\"checkbox.toggle()\" ng-transclude\r\n\t  ng-class=\"{ 'rl-checkbox': !checkbox.checked\r\n\t  , 'rl-checkbox-checked': checkbox.checked\r\n\t  , 'disabled': checkbox.ngDisabled\r\n\t  , 'default-theme': checkbox.useDefaultTheme }\"></span>"

/***/ },
/* 109 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	exports.moduleName = 'rl.ui.components.commaList';
	exports.componentName = 'rlCommaList';
	exports.controllerName = 'CommaListController';
	var CommaListController = (function () {
	    function CommaListController(object) {
	        this.remainingItems = 0;
	        this.list = this.getFirstItems(this.inList);
	    }
	    CommaListController.prototype.getFirstItems = function (list) {
	        var _this = this;
	        if (this.transform != null) {
	            list = _.map(list, function (item) {
	                return __transform.getValue(item, _this.transform);
	            });
	        }
	        ;
	        var newList;
	        if (this.max != null) {
	            newList = _.take(list, this.max);
	            this.remainingItems = list.length - this.max;
	        }
	        else {
	            newList = _.clone(list);
	        }
	        return newList;
	    };
	    CommaListController.$inject = [__object.serviceName];
	    return CommaListController;
	}());
	exports.CommaListController = CommaListController;
	var commaList = {
	    template: "\n\t\t<span>\n\t\t\t<span ng-repeat=\"item in commaList.list track by $index\">\n\t\t\t\t<span>{{item}}</span><span ng-hide=\"$last\">, </span>\n\t\t\t</span>\n\t\t\t<span ng-show=\"commaList.remainingItems > 0\">... {{commaList.remainingItems}} more items</span>\n\t\t</span>\n\t",
	    controller: exports.controllerName,
	    controllerAs: 'commaList',
	    bindings: {
	        inList: '<list',
	        max: '<?',
	        transform: '<?',
	    },
	};
	angular.module(exports.moduleName, [__object.moduleName])
	    .component(exports.componentName, commaList)
	    .controller(exports.controllerName, CommaListController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWFMaXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiY29tbWFMaXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBRXhELElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBQ2xDLElBQU8sV0FBVyxHQUFHLHVDQUFRLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztBQUV2QyxrQkFBVSxHQUFXLDRCQUE0QixDQUFDO0FBQ2xELHFCQUFhLEdBQVcsYUFBYSxDQUFDO0FBQ3RDLHNCQUFjLEdBQVcscUJBQXFCLENBQUM7QUFFMUQ7SUFRQyw2QkFBWSxNQUErQjtRQUgzQyxtQkFBYyxHQUFXLENBQUMsQ0FBQztRQUkxQixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFTywyQ0FBYSxHQUFyQixVQUFzQixJQUFXO1FBQWpDLGlCQWlCQztRQWhCQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDNUIsSUFBSSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLFVBQUMsSUFBUztnQkFDNUIsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEtBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUNuRCxDQUFDLENBQUMsQ0FBQztRQUNKLENBQUM7UUFBQSxDQUFDO1FBRUYsSUFBSSxPQUFjLENBQUM7UUFFbkIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLE9BQU8sR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFakMsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDOUMsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ1AsT0FBTyxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDekIsQ0FBQztRQUNELE1BQU0sQ0FBQyxPQUFPLENBQUM7SUFDaEIsQ0FBQztJQXRCTSwyQkFBTyxHQUFhLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBdUJuRCwwQkFBQztBQUFELENBQUMsQUE5QkQsSUE4QkM7QUE5QlksMkJBQW1CLHNCQThCL0IsQ0FBQTtBQUVELElBQUksU0FBUyxHQUE4QjtJQUMxQyxRQUFRLEVBQUUsMFJBT1Q7SUFDRCxVQUFVLEVBQUUsc0JBQWM7SUFDMUIsWUFBWSxFQUFFLFdBQVc7SUFDekIsUUFBUSxFQUFFO1FBQ1QsTUFBTSxFQUFFLE9BQU87UUFDZixHQUFHLEVBQUUsSUFBSTtRQUNULFNBQVMsRUFBRSxJQUFJO0tBQ2Y7Q0FDRCxDQUFDO0FBRUYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQy9DLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLFNBQVMsQ0FBQztLQUNuQyxVQUFVLENBQUMsc0JBQWMsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDIn0=

/***/ },
/* 110 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	// /// <reference path='../../../typings/bootstrapDateTimePicker.d.ts' />
	__webpack_require__(111);
	var angular = __webpack_require__(1);
	var moment = __webpack_require__(74);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __dateTimeFormatStrings = typescript_angular_utilities_1.services.date;
	var __object = typescript_angular_utilities_1.services.object;
	var __timezone = typescript_angular_utilities_1.services.timezone;
	var input_1 = __webpack_require__(115);
	var componentValidator_service_1 = __webpack_require__(116);
	exports.moduleName = 'rl.ui.components.dateTime';
	exports.componentName = 'rlDateTime';
	exports.controllerName = 'DateTimeController';
	var DateTimeController = (function (_super) {
	    __extends(DateTimeController, _super);
	    function DateTimeController($scope, $attrs, componentValidatorFactory, $element) {
	        _super.call(this, $scope, $attrs, componentValidatorFactory);
	        this.$element = $element;
	        this.inputType = 'date-time';
	        this.useDate = _.isUndefined(this.useDate) ? true : this.useDate;
	        this.useTime = _.isUndefined(this.useTime) ? true : this.useTime;
	    }
	    DateTimeController.prototype.onClearClick = function () {
	        this.ngModel.$setViewValue('');
	        this.onClearEvent();
	    };
	    DateTimeController.prototype.$postLink = function () {
	        var _this = this;
	        var defaults = this.$element.datetimepicker.defaults;
	        var min = this.min != null ? this.min : defaults.minDate;
	        var max = this.max != null ? this.max : defaults.maxDate;
	        this.ngModel.$formatters.push(function (value) {
	            if (value == null) {
	                _this.timezone = __timezone.timezoneService.currentTimezone;
	                return null;
	            }
	            var date = moment(value);
	            _this.timezone = __timezone.timezones.get(date.tz());
	            return date.format(_this.getFormatOrDefault());
	        });
	        this.ngModel.$parsers.push(function (value) {
	            return __timezone.timezoneService.buildMomentWithTimezone(value, _this.timezone, _this.getFormatOrDefault());
	        });
	        this.$scope.$watch(function () { return _this.ngModel.$modelValue; }, function (newValue) {
	            _this.validFormat = __object.objectUtility.isNullOrEmpty(newValue)
	                ? true
	                : moment(newValue).isValid();
	        });
	        this.$element.find('.show-date-picker').datetimepicker({
	            stepping: this.minuteStepping || 1,
	            format: this.getFormatOrDefault(),
	            direction: 'bottom',
	            elementHeight: 2,
	            pickDate: this.useDate,
	            pickTime: this.useTime,
	            minDate: min,
	            maxDate: max,
	        }).on('change.dp', function () {
	            var newValue = _this.$element.find('input').val();
	            _this.ngModel.$setViewValue(newValue);
	            _this.$scope.$apply();
	        });
	    };
	    DateTimeController.prototype.getFormatOrDefault = function () {
	        return this.format || this.defaultFormat(this.useDate, this.useTime);
	    };
	    DateTimeController.prototype.defaultFormat = function (hasDate, hasTime) {
	        if (hasDate && hasTime) {
	            return __dateTimeFormatStrings.defaultFormats.dateTimeFormat;
	        }
	        else if (hasDate) {
	            return __dateTimeFormatStrings.defaultFormats.dateFormat;
	        }
	        else if (hasTime) {
	            return __dateTimeFormatStrings.defaultFormats.timeFormat;
	        }
	        else {
	            // revert to default format
	            return false;
	        }
	    };
	    DateTimeController.$inject = ['$scope', '$attrs', componentValidator_service_1.factoryName, '$element'];
	    return DateTimeController;
	}(input_1.InputController));
	exports.DateTimeController = DateTimeController;
	var dateTime = input_1.buildInput({
	    template: __webpack_require__(117),
	    controller: exports.controllerName,
	    controllerAs: 'dateTime',
	    bindings: {
	        minuteStepping: '<?',
	        useDate: '<?',
	        useTime: '<?',
	        min: '<?',
	        max: '<?',
	        clearButton: '<?',
	        onClearEvent: '&',
	    },
	});
	angular.module(exports.moduleName, [typescript_angular_utilities_1.services.moment.moduleName, typescript_angular_utilities_1.services.date.moduleName, input_1.moduleName, __object.moduleName])
	    .component(exports.componentName, dateTime)
	    .controller(exports.controllerName, DateTimeController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZVRpbWUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRlVGltZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7OztBQUViLHlFQUF5RTtBQUV6RSxRQUFPLG1EQUFtRCxDQUFDLENBQUE7QUFFM0QsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxNQUFNLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFakMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFFeEQsSUFBTyx1QkFBdUIsR0FBRyx1Q0FBUSxDQUFDLElBQUksQ0FBQztBQUMvQyxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUNsQyxJQUFPLFVBQVUsR0FBRyx1Q0FBUSxDQUFDLFFBQVEsQ0FBQztBQUV0QyxzQkFBeUYsZ0JBQWdCLENBQUMsQ0FBQTtBQUMxRywyQ0FBeUYsOERBQThELENBQUMsQ0FBQTtBQUs3SSxrQkFBVSxHQUFXLDJCQUEyQixDQUFDO0FBQ2pELHFCQUFhLEdBQVcsWUFBWSxDQUFDO0FBQ3JDLHNCQUFjLEdBQVcsb0JBQW9CLENBQUM7QUF3QnpEO0lBQXdDLHNDQUFlO0lBb0J0RCw0QkFBWSxNQUFzQixFQUM5QixNQUF3QixFQUN4Qix5QkFBcUQsRUFDN0MsUUFBa0M7UUFDN0Msa0JBQU0sTUFBTSxFQUFFLE1BQU0sRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO1FBRHRDLGFBQVEsR0FBUixRQUFRLENBQTBCO1FBRzdDLElBQUksQ0FBQyxTQUFTLEdBQUcsV0FBVyxDQUFDO1FBRTdCLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDakUsSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUMsV0FBVyxD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

/***/ },
/* 111 */
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(112);
	__webpack_require__(114);

/***/ },
/* 112 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(113);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../node_modules/css-loader/index.js!./bootstrap-datetimepicker.css", function() {
				var newContent = require("!!./../../node_modules/css-loader/index.js!./bootstrap-datetimepicker.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 113 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, "/*!\r\n * Datetimepicker for Bootstrap v3\r\n//! version : 3.1.3\r\n * https://github.com/Eonasdan/bootstrap-datetimepicker/\r\n */\r\n.bootstrap-datetimepicker-widget {\r\n  top: 0;\r\n  left: 0;\r\n  width: 250px;\r\n  padding: 4px;\r\n  margin-top: 1px;\r\n  z-index: 99999 !important;\r\n  border-radius: 4px;\r\n}\r\n.bootstrap-datetimepicker-widget.timepicker-sbs {\r\n  width: 600px;\r\n}\r\n.bootstrap-datetimepicker-widget.bottom:before {\r\n  content: '';\r\n  display: inline-block;\r\n  border-left: 7px solid transparent;\r\n  border-right: 7px solid transparent;\r\n  border-bottom: 7px solid #ccc;\r\n  border-bottom-color: rgba(0, 0, 0, 0.2);\r\n  position: absolute;\r\n  top: -7px;\r\n  left: 7px;\r\n}\r\n.bootstrap-datetimepicker-widget.bottom:after {\r\n  content: '';\r\n  display: inline-block;\r\n  border-left: 6px solid transparent;\r\n  border-right: 6px solid transparent;\r\n  border-bottom: 6px solid white;\r\n  position: absolute;\r\n  top: -6px;\r\n  left: 8px;\r\n}\r\n.bootstrap-datetimepicker-widget.top:before {\r\n  content: '';\r\n  display: inline-block;\r\n  border-left: 7px solid transparent;\r\n  border-right: 7px solid transparent;\r\n  border-top: 7px solid #ccc;\r\n  border-top-color: rgba(0, 0, 0, 0.2);\r\n  position: absolute;\r\n  bottom: -7px;\r\n  left: 6px;\r\n}\r\n.bootstrap-datetimepicker-widget.top:after {\r\n  content: '';\r\n  display: inline-block;\r\n  border-left: 6px solid transparent;\r\n  border-right: 6px solid transparent;\r\n  border-top: 6px solid white;\r\n  position: absolute;\r\n  bottom: -6px;\r\n  left: 7px;\r\n}\r\n.bootstrap-datetimepicker-widget .dow {\r\n  width: 14.2857%;\r\n}\r\n.bootstrap-datetimepicker-widget.pull-right:before {\r\n  left: auto;\r\n  right: 6px;\r\n}\r\n.bootstrap-datetimepicker-widget.pull-right:after {\r\n  left: auto;\r\n  right: 7px;\r\n}\r\n.bootstrap-datetimepicker-widget > ul {\r\n  list-style-type: none;\r\n  margin: 0;\r\n}\r\n.bootstrap-datetimepicker-widget a[data-action] {\r\n  padding: 0;\r\n}\r\n.bootstrap-datetimepicker-widget a[data-action]:active {\r\n  box-shadow: none;\r\n}\r\n.bootstrap-datetimepicker-widget .timepicker {\r\n  margin: 0 4px 4px 4px;\r\n}\r\n.bootstrap-datetimepicker-widget .timepicker-hour,\r\n.bootstrap-datetimepicker-widget .timepicker-minute,\r\n.bootstrap-datetimepicker-widget .timepicker-second {\r\n  width: 54px;\r\n  font-weight: bold;\r\n  font-size: 1.2em;\r\n  margin-top: 4px;\r\n}\r\n.bootstrap-datetimepicker-widget button[data-action] {\r\n  padding: 6px;\r\n}\r\n.bootstrap-datetimepicker-widget table[data-hour-format=\"12\"] .separator {\r\n  width: 4px;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n.bootstrap-datetimepicker-widget .datepicker > div {\r\n  display: none;\r\n}\r\n.bootstrap-datetimepicker-widget .picker-switch {\r\n  text-align: center;\r\n}\r\n.bootstrap-datetimepicker-widget table {\r\n  width: 100%;\r\n  margin: 0;\r\n}\r\n.bootstrap-datetimepicker-widget td,\r\n.bootstrap-datetimepicker-widget th {\r\n  text-align: center;\r\n  border-radius: 4px;\r\n}\r\n.bootstrap-datetimepicker-widget td {\r\n  height: 25px;\r\n  line-height: 25px;\r\n  width: 54px;\r\n}\r\n.bootstrap-datetimepicker-widget td.cw {\r\n  font-size: 10px;\r\n  height: 20px;\r\n  line-height: 20px;\r\n  color: #777777;\r\n}\r\n.bootstrap-datetimepicker-widget td.day {\r\n  height: 20px;\r\n  line-height: 20px;\r\n  width: 20px;\r\n}\r\n.bootstrap-datetimepicker-widget td.day:hover,\r\n.bootstrap-datetimepicker-widget td.hour:hover,\r\n.bootstrap-datetimepicker-widget td.minute:hover,\r\n.bootstrap-datetimepicker-widget td.second:hover {\r\n  background: #eeeeee;\r\n  cursor: pointer;\r\n}\r\n.bootstrap-datetimepicker-widget td.old,\r\n.bootstrap-datetimepicker-widget td.new {\r\n  color: #777777;\r\n}\r\n.bootstrap-datetimepicker-widget td.today {\r\n  position: relative;\r\n}\r\n.bootstrap-datetimepicker-widget td.today:before {\r\n  content: '';\r\n  display: inline-block;\r\n  border-left: 7px solid transparent;\r\n  border-bottom: 7px solid #428bca;\r\n  border-top-color: rgba(0, 0, 0, 0.2);\r\n  position: absolute;\r\n  bottom: 4px;\r\n  right: 4px;\r\n}\r\n.bootstrap-datetimepicker-widget td.active,\r\n.bootstrap-datetimepicker-widget td.active:hover {\r\n  background-color: #428bca;\r\n  color: #ffffff;\r\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);\r\n}\r\n.bootstrap-datetimepicker-widget td.active.today:before {\r\n  border-bottom-color: #fff;\r\n}\r\n.bootstrap-datetimepicker-widget td.disabled,\r\n.bootstrap-datetimepicker-widget td.disabled:hover {\r\n  background: none;\r\n  color: #777777;\r\n  cursor: not-allowed;\r\n}\r\n.bootstrap-datetimepicker-widget td span {\r\n  display: inline-block;\r\n  width: 54px;\r\n  height: 25px;\r\n  line-height: 25px;\r\n  margin: 0px 1.5px;\r\n  cursor: pointer;\r\n  border-radius: 4px;\r\n}\r\n.bootstrap-datetimepicker-widget td span:hover {\r\n  background: #eeeeee;\r\n}\r\n.bootstrap-datetimepicker-widget td span.active {\r\n  background-color: #428bca;\r\n  color: #ffffff;\r\n  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);\r\n}\r\n.bootstrap-datetimepicker-widget td span.old {\r\n  color: #777777;\r\n}\r\n.bootstrap-datetimepicker-widget td span.disabled,\r\n.bootstrap-datetimepicker-widget td span.disabled:hover {\r\n  background: none;\r\n  color: #777777;\r\n  cursor: not-allowed;\r\n}\r\n.bootstrap-datetimepicker-widget th {\r\n  height: 20px;\r\n  line-height: 20px;\r\n  width: 20px;\r\n}\r\n.bootstrap-datetimepicker-widget th.picker-switch {\r\n  width: 145px;\r\n}\r\n.bootstrap-datetimepicker-widget th.next,\r\n.bootstrap-datetimepicker-widget th.prev {\r\n  font-size: 21px;\r\n}\r\n.bootstrap-datetimepicker-widget th.disabled,\r\n.bootstrap-datetimepicker-widget th.disabled:hover {\r\n  background: none;\r\n  color: #777777;\r\n  cursor: not-allowed;\r\n}\r\n.bootstrap-datetimepicker-widget thead tr:first-child th {\r\n  cursor: pointer;\r\n}\r\n.bootstrap-datetimepicker-widget thead tr:first-child th:hover {\r\n  background: #eeeeee;\r\n}\r\n.input-group.date .input-group-addon span {\r\n  display: block;\r\n  cursor: pointer;\r\n  width: 16px;\r\n  height: 16px;\r\n}\r\n.bootstrap-datetimepicker-widget.left-oriented:before {\r\n  left: auto;\r\n  right: 6px;\r\n}\r\n.bootstrap-datetimepicker-widget.left-oriented:after {\r\n  left: auto;\r\n  right: 7px;\r\n}\r\n.bootstrap-datetimepicker-widget ul.list-unstyled li div.timepicker div.timepicker-picker table.table-condensed tbody > tr > td {\r\n  padding: 0px !important;\r\n}\r\n@media screen and (max-width: 767px) {\r\n  .bootstrap-datetimepicker-widget.timepicker-sbs {\r\n    width: 283px;\r\n  }\r\n}\r\n", ""]);
	
	// exports


/***/ },
/* 114 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*
	//! version : 3.1.3
	=========================================================
	bootstrap-datetimepicker.js
	https://github.com/Eonasdan/bootstrap-datetimepicker
	=========================================================
	The MIT License (MIT)
	
	Copyright (c) 2014 Jonathan Peterson
	
	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:
	
	The above copyright notice and this permission notice shall be included in
	all copies or substantial portions of the Software.
	
	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
	THE SOFTWARE.
	*/
	; (function (root, factory) {
		'use strict';
		if (true) {
			// AMD is used - Register as an anonymous module.
			!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(12), __webpack_require__(74)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
		} else if (typeof exports === 'object') {
			factory(require('jquery'), require('moment'));
		}
		else {
			// Neither AMD or CommonJS used. Use global variables.
			if (!jQuery) {
				throw new Error('bootstrap-datetimepicker requires jQuery to be loaded first');
			}
			if (!moment) {
				throw new Error('bootstrap-datetimepicker requires moment.js to be loaded first');
			}
			factory(root.jQuery, moment);
		}
	}(this, function ($, moment) {
		'use strict';
		if (typeof moment === 'undefined') {
			throw new Error('momentjs is required');
		}
	
		var dpgId = 0,
	
	    DateTimePicker = function (element, options) {
	    	var defaults = $.fn.datetimepicker.defaults,
	
	            icons = {
	            	time: 'fa fa-clock-o',
	            	date: 'fa fa-calendar',
	            	up: 'fa fa-chevron-up',
	            	down: 'fa fa-chevron-down'
	            },
	
	            picker = this,
	            errored = false,
	            dDate,
	
	        init = function () {
	        	var icon = false, localeData, rInterval;
	        	picker.options = $.extend({}, defaults, options);
	        	picker.options.icons = $.extend({}, icons, picker.options.icons);
	
	        	picker.element = $(element);
	
	        	dataToOptions();
	
	        	if (!(picker.options.pickTime || picker.options.pickDate)) {
	        		throw new Error('Must choose at least one picker');
	        	}
	
	        	picker.id = dpgId++;
	        	moment.locale(picker.options.language);
	        	picker.date = moment();
	        	picker.unset = false;
	        	picker.isInput = picker.element.is('input');
	        	picker.component = false;
	
	        	if (picker.element.hasClass('input-group')) {
	        		if (picker.element.find('.datepickerbutton').size() === 0) {//in case there is more then one 'input-group-addon' Issue #48
	        			picker.component = picker.element.find('[class^="input-group-"]');
	        		}
	        		else {
	        			picker.component = picker.element.find('.datepickerbutton');
	        		}
	        	}
	        	picker.format = picker.options.format;
	
	        	localeData = moment().localeData();
	
	        	if (!picker.format) {
	        		picker.format = (picker.options.pickDate ? localeData.longDateFormat('L') : '');
	        		if (picker.options.pickDate && picker.options.pickTime) {
	        			picker.format += ' ';
	        		}
	        		picker.format += (picker.options.pickTime ? localeData.longDateFormat('LT') : '');
	        		if (picker.options.useSeconds) {
	        			if (localeData.longDateFormat('LT').indexOf(' A') !== -1) {
	        				picker.format = picker.format.split(' A')[0] + ':ss A';
	        			}
	        			else {
	        				picker.format += ':ss';
	        			}
	        		}
	        	}
	        	picker.use24hours = (picker.format.toLowerCase().indexOf('a') < 0 && picker.format.indexOf('h') < 0);
	
	        	if (picker.component) {
	        		icon = picker.component.find('span');
	        	}
	
	        	if (picker.options.pickTime) {
	        		if (icon) {
	        			icon.addClass(picker.options.icons.time);
	        		}
	        	}
	        	if (picker.options.pickDate) {
	        		if (icon) {
	        			icon.removeClass(picker.options.icons.time);
	        			icon.addClass(picker.options.icons.date);
	        		}
	        	}
	
	        	picker.options.widgetParent =
	                typeof picker.options.widgetParent === 'string' && picker.options.widgetParent ||
	                picker.element.parents().filter(function () {
	                	return 'scroll' === $(this).css('overflow-y');
	                }).get(0) ||
	                'body';
	
	        	picker.widget = $(getTemplate()).appendTo(picker.options.widgetParent);
	
	        	picker.minViewMode = picker.options.minViewMode || 0;
	        	if (typeof picker.minViewMode === 'string') {
	        		switch (picker.minViewMode) {
	        			case 'months':
	        				picker.minViewMode = 1;
	        				break;
	        			case 'years':
	        				picker.minViewMode = 2;
	        				break;
	        			default:
	        				picker.minViewMode = 0;
	        				break;
	        		}
	        	}
	        	picker.viewMode = picker.options.viewMode || 0;
	        	if (typeof picker.viewMode === 'string') {
	        		switch (picker.viewMode) {
	        			case 'months':
	        				picker.viewMode = 1;
	        				break;
	        			case 'years':
	        				picker.viewMode = 2;
	        				break;
	        			default:
	        				picker.viewMode = 0;
	        				break;
	        		}
	        	}
	
	        	picker.viewMode = Math.max(picker.viewMode, picker.minViewMode);
	
	        	picker.options.disabledDates = indexGivenDates(picker.options.disabledDates);
	        	picker.options.enabledDates = indexGivenDates(picker.options.enabledDates);
	
	        	picker.startViewMode = picker.viewMode;
	        	picker.setMinDate(picker.options.minDate);
	        	picker.setMaxDate(picker.options.maxDate);
	        	fillDow();
	        	fillMonths();
	        	fillHours();
	        	fillMinutes();
	        	fillSeconds();
	        	update();
	        	showMode();
	        	if (!getPickerInput().prop('disabled')) {
	        		attachDatePickerEvents();
	        	}
	        	if (picker.options.defaultDate !== '' && getPickerInput().val() === '') {
	        		picker.setValue(picker.options.defaultDate);
	        	}
	        	if (picker.options.minuteStepping !== 1) {
	        		rInterval = picker.options.minuteStepping;
	        		picker.date.minutes((Math.round(picker.date.minutes() / rInterval) * rInterval) % 60).seconds(0);
	        	}
	        },
	
	        getPickerInput = function () {
	        	var input;
	
	        	if (picker.isInput) {
	        		return picker.element;
	        	}
	        	input = picker.element.find('.datepickerinput');
	        	if (input.size() === 0) {
	        		input = picker.element.find('input');
	        	}
	        	else if (!input.is('input')) {
	        		throw new Error('CSS class "datepickerinput" cannot be applied to non input element');
	        	}
	        	return input;
	        },
	
	        dataToOptions = function () {
	        	var eData;
	        	if (picker.element.is('input')) {
	        		eData = picker.element.data();
	        	}
	        	else {
	        		eData = picker.element.find('input').data();
	        	}
	        	if (eData.dateFormat !== undefined) {
	        		picker.options.format = eData.dateFormat;
	        	}
	        	if (eData.datePickdate !== undefined) {
	        		picker.options.pickDate = eData.datePickdate;
	        	}
	        	if (eData.datePicktime !== undefined) {
	        		picker.options.pickTime = eData.datePicktime;
	        	}
	        	if (eData.dateUseminutes !== undefined) {
	        		picker.options.useMinutes = eData.dateUseminutes;
	        	}
	        	if (eData.dateUseseconds !== undefined) {
	        		picker.options.useSeconds = eData.dateUseseconds;
	        	}
	        	if (eData.dateUsecurrent !== undefined) {
	        		picker.options.useCurrent = eData.dateUsecurrent;
	        	}
	        	if (eData.calendarWeeks !== undefined) {
	        		picker.options.calendarWeeks = eData.calendarWeeks;
	        	}
	        	if (eData.dateMinutestepping !== undefined) {
	        		picker.options.minuteStepping = eData.dateMinutestepping;
	        	}
	        	if (eData.dateMindate !== undefined) {
	        		picker.options.minDate = eData.dateMindate;
	        	}
	        	if (eData.dateMaxdate !== undefined) {
	        		picker.options.maxDate = eData.dateMaxdate;
	        	}
	        	if (eData.dateShowtoday !== undefined) {
	        		picker.options.showToday = eData.dateShowtoday;
	        	}
	        	if (eData.dateCollapse !== undefined) {
	        		picker.options.collapse = eData.dateCollapse;
	        	}
	        	if (eData.dateLanguage !== undefined) {
	        		picker.options.language = eData.dateLanguage;
	        	}
	        	if (eData.dateDefaultdate !== undefined) {
	        		picker.options.defaultDate = eData.dateDefaultdate;
	        	}
	        	if (eData.dateDisableddates !== undefined) {
	        		picker.options.disabledDates = eData.dateDisableddates;
	        	}
	        	if (eData.dateEnableddates !== undefined) {
	        		picker.options.enabledDates = eData.dateEnableddates;
	        	}
	        	if (eData.dateIcons !== undefined) {
	        		picker.options.icons = eData.dateIcons;
	        	}
	        	if (eData.dateUsestrict !== undefined) {
	        		picker.options.useStrict = eData.dateUsestrict;
	        	}
	        	if (eData.dateDirection !== undefined) {
	        		picker.options.direction = eData.dateDirection;
	        	}
	        	if (eData.dateSidebyside !== undefined) {
	        		picker.options.sideBySide = eData.dateSidebyside;
	        	}
	        	if (eData.dateDaysofweekdisabled !== undefined) {
	        		picker.options.daysOfWeekDisabled = eData.dateDaysofweekdisabled;
	        	}
	        },
	
	        place = function () {
	        	var position = 'absolute',
	                offset = picker.component ? picker.component.offset() : picker.element.offset(),
	                $window = $(window),
	                placePosition;
	
	        	picker.width = picker.component ? picker.component.outerWidth() : picker.element.outerWidth();
	        	offset.top = offset.top + picker.element.outerHeight();
	
	        	if (picker.options.direction === 'up') {
	        		placePosition = 'top';
	        	} else if (picker.options.direction === 'bottom') {
	        		placePosition = 'bottom';
	        	} else if (picker.options.direction === 'auto') {
	        		if (offset.top + picker.widget.height() > $window.height() + $window.scrollTop() && picker.widget.height() + picker.element.outerHeight() < offset.top) {
	        			placePosition = 'top';
	        		} else {
	        			placePosition = 'bottom';
	        		}
	        	}
	        	if (placePosition === 'top') {
	        		offset.bottom = $window.height() - offset.top + picker.element.outerHeight() + 3;
	        		picker.widget.addClass('top').removeClass('bottom');
	        	} else {
	        		offset.top += 1;
	        		offset.top += picker.options.elementHeight;
	        		picker.widget.addClass('bottom').removeClass('top');
	        	}
	
	        	if (picker.options.width !== undefined) {
	        		picker.widget.width(picker.options.width);
	        	}
	
	        	if (picker.options.orientation === 'left') {
	        		picker.widget.addClass('left-oriented');
	        		offset.left = offset.left - picker.widget.width() + 20;
	        	}
	
	        	if (isInFixed()) {
	        		position = 'fixed';
	        		offset.top -= $window.scrollTop();
	        		offset.left -= $window.scrollLeft();
	        	}
	
	        	if ($window.width() < offset.left + picker.widget.outerWidth()) {
	        		offset.right = $window.width() - offset.left - picker.width;
	        		offset.left = 'auto';
	        		picker.widget.addClass('pull-right');
	        	} else {
	        		offset.right = 'auto';
	        		picker.widget.removeClass('pull-right');
	        	}
	
	        	if (placePosition === 'top') {
	        		picker.widget.css({
	        			position: position,
	        			bottom: offset.bottom,
	        			top: 'auto',
	        			left: offset.left,
	        			right: offset.right
	        		});
	        	} else {
	        		picker.widget.css({
	        			position: position,
	        			top: offset.top,
	        			bottom: 'auto',
	        			left: offset.left,
	        			right: offset.right
	        		});
	        	}
	        },
	
	        notifyChange = function (oldDate, eventType) {
	        	if (moment(picker.date).isSame(moment(oldDate)) && !errored) {
	        		return;
	        	}
	        	errored = false;
	        	picker.element.trigger({
	        		type: 'dp.change',
	        		date: moment(picker.date),
	        		oldDate: moment(oldDate)
	        	});
	
	        	if (eventType !== 'change') {
	        		picker.element.change();
	        	}
	        },
	
	        notifyError = function (date) {
	        	errored = true;
	        	picker.element.trigger({
	        		type: 'dp.error',
	        		date: moment(date, picker.format, picker.options.useStrict)
	        	});
	        },
	
	        update = function (newDate) {
	        	moment.locale(picker.options.language);
	        	var dateStr = newDate;
	        	if (!dateStr) {
	        		dateStr = getPickerInput().val();
	        		if (dateStr) {
	        			picker.date = moment(dateStr, picker.format, picker.options.useStrict);
	        		}
	        		if (!picker.date) {
	        			picker.date = moment();
	        		}
	        	}
	        	picker.viewDate = moment(picker.date).startOf('month');
	        	fillDate();
	        	fillTime();
	        },
	
	        fillDow = function () {
	        	moment.locale(picker.options.language);
	        	var html = $('<tr>'), weekdaysMin = moment.weekdaysMin(), i;
	        	if (picker.options.calendarWeeks === true) {
	        		html.append('<th class="cw">#</th>');
	        	}
	        	if (moment().localeData()._week.dow === 0) { // starts on Sunday
	        		for (i = 0; i < 7; i++) {
	        			html.append('<th class="dow">' + weekdaysMin[i] + '</th>');
	        		}
	        	} else {
	        		for (i = 1; i < 8; i++) {
	        			if (i === 7) {
	        				html.append('<th class="dow">' + weekdaysMin[0] + '</th>');
	        			} else {
	        				html.append('<th class="dow">' + weekdaysMin[i] + '</th>');
	        			}
	        		}
	        	}
	        	picker.widget.find('.datepicker-days thead').append(html);
	        },
	
	        fillMonths = function () {
	        	moment.locale(picker.options.language);
	        	var html = '', i, monthsShort = moment.monthsShort();
	        	for (i = 0; i < 12; i++) {
	        		html += '<span class="month">' + monthsShort[i] + '</span>';
	        	}
	        	picker.widget.find('.datepicker-months td').append(html);
	        },
	
	        fillDate = function () {
	        	if (!picker.options.pickDate) {
	        		return;
	        	}
	        	moment.locale(picker.options.language);
	        	var year = picker.viewDate.year(),
	                month = picker.viewDate.month(),
	                startYear = picker.options.minDate.year(),
	                startMonth = picker.options.minDate.month(),
	                endYear = picker.options.maxDate.year(),
	                endMonth = picker.options.maxDate.month(),
	                currentDate,
	                prevMonth, nextMonth, html = [], row, clsName, i, days, yearCont, currentYear, months = moment.months();
	
	        	picker.widget.find('.datepicker-days').find('.disabled').removeClass('disabled');
	        	picker.widget.find('.datepicker-months').find('.disabled').removeClass('disabled');
	        	picker.widget.find('.datepicker-years').find('.disabled').removeClass('disabled');
	
	        	picker.widget.find('.datepicker-days th:eq(1)').text(
	                months[month] + ' ' + year);
	
	        	prevMonth = moment(picker.viewDate, picker.format, picker.options.useStrict).subtract(1, 'months');
	        	days = prevMonth.daysInMonth();
	        	prevMonth.date(days).startOf('week');
	        	if ((year === startYear && month <= startMonth) || year < startYear) {
	        		picker.widget.find('.datepicker-days th:eq(0)').addClass('disabled');
	        	}
	        	if ((year === endYear && month >= endMonth) || year > endYear) {
	        		picker.widget.find('.datepicker-days th:eq(2)').addClass('disabled');
	        	}
	
	        	nextMonth = moment(prevMonth).add(42, 'd');
	        	while (prevMonth.isBefore(nextMonth)) {
	        		if (prevMonth.weekday() === moment().startOf('week').weekday()) {
	        			row = $('<tr>');
	        			html.push(row);
	        			if (picker.options.calendarWeeks === true) {
	        				row.append('<td class="cw">' + prevMonth.week() + '</td>');
	        			}
	        		}
	        		clsName = '';
	        		if (prevMonth.year() < year || (prevMonth.year() === year && prevMonth.month() < month)) {
	        			clsName += ' old';
	        		} else if (prevMonth.year() > year || (prevMonth.year() === year && prevMonth.month() > month)) {
	        			clsName += ' new';
	        		}
	        		if (prevMonth.isSame(moment({ y: picker.date.year(), M: picker.date.month(), d: picker.date.date() }))) {
	        			clsName += ' active';
	        		}
	        		if (isInDisableDates(prevMonth, 'day') || !isInEnableDates(prevMonth)) {
	        			clsName += ' disabled';
	        		}
	        		if (picker.options.showToday === true) {
	        			if (prevMonth.isSame(moment(), 'day')) {
	        				clsName += ' today';
	        			}
	        		}
	        		if (picker.options.daysOfWeekDisabled) {
	        			for (i = 0; i < picker.options.daysOfWeekDisabled.length; i++) {
	        				if (prevMonth.day() === picker.options.daysOfWeekDisabled[i]) {
	        					clsName += ' disabled';
	        					break;
	        				}
	        			}
	        		}
	        		row.append('<td class="day' + clsName + '">' + prevMonth.date() + '</td>');
	
	        		currentDate = prevMonth.date();
	        		prevMonth.add(1, 'd');
	
	        		if (currentDate === prevMonth.date()) {
	        			prevMonth.add(1, 'd');
	        		}
	        	}
	        	picker.widget.find('.datepicker-days tbody').empty().append(html);
	        	currentYear = picker.date.year();
	        	months = picker.widget.find('.datepicker-months').find('th:eq(1)').text(year).end().find('span').removeClass('active');
	        	if (currentYear === year) {
	        		months.eq(picker.date.month()).addClass('active');
	        	}
	        	if (year - 1 < startYear) {
	        		picker.widget.find('.datepicker-months th:eq(0)').addClass('disabled');
	        	}
	        	if (year + 1 > endYear) {
	        		picker.widget.find('.datepicker-months th:eq(2)').addClass('disabled');
	        	}
	        	for (i = 0; i < 12; i++) {
	        		if ((year === startYear && startMonth > i) || (year < startYear)) {
	        			$(months[i]).addClass('disabled');
	        		} else if ((year === endYear && endMonth < i) || (year > endYear)) {
	        			$(months[i]).addClass('disabled');
	        		}
	        	}
	
	        	html = '';
	        	year = parseInt(year / 10, 10) * 10;
	        	yearCont = picker.widget.find('.datepicker-years').find(
	                'th:eq(1)').text(year + '-' + (year + 9)).parents('table').find('td');
	        	picker.widget.find('.datepicker-years').find('th').removeClass('disabled');
	        	if (startYear > year) {
	        		picker.widget.find('.datepicker-years').find('th:eq(0)').addClass('disabled');
	        	}
	        	if (endYear < year + 9) {
	        		picker.widget.find('.datepicker-years').find('th:eq(2)').addClass('disabled');
	        	}
	        	year -= 1;
	        	for (i = -1; i < 11; i++) {
	        		html += '<span class="year' + (i === -1 || i === 10 ? ' old' : '') + (currentYear === year ? ' active' : '') + ((year < startYear || year > endYear) ? ' disabled' : '') + '">' + year + '</span>';
	        		year += 1;
	        	}
	        	yearCont.html(html);
	        },
	
	        fillHours = function () {
	        	moment.locale(picker.options.language);
	        	var table = picker.widget.find('.timepicker .timepicker-hours table'), html = '', current, i, j;
	        	table.parent().hide();
	        	if (picker.use24hours) {
	        		current = 0;
	        		for (i = 0; i < 6; i += 1) {
	        			html += '<tr>';
	        			for (j = 0; j < 4; j += 1) {
	        				html += '<td class="hour">' + padLeft(current.toString()) + '</td>';
	        				current++;
	        			}
	        			html += '</tr>';
	        		}
	        	}
	        	else {
	        		current = 1;
	        		for (i = 0; i < 3; i += 1) {
	        			html += '<tr>';
	        			for (j = 0; j < 4; j += 1) {
	        				html += '<td class="hour">' + padLeft(current.toString()) + '</td>';
	        				current++;
	        			}
	        			html += '</tr>';
	        		}
	        	}
	        	table.html(html);
	        },
	
	        fillMinutes = function () {
	        	var table = picker.widget.find('.timepicker .timepicker-minutes table'), html = '', current = 0, i, j, step = picker.options.minuteStepping;
	        	table.parent().hide();
	        	if (step === 1) {
	        		step = 5;
	        	}
	        	for (i = 0; i < Math.ceil(60 / step / 4) ; i++) {
	        		html += '<tr>';
	        		for (j = 0; j < 4; j += 1) {
	        			if (current < 60) {
	        				html += '<td class="minute">' + padLeft(current.toString()) + '</td>';
	        				current += step;
	        			} else {
	        				html += '<td></td>';
	        			}
	        		}
	        		html += '</tr>';
	        	}
	        	table.html(html);
	        },
	
	        fillSeconds = function () {
	        	var table = picker.widget.find('.timepicker .timepicker-seconds table'), html = '', current = 0, i, j;
	        	table.parent().hide();
	        	for (i = 0; i < 3; i++) {
	        		html += '<tr>';
	        		for (j = 0; j < 4; j += 1) {
	        			html += '<td class="second">' + padLeft(current.toString()) + '</td>';
	        			current += 5;
	        		}
	        		html += '</tr>';
	        	}
	        	table.html(html);
	        },
	
	        fillTime = function () {
	        	if (!picker.date) {
	        		return;
	        	}
	        	var timeComponents = picker.widget.find('.timepicker span[data-time-component]'),
	                hour = picker.date.hours(),
	                period = picker.date.format('A');
	        	if (!picker.use24hours) {
	        		if (hour === 0) {
	        			hour = 12;
	        		} else if (hour !== 12) {
	        			hour = hour % 12;
	        		}
	        		picker.widget.find('.timepicker [data-action=togglePeriod]').text(period);
	        	}
	        	timeComponents.filter('[data-time-component=hours]').text(padLeft(hour));
	        	timeComponents.filter('[data-time-component=minutes]').text(padLeft(picker.date.minutes()));
	        	timeComponents.filter('[data-time-component=seconds]').text(padLeft(picker.date.second()));
	        },
	
	        click = function (e) {
	        	e.stopPropagation();
	        	e.preventDefault();
	        	picker.unset = false;
	        	var target = $(e.target).closest('span, td, th'), month, year, step, day, oldDate = moment(picker.date);
	        	if (target.length === 1) {
	        		if (!target.is('.disabled')) {
	        			switch (target[0].nodeName.toLowerCase()) {
	        				case 'th':
	        					switch (target[0].className) {
	        						case 'picker-switch':
	        							showMode(1);
	        							break;
	        						case 'prev':
	        						case 'next':
	        							step = dpGlobal.modes[picker.viewMode].navStep;
	        							if (target[0].className === 'prev') {
	        								step = step * -1;
	        							}
	        							picker.viewDate.add(step, dpGlobal.modes[picker.viewMode].navFnc);
	        							fillDate();
	        							break;
	        					}
	        					break;
	        				case 'span':
	        					if (target.is('.month')) {
	        						month = target.parent().find('span').index(target);
	        						picker.viewDate.month(month);
	        					} else {
	        						year = parseInt(target.text(), 10) || 0;
	        						picker.viewDate.year(year);
	        					}
	        					if (picker.viewMode === picker.minViewMode) {
	        						picker.date = moment({
	        							y: picker.viewDate.year(),
	        							M: picker.viewDate.month(),
	        							d: picker.viewDate.date(),
	        							h: picker.date.hours(),
	        							m: picker.date.minutes(),
	        							s: picker.date.seconds()
	        						});
	        						set();
	        						notifyChange(oldDate, e.type);
	        					}
	        					showMode(-1);
	        					fillDate();
	        					break;
	        				case 'td':
	        					if (target.is('.day')) {
	        						day = parseInt(target.text(), 10) || 1;
	        						month = picker.viewDate.month();
	        						year = picker.viewDate.year();
	        						if (target.is('.old')) {
	        							if (month === 0) {
	        								month = 11;
	        								year -= 1;
	        							} else {
	        								month -= 1;
	        							}
	        						} else if (target.is('.new')) {
	        							if (month === 11) {
	        								month = 0;
	        								year += 1;
	        							} else {
	        								month += 1;
	        							}
	        						}
	        						picker.date = moment({
	        							y: year,
	        							M: month,
	        							d: day,
	        							h: picker.date.hours(),
	        							m: picker.date.minutes(),
	        							s: picker.date.seconds()
	        						}
	                                );
	        						picker.viewDate = moment({
	        							y: year, M: month, d: Math.min(28, day)
	        						});
	        						fillDate();
	        						set();
	        						notifyChange(oldDate, e.type);
	        					}
	        					break;
	        			}
	        		}
	        	}
	        },
	
	        actions = {
	        	incrementHours: function () {
	        		checkDate('add', 'hours', 1);
	        	},
	
	        	incrementMinutes: function () {
	        		checkDate('add', 'minutes', picker.options.minuteStepping);
	        	},
	
	        	incrementSeconds: function () {
	        		checkDate('add', 'seconds', 1);
	        	},
	
	        	decrementHours: function () {
	        		checkDate('subtract', 'hours', 1);
	        	},
	
	        	decrementMinutes: function () {
	        		checkDate('subtract', 'minutes', picker.options.minuteStepping);
	        	},
	
	        	decrementSeconds: function () {
	        		checkDate('subtract', 'seconds', 1);
	        	},
	
	        	togglePeriod: function () {
	        		var hour = picker.date.hours();
	        		if (hour >= 12) {
	        			hour -= 12;
	        		} else {
	        			hour += 12;
	        		}
	        		picker.date.hours(hour);
	        	},
	
	        	showPicker: function () {
	        		picker.widget.find('.timepicker > div:not(.timepicker-picker)').hide();
	        		picker.widget.find('.timepicker .timepicker-picker').show();
	        	},
	
	        	showHours: function () {
	        		picker.widget.find('.timepicker .timepicker-picker').hide();
	        		picker.widget.find('.timepicker .timepicker-hours').show();
	        	},
	
	        	showMinutes: function () {
	        		picker.widget.find('.timepicker .timepicker-picker').hide();
	        		picker.widget.find('.timepicker .timepicker-minutes').show();
	        	},
	
	        	showSeconds: function () {
	        		picker.widget.find('.timepicker .timepicker-picker').hide();
	        		picker.widget.find('.timepicker .timepicker-seconds').show();
	        	},
	
	        	selectHour: function (e) {
	        		var hour = parseInt($(e.target).text(), 10);
	        		if (!picker.use24hours) {
	        			if (picker.date.hours() >= 12) {
	        				if (hour !== 12) {
	        					hour += 12;
	        				}
	        			} else {
	        				if (hour === 12) {
	        					hour = 0;
	        				}
	        			}
	        		}
	        		picker.date.hours(hour);
	        		actions.showPicker.call(picker);
	        	},
	
	        	selectMinute: function (e) {
	        		picker.date.minutes(parseInt($(e.target).text(), 10));
	        		actions.showPicker.call(picker);
	        	},
	
	        	selectSecond: function (e) {
	        		picker.date.seconds(parseInt($(e.target).text(), 10));
	        		actions.showPicker.call(picker);
	        	}
	        },
	
	        doAction = function (e) {
	        	var oldDate = moment(picker.date),
	                action = $(e.currentTarget).data('action'),
	                rv = actions[action].apply(picker, arguments);
	        	stopEvent(e);
	        	if (!picker.date) {
	        		picker.date = moment({ y: 1970 });
	        	}
	        	set();
	        	fillTime();
	        	notifyChange(oldDate, e.type);
	        	return rv;
	        },
	
	        stopEvent = function (e) {
	        	e.stopPropagation();
	        	e.preventDefault();
	        },
	
	        keydown = function (e) {
	        	if (e.keyCode === 27) { // allow escape to hide picker
	        		picker.hide();
	        	}
	        },
	
	        change = function (e) {
	        	moment.locale(picker.options.language);
	        	var input = $(e.target), oldDate = moment(picker.date), newDate = moment(input.val(), picker.format, picker.options.useStrict);
	        	if (newDate.isValid() && !isInDisableDates(newDate) && isInEnableDates(newDate)) {
	        		update();
	        		picker.setValue(newDate);
	        		notifyChange(oldDate, e.type);
	        		set();
	        	}
	        	else {
	        		picker.viewDate = oldDate;
	        		picker.unset = true;
	        		notifyChange(oldDate, e.type);
	        		notifyError(newDate);
	        	}
	        },
	
	        showMode = function (dir) {
	        	if (dir) {
	        		picker.viewMode = Math.max(picker.minViewMode, Math.min(2, picker.viewMode + dir));
	        	}
	        	picker.widget.find('.datepicker > div').hide().filter('.datepicker-' + dpGlobal.modes[picker.viewMode].clsName).show();
	        },
	
	        attachDatePickerEvents = function () {
	        	var $this, $parent, expanded, closed, collapseData;
	        	picker.widget.on('click', '.datepicker *', $.proxy(click, this)); // this handles date picker clicks
	        	picker.widget.on('click', '[data-action]', $.proxy(doAction, this)); // this handles time picker clicks
	        	picker.widget.on('mousedown', $.proxy(stopEvent, this));
	        	picker.element.on('keydown', $.proxy(keydown, this));
	        	if (picker.options.pickDate && picker.options.pickTime) {
	        		picker.widget.on('click.togglePicker', '.accordion-toggle', function (e) {
	        			e.stopPropagation();
	        			$this = $(this);
	        			$parent = $this.closest('ul');
	        			expanded = $parent.find('.in');
	        			closed = $parent.find('.collapse:not(.in)');
	
	        			if (expanded && expanded.length) {
	        				collapseData = expanded.data('collapse');
	        				if (collapseData && collapseData.transitioning) {
	        					return;
	        				}
	        				expanded.collapse('hide');
	        				closed.collapse('show');
	        				$this.find('span').toggleClass(picker.options.icons.time + ' ' + picker.options.icons.date);
	        				if (picker.component) {
	        					picker.component.find('span').toggleClass(picker.options.icons.time + ' ' + picker.options.icons.date);
	        				}
	        			}
	        		});
	        	}
	        	if (picker.isInput) {
	        		picker.element.on({
	        			'click': $.proxy(picker.show, this),
	        			'focus': $.proxy(picker.show, this),
	        			'change': $.proxy(change, this),
	        			'blur': $.proxy(picker.hide, this)
	        		});
	        	} else {
	        		picker.element.on({
	        			'change': $.proxy(change, this)
	        		}, 'input');
	        		if (picker.component) {
	        			picker.component.on('click', $.proxy(picker.show, this));
	        			picker.component.on('mousedown', $.proxy(stopEvent, this));
	        		} else {
	        			picker.element.on('click', $.proxy(picker.show, this));
	        		}
	        	}
	        	picker.widget.on('click.togglePicker', '#today-button', function (e) {
	        		if (picker.options.minuteStepping !== 1) {
	        			var mDate = moment(),
							rInterval = picker.options.minuteStepping;
	        			mDate.minutes((Math.round(mDate.minutes() / rInterval) * rInterval) % 60).seconds(0);
	        			picker.setValue(mDate.format(picker.format));
	        		} else {
	        			picker.setValue(moment().format(picker.format));
	        		}
	        		notifyChange('', e.type);
	        		set();
	        	});
	        	picker.widget.on('click.togglePicker', '#clear-button', function (e) {
	        		picker.setValue(null);
	        		notifyChange('', e.type);
	        	});
	        	picker.widget.on('click.togglePicker', '#close-button', function (e) {
	        		picker.hide();
	        	});
	        },
	
	        attachDatePickerGlobalEvents = function () {
	        	$(window).on(
	                'resize.datetimepicker' + picker.id, $.proxy(place, this));
	        	if (!picker.isInput) {
	        		$(document).on(
	                    'mousedown.datetimepicker' + picker.id, $.proxy(picker.hide, this));
	        	}
	        },
	
	        detachDatePickerEvents = function () {
	        	picker.widget.off('click', '.datepicker *', picker.click);
	        	picker.widget.off('click', '[data-action]');
	        	picker.widget.off('mousedown', picker.stopEvent);
	        	if (picker.options.pickDate && picker.options.pickTime) {
	        		picker.widget.off('click.togglePicker');
	        	}
	        	if (picker.isInput) {
	        		picker.element.off({
	        			'focus': picker.show,
	        			'change': change,
	        			'click': picker.show,
	        			'blur': picker.hide
	        		});
	        	} else {
	        		picker.element.off({
	        			'change': change
	        		}, 'input');
	        		if (picker.component) {
	        			picker.component.off('click', picker.show);
	        			picker.component.off('mousedown', picker.stopEvent);
	        		} else {
	        			picker.element.off('click', picker.show);
	        		}
	        	}
	        },
	
	        detachDatePickerGlobalEvents = function () {
	        	$(window).off('resize.datetimepicker' + picker.id);
	        	if (!picker.isInput) {
	        		$(document).off('mousedown.datetimepicker' + picker.id);
	        	}
	        },
	
	        isInFixed = function () {
	        	if (picker.element) {
	        		var parents = picker.element.parents(), inFixed = false, i;
	        		for (i = 0; i < parents.length; i++) {
	        			if ($(parents[i]).css('position') === 'fixed') {
	        				inFixed = true;
	        				break;
	        			}
	        		}
	        		return inFixed;
	        	} else {
	        		return false;
	        	}
	        },
	
	        set = function () {
	        	moment.locale(picker.options.language);
	        	var formatted = '';
	        	if (!picker.unset) {
	        		formatted = moment(picker.date).format(picker.format);
	        	}
	        	getPickerInput().val(formatted);
	        	picker.element.data('date', formatted);
	        	if (!picker.options.pickTime) {
	        		picker.hide();
	        	}
	        },
	
	        checkDate = function (direction, unit, amount) {
	        	moment.locale(picker.options.language);
	        	var newDate;
	        	if (direction === 'add') {
	        		newDate = moment(picker.date);
	        		if (newDate.hours() === 23) {
	        			newDate.add(amount, unit);
	        		}
	        		newDate.add(amount, unit);
	        	}
	        	else {
	        		newDate = moment(picker.date).subtract(amount, unit);
	        	}
	        	if (isInDisableDates(moment(newDate.subtract(amount, unit))) || isInDisableDates(newDate)) {
	        		notifyError(newDate.format(picker.format));
	        		return;
	        	}
	
	        	if (direction === 'add') {
	        		picker.date.add(amount, unit);
	        	}
	        	else {
	        		picker.date.subtract(amount, unit);
	        	}
	        	picker.unset = false;
	        },
	
	        isInDisableDates = function (date, timeUnit) {
	        	moment.locale(picker.options.language);
	        	var maxDate = moment(picker.options.maxDate, picker.format, picker.options.useStrict),
	                minDate = moment(picker.options.minDate, picker.format, picker.options.useStrict);
	
	        	if (timeUnit) {
	        		maxDate = maxDate.endOf(timeUnit);
	        		minDate = minDate.startOf(timeUnit);
	        	}
	
	        	if (date.isAfter(maxDate) || date.isBefore(minDate)) {
	        		return true;
	        	}
	        	if (picker.options.disabledDates === false) {
	        		return false;
	        	}
	        	return picker.options.disabledDates[date.format('YYYY-MM-DD')] === true;
	        },
	        isInEnableDates = function (date) {
	        	moment.locale(picker.options.language);
	        	if (picker.options.enabledDates === false) {
	        		return true;
	        	}
	        	return picker.options.enabledDates[date.format('YYYY-MM-DD')] === true;
	        },
	
	        indexGivenDates = function (givenDatesArray) {
	        	// Store given enabledDates and disabledDates as keys.
	        	// This way we can check their existence in O(1) time instead of looping through whole array.
	        	// (for example: picker.options.enabledDates['2014-02-27'] === true)
	        	var givenDatesIndexed = {}, givenDatesCount = 0, i;
	        	for (i = 0; i < givenDatesArray.length; i++) {
	        		if (moment.isMoment(givenDatesArray[i]) || givenDatesArray[i] instanceof Date) {
	        			dDate = moment(givenDatesArray[i]);
	        		} else {
	        			dDate = moment(givenDatesArray[i], picker.format, picker.options.useStrict);
	        		}
	        		if (dDate.isValid()) {
	        			givenDatesIndexed[dDate.format('YYYY-MM-DD')] = true;
	        			givenDatesCount++;
	        		}
	        	}
	        	if (givenDatesCount > 0) {
	        		return givenDatesIndexed;
	        	}
	        	return false;
	        },
	
	        padLeft = function (string) {
	        	string = string.toString();
	        	if (string.length >= 2) {
	        		return string;
	        	}
	        	return '0' + string;
	        },
	
	        getTemplate = function () {
	        	var
	                headTemplate =
	                        '<thead>' +
	                            '<tr>' +
	                                '<th class="prev">&lsaquo;</th><th colspan="' + (picker.options.calendarWeeks ? '6' : '5') + '" class="picker-switch"></th><th class="next">&rsaquo;</th>' +
	                            '</tr>' +
	                        '</thead>',
	                contTemplate =
	                        '<tbody><tr><td colspan="' + (picker.options.calendarWeeks ? '8' : '7') + '"></td></tr></tbody>',
	                template = '<div class="datepicker-days">' +
	                    '<table class="table-condensed">' + headTemplate + '<tbody></tbody></table>' +
	                '</div>' +
	                '<div class="datepicker-months">' +
	                    '<table class="table-condensed">' + headTemplate + contTemplate + '</table>' +
	                '</div>' +
	                '<div class="datepicker-years">' +
	                    '<table class="table-condensed">' + headTemplate + contTemplate + '</table>' +
	                '</div>',
	                ret = '';
	        	if (picker.options.pickDate && picker.options.pickTime) {
	        		ret = '<div class="bootstrap-datetimepicker-widget' + (picker.options.sideBySide ? ' timepicker-sbs' : '') + (picker.use24hours ? ' usetwentyfour' : '') + ' dropdown-menu" style="z-index:9999 !important;">';
	        		if (picker.options.sideBySide) {
	        			ret += '<div class="row">' +
	                       '<div class="col-sm-6 datepicker">' + template + '</div>' +
	                       '<div class="col-sm-6 timepicker">' + tpGlobal.getTemplate() + '</div>' +
	                     '</div>';
	        		} else {
	        			ret += '<ul class="list-unstyled">' +
	                        '<li' + (picker.options.collapse ? ' class="collapse in"' : '') + '>' +
	                            '<div class="datepicker">' + template + '</div>' +
	                        '</li>' +
							'<li>' +
							'<span class="btn-group" style="float:left; margin-left:4px">' +
							'<button class="btn btn-info"" id="today-button"> Now </button>' +
							'<button class="btn btn-danger" id="clear-button"> Clear </button>' +
							'</span>' +
							'<button class="btn btn-success" id="close-button" style="float:right; margin-right:4px;">Done</button>' +
							'<div style="clear:both; padding-bottom:5px;"></div>' +
							'</li>' +
	                        '<li' + (picker.options.collapse ? ' class="collapse"' : '') + '>' +
	                            '<div class="timepicker">' + tpGlobal.getTemplate() + '</div>' +
	                        '</li>' +
	                   '</ul>';
	        		}
	        		ret += '</div>';
	        		return ret;
	        	}
	        	if (picker.options.pickTime) {
	        		return (
	                    '<div class="bootstrap-datetimepicker-widget dropdown-menu">' +
	                        '<div class="timepicker">' + tpGlobal.getTemplate() + '</div>' +
	                    '</div>'
	                );
	        	}
	        	return (
	                '<div class="bootstrap-datetimepicker-widget dropdown-menu">' +
	                    '<div class="datepicker">' + template + '</div>' +
	                '</div>'
	            );
	        },
	
	        dpGlobal = {
	        	modes: [
	                {
	                	clsName: 'days',
	                	navFnc: 'month',
	                	navStep: 1
	                },
	                {
	                	clsName: 'months',
	                	navFnc: 'year',
	                	navStep: 1
	                },
	                {
	                	clsName: 'years',
	                	navFnc: 'year',
	                	navStep: 10
	                }
	        	]
	        },
	
	        tpGlobal = {
	        	hourTemplate: '<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',
	        	minuteTemplate: '<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',
	        	secondTemplate: '<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'
	        };
	
	    	tpGlobal.getTemplate = function () {
	    		return (
	                '<div class="timepicker-picker">' +
	                    '<table class="table-condensed">' +
	                        '<tr>' +
	                            '<td><a href="#" class="btn" data-action="incrementHours"><span class="' + picker.options.icons.up + '"></span></a></td>' +
	                            '<td class="separator"></td>' +
	                            '<td>' + (picker.options.useMinutes ? '<a href="#" class="btn" data-action="incrementMinutes"><span class="' + picker.options.icons.up + '"></span></a>' : '') + '</td>' +
	                            (picker.options.useSeconds ?
	                                '<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="' + picker.options.icons.up + '"></span></a></td>' : '') +
	                            (picker.use24hours ? '' : '<td class="separator"></td>') + '<td></td>' +
	                        '</tr>' +
	                        '<tr>' +
	                            '<td>' + tpGlobal.hourTemplate + '</td> ' +
	                            '<td class="separator">:</td>' +
	                            '<td>' + (picker.options.useMinutes ? tpGlobal.minuteTemplate : '<span class="timepicker-minute">00</span>') + '</td> ' +
	                            (picker.options.useSeconds ?
	                                '<td class="separator">:</td><td>' + tpGlobal.secondTemplate + '</td>' : '') +
	                            (picker.use24hours ? '' : '<td class="separator"></td>' +
	                            '<td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>') +
	                        '</tr>' +
	                        '<tr>' +
	                            '<td><a href="#" class="btn" data-action="decrementHours"><span class="' + picker.options.icons.down + '"></span></a></td>' +
	                            '<td class="separator"></td>' +
	                            '<td>' + (picker.options.useMinutes ? '<a href="#" class="btn" data-action="decrementMinutes"><span class="' + picker.options.icons.down + '"></span></a>' : '') + '</td>' +
	                            (picker.options.useSeconds ?
	                                '<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="' + picker.options.icons.down + '"></span></a></td>' : '') +
	                            (picker.use24hours ? '' : '<td class="separator"></td>') + '<td></td>' +
	                        '</tr>' +
	                    '</table>' +
	                '</div>' +
	                '<div class="timepicker-hours" data-action="selectHour">' +
	                    '<table class="table-condensed"></table>' +
	                '</div>' +
	                '<div class="timepicker-minutes" data-action="selectMinute">' +
	                    '<table class="table-condensed"></table>' +
	                '</div>' +
	                (picker.options.useSeconds ?
	                    '<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>' : '')
	            );
	    	};
	
	    	picker.destroy = function () {
	    		detachDatePickerEvents();
	    		detachDatePickerGlobalEvents();
	    		picker.widget.remove();
	    		picker.element.removeData('DateTimePicker');
	    		if (picker.component) {
	    			picker.component.removeData('DateTimePicker');
	    		}
	    	};
	
	    	picker.show = function (e) {
	    		if (getPickerInput().prop('disabled')) {
	    			return;
	    		}
	    		if (picker.options.useCurrent) {
	    			if (getPickerInput().val() === '') {
	    				if (picker.options.fillEmpty) {
	    					if (picker.options.minuteStepping !== 1) {
	    						var mDate = moment(),
					                rInterval = picker.options.minuteStepping;
	    						mDate.minutes((Math.round(mDate.minutes() / rInterval) * rInterval) % 60).seconds(0);
	    						picker.setValue(mDate.format(picker.format));
	    					} else {
	    						picker.setValue(moment().format(picker.format));
	    					}
	    					notifyChange('', e.type);
	    				}
	    			} else
	    				picker.setValue(getPickerInput().val());
	    		}
	    		// if this is a click event on the input field and picker is already open don't hide it
	    		if (e && e.type === 'click' && picker.isInput && picker.widget.hasClass('picker-open')) {
	    			return;
	    		}
	    		if (picker.widget.hasClass('picker-open')) {
	    			picker.widget.hide();
	    			picker.widget.removeClass('picker-open');
	    		}
	    		else {
	    			picker.widget.show();
	    			picker.widget.addClass('picker-open');
	    		}
	    		picker.height = picker.component ? picker.component.outerHeight() : picker.element.outerHeight();
	    		place();
	    		picker.element.trigger({
	    			type: 'dp.show',
	    			date: moment(picker.date)
	    		});
	    		attachDatePickerGlobalEvents();
	    		if (e) {
	    			stopEvent(e);
	    		}
	    	};
	
	    	picker.disable = function () {
	    		var input = getPickerInput();
	    		if (input.prop('disabled')) {
	    			return;
	    		}
	    		input.prop('disabled', true);
	    		detachDatePickerEvents();
	    	};
	
	    	picker.enable = function () {
	    		var input = getPickerInput();
	    		if (!input.prop('disabled')) {
	    			return;
	    		}
	    		input.prop('disabled', false);
	    		attachDatePickerEvents();
	    	};
	
	    	picker.hide = function () {
	    		// Ignore event if in the middle of a picker transition
	    		var collapse = picker.widget.find('.collapse'), i, collapseData;
	    		for (i = 0; i < collapse.length; i++) {
	    			collapseData = collapse.eq(i).data('collapse');
	    			if (collapseData && collapseData.transitioning) {
	    				return;
	    			}
	    		}
	    		picker.widget.hide();
	    		picker.widget.removeClass('picker-open');
	    		picker.viewMode = picker.startViewMode;
	    		showMode();
	    		picker.element.trigger({
	    			type: 'dp.hide',
	    			date: moment(picker.date)
	    		});
	    		detachDatePickerGlobalEvents();
	    	};
	
	    	picker.setValue = function (newDate) {
	    		moment.locale(picker.options.language);
	    		if (!newDate) {
	    			picker.unset = true;
	    			set();
	    		} else {
	    			picker.unset = false;
	    		}
	    		if (!moment.isMoment(newDate)) {
	    			newDate = (newDate instanceof Date) ? moment(newDate) : moment(newDate, picker.format, picker.options.useStrict);
	    		} else {
	    			newDate = newDate.locale(picker.options.language);
	    		}
	    		if (newDate.isValid()) {
	    			picker.date = newDate;
	    			set();
	    			picker.viewDate = moment({ y: picker.date.year(), M: picker.date.month() });
	    			fillDate();
	    			fillTime();
	    		}
	    		else {
	    			notifyError(newDate);
	    		}
	    	};
	
	    	picker.getDate = function () {
	    		if (picker.unset) {
	    			return null;
	    		}
	    		return moment(picker.date);
	    	};
	
	    	picker.setDate = function (date) {
	    		var oldDate = moment(picker.date);
	    		if (!date) {
	    			picker.setValue(null);
	    		} else {
	    			picker.setValue(date);
	    		}
	    		notifyChange(oldDate, 'function');
	    	};
	
	    	picker.setDisabledDates = function (dates) {
	    		picker.options.disabledDates = indexGivenDates(dates);
	    		if (picker.viewDate) {
	    			update();
	    		}
	    	};
	
	    	picker.setEnabledDates = function (dates) {
	    		picker.options.enabledDates = indexGivenDates(dates);
	    		if (picker.viewDate) {
	    			update();
	    		}
	    	};
	
	    	picker.setMaxDate = function (date) {
	    		if (date === undefined) {
	    			return;
	    		}
	    		if (moment.isMoment(date) || date instanceof Date) {
	    			picker.options.maxDate = moment(date);
	    		} else {
	    			picker.options.maxDate = moment(date, picker.format, picker.options.useStrict);
	    		}
	    		if (picker.viewDate) {
	    			update();
	    		}
	    	};
	
	    	picker.setMinDate = function (date) {
	    		if (date === undefined) {
	    			return;
	    		}
	    		if (moment.isMoment(date) || date instanceof Date) {
	    			picker.options.minDate = moment(date);
	    		} else {
	    			picker.options.minDate = moment(date, picker.format, picker.options.useStrict);
	    		}
	    		if (picker.viewDate) {
	    			update();
	    		}
	    	};
	
	    	init();
	    };
	
		$.fn.datetimepicker = function (options) {
			return this.each(function () {
				var $this = $(this),
	                data = $this.data('DateTimePicker');
				if (!data) {
					$this.data('DateTimePicker', new DateTimePicker(this, options));
				}
			});
		};
	
		$.fn.datetimepicker.defaults = {
			format: false,
			pickDate: true,
			pickTime: true,
			useMinutes: true,
			useSeconds: false,
			useCurrent: true,
			calendarWeeks: false,
			minuteStepping: 1,
			minDate: moment({ y: 1900 }),
			maxDate: moment().add(100, 'y'),
			showToday: true,
			collapse: false,
			language: moment.locale(),
			defaultDate: '',
			disabledDates: false,
			enabledDates: false,
			icons: {},
			useStrict: false,
			direction: 'auto',
			sideBySide: false,
			daysOfWeekDisabled: [],
			widgetParent: false,
			fillEmpty: false
		};
	}));


/***/ },
/* 115 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __guid = typescript_angular_utilities_1.services.guid;
	var required_1 = __webpack_require__(25);
	var componentValidator_service_1 = __webpack_require__(116);
	exports.moduleName = 'rl.ui.components.input';
	exports.controllerName = 'InputController';
	var InputController = (function () {
	    function InputController($scope, $attrs, componentValidatorFactory) {
	        this.$scope = $scope;
	        this.$attrs = $attrs;
	        this.componentValidatorFactory = componentValidatorFactory;
	        this.inputType = 'input';
	    }
	    Object.defineProperty(InputController.prototype, "inputValue", {
	        get: function () {
	            return this.ngModel.$viewValue;
	        },
	        set: function (value) {
	            this.ngModel.$setViewValue(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    InputController.prototype.$onInit = function () {
	        var _this = this;
	        var validators = [];
	        if (!_.isUndefined(this.validator)) {
	            validators.push(this.validator);
	        }
	        if (__object.objectUtility.isNullOrEmpty(this.$attrs.name)) {
	            this.$attrs.$set('name', this.inputType + '-' + __guid.guid.random());
	        }
	        if (this.required != null) {
	            validators.push({
	                name: 'rlRequired',
	                validate: function () { return !__object.objectUtility.isNullOrEmpty(_this.ngModel.$viewValue); },
	                errorMessage: this.required.message,
	            });
	        }
	        if (_.some(validators)) {
	            this.inputValidator = this.componentValidatorFactory.getInstance({
	                ngModel: this.ngModel,
	                $scope: this.$scope,
	                validators: validators,
	            });
	        }
	    };
	    InputController.$inject = ['$scope', '$attrs', componentValidator_service_1.factoryName];
	    return InputController;
	}());
	exports.InputController = InputController;
	var baseInputOptions = {
	    require: {
	        ngModel: 'ngModel',
	        required: '?' + required_1.directiveName,
	    },
	    template: '',
	    controller: exports.controllerName,
	    controllerAs: 'input',
	    bindings: {
	        validator: '<?',
	        label: '@',
	        name: '@',
	    },
	};
	function buildInput(options) {
	    var clone = _.clone(baseInputOptions);
	    clone.template = options.template;
	    clone.controller = options.controller || clone.controller;
	    clone.controllerAs = options.controllerAs || clone.controllerAs;
	    clone.bindings = _.assign({}, clone.bindings, options.bindings);
	    return clone;
	}
	exports.buildInput = buildInput;
	angular.module(exports.moduleName, [componentValidator_service_1.moduleName])
	    .controller(exports.controllerName, InputController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbnB1dC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwwREFBMEQ7QUFFMUQsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFFeEQsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFDbEMsSUFBTyxNQUFNLEdBQUcsdUNBQVEsQ0FBQyxJQUFJLENBQUM7QUFHOUIseUJBQTJFLG1DQUFtQyxDQUFDLENBQUE7QUFDL0csMkNBS08sOERBQThELENBQUMsQ0FBQTtBQUUzRCxrQkFBVSxHQUFXLHdCQUF3QixDQUFDO0FBQzlDLHNCQUFjLEdBQVcsaUJBQWlCLENBQUM7QUFhdEQ7SUFvQkMseUJBQXNCLE1BQXNCLEVBQzlCLE1BQXdCLEVBQzFCLHlCQUFxRDtRQUYzQyxXQUFNLEdBQU4sTUFBTSxDQUFnQjtRQUM5QixXQUFNLEdBQU4sTUFBTSxDQUFrQjtRQUMxQiw4QkFBeUIsR0FBekIseUJBQXlCLENBQTRCO1FBYmpFLGNBQVMsR0FBVyxPQUFPLENBQUM7SUFheUMsQ0FBQztJQVh0RSxzQkFBSSx1Q0FBVTthQUFkO1lBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ2hDLENBQUM7YUFFRCxVQUFlLEtBQWE7WUFDM0IsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQzs7O09BSkE7SUFXRCxpQ0FBTyxHQUFQO1FBQUEsaUJBMEJDO1FBekJBLElBQUksVUFBVSxHQUFzQyxFQUFFLENBQUM7UUFFdkQsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7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

/***/ },
/* 116 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __validation = typescript_angular_utilities_1.services.validation;
	exports.moduleName = 'rl.ui.services.componentValidator';
	exports.factoryName = 'componentValidator';
	var ComponentValidator = (function () {
	    function ComponentValidator(validationService, options) {
	        var _this = this;
	        this.$scope = options.$scope;
	        this.ngModel = options.ngModel;
	        this.form = options.form;
	        this.validator = validationService.buildCustomValidator(function (error, name) {
	            _this.error = error;
	            _this.errorType = name || 'customValidation';
	        });
	        _.each(options.validators, function (customValidator) {
	            _this.validator.registerValidationHandler(customValidator);
	        });
	        this.setValidator();
	    }
	    ComponentValidator.prototype.setValidator = function () {
	        var _this = this;
	        return this.$scope.$watch(this.validator.validate.bind(this.validator), function (value) {
	            if (value) {
	                _this.error = null;
	            }
	            if (!_.isUndefined(_this.ngModel)) {
	                _this.ngModel.$setValidity(_this.errorType, value);
	                _this.ngModel.rlErrorMessage = _this.error;
	            }
	            else if (!_.isUndefined(_this.form)) {
	                _this.form.$setValidity(_this.errorType, value, 'group');
	                _this.form.rlErrorMessage = _this.error;
	            }
	            else if (_.isFunction(_this.setValidity)) {
	                _this.setValidity(value);
	            }
	        });
	    };
	    return ComponentValidator;
	}());
	exports.ComponentValidator = ComponentValidator;
	componentValidatorFactory.$inject = [__validation.serviceName];
	function componentValidatorFactory(validationService) {
	    return {
	        getInstance: function (options) {
	            return new ComponentValidator(validationService, options);
	        },
	    };
	}
	exports.componentValidatorFactory = componentValidatorFactory;
	angular.module(exports.moduleName, [__validation.moduleName])
	    .factory(exports.factoryName, componentValidatorFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcG9uZW50VmFsaWRhdG9yLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjb21wb25lbnRWYWxpZGF0b3Iuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNuQyxJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1Qiw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUN4RCxJQUFPLFlBQVksR0FBRyx1Q0FBUSxDQUFDLFVBQVUsQ0FBQztBQUkvQixrQkFBVSxHQUFXLG1DQUFtQyxDQUFDO0FBQ3pELG1CQUFXLEdBQVcsb0JBQW9CLENBQUM7QUFjdEQ7SUFVQyw0QkFBWSxpQkFBa0QsRUFDMUQsT0FBbUM7UUFYeEMsaUJBNENDO1FBaENDLElBQUksQ0FBQyxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztRQUM3QixJQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUM7UUFDL0IsSUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO1FBRXpCLElBQUksQ0FBQyxTQUFTLEdBQUcsaUJBQWlCLENBQUMsb0JBQW9CLENBQUMsVUFBQyxLQUFhLEVBQUUsSUFBWTtZQUNuRixLQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztZQUNuQixLQUFJLENBQUMsU0FBUyxHQUFHLElBQUksSUFBSSxrQkFBa0IsQ0FBQztRQUM3QyxDQUFDLENBQUMsQ0FBQztRQUNILENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxVQUFDLGVBQWdEO1lBQzNFLEtBQUksQ0FBQyxTQUFTLENBQUMseUJBQXlCLENBQUMsZUFBZSxDQUFDLENBQUM7UUFDM0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVPLHlDQUFZLEdBQXBCO1FBQUEsaUJBZ0JDO1FBZkEsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLEVBQUUsVUFBQyxLQUFjO1lBQ3RGLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ1gsS0FBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7WUFDbkIsQ0FBQztZQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxLQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNsQyxLQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxLQUFJLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxDQUFDO2dCQUNqRCxLQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsR0FBRyxLQUFJLENBQUMsS0FBSyxDQUFDO1lBQzFDLENBQUM7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RDLEtBQUksQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSyxFQUFPLE9BQU8sQ0FBQyxDQUFDO2dCQUM1RCxLQUFJLENBQUMsSUFBSSxDQUFDLGNBQWMsR0FBRyxLQUFJLENBQUMsS0FBSyxDQUFDO1lBQ3ZDLENBQUM7WUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMzQyxLQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3pCLENBQUM7UUFDRixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFDRix5QkFBQztBQUFELENBQUMsQUE1Q0QsSUE0Q0M7QUE1Q1ksMEJBQWtCLHFCQTRDOUIsQ0FBQTtBQU1ELHlCQUF5QixDQUFDLE9BQU8sR0FBRyxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUMvRCxtQ0FBMEMsaUJBQWtEO0lBQzNGLE1BQU0sQ0FBQztRQUNOLFdBQVcsWUFBQyxPQUFtQztZQUM5QyxNQUFNLENBQUMsSUFBSSxrQkFBa0IsQ0FBQyxpQkFBaUIsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUMzRCxDQUFDO0tBQ0QsQ0FBQztBQUNILENBQUM7QUFOZSxpQ0FBeUIsNEJBTXhDLENBQUE7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDbkQsT0FBTyxDQUFDLG1CQUFXLEVBQUUseUJBQXlCLENBQUMsQ0FBQyJ9

/***/ },
/* 117 */
/***/ function(module, exports) {

	module.exports = "<div class=\"input-group field date-time\" ng-class=\"{ 'has-warning': !dateTime.validFormat, 'error': dateTime.ngModel.$invalid, 'datepicker-with-clear': dateTime.clearButton }\">\r\n\t<span class=\"show-date-picker\">\r\n\t\t<input type=\"text\" class=\"form-control\" ng-model=\"dateTime.ngModel.$viewValue\" />\r\n\t\t<span class=\"input-group-btn\">\r\n\t\t\t<button class=\"btn btn-default\" ng-click=\"toggle()\"><i class=\"fa fa-calendar\"></i></button>\r\n\t\t</span>\r\n\t\t<span class=\"timezone\" ng-if=\"dateTime.useDate\">{{dateTime.timezone.display}}</span>\r\n\t</span>\r\n\t<span class=\"datepicker-clear\" ng-if=\"::dateTime.clearButton\">\r\n\t\t<button type=\"button\" class=\"btn btn-default\"  ng-disabled=\"dateTime.ngModel.$viewValue | isEmpty\" ng-click=\"dateTime.onClearClick()\" >\r\n\t\t\t<i class=\"fa fa-times\"></i>\r\n\t\t</button>\r\n\t</span>\r\n\t<span class=\"error-string angular-animate\" ng-if=\"dateTime.inputValidator.error | isEmpty:false\">{{dateTime.inputValidator.error}}</span>\r\n</div>"

/***/ },
/* 118 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	// /// <reference path='../../../typings/bootstrapDateTimePicker.d.ts' />
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.components.dateTimeStatic';
	exports.componentName = 'rlDateTimeStatic';
	var dateTimeStaticComponent = {
	    template: __webpack_require__(119),
	    controllerAs: 'view',
	    bindings: {
	        dateValue: '<',
	        includeTime: '<?',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, dateTimeStaticComponent);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZVRpbWVTdGF0aWMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRlVGltZVN0YXRpYy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYix5RUFBeUU7QUFFekUsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFJeEIsa0JBQVUsR0FBVyxpQ0FBaUMsQ0FBQztBQUN2RCxxQkFBYSxHQUFXLGtCQUFrQixDQUFDO0FBT3RELElBQUksdUJBQXVCLEdBQThCO0lBQ3hELFFBQVEsRUFBRSxPQUFPLENBQUMsdUJBQXVCLENBQUM7SUFDMUMsWUFBWSxFQUFFLE1BQU07SUFDcEIsUUFBUSxFQUFFO1FBQ1QsU0FBUyxFQUFFLEdBQUc7UUFDZCxXQUFXLEVBQUUsSUFBSTtLQUNqQjtDQUNELENBQUM7QUFFRixPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLHVCQUF1QixDQUFDLENBQUMifQ==

/***/ },
/* 119 */
/***/ function(module, exports) {

	module.exports = "<span class=\"rl-date-time-static\">{{view.dateValue | rlDate:view.includeTime}}</span>"

/***/ },
/* 120 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/node/node.d.ts' />
	// /// <reference path='../../../typings/jquery/jquery.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var dialog_service_1 = __webpack_require__(121);
	exports.moduleName = 'rl.ui.components.dialog';
	exports.componentName = 'rlDialog';
	exports.controllerName = 'DialogController';
	var DialogController = (function () {
	    function DialogController($scope, $element, $transclude, $compile, dialogService) {
	        this.$scope = $scope;
	        this.$element = $element;
	        this.$transclude = $transclude;
	        this.$compile = $compile;
	        this.dialogService = dialogService;
	    }
	    DialogController.prototype.$onInit = function () {
	        var _this = this;
	        var unbind = this.$scope.$watch(function () { return _this.form; }, function (form) {
	            if (form != null) {
	                _this.dialogService.setForm(form);
	                unbind();
	            }
	        });
	    };
	    DialogController.prototype.$postLink = function () {
	        var _this = this;
	        this.close = this.$scope.$parent.$close;
	        this.dismiss = this.$scope.$parent.$dismiss;
	        this.saveAndClose = this.$scope.$parent.$saveAndClose;
	        var footerArea = this.$element.find('.footer-template');
	        if (this.$transclude.isSlotFilled('footerSlot')) {
	            this.$transclude(function (footer) {
	                _this.hasFooter = (footer.length > 0);
	                if (_this.hasFooter) {
	                    footerArea.append(footer);
	                }
	            }, null, 'footerSlot');
	        }
	        else if (this.autosave) {
	            var footer = this.$compile(__webpack_require__(126))(this.$scope);
	            this.hasFooter = true;
	            footerArea.append(footer);
	        }
	    };
	    DialogController.$inject = ['$scope', '$element', '$transclude', '$compile', dialog_service_1.serviceName];
	    return DialogController;
	}());
	exports.DialogController = DialogController;
	var dialog = {
	    transclude: {
	        headerSlot: '?rlDialogHeader',
	        contentSlot: '?rlDialogContent',
	        footerSlot: '?rlDialogFooter',
	    },
	    template: __webpack_require__(127),
	    controller: exports.controllerName,
	    controllerAs: 'dialog',
	    bindings: {
	        autosave: '=',
	    },
	};
	angular.module(exports.moduleName, [dialog_service_1.moduleName])
	    .component(exports.componentName, dialog)
	    .controller(exports.controllerName, DialogController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhbG9nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZGlhbG9nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDJEQUEyRDtBQUMzRCwrREFBK0Q7QUFFL0QsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsK0JBQTRGLHNDQUFzQyxDQUFDLENBQUE7QUFHeEgsa0JBQVUsR0FBVyx5QkFBeUIsQ0FBQztBQUMvQyxxQkFBYSxHQUFXLFVBQVUsQ0FBQztBQUNuQyxzQkFBYyxHQUFXLGtCQUFrQixDQUFDO0FBaUJ2RDtJQVVDLDBCQUFvQixNQUFvQixFQUM1QixRQUFrQyxFQUNsQyxXQUF3QyxFQUN4QyxRQUFpQyxFQUNqQyxhQUFpQztRQUp6QixXQUFNLEdBQU4sTUFBTSxDQUFjO1FBQzVCLGFBQVEsR0FBUixRQUFRLENBQTBCO1FBQ2xDLGdCQUFXLEdBQVgsV0FBVyxDQUE2QjtRQUN4QyxhQUFRLEdBQVIsUUFBUSxDQUF5QjtRQUNqQyxrQkFBYSxHQUFiLGFBQWEsQ0FBb0I7SUFBRyxDQUFDO0lBRWpELGtDQUFPLEdBQVA7UUFBQSxpQkFPQztRQU5BLElBQUksTUFBTSxHQUFhLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQXdCLE1BQU0sQ0FBQyxLQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQUMsSUFBb0I7WUFDM0csRUFBRSxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLEtBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNqQyxNQUFNLEVBQUUsQ0FBQztZQUNWLENBQUM7UUFDRixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRCxvQ0FBUyxHQUFUO1FBQUEsaUJBa0JDO1FBakJBLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDO1FBQzVDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDO1FBQ3RELElBQUksVUFBVSxHQUFXLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFFaEUsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxXQUFXLENBQUMsVUFBQyxNQUFjO2dCQUMvQixLQUFJLENBQUMsU0FBUyxHQUFHLENBQUMsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztnQkFDckMsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7b0JBQ3BCLFVBQVUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQzNCLENBQUM7WUFDRixDQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ3hCLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7WUFDMUIsSUFBSSxNQUFNLEdBQVcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsNkJBQTZCLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN4RixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztZQUN0QixVQUFVLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzNCLENBQUM7SUFDRixDQUFDO0lBbENNLHdCQUFPLEdBQWEsQ0FBQyxRQUFRLEVBQUUsVUFBVSxFQUFFLGFBQWEsRUFBRSxVQUFVLEVBQUUsNEJBQWlCLENBQUMsQ0FBQztJQW1DakcsdUJBQUM7QUFBRCxDQUFDLEFBNUNELElBNENDO0FBNUNZLHdCQUFnQixtQkE0QzVCLENBQUE7QUFFRCxJQUFJLE1BQU0sR0FBOEI7SUFDdkMsVUFBVSxFQUFPO1FBQ2hCLFVBQVUsRUFBRSxpQkFBaUI7UUFDN0IsV0FBVyxFQUFFLGtCQUFrQjtRQUMvQixVQUFVLEVBQUUsaUJBQWlCO0tBQzdCO0lBQ0QsUUFBUSxFQUFFLE9BQU8sQ0FBQyxlQUFlLENBQUM7SUFDbEMsVUFBVSxFQUFFLHNCQUFjO0lBQzFCLFlBQVksRUFBRSxRQUFRO0lBQ3RCLFFBQVEsRUFBRTtRQUNULFFBQVEsRUFBRSxHQUFHO0tBQ2I7Q0FDRCxDQUFDO0FBRUYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsMkJBQVksQ0FBQyxDQUFDO0tBQ3hDLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLE1BQU0sQ0FBQztLQUNoQyxVQUFVLENBQUMsc0JBQWMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDIn0=

/***/ },
/* 121 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __promise = typescript_angular_utilities_1.services.promise;
	var __notification = typescript_angular_utilities_1.services.notification;
	var bootstrapModalDialog = __webpack_require__(122);
	exports.bootstrapModalDialog = bootstrapModalDialog;
	var autosave_service_1 = __webpack_require__(17);
	var form_service_1 = __webpack_require__(23);
	var dialog_1 = __webpack_require__(120);
	exports.componentName = dialog_1.componentName;
	exports.controllerName = dialog_1.controllerName;
	exports.DialogController = dialog_1.DialogController;
	exports.moduleName = 'rl.ui.services.dialog';
	exports.serviceName = 'dialog';
	var DialogService = (function () {
	    function DialogService(dialog, $rootScope, autosaveFactory, promise, notification, formService) {
	        var _this = this;
	        this.dialog = dialog;
	        this.$rootScope = $rootScope;
	        this.autosaveFactory = autosaveFactory;
	        this.promise = promise;
	        this.notification = notification;
	        this.formService = formService;
	        this.autosaveCloseHandler = function (explicit) {
	            if (explicit) {
	                return true;
	            }
	            return _this.autosave.autosave(_this.data);
	        };
	    }
	    DialogService.prototype.open = function (options, closeHandler) {
	        var _this = this;
	        var dialogInstance = this.dialog.open(options, closeHandler);
	        dialogInstance.validateAndNotify = function () {
	            var valid = _this.form.$valid;
	            if (!valid) {
	                _this.notification.warning(_this.formService.getAggregateError(_this.form));
	            }
	            return valid;
	        };
	        return dialogInstance;
	    };
	    DialogService.prototype.prompt = function (options) {
	        options.okButton = options.okButton || 'Ok';
	        options.cancelButton = options.cancelButton || 'Cancel';
	        return this.dialog.prompt(options, __webpack_require__(125));
	    };
	    DialogService.prototype.openForm = function (options) {
	        var _this = this;
	        var dialogInstance = {
	            close: function () { },
	            dismiss: function () { },
	            save: function () { },
	            saveAndClose: function () { },
	            validateAndNotify: function () { },
	        };
	        this.promise.resolvePromises(options.resolve).then(function (resolveData) {
	            var scope = options.scope;
	            if (scope == null) {
	                scope = _this.$rootScope.$new();
	                options.scope = scope;
	            }
	            if (options.data == null) {
	                options.data = {};
	            }
	            if (options.triggers == null) {
	                options.triggers = 'none';
	            }
	            _this.autosave = _this.autosaveFactory.getInstance({
	                save: options.save,
	                triggers: options.triggers,
	            });
	            _this.data = _.extend(options.data, resolveData);
	            scope.dialog = _this.data;
	            var instance = _this.open(options, _this.autosaveCloseHandler);
	            dialogInstance.close = instance.close;
	            dialogInstance.dismiss = instance.dismiss;
	            scope.$save = function () { return _this.autosave.validateAndSave(_this.data); };
	            ;
	            scope.$saveAndClose = function () {
	                var promise = scope.$save();
	                if (_.isBoolean(promise) && promise) {
	                    instance.close();
	                }
	                else if (_this.promise.isPromise(promise)) {
	                    promise.then(function () {
	                        instance.close();
	                    });
	                }
	                return promise;
	            };
	            dialogInstance.save = scope.$save;
	            dialogInstance.saveAndClose = scope.$saveAndClose;
	            dialogInstance.validateAndNotify = instance.validateAndNotify;
	        });
	        return dialogInstance;
	    };
	    DialogService.prototype.setForm = function (form) {
	        if (this.autosave != null) {
	            this.autosave.contentForm = form;
	        }
	        this.form = form;
	    };
	    return DialogService;
	}());
	exports.DialogService = DialogService;
	function dialogServiceProvider() {
	    'use strict';
	    var _this = this;
	    var provider = {
	        setImplementation: function (dialogImplementation) {
	            _this.dialogImplementation = dialogImplementation;
	        },
	        $get: function (bootstrapModalDialog, $rootScope, autosaveFactory, promise, notification, formService) {
	            var dialogImplementation = _this.dialogImplementation != null
	                ? _this.dialogImplementation
	                : bootstrapModalDialog;
	            return new DialogService(dialogImplementation, $rootScope, autosaveFactory, promise, notification, formService);
	        },
	    };
	    provider.$get.$inject = [bootstrapModalDialog.serviceName, '$rootScope', autosave_service_1.factoryName, __promise.serviceName, __notification.serviceName, form_service_1.serviceName];
	    return provider;
	}
	exports.dialogServiceProvider = dialogServiceProvider;
	angular.module(exports.moduleName, [bootstrapModalDialog.moduleName, autosave_service_1.moduleName, __notification.moduleName, form_service_1.moduleName])
	    .provider(exports.serviceName, dialogServiceProvider);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhbG9nLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkaWFsb2cuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFDYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNuQyxJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1Qiw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUN4RCxJQUFPLFNBQVMsR0FBRyx1Q0FBUSxDQUFDLE9BQU8sQ0FBQztBQUNwQyxJQUFPLGNBQWMsR0FBRyx1Q0FBUSxDQUFDLFlBQVksQ0FBQztBQUU5QyxJQUFZLG9CQUFvQixXQUFNLG9EQUFvRCxDQUFDLENBQUE7QUFXbEYsNEJBQW9CO0FBVDdCLGlDQUtPLDhCQUE4QixDQUFDLENBQUE7QUFDdEMsNkJBQXVGLHNCQUFzQixDQUFDLENBQUE7QUFJOUcsdUJBQWdFLGdDQUFnQyxDQUFDO0FBQXhGLCtDQUFhO0FBQUUsaURBQWM7QUFBRSxxREFBeUQ7QUFHdEYsa0JBQVUsR0FBVyx1QkFBdUIsQ0FBQztBQUM3QyxtQkFBVyxHQUFXLFFBQVEsQ0FBQztBQVExQztJQUtDLHVCQUFvQixNQUFvRCxFQUM1RCxVQUFxQyxFQUNyQyxlQUF3QyxFQUN4QyxPQUFrQyxFQUNsQyxZQUFpRCxFQUNqRCxXQUF5QjtRQVZ0QyxpQkF5R0M7UUFwR29CLFdBQU0sR0FBTixNQUFNLENBQThDO1FBQzVELGVBQVUsR0FBVixVQUFVLENBQTJCO1FBQ3JDLG9CQUFlLEdBQWYsZUFBZSxDQUF5QjtRQUN4QyxZQUFPLEdBQVAsT0FBTyxDQUEyQjtRQUNsQyxpQkFBWSxHQUFaLFlBQVksQ0FBcUM7UUFDakQsZ0JBQVcsR0FBWCxXQUFXLENBQWM7UUFpRjdCLHlCQUFvQixHQUE4QixVQUFDLFFBQWlCO1lBQzNFLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ2QsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNiLENBQUM7WUFFRCxNQUFNLENBQUMsS0FBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsS0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFDLENBQUMsQ0FBQTtJQXZGd0MsQ0FBQztJQUUxQyw0QkFBSSxHQUFKLFVBQUssT0FBd0IsRUFBRSxZQUF3QztRQUF2RSxpQkFZQztRQVhBLElBQUksY0FBYyxHQUEwQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLENBQUM7UUFDcEYsY0FBYyxDQUFDLGlCQUFpQixHQUFHO1lBQ2xDLElBQUksS0FBSyxHQUFZLEtBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1lBRXRDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDWixLQUFJLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFJLENBQUMsV0FBVyxDQUFDLGlCQUFpQixDQUFDLEtBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzFFLENBQUM7WUFFRCxNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2QsQ0FBQyxDQUFDO1FBQ0YsTUFBTSxDQUFDLGNBQWMsQ0FBQztJQUN2QixDQUFDO0lBRUQsOEJBQU0sR0FBTixVQUFPLE9BQThCO1FBQ3BDLE9BQU8sQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUM7UUFDNUMsT0FBTyxDQUFDLFlBQVksR0FBRyxPQUFPLENBQUMsWUFBWSxJQUFJLFFBQVEsQ0FBQztRQUV4RCxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUM7SUFDcEUsQ0FBQztJQUVELGdDQUFRLEdBQVIsVUFBUyxPQUFzQztRQUEvQyxpQkF3REM7UUF2REEsSUFBSSxjQUFjLEdBQWtDO1lBQ25ELEtBQUssZ0JBQVUsQ0FBQztZQUNoQixPQUFPLGdCQUFXLENBQUM7WUFDbkIsSUFBSSxnQkFBVSxDQUFDO1lBQ2YsWUFBWSxnQkFBVSxDQUFDO1lBQ3ZCLGlCQUFpQixnQkFBVyxDQUFDO1NBQzdCLENBQUM7UUFFRixJQUFJLENBQUMsT0FBTyxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQUMsV0FBZ0I7WUFDbkUsSUFBSSxLQUFLLEdBQTJELE9BQU8sQ0FBQyxLQUFLLENBQUM7WUFFbEYsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ25CLEtBQUssR0FBK0IsS0FBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztnQkFDM0QsT0FBTyxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7WUFDdkIsQ0FBQztZQUVELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDMUIsT0FBTyxDQUFDLElBQUksR0FBRyxFQUFFLENBQUM7WUFDbkIsQ0FBQztZQUVELEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDOUIsT0FBTyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7WUFDM0IsQ0FBQztZQUVELEtBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSSxDQUFDLGVBQWUsQ0FBQyxXQUFXLENBQUM7Z0JBQ2hELElBQUksRUFBRSxPQUFPLENBQUMsSUFBSTtnQkFDbEIsUUFBUSxFQUFFLE9BQU8sQ0FBQyxRQUFRO2FBQzFCLENBQUMsQ0FBQztZQUVILEtBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBQ2hELEtBQUssQ0FBQyxNQUFNLEdBQUcsS0FBSSxDQUFDLElBQUksQ0FBQztZQUV6QixJQUFJLFFBQVEsR0FBdUMsS0FBSSxDQUFDLElBQUksQ0FBTSxPQUFPLEVBQUUsS0FBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7WUFDdEcsY0FBYyxDQUFDLEtBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQ3RDLGNBQWMsQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDLE9BQU8sQ0FBQztZQUUxQyxLQUFLLENBQUMsS0FBSyxHQUFHLGNBQTBDLE1BQU0sQ0FBQyxLQUFJLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxLQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFBQSxDQUFDO1lBQzVHLEtBQUssQ0FBQyxhQUFhLEdBQUc7Z0JBQ3JCLElBQUksT0FBTyxHQUFRLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDakMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDO29CQUNyQyxRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ2xCLENBQUM7Z0JBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDNUMsT0FBTyxDQUFDLElBQUksQ0FBQzt3QkFDWixRQUFRLENBQUMsS0FBSyxFQUFFLENBQUM7b0JBQ2xCLENBQUMsQ0FBQyxDQUFDO2dCQUNKLENBQUM7Z0JBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQztZQUNoQixDQUFDLENBQUM7WUFFRixjQUFjLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUM7WUFDbEMsY0FBYyxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUMsYUFBYSxDQUFDO1lBQ2xELGNBQWMsQ0FBQyxpQkFBaUIsR0FBRyxRQUFRLENBQUMsaUJBQWlCLENBQUM7UUFDL0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsY0FBYyxDQUFDO0lBQ3ZCLENBQUM7SUFVRCwrQkFBTyxHQUFQLFVBQVEsSUFBb0I7UUFDM0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzNCLElBQUksQ0FBQyxRQUFRLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztRQUNsQyxDQUFDO1FBQ0QsSUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7SUFDbEIsQ0FBQztJQUNGLG9CQUFDO0FBQUQsQ0FBQyxBQXpHRCxJQXlHQztBQXpHWSxxQkFBYSxnQkF5R3pCLENBQUE7QUFZRDtJQUNDLFlBQVksQ0FBQztJQURkLGlCQXFCQztJQWxCQSxJQUFJLFFBQVEsR0FBNEM7UUFDdkQsaUJBQWlCLEVBQUUsVUFBQyxvQkFBa0U7WUFDckYsS0FBSSxDQUFDLG9CQUFvQixHQUFHLG9CQUFvQixDQUFDO1FBQ2xELENBQUM7UUFDRCxJQUFJLEVBQUUsVUFBQyxvQkFBdUUsRUFDM0UsVUFBcUMsRUFDckMsZUFBd0MsRUFDeEMsT0FBa0MsRUFDbEMsWUFBaUQsRUFDakQsV0FBeUI7WUFDM0IsSUFBSSxvQkFBb0IsR0FBaUQsS0FBSSxDQUFDLG9CQUFvQixJQUFJLElBQUk7a0JBQ3hGLEtBQUksQ0FBQyxvQkFBb0I7a0JBQ3pCLG9CQUFvQixDQUFDO1lBQ3ZDLE1BQU0sQ0FBQyxJQUFJLGFBQWEsQ0FBa0Isb0JBQW9CLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxPQUFPLEVBQUUsWUFBWSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1FBQ2xJLENBQUM7S0FDRCxDQUFDO0lBQ0YsUUFBUSxDQUFDLElBQUksQ0FBQyxPQUFPLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxXQUFXLEVBQUUsWUFBWSxFQUFFLDhCQUFtQixFQUFFLFNBQVMsQ0FBQyxXQUFXLEVBQUUsY0FBYyxDQUFDLFdBQVcsRUFBRSwwQkFBZSxDQUFDLENBQUM7SUFDbEssTUFBTSxDQUFDLFFBQVEsQ0FBQztBQUNqQixDQUFDO0FBckJlLDZCQUFxQix3QkFxQnBDLENBQUE7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQyxVQUFVLEVBQUUsNkJBQWMsRUFBRSxjQUFjLENBQUMsVUFBVSxFQUFFLHlCQUFVLENBQUMsQ0FBQztLQUNsSCxRQUFRLENBQUMsbUJBQVcsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDIn0=

/***/ },
/* 122 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __promise = typescript_angular_utilities_1.services.promise;
	var bootstrapModalDialog_controller_1 = __webpack_require__(123);
	var bootstrapModalDialog_service_1 = __webpack_require__(124);
	__export(__webpack_require__(123));
	__export(__webpack_require__(124));
	exports.moduleName = 'rl.ui.services.dialog.bootstrapModalDialog';
	angular.module(exports.moduleName, [__promise.moduleName])
	    .controller(bootstrapModalDialog_controller_1.controllerName, bootstrapModalDialog_controller_1.BootstrapModalDialogController)
	    .service(bootstrapModalDialog_service_1.serviceName, bootstrapModalDialog_service_1.BootstrapModalDialogService);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9vdHN0cmFwTW9kYWxEaWFsb2cubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYm9vdHN0cmFwTW9kYWxEaWFsb2cubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sU0FBUyxHQUFHLHVDQUFRLENBQUMsT0FBTyxDQUFDO0FBRXBDLGdEQUErRCxtQ0FBbUMsQ0FBQyxDQUFBO0FBQ25HLDZDQUF5RCxnQ0FBZ0MsQ0FBQyxDQUFBO0FBRTFGLGlCQUFjLG1DQUFtQyxDQUFDLEVBQUE7QUFDbEQsaUJBQWMsZ0NBQWdDLENBQUMsRUFBQTtBQUVwQyxrQkFBVSxHQUFXLDRDQUE0QyxDQUFDO0FBRTdFLE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUNoRCxVQUFVLENBQUMsZ0RBQWMsRUFBRSxnRUFBOEIsQ0FBQztLQUMxRCxPQUFPLENBQUMsMENBQVcsRUFBRSwwREFBMkIsQ0FBQyxDQUFDIn0=

/***/ },
/* 123 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var bootstrapModalDialog_service_1 = __webpack_require__(124);
	exports.controllerName = 'BootstrapModalDialogController';
	var BootstrapModalDialogController = (function () {
	    function BootstrapModalDialogController($scope, $controller, baseDialog) {
	        var controller;
	        if ($scope.modalController != null) {
	            var locals = $scope.resolveData || {};
	            $scope.resolveData = null;
	            locals.$scope = $scope;
	            controller = $controller($scope.modalController, locals);
	        }
	        $scope.$on('modal.closing', baseDialog.modalClosing);
	        return controller;
	    }
	    BootstrapModalDialogController.$inject = ['$scope', '$controller', bootstrapModalDialog_service_1.serviceName];
	    return BootstrapModalDialogController;
	}());
	exports.BootstrapModalDialogController = BootstrapModalDialogController;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9vdHN0cmFwTW9kYWxEaWFsb2cuY29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJvb3RzdHJhcE1vZGFsRGlhbG9nLmNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBR2IsNkNBQXlELGdDQUFnQyxDQUFDLENBQUE7QUFFL0Usc0JBQWMsR0FBVyxnQ0FBZ0MsQ0FBQztBQU9yRTtJQUVDLHdDQUFZLE1BQWtDLEVBQzFDLFdBQWtDLEVBQ2xDLFVBQXVDO1FBQzFDLElBQUksVUFBZSxDQUFDO1FBRXBCLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxlQUFlLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNwQyxJQUFJLE1BQU0sR0FBUSxNQUFNLENBQUMsV0FBVyxJQUFJLEVBQUUsQ0FBQztZQUMzQyxNQUFNLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztZQUMxQixNQUFNLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztZQUV2QixVQUFVLEdBQUcsV0FBVyxDQUFNLE1BQU0sQ0FBQyxlQUFlLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0QsQ0FBQztRQUVELE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxFQUFFLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUVyRCxNQUFNLENBQUMsVUFBVSxDQUFDO0lBQ25CLENBQUM7SUFqQk0sc0NBQU8sR0FBYSxDQUFDLFFBQVEsRUFBRSxhQUFhLEVBQUUsMENBQVcsQ0FBQyxDQUFDO0lBa0JuRSxxQ0FBQztBQUFELENBQUMsQUFuQkQsSUFtQkM7QUFuQlksc0NBQThCLGlDQW1CMUMsQ0FBQSJ9

/***/ },
/* 124 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __promise = typescript_angular_utilities_1.services.promise;
	var bootstrapModalDialog_controller_1 = __webpack_require__(123);
	exports.serviceName = 'uiBootstrapModelDialog';
	var BootstrapModalDialogService = (function () {
	    function BootstrapModalDialogService($modal, $rootScope, promise) {
	        var _this = this;
	        this.$modal = $modal;
	        this.$rootScope = $rootScope;
	        this.promise = promise;
	        this.modalClosing = function (event, reason, explicitlyClosed) {
	            var canClose = true;
	            if (_.isFunction(_this.closeHandler)) {
	                canClose = _this.closeHandler(explicitlyClosed);
	            }
	            if (!canClose) {
	                event.preventDefault();
	            }
	        };
	    }
	    BootstrapModalDialogService.prototype.open = function (options, closeHandler) {
	        var _this = this;
	        if (options == null) {
	            options = {};
	        }
	        var dialogInstance = {
	            close: function () { },
	            dismiss: function () { },
	        };
	        this.promise.resolvePromises(options.resolve).then(function (results) {
	            _this.closeHandler = closeHandler;
	            options = _this.configureModalSettings(options, results);
	            var modalInstance = _this.$modal.open(options);
	            dialogInstance.close = modalInstance.close;
	            dialogInstance.dismiss = modalInstance.dismiss;
	        });
	        return dialogInstance;
	    };
	    BootstrapModalDialogService.prototype.prompt = function (options, template) {
	        var acceptHandler = options.acceptHandler || function () { };
	        var cancelHandler = options.cancelHandler || function () { };
	        options.acceptHandler = null;
	        options.cancelHandler = null;
	        var modalScope = this.$rootScope.$new();
	        modalScope.prompt = options;
	        var settings = {
	            scope: modalScope,
	            template: template,
	            controller: bootstrapModalDialog_controller_1.controllerName,
	        };
	        var modalInstance = this.$modal.open(settings);
	        var accept = function () {
	            acceptHandler();
	            modalInstance.close();
	        };
	        var cancel = function () {
	            cancelHandler();
	            modalInstance.close();
	        };
	        modalScope.$accept = accept;
	        modalScope.$cancel = cancel;
	        return {
	            accept: accept,
	            cancel: cancel,
	            close: modalInstance.close,
	            dismiss: modalInstance.dismiss,
	        };
	    };
	    BootstrapModalDialogService.prototype.configureModalSettings = function (options, resolveData) {
	        var modalScope = options.scope;
	        if (modalScope == null) {
	            modalScope = this.$rootScope.$new();
	        }
	        if (options.resolveToDialog) {
	            if (options.dialogAs != null) {
	                modalScope[options.dialogAs] = resolveData;
	            }
	            else {
	                modalScope = _.extend(modalScope, resolveData);
	            }
	        }
	        else {
	            modalScope.resolveData = resolveData;
	        }
	        modalScope.modalController = options.controller;
	        options.resolve = null;
	        options.controller = bootstrapModalDialog_controller_1.controllerName;
	        options.scope = modalScope;
	        return options;
	    };
	    BootstrapModalDialogService.$inject = ['$uibModal', '$rootScope', __promise.serviceName];
	    return BootstrapModalDialogService;
	}());
	exports.BootstrapModalDialogService = BootstrapModalDialogService;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYm9vdHN0cmFwTW9kYWxEaWFsb2cuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJvb3RzdHJhcE1vZGFsRGlhbG9nLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBR2IsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxTQUFTLEdBQUcsdUNBQVEsQ0FBQyxPQUFPLENBQUM7QUFVcEMsZ0RBQTJELG1DQUFtQyxDQUFDLENBQUE7QUFFcEYsbUJBQVcsR0FBVyx3QkFBd0IsQ0FBQztBQWlCMUQ7SUFJQyxxQ0FBb0IsTUFBcUMsRUFDN0MsVUFBZ0MsRUFDaEMsT0FBa0M7UUFOL0MsaUJBd0dDO1FBcEdvQixXQUFNLEdBQU4sTUFBTSxDQUErQjtRQUM3QyxlQUFVLEdBQVYsVUFBVSxDQUFzQjtRQUNoQyxZQUFPLEdBQVAsT0FBTyxDQUEyQjtRQTZEOUMsaUJBQVksR0FDVCxVQUFDLEtBQXVCLEVBQUUsTUFBVyxFQUFFLGdCQUF5QjtZQUNsRSxJQUFJLFFBQVEsR0FBWSxJQUFJLENBQUM7WUFFN0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxLQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxRQUFRLEdBQUcsS0FBSSxDQUFDLFlBQVksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1lBQ2hELENBQUM7WUFFRCxFQUFFLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7Z0JBQ2YsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3hCLENBQUM7UUFDRixDQUFDLENBQUE7SUF4RWlELENBQUM7SUFFbkQsMENBQUksR0FBSixVQUFLLE9BQXNDLEVBQUUsWUFBa0M7UUFBL0UsaUJBbUJDO1FBbEJBLEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxJQUFJLENBQUMsQ0FBQyxD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

/***/ },
/* 125 */
/***/ function(module, exports) {

	module.exports = "<div class=\"modal-body\">\r\n\t<div class=\"row\">\r\n\t\t<div class=\"col-xs-12\">\r\n\t\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\" ng-click=\"$dismiss()\">\r\n\t\t\t\t<span class=\"fa-stack\">\r\n\t\t\t\t\t<i class=\"close-bg fa fa-circle fa-stack-2x\"></i>\r\n\t\t\t\t\t<i class=\"close-icon fa fa-close fa-stack-1x\"></i>\r\n\t\t\t\t</span>\r\n\t\t\t</button>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t{{prompt.message}}\r\n\t<div class=\"clearfix\"></div>\r\n</div>\r\n<div class=\"modal-footer\">\r\n\t<button class=\"btn btn-danger\" type=\"button\" ng-click=\"$cancel()\"><i class=\"fa fa-times\"></i> {{prompt.cancelButton}}</button>\r\n\t<button class=\"btn btn-success\" type=\"button\" ng-click=\"$accept()\"><i class=\"fa fa-check\"></i> {{prompt.okButton}}</button>\r\n\t<div class=\"clearfix\"></div>\r\n</div>"

/***/ },
/* 126 */
/***/ function(module, exports) {

	module.exports = "<rl-button type=\"danger\" action=\"dialog.close()\"><i class=\"fa fa-times\"></i> Cancel</rl-button>\r\n<rl-button-async type=\"success\" action=\"dialog.saveAndClose()\"><i class=\"fa fa-check\"></i> Save</rl-button-submit>"

/***/ },
/* 127 */
/***/ function(module, exports) {

	module.exports = "<rl-form save=\"dialog.saveAndClose()\" saving=\"dialog.saving\" form=\"dialog.form\">\r\n\t<div class=\"modal-header\">\r\n\t\t<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\" ng-click=\"dialog.close()\">\r\n\t\t\t<span class=\"fa-stack\">\r\n\t\t\t\t<i class=\"close-bg fa fa-circle fa-stack-2x\"></i>\r\n\t\t\t\t<i class=\"close-icon fa fa-close fa-stack-1x\"></i>\r\n\t\t\t</span>\r\n\t\t</button>\r\n\t\t<div ng-transclude=\"headerSlot\"></div>\r\n\t\t<div class=\"clearfix \"></div>\r\n\t</div>\r\n\t<div class=\"modal-body\">\r\n\t\t<div ng-transclude=\"contentSlot\"></div>\r\n\t\t<div class=\"clearfix\"></div>\r\n\t</div>\r\n\t<div class=\"modal-footer\" ng-show=\"dialog.hasFooter\">\r\n\t\t<div class=\"footer-template\"></div>\r\n\t\t<div class=\"clearfix\"></div>\r\n\t</div>\r\n</rl-form>"

/***/ },
/* 128 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/node/node.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __parentChild = typescript_angular_utilities_1.services.parentChildBehavior;
	var autosave_service_1 = __webpack_require__(17);
	exports.moduleName = 'rl.ui.components.form';
	exports.componentName = 'rlForm';
	exports.controllerName = 'rlFormController';
	var FormController = (function () {
	    function FormController($element, $scope, $timeout, $q, autosaveFactory, parentChild) {
	        this.$element = $element;
	        this.$scope = $scope;
	        this.$timeout = $timeout;
	        this.$q = $q;
	        this.autosaveFactory = autosaveFactory;
	        this.parentChild = parentChild;
	    }
	    FormController.prototype.$onInit = function () {
	        var _this = this;
	        this.$timeout(function () {
	            _this.form = _this.$scope.rlForm;
	            _this.autosave = _this.autosaveFactory.getInstance({
	                save: _this.saveForm.bind(_this),
	                contentForm: _this.$scope.rlForm,
	                triggers: 'none',
	            });
	            _this.parentChild.registerChildBehavior(_this.childLink, {
	                save: _this.autosave.validateAndSave.bind(_this.autosave),
	            });
	        });
	    };
	    FormController.prototype.saveForm = function () {
	        var _this = this;
	        this.saving = true;
	        return this.$q.when(this.save()).then(function () {
	            _this.saving = false;
	        }).catch(function () { _this.saving = false; });
	    };
	    FormController.$inject = ['$element', '$scope', '$timeout', '$q', autosave_service_1.factoryName, __parentChild.serviceName];
	    return FormController;
	}());
	exports.FormController = FormController;
	var form = {
	    transclude: true,
	    template: "<form ng-transclude name=\"rlForm\" ng-submit=\"controller.autosave.validateAndSave()\"></form>",
	    controller: exports.controllerName,
	    controllerAs: 'controller',
	    bindings: {
	        saving: '=?',
	        save: '&',
	        form: '=?',
	        childLink: '=?',
	    },
	};
	angular.module(exports.moduleName, [autosave_service_1.moduleName])
	    .component(exports.componentName, form)
	    .controller(exports.controllerName, FormController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZvcm0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMkRBQTJEO0FBRTNELFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBR25DLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sYUFBYSxHQUFHLHVDQUFRLENBQUMsbUJBQW1CLENBQUM7QUFHcEQsaUNBQTRILDBDQUEwQyxDQUFDLENBQUE7QUFFNUosa0JBQVUsR0FBVyx1QkFBdUIsQ0FBQztBQUM3QyxxQkFBYSxHQUFXLFFBQVEsQ0FBQztBQUNqQyxzQkFBYyxHQUFXLGtCQUFrQixDQUFDO0FBZXZEO0lBU0Msd0JBQW9CLFFBQWtDLEVBQzFDLE1BQWtCLEVBQ2xCLFFBQWlDLEVBQ2pDLEVBQXFCLEVBQ3JCLGVBQXdDLEVBQ3hDLFdBQXNEO1FBTDlDLGFBQVEsR0FBUixRQUFRLENBQTBCO1FBQzFDLFdBQU0sR0FBTixNQUFNLENBQVk7UUFDbEIsYUFBUSxHQUFSLFFBQVEsQ0FBeUI7UUFDakMsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFDckIsb0JBQWUsR0FBZixlQUFlLENBQXlCO1FBQ3hDLGdCQUFXLEdBQVgsV0FBVyxDQUEyQztJQUFJLENBQUM7SUFFdkUsZ0NBQU8sR0FBUDtRQUFBLGlCQWFDO1FBWkEsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNiLEtBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUM7WUFDL0IsS0FBSSxDQUFDLFFBQVEsR0FBRyxLQUFJLENBQUMsZUFBZSxDQUFDLFdBQVcsQ0FBQztnQkFDaEQsSUFBSSxFQUFFLEtBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQztnQkFDOUIsV0FBVyxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUMsTUFBTTtnQkFDL0IsUUFBUSxFQUFFLE1BQU07YUFDaEIsQ0FBQyxDQUFDO1lBRUgsS0FBSSxDQUFDLFdBQVcsQ0FBQyxxQkFBcUIsQ0FBQyxLQUFJLENBQUMsU0FBUyxFQUFFO2dCQUN0RCxJQUFJLEVBQUUsS0FBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEtBQUksQ0FBQyxRQUFRLENBQUM7YUFDdkQsQ0FBQyxDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQsaUNBQVEsR0FBUjtRQUFBLGlCQUtDO1FBSkEsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNyQyxLQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNyQixDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsY0FBYyxLQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUE1Qk0sc0JBQU8sR0FBYSxDQUFDLFVBQVUsRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLElBQUksRUFBRSw4QkFBbUIsRUFBRSxhQUFhLENBQUMsV0FBVyxDQUFDLENBQUM7SUE2QnJILHFCQUFDO0FBQUQsQ0FBQyxBQXJDRCxJQXFDQztBQXJDWSxzQkFBYyxpQkFxQzFCLENBQUE7QUFFRCxJQUFJLElBQUksR0FBOEI7SUFDckMsVUFBVSxFQUFFLElBQUk7SUFDaEIsUUFBUSxFQUFFLGlHQUE2RjtJQUN2RyxVQUFVLEVBQUUsc0JBQWM7SUFDMUIsWUFBWSxFQUFFLFlBQVk7SUFDMUIsUUFBUSxFQUFFO1FBQ1QsTUFBTSxFQUFFLElBQUk7UUFDWixJQUFJLEVBQUUsR0FBRztRQUNULElBQUksRUFBRSxJQUFJO1FBQ1YsU0FBUyxFQUFFLElBQUk7S0FDZjtDQUNELENBQUM7QUFFRixPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsQ0FBQyw2QkFBYyxDQUFDLENBQUM7S0FDMUMsU0FBUyxDQUFDLHFCQUFhLEVBQUUsSUFBSSxDQUFDO0tBQzlCLFVBQVUsQ0FBQyxzQkFBYyxFQUFFLGNBQWMsQ0FBQyxDQUFDIn0=

/***/ },
/* 129 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var jquery_service_1 = __webpack_require__(130);
	var templateLoader_service_1 = __webpack_require__(131);
	exports.moduleName = 'rl.ui.components.genericContainer';
	exports.componentName = 'rlGenericContainer';
	exports.controllerName = 'GenericContainerController';
	var __object = typescript_angular_utilities_1.services.object;
	var GenericContainerController = (function () {
	    function GenericContainerController($scope, $element, $transclude, $compile, object, jquery, templateLoader) {
	        var _this = this;
	        this.$element = $element;
	        this.$transclude = $transclude;
	        this.$compile = $compile;
	        this.object = object;
	        this.jquery = jquery;
	        this.templateLoader = templateLoader;
	        $scope.$watch(function () { return _this.selector; }, function (newType, oldType) {
	            if (_this.object.areEqual(newType, oldType)) {
	                return;
	            }
	            var template = _this.resolveTemplate(newType);
	            _this.swapTemplates(template);
	        });
	    }
	    GenericContainerController.prototype.refresh = function () {
	        var template = this.resolveTemplate(this.selector);
	        this.swapTemplates(template);
	    };
	    GenericContainerController.prototype.resolveTemplate = function (type) {
	        if (_.has(this.templates, type)) {
	            return this.templates[type];
	        }
	        else {
	            return this.default;
	        }
	    };
	    GenericContainerController.prototype.$postLink = function () {
	        this.initDefaults();
	        this.container = this.$element.find('#container');
	        var templateResult = this.templateLoader.loadTemplates(this.$transclude);
	        this.templates = _.extend(this.templates, templateResult.templates);
	        this.default = templateResult.default;
	        this.templateScope = templateResult.transclusionScope;
	        if (!this.default) {
	            this.default = '<div></div>';
	        }
	        this.refresh();
	    };
	    GenericContainerController.prototype.initDefaults = function () {
	        this.default = this.defaultTemplate;
	        this.templates = this.configuredTemplates ? this.configuredTemplates : {};
	    };
	    GenericContainerController.prototype.swapTemplates = function (template) {
	        var content = angular.element(template);
	        this.jquery.replaceContent(this.container, content);
	        this.$compile(content)(this.templateScope);
	    };
	    GenericContainerController.$inject = ['$scope',
	        '$element',
	        '$transclude',
	        '$compile',
	        __object.serviceName,
	        jquery_service_1.serviceName,
	        templateLoader_service_1.serviceName];
	    return GenericContainerController;
	}());
	exports.GenericContainerController = GenericContainerController;
	var genericContainer = {
	    template: '<div id="container"></div>',
	    transclude: true,
	    controller: exports.controllerName,
	    controllerAs: 'genericContainer',
	    bindings: {
	        selector: '<',
	        configuredTemplates: '<templates',
	        defaultTemplate: '<',
	    },
	};
	angular.module(exports.moduleName, [jquery_service_1.moduleName, __object.moduleName, templateLoader_service_1.moduleName])
	    .component(exports.componentName, genericContainer)
	    .controller(exports.controllerName, GenericContainerController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJpY0NvbnRhaW5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImdlbmVyaWNDb250YWluZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFFeEQsK0JBSU8sc0NBQXNDLENBQUMsQ0FBQTtBQUU5Qyx1Q0FJTyxzREFBc0QsQ0FBQyxDQUFBO0FBRW5ELGtCQUFVLEdBQVcsbUNBQW1DLENBQUM7QUFDekQscUJBQWEsR0FBVyxvQkFBb0IsQ0FBQztBQUM3QyxzQkFBYyxHQUFXLDRCQUE0QixDQUFDO0FBRWpFLElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBRWxDO0lBa0JDLG9DQUFZLE1BQXNCLEVBQ3RCLFFBQWtDLEVBQ2xDLFdBQXdDLEVBQ3hDLFFBQWlDLEVBQ2pDLE1BQStCLEVBQy9CLE1BQXNCLEVBQ3RCLGNBQStCO1FBeEI1QyxpQkEyRUM7UUF4RFksYUFBUSxHQUFSLFFBQVEsQ0FBMEI7UUFDbEMsZ0JBQVcsR0FBWCxXQUFXLENBQTZCO1FBQ3hDLGFBQVEsR0FBUixRQUFRLENBQXlCO1FBQ2pDLFdBQU0sR0FBTixNQUFNLENBQXlCO1FBQy9CLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQ3RCLG1CQUFjLEdBQWQsY0FBYyxDQUFpQjtRQUMxQyxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWEsTUFBTSxDQUFDLEtBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsVUFBQyxPQUFZLEVBQUUsT0FBWTtZQUM5RSxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM1QyxNQUFNLENBQUM7WUFDUixDQUFD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

/***/ },
/* 130 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path="../../../typings/jquery/jquery.d.ts" />
	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.utilities.services.jquery';
	exports.serviceName = 'jqueryUtility';
	var JQueryUtility = (function () {
	    function JQueryUtility() {
	    }
	    JQueryUtility.prototype.replaceContent = function (contentArea, newContent) {
	        contentArea.empty();
	        return contentArea.append(newContent);
	    };
	    return JQueryUtility;
	}());
	angular.module(exports.moduleName, [])
	    .service(exports.serviceName, JQueryUtility);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianF1ZXJ5LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJqcXVlcnkuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwrREFBK0Q7QUFFL0QsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFeEIsa0JBQVUsR0FBVyw4QkFBOEIsQ0FBQztBQUNwRCxtQkFBVyxHQUFXLGVBQWUsQ0FBQztBQU1qRDtJQUFBO0lBS0EsQ0FBQztJQUpBLHNDQUFjLEdBQWQsVUFBZSxXQUFtQixFQUFFLFVBQWtCO1FBQ3JELFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUNwQixNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBQ0Ysb0JBQUM7QUFBRCxDQUFDLEFBTEQsSUFLQztBQUVELE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxFQUFFLENBQUM7S0FDNUIsT0FBTyxDQUFDLG1CQUFXLEVBQUUsYUFBYSxDQUFDLENBQUMifQ==

/***/ },
/* 131 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/jquery/jquery.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	exports.moduleName = 'rl.utilities.services.templateLoader';
	exports.serviceName = 'templateLoader';
	var TemplateLoader = (function () {
	    function TemplateLoader($interpolate, templateSelectorValue, objectUtility) {
	        this.$interpolate = $interpolate;
	        this.templateSelectorValue = templateSelectorValue;
	        this.objectUtility = objectUtility;
	    }
	    TemplateLoader.prototype.loadTemplates = function (transclude) {
	        var _this = this;
	        var result = {
	            templates: {},
	            default: null,
	            transclusionScope: null,
	        };
	        // Load templates from the DOM
	        transclude(function (clone, transclusionScope) {
	            var templates = clone.filter(_this.templateSelectorValue);
	            templates.each(function (index, template) {
	                var templateElement = angular.element(template);
	                var templateHtml = templateElement.html();
	                var triggerAttribute = templateElement.attr('when-selector');
	                if (!_this.objectUtility.isNullOrWhitespace(triggerAttribute)) {
	                    var trigger = _this.$interpolate(triggerAttribute)(transclusionScope);
	                    result.templates[trigger] = templateHtml;
	                }
	                var isDefault = templateElement.attr('default');
	                if (!_.isUndefined(isDefault) && isDefault.toLowerCase() !== 'false') {
	                    result.default = templateHtml;
	                }
	            });
	            result.transclusionScope = transclusionScope;
	        });
	        return result;
	    };
	    TemplateLoader.$inject = ['$interpolate', 'templateSelectorValue', __object.serviceName];
	    return TemplateLoader;
	}());
	angular.module(exports.moduleName, [__object.moduleName])
	    .value('templateSelectorValue', 'template')
	    .service(exports.serviceName, TemplateLoader);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVtcGxhdGVMb2FkZXIuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRlbXBsYXRlTG9hZGVyLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsK0RBQStEO0FBRS9ELFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBRXZCLGtCQUFVLEdBQVcsc0NBQXNDLENBQUM7QUFDNUQsbUJBQVcsR0FBVyxnQkFBZ0IsQ0FBQztBQVlsRDtJQUVDLHdCQUFvQixZQUF5QyxFQUNsRCxxQkFBcUIsRUFDckIsYUFBc0M7UUFGN0IsaUJBQVksR0FBWixZQUFZLENBQTZCO1FBQ2xELDBCQUFxQixHQUFyQixxQkFBcUIsQ0FBQTtRQUNyQixrQkFBYSxHQUFiLGFBQWEsQ0FBeUI7SUFBSSxDQUFDO0lBRXRELHNDQUFhLEdBQWIsVUFBYyxVQUF1QztRQUFyRCxpQkFpQ0M7UUFoQ0EsSUFBSSxNQUFNLEdBQW1CO1lBQzVCLFNBQVMsRUFBRSxFQUFFO1lBQ2IsT0FBTyxFQUFFLElBQUk7WUFDYixpQkFBaUIsRUFBRSxJQUFJO1NBQ3ZCLENBQUM7UUFFRiw4QkFBOEI7UUFDOUIsVUFBVSxDQUFDLFVBQUMsS0FBK0IsRUFDeEMsaUJBQWlDO1lBQ25DLElBQUksU0FBUyxHQUFXLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBSSxDQUFDLHFCQUFxQixDQUFDLENBQUM7WUFFakUsU0FBUyxDQUFDLElBQUksQ0FBQyxVQUFDLEtBQWEsRUFDekIsUUFBaUI7Z0JBQ3BCLElBQUksZUFBZSxHQUE2QixPQUFPLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUMxRSxJQUFJLFlBQVksR0FBVyxlQUFlLENBQUMsSUFBSSxFQUFFLENBQUM7Z0JBRWxELElBQUksZ0JBQWdCLEdBQVcsZUFBZSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQztnQkFDckUsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFJLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxDQUFDO29CQUM5RCxJQUFJLE9BQU8sR0FBVyxLQUFJLENBQUMsWUFBWSxDQUFDLGdCQUFnQixDQUFDLENBQUMsaUJBQWlCLENBQUMsQ0FBQztvQkFDN0UsTUFBTSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxZQUFZLENBQUM7Z0JBQzFDLENBQUM7Z0JBRUQsSUFBSSxTQUFTLEdBQVcsZUFBZSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztnQkFDeEQsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLFNBQVMsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxXQUFXLEVBQUUsS0FBSyxPQUFPLENBQUMsQ0FBQyxDQUFDO29CQUN0RSxNQUFNLENBQUMsT0FBTyxHQUFHLFlBQVksQ0FBQztnQkFDL0IsQ0FBQztZQUNGLENBQUMsQ0FBQyxDQUFDO1lBRUgsTUFBTSxDQUFDLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDO1FBQzlDLENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLE1BQU0sQ0FBQztJQUNmLENBQUM7SUF0Q00sc0JBQU8sR0FBYSxDQUFDLGNBQWMsRUFBRSx1QkFBdUIsRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7SUF1QzVGLHFCQUFDO0FBQUQsQ0FBQyxBQXhDRCxJQXdDQztBQUVELE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUMvQyxLQUFLLENBQUMsdUJBQXVCLEVBQUUsVUFBVSxDQUFDO0tBQzFDLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLGNBQWMsQ0FBQyxDQUFDIn0=

/***/ },
/* 132 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.components.lazyLoad';
	exports.componentName = 'rlLazyLoad';
	exports.controllerName = 'LazyLoadController';
	var LazyLoadController = (function () {
	    function LazyLoadController($scope) {
	        var _this = this;
	        this.init = false;
	        var unbind = $scope.$watch(function () { return _this.show; }, function (value) {
	            if (value) {
	                _this.init = true;
	                unbind();
	            }
	        });
	    }
	    LazyLoadController.$inject = ['$scope'];
	    return LazyLoadController;
	}());
	exports.LazyLoadController = LazyLoadController;
	var lazyLoad = {
	    transclude: true,
	    template: "\n\t\t<div ng-if=\"lazyLoad.init\">\n\t\t\t<div ng-show=\"lazyLoad.show\">\n\t\t\t\t<div ng-transclude></div>\n\t\t\t</div>\n\t\t</div>\n\t",
	    controller: exports.controllerName,
	    controllerAs: 'lazyLoad',
	    bindings: {
	        show: '=',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, lazyLoad)
	    .controller(exports.controllerName, LazyLoadController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGF6eUxvYWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJsYXp5TG9hZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUV4QixrQkFBVSxHQUFXLDJCQUEyQixDQUFDO0FBQ2pELHFCQUFhLEdBQVcsWUFBWSxDQUFDO0FBQ3JDLHNCQUFjLEdBQVcsb0JBQW9CLENBQUM7QUFFekQ7SUFLQyw0QkFBWSxNQUFzQjtRQUxuQyxpQkFhQztRQVhBLFNBQUksR0FBWSxLQUFLLENBQUM7UUFJckIsSUFBSSxNQUFNLEdBQWEsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFpQixNQUFNLENBQUMsS0FBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFDLEtBQWM7WUFDekYsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDWCxLQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFDakIsTUFBTSxFQUFFLENBQUM7WUFDVixDQUFDO1FBQ0YsQ0FBQyxDQUFDLENBQUM7SUFDSixDQUFDO0lBUk0sMEJBQU8sR0FBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBU3ZDLHlCQUFDO0FBQUQsQ0FBQyxBQWJELElBYUM7QUFiWSwwQkFBa0IscUJBYTlCLENBQUE7QUFFRCxJQUFJLFFBQVEsR0FBOEI7SUFDekMsVUFBVSxFQUFFLElBQUk7SUFDaEIsUUFBUSxFQUFFLDZJQU1UO0lBQ0QsVUFBVSxFQUFFLHNCQUFjO0lBQzFCLFlBQVksRUFBRSxVQUFVO0lBQ3hCLFFBQVEsRUFBRTtRQUNULElBQUksRUFBRSxHQUFHO0tBQ1Q7Q0FDRCxDQUFDO0FBRUYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixTQUFTLENBQUMscUJBQWEsRUFBRSxRQUFRLENBQUM7S0FDbEMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsa0JBQWtCLENBQUMsQ0FBQyJ9

/***/ },
/* 133 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var $ = __webpack_require__(12);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __promise = typescript_angular_utilities_1.services.promise;
	var __object = typescript_angular_utilities_1.services.object;
	var button_1 = __webpack_require__(31);
	var buttonAsync_1 = __webpack_require__(33);
	exports.moduleName = 'rl.ui.components.longClickButton';
	exports.componentName = 'rlLongClickButton';
	exports.controllerName = 'LongClickButtonController';
	var LongClickButtonController = (function (_super) {
	    __extends(LongClickButtonController, _super);
	    function LongClickButtonController($scope, $interval, $timeout, objectUtility, promise) {
	        var _this = this;
	        _super.call(this, promise);
	        this.$interval = $interval;
	        this.$timeout = $timeout;
	        this.objectUtility = objectUtility;
	        this.interval = 25;
	        this.duration = 1500;
	        this.buttonText = this.text;
	        $scope.$watch(function () { return _this.buttonText; }, function () {
	            $timeout(function () {
	                _this.width = $('#actionButton').outerWidth();
	            });
	        });
	    }
	    LongClickButtonController.prototype.startAction = function () {
	        var _this = this;
	        if (this.active || this.busy) {
	            return;
	        }
	        this.actionProgress = 0;
	        this.active = true;
	        this.actionInterval = this.$interval(function () {
	            _this.actionProgress += _this.interval;
	            if (_this.actionProgress >= _this.duration) {
	                _this.cleanup();
	                _this.buttonText = _this.text;
	                _this.trigger();
	            }
	        }, this.interval);
	    };
	    LongClickButtonController.prototype.stopAction = function () {
	        if (this.active) {
	            if (this.actionProgress < this.duration) {
	                this.warn();
	            }
	            this.cleanup();
	        }
	    };
	    LongClickButtonController.prototype.cleanup = function () {
	        this.$interval.cancel(this.actionInterval);
	        this.actionProgress = 0;
	        this.active = false;
	    };
	    LongClickButtonController.prototype.warn = function () {
	        if (this.objectUtility.isNullOrEmpty(this.onShortClickText) === false) {
	            this.buttonText = this.onShortClickText;
	        }
	    };
	    LongClickButtonController.$inject = ['$scope', '$interval', '$timeout', __object.serviceName, __promise.serviceName];
	    return LongClickButtonController;
	}(buttonAsync_1.ButtonAsyncController));
	exports.LongClickButtonController = LongClickButtonController;
	var longClickButton = button_1.buildButton({
	    template: __webpack_require__(134),
	    controller: exports.controllerName,
	    bindings: {
	        text: '@',
	        onShortClickText: '@',
	        icon: '@',
	        busy: '<?',
	        rightAligned: '<?',
	    },
	});
	angular.module(exports.moduleName, [__object.moduleName])
	    .component(exports.componentName, longClickButton)
	    .controller(exports.controllerName, LongClickButtonController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibG9uZ0NsaWNrQnV0dG9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibG9uZ0NsaWNrQnV0dG9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7Ozs7OztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sU0FBUyxHQUFHLHVDQUFRLENBQUMsT0FBTyxDQUFDO0FBQ3BDLElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBRWxDLHVCQUE0QixrQkFBa0IsQ0FBQyxDQUFBO0FBQy9DLDRCQUFzQyw0QkFBNEIsQ0FBQyxDQUFBO0FBRXhELGtCQUFVLEdBQVcsa0NBQWtDLENBQUM7QUFDeEQscUJBQWEsR0FBVyxtQkFBbUIsQ0FBQztBQUM1QyxzQkFBYyxHQUFXLDJCQUEyQixDQUFDO0FBRWhFO0lBQStDLDZDQUFxQjtJQWVuRSxtQ0FBWSxNQUFzQixFQUN0QixTQUFtQyxFQUNuQyxRQUFpQyxFQUNqQyxhQUFzQyxFQUM5QyxPQUFrQztRQW5CdkMsaUJBcUVDO1FBakRDLGtCQUFNLE9BQU8sQ0FBQyxDQUFDO1FBSkosY0FBUyxHQUFULFNBQVMsQ0FBMEI7UUFDbkMsYUFBUSxHQUFSLFFBQVEsQ0FBeUI7UUFDakMsa0JBQWEsR0FBYixhQUFhLENBQXlCO1FBWjFDLGFBQVEsR0FBVyxFQUFFLENBQUM7UUFDOUIsYUFBUSxHQUFXLElBQUksQ0FBQztRQWN2QixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFFNUIsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFnQixNQUFNLENBQUMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUN4RCxRQUFRLENBQUM7Z0JBQ1IsS0FBSSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsZUFBZSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7WUFDOUMsQ0FBQyxDQUFDLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRCwrQ0FBVyxHQUFYO1FBQUEsaUJBZ0JDO1FBZkEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUM5QixNQUFNLENBQUM7UUFDUixDQUFDO1FBRUQsSUFBSSxDQUFDLGNBQWMsR0FBRyxDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUM7UUFFbkIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO1lBQ3BDLEtBQUksQ0FBQyxjQUFjLElBQUksS0FBSSxDQUFDLFFBQVEsQ0FBQztZQUNyQyxFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsY0FBYyxJQUFJLEtBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUMxQyxLQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7Z0JBQ2YsS0FBSSxDQUFDLFVBQVUsR0FBRyxLQUFJLENBQUMsSUFBSSxDQUFDO2dCQUM1QixLQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDaEIsQ0FBQztRQUNGLENBQUMsRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDbkIsQ0FBQztJQUVELDhDQUFVLEdBQVY7UUFDQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUNqQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO2dCQUN6QyxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDYixDQUFDO1lBRUQsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2hCLENBQUM7SUFDRixDQUFDO0lBRU8sMkNBQU8sR0FBZjtRQUNDLElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUMzQyxJQUFJLENBQUMsY0FBYyxHQUFHLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztJQUNyQixDQUFDO0lBRU8sd0NBQUksR0FBWjtRQUNDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFDdkUsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUM7UUFDekMsQ0FBQztJQUNGLENBQUM7SUF0RE0saUNBQU8sR0FBYSxDQUFDLFFBQVEsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLFFBQVEsQ0FBQyxXQUFXLEVBQUUsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBdUQ3RyxnQ0FBQztBQUFELENBQUMsQUFyRUQsQ0FBK0MsbUNBQXFCLEdBcUVuRTtBQXJFWSxpQ0FBeUIsNEJBcUVyQyxDQUFBO0FBRUQsSUFBSSxlQUFlLEdBQThCLG9CQUFXLENBQUM7SUFDNUQsUUFBUSxFQUFFLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztJQUMzQyxVQUFVLEVBQUUsc0JBQWM7SUFDMUIsUUFBUSxFQUFFO1FBQ1QsSUFBSSxFQUFFLEdBQUc7UUFDVCxnQkFBZ0IsRUFBRSxHQUFHO1FBQ3JCLElBQUksRUFBRSxHQUFHO1FBQ1QsSUFBSSxFQUFFLElBQUk7UUFDVixZQUFZLEVBQUUsSUFBSTtLQUNsQjtDQUNELENBQUMsQ0FBQztBQUVILE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUMvQyxTQUFTLENBQUMscUJBQWEsRUFBRSxlQUFlLENBQUM7S0FDekMsVUFBVSxDQUFDLHNCQUFjLEVBQUUseUJBQXlCLENBQUMsQ0FBQyJ9

/***/ },
/* 134 */
/***/ function(module, exports) {

	module.exports = "<span class=\"long-click-button\">\r\n\t<button id=\"actionButton\" class=\"btn btn-{{button.type}} {{button.configuredSize}}\" ng-mousedown=\"button.startAction()\" ng-mouseleave=\"button.stopAction()\" ng-mouseup=\"button.stopAction()\" ng-disabled=\"button.busy || button.ngDisabled\">\r\n\t\t<rl-busy loading=\"button.busy\" ng-if=\"button.rightAligned\"></rl-busy>\r\n\t\t<i ng-show=\"button.icon != null\" class=\"fa fa-{{button.icon}}\"></i> {{button.buttonText}}\r\n\t\t<rl-busy loading=\"button.busy\" ng-if=\"!button.rightAligned\"></rl-busy>\r\n\t</button>\r\n\t<rl-rating-bar ng-if=\"button.active\" width=\"button.width\" height=\"5\" min=\"0\" max=\"button.duration\"\r\n\t\t\t\tvalue=\"button.actionProgress\" background=\"transparent\"></rl-rating-bar>\r\n</span>"

/***/ },
/* 135 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var jquery_service_1 = __webpack_require__(130);
	var messageLog_service_1 = __webpack_require__(136);
	var messageLog_directive_1 = __webpack_require__(137);
	var editableMessageLog_1 = __webpack_require__(148);
	var componentServices = __webpack_require__(138);
	var __dialog = componentServices.dialog;
	var templateLoader_service_1 = __webpack_require__(131);
	__export(__webpack_require__(136));
	__export(__webpack_require__(137));
	exports.moduleName = 'rl.ui.components.messageLog';
	angular.module(exports.moduleName, [__object.moduleName, jquery_service_1.moduleName, templateLoader_service_1.moduleName, __dialog.moduleName])
	    .factory(messageLog_service_1.factoryName, messageLog_service_1.messageLogFactory)
	    .directive(messageLog_directive_1.directiveName, messageLog_directive_1.messageLog)
	    .controller(messageLog_directive_1.controllerName, messageLog_directive_1.MessageLogController)
	    .directive(editableMessageLog_1.directiveName, editableMessageLog_1.editableMessageLog)
	    .controller(editableMessageLog_1.controllerName, editableMessageLog_1.EditableMessageLogController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZUxvZy5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtZXNzYWdlTG9nLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7Ozs7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUN4RCxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUVsQywrQkFBK0Msc0NBQXNDLENBQUMsQ0FBQTtBQUV0RixtQ0FBK0Msc0JBQXNCLENBQUMsQ0FBQTtBQUN0RSxxQ0FBb0gsd0JBQXdCLENBQUMsQ0FBQTtBQUM3SSxtQ0FLTyxzQkFBc0IsQ0FBQyxDQUFBO0FBRTlCLElBQVksaUJBQWlCLFdBQU0sZ0NBQWdDLENBQUMsQ0FBQTtBQUNwRSxJQUFPLFFBQVEsR0FBRyxpQkFBaUIsQ0FBQyxNQUFNLENBQUM7QUFFM0MsdUNBQW1ELHNEQUFzRCxDQUFDLENBQUE7QUFFMUcsaUJBQWMsc0JBQXNCLENBQUMsRUFBQTtBQUNyQyxpQkFBYyx3QkFBd0IsQ0FBQyxFQUFBO0FBRTVCLGtCQUFVLEdBQVcsNkJBQTZCLENBQUM7QUFFOUQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsUUFBUSxDQUFDLFVBQVUsRUFBRSwyQkFBZ0IsRUFBRSxtQ0FBb0IsRUFBRSxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDNUcsT0FBTyxDQUFDLGdDQUFXLEVBQUUsc0NBQWlCLENBQUM7S0FDdkMsU0FBUyxDQUFDLG9DQUFhLEVBQUUsaUNBQVUsQ0FBQztLQUNwQyxVQUFVLENBQUMscUNBQWMsRUFBRSwyQ0FBb0IsQ0FBQztLQUNoRCxTQUFTLENBQUMsa0NBQThCLEVBQUUsdUNBQWtCLENBQUM7S0FDN0QsVUFBVSxDQUFDLG1DQUFnQyxFQUFFLGlEQUE0QixDQUFDLENBQUMifQ==

/***/ },
/* 136 */
/***/ function(module, exports) {

	'use strict';
	exports.factoryName = 'messageLog';
	exports.defaultPageSize = 10;
	var MessageLog = (function () {
	    function MessageLog() {
	        this.currentStartingMessage = 0;
	        this._hasForwardMessages = false;
	        this._hasBackwardMessages = false;
	        this._pageSize = exports.defaultPageSize;
	    }
	    Object.defineProperty(MessageLog.prototype, "pageSize", {
	        get: function () {
	            return this._pageSize;
	        },
	        /* tslint:disable */
	        set: function (value) {
	            this._pageSize = value;
	            this.updateCurrentPage();
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MessageLog.prototype, "hasForwardMessages", {
	        /* tslint:enable */
	        get: function () {
	            return this._hasForwardMessages;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MessageLog.prototype, "hasBackwardMessages", {
	        get: function () {
	            return this._hasBackwardMessages;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    Object.defineProperty(MessageLog.prototype, "dataService", {
	        get: function () {
	            return this._dataService;
	        },
	        /* tslint:disable */
	        set: function (value) {
	            this._dataService = value;
	            if (value != null) {
	                this.visibleMessages = null;
	                this.updateCurrentPage();
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    /* tslint:enable */
	    MessageLog.prototype.addMessage = function (message) {
	        var _this = this;
	        return this.dataService.saveMessage(message).then(function () {
	            _this.getTopPage();
	        });
	    };
	    MessageLog.prototype.updateMessage = function (message) {
	        var _this = this;
	        return this.dataService.updateMessage(message).then(function () {
	            _this.getTopPage();
	        });
	    };
	    MessageLog.prototype.deleteMessage = function (message) {
	        var _this = this;
	        return this.dataService.deleteMessage(message).then(function () {
	            _this.refresh();
	        });
	    };
	    MessageLog.prototype.getNextPage = function () {
	        if (!this.hasForwardMessages) {
	            return;
	        }
	        this.currentStartingMessage += this.pageSize;
	        return this.updateCurrentPage();
	    };
	    MessageLog.prototype.getPreviousPage = function () {
	        if (!this.hasBackwardMessages) {
	            return;
	        }
	        this.currentStartingMessage -= this.pageSize;
	        if (this.currentStartingMessage < 0) {
	            this.currentStartingMessage = 0;
	        }
	        return this.updateCurrentPage();
	    };
	    MessageLog.prototype.getTopPage = function () {
	        this.currentStartingMessage = 0;
	        return this.updateCurrentPage();
	    };
	    MessageLog.prototype.refresh = function () {
	        return this.updateCurrentPage();
	    };
	    MessageLog.prototype.updateCurrentPage = function () {
	        var _this = this;
	        if (this.dataService == null) {
	            return null;
	        }
	        this.busy = true;
	        return this.dataService.getMessages(this.currentStartingMessage, this.pageSize).then(function (result) {
	            _this.visibleMessages = result.messages;
	            _this._hasForwardMessages = result.hasMoreMessages;
	            _this._hasBackwardMessages = (_this.currentStartingMessage > 0);
	            _this.busy = false;
	        });
	    };
	    return MessageLog;
	}());
	exports.MessageLog = MessageLog;
	function messageLogFactory() {
	    'use strict';
	    return {
	        getInstance: function () {
	            return new MessageLog();
	        },
	    };
	}
	exports.messageLogFactory = messageLogFactory;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZUxvZy5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibWVzc2FnZUxvZy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQU9GLG1CQUFXLEdBQVcsWUFBWSxDQUFDO0FBRW5DLHVCQUFlLEdBQVcsRUFBRSxDQUFDO0FBbUR4QztJQUFBO1FBQ1MsMkJBQXNCLEdBQVcsQ0FBQyxDQUFDO1FBQ25DLHdCQUFtQixHQUFZLEtBQUssQ0FBQztRQUNyQyx5QkFBb0IsR0FBWSxLQUFLLENBQUM7UUFDdEMsY0FBUyxHQUFXLHVCQUFlLENBQUM7SUF1RzdDLENBQUM7SUFsR0Esc0JBQUksZ0NBQVE7YUFBWjtZQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3ZCLENBQUM7UUFFRCxvQkFBb0I7YUFDcEIsVUFBYSxLQUFhO1lBQ3pCLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBQzFCLENBQUM7OztPQU5BO0lBU0Qsc0JBQUksMENBQWtCO1FBRnRCLG1CQUFtQjthQUVuQjtZQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLENBQUM7UUFDakMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwyQ0FBbUI7YUFBdkI7WUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDO1FBQ2xDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksbUNBQVc7YUFBZjtZQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQzFCLENBQUM7UUFFRCxvQkFBb0I7YUFDcEIsVUFBZ0IsS0FBNkI7WUFDNUMsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7WUFFMUIsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7Z0JBQ25CLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDO2dC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

/***/ },
/* 137 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var jquery_service_1 = __webpack_require__(130);
	var messageLog_service_1 = __webpack_require__(136);
	var componentServices = __webpack_require__(138);
	var __dialog = componentServices.dialog;
	var templateLoader_service_1 = __webpack_require__(131);
	exports.directiveName = 'rlMessageLog';
	exports.controllerName = 'MessageLogController';
	(function (DeletePermissions) {
	    DeletePermissions[DeletePermissions["deleteMine"] = 0] = "deleteMine";
	    DeletePermissions[DeletePermissions["deleteAll"] = 1] = "deleteAll";
	    DeletePermissions[DeletePermissions["deleteNone"] = 2] = "deleteNone";
	})(exports.DeletePermissions || (exports.DeletePermissions = {}));
	var DeletePermissions = exports.DeletePermissions;
	(function (EditPermissions) {
	    EditPermissions[EditPermissions["editMine"] = 0] = "editMine";
	    EditPermissions[EditPermissions["editAll"] = 1] = "editAll";
	    EditPermissions[EditPermissions["editNone"] = 2] = "editNone";
	})(exports.EditPermissions || (exports.EditPermissions = {}));
	var EditPermissions = exports.EditPermissions;
	var MessageLogController = (function () {
	    function MessageLogController(dialog, $scope, messageLogFactory) {
	        var _this = this;
	        this.dialog = dialog;
	        this.messageLog = this.messageLogBinding || messageLogFactory.getInstance();
	        $scope.$watch(function () { return _this.messageLog.visibleMessages; }, function (value) {
	            _this.messages = value;
	        });
	        $scope.$watch(function () { return _this.messageLog.hasForwardMessages; }, function (value) {
	            _this.hasNextPage = value;
	        });
	        $scope.$watch(function () { return _this.messageLog.hasBackwardMessages; }, function (value) {
	            _this.hasPreviousPage = value;
	        });
	        $scope.$watch(function () { return _this.messageLog.busy; }, function (value) {
	            if (!value) {
	                _this.loading = false;
	                _this.loadingInitial = false;
	            }
	            else {
	                _this.loading = true;
	            }
	        });
	        $scope.$watch(function () { return _this.service; }, function (service) {
	            _this.messageLog.dataService = service;
	            _this.loadingInitial = true;
	        });
	        this.messageLog.pageSize = this.pageSize != null ? this.pageSize : 8;
	        this.tooltipTemplate = __webpack_require__(145);
	    }
	    MessageLogController.prototype.getEntrySelector = function (entry) {
	        if (_.isString(this.selector)) {
	            return entry[this.selector];
	        }
	        else if (_.isFunction(this.selector)) {
	            return this.selector(entry);
	        }
	    };
	    MessageLogController.prototype.getOlder = function () {
	        return this.messageLog.getNextPage();
	    };
	    MessageLogController.prototype.getTop = function () {
	        return this.messageLog.getTopPage();
	    };
	    MessageLogController.prototype.canDeleteEntry = function (entry) {
	        if (entry.isSystemNote) {
	            return false;
	        }
	        switch (this.canDelete) {
	            case DeletePermissions.deleteAll:
	                return true;
	            case DeletePermissions.deleteMine:
	                return (this.currentUser == null || this.currentUser.id === entry.createdBy.id);
	            default:
	                return false;
	        }
	    };
	    MessageLogController.prototype.canEditEntry = function (entry) {
	        if (entry.isSystemNote) {
	            return false;
	        }
	        switch (this.canEdit) {
	            case EditPermissions.editAll:
	                return true;
	            case EditPermissions.editMine:
	                return (this.currentUser == null || this.currentUser.id === entry.createdBy.id);
	            default:
	                return false;
	        }
	    };
	    MessageLogController.prototype.editMessage = function (entry) {
	        var editedEntry = _.clone(entry);
	        this.dialog.openForm({
	            save: this.updateNote.bind(this),
	            data: {
	                entry: editedEntry,
	                originalEntry: entry,
	            },
	            template: __webpack_require__(146),
	        });
	    };
	    MessageLogController.prototype.updateNote = function (data) {
	        return this.messageLog.updateMessage(data.entry);
	    };
	    MessageLogController.prototype.saveNote = function (data) {
	        return this.messageLog.addMessage(data.entry);
	    };
	    MessageLogController.$inject = [__dialog.serviceName, '$scope', messageLog_service_1.factoryName];
	    return MessageLogController;
	}());
	exports.MessageLogController = MessageLogController;
	messageLog.$inject = [
	    '$interpolate',
	    jquery_service_1.serviceName,
	    templateLoader_service_1.serviceName,
	    __object.serviceName,
	];
	function messageLog($interpolate, jquery, templateLoader, object) {
	    'use strict';
	    return {
	        restrict: 'E',
	        template: __webpack_require__(147),
	        transclude: true,
	        controller: exports.controllerName,
	        controllerAs: 'log',
	        scope: {
	            messageData: "=",
	        },
	        bindToController: {
	            service: '=',
	            selector: '=',
	            pageSize: '=',
	            messageLogBinding: '=messageLog',
	            messageAs: "@",
	            currentUser: '=?',
	            canDelete: '=?',
	            canEdit: '=?',
	        },
	        link: function (scope, element, attributes, controller, transclude) {
	            controller.templates = templateLoader.loadTemplates(transclude).templates;
	        }
	    };
	}
	exports.messageLog = messageLog;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVzc2FnZUxvZy5kaXJlY3RpdmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJtZXNzYWdlTG9nLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwwREFBMEQ7QUFFMUQsWUFBWSxDQUFDO0FBSWIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFHbEMsK0JBSU8sc0NBQXNDLENBQUMsQ0FBQTtBQUU5QyxtQ0FBc0csc0JBQXNCLENBQUMsQ0FBQTtBQUM3SCxJQUFZLGlCQUFpQixXQUFNLGdDQUFnQyxDQUFDLENBQUE7QUFDcEUsSUFBTyxRQUFRLEdBQUcsaUJBQWlCLENBQUMsTUFBTSxDQUFDO0FBRTNDLHVDQUFzRSxzREFBc0QsQ0FBQyxDQUFBO0FBRWxILHFCQUFhLEdBQVcsY0FBYyxDQUFDO0FBQ3ZDLHNCQUFjLEdBQVcsc0JBQXNCLENBQUM7QUFFM0QsV0FBWSxpQkFBaUI7SUFDNUIscUVBQWMsQ0FBQTtJQUNkLG1FQUFhLENBQUE7SUFDYixxRUFBYyxDQUFBO0FBQ2YsQ0FBQyxFQUpXLHlCQUFpQixLQUFqQix5QkFBaUIsUUFJNUI7QUFKRCxJQUFZLGlCQUFpQixHQUFqQix5QkFJWCxDQUFBO0FBRUQsV0FBWSxlQUFlO0lBQzFCLDZEQUFZLENBQUE7SUFDWiwyREFBVyxDQUFBO0lBQ1gsNkRBQVksQ0FBQTtBQUNiLENBQUMsRUFKVyx1QkFBZSxLQUFmLHVCQUFlLFFBSTFCO0FBSkQsSUFBWSxlQUFlLEdBQWYsdUJBSVgsQ0FBQTtBQWNEO0lBd0JDLDhCQUFvQixNQUFvQyxFQUFFLE1BQWlCLEVBQUUsaUJBQXFDO1FBeEJuSCxpQkE0SEM7UUFwR29CLFdBQU0sR0FBTixNQUFNLENBQThCO1FBQ3ZELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLGlCQUFpQixJQUFJLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBRTVFLE1BQU0sQ0FBQyxNQUFNLENBQUMsY0FBb0IsTUFBTSxDQUFDLEtBQUksQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxFQUN4RSxVQUFDLEtBQWlCO1lBQ25CLEtBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxDQUFDO1FBQ3ZCLENBQUMsQ0FBQyxDQUFDO1FBRUosTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFpQixNQUFNLENBQUMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFDLEtBQWM7WUFDM0YsS0FBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7UUFDMUIsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWlCLE1BQU0sQ0FBQyxLQUFJLENBQUMsVUFBVSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQUMsS0FBYztZQUM1RixLQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztRQUM5QixDQUFDLENBQUMsQ0FBQztRQUVILE1BQU0sQ0FBQyxNQUFNLENBQUMsY0FBaUIsTUFBTSxDQUFDLEtBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQUMsS0FBYztZQUM3RSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7Z0JBQ1osS0FBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7Z0JBQ3JCLEtBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSyxDQUFDO1lBQzdCLENBQUM7WUFBQyxJQUFJLENBQUMsQ0FBQztnQkFDUCxLQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztZQUNyQixDQUFDO1FBQ0YsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWdDLE1BQU0sQ0FBQyxLQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQUMsT0FBK0I7WUFDckcsS0FBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDO1lBQ3RDLEtBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO1FBQzVCLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLENBQUM7UUFFckUsSUFBSSxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBRUQsK0NBQWdCLEdBQWhCLFVBQWlCLEtBQWU7UUFDL0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQy9CLE1BQU0sQ0FBQyxLQUFLLENBQVMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3JDLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hDLE1BQU0sQ0FBdUIsSUFBSSxDQUFDLFFBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNwRCxDQUFDO0lBQ0YsQ0FBQztJQUVELHVDQUFRLEdBQVI7UUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUN0QyxDQUFDO0lBRUQscUNBQU0sR0FBTjtRQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDO0lBQ3JDLENBQUM7SUFFRCw2Q0FBYyxHQUFkLFVBQWUsS0FBZTtRQUM3QixFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUN4QixNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2QsQ0FBQztRQUVELE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLEtBQUssaUJBQWlCLENBQUMsU0FBUztnQkFDL0IsTUFBTSxDQUFDLElBQUksQ0FBQztZQUNiLEtBQUssaUJBQWlCLENBQUMsVUFBVTtnQkFDaEMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsSUFBSSxJQUFJLElBQUksSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLEtBQUssS0FBSyxDQUFDLFNBQVMsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNqRjtnQkFDQyxNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2YsQ0FBQztJQUNGLENBQUM7SUFDRCwyQ0FBWSxHQUFaLFVBQWEsS0FBZTtRQUMzQixFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztZQUN4QixNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2QsQ0FBQztRQUVELE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLEtBQUssZUFBZSxDQUFDLE9BQU87Z0JBQzNCLE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDYixLQUFLLGVBQWUsQ0FBQyxRQUFRO2dCQUM1QixNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsS0FBSyxLQUFLLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ2pGO2dCQUNDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDZixDQUFDO0lBQ0YsQ0FBQztJQUVELDBDQUFXLEdBQVgsVUFBWSxLQUFlO1FBQzFCLElBQUksV0FBVyxHQUFhLENBQUMsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFM0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7WUFDcEIsSUFBSSxFQUFFLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQztZQUNoQyxJQUFJLEVBQUU7Z0JBQ0wsS0FBSyxFQUFFLFdBQVc7Z0JBQ2xCLGFBQWEsRUFBRSxLQUFLO2FBQ3BCO1lBQ0QsUUFBUSxFQUFFLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQztTQUNoRCxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQseUNBQVUsR0FBVixVQUFXLElBQVM7UUFDbkIsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNsRCxDQUFDO0lBRUQsdUNBQVEsR0FBUixVQUFTLElBQVM7UUFDakIsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUMvQyxDQUFDO0lBcEdNLDRCQUFPLEdBQWEsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLFFBQVEsRUFBRSxnQ0FBVyxDQUFDLENBQUM7SUFxRzFFLDJCQUFDO0FBQUQsQ0FBQyxBQTVIRCxJQTRIQztBQTVIWSw0QkFBb0IsdUJBNEhoQyxDQUFBO0FBRUQsVUFBVSxDQUFDLE9BQU8sR0FBRztJQUNwQixjQUFjO0lBQ2QsNEJBQWlCO0lBQ2pCLG9DQUFxQjtJQUNyQixRQUFRLENBQUMsV0FBVztDQUNwQixDQUFDO0FBQ0Ysb0JBQTJCLFlBQXlDLEVBQ25FLE1BQXNCLEVBQ3RCLGNBQStCLEVBQy9CLE1BQStCO0lBQy9CLFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFFBQVEsRUFBRSxHQUFHO1FBQ2IsUUFBUSxFQUFFLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztRQUN0QyxVQUFVLEVBQUUsSUFBSTtRQUNoQixVQUFVLEVBQUUsc0JBQWM7UUFDMUIsWUFBWSxFQUFFLEtBQUs7UUFDbkIsS0FBSyxFQUFFO1lBQ04sV0FBVyxFQUFFLEdBQUc7U0FDaEI7UUFDRCxnQkFBZ0IsRUFBRTtZQUNqQixPQUFPLEVBQUUsR0FBRztZQUNaLFFBQVEsRUFBRSxHQUFHO1lBQ2IsUUFBUSxFQUFFLEdBQUc7WUFDYixpQkFBaUIsRUFBRSxhQUFhO1lBQ2hDLFNBQVMsRUFBRSxHQUFHO1lBQ2QsV0FBVyxFQUFFLElBQUk7WUFDakIsU0FBUyxFQUFFLElBQUk7WUFDZixPQUFPLEVBQUUsSUFBSTtTQUNiO1FBQ0QsSUFBSSxFQUFFLFVBQUMsS0FBcUIsRUFDM0IsT0FBaUMsRUFDakMsVUFBK0IsRUFDL0IsVUFBZ0MsRUFDaEMsVUFBdUM7WUFDdkMsVUFBVSxDQUFDLFNBQVMsR0FBRyxjQUFjLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUMzRSxDQUFDO0tBQ0QsQ0FBQztBQUNILENBQUM7QUFoQ2Usa0JBQVUsYUFnQ3pCLENBQUEifQ==

/***/ },
/* 138 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var autosave = __webpack_require__(17);
	exports.autosave = autosave;
	var autosaveAction = __webpack_require__(19);
	exports.autosaveAction = autosaveAction;
	var breakpoints = __webpack_require__(139);
	exports.breakpoints = breakpoints;
	var componentValidator = __webpack_require__(116);
	exports.componentValidator = componentValidator;
	var contentProvider = __webpack_require__(143);
	exports.contentProvider = contentProvider;
	var dialog = __webpack_require__(121);
	exports.dialog = dialog;
	var documentWrapper = __webpack_require__(144);
	exports.documentWrapper = documentWrapper;
	var form = __webpack_require__(23);
	exports.form = form;
	var jquery = __webpack_require__(130);
	exports.jquery = jquery;
	var templateLoader = __webpack_require__(131);
	exports.templateLoader = templateLoader;
	var windowWrapper = __webpack_require__(140);
	exports.windowWrapper = windowWrapper;
	exports.moduleName = 'rl.ui.services';
	angular.module(exports.moduleName, [
	    autosave.moduleName,
	    autosaveAction.moduleName,
	    breakpoints.moduleName,
	    componentValidator.moduleName,
	    contentProvider.moduleName,
	    dialog.moduleName,
	    documentWrapper.moduleName,
	    form.moduleName,
	    jquery.moduleName,
	    templateLoader.moduleName,
	    windowWrapper.moduleName,
	]);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmljZXMubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2VydmljZXMubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLElBQVksUUFBUSxXQUFNLDZCQUE2QixDQUFDLENBQUE7QUFhdkQsZ0JBQVE7QUFaVCxJQUFZLGNBQWMsV0FBTSx5Q0FBeUMsQ0FBQyxDQUFBO0FBYXpFLHNCQUFjO0FBWmYsSUFBWSxXQUFXLFdBQU0sa0NBQWtDLENBQUMsQ0FBQTtBQWEvRCxtQkFBVztBQVpaLElBQVksa0JBQWtCLFdBQU0saURBQWlELENBQUMsQ0FBQTtBQWFyRiwwQkFBa0I7QUFabkIsSUFBWSxlQUFlLFdBQU0sMkNBQTJDLENBQUMsQ0FBQTtBQWE1RSx1QkFBZTtBQVpoQixJQUFZLE1BQU0sV0FBTSx5QkFBeUIsQ0FBQyxDQUFBO0FBYWpELGNBQU07QUFaUCxJQUFZLGVBQWUsV0FBTSwyQ0FBMkMsQ0FBQyxDQUFBO0FBYTVFLHVCQUFlO0FBWmhCLElBQVksSUFBSSxXQUFNLHFCQUFxQixDQUFDLENBQUE7QUFhM0MsWUFBSTtBQVpMLElBQVksTUFBTSxXQUFNLHlCQUF5QixDQUFDLENBQUE7QUFhakQsY0FBTTtBQVpQLElBQVksY0FBYyxXQUFNLHlDQUF5QyxDQUFDLENBQUE7QUFhekUsc0JBQWM7QUFaZixJQUFZLGFBQWEsV0FBTSx1Q0FBdUMsQ0FBQyxDQUFBO0FBYXRFLHFCQUFhO0FBR0gsa0JBQVUsR0FBVyxnQkFBZ0IsQ0FBQztBQUVqRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUU7SUFDMUIsUUFBUSxDQUFDLFVBQVU7SUFDbkIsY0FBYyxDQUFDLFVBQVU7SUFDekIsV0FBVyxDQUFDLFVBQVU7SUFDdEIsa0JBQWtCLENBQUMsVUFBVTtJQUM3QixlQUFlLENBQUMsVUFBVTtJQUMxQixNQUFNLENBQUMsVUFBVTtJQUNqQixlQUFlLENBQUMsVUFBVTtJQUMxQixJQUFJLENBQUMsVUFBVTtJQUNmLE1BQU0sQ0FBQyxVQUFVO0lBQ2pCLGNBQWMsQ0FBQyxVQUFVO0lBQ3pCLGFBQWEsQ0FBQyxVQUFVO0NBQ3hCLENBQUMsQ0FBQyJ9

/***/ },
/* 139 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	function __export(m) {
	    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
	}
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var windowWrapper_service_1 = __webpack_require__(140);
	var visibleBreakpoint_service_1 = __webpack_require__(141);
	var breakpoints_service_1 = __webpack_require__(142);
	__export(__webpack_require__(49));
	__export(__webpack_require__(141));
	__export(__webpack_require__(142));
	exports.moduleName = 'rl.ui.services.breakpoints';
	angular.module(exports.moduleName, [
	    typescript_angular_utilities_1.services.observable.moduleName,
	    windowWrapper_service_1.moduleName,
	])
	    .constant('resizeDebounceMilliseconds', 500)
	    .service(visibleBreakpoint_service_1.visibleBreakpointServiceName, visibleBreakpoint_service_1.VisibleBreakpointService)
	    .service(breakpoints_service_1.breakpointServiceName, breakpoints_service_1.BreakpointService);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJlYWtwb2ludHMubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiYnJlYWtwb2ludHMubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7OztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBRXhELHNDQUFzRCx3Q0FBd0MsQ0FBQyxDQUFBO0FBQy9GLDBDQUF1RSw2QkFBNkIsQ0FBQyxDQUFBO0FBQ3JHLG9DQUF5RCx1QkFBdUIsQ0FBQyxDQUFBO0FBRWpGLGlCQUFjLGNBQWMsQ0FBQyxFQUFBO0FBQzdCLGlCQUFjLDZCQUE2QixDQUFDLEVBQUE7QUFDNUMsaUJBQWMsdUJBQXVCLENBQUMsRUFBQTtBQUUzQixrQkFBVSxHQUFXLDRCQUE0QixDQUFDO0FBRTdELE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRTtJQUMxQix1Q0FBUSxDQUFDLFVBQVUsQ0FBQyxVQUFVO0lBQzlCLGtDQUF1QjtDQUN2QixDQUFDO0tBQ0EsUUFBUSxDQUFDLDRCQUE0QixFQUFFLEdBQUcsQ0FBQztLQUMzQyxPQUFPLENBQUMsd0RBQTRCLEVBQUUsb0RBQXdCLENBQUM7S0FDL0QsT0FBTyxDQUFDLDJDQUFxQixFQUFFLHVDQUFpQixDQUFDLENBQUMifQ==

/***/ },
/* 140 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var $ = __webpack_require__(12);
	exports.moduleName = 'rl.ui.services.windowWrapper';
	exports.serviceName = 'windowWrapper';
	var WindowService = (function () {
	    function WindowService() {
	        this.windowControl = $(window);
	    }
	    WindowService.prototype.resize = function (callback) {
	        this.windowControl.resize(callback);
	    };
	    WindowService.prototype.scrollTop = function () {
	        return this.windowControl.scrollTop();
	    };
	    WindowService.prototype.scroll = function (handler) {
	        this.windowControl.scroll(handler);
	    };
	    WindowService.prototype.height = function () {
	        return this.windowControl.height();
	    };
	    return WindowService;
	}());
	angular.module(exports.moduleName, [])
	    .service(exports.serviceName, WindowService);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luZG93V3JhcHBlci5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2luZG93V3JhcHBlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRWpCLGtCQUFVLEdBQVcsOEJBQThCLENBQUM7QUFDcEQsbUJBQVcsR0FBVyxlQUFlLENBQUM7QUFhakQ7SUFBQTtRQUNTLGtCQUFhLEdBQVcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBaUIzQyxDQUFDO0lBZkEsOEJBQU0sR0FBTixVQUFPLFFBQTZDO1FBQ25ELElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxpQ0FBUyxHQUFUO1FBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxFQUFFLENBQUM7SUFDdkMsQ0FBQztJQUVELDhCQUFNLEdBQU4sVUFBTyxPQUF1QjtRQUM3QixJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQsOEJBQU0sR0FBTjtRQUNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ3BDLENBQUM7SUFDRixvQkFBQztBQUFELENBQUMsQUFsQkQsSUFrQkM7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLGFBQWEsQ0FBQyxDQUFDIn0=

/***/ },
/* 141 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var $ = __webpack_require__(12);
	/*
	 * Implementation also requires the following elements to be inserted on the page:
	 *   <div class="device-xs visible-xs"></div>
	 *   <div class="device-sm visible-sm"></div>
	 *   <div class="device-md visible-md"></div>
	 *   <div class="device-lg visible-lg"></div>
	 * They have been inserted into index.html for your convenience.
	 */
	exports.visibleBreakpointServiceName = 'visibleBreakpoint';
	var VisibleBreakpointService = (function () {
	    function VisibleBreakpointService() {
	    }
	    VisibleBreakpointService.prototype.isVisible = function (breakpoint) {
	        // jquery gets the breakpoint trigger directives listed above on line 3
	        return $('.device-' + breakpoint).is(':visible');
	    };
	    return VisibleBreakpointService;
	}());
	exports.VisibleBreakpointService = VisibleBreakpointService;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzaWJsZUJyZWFrcG9pbnQuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInZpc2libGVCcmVha3BvaW50LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUI7Ozs7Ozs7R0FPRztBQUVRLG9DQUE0QixHQUFXLG1CQUFtQixDQUFDO0FBTXRFO0lBQUE7SUFLQSxDQUFDO0lBSkEsNENBQVMsR0FBVCxVQUFVLFVBQWtCO1FBQzNCLHVFQUF1RTtRQUN2RSxNQUFNLENBQUMsQ0FBQyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMsQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUNGLCtCQUFDO0FBQUQsQ0FBQyxBQUxELElBS0M7QUFMWSxnQ0FBd0IsMkJBS3BDLENBQUEifQ==

/***/ },
/* 142 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var windowWrapper_service_1 = __webpack_require__(140);
	var visibleBreakpoint_service_1 = __webpack_require__(141);
	var breakpoint_1 = __webpack_require__(49);
	exports.breakpointServiceName = 'breakpoints';
	var __observable = typescript_angular_utilities_1.services.observable;
	var BreakpointService = (function () {
	    function BreakpointService($rootScope, visibleBreakpoints, resizeDebounceMilliseconds, windowService, observableFactory) {
	        var _this = this;
	        this.$rootScope = $rootScope;
	        this.visibleBreakpoints = visibleBreakpoints;
	        this.updateBreakpoint = function () {
	            var newBreakPoint = _this.getBreakpoint();
	            if (newBreakPoint !== _this.currentBreakpoint) {
	                _this.$rootScope.$apply(function () {
	                    _this.currentBreakpoint = newBreakPoint;
	                    _this.observable.fire('window.breakpointChanged', _this.currentBreakpoint);
	                });
	            }
	        };
	        this.currentBreakpoint = this.getBreakpoint();
	        this.observable = observableFactory.getInstance();
	        var efficientResize = _.debounce(this.updateBreakpoint, resizeDebounceMilliseconds, {
	            leading: true,
	            trailing: true,
	            maxWait: resizeDebounceMilliseconds,
	        });
	        windowService.resize(efficientResize);
	    }
	    BreakpointService.prototype.getBreakpoint = function () {
	        if (this.visibleBreakpoints.isVisible(breakpoint_1.lg)) {
	            return breakpoint_1.lg;
	        }
	        else if (this.visibleBreakpoints.isVisible(breakpoint_1.md)) {
	            return breakpoint_1.md;
	        }
	        else if (this.visibleBreakpoints.isVisible(breakpoint_1.sm)) {
	            return breakpoint_1.sm;
	        }
	        else {
	            return breakpoint_1.xs;
	        }
	    };
	    BreakpointService.prototype.isBreakpoint = function (breakpoint) {
	        return this.currentBreakpoint === breakpoint;
	    };
	    BreakpointService.prototype.register = function (action) {
	        return this.observable.register(action, 'window.breakpointChanged');
	    };
	    BreakpointService.$inject = ['$rootScope', visibleBreakpoint_service_1.visibleBreakpointServiceName, 'resizeDebounceMilliseconds', windowWrapper_service_1.serviceName, __observable.factoryName];
	    return BreakpointService;
	}());
	exports.BreakpointService = BreakpointService;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnJlYWtwb2ludHMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImJyZWFrcG9pbnRzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBR2IsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFFeEQsc0NBQXdFLHdDQUF3QyxDQUFDLENBQUE7QUFDakgsMENBQXdFLDZCQUE2QixDQUFDLENBQUE7QUFFdEcsMkJBQStCLGNBQWMsQ0FBQyxDQUFBO0FBRW5DLDZCQUFxQixHQUFXLGFBQWEsQ0FBQztBQUV6RCxJQUFPLFlBQVksR0FBRyx1Q0FBUSxDQUFDLFVBQVUsQ0FBQztBQVExQztJQUVDLDJCQUFvQixVQUFnQyxFQUN4QyxrQkFBNkMsRUFDckQsMEJBQWtDLEVBQ2xDLGFBQTZCLEVBQzdCLGlCQUF5RDtRQU45RCxpQkFvREM7UUFsRG9CLGVBQVUsR0FBVixVQUFVLENBQXNCO1FBQ3hDLHVCQUFrQixHQUFsQixrQkFBa0IsQ0FBMkI7UUF1Q2pELHFCQUFnQixHQUFlO1lBQ3RDLElBQUksYUFBYSxHQUFXLEtBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUVqRCxFQUFFLENBQUMsQ0FBQyxhQUFhLEtBQUssS0FBSSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztnQkFDOUMsS0FBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUM7b0JBQ3RCLEtBQUksQ0FBQyxpQkFBaUIsR0FBRyxhQUFhLENBQUM7b0JBQ3ZDLEtBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLDBCQUEwQixFQUFFLEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO2dCQUMxRSxDQUFDLENBQUMsQ0FBQztZQUNKLENBQUM7UUFDRixDQUFDLENBQUE7UUE1Q0EsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUU5QyxJQUFJLENBQUMsVUFBVSxHQUFHLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBRWxELElBQUksZUFBZSxHQUFlLENBQUMsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLGdCQUFnQixFQUFFLDBCQUEwQixFQUFFO1lBQy9GLE9BQU8sRUFBRSxJQUFJO1lBQ2IsUUFBUSxFQUFFLElBQUk7WUFDZCxPQUFPLEVBQUUsMEJBQTBCO1NBQ25DLENBQUMsQ0FBQztRQUNILGFBQWEsQ0FBQyxNQUFNLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDdkMsQ0FBQztJQUtPLHlDQUFhLEdBQXJCO1FBQ0MsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxlQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDM0MsTUFBTSxDQUFDLGVBQUUsQ0FBQztRQUNYLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxlQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLGVBQUUsQ0FBQztRQUNYLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxlQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDbEQsTUFBTSxDQUFDLGVBQUUsQ0FBQztRQUNYLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNQLE1BQU0sQ0FBQyxlQUFFLENBQUM7UUFDWCxDQUFDO0lBQ0YsQ0FBQztJQUVELHdDQUFZLEdBQVosVUFBYSxVQUFrQjtRQUM5QixNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixLQUFLLFVBQVUsQ0FBQztJQUM5QyxDQUFDO0lBRUQsb0NBQVEsR0FBUixVQUFTLE1BQXNDO1FBQzlDLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztJQUNyRSxDQUFDO0lBdkNNLHlCQUFPLEdBQWEsQ0FBQyxZQUFZLEVBQUUsd0RBQTRCLEVBQUUsNEJBQTRCLEVBQUUsbUNBQXdCLEVBQUUsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFBO0lBbUQxSix3QkFBQztBQUFELENBQUMsQUFwREQsSUFvREM7QUFwRFkseUJBQWlCLG9CQW9EN0IsQ0FBQSJ9

/***/ },
/* 143 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path="../../../typings/jquery/jquery.d.ts" />
	'use strict';
	var ng = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __observable = typescript_angular_utilities_1.services.observable;
	exports.moduleName = 'rl.utilities.services.contentProvider';
	exports.serviceName = 'contentProviderFactory';
	var ContentProviderService = (function () {
	    function ContentProviderService(observableFactory) {
	        var _this = this;
	        this.setTranscludeContent = function (transcludeFunction) {
	            var scope = null;
	            if (_.isFunction(transcludeFunction)) {
	                transcludeFunction(function (clone, transcludeScope) {
	                    _this.setContent(clone, transcludeScope);
	                });
	            }
	            else {
	                _this.setContent(null);
	            }
	        };
	        this.observable = observableFactory.getInstance();
	    }
	    ContentProviderService.prototype.setContent = function (content, scope) {
	        this.content = content;
	        this.scope = scope;
	        this.observable.fire('contentChanged');
	    };
	    ContentProviderService.prototype.register = function (action, selector) {
	        var _this = this;
	        if (this.content != null) {
	            action(this.getContent(selector), this.scope);
	        }
	        return this.observable.register(function () {
	            action(_this.getContent(selector), _this.scope);
	        }, 'contentChanged');
	    };
	    ContentProviderService.prototype.getContent = function (selector) {
	        if (selector != null) {
	            return this.content.filter(selector);
	        }
	        return this.content;
	    };
	    return ContentProviderService;
	}());
	contentProviderServiceFactory.$inject = [__observable.factoryName];
	function contentProviderServiceFactory(observableFactory) {
	    'use strict';
	    return {
	        getInstance: function () {
	            return new ContentProviderService(observableFactory);
	        }
	    };
	}
	ng.module(exports.moduleName, [__observable.moduleName])
	    .factory(exports.serviceName, contentProviderServiceFactory);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudFByb3ZpZGVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJjb250ZW50UHJvdmlkZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwrREFBK0Q7QUFFL0QsWUFBWSxDQUFDO0FBRWIsSUFBWSxFQUFFLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDOUIsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFFeEQsSUFBTyxZQUFZLEdBQUcsdUNBQVEsQ0FBQyxVQUFVLENBQUM7QUFFL0Isa0JBQVUsR0FBVyx1Q0FBdUMsQ0FBQztBQUM3RCxtQkFBVyxHQUFXLHdCQUF3QixDQUFDO0FBUzFEO0lBQ0MsZ0NBQVksaUJBQXlEO1FBRHRFLGlCQTJDQztRQTVCQSx5QkFBb0IsR0FBeUQsVUFBQyxrQkFBMEM7WUFDdkgsSUFBSSxLQUFLLEdBQWMsSUFBSSxDQUFDO1lBQzVCLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsa0JBQWtCLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3RDLGtCQUFrQixDQUFDLFVBQUMsS0FBYSxFQUFFLGVBQTBCO29CQUM1RCxLQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssRUFBRSxlQUFlLENBQUMsQ0FBQztnQkFDekMsQ0FBQyxDQUFDLENBQUM7WUFDSixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ1AsS0FBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN2QixDQUFDO1FBQ0YsQ0FBQyxDQUFBO1FBdEJBLElBQUksQ0FBQyxVQUFVLEdBQUcsaUJBQWlCLENBQUMsV0FBVyxFQUFFLENBQUM7SUFDbkQsQ0FBQztJQU1ELDJDQUFVLEdBQVYsVUFBVyxPQUFlLEVBQUUsS0FBaUI7UUFDNUMsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDdkIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7UUFDbkIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztJQUN4QyxDQUFDO0lBYUQseUNBQVEsR0FBUixVQUFTLE1BQTRELEVBQUUsUUFBaUI7UUFBeEYsaUJBUUM7UUFQQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDMUIsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9DLENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUM7WUFDL0IsTUFBTSxDQUFDLEtBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLEVBQUUsS0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9DLENBQUMsRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ3RCLENBQUM7SUFFRCwyQ0FBVSxHQUFWLFVBQVcsUUFBaUI7UUFDM0IsRUFBRSxDQUFDLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDdEIsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3RDLENBQUM7UUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUNyQixDQUFDO0lBQ0YsNkJBQUM7QUFBRCxDQUFDLEFBM0NELElBMkNDO0FBTUQsNkJBQTZCLENBQUMsT0FBTyxHQUFHLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0FBQ25FLHVDQUF1QyxpQkFBeUQ7SUFDL0YsWUFBWSxDQUFDO0lBRWIsTUFBTSxDQUFDO1FBQ04sV0FBVztZQUNWLE1BQU0sQ0FBQyxJQUFJLHNCQUFzQixDQUFDLGlCQUFpQixDQUFDLENBQUM7UUFDdEQsQ0FBQztLQUNELENBQUM7QUFDSCxDQUFDO0FBRUQsRUFBRSxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsWUFBWSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQzlDLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLDZCQUE2QixDQUFDLENBQUMifQ==

/***/ },
/* 144 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var $ = __webpack_require__(12);
	exports.moduleName = 'rl.ui.services.documentWrapper';
	exports.serviceName = 'documentWrapper';
	var DocumentService = (function () {
	    function DocumentService() {
	        this.documentControl = $(document);
	    }
	    DocumentService.prototype.height = function () {
	        return this.documentControl.height();
	    };
	    return DocumentService;
	}());
	angular.module(exports.moduleName, [])
	    .service(exports.serviceName, DocumentService);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZG9jdW1lbnRXcmFwcGVyLnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkb2N1bWVudFdyYXBwZXIuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNuQyxJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUVqQixrQkFBVSxHQUFXLGdDQUFnQyxDQUFDO0FBQ3RELG1CQUFXLEdBQVcsaUJBQWlCLENBQUM7QUFNbkQ7SUFBQTtRQUNTLG9CQUFlLEdBQVcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBSy9DLENBQUM7SUFIQSxnQ0FBTSxHQUFOO1FBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDdEMsQ0FBQztJQUNGLHNCQUFDO0FBQUQsQ0FBQyxBQU5ELElBTUM7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLE9BQU8sQ0FBQyxtQkFBVyxFQUFFLGVBQWUsQ0FBQyxDQUFDIn0=

/***/ },
/* 145 */
/***/ function(module, exports) {

	module.exports = "<div>Last edited by: {{entry.lastUpdatedBy.name}}</div>\r\n<div><rl-date-time-static date-value=\"entry.lastUpdatedDate\" include-time=\"true\"></rl-date-time-static></div>"

/***/ },
/* 146 */
/***/ function(module, exports) {

	module.exports = "<rl-dialog autosave=\"true\">\r\n\t<rl-dialog-content>\r\n\t\t<ng-form name=\"noteForm\">\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<rl-textbox ng-model=\"dialog.entry.message\" label=\"Message:\" maxlength=\"250\"></rl-textbox>\r\n\t\t\t</div>\r\n\t\t</ng-form>\r\n\t</rl-dialog-content>\r\n</rl-dialog>"

/***/ },
/* 147 */
/***/ function(module, exports) {

	module.exports = "<div>\r\n\t<rl-busy loading=\"log.loadingInitial\" size=\"2x\"></rl-busy>\r\n\t<div class=\"content-group\" ng-repeat=\"entry in log.messages\" rl-alias=\"entry as {{log.messageAs}}\" ng-class=\"{ 'system-note': entry.isSystemNote }\">\r\n\t\t<rl-generic-container selector=\"log.getEntrySelector(entry)\" templates=\"log.templates\">\r\n\t\t\t<template default>\r\n\t\t\t\t<div class=\"message-body\">\r\n\t\t\t\t\t<div class=\"message-content\">\r\n\t\t\t\t\t\t<div ng-bind-html=\"entry.message\"></div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<span class=\"message-button\" ng-if=\"log.canEditEntry(entry)\">\r\n\t\t\t\t\t\t<rl-button-async type=\"message-default flat\" action=\"log.editMessage(entry)\" size=\"xs\"><i class=\"fa fa-edit\"></i></rl-button-async>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<span class=\"message-button\" ng-if=\"log.canDeleteEntry(entry)\">\r\n\t\t\t\t\t\t<rl-button-async type=\"message-danger flat\" action=\"log.messageLog.deleteMessage(entry)\" size=\"xs\"><i class=\"fa fa-remove\"></i></rl-button-async>\r\n\t\t\t\t\t</span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"message-byline\">\r\n\t\t\t\t\t<div class=\"byline\">{{entry.createdBy.name}}</div>\r\n\t\t\t\t\t<div class=\"byline\">\r\n\t\t\t\t\t\t<rl-date-time-static date-value=\"entry.createdDate\" include-time=\"true\"></rl-date-time-static>\r\n\t\t\t\t\t\t<span  ng-if=\"entry.edited\" class=\"edited-note\" rl-popover=\"log.tooltipTemplate\" popover-trigger=\"mouseenter\">(edited)</span></div>\r\n\t\t\t\t</div>\r\n\t\t\t</template>\r\n\t\t</rl-generic-container>\r\n\t</div>\r\n\t<div class=\"content-group\" ng-if=\"(log.messages | isEmpty) && !log.loadingInitial\">No existing messages</div>\r\n\t<div class=\"row\">\r\n\t\t<div class=\"col-xs-12\">\r\n\t\t\t<div class=\"text-center\">\r\n\t\t\t\t<rl-button-async action=\"log.getTop()\" ng-disabled=\"log.loading\" button-right-aligned=\"true\">\r\n\t\t\t\t\t<span ng-show=\"log.hasPreviousPage\">Top <i class=\"fa fa-caret-up\"></i></span>\r\n\t\t\t\t\t<span ng-hide=\"log.hasPreviousPage\"><i class=\"fa fa-refresh\"></i> Refresh</span>\r\n\t\t\t\t</rl-button-async>\r\n\t\t\t\t<rl-button-async ng-disabled=\"log.hasNextPage == false || log.loading\" action=\"log.getOlder()\">\r\n\t\t\t\t\tOlder <i class=\"fa fa-caret-right\"></i>\r\n\t\t\t\t</rl-button-async>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n"

/***/ },
/* 148 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var messageLog_service_1 = __webpack_require__(136);
	exports.directiveName = 'rlEditableMessageLog';
	exports.controllerName = 'EditableMessageLogController';
	var __object = typescript_angular_utilities_1.services.object;
	;
	var EditableMessageLogController = (function () {
	    function EditableMessageLogController($scope, messageLogFactory, object) {
	        var _this = this;
	        this.object = object;
	        this.messageLogService = messageLogFactory.getInstance();
	        $scope.$watch(function () { return _this.messageLogService.busy; }, function (value) {
	            if (value === false) {
	                _this.busy = false;
	                _this.savingMessage = false;
	            }
	            else {
	                _this.busy = true;
	            }
	        });
	    }
	    EditableMessageLogController.prototype.add = function () {
	        if (this.object.isNullOrWhitespace(this.newMessage)) {
	            return null;
	        }
	        this.savingMessage = true;
	        var message = this.newMessage;
	        this.newMessage = '';
	        return this.messageLogService.addMessage({ message: message });
	    };
	    EditableMessageLogController.$inject = ['$scope', messageLog_service_1.factoryName, __object.serviceName];
	    return EditableMessageLogController;
	}());
	exports.EditableMessageLogController = EditableMessageLogController;
	function editableMessageLog() {
	    'use strict';
	    return {
	        restrict: 'E',
	        template: "\n\t\t\t<form ng-submit=\"log.add()\">\n\t\t\t\t<div class=\"input-group\">\n\t\t\t\t\t<input type=\"text\" class=\"form-control\" ng-model=\"log.newMessage\" placeholder=\"Enter log message\" />\n\t\t\t\t\t<span class=\"input-group-btn\">\n\t\t\t\t\t\t<button class=\"btn btn-default\" type=\"submit\" ng-disabled=\"log.busy\">\n\t\t\t\t\t\t\t<rl-busy loading=\"log.savingMessage\"></rl-busy> Add\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"message-log\">\n\t\t\t\t\t<rl-message-log service=\"log.service\" page-size=\"log.pageSize\" message-log=\"log.messageLogService\"\n\t\t\t\t\t\t\t\t\tcurrent-user=\"log.currentUser\" can-delete=\"log.canDelete\"></rl-message-log>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t",
	        controller: exports.controllerName,
	        controllerAs: 'log',
	        scope: {},
	        bindToController: {
	            service: '=',
	            pageSize: '=',
	            currentUser: '=?',
	            canDelete: '=?',
	        },
	    };
	}
	exports.editableMessageLog = editableMessageLog;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWRpdGFibGVNZXNzYWdlTG9nLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiZWRpdGFibGVNZXNzYWdlTG9nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUliLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBRXhELG1DQU1PLHNCQUFzQixDQUFDLENBQUE7QUFFbkIscUJBQWEsR0FBVyxzQkFBc0IsQ0FBQztBQUMvQyxzQkFBYyxHQUFXLDhCQUE4QixDQUFBO0FBRWxFLElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBQUEsQ0FBQztBQVNuQztJQWFDLHNDQUFZLE1BQXNCLEVBQy9CLGlCQUFxQyxFQUM3QixNQUErQjtRQWYzQyxpQkFzQ0M7UUF2QlcsV0FBTSxHQUFOLE1BQU0sQ0FBeUI7UUFDekMsSUFBSSxDQUFDLGlCQUFpQixHQUFHLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxDQUFDO1FBRXpELE1BQU0sQ0FBQyxNQUFNLENBQUMsY0FBaUIsTUFBTSxDQUFDLEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsVUFBQyxLQUFjO1lBQ3BGLEVBQUUsQ0FBQyxDQUFDLEtBQUssS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO2dCQUNyQixLQUFJLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQztnQkFDbEIsS0FBSSxDQUFDLGFBQWEsR0FBRyxLQUFLLENBQUM7WUFDNUIsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNQLEtBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO1lBQ2xCLENBQUM7UUFDRixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRCwwQ0FBRyxHQUFIO1FBQ0MsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JELE1BQU0sQ0FBQyxJQUFJLENBQUM7UUFDYixDQUFDO1FBRUQsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUM7UUFDMUIsSUFBSSxPQUFPLEdBQVcsSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUN0QyxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNyQixNQUFNLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsQ0FBQyxDQUFDO0lBQ2hFLENBQUM7SUF6Qk0sb0NBQU8sR0FBYSxDQUFDLFFBQVEsRUFBRSxnQ0FBcUIsRUFBRSxRQUFRLENBQUMsV0FBVyxDQUFDLENBQUM7SUEwQnBGLG1DQUFDO0FBQUQsQ0FBQyxBQXRDRCxJQXNDQztBQXRDWSxvQ0FBNEIsK0JBc0N4QyxDQUFBO0FBRUQ7SUFDQyxZQUFZLENBQUM7SUFDYixNQUFNLENBQUM7UUFDTixRQUFRLEVBQUUsR0FBRztRQUNiLFFBQVEsRUFBRSwwdUJBZVQ7UUFDRCxVQUFVLEVBQUUsc0JBQWM7UUFDMUIsWUFBWSxFQUFFLEtBQUs7UUFDbkIsS0FBSyxFQUFFLEVBQUU7UUFDVCxnQkFBZ0IsRUFBRTtZQUNqQixPQUFPLEVBQUUsR0FBRztZQUNaLFFBQVEsRUFBRSxHQUFHO1lBQ2IsV0FBVyxFQUFFLElBQUk7WUFDakIsU0FBUyxFQUFFLElBQUk7U0FDZjtLQUNELENBQUM7QUFDSCxDQUFDO0FBOUJlLDBCQUFrQixxQkE4QmpDLENBQUEifQ==

/***/ },
/* 149 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	exports.moduleName = 'rl.ui.components.multiStepIndicator';
	exports.componentName = 'rlMultiStepIndicator';
	exports.controllerName = 'MultiStepIndicatorController';
	var __object = typescript_angular_utilities_1.services.object;
	var MultiStepIndicatorController = (function () {
	    function MultiStepIndicatorController($state, $q, object) {
	        this.$state = $state;
	        this.$q = $q;
	        this.object = object;
	        this.configureSteps();
	    }
	    MultiStepIndicatorController.prototype.onClick = function (step) {
	        if (!this.anyLoading()) {
	            step.loading = true;
	            this.$q.when(step.onClick()).then(function () {
	                step.loading = false;
	            });
	        }
	    };
	    MultiStepIndicatorController.prototype.anyLoading = function () {
	        return _.some(this.steps, function (step) {
	            return step.loading;
	        });
	    };
	    MultiStepIndicatorController.prototype.configureSteps = function () {
	        var _this = this;
	        _.each(this.steps, function (step) {
	            step.hasCount = _.isFunction(step.count);
	            step.getCompleted = function () { return _this.getIsCompleted(step); };
	            step.getValid = function () { return _this.getIsValid(step); };
	            if (!_.isFunction(step.onClick)) {
	                if (_this.object.isNullOrWhitespace(step.stateName)) {
	                    step.inactive = true;
	                }
	                else {
	                    step.onClick = function () { return _this.redirectToState(step); };
	                    if (_this.$state.includes(step.stateName)) {
	                        step.isCurrent = true;
	                    }
	                }
	            }
	        });
	    };
	    MultiStepIndicatorController.prototype.redirectToState = function (step) {
	        var _this = this;
	        return this.$state.go(step.stateName).then(function () {
	            _this.clearCurrentState();
	            step.isCurrent = true;
	        });
	    };
	    MultiStepIndicatorController.prototype.clearCurrentState = function () {
	        _.each(this.steps, function (step) {
	            step.isCurrent = false;
	        });
	    };
	    MultiStepIndicatorController.prototype.getIsCompleted = function (step) {
	        return _.isFunction(step.isCompleted)
	            ? step.isCompleted()
	            : step.isCompleted;
	    };
	    MultiStepIndicatorController.prototype.setIsCompleted = function (step, isCompleted) {
	        if (!_.isFunction(step.isCompleted)) {
	            step.isCompleted = isCompleted;
	        }
	    };
	    MultiStepIndicatorController.prototype.getIsValid = function (step) {
	        if (_.isFunction(step.isValid)) {
	            return step.isValid();
	        }
	        else if (!_.isUndefined(step.isValid != null)) {
	            return step.isValid;
	        }
	        else {
	            return true;
	        }
	    };
	    MultiStepIndicatorController.$inject = ['$state', '$q', __object.serviceName];
	    return MultiStepIndicatorController;
	}());
	exports.MultiStepIndicatorController = MultiStepIndicatorController;
	var multiStepIndicator = {
	    template: __webpack_require__(150),
	    controller: exports.controllerName,
	    controllerAs: 'breadcrumb',
	    bindings: {
	        steps: '=',
	        numbered: '=',
	    },
	};
	angular.module(exports.moduleName, [__object.moduleName])
	    .component(exports.componentName, multiStepIndicator)
	    .controller(exports.controllerName, MultiStepIndicatorController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXVsdGlTdGVwSW5kaWNhdG9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibXVsdGlTdGVwSW5kaWNhdG9yLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNuQyxJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1Qiw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUU3QyxrQkFBVSxHQUFXLHFDQUFxQyxDQUFDO0FBQzNELHFCQUFhLEdBQVcsc0JBQXNCLENBQUM7QUFDL0Msc0JBQWMsR0FBVyw4QkFBOEIsQ0FBQztBQUVuRSxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQXFCbEM7SUFJQyxzQ0FBb0IsTUFBZ0MsRUFDeEMsRUFBcUIsRUFDckIsTUFBK0I7UUFGdkIsV0FBTSxHQUFOLE1BQU0sQ0FBMEI7UUFDeEMsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFDckIsV0FBTSxHQUFOLE1BQU0sQ0FBeUI7UUFDMUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRCw4Q0FBTyxHQUFQLFVBQVEsSUFBcUI7UUFDNUIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQ3hCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1lBQ3BCLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQztnQkFDakMsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUM7WUFDdEIsQ0FBQyxDQUFDLENBQUM7UUFDSixDQUFDO0lBQ0YsQ0FBQztJQUVELGlEQUFVLEdBQVY7UUFDQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFVB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

/***/ },
/* 150 */
/***/ function(module, exports) {

	module.exports = "<div class=\"multi-step checked\" ng-class=\"{ 'numbered': breadcrumb.numbered }\">\r\n\t<ol>\r\n\t\t<li ng-repeat=\"step in breadcrumb.steps\" ng-click=\"breadcrumb.onClick(step)\"\r\n\t\t\tng-class=\"{ 'completed': step.getCompleted(), 'current': step.isCurrent, 'active': !step.inactive && !breadcrumb.anyLoading() }\">\r\n\t\t\t<div class=\"wrap\">\r\n\t\t\t\t<p class=\"badge\" ng-show=\"step.hasCount\">{{step.count()}}</p>\r\n\t\t\t\t<p class=\"error\" ng-if=\"!step.getValid()\"></p>\r\n\t\t\t\t<p class=\"title\">{{step.title}} <rl-busy loading=\"step.loading\"></rl-busy></p>\r\n\t\t\t\t<p class=\"subtitle\">{{step.subtitle}}</p>\r\n\t\t\t</div>\r\n\t\t</li>\r\n\t</ol>\r\n</div>"

/***/ },
/* 151 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var radioGroup_1 = __webpack_require__(152);
	exports.radioGroupDirectiveName = radioGroup_1.directiveName;
	exports.radioGroup = radioGroup_1.radioGroup;
	exports.radioGroupControllerName = radioGroup_1.controllerName;
	exports.RadioGroupController = radioGroup_1.RadioGroupController;
	var radio_1 = __webpack_require__(153);
	exports.radioComponentName = radio_1.componentName;
	exports.radio = radio_1.radio;
	exports.radioControllerName = radio_1.controllerName;
	exports.RadioController = radio_1.RadioController;
	exports.moduleName = 'rl21.components.radio';
	angular.module(exports.moduleName, [__object.moduleName])
	    .directive(radioGroup_1.directiveName, radioGroup_1.radioGroup)
	    .controller(radioGroup_1.controllerName, radioGroup_1.RadioGroupController)
	    .component(radio_1.componentName, radio_1.radio)
	    .controller(radio_1.controllerName, radio_1.RadioController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFkaW8ubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmFkaW8ubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBRWxDLDJCQUtPLGNBQWMsQ0FBQyxDQUFBO0FBU3JCLCtCQUF1QjtBQUN2QixrQkFBVTtBQUNWLGdDQUF3QjtBQUN4Qiw0QkFBb0I7QUFYckIsc0JBS08sU0FBUyxDQUFDLENBQUE7QUFPaEIsMEJBQWtCO0FBQ2xCLGFBQUs7QUFDTCwyQkFBbUI7QUFDbkIsdUJBQWU7QUFHTCxrQkFBVSxHQUFXLHVCQUF1QixDQUFDO0FBRXhELE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUMvQyxTQUFTLENBQUMsMEJBQXVCLEVBQUUsdUJBQVUsQ0FBQztLQUM5QyxVQUFVLENBQUMsMkJBQXdCLEVBQUUsaUNBQW9CLENBQUM7S0FDMUQsU0FBUyxDQUFDLHFCQUFrQixFQUFFLGFBQUssQ0FBQztLQUNwQyxVQUFVLENBQUMsc0JBQW1CLEVBQUUsdUJBQWUsQ0FBQyxDQUFDIn0=

/***/ },
/* 152 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __guid = typescript_angular_utilities_1.services.guid;
	exports.directiveName = 'rlRadioGroup';
	exports.controllerName = 'RadioGroupController';
	var RadioGroup = (function () {
	    function RadioGroup(ngModel, name) {
	        this.ngModel = ngModel;
	        this.name = name;
	    }
	    Object.defineProperty(RadioGroup.prototype, "selection", {
	        get: function () {
	            return this.ngModel.$viewValue;
	        },
	        set: function (value) {
	            this.ngModel.$setViewValue(value);
	        },
	        enumerable: true,
	        configurable: true
	    });
	    return RadioGroup;
	}());
	exports.RadioGroup = RadioGroup;
	var RadioGroupController = (function () {
	    function RadioGroupController($scope, $attrs, object) {
	        this.$scope = $scope;
	        this.$attrs = $attrs;
	        this.object = object;
	    }
	    RadioGroupController.prototype.$onInit = function () {
	        var name;
	        if (!this.object.isNullOrWhitespace(this.$attrs.rlRadioGroup)) {
	            name = this.$attrs.rlRadioGroup;
	        }
	        else if (!this.object.isNullOrWhitespace(this.$attrs.name)) {
	            name = this.$attrs.name;
	        }
	        else {
	            name = 'RadioGroup-' + __guid.guid.random();
	        }
	        this.group = new RadioGroup(this.ngModel, name);
	    };
	    RadioGroupController.$inject = ['$scope', '$attrs', __object.serviceName];
	    return RadioGroupController;
	}());
	exports.RadioGroupController = RadioGroupController;
	function radioGroup() {
	    'use strict';
	    return {
	        restrict: 'AE',
	        require: { ngModel: 'ngModel' },
	        controller: exports.controllerName,
	        bindToController: true,
	    };
	}
	exports.radioGroup = radioGroup;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFkaW9Hcm91cC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJhZGlvR3JvdXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBSWIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFDbEMsSUFBTyxNQUFNLEdBQUcsdUNBQVEsQ0FBQyxJQUFJLENBQUM7QUFFbkIscUJBQWEsR0FBVyxjQUFjLENBQUM7QUFDdkMsc0JBQWMsR0FBVyxzQkFBc0IsQ0FBQztBQU8zRDtJQVNDLG9CQUFvQixPQUE4QixFQUFTLElBQWE7UUFBcEQsWUFBTyxHQUFQLE9BQU8sQ0FBdUI7UUFBUyxTQUFJLEdBQUosSUFBSSxDQUFTO0lBQUcsQ0FBQztJQVI1RSxzQkFBSSxpQ0FBUzthQUFiO1lBQ0MsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO1FBQ2hDLENBQUM7YUFFRCxVQUFjLEtBQVU7WUFDdkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkMsQ0FBQzs7O09BSkE7SUFPRixpQkFBQztBQUFELENBQUMsQUFWRCxJQVVDO0FBVlksa0JBQVUsYUFVdEIsQ0FBQTtBQUVEO0lBS0MsOEJBQW9CLE1BQWlCLEVBQ3pCLE1BQTZCLEVBQzdCLE1BQStCO1FBRnZCLFdBQU0sR0FBTixNQUFNLENBQVc7UUFDekIsV0FBTSxHQUFOLE1BQU0sQ0FBdUI7UUFDN0IsV0FBTSxHQUFOLE1BQU0sQ0FBeUI7SUFBRyxDQUFDO0lBRS9DLHNDQUFPLEdBQVA7UUFDQyxJQUFJLElBQVksQ0FBQztRQUNqQixFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0QsSUFBSSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDO1FBQ2pDLENBQUM7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzlELElBQUksR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztRQUN6QixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDUCxJQUFJLEdBQUcsYUFBYSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7UUFDN0MsQ0FBQztRQUVELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztJQUNqRCxDQUFDO0lBaEJNLDRCQUFPLEdBQWEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQWlCdkUsMkJBQUM7QUFBRCxDQUFDLEFBckJELElBcUJDO0FBckJZLDRCQUFvQix1QkFxQmhDLENBQUE7QUFFRDtJQUNDLFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFFBQVEsRUFBRSxJQUFJO1FBQ2QsT0FBTyxFQUFFLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRTtRQUMvQixVQUFVLEVBQUUsc0JBQWM7UUFDMUIsZ0JBQWdCLEVBQUUsSUFBSTtLQUN0QixDQUFDO0FBQ0gsQ0FBQztBQVJlLGtCQUFVLGFBUXpCLENBQUEifQ==

/***/ },
/* 153 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var radioGroup_1 = __webpack_require__(152);
	exports.componentName = 'rlRadio';
	exports.controllerName = 'RadioController';
	var RadioController = (function () {
	    function RadioController($scope) {
	        this.$scope = $scope;
	    }
	    RadioController.prototype.$onInit = function () {
	        if (this.groupController != null) {
	            this.radioGroup = this.groupController.group;
	        }
	        else {
	            this.radioGroup = new radioGroup_1.RadioGroup(this.ngModel);
	        }
	    };
	    RadioController.$inject = ['$scope'];
	    return RadioController;
	}());
	exports.RadioController = RadioController;
	exports.radio = {
	    require: {
	        groupController: '?^^rlRadioGroup',
	        ngModel: '?ngModel',
	    },
	    transclude: true,
	    template: "\n\t\t<label>\n\t\t\t<input id=\"radio\" type=\"radio\" name=\"{{::radio.radioGroup.name}}\" ng-model=\"radio.radioGroup.selection\" ng-value=\"::radio.value\" />\n\t\t\t<span ng-transclude></div>\n\t\t</label>\n\t",
	    controller: exports.controllerName,
	    controllerAs: 'radio',
	    bindings: {
	        value: '<',
	    },
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmFkaW8uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyYWRpby50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFJYiwyQkFBaUQsY0FBYyxDQUFDLENBQUE7QUFFckQscUJBQWEsR0FBVyxTQUFTLENBQUM7QUFDbEMsc0JBQWMsR0FBVyxpQkFBaUIsQ0FBQztBQUV0RDtJQU1DLHlCQUFvQixNQUFpQjtRQUFqQixXQUFNLEdBQU4sTUFBTSxDQUFXO0lBQUksQ0FBQztJQUUxQyxpQ0FBTyxHQUFQO1FBQ0MsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLGVBQWUsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ2xDLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLGVBQWUsQ0FBQyxLQUFLLENBQUM7UUFDOUMsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ1AsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFJLHVCQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2hELENBQUM7SUFDRixDQUFDO0lBVE0sdUJBQU8sR0FBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBVXZDLHNCQUFDO0FBQUQsQ0FBQyxBQWZELElBZUM7QUFmWSx1QkFBZSxrQkFlM0IsQ0FBQTtBQUVVLGFBQUssR0FBeUI7SUFDeEMsT0FBTyxFQUFFO1FBQ1IsZUFBZSxFQUFFLGlCQUFpQjtRQUNsQyxPQUFPLEVBQUUsVUFBVTtLQUNuQjtJQUNELFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFFBQVEsRUFBRSx3TkFLVDtJQUNELFVBQVUsRUFBRSxzQkFBYztJQUMxQixZQUFZLEVBQUUsT0FBTztJQUNyQixRQUFRLEVBQUU7UUFDVCxLQUFLLEVBQUUsR0FBRztLQUNWO0NBQ0QsQ0FBQyJ9

/***/ },
/* 154 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	__webpack_require__(155);
	var angular = __webpack_require__(1);
	var componentsDefaultTheme_1 = __webpack_require__(30);
	var ratingBarBackgrounds_service_1 = __webpack_require__(157);
	var ratingBarClass_service_1 = __webpack_require__(158);
	exports.moduleName = 'rl.ui.components.ratingBar';
	exports.componentName = 'rlRatingBar';
	exports.controllerName = 'RatingBarController';
	var RatingBarController = (function () {
	    function RatingBarController($scope, useDefaultTheme) {
	        var _this = this;
	        this.$scope = $scope;
	        this.useDefaultTheme = useDefaultTheme;
	        var ratingBarBackgrounds = new ratingBarBackgrounds_service_1.RatingBarBackgroundService;
	        this.ratingBarClass = new ratingBarClass_service_1.RatingBarClassService;
	        this.backgroundClass = ratingBarBackgrounds.getBackground(this.background);
	        if (this.value == null) {
	            this.value = 0;
	        }
	        $scope.$watch(function () { return _this.value; }, function (newValue) {
	            _this.updateValue(newValue);
	        });
	        $scope.$watch(function () { return _this.totalWidth; }, function (newWidth) {
	            _this.dimensions = {
	                width: newWidth + 2,
	                height: _this.height + 2,
	            };
	            _this.updateValue(_this.value);
	        });
	    }
	    RatingBarController.prototype.updateValue = function (newValue) {
	        var confidenceScore = (newValue - this.min) / (this.max - this.min);
	        this.barClass = this.ratingBarClass.getClass(confidenceScore);
	        this.width = Math.round(confidenceScore * this.totalWidth);
	    };
	    RatingBarController.$inject = ['$scope', componentsDefaultTheme_1.defaultThemeValueName];
	    return RatingBarController;
	}());
	exports.RatingBarController = RatingBarController;
	var ratingBar = {
	    template: "\n\t\t<div class=\"rating-bar\">\n\t\t\t<div class=\"{{ratingBar.backgroundClass}}\" ng-class=\"{ empty: ratingBar.value == ratingBar.min, 'default-theme': ratingBar.useDefaultTheme }\" ng-style=\"ratingBar.dimensions\">\n\t\t\t\t<div ng-class=\"ratingBar.barClass\" ng-style=\"{ width: ratingBar.width, height: ratingBar.height }\"></div>\n\t\t\t</div>\n\t\t</div>\n\t",
	    controller: exports.controllerName,
	    controllerAs: 'ratingBar',
	    bindings: {
	        totalWidth: '<width',
	        height: '<',
	        value: '<',
	        min: '<',
	        max: '<',
	        background: '<',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, ratingBar)
	    .controller(exports.controllerName, RatingBarController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmF0aW5nQmFyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmF0aW5nQmFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLFFBQU8saUJBQWlCLENBQUMsQ0FBQTtBQUV6QixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyx1Q0FBc0MsMkJBQTJCLENBQUMsQ0FBQTtBQUVsRSw2Q0FBeUUsZ0NBQWdDLENBQUMsQ0FBQTtBQUMxRyx1Q0FBOEQsMEJBQTBCLENBQUMsQ0FBQTtBQUU5RSxrQkFBVSxHQUFXLDRCQUE0QixDQUFDO0FBQ2xELHFCQUFhLEdBQVcsYUFBYSxDQUFDO0FBQ3RDLHNCQUFjLEdBQVcscUJBQXFCLENBQUM7QUFnQjFEO0lBaUJDLDZCQUFvQixNQUFzQixFQUFTLGVBQXdCO1FBakI1RSxpQkE2Q0M7UUE1Qm9CLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQVMsb0JBQWUsR0FBZixlQUFlLENBQVM7UUFDMUUsSUFBSSxvQkFBb0IsR0FBaUMsSUFBSSx5REFBMEIsQ0FBQztRQUN4RixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksOENBQXFCLENBQUM7UUFFaEQsSUFBSSxDQUFDLGVBQWUsR0FBRyxvQkFBb0IsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBRTNFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN4QixJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUNoQixDQUFDO1FBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFnQixNQUFNLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFDLFFBQWdCO1lBQ3BFLEtBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUIsQ0FBQyxDQUFDLENBQUM7UUFFSCxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWdCLE1BQU0sQ0FBQyxLQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQUMsUUFBZ0I7WUFDekUsS0FBSSxDQUFDLFVBQVUsR0FBRztnQkFDakIsS0FBSyxFQUFFLFFBQVEsR0FBRyxDQUFDO2dCQUNuQixNQUFNLEVBQUUsS0FBSSxDQUFDLE1BQU0sR0FBRyxDQUFDO2FBQ3ZCLENBQUM7WUFDRixLQUFJLENBQUMsV0FBVyxDQUFDLEtBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFTyx5Q0FBVyxHQUFuQixVQUFvQixRQUFnQjtRQUNuQyxJQUFJLGVBQWUsR0FBVyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM1RSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FBQzlELElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxlQUFlLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUE1Qk0sMkJBQU8sR0FBYSxDQUFDLFFBQVEsRUFBRSw4Q0FBcUIsQ0FBQyxDQUFDO0lBNkI5RCwwQkFBQztBQUFELENBQUMsQUE3Q0QsSUE2Q0M7QUE3Q1ksMkJBQW1CLHNCQTZDL0IsQ0FBQTtBQUVELElBQUksU0FBUyxHQUE4QjtJQUMxQyxRQUFRLEVBQUUsbVhBTVQ7SUFDRCxVQUFVLEVBQUUsc0JBQWM7SUFDMUIsWUFBWSxFQUFFLFdBQVc7SUFDekIsUUFBUSxFQUFFO1FBQ1QsVUFBVSxFQUFFLFFBQVE7UUFDcEIsTUFBTSxFQUFFLEdBQUc7UUFDWCxLQUFLLEVBQUUsR0FBRztRQUNWLEdBQUcsRUFBRSxHQUFHO1FBQ1IsR0FBRyxFQUFFLEdBQUc7UUFDUixVQUFVLEVBQUUsR0FBRztLQUNmO0NBQ0QsQ0FBQztBQUVGLE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxFQUFFLENBQUM7S0FDNUIsU0FBUyxDQUFDLHFCQUFhLEVBQUUsU0FBUyxDQUFDO0tBQ25DLFVBQVUsQ0FBQyxzQkFBYyxFQUFFLG1CQUFtQixDQUFDLENBQUMifQ==

/***/ },
/* 155 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(156);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../../node_modules/css-loader/index.js!./ratingBar.css", function() {
				var newContent = require("!!./../../../node_modules/css-loader/index.js!./ratingBar.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 156 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, ".rating-bar .default-theme.background {\r\n\tbackground-color: #fff;\r\n\tborder: 1px solid #aaaaaa;\r\n}\r\n.rating-bar .default-theme.background.empty {\r\n\tborder: 1px solid red;\r\n}\r\n.rating-bar .default-theme .very-high { background-color: #20D000 }\r\n.rating-bar .default-theme .high { background-color: #00a000 }\r\n.rating-bar .default-theme .medium { background-color: #007000 }\r\n.rating-bar .default-theme .low { background-color: #aa0000 }\r\n.rating-bar .default-theme .very-low { background-color: #ff0000 }\r\n", ""]);
	
	// exports


/***/ },
/* 157 */
/***/ function(module, exports) {

	'use strict';
	var RatingBarBackgroundService = (function () {
	    function RatingBarBackgroundService() {
	        this.standard = {
	            type: 'standard',
	            class: 'background',
	        };
	        this.dark = {
	            type: 'dark',
	            class: 'background-dark',
	        };
	        this.transparent = {
	            type: 'transparent',
	            class: 'background-transparent',
	        };
	    }
	    RatingBarBackgroundService.prototype.getBackground = function (type) {
	        if (type === this.dark.type) {
	            return this.dark.class;
	        }
	        else if (type === this.transparent.type) {
	            return this.transparent.class;
	        }
	        else {
	            return this.standard.class;
	        }
	    };
	    return RatingBarBackgroundService;
	}());
	exports.RatingBarBackgroundService = RatingBarBackgroundService;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmF0aW5nQmFyQmFja2dyb3VuZHMuc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJhdGluZ0JhckJhY2tncm91bmRzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBY2I7SUFBQTtRQUNDLGFBQVEsR0FBb0I7WUFDM0IsSUFBSSxFQUFFLFVBQVU7WUFDaEIsS0FBSyxFQUFFLFlBQVk7U0FDbkIsQ0FBQztRQUNGLFNBQUksR0FBb0I7WUFDdkIsSUFBSSxFQUFFLE1BQU07WUFDWixLQUFLLEVBQUUsaUJBQWlCO1NBQ3hCLENBQUM7UUFDRixnQkFBVyxHQUFvQjtZQUM5QixJQUFJLEVBQUUsYUFBYTtZQUNuQixLQUFLLEVBQUUsd0JBQXdCO1NBQy9CLENBQUM7SUFXSCxDQUFDO0lBVEEsa0RBQWEsR0FBYixVQUFjLElBQVk7UUFDekIsRUFBRSxDQUFDLENBQUMsSUFBSSxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUM3QixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDeEIsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQzNDLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQztRQUMvQixDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDUCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7UUFDNUIsQ0FBQztJQUNGLENBQUM7SUFDRixpQ0FBQztBQUFELENBQUMsQUF2QkQsSUF1QkM7QUF2Qlksa0NBQTBCLDZCQXVCdEMsQ0FBQSJ9

/***/ },
/* 158 */
/***/ function(module, exports) {

	'use strict';
	var RatingBarClassService = (function () {
	    function RatingBarClassService() {
	    }
	    RatingBarClassService.prototype.getClass = function (confidence) {
	        if (confidence >= 0.8) {
	            return 'very-high';
	        }
	        else if (confidence >= 0.6) {
	            return 'high';
	        }
	        else if (confidence >= 0.4) {
	            return 'medium';
	        }
	        else if (confidence >= 0.2) {
	            return 'low';
	        }
	        else {
	            return 'very-low';
	        }
	    };
	    return RatingBarClassService;
	}());
	exports.RatingBarClassService = RatingBarClassService;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmF0aW5nQmFyQ2xhc3Muc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInJhdGluZ0JhckNsYXNzLnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBTWI7SUFBQTtJQWNBLENBQUM7SUFiQSx3Q0FBUSxHQUFSLFVBQVMsVUFBa0I7UUFDMUIsRUFBRSxDQUFDLENBQUMsVUFBVSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUM7WUFDdkIsTUFBTSxDQUFDLFdBQVcsQ0FBQztRQUNwQixDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxNQUFNLENBQUM7UUFDZixDQUFDO1FBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFVBQVUsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzlCLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDakIsQ0FBQztRQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxVQUFVLElBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM5QixNQUFNLENBQUMsS0FBSyxDQUFDO1FBQ2QsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ1AsTUFBTSxDQUFDLFVBQVUsQ0FBQztRQUNuQixDQUFDO0lBQ0YsQ0FBQztJQUNGLDRCQUFDO0FBQUQsQ0FBQyxBQWRELElBY0M7QUFkWSw2QkFBcUIsd0JBY2pDLENBQUEifQ==

/***/ },
/* 159 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	__webpack_require__(160);
	__webpack_require__(162);
	__webpack_require__(163);
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var richTextEditor_config_1 = __webpack_require__(165);
	var headerButton_1 = __webpack_require__(166);
	var paragraphButton_1 = __webpack_require__(167);
	var externalProviderName = richTextEditor_config_1.providerName + 'Provider';
	exports.providerName = externalProviderName;
	exports.moduleName = 'rl.ui.components.richTextEditor';
	exports.componentName = 'rlRichTextEditor';
	exports.controllerName = 'RichTextEditorController';
	var RichTextEditorController = (function () {
	    function RichTextEditorController(object, provider) {
	        this.toolbar = 'h1, paragraph, bold, italic, underline, list1, list2, indent, outdent';
	        if (!object.isNullOrEmpty(this.customButtons)) {
	            this.toolbar += ', ' + this.customButtons;
	        }
	    }
	    RichTextEditorController.$inject = [__object.serviceName, richTextEditor_config_1.providerName];
	    return RichTextEditorController;
	}());
	exports.RichTextEditorController = RichTextEditorController;
	var richTextEditor = {
	    template: __webpack_require__(168),
	    controller: exports.controllerName,
	    controllerAs: 'editor',
	    bindings: {
	        ngModel: '=',
	        customButtons: '=',
	        ngDisabled: '=',
	    },
	};
	angular.module(exports.moduleName, ['ngWig', __object.moduleName])
	    .component(exports.componentName, richTextEditor)
	    .controller(exports.controllerName, RichTextEditorController)
	    .directive(headerButton_1.headerButtonDirectiveName, headerButton_1.headerButton)
	    .directive(paragraphButton_1.paragraphButtonDirectiveName, paragraphButton_1.paragraphButton)
	    .provider(richTextEditor_config_1.providerName, richTextEditor_config_1.richTextEditorProvider);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmljaFRleHRFZGl0b3IuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJyaWNoVGV4dEVkaXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwwREFBMEQ7QUFFMUQsWUFBWSxDQUFDO0FBRWIsUUFBTyw0QkFBNEIsQ0FBQyxDQUFBO0FBQ3BDLFFBQU8sb0JBQW9CLENBQUMsQ0FBQTtBQUM1QixRQUFPLHFCQUFxQixDQUFDLENBQUE7QUFFN0IsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFHbkMsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFFbEMsc0NBQThFLHlCQUF5QixDQUFDLENBQUE7QUFDeEcsNkJBQXlELGdCQUFnQixDQUFDLENBQUE7QUFDMUUsZ0NBQStELG1CQUFtQixDQUFDLENBQUE7QUFFbkYsSUFBSSxvQkFBb0IsR0FBVyxvQ0FBWSxHQUFHLFVBQVU7QUFDM0Isb0JBQVksd0JBRGdCO0FBR2xELGtCQUFVLEdBQVcsaUNBQWlDLENBQUM7QUFDdkQscUJBQWEsR0FBVyxrQkFBa0IsQ0FBQztBQUMzQyxzQkFBYyxHQUFXLDBCQUEwQixDQUFDO0FBUS9EO0lBU0Msa0NBQVksTUFBK0IsRUFBRSxRQUFjO1FBQzFELElBQUksQ0FBQyxPQUFPLEdBQUcsdUVBQXVFLENBQUM7UUFFdkYsRUFBRSxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0MsSUFBSSxDQUFDLE9BQU8sSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUMzQyxDQUFDO0lBQ0YsQ0FBQztJQVBNLGdDQUFPLEdBQWEsQ0FBQyxRQUFRLENBQUMsV0FBVyxFQUFFLG9DQUFZLENBQUMsQ0FBQztJQVFqRSwrQkFBQztBQUFELENBQUMsQUFoQkQsSUFnQkM7QUFoQlksZ0NBQXdCLDJCQWdCcEMsQ0FBQTtBQUVELElBQUksY0FBYyxHQUE4QjtJQUMvQyxRQUFRLEVBQUUsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0lBQzFDLFVBQVUsRUFBRSxzQkFBYztJQUMxQixZQUFZLEVBQUUsUUFBUTtJQUN0QixRQUFRLEVBQUU7UUFDVCxPQUFPLEVBQUUsR0FBRztRQUNaLGFBQWEsRUFBRSxHQUFHO1FBQ2xCLFVBQVUsRUFBRSxHQUFHO0tBQ2Y7Q0FDRCxDQUFDO0FBRUYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUN4RCxTQUFTLENBQUMscUJBQWEsRUFBRSxjQUFjLENBQUM7S0FDeEMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsd0JBQXdCLENBQUM7S0FDcEQsU0FBUyxDQUFDLHdDQUF5QixFQUFFLDJCQUFZLENBQUM7S0FDbEQsU0FBUyxDQUFDLDhDQUE0QixFQUFFLGlDQUFlLENBQUM7S0FDeEQsUUFBUSxDQUFDLG9DQUFZLEVBQUUsOENBQXNCLENBQUMsQ0FBQyJ9

/***/ },
/* 160 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(161);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../../css-loader/index.js!./ng-wig.css", function() {
				var newContent = require("!!./../../../css-loader/index.js!./ng-wig.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 161 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	exports.push([module.id, "@import url(https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css);", ""]);
	
	// module
	exports.push([module.id, "/* -------- NG-WIG -------- */\n/**\n *\n *  RESET BOX MODEL\n *\n */\n.ng-wig,\n[class^=\"nw-\"] {\n  -webkit-box-sizing: border-box;\n  -moz-box-sizing: border-box;\n  -o-box-sizing: border-box;\n  -ms-box-sizing: border-box;\n  box-sizing: border-box;\n}\n\n\n/**\n *   main wrapper for the editor\n *\n *  .ng-wig\n *\n */\n.ng-wig {\n  display: block;\n  padding: 0;\n  margin: 0;\n}\n\n\n/**\n *  styling for toolbar and its items\n *\n *  .nw-toolbar\n *    &__item\n *\n */\n.nw-toolbar {\n  display: block;\n  margin: 0 !important;\n  padding: 0 !important;\n  list-style: none !important;\n  font-size: 12px;\n  color: #6B7277;\n\n  background: -webkit-linear-gradient(90deg, #ffffff 0%, #f9f9f9 100%);\n  background:    -moz-linear-gradient(90deg, #ffffff 0%, #f9f9f9 100%);\n  background:         linear-gradient(180deg, #ffffff 0%, #f9f9f9 100%);\n  border: 1px solid #CCCCCC;\n  border-radius: 3px 3px 0 0;\n}\n\n.nw-toolbar__item {\n  display: inline-block;\n  vertical-align: top;\n  margin: 0;\n\n  border-right: 1px solid #DEDEDE;\n}\n\n.nw-toolbar label {\n  line-height: 30px;\n  display: inline-block;\n  padding: 0 6px 0 3px;\n}\n\n.nw-toolbar input[type=checkbox] {\n  vertical-align: -3px;\n  margin-right: -1px;\n}\n\n/**\n *  styling for the editor part: source code (original textarea) and resulting div\n *\n *  .nw-editor\n *    &__src\n *    &__res\n *\n */\n.nw-editor {\n  display: table;\n  /* Default when height is not set */\n  height: 300px;\n  background: #fff;\n  cursor: text;\n  width:100%;\n}\n\n.nw-editor-container {\n  border: 1px solid #CCCCCC;\n  border-top: none;\n  border-radius: 0 0 3px 3px;\n  position: relative;\n}\n\n.nw-editor__res {\n  min-height: 100%;\n  padding: 0 8px;\n  display: table-cell;\n}\n\n.nw-editor__src,\n.nw-editor__res {\n  width: 100%;\n  outline: none;\n  box-sizing: border-box;\n  border: none;\n  margin: 0;\n}\n\n.nw-editor__src-container {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.nw-editor__src {\n  height: 100%;\n  resize: none;\n  padding: 0 8px;\n}\n\n.nw-editor--fixed .nw-editor {\n  display:block;\n  overflow-y: auto;\n}\n\n.nw-editor--fixed .nw-editor__res {\n  padding: 1px 8px;\n  display:block;\n}\n\n.nw-invisible {\n  visibility: hidden;\n}\n\n.nw-editor--fixed .nw-invisible {\n  display: none;\n}\n\n.nw-editor.nw-disabled {\n\tcursor: default;\n}\n\n/**\n *  styling for toolbar button, has two modifiers: active and type of icon for background\n *\n *  .nw-button\n *    &--active\n *    &--{button type}\n *\n */\n.nw-button {\n  -webkit-appearance: none;\n  -moz-appearance:    none;\n  appearance:         none;\n\n  display: block;\n  width: 30px;\n  height: 30px;\n  margin: 0;\n  padding: 0;\n  opacity: 0.5;\n\n  background-color: transparent;\n  background-position: center center;\n  background-repeat: no-repeat;\n  border: none;\n  border-radius: 2px;\n\n  font-size: 0;\n\n  cursor: pointer;\n}\n\n.nw-button:before {\n  font-size: 12px;\n  font-family: FontAwesome;\n}\n\n.nw-button.bold:before {\n  content: '\\F032';\n}\n\n.nw-button.italic:before {\n  content: '\\F033';\n}\n\n.nw-button.list-ul:before {\n  content: '\\F0CA';\n}\n\n.nw-button.list-ol:before {\n  content: '\\F0CB';\n}\n\n.nw-button.link:before {\n  content: '\\F0C1';\n}\n\n.nw-button.font-color:before {\n  content: '\\F031';\n}\n\n.nw-button.nw-button--source:before {\n  content: '\\F040';\n}\n\n.nw-button:focus {\n  outline: none;\n}\n\n.nw-button:hover,\n.nw-button.nw-button--active {\n  opacity: 1\n}\n\n.nw-button--active {\n  background-color: #EEEEEE;\n}\n\n.nw-button:disabled {\n  cursor: default;\n}\n.nw-button:disabled:hover {\n  opacity: 0.5;\n}\n\n/**\n *  styling & formatting of content inside contenteditable div\n *\n *  .nw-content\n *\n */\n.nw-content {\n  padding: 12px;\n  margin: 0;\n\n  font-family: sans-serif;\n  font-size: 14px;\n  line-height: 24px;\n}\n\n.nw-select {\n  height: 30px;\n  padding: 6px;\n  color: #555;\n  background-color: inherit;\n  border: 0;\n}\n\n.nw-select:disabled {\n\topacity: 0.5;\n}\n\n.nw-select:focus { outline: none; }\n\n", ""]);
	
	// exports


/***/ },
/* 162 */
/***/ function(module, exports) {

	/**
	 * version: 2.3.4
	 */
	angular.module('ngWig', ['ngwig-app-templates']);
	
	angular.module('ngWig')
	  .directive('ngWig', ["$window", "$document", "ngWigToolbar", function ($window, $document, ngWigToolbar) {
	
	    return {
	      scope: {
	        content: '=ngWig',
	        onPaste: '='
	      },
	      restrict: 'A',
	      replace: true,
	      templateUrl: 'ng-wig/views/ng-wig.html',
	      link: function (scope, element, attrs) {
	        scope.formElementName = attrs.name;
	        element.removeAttr('name');
	
	        scope.isRequired = !!attrs.required;
	        scope.isSourceModeAllowed = Object.keys(attrs).indexOf('sourceModeAllowed') !== -1 ? true : false;
	        scope.editMode = false;
	        scope.toolbarButtons = ngWigToolbar.getToolbarButtons(attrs.buttons && string2array(attrs.buttons));
	
	        function string2array(keysString){
	          return keysString.split(',').map(Function.prototype.call, String.prototype.trim);
	        }
	
	        scope.toggleEditMode = function () {
	          scope.editMode = !scope.editMode;
	
	          if ($window.getSelection().removeAllRanges) {
	            $window.getSelection().removeAllRanges();
	          }
	        };
	
	        scope.execCommand = function (command, options) {
	          if(scope.editMode ) return false;
	
	          if (command === 'createlink') {
	            options = prompt('Please enter the URL', 'http://');
	            if(!options) {
	              return;
	            }
	          }
	          scope.$broadcast('execCommand', {command: command, options: options});
	        };
			
			if (attrs.ngDisabled != null || attrs.disabled != null) {
				scope.$watch(function() { return !!attrs.disabled; }, function(isDisabled) {
					scope.isDisabled = isDisabled;
					scope.$broadcast('nw-disabled', isDisabled);
				});	
			}
	      }
	    }
	  }]
	);
	
	
	angular.module('ngWig')
	  .directive('ngWigEditable', ["$document", function ($document) {
	    function init(scope, $element, attrs, ngModelController) {
	
	      $element.attr('contenteditable', true);
	
	      //model --> view
	      ngModelController.$render = function () {
	        $element.html(ngModelController.$viewValue || '');
	      };
	
	      //view --> model
	      function viewToModel() {
	        ngModelController.$setViewValue($element.html());
	      }
	
	      var eventsToBind = [
	        'blur',
	        'keyup',
	        'change',
	        'focus',
	        'click'
	      ];
	
	      if (angular.isFunction(scope.onPaste)) {
	        $element.on('paste', function(e) {
	          scope.onPaste(e, $element.html()).then(function(val) {
	            $element.html(val);
	          })
	        });
	      }else{
	        eventsToBind.push('paste');
	      }
	
	      $element.bind(eventsToBind.join(' '), function() {
	        viewToModel();
	        scope.$applyAsync();
	      });
	
	      scope.isEditorActive = function () {
	        return $element[0] === $document[0].activeElement;
	      };
	
	      scope.$on('execCommand', function (event, params) {
	        $element[0].focus();
	
	        var ieStyleTextSelection = $document[0].selection,
	          command = params.command,
	          options = params.options;
	
	        if (ieStyleTextSelection) {
	          var textRange = ieStyleTextSelection.createRange();
	        }
	
	        if ($document[0].queryCommandSupported && !$document[0].queryCommandSupported(command)) {
	          throw 'The command "' + command + '" is not supported';
	        }
	
	        $document[0].execCommand(command, false, options);
	
	        if (ieStyleTextSelection) {
	          textRange.collapse(false);
	          textRange.select();
	        }
	
	        viewToModel();
	      });
		  
		  scope.$on('nw-disabled', function(event, isDisabled) {
			  $element.attr('contenteditable', !isDisabled);
		  });
	    }
	
	    return {
	      restrict: 'A',
	      require: 'ngModel',
	      replace: true,
	      link: init
	    }
	  }]
	);
	
	angular.module('ngWig')
	    .directive('ngWigPlugin', ["$compile", function ($compile) {
	        return {
	            restrict: 'E',
	            link: function(scope, element) {
	                var template = '<' + scope.button.pluginName + ' />',
	                    compiled = $compile(template)(scope);
	
	                element.replaceWith(compiled);
	            }
	        }
	    }]);
	
	angular.module('ngWig').provider('ngWigToolbar', function () {
	
	  var buttonLibrary = {
	    list1: {title: 'Unordered List', command: 'insertunorderedlist', styleClass: 'list-ul'},
	    list2: {title: 'Ordered List', command: 'insertorderedlist', styleClass: 'list-ol'},
	    bold: {title: 'Bold', command: 'bold', styleClass: 'bold'},
	    italic: {title: 'Italic', command: 'italic', styleClass: 'italic'},
	    link: {title: 'Link', command: 'createlink', styleClass: 'link'}
	  };
	
	  var defaultButtonsList = ['list1', 'list2', 'bold', 'italic', 'link'];
	
	  var isButtonActive = function () {
	    return this.command && document.queryCommandState(this.command);
	  };
	
	  this.setButtons = function(buttons) {
	    if(!angular.isArray(buttons)) {
	      throw 'Argument "buttons" should be an array';
	    }
	
	    defaultButtonsList = buttons;
	  };
	
	  this.addStandardButton = function (name, title, command, styleClass) {
	    if(!name || !title || !command) {
	      throw 'Arguments "name", "title" and "command" are required';
	    }
	
	    styleClass = styleClass || '';
	    buttonLibrary[name] = {title: title, command: command, styleClass: styleClass}
	    defaultButtonsList.push(name);
	  };
	
	  this.addCustomButton = function (name, pluginName) {
	    if(!name || !pluginName) {
	      throw 'Arguments "name" and "pluginName" are required';
	    }
	
	    buttonLibrary[name] = {pluginName: pluginName, isComplex: true};
	    defaultButtonsList.push(name);
	  };
	
	  this.$get = function () {
	    return {
	      getToolbarButtons: function(list) {
	        var toolbarButtons = [];
	        (list || defaultButtonsList).forEach(function(buttonKey) {
	          if(!buttonLibrary[buttonKey]) {
	            throw 'There is no "' + buttonKey + '" in your library. Possible variants: ' + Object.keys(buttonLibrary);
	          }
	
	          var button = angular.copy(buttonLibrary[buttonKey]);
	
	          if(!angular.isFunction(button.isActive)) {
	            button.isActive = isButtonActive;
	          }
	
	          toolbarButtons.push(button);
	        });
	        return toolbarButtons;
	      }
	    };
	  };
	
	
	});
	angular.module('ngWig')
	    .config(['ngWigToolbarProvider', function (ngWigToolbarProvider) {
	       ngWigToolbarProvider.addCustomButton('formats', 'nw-formats-button');
	    }])
	    .directive('nwFormatsButton', function() {
	        return {
	            restrict: 'E',
	            replace: true,
	            template: '<select class="nw-select" ng-model="format" ng-change="execCommand(\'formatblock\', format.value)" ng-options="format.name for format in formats" ng-disabled="editMode || isDisabled"></select>',
	            link: function (scope) {
	                scope.formats = [
	                    {name: 'Normal text', value: 'p'},
	                    {name: 'Header 1', value: 'h1'},
	                    {name: 'Header 2', value: 'h2'},
	                    {name: 'Header 3', value: 'h3'}
	                ];
	
	                scope.format = scope.formats[0];
	            }
	        };
	    });
	
	
	angular.module('ngwig-app-templates', ['ng-wig/views/ng-wig.html']);
	
	angular.module("ng-wig/views/ng-wig.html", []).run(["$templateCache", function($templateCache) {
	  $templateCache.put("ng-wig/views/ng-wig.html",
	    "<div class=\"ng-wig\">\n" +
	    "  <ul class=\"nw-toolbar\">\n" +
	    "    <li class=\"nw-toolbar__item\" ng-repeat=\"button in toolbarButtons\" >\n" +
	    "        <div ng-if=\"!button.isComplex\">\n" +
	    "          <button type=\"button\" class=\"nw-button {{button.styleClass}}\" title=\"{{button.title}}\" ng-click=\"execCommand(button.command)\" ng-class=\"{ 'nw-button--active': isEditorActive() && button.isActive() }\" ng-disabled=\"editMode || isDisabled\">\n" +
	    "            {{ button.title }}\n" +
	    "          </button>\n" +
	    "        </div>\n" +
	    "        <div ng-if=\"button.isComplex\">\n" +
	    "          <ng-wig-plugin plugin=\"{{button}}\"></ng-wig-plugin>\n" +
	    "        </div>\n" +
	    "    </li><!--\n" +
	    "    --><li class=\"nw-toolbar__item\">\n" +
	    "      <button type=\"button\" class=\"nw-button nw-button--source\" title=\"Edit HTML\" ng-class=\"{ 'nw-button--active': editMode }\" ng-show=\"isSourceModeAllowed\" ng-click=\"toggleEditMode()\" ng-disabled=\"isDisabled\">\n" +
	    "        Edit HTML\n" +
	    "      </button>\n" +
	    "    </li>\n" +
	    "  </ul>\n" +
	    "\n" +
	    "  <div class=\"nw-editor-container\">\n" +
	    "    <div class=\"nw-editor__src-container\" ng-show=\"editMode\">\n" +
	    "      <textarea ng-required=\"isRequired\" ng-disabled=\"isDisabled\" class=\"nw-editor__src\" ng-model=\"content\"></textarea>\n" +
	    "    </div>\n" +
	    "    <div class=\"nw-editor\" ng-class=\"{ 'nw-disabled': isDisabled }\">\n" +
	    "      <div name=\"{{formElementName}}\" ng-required=\"isRequired\" tabindex=\"-1\" ng-class=\"{'nw-invisible': editMode}\" class=\"nw-editor__res\" ng-model=\"content\" ng-wig-editable on-paste=\"onPaste\"></div>\n" +
	    "    </div>\n" +
	    "  </div>\n" +
	    "</div>\n" +
	    "");
	}]);


/***/ },
/* 163 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(164);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../../node_modules/css-loader/index.js!./editorButtons.css", function() {
				var newContent = require("!!./../../../node_modules/css-loader/index.js!./editorButtons.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 164 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, ".nw-button.header:before {\r\n  content: '\\F1DC'; /* fa-header */\r\n}\r\n\r\n.nw-button.paragraph:before {\r\n  content: '\\F1DD'; /* fa-paragraph */\r\n}", ""]);
	
	// exports


/***/ },
/* 165 */
/***/ function(module, exports) {

	'use strict';
	exports.providerName = 'richTextEditor';
	richTextEditorProvider.$inject = ['ngWigToolbarProvider'];
	function richTextEditorProvider(ngWigToolbarProvider) {
	    'use strict';
	    return {
	        addCustomButton: function (name, component) {
	            ngWigToolbarProvider.addCustomButton(name, component);
	        },
	        addStandardButton: function (name, tooltip, command, icon) {
	            ngWigToolbarProvider.addStandardButton(name, toolbar, command, 'fa-' + icon);
	        },
	        $get: function () {
	            ngWigToolbarProvider.addCustomButton('paragraph', 'rl-paragraph-button');
	            ngWigToolbarProvider.addCustomButton('h1', 'rl-header-button');
	            ngWigToolbarProvider.addStandardButton('underline', 'Underline', 'underline', 'fa-underline');
	            ngWigToolbarProvider.addStandardButton('indent', 'Indent', 'indent', 'fa-indent');
	            ngWigToolbarProvider.addStandardButton('outdent', 'Outdent', 'outdent', 'fa-outdent');
	        },
	    };
	}
	exports.richTextEditorProvider = richTextEditorProvider;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmljaFRleHRFZGl0b3IuY29uZmlnLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmljaFRleHRFZGl0b3IuY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUVGLG9CQUFZLEdBQVcsZ0JBQWdCLENBQUM7QUFRbkQsc0JBQXNCLENBQUMsT0FBTyxHQUFHLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUMxRCxnQ0FBdUMsb0JBQXlCO0lBQy9ELFlBQVksQ0FBQztJQUViLE1BQU0sQ0FBQztRQUNOLGVBQWUsWUFBQyxJQUFZLEVBQUUsU0FBaUI7WUFDOUMsb0JBQW9CLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztRQUN2RCxDQUFDO1FBQ0QsaUJBQWlCLFlBQUMsSUFBWSxFQUFFLE9BQWUsRUFBRSxPQUFlLEVBQUUsSUFBWTtZQUM3RSxvQkFBb0IsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDOUUsQ0FBQztRQUNELElBQUk7WUFDSCxvQkFBb0IsQ0FBQyxlQUFlLENBQUMsV0FBVyxFQUFFLHFCQUFxQixDQUFDLENBQUM7WUFDekUsb0JBQW9CLENBQUMsZUFBZSxDQUFDLElBQUksRUFBRSxrQkFBa0IsQ0FBQyxDQUFDO1lBQy9ELG9CQUFvQixDQUFDLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1lBQzlGLG9CQUFvQixDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBQ2xGLG9CQUFvQixDQUFDLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFlBQVksQ0FBQyxDQUFDO1FBQ3ZGLENBQUM7S0FDRCxDQUFDO0FBQ0gsQ0FBQztBQWxCZSw4QkFBc0IseUJBa0JyQyxDQUFBIn0=

/***/ },
/* 166 */
/***/ function(module, exports) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	exports.headerButtonDirectiveName = 'rlHeaderButton';
	function headerButton() {
	    'use strict';
	    return {
	        restrict: 'E',
	        template: "\n\t\t\t<button type=\"button\" class=\"nw-button header\" ng-click=\"trigger()\" ng-disabled=\"editMode || isDisabled\" title=\"Header 1\"></button>\n\t\t",
	        link: function (scope) {
	            scope.trigger = function () {
	                scope.execCommand('formatblock', 'h1');
	            };
	        },
	    };
	}
	exports.headerButton = headerButton;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVhZGVyQnV0dG9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaGVhZGVyQnV0dG9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7QUFJRixpQ0FBeUIsR0FBVyxnQkFBZ0IsQ0FBQztBQU9oRTtJQUNDLFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFFBQVEsRUFBRSxHQUFHO1FBQ2IsUUFBUSxFQUFFLDZKQUVUO1FBQ0QsSUFBSSxZQUFDLEtBQXlCO1lBQzdCLEtBQUssQ0FBQyxPQUFPLEdBQUc7Z0JBQ2YsS0FBSyxDQUFDLFdBQVcsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDeEMsQ0FBQyxDQUFDO1FBQ0gsQ0FBQztLQUNELENBQUM7QUFDSCxDQUFDO0FBYmUsb0JBQVksZUFhM0IsQ0FBQSJ9

/***/ },
/* 167 */
/***/ function(module, exports) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	exports.paragraphButtonDirectiveName = 'rlParagraphButton';
	function paragraphButton() {
	    'use strict';
	    return {
	        restrict: 'E',
	        template: "\n\t\t\t<button type=\"button\" class=\"nw-button paragraph\" ng-click=\"trigger()\" ng-disabled=\"editMode || isDisabled\" title=\"paragraph\"></button>\n\t\t",
	        link: function (scope) {
	            scope.trigger = function () {
	                scope.execCommand('formatblock', 'p');
	            };
	        },
	    };
	}
	exports.paragraphButton = paragraphButton;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyYWdyYXBoQnV0dG9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicGFyYWdyYXBoQnV0dG9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7QUFJRixvQ0FBNEIsR0FBVyxtQkFBbUIsQ0FBQztBQU90RTtJQUNDLFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFFBQVEsRUFBRSxHQUFHO1FBQ2IsUUFBUSxFQUFFLGlLQUVUO1FBQ0QsSUFBSSxZQUFDLEtBQTRCO1lBQ2hDLEtBQUssQ0FBQyxPQUFPLEdBQUc7Z0JBQ2YsS0FBSyxDQUFDLFdBQVcsQ0FBQyxhQUFhLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDdkMsQ0FBQyxDQUFDO1FBQ0gsQ0FBQztLQUNELENBQUM7QUFDSCxDQUFDO0FBYmUsdUJBQWUsa0JBYTlCLENBQUEifQ==

/***/ },
/* 168 */
/***/ function(module, exports) {

	module.exports = "<textarea class=\"rich-text-editor\" ng-wig=\"editor.ngModel\" buttons=\"{{editor.toolbar}}\" ng-disabled=\"editor.ngDisabled\"></textarea>"

/***/ },
/* 169 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	__webpack_require__(170);
	__webpack_require__(172);
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	var input_1 = __webpack_require__(115);
	var componentValidator_service_1 = __webpack_require__(116);
	exports.moduleName = 'rl.ui.components.select';
	exports.componentName = 'rlSelect';
	exports.controllerName = 'SelectController';
	var SelectController = (function (_super) {
	    __extends(SelectController, _super);
	    function SelectController($scope, $attrs, $q, object, componentValidatorFactory) {
	        _super.call(this, $scope, $attrs, componentValidatorFactory);
	        this.$q = $q;
	        this.object = object;
	        this._nullOption = {
	            __isNullOption: true,
	        };
	        this.inputType = 'select';
	    }
	    Object.defineProperty(SelectController.prototype, "selection", {
	        get: function () {
	            return this.ngModel.$viewValue;
	        },
	        set: function (value) {
	            if (value.__isNullOption) {
	                this.ngModel.$setViewValue(null);
	            }
	            else {
	                this.ngModel.$setViewValue(value);
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    SelectController.prototype.$onInit = function () {
	        var _this = this;
	        _super.prototype.$onInit.call(this);
	        if (_.isUndefined(this.options)) {
	            this.loading = true;
	            this.loadItems().then(function (options) {
	                _this.options = options;
	                _this.loading = false;
	            });
	        }
	        else {
	            this.options = this.configureOptions(this.options);
	        }
	    };
	    SelectController.prototype.getDisplayName = function (item) {
	        if (item != null && item.__isNullOption) {
	            return this.nullOption;
	        }
	        return __transform.getValue(item, this.selector);
	    };
	    SelectController.prototype.loadItems = function () {
	        var _this = this;
	        var promise;
	        promise = this.getOptions();
	        if (promise == null) {
	            promise = this.$q.when(this.options);
	        }
	        return promise.then(function (options) { return _this.configureOptions(options); });
	    };
	    SelectController.prototype.configureOptions = function (options) {
	        if (!this.object.isNullOrWhitespace(this.nullOption)) {
	            options.unshift(this._nullOption);
	        }
	        return options;
	    };
	    SelectController.$inject = ['$scope', '$attrs', '$q', __object.serviceName, componentValidator_service_1.factoryName];
	    return SelectController;
	}(input_1.InputController));
	exports.SelectController = SelectController;
	var select = input_1.buildInput({
	    template: __webpack_require__(174),
	    controller: exports.controllerName,
	    controllerAs: 'select',
	    bindings: {
	        options: '<?',
	        getOptions: '&',
	        selector: '<?',
	        ngDisabled: '<?',
	        nullOption: '@',
	    },
	});
	angular.module(exports.moduleName, ['ui.select', __object.moduleName, input_1.moduleName])
	    .component(exports.componentName, select)
	    .controller(exports.controllerName, SelectController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VsZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2VsZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7Ozs7OztBQUViLFFBQU8sV0FBVyxDQUFDLENBQUE7QUFDbkIsUUFBTywyQkFBMkIsQ0FBQyxDQUFBO0FBRW5DLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sUUFBUSxHQUFHLHVDQUFRLENBQUMsTUFBTSxDQUFDO0FBQ2xDLElBQU8sV0FBVyxHQUFHLHVDQUFRLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQztBQUVsRCxzQkFBdUUsZ0JBQWdCLENBQUMsQ0FBQTtBQUN4RiwyQ0FBeUYsOERBQThELENBQUMsQ0FBQTtBQUU3SSxrQkFBVSxHQUFXLHlCQUF5QixDQUFDO0FBQy9DLHFCQUFhLEdBQVcsVUFBVSxDQUFDO0FBQ25DLHNCQUFjLEdBQVcsa0JBQWtCLENBQUM7QUFFdkQ7SUFBc0Msb0NBQWU7SUEyQnBELDBCQUFZLE1BQXNCLEVBQzlCLE1BQTJCLEVBQ25CLEVBQXFCLEVBQ3JCLE1BQStCLEVBQ3ZDLHlCQUFxRDtRQUN4RCxrQkFBTSxNQUFNLEVBQU8sTUFBTSxFQUFFLHlCQUF5QixDQUFDLENBQUM7UUFIM0MsT0FBRSxHQUFGLEVBQUUsQ0FBbUI7UUFDckIsV0FBTSxHQUFOLE1BQU0sQ0FBeUI7UUFwQm5DLGdCQUFXLEdBQVE7WUFDMUIsY0FBYyxFQUFFLElBQUk7U0FDcEIsQ0FBQztRQXFCRCxJQUFJLENBQUMsU0FBUyxHQUFHLFFBQVEsQ0FBQztJQUMzQixDQUFDO0lBcEJELHNCQUFJLHVDQUFTO2FBQWI7WUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUM7UUFDaEMsQ0FBQzthQUVELFVBQWMsS0FB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

/***/ },
/* 170 */
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(171);
	module.exports = 'ui.select';


/***/ },
/* 171 */
/***/ function(module, exports) {

	/*!
	 * ui-select
	 * http://github.com/angular-ui/ui-select
	 * Version: 0.14.6 - 2016-02-18T21:01:36.893Z
	 * License: MIT
	 */
	
	
	(function () { 
	"use strict";
	var KEY = {
	    TAB: 9,
	    ENTER: 13,
	    ESC: 27,
	    SPACE: 32,
	    LEFT: 37,
	    UP: 38,
	    RIGHT: 39,
	    DOWN: 40,
	    SHIFT: 16,
	    CTRL: 17,
	    ALT: 18,
	    PAGE_UP: 33,
	    PAGE_DOWN: 34,
	    HOME: 36,
	    END: 35,
	    BACKSPACE: 8,
	    DELETE: 46,
	    COMMAND: 91,
	
	    MAP: { 91 : "COMMAND", 8 : "BACKSPACE" , 9 : "TAB" , 13 : "ENTER" , 16 : "SHIFT" , 17 : "CTRL" , 18 : "ALT" , 19 : "PAUSEBREAK" , 20 : "CAPSLOCK" , 27 : "ESC" , 32 : "SPACE" , 33 : "PAGE_UP", 34 : "PAGE_DOWN" , 35 : "END" , 36 : "HOME" , 37 : "LEFT" , 38 : "UP" , 39 : "RIGHT" , 40 : "DOWN" , 43 : "+" , 44 : "PRINTSCREEN" , 45 : "INSERT" , 46 : "DELETE", 48 : "0" , 49 : "1" , 50 : "2" , 51 : "3" , 52 : "4" , 53 : "5" , 54 : "6" , 55 : "7" , 56 : "8" , 57 : "9" , 59 : ";", 61 : "=" , 65 : "A" , 66 : "B" , 67 : "C" , 68 : "D" , 69 : "E" , 70 : "F" , 71 : "G" , 72 : "H" , 73 : "I" , 74 : "J" , 75 : "K" , 76 : "L", 77 : "M" , 78 : "N" , 79 : "O" , 80 : "P" , 81 : "Q" , 82 : "R" , 83 : "S" , 84 : "T" , 85 : "U" , 86 : "V" , 87 : "W" , 88 : "X" , 89 : "Y" , 90 : "Z", 96 : "0" , 97 : "1" , 98 : "2" , 99 : "3" , 100 : "4" , 101 : "5" , 102 : "6" , 103 : "7" , 104 : "8" , 105 : "9", 106 : "*" , 107 : "+" , 109 : "-" , 110 : "." , 111 : "/", 112 : "F1" , 113 : "F2" , 114 : "F3" , 115 : "F4" , 116 : "F5" , 117 : "F6" , 118 : "F7" , 119 : "F8" , 120 : "F9" , 121 : "F10" , 122 : "F11" , 123 : "F12", 144 : "NUMLOCK" , 145 : "SCROLLLOCK" , 186 : ";" , 187 : "=" , 188 : "," , 189 : "-" , 190 : "." , 191 : "/" , 192 : "`" , 219 : "[" , 220 : "\\" , 221 : "]" , 222 : "'"
	    },
	
	    isControl: function (e) {
	        var k = e.which;
	        switch (k) {
	        case KEY.COMMAND:
	        case KEY.SHIFT:
	        case KEY.CTRL:
	        case KEY.ALT:
	            return true;
	        }
	
	        if (e.metaKey) return true;
	
	        return false;
	    },
	    isFunctionKey: function (k) {
	        k = k.which ? k.which : k;
	        return k >= 112 && k <= 123;
	    },
	    isVerticalMovement: function (k){
	      return ~[KEY.UP, KEY.DOWN].indexOf(k);
	    },
	    isHorizontalMovement: function (k){
	      return ~[KEY.LEFT,KEY.RIGHT,KEY.BACKSPACE,KEY.DELETE].indexOf(k);
	    },
	    toSeparator: function (k) {
	      var sep = {ENTER:"\n",TAB:"\t",SPACE:" "}[k];
	      if (sep) return sep;
	      // return undefined for special keys other than enter, tab or space.
	      // no way to use them to cut strings.
	      return KEY[k] ? undefined : k;
	    }
	  };
	
	/**
	 * Add querySelectorAll() to jqLite.
	 *
	 * jqLite find() is limited to lookups by tag name.
	 * TODO This will change with future versions of AngularJS, to be removed when this happens
	 *
	 * See jqLite.find - why not use querySelectorAll? https://github.com/angular/angular.js/issues/3586
	 * See feat(jqLite): use querySelectorAll instead of getElementsByTagName in jqLite.find https://github.com/angular/angular.js/pull/3598
	 */
	if (angular.element.prototype.querySelectorAll === undefined) {
	  angular.element.prototype.querySelectorAll = function(selector) {
	    return angular.element(this[0].querySelectorAll(selector));
	  };
	}
	
	/**
	 * Add closest() to jqLite.
	 */
	if (angular.element.prototype.closest === undefined) {
	  angular.element.prototype.closest = function( selector) {
	    var elem = this[0];
	    var matchesSelector = elem.matches || elem.webkitMatchesSelector || elem.mozMatchesSelector || elem.msMatchesSelector;
	
	    while (elem) {
	      if (matchesSelector.bind(elem)(selector)) {
	        return elem;
	      } else {
	        elem = elem.parentElement;
	      }
	    }
	    return false;
	  };
	}
	
	var latestId = 0;
	
	var uis = angular.module('ui.select', [])
	
	.constant('uiSelectConfig', {
	  theme: 'bootstrap',
	  searchEnabled: true,
	  sortable: false,
	  placeholder: '', // Empty by default, like HTML tag <select>
	  refreshDelay: 1000, // In milliseconds
	  closeOnSelect: true,
	  dropdownPosition: 'auto',
	  generateId: function() {
	    return latestId++;
	  },
	  appendToBody: false
	})
	
	// See Rename minErr and make it accessible from outside https://github.com/angular/angular.js/issues/6913
	.service('uiSelectMinErr', function() {
	  var minErr = angular.$$minErr('ui.select');
	  return function() {
	    var error = minErr.apply(this, arguments);
	    var message = error.message.replace(new RegExp('\nhttp://errors.angularjs.org/.*'), '');
	    return new Error(message);
	  };
	})
	
	// Recreates old behavior of ng-transclude. Used internally.
	.directive('uisTranscludeAppend', function () {
	  return {
	    link: function (scope, element, attrs, ctrl, transclude) {
	        transclude(scope, function (clone) {
	          element.append(clone);
	        });
	      }
	    };
	})
	
	/**
	 * Highlights text that matches $select.search.
	 *
	 * Taken from AngularUI Bootstrap Typeahead
	 * See https://github.com/angular-ui/bootstrap/blob/0.10.0/src/typeahead/typeahead.js#L340
	 */
	.filter('highlight', function() {
	  function escapeRegexp(queryToEscape) {
	    return ('' + queryToEscape).replace(/([.?*+^$[\]\\(){}|-])/g, '\\$1');
	  }
	
	  return function(matchItem, query) {
	    return query && matchItem ? ('' + matchItem).replace(new RegExp(escapeRegexp(query), 'gi'), '<span class="ui-select-highlight">$&</span>') : matchItem;
	  };
	})
	
	/**
	 * A read-only equivalent of jQuery's offset function: http://api.jquery.com/offset/
	 *
	 * Taken from AngularUI Bootstrap Position:
	 * See https://github.com/angular-ui/bootstrap/blob/master/src/position/position.js#L70
	 */
	.factory('uisOffset',
	  ['$document', '$window',
	  function ($document, $window) {
	
	  return function(element) {
	    var boundingClientRect = element[0].getBoundingClientRect();
	    return {
	      width: boundingClientRect.width || element.prop('offsetWidth'),
	      height: boundingClientRect.height || element.prop('offsetHeight'),
	      top: boundingClientRect.top + ($window.pageYOffset || $document[0].documentElement.scrollTop),
	      left: boundingClientRect.left + ($window.pageXOffset || $document[0].documentElement.scrollLeft)
	    };
	  };
	}]);
	
	uis.directive('uiSelectChoices',
	  ['uiSelectConfig', 'uisRepeatParser', 'uiSelectMinErr', '$compile',
	  function(uiSelectConfig, RepeatParser, uiSelectMinErr, $compile) {
	
	  return {
	    restrict: 'EA',
	    require: '^uiSelect',
	    replace: true,
	    transclude: true,
	    templateUrl: function(tElement) {
	      // Needed so the uiSelect can detect the transcluded content
	      tElement.addClass('ui-select-choices');
	
	      // Gets theme attribute from parent (ui-select)
	      var theme = tElement.parent().attr('theme') || uiSelectConfig.theme;
	      return theme + '/choices.tpl.html';
	    },
	
	    compile: function(tElement, tAttrs) {
	
	      if (!tAttrs.repeat) throw uiSelectMinErr('repeat', "Expected 'repeat' expression.");
	
	      return function link(scope, element, attrs, $select, transcludeFn) {
	
	        // var repeat = RepeatParser.parse(attrs.repeat);
	        var groupByExp = attrs.groupBy;
	        var groupFilterExp = attrs.groupFilter;
	
	        $select.parseRepeatAttr(attrs.repeat, groupByExp, groupFilterExp); //Result ready at $select.parserResult
	
	        $select.disableChoiceExpression = attrs.uiDisableChoice;
	        $select.onHighlightCallback = attrs.onHighlight;
	
	        $select.dropdownPosition = attrs.position ? attrs.position.toLowerCase() : uiSelectConfig.dropdownPosition;
	
	        if(groupByExp) {
	          var groups = element.querySelectorAll('.ui-select-choices-group');
	          if (groups.length !== 1) throw uiSelectMinErr('rows', "Expected 1 .ui-select-choices-group but got '{0}'.", groups.length);
	          groups.attr('ng-repeat', RepeatParser.getGroupNgRepeatExpression());
	        }
	
	        var choices = element.querySelectorAll('.ui-select-choices-row');
	        if (choices.length !== 1) {
	          throw uiSelectMinErr('rows', "Expected 1 .ui-select-choices-row but got '{0}'.", choices.length);
	        }
	
	        choices.attr('ng-repeat', $select.parserResult.repeatExpression(groupByExp))
	            .attr('ng-if', '$select.open') //Prevent unnecessary watches when dropdown is closed
	            .attr('ng-click', '$select.select(' + $select.parserResult.itemName + ',false,$event)');
	
	        var rowsInner = element.querySelectorAll('.ui-select-choices-row-inner');
	        if (rowsInner.length !== 1) throw uiSelectMinErr('rows', "Expected 1 .ui-select-choices-row-inner but got '{0}'.", rowsInner.length);
	        rowsInner.attr('uis-transclude-append', ''); //Adding uisTranscludeAppend directive to row element after choices element has ngRepeat
	
	        $compile(element, transcludeFn)(scope); //Passing current transcludeFn to be able to append elements correctly from uisTranscludeAppend
	
	        scope.$watch('$select.search', function(newValue) {
	          if(newValue && !$select.open && $select.multiple) $select.activate(false, true);
	          $select.activeIndex = $select.tagging.isActivated ? -1 : 0;
	          if (!attrs.minimumInputLength || $select.search.length >= attrs.minimumInputLength) {
	            $select.refresh(attrs.refresh);
	          } else {
	            $select.items = [];
	          }
	        });
	
	        attrs.$observe('refreshDelay', function() {
	          // $eval() is needed otherwise we get a string instead of a number
	          var refreshDelay = scope.$eval(attrs.refreshDelay);
	          $select.refreshDelay = refreshDelay !== undefined ? refreshDelay : uiSelectConfig.refreshDelay;
	        });
	      };
	    }
	  };
	}]);
	
	/**
	 * Contains ui-select "intelligence".
	 *
	 * The goal is to limit dependency on the DOM whenever possible and
	 * put as much logic in the controller (instead of the link functions) as possible so it can be easily tested.
	 */
	uis.controller('uiSelectCtrl',
	  ['$scope', '$element', '$timeout', '$filter', 'uisRepeatParser', 'uiSelectMinErr', 'uiSelectConfig', '$parse', '$injector',
	  function($scope, $element, $timeout, $filter, RepeatParser, uiSelectMinErr, uiSelectConfig, $parse, $injector) {
	
	  var ctrl = this;
	
	  var EMPTY_SEARCH = '';
	
	  ctrl.placeholder = uiSelectConfig.placeholder;
	  ctrl.searchEnabled = uiSelectConfig.searchEnabled;
	  ctrl.sortable = uiSelectConfig.sortable;
	  ctrl.refreshDelay = uiSelectConfig.refreshDelay;
	  ctrl.paste = uiSelectConfig.paste;
	
	  ctrl.removeSelected = false; //If selected item(s) should be removed from dropdown list
	  ctrl.closeOnSelect = true; //Initialized inside uiSelect directive link function
	  ctrl.search = EMPTY_SEARCH;
	
	  ctrl.activeIndex = 0; //Dropdown of choices
	  ctrl.items = []; //All available choices
	
	  ctrl.open = false;
	  ctrl.focus = false;
	  ctrl.disabled = false;
	  ctrl.selected = undefined;
	
	  ctrl.dropdownPosition = 'auto';
	
	  ctrl.focusser = undefined; //Reference to input element used to handle focus events
	  ctrl.resetSearchInput = true;
	  ctrl.multiple = undefined; // Initialized inside uiSelect directive link function
	  ctrl.disableChoiceExpression = undefined; // Initialized inside uiSelectChoices directive link function
	  ctrl.tagging = {isActivated: false, fct: undefined};
	  ctrl.taggingTokens = {isActivated: false, tokens: undefined};
	  ctrl.lockChoiceExpression = undefined; // Initialized inside uiSelectMatch directive link function
	  ctrl.clickTriggeredSelect = false;
	  ctrl.$filter = $filter;
	
	  // Use $injector to check for $animate and store a reference to it
	  ctrl.$animate = (function () {
	    try {
	      return $injector.get('$animate');
	    } catch (err) {
	      // $animate does not exist
	      return null;
	    }
	  })();
	
	  ctrl.searchInput = $element.querySelectorAll('input.ui-select-search');
	  if (ctrl.searchInput.length !== 1) {
	    throw uiSelectMinErr('searchInput', "Expected 1 input.ui-select-search but got '{0}'.", ctrl.searchInput.length);
	  }
	
	  ctrl.isEmpty = function() {
	    return angular.isUndefined(ctrl.selected) || ctrl.selected === null || ctrl.selected === '' || (ctrl.multiple && ctrl.selected.length === 0);
	  };
	
	  function _findIndex(collection, predicate, thisArg){
	    if (collection.findIndex){
	      return collection.findIndex(predicate, thisArg);
	    } else {
	      var list = Object(collection);
	      var length = list.length >>> 0;
	      var value;
	
	      for (var i = 0; i < length; i++) {
	        value = list[i];
	        if (predicate.call(thisArg, value, i, list)) {
	          return i;
	        }
	      }
	      return -1;
	    }
	  }
	
	  // Most of the time the user does not want to empty the search input when in typeahead mode
	  function _resetSearchInput() {
	    if (ctrl.resetSearchInput || (ctrl.resetSearchInput === undefined && uiSelectConfig.resetSearchInput)) {
	      ctrl.search = EMPTY_SEARCH;
	      //reset activeIndex
	      if (ctrl.selected && ctrl.items.length && !ctrl.multiple) {
	        ctrl.activeIndex = _findIndex(ctrl.items, function(item){
	          return angular.equals(this, item);
	        }, ctrl.selected);
	      }
	    }
	  }
	
	    function _groupsFilter(groups, groupNames) {
	      var i, j, result = [];
	      for(i = 0; i < groupNames.length ;i++){
	        for(j = 0; j < groups.length ;j++){
	          if(groups[j].name == [groupNames[i]]){
	            result.push(groups[j]);
	          }
	        }
	      }
	      return result;
	    }
	
	  // When the user clicks on ui-select, displays the dropdown list
	  ctrl.activate = function(initSearchValue, avoidReset) {
	    if (!ctrl.disabled  && !ctrl.open) {
	      if(!avoidReset) _resetSearchInput();
	
	      $scope.$broadcast('uis:activate');
	
	      ctrl.open = true;
	
	      ctrl.activeIndex = ctrl.activeIndex >= ctrl.items.length ? 0 : ctrl.activeIndex;
	
	      // ensure that the index is set to zero for tagging variants
	      // that where first option is auto-selected
	      if ( ctrl.activeIndex === -1 && ctrl.taggingLabel !== false ) {
	        ctrl.activeIndex = 0;
	      }
	
	      var container = $element.querySelectorAll('.ui-select-choices-content');
	      if (ctrl.$animate && ctrl.$animate.enabled(container[0])) {
	        ctrl.$animate.on('enter', container[0], function (elem, phase) {
	          if (phase === 'close') {
	            // Only focus input after the animation has finished
	            $timeout(function () {
	              ctrl.focusSearchInput(initSearchValue);
	            });
	          }
	        });
	      } else {
	        $timeout(function () {
	          ctrl.focusSearchInput(initSearchValue);
	        });
	      }
	    }
	  };
	
	  ctrl.focusSearchInput = function (initSearchValue) {
	    ctrl.search = initSearchValue || ctrl.search;
	    ctrl.searchInput[0].focus();
	    if(!ctrl.tagging.isActivated && ctrl.items.length > 1) {
	     _ensureHighlightVisible();
	    }
	  };
	
	  ctrl.findGroupByName = function(name) {
	    return ctrl.groups && ctrl.groups.filter(function(group) {
	      return group.name === name;
	    })[0];
	  };
	
	  ctrl.parseRepeatAttr = function(repeatAttr, groupByExp, groupFilterExp) {
	    function updateGroups(items) {
	      var groupFn = $scope.$eval(groupByExp);
	      ctrl.groups = [];
	      angular.forEach(items, function(item) {
	        var groupName = angular.isFunction(groupFn) ? groupFn(item) : item[groupFn];
	        var group = ctrl.findGroupByName(groupName);
	        if(group) {
	          group.items.push(item);
	        }
	        else {
	          ctrl.groups.push({name: groupName, items: [item]});
	        }
	      });
	      if(groupFilterExp){
	        var groupFilterFn = $scope.$eval(groupFilterExp);
	        if( angular.isFunction(groupFilterFn)){
	          ctrl.groups = groupFilterFn(ctrl.groups);
	        } else if(angular.isArray(groupFilterFn)){
	          ctrl.groups = _groupsFilter(ctrl.groups, groupFilterFn);
	        }
	      }
	      ctrl.items = [];
	      ctrl.groups.forEach(function(group) {
	        ctrl.items = ctrl.items.concat(group.items);
	      });
	    }
	
	    function setPlainItems(items) {
	      ctrl.items = items;
	    }
	
	    ctrl.setItemsFn = groupByExp ? updateGroups : setPlainItems;
	
	    ctrl.parserResult = RepeatParser.parse(repeatAttr);
	
	    ctrl.isGrouped = !!groupByExp;
	    ctrl.itemProperty = ctrl.parserResult.itemName;
	
	    //If collection is an Object, convert it to Array
	
	    var originalSource = ctrl.parserResult.source;
	
	    //When an object is used as source, we better create an array and use it as 'source'
	    var createArrayFromObject = function(){
	      var origSrc = originalSource($scope);
	      $scope.$uisSource = Object.keys(origSrc).map(function(v){
	        var result = {};
	        result[ctrl.parserResult.keyName] = v;
	        result.value = origSrc[v];
	        return result;
	      });
	    };
	
	    if (ctrl.parserResult.keyName){ // Check for (key,value) syntax
	      createArrayFromObject();
	      ctrl.parserResult.source = $parse('$uisSource' + ctrl.parserResult.filters);
	      $scope.$watch(originalSource, function(newVal, oldVal){
	        if (newVal !== oldVal) createArrayFromObject();
	      }, true);
	    }
	
	    ctrl.refreshItems = function (data){
	      data = data || ctrl.parserResult.source($scope);
	      var selectedItems = ctrl.selected;
	      //TODO should implement for single mode removeSelected
	      if (ctrl.isEmpty() || (angular.isArray(selectedItems) && !selectedItems.length) || !ctrl.removeSelected) {
	        ctrl.setItemsFn(data);
	      }else{
	        if ( data !== undefined ) {
	          var filteredItems = data.filter(function(i) {return selectedItems && selectedItems.indexOf(i) < 0;});
	          ctrl.setItemsFn(filteredItems);
	        }
	      }
	      if (ctrl.dropdownPosition === 'auto' || ctrl.dropdownPosition === 'up'){
	        $scope.calculateDropdownPos();
	      }
	    };
	
	    // See https://github.com/angular/angular.js/blob/v1.2.15/src/ng/directive/ngRepeat.js#L259
	    $scope.$watchCollection(ctrl.parserResult.source, function(items) {
	      if (items === undefined || items === null) {
	        // If the user specifies undefined or null => reset the collection
	        // Special case: items can be undefined if the user did not initialized the collection on the scope
	        // i.e $scope.addresses = [] is missing
	        ctrl.items = [];
	      } else {
	        if (!angular.isArray(items)) {
	          throw uiSelectMinErr('items', "Expected an array but got '{0}'.", items);
	        } else {
	          //Remove already selected items (ex: while searching)
	          //TODO Should add a test
	          ctrl.refreshItems(items);
	          ctrl.ngModel.$modelValue = null; //Force scope model value and ngModel value to be out of sync to re-run formatters
	        }
	      }
	    });
	
	  };
	
	  var _refreshDelayPromise;
	
	  /**
	   * Typeahead mode: lets the user refresh the collection using his own function.
	   *
	   * See Expose $select.search for external / remote filtering https://github.com/angular-ui/ui-select/pull/31
	   */
	  ctrl.refresh = function(refreshAttr) {
	    if (refreshAttr !== undefined) {
	
	      // Debounce
	      // See https://github.com/angular-ui/bootstrap/blob/0.10.0/src/typeahead/typeahead.js#L155
	      // FYI AngularStrap typeahead does not have debouncing: https://github.com/mgcrea/angular-strap/blob/v2.0.0-rc.4/src/typeahead/typeahead.js#L177
	      if (_refreshDelayPromise) {
	        $timeout.cancel(_refreshDelayPromise);
	      }
	      _refreshDelayPromise = $timeout(function() {
	        $scope.$eval(refreshAttr);
	      }, ctrl.refreshDelay);
	    }
	  };
	
	  ctrl.isActive = function(itemScope) {
	    if ( !ctrl.open ) {
	      return false;
	    }
	    var itemIndex = ctrl.items.indexOf(itemScope[ctrl.itemProperty]);
	    var isActive =  itemIndex == ctrl.activeIndex;
	
	    if ( !isActive || ( itemIndex < 0 && ctrl.taggingLabel !== false ) ||( itemIndex < 0 && ctrl.taggingLabel === false) ) {
	      return false;
	    }
	
	    if (isActive && !angular.isUndefined(ctrl.onHighlightCallback)) {
	      itemScope.$eval(ctrl.onHighlightCallback);
	    }
	
	    return isActive;
	  };
	
	  ctrl.isDisabled = function(itemScope) {
	
	    if (!ctrl.open) return;
	
	    var itemIndex = ctrl.items.indexOf(itemScope[ctrl.itemProperty]);
	    var isDisabled = false;
	    var item;
	
	    if (itemIndex >= 0 && !angular.isUndefined(ctrl.disableChoiceExpression)) {
	      item = ctrl.items[itemIndex];
	      isDisabled = !!(itemScope.$eval(ctrl.disableChoiceExpression)); // force the boolean value
	      item._uiSelectChoiceDisabled = isDisabled; // store this for later reference
	    }
	
	    return isDisabled;
	  };
	
	
	  // When the user selects an item with ENTER or clicks the dropdown
	  ctrl.select = function(item, skipFocusser, $event) {
	    if (item === undefined || !item._uiSelectChoiceDisabled) {
	
	      if ( ! ctrl.items && ! ctrl.search && ! ctrl.tagging.isActivated) return;
	
	      if (!item || !item._uiSelectChoiceDisabled) {
	        if(ctrl.tagging.isActivated) {
	          // if taggingLabel is disabled, we pull from ctrl.search val
	          if ( ctrl.taggingLabel === false ) {
	            if ( ctrl.activeIndex < 0 ) {
	              item = ctrl.tagging.fct !== undefined ? ctrl.tagging.fct(ctrl.search) : ctrl.search;
	              if (!item || angular.equals( ctrl.items[0], item ) ) {
	                return;
	              }
	            } else {
	              // keyboard nav happened first, user selected from dropdown
	              item = ctrl.items[ctrl.activeIndex];
	            }
	          } else {
	            // tagging always operates at index zero, taggingLabel === false pushes
	            // the ctrl.search value without having it injected
	            if ( ctrl.activeIndex === 0 ) {
	              // ctrl.tagging pushes items to ctrl.items, so we only have empty val
	              // for `item` if it is a detected duplicate
	              if ( item === undefined ) return;
	
	              // create new item on the fly if we don't already have one;
	              // use tagging function if we have one
	              if ( ctrl.tagging.fct !== undefined && typeof item === 'string' ) {
	                item = ctrl.tagging.fct(item);
	                if (!item) return;
	              // if item type is 'string', apply the tagging label
	              } else if ( typeof item === 'string' ) {
	                // trim the trailing space
	                item = item.replace(ctrl.taggingLabel,'').trim();
	              }
	            }
	          }
	          // search ctrl.selected for dupes potentially caused by tagging and return early if found
	          if ( ctrl.selected && angular.isArray(ctrl.selected) && ctrl.selected.filter( function (selection) { return angular.equals(selection, item); }).length > 0 ) {
	            ctrl.close(skipFocusser);
	            return;
	          }
	        }
	
	        $scope.$broadcast('uis:select', item);
	
	        var locals = {};
	        locals[ctrl.parserResult.itemName] = item;
	
	        $timeout(function(){
	          ctrl.onSelectCallback($scope, {
	            $item: item,
	            $model: ctrl.parserResult.modelMapper($scope, locals)
	          });
	        });
	
	        if (ctrl.closeOnSelect) {
	          ctrl.close(skipFocusser);
	        }
	        if ($event && $event.type === 'click') {
	          ctrl.clickTriggeredSelect = true;
	        }
	      }
	    }
	  };
	
	  // Closes the dropdown
	  ctrl.close = function(skipFocusser) {
	    if (!ctrl.open) return;
	    if (ctrl.ngModel && ctrl.ngModel.$setTouched) ctrl.ngModel.$setTouched();
	    _resetSearchInput();
	    ctrl.open = false;
	
	    $scope.$broadcast('uis:close', skipFocusser);
	
	  };
	
	  ctrl.setFocus = function(){
	    if (!ctrl.focus) ctrl.focusInput[0].focus();
	  };
	
	  ctrl.clear = function($event) {
	    ctrl.select(undefined);
	    $event.stopPropagation();
	    $timeout(function() {
	      ctrl.focusser[0].focus();
	    }, 0, false);
	  };
	
	  // Toggle dropdown
	  ctrl.toggle = function(e) {
	    if (ctrl.open) {
	      ctrl.close();
	      e.preventDefault();
	      e.stopPropagation();
	    } else {
	      ctrl.activate();
	    }
	  };
	
	  ctrl.isLocked = function(itemScope, itemIndex) {
	      var isLocked, item = ctrl.selected[itemIndex];
	
	      if (item && !angular.isUndefined(ctrl.lockChoiceExpression)) {
	          isLocked = !!(itemScope.$eval(ctrl.lockChoiceExpression)); // force the boolean value
	          item._uiSelectChoiceLocked = isLocked; // store this for later reference
	      }
	
	      return isLocked;
	  };
	
	  var sizeWatch = null;
	  ctrl.sizeSearchInput = function() {
	
	    var input = ctrl.searchInput[0],
	        container = ctrl.searchInput.parent().parent()[0],
	        calculateContainerWidth = function() {
	          // Return the container width only if the search input is visible
	          return container.clientWidth * !!input.offsetParent;
	        },
	        updateIfVisible = function(containerWidth) {
	          if (containerWidth === 0) {
	            return false;
	          }
	          var inputWidth = containerWidth - input.offsetLeft - 10;
	          if (inputWidth < 50) inputWidth = containerWidth;
	          ctrl.searchInput.css('width', inputWidth+'px');
	          return true;
	        };
	
	    ctrl.searchInput.css('width', '10px');
	    $timeout(function() { //Give tags time to render correctly
	      if (sizeWatch === null && !updateIfVisible(calculateContainerWidth())) {
	        sizeWatch = $scope.$watch(calculateContainerWidth, function(containerWidth) {
	          if (updateIfVisible(containerWidth)) {
	            sizeWatch();
	            sizeWatch = null;
	          }
	        });
	      }
	    });
	  };
	
	  function _handleDropDownSelection(key) {
	    var processed = true;
	    switch (key) {
	      case KEY.DOWN:
	        if (!ctrl.open && ctrl.multiple) ctrl.activate(false, true); //In case its the search input in 'multiple' mode
	        else if (ctrl.activeIndex < ctrl.items.length - 1) { ctrl.activeIndex++; }
	        break;
	      case KEY.UP:
	        if (!ctrl.open && ctrl.multiple) ctrl.activate(false, true); //In case its the search input in 'multiple' mode
	        else if (ctrl.activeIndex > 0 || (ctrl.search.length === 0 && ctrl.tagging.isActivated && ctrl.activeIndex > -1)) { ctrl.activeIndex--; }
	        break;
	      case KEY.TAB:
	        if (!ctrl.multiple || ctrl.open) ctrl.select(ctrl.items[ctrl.activeIndex], true);
	        break;
	      case KEY.ENTER:
	        if(ctrl.open && (ctrl.tagging.isActivated || ctrl.activeIndex >= 0)){
	          ctrl.select(ctrl.items[ctrl.activeIndex]); // Make sure at least one dropdown item is highlighted before adding if not in tagging mode
	        } else {
	          ctrl.activate(false, true); //In case its the search input in 'multiple' mode
	        }
	        break;
	      case KEY.ESC:
	        ctrl.close();
	        break;
	      default:
	        processed = false;
	    }
	    return processed;
	  }
	
	  // Bind to keyboard shortcuts
	  ctrl.searchInput.on('keydown', function(e) {
	
	    var key = e.which;
	
	    // if(~[KEY.ESC,KEY.TAB].indexOf(key)){
	    //   //TODO: SEGURO?
	    //   ctrl.close();
	    // }
	
	    $scope.$apply(function() {
	
	      var tagged = false;
	
	      if (ctrl.items.length > 0 || ctrl.tagging.isActivated) {
	        _handleDropDownSelection(key);
	        if ( ctrl.taggingTokens.isActivated ) {
	          for (var i = 0; i < ctrl.taggingTokens.tokens.length; i++) {
	            if ( ctrl.taggingTokens.tokens[i] === KEY.MAP[e.keyCode] ) {
	              // make sure there is a new value to push via tagging
	              if ( ctrl.search.length > 0 ) {
	                tagged = true;
	              }
	            }
	          }
	          if ( tagged ) {
	            $timeout(function() {
	              ctrl.searchInput.triggerHandler('tagged');
	              var newItem = ctrl.search.replace(KEY.MAP[e.keyCode],'').trim();
	              if ( ctrl.tagging.fct ) {
	                newItem = ctrl.tagging.fct( newItem );
	              }
	              if (newItem) ctrl.select(newItem, true);
	            });
	          }
	        }
	      }
	
	    });
	
	    if(KEY.isVerticalMovement(key) && ctrl.items.length > 0){
	      _ensureHighlightVisible();
	    }
	
	    if (key === KEY.ENTER || key === KEY.ESC) {
	      e.preventDefault();
	      e.stopPropagation();
	    }
	
	  });
	
	  ctrl.searchInput.on('paste', function (e) {
	    var data;
	
	    if (window.clipboardData && window.clipboardData.getData) { // IE
	      data = window.clipboardData.getData('Text');
	    } else {
	      data = (e.originalEvent || e).clipboardData.getData('text/plain');
	    }
	
	    // Prepend the current input field text to the paste buffer.
	    data = ctrl.search + data;
	
	    if (data && data.length > 0) {
	      // If tagging try to split by tokens and add items
	      if (ctrl.taggingTokens.isActivated) {
	        var separator = KEY.toSeparator(ctrl.taggingTokens.tokens[0]);
	        var items = data.split(separator || ctrl.taggingTokens.tokens[0]); // split by first token only
	        if (items && items.length > 0) {
	        var oldsearch = ctrl.search;
	          angular.forEach(items, function (item) {
	            var newItem = ctrl.tagging.fct ? ctrl.tagging.fct(item) : item;
	            if (newItem) {
	              ctrl.select(newItem, true);
	            }
	          });
	          ctrl.search = oldsearch || EMPTY_SEARCH;
	          e.preventDefault();
	          e.stopPropagation();
	        }
	      } else if (ctrl.paste) {
	        ctrl.paste(data);
	        ctrl.search = EMPTY_SEARCH;
	        e.preventDefault();
	        e.stopPropagation();
	      }
	    }
	  });
	
	  ctrl.searchInput.on('tagged', function() {
	    $timeout(function() {
	      _resetSearchInput();
	    });
	  });
	
	  // See https://github.com/ivaynberg/select2/blob/3.4.6/select2.js#L1431
	  function _ensureHighlightVisible() {
	    var container = $element.querySelectorAll('.ui-select-choices-content');
	    var choices = container.querySelectorAll('.ui-select-choices-row');
	    if (choices.length < 1) {
	      throw uiSelectMinErr('choices', "Expected multiple .ui-select-choices-row but got '{0}'.", choices.length);
	    }
	
	    if (ctrl.activeIndex < 0) {
	      return;
	    }
	
	    var highlighted = choices[ctrl.activeIndex];
	    var posY = highlighted.offsetTop + highlighted.clientHeight - container[0].scrollTop;
	    var height = container[0].offsetHeight;
	
	    if (posY > height) {
	      container[0].scrollTop += posY - height;
	    } else if (posY < highlighted.clientHeight) {
	      if (ctrl.isGrouped && ctrl.activeIndex === 0)
	        container[0].scrollTop = 0; //To make group header visible when going all the way up
	      else
	        container[0].scrollTop -= highlighted.clientHeight - posY;
	    }
	  }
	
	  $scope.$on('$destroy', function() {
	    ctrl.searchInput.off('keyup keydown tagged blur paste');
	  });
	
	}]);
	
	uis.directive('uiSelect',
	  ['$document', 'uiSelectConfig', 'uiSelectMinErr', 'uisOffset', '$compile', '$parse', '$timeout',
	  function($document, uiSelectConfig, uiSelectMinErr, uisOffset, $compile, $parse, $timeout) {
	
	  return {
	    restrict: 'EA',
	    templateUrl: function(tElement, tAttrs) {
	      var theme = tAttrs.theme || uiSelectConfig.theme;
	      return theme + (angular.isDefined(tAttrs.multiple) ? '/select-multiple.tpl.html' : '/select.tpl.html');
	    },
	    replace: true,
	    transclude: true,
	    require: ['uiSelect', '^ngModel'],
	    scope: true,
	
	    controller: 'uiSelectCtrl',
	    controllerAs: '$select',
	    compile: function(tElement, tAttrs) {
	
	      // Allow setting ngClass on uiSelect
	      var match = /{(.*)}\s*{(.*)}/.exec(tAttrs.ngClass);
	      if(match) {
	        var combined = '{'+ match[1] +', '+ match[2] +'}';
	        tAttrs.ngClass = combined;
	        tElement.attr('ng-class', combined);
	      }
	
	      //Multiple or Single depending if multiple attribute presence
	      if (angular.isDefined(tAttrs.multiple))
	        tElement.append('<ui-select-multiple/>').removeAttr('multiple');
	      else
	        tElement.append('<ui-select-single/>');
	
	      if (tAttrs.inputId)
	        tElement.querySelectorAll('input.ui-select-search')[0].id = tAttrs.inputId;
	
	      return function(scope, element, attrs, ctrls, transcludeFn) {
	
	        var $select = ctrls[0];
	        var ngModel = ctrls[1];
	
	        $select.generatedId = uiSelectConfig.generateId();
	        $select.baseTitle = attrs.title || 'Select box';
	        $select.focusserTitle = $select.baseTitle + ' focus';
	        $select.focusserId = 'focusser-' + $select.generatedId;
	
	        $select.closeOnSelect = function() {
	          if (angular.isDefined(attrs.closeOnSelect)) {
	            return $parse(attrs.closeOnSelect)();
	          } else {
	            return uiSelectConfig.closeOnSelect;
	          }
	        }();
	
	        $select.onSelectCallback = $parse(attrs.onSelect);
	        $select.onRemoveCallback = $parse(attrs.onRemove);
	
	        //Limit the number of selections allowed
	        $select.limit = (angular.isDefined(attrs.limit)) ? parseInt(attrs.limit, 10) : undefined;
	
	        //Set reference to ngModel from uiSelectCtrl
	        $select.ngModel = ngModel;
	
	        $select.choiceGrouped = function(group){
	          return $select.isGrouped && group && group.name;
	        };
	
	        if(attrs.tabindex){
	          attrs.$observe('tabindex', function(value) {
	            $select.focusInput.attr('tabindex', value);
	            element.removeAttr('tabindex');
	          });
	        }
	
	        scope.$watch('searchEnabled', function() {
	            var searchEnabled = scope.$eval(attrs.searchEnabled);
	            $select.searchEnabled = searchEnabled !== undefined ? searchEnabled : uiSelectConfig.searchEnabled;
	        });
	
	        scope.$watch('sortable', function() {
	            var sortable = scope.$eval(attrs.sortable);
	            $select.sortable = sortable !== undefined ? sortable : uiSelectConfig.sortable;
	        });
	
	        attrs.$observe('disabled', function() {
	          // No need to use $eval() (thanks to ng-disabled) since we already get a boolean instead of a string
	          $select.disabled = attrs.disabled !== undefined ? attrs.disabled : false;
	        });
	
	        attrs.$observe('resetSearchInput', function() {
	          // $eval() is needed otherwise we get a string instead of a boolean
	          var resetSearchInput = scope.$eval(attrs.resetSearchInput);
	          $select.resetSearchInput = resetSearchInput !== undefined ? resetSearchInput : true;
	        });
	
	        attrs.$observe('paste', function() {
	          $select.paste = scope.$eval(attrs.paste);
	        });
	
	        attrs.$observe('tagging', function() {
	          if(attrs.tagging !== undefined)
	          {
	            // $eval() is needed otherwise we get a string instead of a boolean
	            var taggingEval = scope.$eval(attrs.tagging);
	            $select.tagging = {isActivated: true, fct: taggingEval !== true ? taggingEval : undefined};
	          }
	          else
	          {
	            $select.tagging = {isActivated: false, fct: undefined};
	          }
	        });
	
	        attrs.$observe('taggingLabel', function() {
	          if(attrs.tagging !== undefined )
	          {
	            // check eval for FALSE, in this case, we disable the labels
	            // associated with tagging
	            if ( attrs.taggingLabel === 'false' ) {
	              $select.taggingLabel = false;
	            }
	            else
	            {
	              $select.taggingLabel = attrs.taggingLabel !== undefined ? attrs.taggingLabel : '(new)';
	            }
	          }
	        });
	
	        attrs.$observe('taggingTokens', function() {
	          if (attrs.tagging !== undefined) {
	            var tokens = attrs.taggingTokens !== undefined ? attrs.taggingTokens.split('|') : [',','ENTER'];
	            $select.taggingTokens = {isActivated: true, tokens: tokens };
	          }
	        });
	
	        //Automatically gets focus when loaded
	        if (angular.isDefined(attrs.autofocus)){
	          $timeout(function(){
	            $select.setFocus();
	          });
	        }
	
	        //Gets focus based on scope event name (e.g. focus-on='SomeEventName')
	        if (angular.isDefined(attrs.focusOn)){
	          scope.$on(attrs.focusOn, function() {
	              $timeout(function(){
	                $select.setFocus();
	              });
	          });
	        }
	
	        function onDocumentClick(e) {
	          if (!$select.open) return; //Skip it if dropdown is close
	
	          var contains = false;
	
	          if (window.jQuery) {
	            // Firefox 3.6 does not support element.contains()
	            // See Node.contains https://developer.mozilla.org/en-US/docs/Web/API/Node.contains
	            contains = window.jQuery.contains(element[0], e.target);
	          } else {
	            contains = element[0].contains(e.target);
	          }
	
	          if (!contains && !$select.clickTriggeredSelect) {
	            //Will lose focus only with certain targets
	            var focusableControls = ['input','button','textarea','select'];
	            var targetController = angular.element(e.target).controller('uiSelect'); //To check if target is other ui-select
	            var skipFocusser = targetController && targetController !== $select; //To check if target is other ui-select
	            if (!skipFocusser) skipFocusser =  ~focusableControls.indexOf(e.target.tagName.toLowerCase()); //Check if target is input, button or textarea
	            $select.close(skipFocusser);
	            scope.$digest();
	          }
	          $select.clickTriggeredSelect = false;
	        }
	
	        // See Click everywhere but here event http://stackoverflow.com/questions/12931369
	        $document.on('click', onDocumentClick);
	
	        scope.$on('$destroy', function() {
	          $document.off('click', onDocumentClick);
	        });
	
	        // Move transcluded elements to their correct position in main template
	        transcludeFn(scope, function(clone) {
	          // See Transclude in AngularJS http://blog.omkarpatil.com/2012/11/transclude-in-angularjs.html
	
	          // One day jqLite will be replaced by jQuery and we will be able to write:
	          // var transcludedElement = clone.filter('.my-class')
	          // instead of creating a hackish DOM element:
	          var transcluded = angular.element('<div>').append(clone);
	
	          var transcludedMatch = transcluded.querySelectorAll('.ui-select-match');
	          transcludedMatch.removeAttr('ui-select-match'); //To avoid loop in case directive as attr
	          transcludedMatch.removeAttr('data-ui-select-match'); // Properly handle HTML5 data-attributes
	          if (transcludedMatch.length !== 1) {
	            throw uiSelectMinErr('transcluded', "Expected 1 .ui-select-match but got '{0}'.", transcludedMatch.length);
	          }
	          element.querySelectorAll('.ui-select-match').replaceWith(transcludedMatch);
	
	          var transcludedChoices = transcluded.querySelectorAll('.ui-select-choices');
	          transcludedChoices.removeAttr('ui-select-choices'); //To avoid loop in case directive as attr
	          transcludedChoices.removeAttr('data-ui-select-choices'); // Properly handle HTML5 data-attributes
	          if (transcludedChoices.length !== 1) {
	            throw uiSelectMinErr('transcluded', "Expected 1 .ui-select-choices but got '{0}'.", transcludedChoices.length);
	          }
	          element.querySelectorAll('.ui-select-choices').replaceWith(transcludedChoices);
	        });
	
	        // Support for appending the select field to the body when its open
	        var appendToBody = scope.$eval(attrs.appendToBody);
	        if (appendToBody !== undefined ? appendToBody : uiSelectConfig.appendToBody) {
	          scope.$watch('$select.open', function(isOpen) {
	            if (isOpen) {
	              positionDropdown();
	            } else {
	              resetDropdown();
	            }
	          });
	
	          // Move the dropdown back to its original location when the scope is destroyed. Otherwise
	          // it might stick around when the user routes away or the select field is otherwise removed
	          scope.$on('$destroy', function() {
	            resetDropdown();
	          });
	        }
	
	        // Hold on to a reference to the .ui-select-container element for appendToBody support
	        var placeholder = null,
	            originalWidth = '';
	
	        function positionDropdown() {
	          // Remember the absolute position of the element
	          var offset = uisOffset(element);
	
	          // Clone the element into a placeholder element to take its original place in the DOM
	          placeholder = angular.element('<div class="ui-select-placeholder"></div>');
	          placeholder[0].style.width = offset.width + 'px';
	          placeholder[0].style.height = offset.height + 'px';
	          element.after(placeholder);
	
	          // Remember the original value of the element width inline style, so it can be restored
	          // when the dropdown is closed
	          originalWidth = element[0].style.width;
	
	          // Now move the actual dropdown element to the end of the body
	          $document.find('body').append(element);
	
	          element[0].style.position = 'absolute';
	          element[0].style.left = offset.left + 'px';
	          element[0].style.top = offset.top + 'px';
	          element[0].style.width = offset.width + 'px';
	        }
	
	        function resetDropdown() {
	          if (placeholder === null) {
	            // The dropdown has not actually been display yet, so there's nothing to reset
	            return;
	          }
	
	          // Move the dropdown element back to its original location in the DOM
	          placeholder.replaceWith(element);
	          placeholder = null;
	
	          element[0].style.position = '';
	          element[0].style.left = '';
	          element[0].style.top = '';
	          element[0].style.width = originalWidth;
	        }
	
	        // Hold on to a reference to the .ui-select-dropdown element for direction support.
	        var dropdown = null,
	            directionUpClassName = 'direction-up';
	
	        // Support changing the direction of the dropdown if there isn't enough space to render it.
	        scope.$watch('$select.open', function() {
	
	          if ($select.dropdownPosition === 'auto' || $select.dropdownPosition === 'up'){
	            scope.calculateDropdownPos();
	          }
	
	        });
	
	        var setDropdownPosUp = function(offset, offsetDropdown){
	
	          offset = offset || uisOffset(element);
	          offsetDropdown = offsetDropdown || uisOffset(dropdown);
	
	          dropdown[0].style.position = 'absolute';
	          dropdown[0].style.top = (offsetDropdown.height * -1) + 'px';
	          element.addClass(directionUpClassName);
	
	        };
	
	        var setDropdownPosDown = function(offset, offsetDropdown){
	
	          element.removeClass(directionUpClassName);
	
	          offset = offset || uisOffset(element);
	          offsetDropdown = offsetDropdown || uisOffset(dropdown);
	
	          dropdown[0].style.position = '';
	          dropdown[0].style.top = '';
	
	        };
	
	        scope.calculateDropdownPos = function(){
	
	          if ($select.open) {
	            dropdown = angular.element(element).querySelectorAll('.ui-select-dropdown');
	            if (dropdown.length === 0) {
	              return;
	            }
	
	            // Hide the dropdown so there is no flicker until $timeout is done executing.
	            dropdown[0].style.opacity = 0;
	
	            // Delay positioning the dropdown until all choices have been added so its height is correct.
	            $timeout(function(){
	
	              if ($select.dropdownPosition === 'up'){
	                  //Go UP
	                  setDropdownPosUp();
	
	              }else{ //AUTO
	
	                element.removeClass(directionUpClassName);
	
	                var offset = uisOffset(element);
	                var offsetDropdown = uisOffset(dropdown);
	
	                //https://code.google.com/p/chromium/issues/detail?id=342307#c4
	                var scrollTop = $document[0].documentElement.scrollTop || $document[0].body.scrollTop; //To make it cross browser (blink, webkit, IE, Firefox).
	
	                // Determine if the direction of the dropdown needs to be changed.
	                if (offset.top + offset.height + offsetDropdown.height > scrollTop + $document[0].documentElement.clientHeight) {
	                  //Go UP
	                  setDropdownPosUp(offset, offsetDropdown);
	                }else{
	                  //Go DOWN
	                  setDropdownPosDown(offset, offsetDropdown);
	                }
	
	              }
	
	              // Display the dropdown once it has been positioned.
	              dropdown[0].style.opacity = 1;
	            });
	          } else {
	              if (dropdown === null || dropdown.length === 0) {
	                return;
	              }
	
	              // Reset the position of the dropdown.
	              dropdown[0].style.position = '';
	              dropdown[0].style.top = '';
	              element.removeClass(directionUpClassName);
	          }
	        };
	      };
	    }
	  };
	}]);
	
	uis.directive('uiSelectMatch', ['uiSelectConfig', function(uiSelectConfig) {
	  return {
	    restrict: 'EA',
	    require: '^uiSelect',
	    replace: true,
	    transclude: true,
	    templateUrl: function(tElement) {
	      // Needed so the uiSelect can detect the transcluded content
	      tElement.addClass('ui-select-match');
	
	      // Gets theme attribute from parent (ui-select)
	      var theme = tElement.parent().attr('theme') || uiSelectConfig.theme;
	      var multi = tElement.parent().attr('multiple');
	      return theme + (multi ? '/match-multiple.tpl.html' : '/match.tpl.html');
	    },
	    link: function(scope, element, attrs, $select) {
	      $select.lockChoiceExpression = attrs.uiLockChoice;
	      attrs.$observe('placeholder', function(placeholder) {
	        $select.placeholder = placeholder !== undefined ? placeholder : uiSelectConfig.placeholder;
	      });
	
	      function setAllowClear(allow) {
	        $select.allowClear = (angular.isDefined(allow)) ? (allow === '') ? true : (allow.toLowerCase() === 'true') : false;
	      }
	
	      attrs.$observe('allowClear', setAllowClear);
	      setAllowClear(attrs.allowClear);
	
	      if($select.multiple){
	        $select.sizeSearchInput();
	      }
	
	    }
	  };
	}]);
	
	uis.directive('uiSelectMultiple', ['uiSelectMinErr','$timeout', function(uiSelectMinErr, $timeout) {
	  return {
	    restrict: 'EA',
	    require: ['^uiSelect', '^ngModel'],
	
	    controller: ['$scope','$timeout', function($scope, $timeout){
	
	      var ctrl = this,
	          $select = $scope.$select,
	          ngModel;
	
	      //Wait for link fn to inject it 
	      $scope.$evalAsync(function(){ ngModel = $scope.ngModel; });
	
	      ctrl.activeMatchIndex = -1;
	
	      ctrl.updateModel = function(){
	        ngModel.$setViewValue(Date.now()); //Set timestamp as a unique string to force changes
	        ctrl.refreshComponent();
	      };
	
	      ctrl.refreshComponent = function(){
	        //Remove already selected items
	        //e.g. When user clicks on a selection, the selected array changes and 
	        //the dropdown should remove that item
	        $select.refreshItems();
	        $select.sizeSearchInput();
	      };
	
	      // Remove item from multiple select
	      ctrl.removeChoice = function(index){
	
	        var removedChoice = $select.selected[index];
	
	        // if the choice is locked, can't remove it
	        if(removedChoice._uiSelectChoiceLocked) return;
	
	        var locals = {};
	        locals[$select.parserResult.itemName] = removedChoice;
	
	        $select.selected.splice(index, 1);
	        ctrl.activeMatchIndex = -1;
	        $select.sizeSearchInput();
	
	        // Give some time for scope propagation.
	        $timeout(function(){
	          $select.onRemoveCallback($scope, {
	            $item: removedChoice,
	            $model: $select.parserResult.modelMapper($scope, locals)
	          });
	        });
	
	        ctrl.updateModel();
	
	      };
	
	      ctrl.getPlaceholder = function(){
	        //Refactor single?
	        if($select.selected && $select.selected.length) return;
	        return $select.placeholder;
	      };
	
	
	    }],
	    controllerAs: '$selectMultiple',
	
	    link: function(scope, element, attrs, ctrls) {
	
	      var $select = ctrls[0];
	      var ngModel = scope.ngModel = ctrls[1];
	      var $selectMultiple = scope.$selectMultiple;
	
	      //$select.selected = raw selected objects (ignoring any property binding)
	
	      $select.multiple = true;
	      $select.removeSelected = true;
	
	      //Input that will handle focus
	      $select.focusInput = $select.searchInput;
	
	      //From view --> model
	      ngModel.$parsers.unshift(function () {
	        var locals = {},
	            result,
	            resultMultiple = [];
	        for (var j = $select.selected.length - 1; j >= 0; j--) {
	          locals = {};
	          locals[$select.parserResult.itemName] = $select.selected[j];
	          result = $select.parserResult.modelMapper(scope, locals);
	          resultMultiple.unshift(result);
	        }
	        return resultMultiple;
	      });
	
	      // From model --> view
	      ngModel.$formatters.unshift(function (inputValue) {
	        var data = $select.parserResult.source (scope, { $select : {search:''}}), //Overwrite $search
	            locals = {},
	            result;
	        if (!data) return inputValue;
	        var resultMultiple = [];
	        var checkFnMultiple = function(list, value){
	          if (!list || !list.length) return;
	          for (var p = list.length - 1; p >= 0; p--) {
	            locals[$select.parserResult.itemName] = list[p];
	            result = $select.parserResult.modelMapper(scope, locals);
	            if($select.parserResult.trackByExp){
	                var propsItemNameMatches = /(\w*)\./.exec($select.parserResult.trackByExp);
	                var matches = /\.([^\s]+)/.exec($select.parserResult.trackByExp);
	                if(propsItemNameMatches && propsItemNameMatches.length > 0 && propsItemNameMatches[1] == $select.parserResult.itemName){
	                  if(matches && matches.length>0 && result[matches[1]] == value[matches[1]]){
	                      resultMultiple.unshift(list[p]);
	                      return true;
	                  }
	                }
	            }
	            if (angular.equals(result,value)){
	              resultMultiple.unshift(list[p]);
	              return true;
	            }
	          }
	          return false;
	        };
	        if (!inputValue) return resultMultiple; //If ngModel was undefined
	        for (var k = inputValue.length - 1; k >= 0; k--) {
	          //Check model array of currently selected items 
	          if (!checkFnMultiple($select.selected, inputValue[k])){
	            //Check model array of all items available
	            if (!checkFnMultiple(data, inputValue[k])){
	              //If not found on previous lists, just add it directly to resultMultiple
	              resultMultiple.unshift(inputValue[k]);
	            }
	          }
	        }
	        return resultMultiple;
	      });
	      
	      //Watch for external model changes 
	      scope.$watchCollection(function(){ return ngModel.$modelValue; }, function(newValue, oldValue) {
	        if (oldValue != newValue){
	          ngModel.$modelValue = null; //Force scope model value and ngModel value to be out of sync to re-run formatters
	          $selectMultiple.refreshComponent();
	        }
	      });
	
	      ngModel.$render = function() {
	        // Make sure that model value is array
	        if(!angular.isArray(ngModel.$viewValue)){
	          // Have tolerance for null or undefined values
	          if(angular.isUndefined(ngModel.$viewValue) || ngModel.$viewValue === null){
	            $select.selected = [];
	          } else {
	            throw uiSelectMinErr('multiarr', "Expected model value to be array but got '{0}'", ngModel.$viewValue);
	          }
	        }
	        $select.selected = ngModel.$viewValue;
	        scope.$evalAsync(); //To force $digest
	      };
	
	      scope.$on('uis:select', function (event, item) {
	        if($select.selected.length >= $select.limit) {
	          return;
	        }
	        $select.selected.push(item);
	        $selectMultiple.updateModel();
	      });
	
	      scope.$on('uis:activate', function () {
	        $selectMultiple.activeMatchIndex = -1;
	      });
	
	      scope.$watch('$select.disabled', function(newValue, oldValue) {
	        // As the search input field may now become visible, it may be necessary to recompute its size
	        if (oldValue && !newValue) $select.sizeSearchInput();
	      });
	
	      $select.searchInput.on('keydown', function(e) {
	        var key = e.which;
	        scope.$apply(function() {
	          var processed = false;
	          // var tagged = false; //Checkme
	          if(KEY.isHorizontalMovement(key)){
	            processed = _handleMatchSelection(key);
	          }
	          if (processed  && key != KEY.TAB) {
	            //TODO Check si el tab selecciona aun correctamente
	            //Crear test
	            e.preventDefault();
	            e.stopPropagation();
	          }
	        });
	      });
	      function _getCaretPosition(el) {
	        if(angular.isNumber(el.selectionStart)) return el.selectionStart;
	        // selectionStart is not supported in IE8 and we don't want hacky workarounds so we compromise
	        else return el.value.length;
	      }
	      // Handles selected options in "multiple" mode
	      function _handleMatchSelection(key){
	        var caretPosition = _getCaretPosition($select.searchInput[0]),
	            length = $select.selected.length,
	            // none  = -1,
	            first = 0,
	            last  = length-1,
	            curr  = $selectMultiple.activeMatchIndex,
	            next  = $selectMultiple.activeMatchIndex+1,
	            prev  = $selectMultiple.activeMatchIndex-1,
	            newIndex = curr;
	
	        if(caretPosition > 0 || ($select.search.length && key == KEY.RIGHT)) return false;
	
	        $select.close();
	
	        function getNewActiveMatchIndex(){
	          switch(key){
	            case KEY.LEFT:
	              // Select previous/first item
	              if(~$selectMultiple.activeMatchIndex) return prev;
	              // Select last item
	              else return last;
	              break;
	            case KEY.RIGHT:
	              // Open drop-down
	              if(!~$selectMultiple.activeMatchIndex || curr === last){
	                $select.activate();
	                return false;
	              }
	              // Select next/last item
	              else return next;
	              break;
	            case KEY.BACKSPACE:
	              // Remove selected item and select previous/first
	              if(~$selectMultiple.activeMatchIndex){
	                $selectMultiple.removeChoice(curr);
	                return prev;
	              }
	              // Select last item
	              else return last;
	              break;
	            case KEY.DELETE:
	              // Remove selected item and select next item
	              if(~$selectMultiple.activeMatchIndex){
	                $selectMultiple.removeChoice($selectMultiple.activeMatchIndex);
	                return curr;
	              }
	              else return false;
	          }
	        }
	
	        newIndex = getNewActiveMatchIndex();
	
	        if(!$select.selected.length || newIndex === false) $selectMultiple.activeMatchIndex = -1;
	        else $selectMultiple.activeMatchIndex = Math.min(last,Math.max(first,newIndex));
	
	        return true;
	      }
	
	      $select.searchInput.on('keyup', function(e) {
	
	        if ( ! KEY.isVerticalMovement(e.which) ) {
	          scope.$evalAsync( function () {
	            $select.activeIndex = $select.taggingLabel === false ? -1 : 0;
	          });
	        }
	        // Push a "create new" item into array if there is a search string
	        if ( $select.tagging.isActivated && $select.search.length > 0 ) {
	
	          // return early with these keys
	          if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC || KEY.isVerticalMovement(e.which) ) {
	            return;
	          }
	          // always reset the activeIndex to the first item when tagging
	          $select.activeIndex = $select.taggingLabel === false ? -1 : 0;
	          // taggingLabel === false bypasses all of this
	          if ($select.taggingLabel === false) return;
	
	          var items = angular.copy( $select.items );
	          var stashArr = angular.copy( $select.items );
	          var newItem;
	          var item;
	          var hasTag = false;
	          var dupeIndex = -1;
	          var tagItems;
	          var tagItem;
	
	          // case for object tagging via transform `$select.tagging.fct` function
	          if ( $select.tagging.fct !== undefined) {
	            tagItems = $select.$filter('filter')(items,{'isTag': true});
	            if ( tagItems.length > 0 ) {
	              tagItem = tagItems[0];
	            }
	            // remove the first element, if it has the `isTag` prop we generate a new one with each keyup, shaving the previous
	            if ( items.length > 0 && tagItem ) {
	              hasTag = true;
	              items = items.slice(1,items.length);
	              stashArr = stashArr.slice(1,stashArr.length);
	            }
	            newItem = $select.tagging.fct($select.search);
	            newItem.isTag = true;
	            // verify the the tag doesn't match the value of an existing item
	            if ( stashArr.filter( function (origItem) { return angular.equals( origItem, $select.tagging.fct($select.search) ); } ).length > 0 ) {
	              return;
	            }
	            newItem.isTag = true;
	          // handle newItem string and stripping dupes in tagging string context
	          } else {
	            // find any tagging items already in the $select.items array and store them
	            tagItems = $select.$filter('filter')(items,function (item) {
	              return item.match($select.taggingLabel);
	            });
	            if ( tagItems.length > 0 ) {
	              tagItem = tagItems[0];
	            }
	            item = items[0];
	            // remove existing tag item if found (should only ever be one tag item)
	            if ( item !== undefined && items.length > 0 && tagItem ) {
	              hasTag = true;
	              items = items.slice(1,items.length);
	              stashArr = stashArr.slice(1,stashArr.length);
	            }
	            newItem = $select.search+' '+$select.taggingLabel;
	            if ( _findApproxDupe($select.selected, $select.search) > -1 ) {
	              return;
	            }
	            // verify the the tag doesn't match the value of an existing item from
	            // the searched data set or the items already selected
	            if ( _findCaseInsensitiveDupe(stashArr.concat($select.selected)) ) {
	              // if there is a tag from prev iteration, strip it / queue the change
	              // and return early
	              if ( hasTag ) {
	                items = stashArr;
	                scope.$evalAsync( function () {
	                  $select.activeIndex = 0;
	                  $select.items = items;
	                });
	              }
	              return;
	            }
	            if ( _findCaseInsensitiveDupe(stashArr) ) {
	              // if there is a tag from prev iteration, strip it
	              if ( hasTag ) {
	                $select.items = stashArr.slice(1,stashArr.length);
	              }
	              return;
	            }
	          }
	          if ( hasTag ) dupeIndex = _findApproxDupe($select.selected, newItem);
	          // dupe found, shave the first item
	          if ( dupeIndex > -1 ) {
	            items = items.slice(dupeIndex+1,items.length-1);
	          } else {
	            items = [];
	            items.push(newItem);
	            items = items.concat(stashArr);
	          }
	          scope.$evalAsync( function () {
	            $select.activeIndex = 0;
	            $select.items = items;
	          });
	        }
	      });
	      function _findCaseInsensitiveDupe(arr) {
	        if ( arr === undefined || $select.search === undefined ) {
	          return false;
	        }
	        var hasDupe = arr.filter( function (origItem) {
	          if ( $select.search.toUpperCase() === undefined || origItem === undefined ) {
	            return false;
	          }
	          return origItem.toUpperCase() === $select.search.toUpperCase();
	        }).length > 0;
	
	        return hasDupe;
	      }
	      function _findApproxDupe(haystack, needle) {
	        var dupeIndex = -1;
	        if(angular.isArray(haystack)) {
	          var tempArr = angular.copy(haystack);
	          for (var i = 0; i <tempArr.length; i++) {
	            // handle the simple string version of tagging
	            if ( $select.tagging.fct === undefined ) {
	              // search the array for the match
	              if ( tempArr[i]+' '+$select.taggingLabel === needle ) {
	              dupeIndex = i;
	              }
	            // handle the object tagging implementation
	            } else {
	              var mockObj = tempArr[i];
	              if (angular.isObject(mockObj)) {
	                mockObj.isTag = true;
	              }
	              if ( angular.equals(mockObj, needle) ) {
	                dupeIndex = i;
	              }
	            }
	          }
	        }
	        return dupeIndex;
	      }
	
	      $select.searchInput.on('blur', function() {
	        $timeout(function() {
	          $selectMultiple.activeMatchIndex = -1;
	        });
	      });
	
	    }
	  };
	}]);
	
	uis.directive('uiSelectSingle', ['$timeout','$compile', function($timeout, $compile) {
	  return {
	    restrict: 'EA',
	    require: ['^uiSelect', '^ngModel'],
	    link: function(scope, element, attrs, ctrls) {
	
	      var $select = ctrls[0];
	      var ngModel = ctrls[1];
	
	      //From view --> model
	      ngModel.$parsers.unshift(function (inputValue) {
	        var locals = {},
	            result;
	        locals[$select.parserResult.itemName] = inputValue;
	        result = $select.parserResult.modelMapper(scope, locals);
	        return result;
	      });
	
	      //From model --> view
	      ngModel.$formatters.unshift(function (inputValue) {
	        var data = $select.parserResult.source (scope, { $select : {search:''}}), //Overwrite $search
	            locals = {},
	            result;
	        if (data){
	          var checkFnSingle = function(d){
	            locals[$select.parserResult.itemName] = d;
	            result = $select.parserResult.modelMapper(scope, locals);
	            return result == inputValue;
	          };
	          //If possible pass same object stored in $select.selected
	          if ($select.selected && checkFnSingle($select.selected)) {
	            return $select.selected;
	          }
	          for (var i = data.length - 1; i >= 0; i--) {
	            if (checkFnSingle(data[i])) return data[i];
	          }
	        }
	        return inputValue;
	      });
	
	      //Update viewValue if model change
	      scope.$watch('$select.selected', function(newValue) {
	        if (ngModel.$viewValue !== newValue) {
	          ngModel.$setViewValue(newValue);
	        }
	      });
	
	      ngModel.$render = function() {
	        $select.selected = ngModel.$viewValue;
	      };
	
	      scope.$on('uis:select', function (event, item) {
	        $select.selected = item;
	      });
	
	      scope.$on('uis:close', function (event, skipFocusser) {
	        $timeout(function(){
	          $select.focusser.prop('disabled', false);
	          if (!skipFocusser) $select.focusser[0].focus();
	        },0,false);
	      });
	
	      scope.$on('uis:activate', function () {
	        focusser.prop('disabled', true); //Will reactivate it on .close()
	      });
	
	      //Idea from: https://github.com/ivaynberg/select2/blob/79b5bf6db918d7560bdd959109b7bcfb47edaf43/select2.js#L1954
	      var focusser = angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");
	      $compile(focusser)(scope);
	      $select.focusser = focusser;
	
	      //Input that will handle focus
	      $select.focusInput = focusser;
	
	      element.parent().append(focusser);
	      focusser.bind("focus", function(){
	        scope.$evalAsync(function(){
	          $select.focus = true;
	        });
	      });
	      focusser.bind("blur", function(){
	        scope.$evalAsync(function(){
	          $select.focus = false;
	        });
	      });
	      focusser.bind("keydown", function(e){
	
	        if (e.which === KEY.BACKSPACE) {
	          e.preventDefault();
	          e.stopPropagation();
	          $select.select(undefined);
	          scope.$apply();
	          return;
	        }
	
	        if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC) {
	          return;
	        }
	
	        if (e.which == KEY.DOWN  || e.which == KEY.UP || e.which == KEY.ENTER || e.which == KEY.SPACE){
	          e.preventDefault();
	          e.stopPropagation();
	          $select.activate();
	        }
	
	        scope.$digest();
	      });
	
	      focusser.bind("keyup input", function(e){
	
	        if (e.which === KEY.TAB || KEY.isControl(e) || KEY.isFunctionKey(e) || e.which === KEY.ESC || e.which == KEY.ENTER || e.which === KEY.BACKSPACE) {
	          return;
	        }
	
	        $select.activate(focusser.val()); //User pressed some regular key, so we pass it to the search input
	        focusser.val('');
	        scope.$digest();
	
	      });
	
	
	    }
	  };
	}]);
	// Make multiple matches sortable
	uis.directive('uiSelectSort', ['$timeout', 'uiSelectConfig', 'uiSelectMinErr', function($timeout, uiSelectConfig, uiSelectMinErr) {
	  return {
	    require: '^^uiSelect',
	    link: function(scope, element, attrs, $select) {
	      if (scope[attrs.uiSelectSort] === null) {
	        throw uiSelectMinErr('sort', 'Expected a list to sort');
	      }
	
	      var options = angular.extend({
	          axis: 'horizontal'
	        },
	        scope.$eval(attrs.uiSelectSortOptions));
	
	      var axis = options.axis;
	      var draggingClassName = 'dragging';
	      var droppingClassName = 'dropping';
	      var droppingBeforeClassName = 'dropping-before';
	      var droppingAfterClassName = 'dropping-after';
	
	      scope.$watch(function(){
	        return $select.sortable;
	      }, function(newValue){
	        if (newValue) {
	          element.attr('draggable', true);
	        } else {
	          element.removeAttr('draggable');
	        }
	      });
	
	      element.on('dragstart', function(event) {
	        element.addClass(draggingClassName);
	
	        (event.dataTransfer || event.originalEvent.dataTransfer).setData('text/plain', scope.$index);
	      });
	
	      element.on('dragend', function() {
	        element.removeClass(draggingClassName);
	      });
	
	      var move = function(from, to) {
	        /*jshint validthis: true */
	        this.splice(to, 0, this.splice(from, 1)[0]);
	      };
	
	      var dragOverHandler = function(event) {
	        event.preventDefault();
	
	        var offset = axis === 'vertical' ? event.offsetY || event.layerY || (event.originalEvent ? event.originalEvent.offsetY : 0) : event.offsetX || event.layerX || (event.originalEvent ? event.originalEvent.offsetX : 0);
	
	        if (offset < (this[axis === 'vertical' ? 'offsetHeight' : 'offsetWidth'] / 2)) {
	          element.removeClass(droppingAfterClassName);
	          element.addClass(droppingBeforeClassName);
	
	        } else {
	          element.removeClass(droppingBeforeClassName);
	          element.addClass(droppingAfterClassName);
	        }
	      };
	
	      var dropTimeout;
	
	      var dropHandler = function(event) {
	        event.preventDefault();
	
	        var droppedItemIndex = parseInt((event.dataTransfer || event.originalEvent.dataTransfer).getData('text/plain'), 10);
	
	        // prevent event firing multiple times in firefox
	        $timeout.cancel(dropTimeout);
	        dropTimeout = $timeout(function() {
	          _dropHandler(droppedItemIndex);
	        }, 20);
	      };
	
	      var _dropHandler = function(droppedItemIndex) {
	        var theList = scope.$eval(attrs.uiSelectSort);
	        var itemToMove = theList[droppedItemIndex];
	        var newIndex = null;
	
	        if (element.hasClass(droppingBeforeClassName)) {
	          if (droppedItemIndex < scope.$index) {
	            newIndex = scope.$index - 1;
	          } else {
	            newIndex = scope.$index;
	          }
	        } else {
	          if (droppedItemIndex < scope.$index) {
	            newIndex = scope.$index;
	          } else {
	            newIndex = scope.$index + 1;
	          }
	        }
	
	        move.apply(theList, [droppedItemIndex, newIndex]);
	
	        scope.$apply(function() {
	          scope.$emit('uiSelectSort:change', {
	            array: theList,
	            item: itemToMove,
	            from: droppedItemIndex,
	            to: newIndex
	          });
	        });
	
	        element.removeClass(droppingClassName);
	        element.removeClass(droppingBeforeClassName);
	        element.removeClass(droppingAfterClassName);
	
	        element.off('drop', dropHandler);
	      };
	
	      element.on('dragenter', function() {
	        if (element.hasClass(draggingClassName)) {
	          return;
	        }
	
	        element.addClass(droppingClassName);
	
	        element.on('dragover', dragOverHandler);
	        element.on('drop', dropHandler);
	      });
	
	      element.on('dragleave', function(event) {
	        if (event.target != element) {
	          return;
	        }
	        element.removeClass(droppingClassName);
	        element.removeClass(droppingBeforeClassName);
	        element.removeClass(droppingAfterClassName);
	
	        element.off('dragover', dragOverHandler);
	        element.off('drop', dropHandler);
	      });
	    }
	  };
	}]);
	
	/**
	 * Parses "repeat" attribute.
	 *
	 * Taken from AngularJS ngRepeat source code
	 * See https://github.com/angular/angular.js/blob/v1.2.15/src/ng/directive/ngRepeat.js#L211
	 *
	 * Original discussion about parsing "repeat" attribute instead of fully relying on ng-repeat:
	 * https://github.com/angular-ui/ui-select/commit/5dd63ad#commitcomment-5504697
	 */
	
	uis.service('uisRepeatParser', ['uiSelectMinErr','$parse', function(uiSelectMinErr, $parse) {
	  var self = this;
	
	  /**
	   * Example:
	   * expression = "address in addresses | filter: {street: $select.search} track by $index"
	   * itemName = "address",
	   * source = "addresses | filter: {street: $select.search}",
	   * trackByExp = "$index",
	   */
	  self.parse = function(expression) {
	
	
	    var match;
	    var isObjectCollection = /\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)/.test(expression);
	    // If an array is used as collection
	
	    // if (isObjectCollection){
	      //00000000000000000000000000000111111111000000000000000222222222222220033333333333333333333330000444444444444444444000000000000000556666660000077777777777755000000000000000000000088888880000000
	    match = expression.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(([\w\.]+)?\s*(|\s*[\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);      
	
	    // 1 Alias
	    // 2 Item
	    // 3 Key on (key,value)
	    // 4 Value on (key,value)
	    // 5 Collection expresion (only used when using an array collection)
	    // 6 Object that will be converted to Array when using (key,value) syntax
	    // 7 Filters that will be applied to #6 when using (key,value) syntax
	    // 8 Track by
	
	    if (!match) {
	      throw uiSelectMinErr('iexp', "Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",
	              expression);
	    }
	    if (!match[6] && isObjectCollection) {
	      throw uiSelectMinErr('iexp', "Expected expression in form of '_item_ as (_key_, _item_) in _ObjCollection_ [ track by _id_]' but got '{0}'.",
	              expression);
	    }
	
	    return {
	      itemName: match[4] || match[2], // (lhs) Left-hand side,
	      keyName: match[3], //for (key, value) syntax
	      source: $parse(!match[3] ? match[5] : match[6]),
	      sourceName: match[6],
	      filters: match[7],
	      trackByExp: match[8],
	      modelMapper: $parse(match[1] || match[4] || match[2]),
	      repeatExpression: function (grouped) {
	        var expression = this.itemName + ' in ' + (grouped ? '$group.items' : '$select.items');
	        if (this.trackByExp) {
	          expression += ' track by ' + this.trackByExp;
	        }
	        return expression;
	      } 
	    };
	
	  };
	
	  self.getGroupNgRepeatExpression = function() {
	    return '$group in $select.groups';
	  };
	
	}]);
	
	}());
	angular.module("ui.select").run(["$templateCache", function($templateCache) {$templateCache.put("bootstrap/choices.tpl.html","<ul class=\"ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu\" role=\"listbox\" ng-show=\"$select.items.length > 0\"><li class=\"ui-select-choices-group\" id=\"ui-select-choices-{{ $select.generatedId }}\"><div class=\"divider\" ng-show=\"$select.isGrouped && $index > 0\"></div><div ng-show=\"$select.isGrouped\" class=\"ui-select-choices-group-label dropdown-header\" ng-bind=\"$group.name\"></div><div id=\"ui-select-choices-row-{{ $select.generatedId }}-{{$index}}\" class=\"ui-select-choices-row\" ng-class=\"{active: $select.isActive(this), disabled: $select.isDisabled(this)}\" role=\"option\"><a href=\"\" class=\"ui-select-choices-row-inner\"></a></div></li></ul>");
	$templateCache.put("bootstrap/match-multiple.tpl.html","<span class=\"ui-select-match\"><span ng-repeat=\"$item in $select.selected\"><span class=\"ui-select-match-item btn btn-default btn-xs\" tabindex=\"-1\" type=\"button\" ng-disabled=\"$select.disabled\" ng-click=\"$selectMultiple.activeMatchIndex = $index;\" ng-class=\"{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}\" ui-select-sort=\"$select.selected\"><span class=\"close ui-select-match-close\" ng-hide=\"$select.disabled\" ng-click=\"$selectMultiple.removeChoice($index)\">&nbsp;&times;</span> <span uis-transclude-append=\"\"></span></span></span></span>");
	$templateCache.put("bootstrap/match.tpl.html","<div class=\"ui-select-match\" ng-hide=\"$select.open\" ng-disabled=\"$select.disabled\" ng-class=\"{\'btn-default-focus\':$select.focus}\"><span tabindex=\"-1\" class=\"btn btn-default form-control ui-select-toggle\" aria-label=\"{{ $select.baseTitle }} activate\" ng-disabled=\"$select.disabled\" ng-click=\"$select.activate()\" style=\"outline: 0;\"><span ng-show=\"$select.isEmpty()\" class=\"ui-select-placeholder text-muted\">{{$select.placeholder}}</span> <span ng-hide=\"$select.isEmpty()\" class=\"ui-select-match-text pull-left\" ng-class=\"{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}\" ng-transclude=\"\"></span> <i class=\"caret pull-right\" ng-click=\"$select.toggle($event)\"></i> <a ng-show=\"$select.allowClear && !$select.isEmpty()\" aria-label=\"{{ $select.baseTitle }} clear\" style=\"margin-right: 10px\" ng-click=\"$select.clear($event)\" class=\"btn btn-xs btn-link pull-right\"><i class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"></i></a></span></div>");
	$templateCache.put("bootstrap/select-multiple.tpl.html","<div class=\"ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control\" ng-class=\"{open: $select.open}\"><div><div class=\"ui-select-match\"></div><input type=\"text\" autocomplete=\"false\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" class=\"ui-select-search input-xs\" placeholder=\"{{$selectMultiple.getPlaceholder()}}\" ng-disabled=\"$select.disabled\" ng-hide=\"$select.disabled\" ng-click=\"$select.activate()\" ng-model=\"$select.search\" role=\"combobox\" aria-label=\"{{ $select.baseTitle }}\" ondrop=\"return false;\"></div><div class=\"ui-select-choices\"></div></div>");
	$templateCache.put("bootstrap/select.tpl.html","<div class=\"ui-select-container ui-select-bootstrap dropdown\" ng-class=\"{open: $select.open}\"><div class=\"ui-select-match\"></div><input type=\"text\" autocomplete=\"false\" tabindex=\"-1\" aria-expanded=\"true\" aria-label=\"{{ $select.baseTitle }}\" aria-owns=\"ui-select-choices-{{ $select.generatedId }}\" aria-activedescendant=\"ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}\" class=\"form-control ui-select-search\" placeholder=\"{{$select.placeholder}}\" ng-model=\"$select.search\" ng-show=\"$select.searchEnabled && $select.open\"><div class=\"ui-select-choices\"></div></div>");
	$templateCache.put("select2/choices.tpl.html","<ul class=\"ui-select-choices ui-select-choices-content select2-results\"><li class=\"ui-select-choices-group\" ng-class=\"{\'select2-result-with-children\': $select.choiceGrouped($group) }\"><div ng-show=\"$select.choiceGrouped($group)\" class=\"ui-select-choices-group-label select2-result-label\" ng-bind=\"$group.name\"></div><ul role=\"listbox\" id=\"ui-select-choices-{{ $select.generatedId }}\" ng-class=\"{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }\"><li role=\"option\" id=\"ui-select-choices-row-{{ $select.generatedId }}-{{$index}}\" class=\"ui-select-choices-row\" ng-class=\"{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}\"><div class=\"select2-result-label ui-select-choices-row-inner\"></div></li></ul></li></ul>");
	$templateCache.put("select2/match-multiple.tpl.html","<span class=\"ui-select-match\"><li class=\"ui-select-match-item select2-search-choice\" ng-repeat=\"$item in $select.selected\" ng-class=\"{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}\" ui-select-sort=\"$select.selected\"><span uis-transclude-append=\"\"></span> <a href=\"javascript:;\" class=\"ui-select-match-close select2-search-choice-close\" ng-click=\"$selectMultiple.removeChoice($index)\" tabindex=\"-1\"></a></li></span>");
	$templateCache.put("select2/match.tpl.html","<a class=\"select2-choice ui-select-match\" ng-class=\"{\'select2-default\': $select.isEmpty()}\" ng-click=\"$select.toggle($event)\" aria-label=\"{{ $select.baseTitle }} select\"><span ng-show=\"$select.isEmpty()\" class=\"select2-chosen\">{{$select.placeholder}}</span> <span ng-hide=\"$select.isEmpty()\" class=\"select2-chosen\" ng-transclude=\"\"></span> <abbr ng-if=\"$select.allowClear && !$select.isEmpty()\" class=\"select2-search-choice-close\" ng-click=\"$select.clear($event)\"></abbr> <span class=\"select2-arrow ui-select-toggle\"><b></b></span></a>");
	$templateCache.put("select2/select-multiple.tpl.html","<div class=\"ui-select-container ui-select-multiple select2 select2-container select2-container-multi\" ng-class=\"{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}\"><ul class=\"select2-choices\"><span class=\"ui-select-match\"></span><li class=\"select2-search-field\"><input type=\"text\" autocomplete=\"false\" autocorrect=\"off\" autocapitalize=\"off\" spellcheck=\"false\" role=\"combobox\" aria-expanded=\"true\" aria-owns=\"ui-select-choices-{{ $select.generatedId }}\" aria-label=\"{{ $select.baseTitle }}\" aria-activedescendant=\"ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}\" class=\"select2-input ui-select-search\" placeholder=\"{{$selectMultiple.getPlaceholder()}}\" ng-disabled=\"$select.disabled\" ng-hide=\"$select.disabled\" ng-model=\"$select.search\" ng-click=\"$select.activate()\" style=\"width: 34px;\" ondrop=\"return false;\"></li></ul><div class=\"ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active\" ng-class=\"{\'select2-display-none\': !$select.open}\"><div class=\"ui-select-choices\"></div></div></div>");
	$templateCache.put("select2/select.tpl.html","<div class=\"ui-select-container select2 select2-container\" ng-class=\"{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}\"><div class=\"ui-select-match\"></div><div class=\"ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active\" ng-class=\"{\'select2-display-none\': !$select.open}\"><div class=\"select2-search\" ng-show=\"$select.searchEnabled\"><input type=\"text\" autocomplete=\"false\" autocorrect=\"false\" autocapitalize=\"off\" spellcheck=\"false\" role=\"combobox\" aria-expanded=\"true\" aria-owns=\"ui-select-choices-{{ $select.generatedId }}\" aria-label=\"{{ $select.baseTitle }}\" aria-activedescendant=\"ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}\" class=\"ui-select-search select2-input\" ng-model=\"$select.search\"></div><div class=\"ui-select-choices\"></div></div></div>");
	$templateCache.put("selectize/choices.tpl.html","<div ng-show=\"$select.open\" class=\"ui-select-choices ui-select-dropdown selectize-dropdown single\"><div class=\"ui-select-choices-content selectize-dropdown-content\"><div class=\"ui-select-choices-group optgroup\" role=\"listbox\"><div ng-show=\"$select.isGrouped\" class=\"ui-select-choices-group-label optgroup-header\" ng-bind=\"$group.name\"></div><div role=\"option\" class=\"ui-select-choices-row\" ng-class=\"{active: $select.isActive(this), disabled: $select.isDisabled(this)}\"><div class=\"option ui-select-choices-row-inner\" data-selectable=\"\"></div></div></div></div></div>");
	$templateCache.put("selectize/match.tpl.html","<div ng-hide=\"($select.open || $select.isEmpty())\" class=\"ui-select-match\" ng-transclude=\"\"></div>");
	$templateCache.put("selectize/select.tpl.html","<div class=\"ui-select-container selectize-control single\" ng-class=\"{\'open\': $select.open}\"><div class=\"selectize-input\" ng-class=\"{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}\" ng-click=\"$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()\"><div class=\"ui-select-match\"></div><input type=\"text\" autocomplete=\"false\" tabindex=\"-1\" class=\"ui-select-search ui-select-toggle\" ng-click=\"$select.toggle($event)\" placeholder=\"{{$select.placeholder}}\" ng-model=\"$select.search\" ng-hide=\"!$select.searchEnabled || ($select.selected && !$select.open)\" ng-disabled=\"$select.disabled\" aria-label=\"{{ $select.baseTitle }}\"></div><div class=\"ui-select-choices\"></div></div>");}]);

/***/ },
/* 172 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(173);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../css-loader/index.js!./select.css", function() {
				var newContent = require("!!./../../css-loader/index.js!./select.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 173 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, "/*!\n * ui-select\n * http://github.com/angular-ui/ui-select\n * Version: 0.14.6 - 2016-02-18T21:01:36.972Z\n * License: MIT\n */\n\n\n/* Style when highlighting a search. */\n.ui-select-highlight {\n  font-weight: bold;\n}\n\n.ui-select-offscreen {\n  clip: rect(0 0 0 0) !important;\n  width: 1px !important;\n  height: 1px !important;\n  border: 0 !important;\n  margin: 0 !important;\n  padding: 0 !important;\n  overflow: hidden !important;\n  position: absolute !important;\n  outline: 0 !important;\n  left: 0px !important;\n  top: 0px !important;\n}\n\n\n.ui-select-choices-row:hover {\n  background-color: #f5f5f5;\n}\n\n/* Select2 theme */\n\n/* Mark invalid Select2 */\n.ng-dirty.ng-invalid > a.select2-choice {\n    border-color: #D44950;\n}\n\n.select2-result-single {\n  padding-left: 0;\n}\n\n.select2-locked > .select2-search-choice-close{\n  display:none;\n}\n\n.select-locked > .ui-select-match-close{\n    display:none;\n}\n\nbody > .select2-container.open {\n  z-index: 9999; /* The z-index Select2 applies to the select2-drop */\n}\n\n/* Handle up direction Select2 */\n.ui-select-container[theme=\"select2\"].direction-up .ui-select-match {\n    border-radius: 4px; /* FIXME hardcoded value :-/ */\n    border-top-left-radius: 0;\n    border-top-right-radius: 0;\n}\n.ui-select-container[theme=\"select2\"].direction-up .ui-select-dropdown {\n    border-radius: 4px; /* FIXME hardcoded value :-/ */\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n\n    border-top-width: 1px;  /* FIXME hardcoded value :-/ */\n    border-top-style: solid;\n\n    box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.25);\n\n    margin-top: -4px; /* FIXME hardcoded value :-/ */\n}\n.ui-select-container[theme=\"select2\"].direction-up .ui-select-dropdown .select2-search {\n    margin-top: 4px; /* FIXME hardcoded value :-/ */\n}\n.ui-select-container[theme=\"select2\"].direction-up.select2-dropdown-open .ui-select-match {\n    border-bottom-color: #5897fb;\n}\n\n/* Selectize theme */\n\n/* Helper class to show styles when focus */\n.selectize-input.selectize-focus{\n  border-color: #007FBB !important;\n}\n\n/* Fix input width for Selectize theme */\n.selectize-control > .selectize-input > input {\n  width: 100%;\n}\n\n/* Fix dropdown width for Selectize theme */\n.selectize-control > .selectize-dropdown {\n  width: 100%;\n}\n\n/* Mark invalid Selectize */\n.ng-dirty.ng-invalid > div.selectize-input {\n    border-color: #D44950;\n}\n\n/* Handle up direction Selectize */\n.ui-select-container[theme=\"selectize\"].direction-up .ui-select-dropdown {\n    box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.25);\n\n    margin-top: -2px; /* FIXME hardcoded value :-/ */\n}\n\n/* Bootstrap theme */\n\n/* Helper class to show styles when focus */\n.btn-default-focus {\n  color: #333;\n  background-color: #EBEBEB;\n  border-color: #ADADAD;\n  text-decoration: none;\n  outline: 5px auto -webkit-focus-ring-color;\n  outline-offset: -2px;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 8px rgba(102, 175, 233, 0.6);\n}\n\n.ui-select-bootstrap .ui-select-toggle {\n  position: relative;\n}\n\n.ui-select-bootstrap .ui-select-toggle > .caret {\n  position: absolute;\n  height: 10px;\n  top: 50%;\n  right: 10px;\n  margin-top: -2px;\n}\n\n/* Fix Bootstrap dropdown position when inside a input-group */\n.input-group > .ui-select-bootstrap.dropdown {\n  /* Instead of relative */\n  position: static;\n}\n\n.input-group > .ui-select-bootstrap > input.ui-select-search.form-control {\n  border-radius: 4px; /* FIXME hardcoded value :-/ */\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.input-group > .ui-select-bootstrap > input.ui-select-search.form-control.direction-up {\n  border-radius: 4px !important; /* FIXME hardcoded value :-/ */\n  border-top-right-radius: 0 !important;\n  border-bottom-right-radius: 0 !important;\n}\n\n.ui-select-bootstrap > .ui-select-match > .btn{\n  /* Instead of center because of .btn */\n  text-align: left !important;\n}\n\n.ui-select-bootstrap > .ui-select-match > .caret {\n  position: absolute;\n  top: 45%;\n  right: 15px;\n}\n\n/* See Scrollable Menu with Bootstrap 3 http://stackoverflow.com/questions/19227496 */\n.ui-select-bootstrap > .ui-select-choices {\n  width: 100%;\n  height: auto;\n  max-height: 200px;\n  overflow-x: hidden;\n  margin-top: -1px;\n}\n\nbody > .ui-select-bootstrap.open {\n  z-index: 1000; /* Standard Bootstrap dropdown z-index */\n}\n\n.ui-select-multiple.ui-select-bootstrap {\n  height: auto;\n  padding: 3px 3px 0 3px;\n}\n\n.ui-select-multiple.ui-select-bootstrap input.ui-select-search {\n  background-color: transparent !important; /* To prevent double background when disabled */\n  border: none;\n  outline: none;\n  height: 1.666666em;\n  margin-bottom: 3px;\n}\n\n.ui-select-multiple.ui-select-bootstrap .ui-select-match .close {\n  font-size: 1.6em;\n  line-height: 0.75;\n}\n\n.ui-select-multiple.ui-select-bootstrap .ui-select-match-item {\n  outline: 0;\n  margin: 0 3px 3px 0;\n}\n\n.ui-select-multiple .ui-select-match-item {\n  position: relative;\n}\n\n.ui-select-multiple .ui-select-match-item.dropping-before:before {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  right: 100%;\n  height: 100%;\n  margin-right: 2px;\n  border-left: 1px solid #428bca;\n}\n\n.ui-select-multiple .ui-select-match-item.dropping-after:after {\n  content: \"\";\n  position: absolute;\n  top: 0;\n  left: 100%;\n  height: 100%;\n  margin-left: 2px;\n  border-right: 1px solid #428bca;\n}\n\n.ui-select-bootstrap .ui-select-choices-row>a {\n    display: block;\n    padding: 3px 20px;\n    clear: both;\n    font-weight: 400;\n    line-height: 1.42857143;\n    color: #333;\n    white-space: nowrap;\n}\n\n.ui-select-bootstrap .ui-select-choices-row>a:hover, .ui-select-bootstrap .ui-select-choices-row>a:focus {\n    text-decoration: none;\n    color: #262626;\n    background-color: #f5f5f5;\n}\n\n.ui-select-bootstrap .ui-select-choices-row.active>a {\n    color: #fff;\n    text-decoration: none;\n    outline: 0;\n    background-color: #428bca;\n}\n\n.ui-select-bootstrap .ui-select-choices-row.disabled>a,\n.ui-select-bootstrap .ui-select-choices-row.active.disabled>a {\n    color: #777;\n    cursor: not-allowed;\n    background-color: #fff;\n}\n\n/* fix hide/show angular animation */\n.ui-select-match.ng-hide-add,\n.ui-select-search.ng-hide-add {\n    display: none !important;\n}\n\n/* Mark invalid Bootstrap */\n.ui-select-bootstrap.ng-dirty.ng-invalid > button.btn.ui-select-match {\n    border-color: #D44950;\n}\n\n/* Handle up direction Bootstrap */\n.ui-select-container[theme=\"bootstrap\"].direction-up .ui-select-dropdown {\n    box-shadow: 0 -4px 8px rgba(0, 0, 0, 0.25);\n}\n", ""]);
	
	// exports


/***/ },
/* 174 */
/***/ function(module, exports) {

	module.exports = "<div class=\"field\" ng-class=\"{ 'has-error': select.ngModel.$invalid }\">\r\n\t<label ng-show=\"select.selection\" class=\"show-hide angular-animate\">\r\n\t\t{{::select.label}}\r\n\t</label>\r\n\t<ui-select ng-model=\"select.selection\" search-enabled=\"false\" theme=\"bootstrap\" ng-disabled=\"select.ngDisabled\">\r\n\t\t<ui-select-match placeholder=\"{{::select.label}}\">{{select.getDisplayName($select.selected)}}</ui-select-match>\r\n\t\t<ui-select-choices repeat=\"option in select.options\">\r\n\t\t\t{{select.getDisplayName(option)}}\r\n\t\t</ui-select-choices>\r\n\t</ui-select>\r\n\t<span class=\"error-string\" ng-if=\"select.inputValidator.error | isEmpty:false\">{{select.inputValidator.error}}</span>\r\n\t<rl-busy loading=\"select.loading\"></rl-busy>\r\n</div>"

/***/ },
/* 175 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var SignaturePad = __webpack_require__(13);
	exports.moduleName = 'rl.ui.components.signaturePad';
	exports.directiveName = 'rlSignaturePad';
	function signaturePad() {
	    'use strict';
	    return {
	        restrict: 'E',
	        require: 'ngModel',
	        template: "\n\t\t\t<canvas class=\"signature-pad\" ng-if=\"!ngDisabled\"></canvas>\n\t\t\t<img ng-src=\"{{ngModel.$viewValue}}\" ng-style=\"style\" ng-if=\"ngDisabled\" />\n\t\t",
	        scope: {
	            pad: '=?',
	            height: '=',
	            width: '=',
	            ngDisabled: '=',
	        },
	        link: function (scope, element, attrs, ngModel) {
	            scope.$watch('ngDisabled', function (disabled) {
	                scope.ngModel = ngModel;
	                if (disabled) {
	                    scope.style = {
	                        height: scope.height != null ? scope.height : 100,
	                        width: scope.width != null ? scope.width : 200,
	                    };
	                }
	                else {
	                    var canvas = element.find('.signature-pad').get(0);
	                    var options = {
	                        backgroundColor: 'rgb(255, 255, 255)',
	                    };
	                    scope.pad = new SignaturePad(canvas, options);
	                    canvas.height = scope.height != null ? scope.height : 100;
	                    canvas.width = scope.width != null ? scope.width : 200;
	                    scope.$watch(function () { return ngModel.$viewValue; }, function (value) {
	                        if (value != null) {
	                            scope.pad.fromDataURL(value);
	                        }
	                    });
	                    scope.$watch(function () { return scope.pad.toDataURL(); }, function (value) {
	                        if (value != null) {
	                            ngModel.$setViewValue(value);
	                        }
	                    });
	                }
	            });
	        },
	    };
	}
	exports.signaturePad = signaturePad;
	angular.module(exports.moduleName, [])
	    .directive(exports.directiveName, signaturePad);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lnbmF0dXJlUGFkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2lnbmF0dXJlUGFkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLElBQVksWUFBWSxXQUFNLGVBQWUsQ0FBQyxDQUFBO0FBRW5DLGtCQUFVLEdBQVcsK0JBQStCLENBQUM7QUFDckQscUJBQWEsR0FBVyxnQkFBZ0IsQ0FBQztBQVlwRDtJQUNDLFlBQVksQ0FBQztJQUNiLE1BQU0sQ0FBQztRQUNOLFFBQVEsRUFBRSxHQUFHO1FBQ2IsT0FBTyxFQUFFLFNBQVM7UUFDbEIsUUFBUSxFQUFFLHdLQUdUO1FBQ0QsS0FBSyxFQUFFO1lBQ04sR0FBRyxFQUFFLElBQUk7WUFDVCxNQUFNLEVBQUUsR0FBRztZQUNYLEtBQUssRUFBRSxHQUFHO1lBQ1YsVUFBVSxFQUFFLEdBQUc7U0FDZjtRQUNELElBQUksWUFBQyxLQUF5QixFQUMzQixPQUFpQyxFQUNqQyxLQUFVLEVBQ1YsT0FBbUM7WUFDckMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsVUFBQyxRQUFpQjtnQkFDNUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7Z0JBQ3hCLEVBQUUsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7b0JBQ2QsS0FBSyxDQUFDLEtBQUssR0FBRzt3QkFDYixNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU0sSUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxHQUFHO3dCQUNqRCxLQUFLLEVBQUUsS0FBSyxDQUFDLEtBQUssSUFBSSxJQUFJLEdBQUcsS0FBSyxDQUFDLEtBQUssR0FBRyxHQUFHO3FCQUM5QyxDQUFDO2dCQUNILENBQUM7Z0JBQUMsSUFBSSxDQUFDLENBQUM7b0JBQ1AsSUFBSSxNQUFNLEdBQXlDLE9BQU8sQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3pGLElBQUksT0FBTyxHQUFRO3dCQUNsQixlQUFlLEVBQUUsb0JBQW9CO3FCQUNyQyxDQUFDO29CQUVGLEtBQUssQ0FBQyxHQUFHLEdBQUcsSUFBSSxZQUFZLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxDQUFDO29CQUU5QyxNQUFNLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxNQUFNLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO29CQUMxRCxNQUFNLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLEdBQUcsR0FBRyxDQUFDO29CQUV2RCxLQUFLLENBQUMsTUFBTSxDQUFDLGNBQWdCLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLFVBQUMsS0FBYTt3QkFDeEUsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7NEJBQ25CLEtBQUssQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDO3dCQUM5QixDQUFDO29CQUNGLENBQUMsQ0FBQyxDQUFDO29CQUVILEtBQUssQ0FBQyxNQUFNLENBQUMsY0FBZ0IsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsVUFBQyxLQUFhO3dCQUMzRSxFQUFFLENBQUMsQ0FBQyxLQUFLLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQzs0QkFDbkIsT0FBTyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDOUIsQ0FBQztvQkFDRixDQUFDLENBQUMsQ0FBQztnQkFDSixDQUFDO1lBQ0YsQ0FBQyxDQUFDLENBQUM7UUFDSixDQUFDO0tBQ0QsQ0FBQztBQUNILENBQUM7QUFwRGUsb0JBQVksZUFvRDNCLENBQUE7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLFlBQVksQ0FBQyxDQUFDIn0=

/***/ },
/* 176 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __observable = typescript_angular_utilities_1.services.observable;
	var __parentChild = typescript_angular_utilities_1.services.parentChildBehavior;
	var card = __webpack_require__(177);
	exports.simpleCard = card;
	var list = __webpack_require__(179);
	exports.simpleCardList = list;
	exports.moduleName = 'rl.ui.components.simpleCardList';
	angular.module(exports.moduleName, [__observable.moduleName, __parentChild.moduleName])
	    .directive(list.directiveName, list.simpleCardList)
	    .controller(list.controllerName, list.SimpleCardListController)
	    .component(card.componentName, card.simpleCard)
	    .controller(card.controllerName, card.SimpleCardController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlQ2FyZExpc3QubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2ltcGxlQ2FyZExpc3QubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRW5DLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sWUFBWSxHQUFHLHVDQUFRLENBQUMsVUFBVSxDQUFDO0FBQzFDLElBQU8sYUFBYSxHQUFHLHVDQUFRLENBQUMsbUJBQW1CLENBQUM7QUFFcEQsSUFBWSxJQUFJLFdBQU0sY0FBYyxDQUFDLENBQUE7QUFJNUIsa0JBQVU7QUFIbkIsSUFBWSxJQUFJLFdBQU0sa0JBQWtCLENBQUMsQ0FBQTtBQUloQyxzQkFBYztBQUdaLGtCQUFVLEdBQVcsaUNBQWlDLENBQUM7QUFHbEUsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsWUFBWSxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDN0UsU0FBUyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQztLQUNsRCxVQUFVLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsd0JBQXdCLENBQUM7S0FDOUQsU0FBUyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLFVBQVUsQ0FBQztLQUM5QyxVQUFVLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQyJ9

/***/ },
/* 177 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	// /// <reference path='../../../typings/jquery/jquery.d.ts' />
	'use strict';
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __parentChild = typescript_angular_utilities_1.services.parentChildBehavior;
	exports.componentName = 'rlSimpleCard';
	exports.controllerName = 'SimpleCardController';
	var SimpleCardController = (function () {
	    function SimpleCardController($scope, parentChild) {
	        var _this = this;
	        this.$scope = $scope;
	        this.parentChild = parentChild;
	        this.showContent = false;
	        this.autosaveLink = {};
	        this.close = function () {
	            if (_this.showContent === false || _this.alwaysOpen) {
	                return true;
	            }
	            return _this.autosave();
	        };
	    }
	    SimpleCardController.prototype.$onInit = function () {
	        var _this = this;
	        if (this.canOpen == null) {
	            this.canOpen = true;
	        }
	        if (this.listController == null) {
	            this.listController = this.noList();
	        }
	        var behavior = {
	            autosave: this.autosave.bind(this),
	            close: this.close,
	            setAlwaysOpen: function (value) {
	                _this.alwaysOpen = value;
	            },
	        };
	        this.listController.registerCard(behavior);
	        this.parentChild.registerChildBehavior(this.childLink, behavior);
	        this.$scope.$watch(function () { return _this.alwaysOpen; }, function (value) {
	            if (value) {
	                _this.showContent = true;
	            }
	            else {
	                _this.close();
	            }
	        });
	    };
	    SimpleCardController.prototype.toggleContent = function () {
	        if (this.showContent) {
	            this.close();
	        }
	        else {
	            this.open();
	        }
	    };
	    SimpleCardController.prototype.open = function () {
	        if (this.canOpen && this.listController.openCard()) {
	            this.showContent = true;
	            this.onOpen();
	        }
	    };
	    SimpleCardController.prototype.autosave = function () {
	        var _this = this;
	        return this.parentChild.triggerChildBehavior(this.autosaveLink, function (behavior) {
	            var canClose = behavior.autosave();
	            if (canClose) {
	                _this.showContent = false;
	            }
	            return canClose;
	        });
	    };
	    SimpleCardController.prototype.noList = function () {
	        return {
	            openCard: function () {
	                return true;
	            },
	            registerCard: function (behavior) {
	                return null;
	            },
	        };
	    };
	    SimpleCardController.$inject = ['$scope', __parentChild.serviceName];
	    return SimpleCardController;
	}());
	exports.SimpleCardController = SimpleCardController;
	exports.simpleCard = {
	    transclude: {
	        'headerSlot': '?rlCardHeader',
	        'contentSlot': '?rlCardContent',
	        'footerSlot': '?rlCardFooter',
	    },
	    require: { listController: '?^^rlSimpleCardList' },
	    template: __webpack_require__(178),
	    controller: exports.controllerName,
	    controllerAs: 'card',
	    bindings: {
	        onOpen: '&',
	        canOpen: '=?',
	        alwaysOpen: '=?',
	        childLink: '=?',
	        save: '&',
	        saveWhenInvalid: '<?',
	        cardType: '@',
	    },
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlQ2FyZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNpbXBsZUNhcmQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMERBQTBEO0FBQzFELCtEQUErRDtBQUUvRCxZQUFZLENBQUM7QUFJYiw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUN4RCxJQUFPLGFBQWEsR0FBRyx1Q0FBUSxDQUFDLG1CQUFtQixDQUFDO0FBTXpDLHFCQUFhLEdBQVcsY0FBYyxDQUFDO0FBQ3ZDLHNCQUFjLEdBQVcsc0JBQXNCLENBQUM7QUFxQjNEO0lBZUMsOEJBQW9CLE1BQXNCLEVBQzlCLFdBQXNEO1FBaEJuRSxpQkE2RkM7UUE5RW9CLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQzlCLGdCQUFXLEdBQVgsV0FBVyxDQUEyQztRQU5sRSxnQkFBVyxHQUFZLEtBQUssQ0FBQztRQUM3QixpQkFBWSxHQUFpRCxFQUFFLENBQUM7UUFvRGhFLFVBQUssR0FBb0I7WUFDeEIsRUFBRSxDQUFDLENBQUMsS0FBSSxDQUFDLFdBQVcsS0FBSyxLQUFLLElBQUksS0FBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUM7Z0JBQ25ELE1BQU0sQ0FBQyxJQUFJLENBQUM7WUFDYixDQUFDO1lBRUQsTUFBTSxDQUFDLEtBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUN4QixDQUFDLENBQUE7SUFyRG9FLENBQUM7SUFFdEUsc0NBQU8sR0FBUDtRQUFBLGlCQTRCQztRQTNCQSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7UUFDckIsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLElBQUksSUFBSSxDQUFDLENBQUMsQ0FBQztZQUNqQyxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztRQUNyQyxDQUFDO1FB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

/***/ },
/* 178 */
/***/ function(module, exports) {

	module.exports = "<div class=\"card col-xs-12 {{card.cardType}}\">\r\n\t<div class=\"header row\" ng-class=\"{ 'active': card.canOpen && !card.alwaysOpen, 'error': cardForm.$invalid }\" ng-click=\"card.toggleContent()\">\r\n\t\t<div ng-transclude=\"headerSlot\"></div>\r\n\t\t<div class=\"clearfix\"></div>\r\n\t</div>\r\n\r\n\t<ng-form name=\"cardForm\" rl-autosave=\"card.autosaveLink\" save=\"card.save()\" save-when-invalid=\"card.saveWhenInvalid\">\r\n\t\t<div ng-show=\"card.showContent || card.alwaysOpen\">\r\n\t\t\t<div class=\"body row\">\r\n\t\t\t\t<div ng-transclude=\"contentSlot\"></div>\r\n\t\t\t\t<div class=\"clearfix\"></div>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"footer row\">\r\n\t\t\t\t<div ng-transclude=\"footerSlot\"></div>\r\n\t\t\t\t<div class=\"clearfix\"></div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</ng-form>\r\n</div>"

/***/ },
/* 179 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __observable = typescript_angular_utilities_1.services.observable;
	exports.directiveName = 'rlSimpleCardList';
	exports.controllerName = 'SimpleCardListController';
	var SimpleCardListController = (function () {
	    function SimpleCardListController($scope, $attrs, $parse, observableFactory) {
	        var _this = this;
	        this.observable = observableFactory.getInstance();
	        $scope.$watch(function () { return $parse($attrs.alwaysOpen)($scope); }, function (value) {
	            _this.alwaysOpen = value;
	            _this.observable.fire('alwaysOpen', value);
	        });
	    }
	    SimpleCardListController.prototype.registerCard = function (behavior) {
	        behavior.setAlwaysOpen(this.alwaysOpen);
	        var unregisterFunctions = [];
	        unregisterFunctions.push(this.observable.register(behavior.close, 'close'));
	        unregisterFunctions.push(this.observable.register(behavior.setAlwaysOpen, 'alwaysOpen'));
	        return function () {
	            _.each(unregisterFunctions, function (unregister) {
	                unregister();
	            });
	        };
	    };
	    SimpleCardListController.prototype.openCard = function () {
	        return _.every(this.observable.fire('close'));
	    };
	    SimpleCardListController.$inject = ['$scope', '$attrs', '$parse', __observable.factoryName];
	    return SimpleCardListController;
	}());
	exports.SimpleCardListController = SimpleCardListController;
	function simpleCardList() {
	    'use strict';
	    return {
	        restrict: 'AE',
	        controller: exports.controllerName,
	    };
	}
	exports.simpleCardList = simpleCardList;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2ltcGxlQ2FyZExpc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzaW1wbGVDYXJkTGlzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFHYixJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1Qiw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUN4RCxJQUFPLFlBQVksR0FBRyx1Q0FBUSxDQUFDLFVBQVUsQ0FBQztBQUkvQixxQkFBYSxHQUFXLGtCQUFrQixDQUFDO0FBQzNDLHNCQUFjLEdBQVcsMEJBQTBCLENBQUM7QUFXL0Q7SUFLQyxrQ0FBWSxNQUFzQixFQUMvQixNQUFpQyxFQUNqQyxNQUE2QixFQUM3QixpQkFBeUQ7UUFSN0QsaUJBbUNDO1FBMUJDLElBQUksQ0FBQyxVQUFVLEdBQUcsaUJBQWlCLENBQUMsV0FBVyxFQUFFLENBQUM7UUFFbEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFpQixNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFDLEtBQWM7WUFDMUYsS0FBSSxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUM7WUFDeEIsS0FBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQzNDLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVELCtDQUFZLEdBQVosVUFBYSxRQUE2QjtRQUN6QyxRQUFRLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUV4QyxJQUFJLG1CQUFtQixHQUF1QyxFQUFFLENBQUM7UUFFakUsbUJBQW1CLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUM1RSxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLGFBQWEsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBRXpGLE1BQU0sQ0FBQztZQUNOLENBQUMsQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEVBQUUsVUFBQyxVQUE0QztnQkFDeEUsVUFBVSxFQUFFLENBQUM7WUFDZCxDQUFDLENBQUMsQ0FBQztRQUNKLENBQUMsQ0FBQztJQUNILENBQUM7SUFFRCwyQ0FBUSxHQUFSO1FBQ0MsTUFBTSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQVksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBOUJNLGdDQUFPLEdBQWEsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRSxZQUFZLENBQUMsV0FBVyxDQUFDLENBQUM7SUErQnJGLCtCQUFDO0FBQUQsQ0FBQyxBQW5DRCxJQW1DQztBQW5DWSxnQ0FBd0IsMkJBbUNwQyxDQUFBO0FBRUQ7SUFDQyxZQUFZLENBQUM7SUFDYixNQUFNLENBQUM7UUFDTixRQUFRLEVBQUUsSUFBSTtRQUNkLFVBQVUsRUFBRSxzQkFBYztLQUMxQixDQUFDO0FBQ0gsQ0FBQztBQU5lLHNCQUFjLGlCQU03QixDQUFBIn0=

/***/ },
/* 180 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/bootstrap-touchspin/bootstrap-touchspin.d.ts' />
	// /// <reference path='../../../typings/jquery/jquery.d.ts' />
	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	__webpack_require__(181);
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __string = typescript_angular_utilities_1.services.string;
	var __number = typescript_angular_utilities_1.services.number;
	var input_1 = __webpack_require__(115);
	var componentValidator_service_1 = __webpack_require__(116);
	exports.moduleName = 'rl.ui.components.spinner';
	exports.componentName = 'rlSpinner';
	exports.controllerName = 'SpinnerController';
	exports.defaultMaxValue = 100000000000000000000;
	var SpinnerController = (function (_super) {
	    __extends(SpinnerController, _super);
	    function SpinnerController($scope, $attrs, componentValidatorFactory, $element, $timeout) {
	        _super.call(this, $scope, $attrs, componentValidatorFactory);
	        this.$element = $element;
	        this.$timeout = $timeout;
	        this.inputType = 'spinner';
	    }
	    SpinnerController.prototype.$postLink = function () {
	        var _this = this;
	        var unbindWatches;
	        this.$scope.$watch('spinner.ngDisabled', function (disabled) {
	            if (disabled) {
	                if (_.isFunction(unbindWatches)) {
	                    unbindWatches();
	                }
	            }
	            else {
	                // Initialize the spinner after $timeout to give angular a chance initialize ngModel
	                _this.$timeout(function () {
	                    var touchspin = _this.$element.find('input.spinner').TouchSpin({
	                        min: (_this.min != null ? _this.min : 0),
	                        max: (_this.max != null ? _this.max : exports.defaultMaxValue),
	                        step: _this.step,
	                        prefix: _this.prefix,
	                        postfix: _this.postfix,
	                        decimals: _this.decimals,
	                        initval: _this.ngModel.$viewValue,
	                        forcestepdivisibility: _this.roundToStep ? 'round' : 'none',
	                    });
	                    touchspin.on('change', function () {
	                        _this.$scope.$apply(function () {
	                            var spinValue = touchspin.val();
	                            _this.ngModel.$setViewValue(__string.stringUtility.toNumber(spinValue));
	                        });
	                    });
	                    var unbindViewWatch = _this.$scope.$watch(function () {
	                        return _this.ngModel.$viewValue;
	                    }, function (newValue) {
	                        touchspin.val(newValue != null ? newValue.toString() : '');
	                    });
	                    var unbindModelWatch = _this.$scope.$watch(function () {
	                        return _this.ngModel.$modelValue;
	                    }, function (newModel) {
	                        _this.ngModel.$modelValue = _this.round(newModel);
	                    });
	                    unbindWatches = function () {
	                        unbindViewWatch();
	                        unbindModelWatch();
	                    };
	                });
	            }
	        });
	    };
	    SpinnerController.prototype.round = function (num) {
	        if (num != null && this.roundToStep) {
	            num = __number.numberUtility.roundToStep(num, this.step);
	            num = __number.numberUtility.preciseRound(num, this.decimals);
	        }
	        return num;
	    };
	    SpinnerController.$inject = ['$scope', '$attrs', componentValidator_service_1.factoryName, '$element', '$timeout'];
	    return SpinnerController;
	}(input_1.InputController));
	exports.SpinnerController = SpinnerController;
	var spinner = input_1.buildInput({
	    template: __webpack_require__(185),
	    controller: exports.controllerName,
	    controllerAs: 'spinner',
	    bindings: {
	        min: '<?',
	        max: '<?',
	        step: '<?',
	        decimals: '<?',
	        prefix: '@',
	        postfix: '@',
	        roundToStep: '<?',
	        ngDisabled: '<?',
	        spinnerId: '@',
	    },
	});
	angular.module(exports.moduleName, [input_1.moduleName])
	    .component(exports.componentName, spinner)
	    .controller(exports.controllerName, SpinnerController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3Bpbm5lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNwaW5uZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEseUZBQXlGO0FBQ3pGLCtEQUErRDtBQUMvRCwwREFBMEQ7QUFFMUQsWUFBWSxDQUFDOzs7Ozs7QUFFYixRQUFPLDhDQUE4QyxDQUFDLENBQUE7QUFHdEQsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFFeEQsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFDbEMsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFHbEMsc0JBQXlGLGdCQUFnQixDQUFDLENBQUE7QUFDMUcsMkNBQXlGLDhEQUE4RCxDQUFDLENBQUE7QUFLN0ksa0JBQVUsR0FBVywwQkFBMEIsQ0FBQztBQUNoRCxxQkFBYSxHQUFXLFdBQVcsQ0FBQztBQUNwQyxzQkFBYyxHQUFXLG1CQUFtQixDQUFDO0FBRTdDLHVCQUFlLEdBQVcscUJBQXFCLENBQUM7QUFtQjNEO0lBQXVDLHFDQUFlO0lBWXJELDJCQUFZLE1BQXNCLEVBQzlCLE1BQXdCLEVBQ3hCLHlCQUFxRCxFQUM3QyxRQUFrQyxFQUNsQyxRQUFpQztRQUM1QyxrQkFBTSxNQUFNLEVBQUUsTUFBTSxFQUFFLHlCQUF5QixDQUFDLENBQUM7UUFGdEMsYUFBUSxHQUFSLFFBQVEsQ0FBMEI7UUFDbEMsYUFBUSxHQUFSLFFBQVEsQ0FBeUI7UUFHNUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDNUIsQ0FBQztJQUVELHFDQUFTLEdBQVQ7UUFBQSxpQkErQ0M7UUE5Q0EsSUFBSSxhQUF1QixDQUFDO1FBQzVCLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLG9CQUFvQixFQUFFLFVBQUMsUUFBaUI7WUFDMUQsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztnQkFDZCxF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

/***/ },
/* 181 */
/***/ function(module, exports, __webpack_require__) {

	jQuery = __webpack_require__(12);
	
	__webpack_require__(182);
	__webpack_require__(184);

/***/ },
/* 182 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(183);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../node_modules/css-loader/index.js!./jquery.bootstrap-touchspin.css", function() {
				var newContent = require("!!./../../node_modules/css-loader/index.js!./jquery.bootstrap-touchspin.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 183 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, "/*\r\n *  Bootstrap TouchSpin - v3.0.1\r\n *  A mobile and touch friendly input spinner component for Bootstrap 3.\r\n *  http://www.virtuosoft.eu/code/bootstrap-touchspin/\r\n *\r\n *  Made by Istvn Ujj-Mszros\r\n *  Under Apache License v2.0 License\r\n */\r\n\r\n.bootstrap-touchspin .input-group-btn-vertical {\r\n  position: relative;\r\n  white-space: nowrap;\r\n  width: 1%;\r\n  vertical-align: middle;\r\n  display: table-cell;\r\n}\r\n\r\n.bootstrap-touchspin .input-group-btn-vertical > .btn {\r\n  display: block;\r\n  float: none;\r\n  width: 100%;\r\n  max-width: 100%;\r\n  padding: 8px 10px;\r\n  margin-left: -1px;\r\n  position: relative;\r\n}\r\n\r\n.bootstrap-touchspin .input-group-btn-vertical .bootstrap-touchspin-up {\r\n  border-radius: 0;\r\n  border-top-right-radius: 4px;\r\n}\r\n\r\n.bootstrap-touchspin .input-group-btn-vertical .bootstrap-touchspin-down {\r\n  margin-top: -2px;\r\n  border-radius: 0;\r\n  border-bottom-right-radius: 4px;\r\n}\r\n\r\n.bootstrap-touchspin .input-group-btn-vertical i {\r\n  position: absolute;\r\n  top: 3px;\r\n  left: 5px;\r\n  font-size: 9px;\r\n  font-weight: normal;\r\n}\r\n", ""]);
	
	// exports


/***/ },
/* 184 */
/***/ function(module, exports) {

	/*
	 *  Bootstrap TouchSpin - v3.0.1
	 *  A mobile and touch friendly input spinner component for Bootstrap 3.
	 *  http://www.virtuosoft.eu/code/bootstrap-touchspin/
	 *
	 *  Made by Istvn Ujj-Mszros
	 *  Under Apache License v2.0 License
	 */
	(function($) {
	  'use strict';
	
	  var _currentSpinnerId = 0;
	
	  function _scopedEventName(name, id) {
	    return name + '.touchspin_' + id;
	  }
	
	  function _scopeEventNames(names, id) {
	    return $.map(names, function(name) {
	      return _scopedEventName(name, id);
	    });
	  }
	
	  $.fn.TouchSpin = function(options) {
	
	    if (options === 'destroy') {
	      this.each(function() {
	        var originalinput = $(this),
	            originalinput_data = originalinput.data();
	        $(document).off(_scopeEventNames([
	          'mouseup',
	          'touchend',
	          'touchcancel',
	          'mousemove',
	          'touchmove',
	          'scroll',
	          'scrollstart'], originalinput_data.spinnerid).join(' '));
	      });
	      return;
	    }
	
	    var defaults = {
	      min: 0,
	      max: 100,
	      initval: '',
	      step: 1,
	      decimals: 0,
	      stepinterval: 100,
	      forcestepdivisibility: 'round', // none | floor | round | ceil
	      stepintervaldelay: 500,
	      verticalbuttons: false,
	      verticalupclass: 'glyphicon glyphicon-chevron-up',
	      verticaldownclass: 'glyphicon glyphicon-chevron-down',
	      prefix: '',
	      postfix: '',
	      prefix_extraclass: '',
	      postfix_extraclass: '',
	      booster: true,
	      boostat: 10,
	      maxboostedstep: false,
	      mousewheel: true,
	      buttondown_class: 'btn btn-default',
	      buttonup_class: 'btn btn-default',
		  buttondown_txt: '-',
		  buttonup_txt: '+'
	    };
	
	    var attributeMap = {
	      min: 'min',
	      max: 'max',
	      initval: 'init-val',
	      step: 'step',
	      decimals: 'decimals',
	      stepinterval: 'step-interval',
	      verticalbuttons: 'vertical-buttons',
	      verticalupclass: 'vertical-up-class',
	      verticaldownclass: 'vertical-down-class',
	      forcestepdivisibility: 'force-step-divisibility',
	      stepintervaldelay: 'step-interval-delay',
	      prefix: 'prefix',
	      postfix: 'postfix',
	      prefix_extraclass: 'prefix-extra-class',
	      postfix_extraclass: 'postfix-extra-class',
	      booster: 'booster',
	      boostat: 'boostat',
	      maxboostedstep: 'max-boosted-step',
	      mousewheel: 'mouse-wheel',
	      buttondown_class: 'button-down-class',
	      buttonup_class: 'button-up-class',
		  buttondown_txt: 'button-down-txt',
		  buttonup_txt: 'button-up-txt'
	    };
	
	    return this.each(function() {
	
	      var settings,
	          originalinput = $(this),
	          originalinput_data = originalinput.data(),
	          container,
	          elements,
	          value,
	          downSpinTimer,
	          upSpinTimer,
	          downDelayTimeout,
	          upDelayTimeout,
	          spincount = 0,
	          spinning = false;
	
	      init();
	
	
	      function init() {
	        if (originalinput.data('alreadyinitialized')) {
	          return;
	        }
	
	        originalinput.data('alreadyinitialized', true);
	        _currentSpinnerId += 1;
	        originalinput.data('spinnerid', _currentSpinnerId);
	
	
	        if (!originalinput.is('input')) {
	          console.log('Must be an input.');
	          return;
	        }
	
	        _initSettings();
	        _setInitval();
	        _checkValue();
	        _buildHtml();
	        _initElements();
	        _hideEmptyPrefixPostfix();
	        _bindEvents();
	        _bindEventsInterface();
	        elements.input.css('display', 'block');
	      }
	
	      function _setInitval() {
	        if (settings.initval !== '' && originalinput.val() === '') {
	          originalinput.val(settings.initval);
	        }
	      }
	
	      function changeSettings(newsettings) {
	        _updateSettings(newsettings);
	        _checkValue();
	
	        var value = elements.input.val();
	
	        if (value !== '') {
	          value = Number(elements.input.val());
	          elements.input.val(value.toFixed(settings.decimals));
	        }
	      }
	
	      function _initSettings() {
	        settings = $.extend({}, defaults, originalinput_data, _parseAttributes(), options);
	      }
	
	      function _parseAttributes() {
	        var data = {};
	        $.each(attributeMap, function(key, value) {
	          var attrName = 'bts-' + value + '';
	          if (originalinput.is('[data-' + attrName + ']')) {
	            data[key] = originalinput.data(attrName);
	          }
	        });
	        return data;
	      }
	
	      function _updateSettings(newsettings) {
	        settings = $.extend({}, settings, newsettings);
	      }
	
	      function _buildHtml() {
	        var initval = originalinput.val(),
	            parentelement = originalinput.parent();
	
	        if (initval !== '') {
	          initval = Number(initval).toFixed(settings.decimals);
	        }
	
	        originalinput.data('initvalue', initval).val(initval);
	        originalinput.addClass('form-control');
	
	        if (parentelement.hasClass('input-group')) {
	          _advanceInputGroup(parentelement);
	        }
	        else {
	          _buildInputGroup();
	        }
	      }
	
	      function _advanceInputGroup(parentelement) {
	        parentelement.addClass('bootstrap-touchspin');
	
	        var prev = originalinput.prev(),
	            next = originalinput.next();
	
	        var downhtml,
	            uphtml,
	            prefixhtml = '<span class="input-group-addon bootstrap-touchspin-prefix">' + settings.prefix + '</span>',
	            postfixhtml = '<span class="input-group-addon bootstrap-touchspin-postfix">' + settings.postfix + '</span>';
	
	        if (prev.hasClass('input-group-btn')) {
	          downhtml = '<button class="' + settings.buttondown_class + ' bootstrap-touchspin-down" type="button">' + settings.buttondown_txt + '</button>';
	          prev.append(downhtml);
	        }
	        else {
	          downhtml = '<span class="input-group-btn"><button class="' + settings.buttondown_class + ' bootstrap-touchspin-down" type="button">' + settings.buttondown_txt + '</button></span>';
	          $(downhtml).insertBefore(originalinput);
	        }
	
	        if (next.hasClass('input-group-btn')) {
	          uphtml = '<button class="' + settings.buttonup_class + ' bootstrap-touchspin-up" type="button">' + settings.buttonup_txt + '</button>';
	          next.prepend(uphtml);
	        }
	        else {
	          uphtml = '<span class="input-group-btn"><button class="' + settings.buttonup_class + ' bootstrap-touchspin-up" type="button">' + settings.buttonup_txt + '</button></span>';
	          $(uphtml).insertAfter(originalinput);
	        }
	
	        $(prefixhtml).insertBefore(originalinput);
	        $(postfixhtml).insertAfter(originalinput);
	
	        container = parentelement;
	      }
	
	      function _buildInputGroup() {
	        var html;
	
	        if (settings.verticalbuttons) {
	          html = '<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">' + settings.prefix + '</span><span class="input-group-addon bootstrap-touchspin-postfix">' + settings.postfix + '</span><span class="input-group-btn-vertical"><button class="' + settings.buttondown_class + ' bootstrap-touchspin-up" type="button"><i class="' + settings.verticalupclass + '"></i></button><button class="' + settings.buttonup_class + ' bootstrap-touchspin-down" type="button"><i class="' + settings.verticaldownclass + '"></i></button></span></div>';
	        }
	        else {
	          html = '<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="' + settings.buttondown_class + ' bootstrap-touchspin-down" type="button">' + settings.buttondown_txt + '</button></span><span class="input-group-addon bootstrap-touchspin-prefix">' + settings.prefix + '</span><span class="input-group-addon bootstrap-touchspin-postfix">' + settings.postfix + '</span><span class="input-group-btn"><button class="' + settings.buttonup_class + ' bootstrap-touchspin-up" type="button">' + settings.buttonup_txt + '</button></span></div>';
	        }
	
	        container = $(html).insertBefore(originalinput);
	
	        $('.bootstrap-touchspin-prefix', container).after(originalinput);
	
	        if (originalinput.hasClass('input-sm')) {
	          container.addClass('input-group-sm');
	        }
	        else if (originalinput.hasClass('input-lg')) {
	          container.addClass('input-group-lg');
	        }
	      }
	
	      function _initElements() {
	        elements = {
	          down: $('.bootstrap-touchspin-down', container),
	          up: $('.bootstrap-touchspin-up', container),
	          input: $('input', container),
	          prefix: $('.bootstrap-touchspin-prefix', container).addClass(settings.prefix_extraclass),
	          postfix: $('.bootstrap-touchspin-postfix', container).addClass(settings.postfix_extraclass)
	        };
	      }
	
	      function _hideEmptyPrefixPostfix() {
	        if (settings.prefix === '') {
	          elements.prefix.hide();
	        }
	
	        if (settings.postfix === '') {
	          elements.postfix.hide();
	        }
	      }
	
	      function _bindEvents() {
	        originalinput.on('keydown', function(ev) {
	          var code = ev.keyCode || ev.which;
	
	          if (code === 38) {
	            if (spinning !== 'up') {
	              upOnce();
	              startUpSpin();
	            }
	            ev.preventDefault();
	          }
	          else if (code === 40) {
	            if (spinning !== 'down') {
	              downOnce();
	              startDownSpin();
	            }
	            ev.preventDefault();
	          }
	        });
	
	        originalinput.on('keyup', function(ev) {
	          var code = ev.keyCode || ev.which;
	
	          if (code === 38) {
	            stopSpin();
	          }
	          else if (code === 40) {
	            stopSpin();
	          }
	        });
	
	        originalinput.on('blur', function() {
	          _checkValue();
	        });
	
	        elements.down.on('keydown', function(ev) {
	          var code = ev.keyCode || ev.which;
	
	          if (code === 32 || code === 13) {
	            if (spinning !== 'down') {
	              downOnce();
	              startDownSpin();
	            }
	            ev.preventDefault();
	          }
	        });
	
	        elements.down.on('keyup', function(ev) {
	          var code = ev.keyCode || ev.which;
	
	          if (code === 32 || code === 13) {
	            stopSpin();
	          }
	        });
	
	        elements.up.on('keydown', function(ev) {
	          var code = ev.keyCode || ev.which;
	
	          if (code === 32 || code === 13) {
	            if (spinning !== 'up') {
	              upOnce();
	              startUpSpin();
	            }
	            ev.preventDefault();
	          }
	        });
	
	        elements.up.on('keyup', function(ev) {
	          var code = ev.keyCode || ev.which;
	
	          if (code === 32 || code === 13) {
	            stopSpin();
	          }
	        });
	
	        elements.down.on('mousedown.touchspin', function(ev) {
	          elements.down.off('touchstart.touchspin');  // android 4 workaround
	
	          if (originalinput.is(':disabled')) {
	            return;
	          }
	
	          downOnce();
	          startDownSpin();
	
	          ev.preventDefault();
	          ev.stopPropagation();
	        });
	
	        elements.down.on('touchstart.touchspin', function(ev) {
	          elements.down.off('mousedown.touchspin');  // android 4 workaround
	
	          if (originalinput.is(':disabled')) {
	            return;
	          }
	
	          downOnce();
	          startDownSpin();
	
	          ev.preventDefault();
	          ev.stopPropagation();
	        });
	
	        elements.up.on('mousedown.touchspin', function(ev) {
	          elements.up.off('touchstart.touchspin');  // android 4 workaround
	
	          if (originalinput.is(':disabled')) {
	            return;
	          }
	
	          upOnce();
	          startUpSpin();
	
	          ev.preventDefault();
	          ev.stopPropagation();
	        });
	
	        elements.up.on('touchstart.touchspin', function(ev) {
	          elements.up.off('mousedown.touchspin');  // android 4 workaround
	
	          if (originalinput.is(':disabled')) {
	            return;
	          }
	
	          upOnce();
	          startUpSpin();
	
	          ev.preventDefault();
	          ev.stopPropagation();
	        });
	
	        elements.up.on('mouseout touchleave touchend touchcancel', function(ev) {
	          if (!spinning) {
	            return;
	          }
	
	          ev.stopPropagation();
	          stopSpin();
	        });
	
	        elements.down.on('mouseout touchleave touchend touchcancel', function(ev) {
	          if (!spinning) {
	            return;
	          }
	
	          ev.stopPropagation();
	          stopSpin();
	        });
	
	        elements.down.on('mousemove touchmove', function(ev) {
	          if (!spinning) {
	            return;
	          }
	
	          ev.stopPropagation();
	          ev.preventDefault();
	        });
	
	        elements.up.on('mousemove touchmove', function(ev) {
	          if (!spinning) {
	            return;
	          }
	
	          ev.stopPropagation();
	          ev.preventDefault();
	        });
	
	        $(document).on(_scopeEventNames(['mouseup', 'touchend', 'touchcancel'], _currentSpinnerId).join(' '), function(ev) {
	          if (!spinning) {
	            return;
	          }
	
	          ev.preventDefault();
	          stopSpin();
	        });
	
	        $(document).on(_scopeEventNames(['mousemove', 'touchmove', 'scroll', 'scrollstart'], _currentSpinnerId).join(' '), function(ev) {
	          if (!spinning) {
	            return;
	          }
	
	          ev.preventDefault();
	          stopSpin();
	        });
	
	        originalinput.on('mousewheel DOMMouseScroll', function(ev) {
	          if (!settings.mousewheel || !originalinput.is(':focus')) {
	            return;
	          }
	
	          var delta = ev.originalEvent.wheelDelta || -ev.originalEvent.deltaY || -ev.originalEvent.detail;
	
	          ev.stopPropagation();
	          ev.preventDefault();
	
	          if (delta < 0) {
	            downOnce();
	          }
	          else {
	            upOnce();
	          }
	        });
	      }
	
	      function _bindEventsInterface() {
	        originalinput.on('touchspin.uponce', function() {
	          stopSpin();
	          upOnce();
	        });
	
	        originalinput.on('touchspin.downonce', function() {
	          stopSpin();
	          downOnce();
	        });
	
	        originalinput.on('touchspin.startupspin', function() {
	          startUpSpin();
	        });
	
	        originalinput.on('touchspin.startdownspin', function() {
	          startDownSpin();
	        });
	
	        originalinput.on('touchspin.stopspin', function() {
	          stopSpin();
	        });
	
	        originalinput.on('touchspin.updatesettings', function(e, newsettings) {
	          changeSettings(newsettings);
	        });
	      }
	
	      function _forcestepdivisibility(value) {
	        switch (settings.forcestepdivisibility) {
	          case 'round':
	            return (Math.round(value / settings.step) * settings.step).toFixed(settings.decimals);
	          case 'floor':
	            return (Math.floor(value / settings.step) * settings.step).toFixed(settings.decimals);
	          case 'ceil':
	            return (Math.ceil(value / settings.step) * settings.step).toFixed(settings.decimals);
	          default:
	            return value;
	        }
	      }
	
	      function _checkValue() {
	        var val, parsedval, returnval;
	
	        val = originalinput.val();
	
	        if (val === '') {
	          return;
	        }
	
	        if (settings.decimals > 0 && val === '.') {
	          return;
	        }
	
	        parsedval = parseFloat(val);
	
	        if (isNaN(parsedval)) {
	          parsedval = 0;
	        }
	
	        returnval = parsedval;
	
	        if (parsedval.toString() !== val) {
	          returnval = parsedval;
	        }
	
	        if (parsedval < settings.min) {
	          returnval = settings.min;
	        }
	
	        if (parsedval > settings.max) {
	          returnval = settings.max;
	        }
	
	        returnval = _forcestepdivisibility(returnval);
	
	        if (Number(val).toString() !== returnval.toString()) {
	          originalinput.val(returnval);
	          originalinput.trigger('change');
	        }
	      }
	
	      function _getBoostedStep() {
	        if (!settings.booster) {
	          return settings.step;
	        }
	        else {
	          var boosted = Math.pow(2, Math.floor(spincount / settings.boostat)) * settings.step;
	
	          if (settings.maxboostedstep) {
	            if (boosted > settings.maxboostedstep) {
	              boosted = settings.maxboostedstep;
	              value = Math.round((value / boosted)) * boosted;
	            }
	          }
	
	          return Math.max(settings.step, boosted);
	        }
	      }
	
	      function upOnce() {
	        _checkValue();
	
	        value = parseFloat(elements.input.val());
	        if (isNaN(value)) {
	          value = 0;
	        }
	
	        var initvalue = value,
	            boostedstep = _getBoostedStep();
	
	        value = value + boostedstep;
	
	        if (value > settings.max) {
	          value = settings.max;
	          originalinput.trigger('touchspin.on.max');
	          stopSpin();
	        }
	
	        elements.input.val(Number(value).toFixed(settings.decimals));
	
	        if (initvalue !== value) {
	          originalinput.trigger('change');
	        }
	      }
	
	      function downOnce() {
	        _checkValue();
	
	        value = parseFloat(elements.input.val());
	        if (isNaN(value)) {
	          value = 0;
	        }
	
	        var initvalue = value,
	            boostedstep = _getBoostedStep();
	
	        value = value - boostedstep;
	
	        if (value < settings.min) {
	          value = settings.min;
	          originalinput.trigger('touchspin.on.min');
	          stopSpin();
	        }
	
	        elements.input.val(value.toFixed(settings.decimals));
	
	        if (initvalue !== value) {
	          originalinput.trigger('change');
	        }
	      }
	
	      function startDownSpin() {
	        stopSpin();
	
	        spincount = 0;
	        spinning = 'down';
	
	        originalinput.trigger('touchspin.on.startspin');
	        originalinput.trigger('touchspin.on.startdownspin');
	
	        downDelayTimeout = setTimeout(function() {
	          downSpinTimer = setInterval(function() {
	            spincount++;
	            downOnce();
	          }, settings.stepinterval);
	        }, settings.stepintervaldelay);
	      }
	
	      function startUpSpin() {
	        stopSpin();
	
	        spincount = 0;
	        spinning = 'up';
	
	        originalinput.trigger('touchspin.on.startspin');
	        originalinput.trigger('touchspin.on.startupspin');
	
	        upDelayTimeout = setTimeout(function() {
	          upSpinTimer = setInterval(function() {
	            spincount++;
	            upOnce();
	          }, settings.stepinterval);
	        }, settings.stepintervaldelay);
	      }
	
	      function stopSpin() {
	        clearTimeout(downDelayTimeout);
	        clearTimeout(upDelayTimeout);
	        clearInterval(downSpinTimer);
	        clearInterval(upSpinTimer);
	
	        switch (spinning) {
	          case 'up':
	            originalinput.trigger('touchspin.on.stopupspin');
	            originalinput.trigger('touchspin.on.stopspin');
	            break;
	          case 'down':
	            originalinput.trigger('touchspin.on.stopdownspin');
	            originalinput.trigger('touchspin.on.stopspin');
	            break;
	        }
	
	        spincount = 0;
	        spinning = false;
	      }
	
	    });
	
	  };
	
	})(jQuery);


/***/ },
/* 185 */
/***/ function(module, exports) {

	module.exports = "<rl-generic-container selector=\"spinner.ngDisabled\" class=\"spinner-container\">\r\n\t<template default>\r\n\t\t<div class=\"field\" ng-class=\"{ 'error': spinner.ngModel.$invalid }\">\r\n\t\t\t<input name=\"{{::spinner.name}}\" class=\"spinner\" id=\"{{::spinner.spinnerId}}\" type=\"text\" />\r\n\t\t\t<span class=\"error-string\" ng-if=\"spinner.inputValidator.error | isEmpty:false\">{{spinner.inputValidator.error}}</span>\r\n\t\t</div>\r\n\t</template>\r\n\t<template when-selector=\"true\">\r\n\t\t<div class=\"input-group field\" ng-if=\"::spinner.prefix != null && spinner.postfix != null\">\r\n\t\t\t<span class=\"input-group-addon\">{{::spinner.prefix}}</span>\r\n\t\t\t<input disabled=\"true\" type=\"text\" ng-model=\"spinner.ngModel.$viewValue\" class=\"form-control\" />\r\n\t\t\t<span class=\"input-group-addon\">{{::spinner.postfix}}</span>\r\n\t\t</div>\r\n\t\t<div class=\"input-group field\" ng-if=\"::spinner.prefix != null && spinner.postfix == null\">\r\n\t\t\t<span class=\"input-group-addon\">{{::spinner.prefix}}</span>\r\n\t\t\t<input disabled=\"true\" type=\"text\" ng-model=\"spinner.ngModel.$viewValue\" class=\"form-control\" />\r\n\t\t</div>\r\n\t\t<div class=\"input-group field\" ng-if=\"::spinner.prefix == null && spinner.postfix != null\">\r\n\t\t\t<input disabled=\"true\" type=\"text\" ng-model=\"spinner.ngModel.$viewValue\" class=\"form-control\" />\r\n\t\t\t<span class=\"input-group-addon\">{{::spinner.postfix}}</span>\r\n\t\t</div>\r\n\t\t<div class=\"input-group field\" ng-if=\"::spinner.prefix == null && spinner.postfix == null\">\r\n\t\t\t<input disabled=\"true\" type=\"text\" ng-model=\"spinner.ngModel.$viewValue\" class=\"form-control\" />\r\n\t\t</div>\r\n\t</template>\r\n</rl-generic-container>"

/***/ },
/* 186 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __object = typescript_angular_utilities_1.services.object;
	exports.moduleName = 'rl.ui.components.stringWithWatermark';
	exports.componentName = 'rlStringWithWatermark';
	exports.controllerName = 'StringWithWatermarkController';
	var StringWithWatermarkController = (function () {
	    function StringWithWatermarkController($scope, objectUtility) {
	        var _this = this;
	        $scope.$watch(function () { return _this.string; }, function (value) {
	            _this.hasString = objectUtility.isNullOrEmpty(value) === false;
	        });
	    }
	    StringWithWatermarkController.$inject = ['$scope', __object.serviceName];
	    return StringWithWatermarkController;
	}());
	exports.StringWithWatermarkController = StringWithWatermarkController;
	var stringWithWatermark = {
	    template: "\n\t\t<span>\n\t\t\t<span ng-show=\"controller.hasString\">{{controller.string}}</span>\n\t\t\t<span ng-hide=\"controller.hasString\" class=\"watermark\">{{controller.watermark}}</span>\n\t\t</span>\n\t",
	    controller: exports.controllerName,
	    controllerAs: 'controller',
	    bindings: {
	        string: '@',
	        watermark: '@',
	    },
	};
	angular.module(exports.moduleName, [__object.moduleName])
	    .component(exports.componentName, stringWithWatermark)
	    .controller(exports.controllerName, StringWithWatermarkController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RyaW5nV2l0aFdhdGVybWFyay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInN0cmluZ1dpdGhXYXRlcm1hcmsudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxRQUFRLEdBQUcsdUNBQVEsQ0FBQyxNQUFNLENBQUM7QUFFdkIsa0JBQVUsR0FBVyxzQ0FBc0MsQ0FBQztBQUM1RCxxQkFBYSxHQUFXLHVCQUF1QixDQUFDO0FBQ2hELHNCQUFjLEdBQVcsK0JBQStCLENBQUM7QUFRcEU7SUFRQyx1Q0FBWSxNQUFzQixFQUFFLGFBQXNDO1FBUjNFLGlCQWFDO1FBSkMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFnQixNQUFNLENBQUMsS0FBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxVQUFDLEtBQWE7WUFDbEUsS0FBSSxDQUFDLFNBQVMsR0FBRyxhQUFhLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxLQUFLLEtBQUssQ0FBQztRQUMvRCxDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFMTSxxQ0FBTyxHQUFhLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQztJQU03RCxvQ0FBQztBQUFELENBQUMsQUFiRCxJQWFDO0FBYlkscUNBQTZCLGdDQWF6QyxDQUFBO0FBRUQsSUFBSSxtQkFBbUIsR0FBOEI7SUFDcEQsUUFBUSxFQUFFLDRNQUtUO0lBQ0QsVUFBVSxFQUFFLHNCQUFjO0lBQzFCLFlBQVksRUFBRSxZQUFZO0lBQzFCLFFBQVEsRUFBRTtRQUNULE1BQU0sRUFBRSxHQUFHO1FBQ1gsU0FBUyxFQUFFLEdBQUc7S0FDZDtDQUNELENBQUM7QUFFRixPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsQ0FBQyxRQUFRLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDL0MsU0FBUyxDQUFDLHFCQUFhLEVBQUUsbUJBQW1CLENBQUM7S0FDN0MsVUFBVSxDQUFDLHNCQUFjLEVBQUUsNkJBQTZCLENBQUMsQ0FBQyJ9

/***/ },
/* 187 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var tab_1 = __webpack_require__(188);
	exports.tabComponentName = tab_1.componentName;
	exports.tab = tab_1.tab;
	exports.tabControllerName = tab_1.controllerName;
	exports.TabController = tab_1.TabController;
	var tabset_1 = __webpack_require__(192);
	exports.tabsetComponentName = tabset_1.componentName;
	exports.tabset = tabset_1.tabset;
	exports.tabsetControllerName = tabset_1.controllerName;
	exports.TabsetController = tabset_1.TabsetController;
	exports.moduleName = 'rl.ui.components.tabs';
	angular.module(exports.moduleName, [])
	    .component(tab_1.componentName, tab_1.tab)
	    .controller(tab_1.controllerName, tab_1.TabController)
	    .component(tabset_1.componentName, tabset_1.tabset)
	    .controller(tabset_1.controllerName, tabset_1.TabsetController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFicy5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0YWJzLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUVuQyxvQkFLTyxPQUFPLENBQUMsQ0FBQTtBQVVkLHdCQUFnQjtBQUNoQixXQUFHO0FBQ0gseUJBQWlCO0FBQ2pCLHFCQUFhO0FBWmQsdUJBTU8sVUFBVSxDQUFDLENBQUE7QUFPakIsMkJBQW1CO0FBQ25CLGNBQU07QUFDTiw0QkFBb0I7QUFDcEIsd0JBQWdCO0FBSU4sa0JBQVUsR0FBVyx1QkFBdUIsQ0FBQztBQUV4RCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLFNBQVMsQ0FBQyxtQkFBZ0IsRUFBRSxTQUFHLENBQUM7S0FDaEMsVUFBVSxDQUFDLG9CQUFpQixFQUFFLG1CQUFhLENBQUM7S0FDNUMsU0FBUyxDQUFDLHNCQUFtQixFQUFFLGVBQU0sQ0FBQztLQUN0QyxVQUFVLENBQUMsdUJBQW9CLEVBQUUseUJBQWdCLENBQUMsQ0FBQyJ9

/***/ },
/* 188 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	__webpack_require__(189);
	exports.componentName = 'rlTab';
	exports.controllerName = 'rlTabController';
	var TabController = (function () {
	    function TabController($scope, $element, $transclude) {
	        var _this = this;
	        this.$element = $element;
	        this.$transclude = $transclude;
	        $scope.$watch('tabForm.$valid', function (isValid) {
	            _this.header.isValid = isValid != null ? isValid : true;
	        });
	    }
	    TabController.prototype.$postLink = function () {
	        var _this = this;
	        this.$transclude(function (header) {
	            _this.header = {
	                template: header.html(),
	                isValid: true,
	            };
	            _this.tabset.registerTab(_this.$element, _this.header);
	        }, null, 'headerSlot');
	    };
	    TabController.$inject = ['$scope', '$element', '$transclude'];
	    return TabController;
	}());
	exports.TabController = TabController;
	exports.tab = {
	    transclude: {
	        'headerSlot': '?rlTabHeader',
	        'contentSlot': '?rlTabContent',
	        'footerSlot': '?rlTabFooter',
	    },
	    require: { tabset: '^^rlTabset' },
	    template: __webpack_require__(191),
	    controller: exports.controllerName,
	    controllerAs: 'tab',
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFiLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidGFiLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7QUFFYixRQUFPLFdBQVcsQ0FBQyxDQUFBO0FBTVIscUJBQWEsR0FBVyxPQUFPLENBQUM7QUFDaEMsc0JBQWMsR0FBVyxpQkFBaUIsQ0FBQztBQU10RDtJQU1DLHVCQUFZLE1BQWlCLEVBQ2pCLFFBQTZCLEVBQzdCLFdBQW1DO1FBUmhELGlCQXVCQztRQWhCWSxhQUFRLEdBQVIsUUFBUSxDQUFxQjtRQUM3QixnQkFBVyxHQUFYLFdBQVcsQ0FBd0I7UUFDOUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxnQkFBZ0IsRUFBRSxVQUFDLE9BQWdCO1lBQ2hELEtBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxHQUFHLE9BQU8sSUFBSSxJQUFJLEdBQUcsT0FBTyxHQUFHLElBQUksQ0FBQztRQUN4RCxDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRCxpQ0FBUyxHQUFUO1FBQUEsaUJBUUM7UUFQQSxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQUMsTUFBYztZQUMvQixLQUFJLENBQUMsTUFBTSxHQUFHO2dCQUNiLFFBQVEsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFO2dCQUN2QixPQUFPLEVBQUUsSUFBSTthQUNiLENBQUM7WUFDRixLQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFJLENBQUMsUUFBUSxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNyRCxDQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3hCLENBQUM7SUFqQk0scUJBQU8sR0FBYSxDQUFDLFFBQVEsRUFBRSxVQUFVLEVBQUUsYUFBYSxDQUFDLENBQUM7SUFrQmxFLG9CQUFDO0FBQUQsQ0FBQyxBQXZCRCxJQXVCQztBQXZCWSxxQkFBYSxnQkF1QnpCLENBQUE7QUFFVSxXQUFHLEdBQXlCO0lBQ3RDLFVBQVUsRUFBTztRQUNoQixZQUFZLEVBQUUsY0FBYztRQUM1QixhQUFhLEVBQUUsZUFBZTtRQUM5QixZQUFZLEVBQUUsY0FBYztLQUM1QjtJQUNELE9BQU8sRUFBRSxFQUFFLE1BQU0sRUFBQyxZQUFZLEVBQUU7SUFDaEMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxZQUFZLENBQUM7SUFDL0IsVUFBVSxFQUFFLHNCQUFjO0lBQzFCLFlBQVksRUFBRSxLQUFLO0NBQ25CLENBQUMifQ==

/***/ },
/* 189 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(190);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../../node_modules/css-loader/index.js!./tab.css", function() {
				var newContent = require("!!./../../../node_modules/css-loader/index.js!./tab.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 190 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, ".tab-content .tab-pane { display: none }\r\n.tab-content .tab-pane.active { display: block }", ""]);
	
	// exports


/***/ },
/* 191 */
/***/ function(module, exports) {

	module.exports = "<div class=\"tab-pane\" ng-class=\"{ 'active': tab.header.isVisible }\">\r\n\t<div class=\"tab-body\">\r\n\t\t<div ng-transclude=\"contentSlot\" ng-form=\"tabForm\"></div>\r\n\t\t<div class=\"clearfix\"></div>\r\n\t</div>\r\n\t<div class=\"tab-footer\">\r\n\t\t<div ng-transclude=\"footerSlot\"></div>\r\n\t\t<div class=\"clearfix\"></div>\r\n\t</div>\r\n</div>"

/***/ },
/* 192 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __array = typescript_angular_utilities_1.services.array;
	exports.componentName = 'rlTabset';
	exports.controllerName = 'rlTabsetController';
	var TabsetController = (function () {
	    function TabsetController($element) {
	        this.$element = $element;
	        this.tabHeaders = [];
	    }
	    TabsetController.prototype.registerTab = function (element, header) {
	        var index = this.findPosition(element);
	        if (__array.arrayUtility.has(this.tabHeaders, index)) {
	            header.isVisible = this.tabHeaders[index].isVisible;
	        }
	        else {
	            header.isVisible = (index === 0);
	        }
	        this.tabHeaders[index] = header;
	    };
	    TabsetController.prototype.select = function (tab) {
	        _.each(this.tabHeaders, function (otherTab) {
	            otherTab.isVisible = false;
	        });
	        tab.isVisible = true;
	    };
	    TabsetController.prototype.findPosition = function (tabElement) {
	        // find the position of the specified element by iterating over the tabs and finding a matching element
	        var tabs = this.$element.find('rl-tab');
	        var num;
	        _.each(tabs, function (elem, index) {
	            if (tabElement[0] === elem) {
	                num = index;
	                return false;
	            }
	        });
	        return num;
	    };
	    TabsetController.$inject = ['$element'];
	    return TabsetController;
	}());
	exports.TabsetController = TabsetController;
	exports.tabset = {
	    transclude: true,
	    template: __webpack_require__(193),
	    controller: exports.controllerName,
	    controllerAs: 'tabset',
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFic2V0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidGFic2V0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7QUFHYixJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUU1Qiw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUN4RCxJQUFPLE9BQU8sR0FBRyx1Q0FBUSxDQUFDLEtBQUssQ0FBQztBQUVyQixxQkFBYSxHQUFXLFVBQVUsQ0FBQztBQUNuQyxzQkFBYyxHQUFXLG9CQUFvQixDQUFDO0FBUXpEO0lBdUJDLDBCQUFvQixRQUFrQztRQUFsQyxhQUFRLEdBQVIsUUFBUSxDQUEwQjtRQXRCdEQsZUFBVSxHQUFpQixFQUFFLENBQUM7SUFzQjJCLENBQUM7SUFwQjFELHNDQUFXLEdBQVgsVUFBWSxPQUE0QixFQUFFLE1BQWtCO1FBQzNELElBQUksS0FBSyxHQUFXLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFL0MsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDdEQsTUFBTSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUNyRCxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDUCxNQUFNLENBQUMsU0FBUyxHQUFHLENBQUMsS0FBSyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLENBQUM7UUFFRCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxHQUFHLE1BQU0sQ0FBQztJQUNqQyxDQUFDO0lBRUQsaUNBQU0sR0FBTixVQUFPLEdBQWU7UUFDckIsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFVBQUMsUUFBb0I7WUFDNUMsUUFBUSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7UUFDNUIsQ0FBQyxDQUFDLENBQUM7UUFDSCxHQUFHLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztJQUN0QixDQUFDO0lBS0QsdUNBQVksR0FBWixVQUFhLFVBQStCO1FBQzNDLHVHQUF1RztRQUN2RyxJQUFJLElBQUksR0FBd0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDN0QsSUFBSSxHQUFXLENBQUM7UUFDaEIsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsVUFBQyxJQUFhLEVBQUUsS0FBYTtZQUN6QyxFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEtBQUssSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDNUIsR0FBRyxHQUFHLEtBQUssQ0FBQztnQkFDWixNQUFNLENBQUMsS0FBSyxDQUFDO1lBQ2QsQ0FBQztRQUNGLENBQUMsQ0FBQyxDQUFBO1FBQ0YsTUFBTSxDQUFDLEdBQUcsQ0FBQztJQUNaLENBQUM7SUFkTSx3QkFBTyxHQUFhLENBQUMsVUFBVSxDQUFDLENBQUM7SUFlekMsdUJBQUM7QUFBRCxDQUFDLEFBckNELElBcUNDO0FBckNZLHdCQUFnQixtQkFxQzVCLENBQUE7QUFFVSxjQUFNLEdBQXlCO0lBQ3pDLFVBQVUsRUFBRSxJQUFJO0lBQ2hCLFFBQVEsRUFBRSxPQUFPLENBQUMsZUFBZSxDQUFDO0lBQ2xDLFVBQVUsRUFBRSxzQkFBYztJQUMxQixZQUFZLEVBQUUsUUFBUTtDQUN0QixDQUFDIn0=

/***/ },
/* 193 */
/***/ function(module, exports) {

	module.exports = "<div class=\"nav-tabs-dropshadow\">\r\n\t<ul class=\"nav nav-tabs\">\r\n\t\t<li ng-repeat=\"tabHeader in tabset.tabHeaders\" ng-click=\"tabset.select(tabHeader)\"\r\n\t\t\tng-class=\"{ 'active': tabHeader.isVisible, 'error': !tabHeader.isValid }\">\r\n\t\t\t<a><span ng-bind-html=\"tabHeader.template\"></span></a>\r\n\t\t</li>\r\n\t</ul>\r\n\t<div class=\"tab-content\">\r\n\t\t<div ng-transclude></div>\r\n\t</div>\r\n</div>"

/***/ },
/* 194 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/node/node.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	exports.moduleName = 'rl.ui.components.templateRenderer';
	exports.componentName = 'rlTemplateRenderer';
	exports.controllerName = 'TemplateRendererController';
	var TemplateRendererController = (function () {
	    function TemplateRendererController($compile, $element) {
	        var target = $element.find('.template-target');
	        var template = target.append(this.template.template);
	        $compile(template)(this.template.scope);
	    }
	    TemplateRendererController.$inject = ['$compile', '$element'];
	    return TemplateRendererController;
	}());
	exports.TemplateRendererController = TemplateRendererController;
	var templateRenderer = {
	    template: '<div class="template-target"></div>',
	    controller: exports.controllerName,
	    controllerAs: 'controller',
	    bindings: {
	        template: '<',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, templateRenderer)
	    .controller(exports.controllerName, TemplateRendererController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVtcGxhdGVSZW5kZXJlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRlbXBsYXRlUmVuZGVyZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMkRBQTJEO0FBRTNELFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBRXhCLGtCQUFVLEdBQVcsbUNBQW1DLENBQUM7QUFDekQscUJBQWEsR0FBVyxvQkFBb0IsQ0FBQztBQUM3QyxzQkFBYyxHQUFXLDRCQUE0QixDQUFDO0FBV2pFO0lBSUMsb0NBQVksUUFBaUMsRUFBRSxRQUFrQztRQUNoRixJQUFJLE1BQU0sR0FBVyxRQUFRLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDdkQsSUFBSSxRQUFRLEdBQVcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzdELFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFMTSxrQ0FBTyxHQUFHLENBQUMsVUFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0lBTTNDLGlDQUFDO0FBQUQsQ0FBQyxBQVRELElBU0M7QUFUWSxrQ0FBMEIsNkJBU3RDLENBQUE7QUFFRCxJQUFJLGdCQUFnQixHQUE4QjtJQUNqRCxRQUFRLEVBQUUscUNBQXFDO0lBQy9DLFVBQVUsRUFBRSxzQkFBYztJQUMxQixZQUFZLEVBQUUsWUFBWTtJQUMxQixRQUFRLEVBQUU7UUFDVCxRQUFRLEVBQUUsR0FBRztLQUNiO0NBQ0QsQ0FBQztBQUVGLE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxFQUFFLENBQUM7S0FDNUIsU0FBUyxDQUFDLHFCQUFhLEVBQUUsZ0JBQWdCLENBQUM7S0FDMUMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsMEJBQTBCLENBQUMsQ0FBQyJ9

/***/ },
/* 195 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var input_1 = __webpack_require__(115);
	exports.moduleName = 'rl.ui.components.textarea';
	exports.componentName = 'rlTextarea';
	var textarea = input_1.buildInput({
	    template: __webpack_require__(196),
	    bindings: {
	        rows: '<?',
	        ngDisabled: '<?',
	        maxlength: '<?',
	    },
	});
	angular.module(exports.moduleName, [input_1.moduleName])
	    .component(exports.componentName, textarea);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dGFyZWEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0ZXh0YXJlYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwwREFBMEQ7QUFFMUQsWUFBWSxDQUFDO0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsc0JBQXNELGdCQUFnQixDQUFDLENBQUE7QUFFNUQsa0JBQVUsR0FBVywyQkFBMkIsQ0FBQztBQUNqRCxxQkFBYSxHQUFXLFlBQVksQ0FBQztBQUVoRCxJQUFJLFFBQVEsR0FBOEIsa0JBQVUsQ0FBQztJQUNwRCxRQUFRLEVBQUUsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0lBQ3BDLFFBQVEsRUFBRTtRQUNULElBQUksRUFBRSxJQUFJO1FBQ1YsVUFBVSxFQUFFLElBQUk7UUFDaEIsU0FBUyxFQUFFLElBQUk7S0FDZjtDQUNELENBQUMsQ0FBQztBQUVILE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxDQUFDLGtCQUFXLENBQUMsQ0FBQztLQUN2QyxTQUFTLENBQUMscUJBQWEsRUFBRSxRQUFRLENBQUMsQ0FBQyJ9

/***/ },
/* 196 */
/***/ function(module, exports) {

	module.exports = "<div class=\"field\" ng-class=\"{ 'error': input.ngModel.$invalid }\">\r\n\t<label ng-show=\"input.inputValue && input.label\" class=\"label-slide angular-animate\">{{::input.label}}</label>\r\n\t<textarea class=\"form-control\" ng-model=\"input.inputValue\" rows=\"{{::input.rows}}\" maxlength=\"{{::input.maxlength}}\" ng-disabled=\"input.ngDisabled\" placeholder=\"{{::input.label}}\"></textarea>\r\n\t<span class=\"error-string angular-animate\" ng-if=\"input.inputValidator.error | isEmpty:false\">{{input.inputValidator.error}}</span>\r\n</div>"

/***/ },
/* 197 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var input_1 = __webpack_require__(115);
	exports.moduleName = 'rl.ui.components.textbox';
	exports.componentName = 'rlTextbox';
	var textbox = input_1.buildInput({
	    template: __webpack_require__(198),
	    bindings: {
	        maxlength: '<?',
	    },
	});
	angular.module(exports.moduleName, [input_1.moduleName])
	    .component(exports.componentName, textbox);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dGJveC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRleHRib3gudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMERBQTBEO0FBRTFELFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBR25DLHNCQUFzRCxnQkFBZ0IsQ0FBQyxDQUFBO0FBRTVELGtCQUFVLEdBQVcsMEJBQTBCLENBQUM7QUFDaEQscUJBQWEsR0FBVyxXQUFXLENBQUM7QUFFL0MsSUFBSSxPQUFPLEdBQThCLGtCQUFVLENBQUM7SUFDbkQsUUFBUSxFQUFFLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQztJQUNuQyxRQUFRLEVBQUU7UUFDVCxTQUFTLEVBQUUsSUFBSTtLQUNmO0NBQ0QsQ0FBQyxDQUFDO0FBRUgsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLENBQUMsa0JBQVcsQ0FBQyxDQUFDO0tBQ3ZDLFNBQVMsQ0FBQyxxQkFBYSxFQUFFLE9BQU8sQ0FBQyxDQUFDIn0=

/***/ },
/* 198 */
/***/ function(module, exports) {

	module.exports = "<div class=\"field\" ng-class=\"{ 'error': input.ngModel.$invalid }\">\r\n\t<label ng-show=\"input.inputValue && input.label\" class=\"label-slide angular-animate\">{{::input.label}}</label>\r\n\t<input  type=\"text\" class=\"form-control angular-animate\" ng-model=\"input.inputValue\" placeholder=\"{{::input.label}}\" maxlength=\"{{::input.maxlength}}\" />\r\n\t<span class=\"error-string angular-animate\" ng-if=\"input.inputValidator.error | isEmpty:false\">{{input.inputValidator.error}}</span>\r\n</div>"

/***/ },
/* 199 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var __extends = (this && this.__extends) || function (d, b) {
	    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
	    function __() { this.constructor = d; }
	    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
	};
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __parentChild = typescript_angular_utilities_1.services.parentChildBehavior;
	var __search = typescript_angular_utilities_1.services.search;
	var __objectUtility = typescript_angular_utilities_1.services.object;
	var __arrayUtility = typescript_angular_utilities_1.services.array;
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	var input_1 = __webpack_require__(115);
	var componentValidator_service_1 = __webpack_require__(116);
	exports.moduleName = 'rl.ui.components.typeahead';
	exports.componentName = 'rlTypeahead';
	exports.controllerName = 'TypeaheadController';
	var TypeaheadController = (function (_super) {
	    __extends(TypeaheadController, _super);
	    function TypeaheadController($scope, $q, $attrs, $timeout, parentChild, object, array, componentValidatorFactory) {
	        _super.call(this, $scope, $attrs, componentValidatorFactory);
	        this.$q = $q;
	        this.$timeout = $timeout;
	        this.parentChild = parentChild;
	        this.object = object;
	        this.array = array;
	        this.loading = false;
	        this.collapsed = false;
	        this.hasSearchOption = false;
	        this._searchOption = {
	            __isSearchOption: true,
	        };
	        this.inputType = 'typeahead';
	    }
	    Object.defineProperty(TypeaheadController.prototype, "selection", {
	        get: function () {
	            return this.ngModel.$viewValue;
	        },
	        set: function (value) {
	            if (value != null) {
	                if (value.__isSearchOption) {
	                    value = this.create({ value: value.text });
	                }
	                this.select({ value: value });
	                if (this.collapseOnSelect) {
	                    this.collapsed = true;
	                    this.ngModel.$setViewValue(value);
	                }
	            }
	        },
	        enumerable: true,
	        configurable: true
	    });
	    TypeaheadController.prototype.$onInit = function () {
	        var _this = this;
	        _super.prototype.$onInit.call(this);
	        this.loadDelay = this.useClientSearching ? 100 : 500;
	        this.prefix = this.prefix || 'Search for';
	        this.placeholder = this.label != null ? this.prefix + ' ' + this.label.toLowerCase() : 'Search';
	        var $attrs = this.$attrs;
	        this.collapseOnSelect = this.allowCollapse || this.object.isNullOrEmpty($attrs.select);
	        this.allowCustomOption = !this.object.isNullOrEmpty($attrs.create);
	        this.$timeout(function () {
	            if (_this.collapseOnSelect && !_this.object.isNullOrEmpty(_this.ngModel.$viewValue)) {
	                _this.collapsed = true;
	            }
	        });
	        this.parentChild.registerChildBehavior(this.childLink, {
	            add: this.addItem.bind(this),
	            remove: this.removeItem.bind(this),
	        });
	        this.$scope.$watch(function () { return _this.ngModel.$viewValue; }, function (value) {
	            if (value != null && _this.collapseOnSelect) {
	                _this.collapsed = true;
	            }
	        });
	    };
	    TypeaheadController.prototype.getDisplayName = function (item) {
	        if (item != null && item.__isSearchOption) {
	            return item.text;
	        }
	        return __transform.getValue(item, this.transform);
	    };
	    TypeaheadController.prototype.refresh = function (search) {
	        var _this = this;
	        if (this.object.isNullOrEmpty(search)) {
	            this.visibleItems = [];
	            return null;
	        }
	        this.loading = true;
	        return this.loadItems(search).then(function () {
	            _this.loading = false;
	            _this._searchOption.text = search;
	            if (_this.showCustomSearch(search)) {
	                _this.hasSearchOption = true;
	                _this.visibleItems.unshift(_this._searchOption);
	            }
	        });
	    };
	    TypeaheadController.prototype.loadItems = function (search) {
	        var _this = this;
	        if (!this.useClientSearching) {
	            return this.$q.when(this.getItems({
	                search: search,
	            })).then(function (items) {
	                _this.visibleItems = items;
	            });
	        }
	        else {
	            if (this.cachedItems != null) {
	                this.visibleItems = this.filter(this.cachedItems, search);
	                return this.$q.when();
	            }
	            else {
	                return this.$q.when(this.getItems()).then(function (items) {
	                    _this.cachedItems = items;
	                    _this.visibleItems = _this.filter(items, search);
	                });
	            }
	        }
	    };
	    TypeaheadController.prototype.clear = function () {
	        this.ngModel.$setViewValue(null);
	        this.collapsed = false;
	    };
	    TypeaheadController.prototype.showCustomSearch = function (search) {
	        var _this = this;
	        return this.allowCustomOption
	            && !this.hasSearchOption
	            && !_.find(this.visibleItems, function (item) {
	                return _this.getDisplayName(item) === search;
	            });
	    };
	    TypeaheadController.prototype.filter = function (list, search) {
	        return _.filter(list, function (item) { return __search.searchUtility.tokenizedSearch(item, search); });
	    };
	    TypeaheadController.prototype.addItem = function (item) {
	        if (this.cachedItems != null) {
	            this.cachedItems.push(item);
	        }
	    };
	    TypeaheadController.prototype.removeItem = function (item) {
	        if (this.cachedItems != null) {
	            this.array.remove(this.cachedItems, item);
	        }
	    };
	    TypeaheadController.$inject = ['$scope',
	        '$q',
	        '$attrs',
	        '$timeout',
	        __parentChild.serviceName,
	        __objectUtility.serviceName,
	        __arrayUtility.serviceName,
	        componentValidator_service_1.factoryName];
	    return TypeaheadController;
	}(input_1.InputController));
	exports.TypeaheadController = TypeaheadController;
	var typeahead = input_1.buildInput({
	    template: __webpack_require__(200),
	    controller: exports.controllerName,
	    controllerAs: 'typeahead',
	    bindings: {
	        childLink: '=?',
	        select: '&',
	        create: '&',
	        allowCollapse: '<?',
	        transform: '<?',
	        getItems: '&',
	        prefix: '@',
	        useClientSearching: '<?',
	        ngDisabled: '<?',
	    },
	});
	angular.module(exports.moduleName, [
	    __parentChild.moduleName,
	    __objectUtility.moduleName,
	    __arrayUtility.moduleName,
	    input_1.moduleName
	])
	    .component(exports.componentName, typeahead)
	    .controller(exports.controllerName, TypeaheadController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZWFoZWFkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidHlwZWFoZWFkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7Ozs7O0FBRWIsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFDbkMsSUFBWSxDQUFDLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFNUIsNkNBQXlCLDhCQUE4QixDQUFDLENBQUE7QUFDeEQsSUFBTyxhQUFhLEdBQUcsdUNBQVEsQ0FBQyxtQkFBbUIsQ0FBQztBQUNwRCxJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUNsQyxJQUFPLGVBQWUsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUN6QyxJQUFPLGNBQWMsR0FBRyx1Q0FBUSxDQUFDLEtBQUssQ0FBQztBQUV2QyxJQUFPLFdBQVcsR0FBRyx1Q0FBUSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7QUFFbEQsc0JBQXVFLGdCQUFnQixDQUFDLENBQUE7QUFDeEYsMkNBQXlGLDhEQUE4RCxDQUFDLENBQUE7QUFFN0ksa0JBQVUsR0FBVyw0QkFBNEIsQ0FBQztBQUNsRCxxQkFBYSxHQUFXLGFBQWEsQ0FBQztBQUN0QyxzQkFBYyxHQUFXLHFCQUFxQixDQUFDO0FBcUYxRDtJQUF5Qyx1Q0FBZTtJQXNEdkQsNkJBQVksTUFBc0IsRUFDdkIsRUFBcUIsRUFDN0IsTUFBdUIsRUFDZixRQUFpQyxFQUNqQyxXQUFzRCxFQUN0RCxNQUFzQyxFQUN0QyxLQUFtQyxFQUMzQyx5QkFBcUQ7UUFDdEQsa0JBQU0sTUFBTSxFQUFPLE1BQU0sRUFBRSx5QkFBeUIsQ0FBQyxDQUFDO1FBUDdDLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBRXJCLGFBQVEsR0FBUixRQUFRLENBQXlCO1FBQ2pDLGdCQUFXLEdBQVgsV0FBVyxDQUEyQztRQUN0RCxXQUFNLEdBQU4sTUFBTSxDQUFnQztRQUN0QyxVQUFLLEdBQUwsS0FBSyxDQUE4QjtRQTdD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

/***/ },
/* 200 */
/***/ function(module, exports) {

	module.exports = "<div class=\"field\" ng-class=\"{ 'has-error': typeahead.ngModel.$invalid }\">\r\n\t<label ng-show=\"typeahead.selection\" class=\"show-hide angular-animate\">\r\n\t\t{{::typeahead.label}}\r\n\t</label>\r\n\t<div ng-if=\"!typeahead.collapsed\">\r\n\t\t<ui-select ng-model=\"typeahead.selection\" theme=\"bootstrap\" ng-disabled=\"typeahead.ngDisabled\">\r\n\t\t\t<ui-select-match placeholder=\"{{::typeahead.placeholder}}\">{{typeahead.getDisplayName($select.selected)}}</ui-select-match>\r\n\t\t\t<ui-select-choices repeat=\"item in typeahead.visibleItems\"\r\n\t\t\t\t\t\t\t\trefresh=\"typeahead.refresh($select.search)\"\r\n\t\t\t\t\t\t\t\trefresh-delay=\"typeahead.loadDelay\">\r\n\t\t\t\t{{typeahead.getDisplayName(item)}}\r\n\t\t\t</ui-select-choices>\r\n\t\t</ui-select>\r\n\t</div>\r\n\t<div ng-if=\"typeahead.collapsed\">\r\n\t\t<span>{{typeahead.getDisplayName(typeahead.selection)}}</span>\r\n\t\t<rl-button type=\"default flat\" action=\"typeahead.clear()\"><i class=\"fa fa-remove\"></i></rl-button>\r\n\t</div>\r\n\t<span class=\"error-string\" ng-if=\"typeahead.inputValidator.error | isEmpty:false\">{{typeahead.inputValidator.error}}</span>\r\n\t<rl-busy loading=\"typeahead.loading\"></rl-busy>\r\n</div>"

/***/ },
/* 201 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/node/node.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __parentChild = typescript_angular_utilities_1.services.parentChildBehavior;
	var __array = typescript_angular_utilities_1.services.array;
	var __transform = typescript_angular_utilities_1.services.transform.transform;
	var typeaheadItem_1 = __webpack_require__(202);
	exports.moduleName = 'rl.ui.components.typeaheadList';
	exports.componentName = 'rlTypeaheadList';
	exports.controllerName = 'TypeaheadListController';
	var TypeaheadListController = (function () {
	    function TypeaheadListController($scope, $transclude, $q, parentChild) {
	        this.$scope = $scope;
	        this.$transclude = $transclude;
	        this.$q = $q;
	        this.parentChild = parentChild;
	        this.typeaheadLink = {};
	    }
	    TypeaheadListController.prototype.$onInit = function () {
	        var _this = this;
	        this.$scope.$remove = this.removeItem.bind(this);
	        this.$scope.$transform = function (item) {
	            return __transform.getValue(item, _this.transform);
	        };
	        this.$scope.listData = this.listData;
	        this.parentChild.registerChildBehavior(this.childLink, {
	            add: this.addItem.bind(this),
	            remove: this.removeItem.bind(this),
	        });
	    };
	    TypeaheadListController.prototype.loadItems = function (search) {
	        var _this = this;
	        return this.getItems({ search: search }).then(function (data) {
	            return _.filter(data, function (item) {
	                return !_.find(_this.ngModel.$viewValue, item);
	            });
	        });
	    };
	    TypeaheadListController.prototype.addItem = function (item) {
	        var _this = this;
	        return this.$q.when(this.add({ item: item })).then(function (newItem) {
	            newItem = newItem || item;
	            _this.ngModel.$viewValue.push(newItem);
	            _this.parentChild.triggerChildBehavior(_this.typeaheadLink, function (behavior) {
	                behavior.remove(newItem);
	            });
	            return newItem;
	        });
	    };
	    TypeaheadListController.prototype.removeItem = function (item) {
	        var _this = this;
	        return this.$q.when(this.remove({ item: item })).then(function () {
	            __array.arrayUtility.remove(_this.ngModel.$viewValue, item);
	            _this.parentChild.triggerChildBehavior(_this.typeaheadLink, function (behavior) {
	                behavior.add(item);
	            });
	        });
	    };
	    TypeaheadListController.$inject = ['$scope', '$transclude', '$q', __parentChild.serviceName];
	    return TypeaheadListController;
	}());
	exports.TypeaheadListController = TypeaheadListController;
	var typeaheadList = {
	    require: { ngModel: 'ngModel' },
	    transclude: {
	        headerSlot: '?rlListHeader',
	        listItemSlot: '?rlListItem',
	    },
	    template: __webpack_require__(204),
	    controller: exports.controllerName,
	    controllerAs: 'list',
	    bindings: {
	        getItems: '&',
	        add: '&',
	        remove: '&',
	        transform: '<?',
	        label: '@',
	        prefix: '@',
	        useClientSearching: '<?',
	        ngDisabled: '<?',
	        itemAs: '@',
	        childLink: '=?',
	        listData: '<?',
	    },
	};
	angular.module(exports.moduleName, [__parentChild.moduleName])
	    .component(exports.componentName, typeaheadList)
	    .controller(exports.controllerName, TypeaheadListController)
	    .component(typeaheadItem_1.componentName, typeaheadItem_1.typeaheadItem);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZWFoZWFkTGlzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInR5cGVhaGVhZExpc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMkRBQTJEO0FBRTNELFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLDZDQUF5Qiw4QkFBOEIsQ0FBQyxDQUFBO0FBQ3hELElBQU8sYUFBYSxHQUFHLHVDQUFRLENBQUMsbUJBQW1CLENBQUM7QUFDcEQsSUFBTyxPQUFPLEdBQUcsdUNBQVEsQ0FBQyxLQUFLLENBQUM7QUFDaEMsSUFBTyxXQUFXLEdBQUcsdUNBQVEsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDO0FBR2xELDhCQUFrRSxpQkFBaUIsQ0FBQyxDQUFBO0FBRXpFLGtCQUFVLEdBQVcsZ0NBQWdDLENBQUM7QUFDdEQscUJBQWEsR0FBVyxpQkFBaUIsQ0FBQztBQUMxQyxzQkFBYyxHQUFXLHlCQUF5QixDQUFDO0FBaUY5RDtJQWtCQyxpQ0FBb0IsTUFBMkIsRUFDcEMsV0FBd0MsRUFDdkMsRUFBcUIsRUFDckIsV0FBc0Q7UUFIOUMsV0FBTSxHQUFOLE1BQU0sQ0FBcUI7UUFDcEMsZ0JBQVcsR0FBWCxXQUFXLENBQTZCO1FBQ3ZDLE9BQUUsR0FBRixFQUFFLENBQW1CO1FBQ3JCLGdCQUFXLEdBQVgsV0FBVyxDQUEyQztRQVBsRSxrQkFBYSxHQUFrRCxFQUFFLENBQUM7SUFPSSxDQUFDO0lBRXZFLHlDQUFPLEdBQVA7UUFBQSxpQkFVQztRQVRBLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pELElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLFVBQUMsSUFBUztZQUNsQyxNQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVB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

/***/ },
/* 202 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/node/node.d.ts' />
	'use strict';
	exports.componentName = 'rlTypeaheadListItem';
	var TypeaheadItemController = (function () {
	    function TypeaheadItemController($scope, $element, $compile) {
	        this.$scope = $scope;
	        this.$element = $element;
	        this.$compile = $compile;
	    }
	    TypeaheadItemController.prototype.$onInit = function () {
	        var itemScope = this.$scope.$parent.$new();
	        var contentArea = this.$element.find('.content-target');
	        if (this.transclude.isSlotFilled('listItemSlot')) {
	            this.transclude(itemScope, function (template) {
	                contentArea.append(template);
	            }, null, 'listItemSlot');
	        }
	        else {
	            var template = contentArea.append(__webpack_require__(203));
	            this.$compile(template)(itemScope);
	        }
	    };
	    TypeaheadItemController.$inject = ['$scope', '$element', '$compile'];
	    return TypeaheadItemController;
	}());
	exports.typeaheadItem = {
	    bindings: {
	        transclude: '<',
	    },
	    controller: TypeaheadItemController,
	    template: "<div class=\"content-target\"></div>",
	};
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZWFoZWFkSXRlbS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInR5cGVhaGVhZEl0ZW0udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMkRBQTJEO0FBRTNELFlBQVksQ0FBQztBQUlGLHFCQUFhLEdBQVcscUJBQXFCLENBQUM7QUFFekQ7SUFJQyxpQ0FBb0IsTUFBc0IsRUFDL0IsUUFBa0MsRUFDbEMsUUFBaUM7UUFGeEIsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7UUFDL0IsYUFBUSxHQUFSLFFBQVEsQ0FBMEI7UUFDbEMsYUFBUSxHQUFSLFFBQVEsQ0FBeUI7SUFBSSxDQUFDO0lBRWpELHlDQUFPLEdBQVA7UUFDQyxJQUFJLFNBQVMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUMzQyxJQUFJLFdBQVcsR0FBVyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ2hFLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsRCxJQUFJLENBQUMsVUFBVSxDQUFDLFNBQVMsRUFBRSxVQUFDLFFBQWdCO2dCQUMzQyxXQUFXLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1lBQzlCLENBQUMsRUFBRSxJQUFJLEVBQUUsY0FBYyxDQUFDLENBQUM7UUFDMUIsQ0FBQztRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ1AsSUFBSSxRQUFRLEdBQVcsV0FBVyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQyxDQUFDO1lBQzdFLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDcEMsQ0FBQztJQUNGLENBQUM7SUFoQk0sK0JBQU8sR0FBYSxDQUFDLFFBQVEsRUFBRSxVQUFVLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFpQi9ELDhCQUFDO0FBQUQsQ0FBQyxBQXBCRCxJQW9CQztBQUVVLHFCQUFhLEdBQThCO0lBQ3JELFFBQVEsRUFBRTtRQUNULFVBQVUsRUFBRSxHQUFHO0tBQ2Y7SUFDRCxVQUFVLEVBQUUsdUJBQXVCO0lBQ25DLFFBQVEsRUFBRSxzQ0FBb0M7Q0FDOUMsQ0FBQyJ9

/***/ },
/* 203 */
/***/ function(module, exports) {

	module.exports = "<div class=\"col-xs-10\">{{$transform($item)}}</div>\r\n<div class=\"col-xs-2\">\r\n\t<rl-button-async type=\"danger\" action=\"$remove($item)\"><i class=\"fa fa-remove\"></i></rl-button-async>\r\n</div>"

/***/ },
/* 204 */
/***/ function(module, exports) {

	module.exports = "<rl-typeahead ng-model=\"list.model\" select=\"list.addItem(value)\" allow-collapse=\"false\" child-link=\"list.typeaheadLink\"\r\n\t\t\t  transform=\"list.transform\" get-items=\"list.loadItems(search)\" label=\"{{list.label}}\"\r\n\t\t\t  prefix=\"{{list.prefix}}\" use-client-searching=\"list.useClientSearching\" ng-disabled=\"list.ngDisabled\"></rl-typeahead>\r\n<div class=\"table-container col-xs-12\">\r\n\t<div class=\"row table-header\">\r\n\t\t<div ng-transclude=\"headerSlot\">\r\n\t\t\t<div class=\"col-xs-12\">Name</div>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=\"row table-row\" ng-repeat=\"$item in list.ngModel.$viewValue\" rl-alias=\"$item as {{list.itemAs}}\">\r\n\t\t<rl-typeahead-list-item transclude=\"list.$transclude\"></rl-typeahead-list-item>\r\n\t</div>\r\n</div>"

/***/ },
/* 205 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	__webpack_require__(206);
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var componentsDefaultTheme_1 = __webpack_require__(30);
	exports.moduleName = 'rl.components.userRating';
	exports.componentName = 'rlUserRating';
	exports.controllerName = 'UserRatingController';
	var UserRatingController = (function () {
	    function UserRatingController($timeout, useDefaultTheme) {
	        this.$timeout = $timeout;
	        this.useDefaultTheme = useDefaultTheme;
	    }
	    UserRatingController.prototype.$onInit = function () {
	        var _this = this;
	        this.stars = [];
	        var rangeSize = this.range != null ? this.range : 5;
	        // css style requires the stars to show right to left. Reverse the list so the highest value is first
	        var range = _.range(1, rangeSize + 1).reverse();
	        _.each(range, function (rating) {
	            _this.stars.push({
	                value: rating,
	                filled: false,
	            });
	        });
	        this.$timeout(function () {
	            _this.updateStarView(_this.ngModel.$viewValue);
	        });
	    };
	    UserRatingController.prototype.setRating = function (rating) {
	        this.ngModel.$setViewValue(rating);
	        this.updateStarView(rating);
	    };
	    UserRatingController.prototype.updateStarView = function (rating) {
	        _.each(this.stars, function (star) {
	            if (star.value <= rating) {
	                star.filled = true;
	            }
	            else {
	                star.filled = false;
	            }
	        });
	    };
	    UserRatingController.$inject = ['$timeout', componentsDefaultTheme_1.defaultThemeValueName];
	    return UserRatingController;
	}());
	exports.UserRatingController = UserRatingController;
	var userRating = {
	    require: { ngModel: 'ngModel' },
	    template: "\n\t\t<span class=\"rating\" ng-class=\"{ 'default-theme': userRating.useDefaultTheme }\">\n\t\t\t<span class=\"star\" ng-repeat=\"star in userRating.stars\" ng-class=\"{ 'filled': star.filled }\" ng-click=\"userRating.setRating(star.value)\"></span>\n\t\t</span>\n\t",
	    controller: exports.controllerName,
	    controllerAs: 'userRating',
	    bindings: {
	        range: '=',
	    },
	};
	angular.module(exports.moduleName, [])
	    .component(exports.componentName, userRating)
	    .controller(exports.controllerName, UserRatingController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlclJhdGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInVzZXJSYXRpbmcudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsUUFBTyxrQkFBa0IsQ0FBQyxDQUFBO0FBRTFCLElBQVksT0FBTyxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ25DLElBQVksQ0FBQyxXQUFNLFFBQVEsQ0FBQyxDQUFBO0FBRTVCLHVDQUFzQywyQkFBMkIsQ0FBQyxDQUFBO0FBRXZELGtCQUFVLEdBQVcsMEJBQTBCLENBQUM7QUFFaEQscUJBQWEsR0FBVyxjQUFjLENBQUM7QUFDdkMsc0JBQWMsR0FBVyxzQkFBc0IsQ0FBQztBQWdCM0Q7SUFPQyw4QkFBb0IsUUFBaUMsRUFBUyxlQUF3QjtRQUFsRSxhQUFRLEdBQVIsUUFBUSxDQUF5QjtRQUFTLG9CQUFlLEdBQWYsZUFBZSxDQUFTO0lBQUksQ0FBQztJQUUzRixzQ0FBTyxHQUFQO1FBQUEsaUJBZUM7UUFkQSxJQUFJLENBQUMsS0FBSyxHQUFHLEVBQUUsQ0FBQztRQUNoQixJQUFJLFNBQVMsR0FBVyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQztRQUM1RCxxR0FBcUc7UUFDckcsSUFBSSxLQUFLLEdBQWEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzFELENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFVBQUMsTUFBYztZQUM1QixLQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztnQkFDZixLQUFLLEVBQUUsTUFBTTtnQkFDYixNQUFNLEVBQUUsS0FBSzthQUNiLENBQUMsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBSSxDQUFDLFFBQVEsQ0FBQztZQUNiLEtBQUksQ0FBQyxjQUFjLENBQUMsS0FBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUM5QyxDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRCx3Q0FBUyxHQUFULFVBQVUsTUFBYztRQUN2QixJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNuQyxJQUFJLENBQUMsY0FBYyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFTyw2Q0FBYyxHQUF0QixVQUF1QixNQUFjO1FBQ3BDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxVQUFDLElBQVc7WUFDOUIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUMxQixJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQztZQUNwQixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ1AsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFDckIsQ0FBQztRQUNGLENBQUMsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQWpDTSw0QkFBTyxHQUFhLENBQUMsVUFBVSxFQUFFLDhDQUFxQixDQUFDLENBQUM7SUFrQ2hFLDJCQUFDO0FBQUQsQ0FBQyxBQXhDRCxJQXdDQztBQXhDWSw0QkFBb0IsdUJBd0NoQyxDQUFBO0FBRUQsSUFBSSxVQUFVLEdBQThCO0lBQzNDLE9BQU8sRUFBRSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUU7SUFDL0IsUUFBUSxFQUFFLDZRQUlUO0lBQ0QsVUFBVSxFQUFFLHNCQUFjO0lBQzFCLFlBQVksRUFBRSxZQUFZO0lBQzFCLFFBQVEsRUFBRTtRQUNULEtBQUssRUFBRSxHQUFHO0tBQ1Y7Q0FDRCxDQUFDO0FBRUYsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLEVBQUUsQ0FBQztLQUM1QixTQUFTLENBQUMscUJBQWEsRUFBRSxVQUFVLENBQUM7S0FDcEMsVUFBVSxDQUFDLHNCQUFjLEVBQUUsb0JBQW9CLENBQUMsQ0FBQyJ9

/***/ },
/* 206 */
/***/ function(module, exports, __webpack_require__) {

	// style-loader: Adds some css to the DOM by adding a <style> tag
	
	// load the styles
	var content = __webpack_require__(207);
	if(typeof content === 'string') content = [[module.id, content, '']];
	// add the styles to the DOM
	var update = __webpack_require__(10)(content, {});
	if(content.locals) module.exports = content.locals;
	// Hot Module Replacement
	if(false) {
		// When the styles change, update the <style> tags
		if(!content.locals) {
			module.hot.accept("!!./../../../node_modules/css-loader/index.js!./userRating.css", function() {
				var newContent = require("!!./../../../node_modules/css-loader/index.js!./userRating.css");
				if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];
				update(newContent);
			});
		}
		// When the module is disposed, remove the <style> tags
		module.hot.dispose(function() { update(); });
	}

/***/ },
/* 207 */
/***/ function(module, exports, __webpack_require__) {

	exports = module.exports = __webpack_require__(9)();
	// imports
	
	
	// module
	exports.push([module.id, ".rating.default-theme {\r\n    unicode-bidi:bidi-override;\r\n    direction:rtl;\r\n    font-size:1.5em;\r\n}\r\n\r\n.rating.default-theme .star {\r\n\tfont-family:FontAwesome;\r\n\tfont-weight:normal;\r\n\tfont-style:normal;\r\n\tdisplay:inline-block;\r\n}\r\n\r\n.rating.default-theme .star:hover { cursor: pointer; }\r\n\r\n.rating.default-theme .star:before {\r\n\tcontent:\"\\F006\";\r\n\tpadding-right:5px;\r\n\tcolor:#999999;\r\n}\r\n\r\n.rating.default-theme .star.filled:before {\r\n\tcontent:\"\\F005\";\r\n\tcolor:#eec277;\r\n}\r\n\r\n.rating.default-theme .star:hover:before, .rating.default-theme .star:hover~.star:before { color:#ffd288; }\r\n\r\n.filled { color:#eec277; }\r\n", ""]);
	
	// exports


/***/ },
/* 208 */
/***/ function(module, exports, __webpack_require__) {

	// /// <reference path='../../../typings/commonjs.d.ts' />
	'use strict';
	var angular = __webpack_require__(1);
	var _ = __webpack_require__(18);
	var componentValidator_service_1 = __webpack_require__(116);
	exports.moduleName = 'rl.ui.components.validationGroup';
	exports.componentName = 'rlValidationGroup';
	exports.controllerName = 'ValidationGroupController';
	var ValidationGroupController = (function () {
	    function ValidationGroupController($scope, $timeout, componentValidatorFactory) {
	        this.$scope = $scope;
	        this.$timeout = $timeout;
	        this.componentValidatorFactory = componentValidatorFactory;
	    }
	    ValidationGroupController.prototype.$onInit = function () {
	        var _this = this;
	        this.$timeout(function () {
	            if (!_.isUndefined(_this.validator)) {
	                _this.groupValidator = _this.componentValidatorFactory.getInstance({
	                    form: _this.$scope.validationGroupForm,
	                    $scope: _this.$scope,
	                    validators: [_this.validator],
	                });
	            }
	        });
	    };
	    ValidationGroupController.$inject = ['$scope', '$timeout', componentValidator_service_1.factoryName];
	    return ValidationGroupController;
	}());
	exports.ValidationGroupController = ValidationGroupController;
	var validationGroup = {
	    transclude: true,
	    template: __webpack_require__(209),
	    controller: exports.controllerName,
	    controllerAs: 'group',
	    bindings: {
	        validator: '=',
	    },
	};
	angular.module(exports.moduleName, [componentValidator_service_1.moduleName])
	    .component(exports.componentName, validationGroup)
	    .controller(exports.controllerName, ValidationGroupController);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmFsaWRhdGlvbkdyb3VwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidmFsaWRhdGlvbkdyb3VwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBEQUEwRDtBQUUxRCxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNuQyxJQUFZLENBQUMsV0FBTSxRQUFRLENBQUMsQ0FBQTtBQU01QiwyQ0FLTyw4REFBOEQsQ0FBQyxDQUFBO0FBRTNELGtCQUFVLEdBQVcsa0NBQWtDLENBQUM7QUFDeEQscUJBQWEsR0FBVyxtQkFBbUIsQ0FBQztBQUM1QyxzQkFBYyxHQUFXLDJCQUEyQixDQUFDO0FBTWhFO0lBT0MsbUNBQW9CLE1BQTZCLEVBQ3JDLFFBQWlDLEVBQ2pDLHlCQUFxRDtRQUY3QyxXQUFNLEdBQU4sTUFBTSxDQUF1QjtRQUNyQyxhQUFRLEdBQVIsUUFBUSxDQUF5QjtRQUNqQyw4QkFBeUIsR0FBekIseUJBQXlCLENBQTRCO0lBQUcsQ0FBQztJQUVyRSwyQ0FBTyxHQUFQO1FBQUEsaUJBVUM7UUFUQSxJQUFJLENBQUMsUUFBUSxDQUFDO1lBQ2IsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLEtBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ3BDLEtBQUksQ0FBQyxjQUFjLEdBQUcsS0FBSSxDQUFDLHlCQUF5QixDQUFDLFdBQVcsQ0FBQztvQkFDaEUsSUFBSSxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUMsbUJBQW1CO29CQUNyQyxNQUFNLEVBQUUsS0FBSSxDQUFDLE1BQU07b0JBQ25CLFVBQVUsRUFBRSxDQUFDLEtBQUksQ0FBQyxTQUFTLENBQUM7aUJBQzVCLENBQUMsQ0FBQztZQUNKLENBQUM7UUFDRixDQUFDLENBQUMsQ0FBQztJQUNKLENBQUM7SUFmTSxpQ0FBTyxHQUFhLENBQUMsUUFBUSxFQUFFLFVBQVUsRUFBRSx3Q0FBNkIsQ0FBQyxDQUFDO0lBZ0JsRixnQ0FBQztBQUFELENBQUMsQUF0QkQsSUFzQkM7QUF0QlksaUNBQXlCLDRCQXNCckMsQ0FBQTtBQUVELElBQUksZUFBZSxHQUE4QjtJQUNoRCxVQUFVLEVBQUUsSUFBSTtJQUNoQixRQUFRLEVBQUUsT0FBTyxDQUFDLHdCQUF3QixDQUFDO0lBQzNDLFVBQVUsRUFBRSxzQkFBYztJQUMxQixZQUFZLEVBQUUsT0FBTztJQUNyQixRQUFRLEVBQUU7UUFDVCxTQUFTLEVBQUUsR0FBRztLQUNkO0NBQ0QsQ0FBQztBQUVGLE9BQU8sQ0FBQyxNQUFNLENBQUMsa0JBQVUsRUFBRSxDQUFDLHVDQUE0QixDQUFDLENBQUM7S0FDeEQsU0FBUyxDQUFDLHFCQUFhLEVBQUUsZUFBZSxDQUFDO0tBQ3pDLFVBQVUsQ0FBQyxzQkFBYyxFQUFFLHlCQUF5QixDQUFDLENBQUMifQ==

/***/ },
/* 209 */
/***/ function(module, exports) {

	module.exports = "<div class=\"content-group\" ng-form=\"validationGroupForm\">\r\n\t<div class=\"error-message\" ng-if=\"validationGroupForm.$error.customValidation\">\r\n\t\t<label>{{group.groupValidator.error}}</label>\r\n\t</div>\r\n\t<div ng-transclude></div>\r\n</div>"

/***/ },
/* 210 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	var angular = __webpack_require__(1);
	var date = __webpack_require__(211);
	exports.date = date;
	exports.moduleName = 'rl.ui.filters';
	angular.module(exports.moduleName, [
	    date.moduleName,
	]);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsdGVycy5tb2R1bGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmaWx0ZXJzLm1vZHVsZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBWSxPQUFPLFdBQU0sU0FBUyxDQUFDLENBQUE7QUFFbkMsSUFBWSxJQUFJLFdBQU0sb0JBQW9CLENBQUMsQ0FBQTtBQUVsQyxZQUFJO0FBRUYsa0JBQVUsR0FBVyxlQUFlLENBQUM7QUFFaEQsT0FBTyxDQUFDLE1BQU0sQ0FBQyxrQkFBVSxFQUFFO0lBQzFCLElBQUksQ0FBQyxVQUFVO0NBQ2YsQ0FBQyxDQUFDIn0=

/***/ },
/* 211 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var angular = __webpack_require__(1);
	var moment = __webpack_require__(74);
	var typescript_angular_utilities_1 = __webpack_require__(5);
	var __date = typescript_angular_utilities_1.services.date;
	var __object = typescript_angular_utilities_1.services.object;
	exports.moduleName = 'rl.ui.filters.date';
	exports.filterName = 'rlDate';
	dateFilter.$inject = [];
	function dateFilter() {
	    'use strict';
	    return function (date, includeTime) {
	        if (__object.objectUtility.isNullOrEmpty(date)) {
	            return '';
	        }
	        var momentDate = moment(date);
	        if (includeTime) {
	            return momentDate.format(__date.defaultFormats.dateTimeFormat) + ' ' + momentDate.zoneAbbr();
	        }
	        else {
	            return momentDate.format(__date.defaultFormats.dateFormat);
	        }
	    };
	}
	angular.module(exports.moduleName, [])
	    .filter(exports.filterName, dateFilter);
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS5maWx0ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkYXRlLmZpbHRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFZLE9BQU8sV0FBTSxTQUFTLENBQUMsQ0FBQTtBQUNuQyxJQUFZLE1BQU0sV0FBTSxRQUFRLENBQUMsQ0FBQTtBQUVqQyw2Q0FBeUIsOEJBQThCLENBQUMsQ0FBQTtBQUN4RCxJQUFPLE1BQU0sR0FBRyx1Q0FBUSxDQUFDLElBQUksQ0FBQztBQUM5QixJQUFPLFFBQVEsR0FBRyx1Q0FBUSxDQUFDLE1BQU0sQ0FBQztBQUV2QixrQkFBVSxHQUFXLG9CQUFvQixDQUFDO0FBQzFDLGtCQUFVLEdBQVcsUUFBUSxDQUFDO0FBTXpDLFVBQVUsQ0FBQyxPQUFPLEdBQUcsRUFBRSxDQUFDO0FBQ3hCO0lBQ0MsWUFBWSxDQUFDO0lBQ2IsTUFBTSxDQUFDLFVBQUMsSUFBb0IsRUFBRSxXQUFxQjtRQUNsRCxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsTUFBTSxDQUFDLEVBQUUsQ0FBQztRQUNYLENBQUM7UUFFRCxJQUFJLFVBQVUsR0FBa0IsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdDLEVBQUUsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDakIsTUFBTSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUMsR0FBRyxHQUFHLEdBQUcsVUFBVSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzlGLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNQLE1BQU0sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxjQUFjLENBQUMsVUFBVSxDQUFDLENBQUM7UUFDNUQsQ0FBQztJQUNGLENBQUMsQ0FBQztBQUNILENBQUM7QUFFRCxPQUFPLENBQUMsTUFBTSxDQUFDLGtCQUFVLEVBQUUsRUFBRSxDQUFDO0tBQzVCLE1BQU0sQ0FBQyxrQkFBVSxFQUFFLFVBQVUsQ0FBQyxDQUFDIn0=

/***/ },
/* 212 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';
	var ngModel = __webpack_require__(213);
	exports.ngModel = ngModel;
	var viewData = __webpack_require__(214);
	exports.viewData = viewData;
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZXMubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsidHlwZXMubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQztBQUViLElBQVksT0FBTyxXQUFNLGtCQUFrQixDQUFDLENBQUE7QUFHbkMsZUFBTztBQUZoQixJQUFZLFFBQVEsV0FBTSxZQUFZLENBQUMsQ0FBQTtBQUVyQixnQkFBUTtBQUFHIn0=

/***/ },
/* 213 */
/***/ function(module, exports) {

	'use strict';
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZm9ybVZhbGlkYXRvcnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmb3JtVmFsaWRhdG9ycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUMifQ==

/***/ },
/* 214 */
/***/ function(module, exports) {

	'use strict';
	//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlld0RhdGEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ2aWV3RGF0YS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUMifQ==

/***/ }
/******/ ]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMzk5NjFjMGQ0ZDY3ZWYyYjA5NWEiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3VpLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJhbmd1bGFyXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiYW5ndWxhci11aVwiIiwid2VicGFjazovLy8uL34vYW5ndWxhci1zYW5pdGl6ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2FuZ3VsYXItc2FuaXRpemUvYW5ndWxhci1zYW5pdGl6ZS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJybF91dGlsaXRpZXNcIiIsIndlYnBhY2s6Ly8vLi9saWJyYXJpZXMvYW5ndWxhci1ib290c3RyYXAtc2xpZGVyL3NsaWRlci5qcyIsIndlYnBhY2s6Ly8vLi9saWJyYXJpZXMvYW5ndWxhci1ib290c3RyYXAtc2xpZGVyL2Jvb3RzdHJhcC1zbGlkZXIubWluLmNzcz8wYzNlIiwid2VicGFjazovLy8uL2xpYnJhcmllcy9hbmd1bGFyLWJvb3RzdHJhcC1zbGlkZXIvYm9vdHN0cmFwLXNsaWRlci5taW4uY3NzIiwid2VicGFjazovLy8uL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL2xpYnJhcmllcy9hbmd1bGFyLWJvb3RzdHJhcC1zbGlkZXIvYm9vdHN0cmFwLXNsaWRlci5taW4uanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiJFwiIiwid2VicGFjazovLy8uL34vc2lnbmF0dXJlX3BhZC9zaWduYXR1cmVfcGFkLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9iZWhhdmlvcnMvYmVoYXZpb3JzLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvYmVoYXZpb3JzL2FsaWFzL2FsaWFzLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9iZWhhdmlvcnMvYXV0b3NhdmUvYXV0b3NhdmUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL2F1dG9zYXZlL2F1dG9zYXZlLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiX1wiIiwid2VicGFjazovLy8uL3NvdXJjZS9zZXJ2aWNlcy9hdXRvc2F2ZUFjdGlvbi9hdXRvc2F2ZUFjdGlvbi5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9zZXJ2aWNlcy9hdXRvc2F2ZS90cmlnZ2Vycy90cmlnZ2Vycy5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9zZXJ2aWNlcy9hdXRvc2F2ZS90cmlnZ2Vycy9vbkNoYW5nZVRyaWdnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL2F1dG9zYXZlL3RyaWdnZXJzL3RyaWdnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL2Zvcm0vZm9ybS5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9iZWhhdmlvcnMvcG9wb3Zlci9wb3BvdmVyLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9iZWhhdmlvcnMvcmVxdWlyZWQvcmVxdWlyZWQuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY29tcG9uZW50cy5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvYnVzeS9idXN5LmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2J1c3kvYnVzeS5jc3M/OTNlMCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9idXN5L2J1c3kuY3NzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NvbXBvbmVudHNEZWZhdWx0VGhlbWUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvYnV0dG9uL2J1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9idXR0b24vYnV0dG9uLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvYnV0dG9uQXN5bmMvYnV0dG9uQXN5bmMuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvYnV0dG9uQXN5bmMvYnV0dG9uQXN5bmMuaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9idXR0b25MaW5rL2J1dHRvbkxpbmsuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvYnV0dG9uTGluay9idXR0b25MaW5rLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvYnV0dG9uU3VibWl0L2J1dHRvblN1Ym1pdC5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9idXR0b25TdWJtaXQvYnV0dG9uU3VibWl0Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvYnV0dG9uVG9nZ2xlL2J1dHRvblRvZ2dsZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9idXR0b25Ub2dnbGUvYnV0dG9uVG9nZ2xlLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jYXJkQ29udGFpbmVyLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2NhcmQvY2FyZC5qcyIsIndlYnBhY2s6Ly8vLi9+L3J4L2Rpc3QvcnguYWxsLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9wcm9jZXNzL2Jyb3dzZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jYXJkL2hlYWRlckNvbHVtbi9oZWFkZXJDb2x1bW4ubW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvY2FyZC9oZWFkZXJDb2x1bW4vaGVhZGVyQ29sdW1uLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvY2FyZC9oZWFkZXJDb2x1bW4vc2l6ZUZvckJyZWFrcG9pbnRzLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9zZXJ2aWNlcy9icmVha3BvaW50cy9icmVha3BvaW50LmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvY2FyZC9jYXJkLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jYXJkU2VhcmNoL2NhcmRTZWFyY2guanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jYXJkU2VhcmNoL2NhcmRTZWFyY2guaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2NvbHVtbkhlYWRlci9jb2x1bW5IZWFkZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9zb3J0cy9zb3J0RGlyZWN0aW9uLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZGF0YVNvdXJjZXMvZGF0YVNvdXJjZXMubW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc29ydHMvc29ydHMubW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc29ydHMvbWVyZ2VTb3J0L21lcmdlU29ydC5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc29ydHMvc29ydGVyL3NvcnRlci5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc29ydHMvc29ydC5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RhdGFTb3VyY2VzL2NsaWVudFNlcnZlckRhdGFTb3VyY2UvY2xpZW50U2VydmVyRGF0YVNvdXJjZS5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZGF0YVNvdXJjZXMvYXN5bmNEYXRhU291cmNlLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9kYXRhU291cmNlcy9kYXRhU291cmNlQmFzZS5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZGF0YVNvdXJjZXMvZGF0YVNvdXJjZUV2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RhdGFTb3VyY2VzL2RhdGFTb3VyY2VQcm9jZXNzb3Iuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RhdGFTb3VyY2VzL2RhdGFQYWdlci9kYXRhUGFnZXIuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RhdGFTb3VyY2VzL2RhdGFTZXJ2aWNlRGF0YVNvdXJjZS9kYXRhU2VydmljZURhdGFTb3VyY2Uuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RhdGFTb3VyY2VzL3NlcnZlclNpZGVEYXRhU291cmNlL3NlcnZlclNpZGVEYXRhU291cmNlLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9kYXRhU291cmNlcy9zaW1wbGVEYXRhU291cmNlL3NpbXBsZURhdGFTb3VyY2Uuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RhdGFTb3VyY2VzL3NtYXJ0RGF0YVNvdXJjZS9zbWFydERhdGFTb3VyY2Uuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZmlsdGVycy5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2NvbHVtblNlYXJjaEZpbHRlci9jb2x1bW5TZWFyY2hGaWx0ZXIuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZGF0ZUZpbHRlci9kYXRlRmlsdGVyLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZGF0ZUZpbHRlci9kYXRlRmlsdGVyLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9tZW50XCIiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2RhdGVGaWx0ZXIvZGF0ZUZpbHRlci5jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2RhdGVGaWx0ZXIvZGF0ZUZpbHRlci5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9maWx0ZXJHcm91cC9maWx0ZXJHcm91cC5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2ZpbHRlckdyb3VwL2ZpbHRlck9wdGlvbi9maWx0ZXJPcHRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2ZpbHRlckdyb3VwL2ZpbHRlck9wdGlvbi9maWx0ZXJPcHRpb24uaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZmlsdGVyR3JvdXAvbW9kZUZpbHRlckdyb3VwL21vZGVGaWx0ZXJHcm91cC5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9maWx0ZXJHcm91cC9maWx0ZXJHcm91cC5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9maWx0ZXJHcm91cC9yYW5nZUZpbHRlckdyb3VwL3JhbmdlRmlsdGVyR3JvdXAuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZmlsdGVyR3JvdXAvZmlsdGVyR3JvdXAuZGlyZWN0aXZlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9maWx0ZXJHcm91cC9maWx0ZXJHcm91cC5kaXJlY3RpdmUuaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvc2VsZWN0RmlsdGVyL3NlbGVjdEZpbHRlci5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL3NlbGVjdEZpbHRlci9zZWxlY3RGaWx0ZXIuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvc2VsZWN0RmlsdGVyL3NlbGVjdEZpbHRlci5jb21wb25lbnQuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL3NlbGVjdEZpbHRlci9zZWxlY3RGaWx0ZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvY2FyZENvbnRhaW5lckZpbHRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2NhcmRDb250YWluZXJGaWx0ZXJzLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9pdGVtQ291bnQvaXRlbUNvdW50LmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvaXRlbUNvdW50L2l0ZW1Db3VudC5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvcGFnZXIvcGFnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9wYWdlci9wYWdlci5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvcGFnZVNpemUvcGFnZVNpemUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9wYWdlU2l6ZS9wYWdlU2l6ZS5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc2VsZWN0aW9uQ29udHJvbC9zZWxlY3Rpb25Db250cm9sLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc2VsZWN0aW9uQ29udHJvbC9zZWxlY3Rpb25Db250cm9sLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jYXJkQ29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvY2FyZENvbnRhaW5lci5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvY2FyZENvbnRhaW5lckJ1aWxkZXIuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RlZmF1bHRDb21wb25lbnRzLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZGVmYXVsdENhcmRDb250YWluZXJIZWFkZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RlZmF1bHRDYXJkQ29udGFpbmVyRm9vdGVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2hlY2tib3gvY2hlY2tib3guanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2hlY2tib3gvY2hlY2tib3guY3NzPzQ5MGIiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY2hlY2tib3gvY2hlY2tib3guY3NzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2NoZWNrYm94L2NoZWNrYm94Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvY29tbWFMaXN0L2NvbW1hTGlzdC5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9kYXRlVGltZS9kYXRlVGltZS5qcyIsIndlYnBhY2s6Ly8vLi9saWJyYXJpZXMvYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyL2luZGV4LmpzIiwid2VicGFjazovLy8uL2xpYnJhcmllcy9ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIvYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLmNzcz82MzRlIiwid2VicGFjazovLy8uL2xpYnJhcmllcy9ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIvYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLmNzcyIsIndlYnBhY2s6Ly8vLi9saWJyYXJpZXMvYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyL2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlci5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9pbnB1dC9pbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2Uvc2VydmljZXMvY29tcG9uZW50VmFsaWRhdG9yL2NvbXBvbmVudFZhbGlkYXRvci5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2RhdGVUaW1lL2RhdGVUaW1lLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvZGF0ZVRpbWVTdGF0aWMvZGF0ZVRpbWVTdGF0aWMuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvZGF0ZVRpbWVTdGF0aWMvZGF0ZVRpbWVTdGF0aWMuaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9kaWFsb2cvZGlhbG9nLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9zZXJ2aWNlcy9kaWFsb2cvZGlhbG9nLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL2RpYWxvZy9ib290c3RyYXBNb2RhbERpYWxvZy9ib290c3RyYXBNb2RhbERpYWxvZy5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL2RpYWxvZy9ib290c3RyYXBNb2RhbERpYWxvZy9ib290c3RyYXBNb2RhbERpYWxvZy5jb250cm9sbGVyLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9zZXJ2aWNlcy9kaWFsb2cvYm9vdHN0cmFwTW9kYWxEaWFsb2cvYm9vdHN0cmFwTW9kYWxEaWFsb2cuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2Uvc2VydmljZXMvZGlhbG9nL3Byb21wdERpYWxvZy5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2RpYWxvZy9hdXRvc2F2ZURpYWxvZ0Zvb3Rlci5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL2RpYWxvZy9kaWFsb2cuaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9mb3JtL2Zvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvZ2VuZXJpY0NvbnRhaW5lci9nZW5lcmljQ29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9zZXJ2aWNlcy9qcXVlcnkvanF1ZXJ5LnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL3RlbXBsYXRlTG9hZGVyL3RlbXBsYXRlTG9hZGVyLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvbGF6eUxvYWQvbGF6eUxvYWQuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvbG9uZ0NsaWNrQnV0dG9uL2xvbmdDbGlja0J1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9sb25nQ2xpY2tCdXR0b24vbG9uZ0NsaWNrQnV0dG9uLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvbWVzc2FnZUxvZy9tZXNzYWdlTG9nLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9tZXNzYWdlTG9nL21lc3NhZ2VMb2cuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9tZXNzYWdlTG9nL21lc3NhZ2VMb2cuZGlyZWN0aXZlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9zZXJ2aWNlcy9zZXJ2aWNlcy5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL2JyZWFrcG9pbnRzL2JyZWFrcG9pbnRzLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2Uvc2VydmljZXMvd2luZG93V3JhcHBlci93aW5kb3dXcmFwcGVyLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL2JyZWFrcG9pbnRzL3Zpc2libGVCcmVha3BvaW50LnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL2JyZWFrcG9pbnRzL2JyZWFrcG9pbnRzLnNlcnZpY2UuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3NlcnZpY2VzL2NvbnRlbnRQcm92aWRlci9jb250ZW50UHJvdmlkZXIuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2Uvc2VydmljZXMvZG9jdW1lbnRXcmFwcGVyL2RvY3VtZW50V3JhcHBlci5zZXJ2aWNlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL21lc3NhZ2VMb2cvZWRpdGVkQnlQb3BvdmVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvbWVzc2FnZUxvZy9tZXNzYWdlTG9nRWRpdERpYWxvZy5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL21lc3NhZ2VMb2cvbWVzc2FnZUxvZy5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL21lc3NhZ2VMb2cvZWRpdGFibGVNZXNzYWdlTG9nLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL211bHRpU3RlcEluZGljYXRvci9tdWx0aVN0ZXBJbmRpY2F0b3IuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvbXVsdGlTdGVwSW5kaWNhdG9yL211bHRpU3RlcEluZGljYXRvci5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3JhZGlvL3JhZGlvLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9yYWRpby9yYWRpb0dyb3VwLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3JhZGlvL3JhZGlvLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3JhdGluZ0Jhci9yYXRpbmdCYXIuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvcmF0aW5nQmFyL3JhdGluZ0Jhci5jc3M/NWZlMiIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9yYXRpbmdCYXIvcmF0aW5nQmFyLmNzcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9yYXRpbmdCYXIvcmF0aW5nQmFyQmFja2dyb3VuZHMuc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9yYXRpbmdCYXIvcmF0aW5nQmFyQ2xhc3Muc2VydmljZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9yaWNoVGV4dEVkaXRvci9yaWNoVGV4dEVkaXRvci5qcyIsIndlYnBhY2s6Ly8vLi9+L25nLXdpZy9kaXN0L2Nzcy9uZy13aWcuY3NzP2JmYjQiLCJ3ZWJwYWNrOi8vLy4vfi9uZy13aWcvZGlzdC9jc3Mvbmctd2lnLmNzcyIsIndlYnBhY2s6Ly8vLi9+L25nLXdpZy9kaXN0L25nLXdpZy5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9yaWNoVGV4dEVkaXRvci9lZGl0b3JCdXR0b25zLmNzcz8xZWVjIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3JpY2hUZXh0RWRpdG9yL2VkaXRvckJ1dHRvbnMuY3NzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3JpY2hUZXh0RWRpdG9yL3JpY2hUZXh0RWRpdG9yLmNvbmZpZy5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy9yaWNoVGV4dEVkaXRvci9oZWFkZXJCdXR0b24uanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvcmljaFRleHRFZGl0b3IvcGFyYWdyYXBoQnV0dG9uLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3JpY2hUZXh0RWRpdG9yL3JpY2hUZXh0RWRpdG9yLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvc2VsZWN0L3NlbGVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3VpLXNlbGVjdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L3VpLXNlbGVjdC9kaXN0L3NlbGVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3VpLXNlbGVjdC9kaXN0L3NlbGVjdC5jc3M/ZDI3NCIsIndlYnBhY2s6Ly8vLi9+L3VpLXNlbGVjdC9kaXN0L3NlbGVjdC5jc3MiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvc2VsZWN0L3NlbGVjdC5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3NpZ25hdHVyZVBhZC9zaWduYXR1cmVQYWQuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvc2ltcGxlQ2FyZExpc3Qvc2ltcGxlQ2FyZExpc3QubW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3NpbXBsZUNhcmRMaXN0L3NpbXBsZUNhcmQuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvc2ltcGxlQ2FyZExpc3Qvc2ltcGxlQ2FyZC5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3NpbXBsZUNhcmRMaXN0L3NpbXBsZUNhcmRMaXN0LmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3NwaW5uZXIvc3Bpbm5lci5qcyIsIndlYnBhY2s6Ly8vLi9saWJyYXJpZXMvYm9vdHN0cmFwLXRvdWNoc3Bpbi9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9saWJyYXJpZXMvYm9vdHN0cmFwLXRvdWNoc3Bpbi9qcXVlcnkuYm9vdHN0cmFwLXRvdWNoc3Bpbi5jc3M/NGM3MSIsIndlYnBhY2s6Ly8vLi9saWJyYXJpZXMvYm9vdHN0cmFwLXRvdWNoc3Bpbi9qcXVlcnkuYm9vdHN0cmFwLXRvdWNoc3Bpbi5jc3MiLCJ3ZWJwYWNrOi8vLy4vbGlicmFyaWVzL2Jvb3RzdHJhcC10b3VjaHNwaW4vanF1ZXJ5LmJvb3RzdHJhcC10b3VjaHNwaW4uanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvc3Bpbm5lci9zcGlubmVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvc3RyaW5nV2l0aFdhdGVybWFyay9zdHJpbmdXaXRoV2F0ZXJtYXJrLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3RhYnMvdGFicy5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdGFicy90YWIuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdGFicy90YWIuY3NzP2ZmNWEiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdGFicy90YWIuY3NzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3RhYnMvdGFiLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdGFicy90YWJzZXQuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdGFicy90YWJzZXQuaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy90ZW1wbGF0ZVJlbmRlcmVyL3RlbXBsYXRlUmVuZGVyZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdGV4dGFyZWEvdGV4dGFyZWEuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdGV4dGFyZWEvdGV4dGFyZWEuaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy90ZXh0Ym94L3RleHRib3guanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdGV4dGJveC90ZXh0Ym94Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdHlwZWFoZWFkL3R5cGVhaGVhZC5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy90eXBlYWhlYWQvdHlwZWFoZWFkLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdHlwZWFoZWFkTGlzdC90eXBlYWhlYWRMaXN0LmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3R5cGVhaGVhZExpc3QvdHlwZWFoZWFkSXRlbS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy90eXBlYWhlYWRMaXN0L2RlZmF1bHRMaXN0SXRlbS5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3R5cGVhaGVhZExpc3QvdHlwZWFoZWFkTGlzdC5odG1sIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3VzZXJSYXRpbmcvdXNlclJhdGluZy5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy91c2VyUmF0aW5nL3VzZXJSYXRpbmcuY3NzPzdkZmUiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL2NvbXBvbmVudHMvdXNlclJhdGluZy91c2VyUmF0aW5nLmNzcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvY29tcG9uZW50cy92YWxpZGF0aW9uR3JvdXAvdmFsaWRhdGlvbkdyb3VwLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS9jb21wb25lbnRzL3ZhbGlkYXRpb25Hcm91cC92YWxpZGF0aW9uR3JvdXAuaHRtbCIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvZmlsdGVycy9maWx0ZXJzLm1vZHVsZS5qcyIsIndlYnBhY2s6Ly8vLi9zb3VyY2UvZmlsdGVycy9kYXRlL2RhdGUuZmlsdGVyLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS90eXBlcy90eXBlcy5tb2R1bGUuanMiLCJ3ZWJwYWNrOi8vLy4vc291cmNlL3R5cGVzL2Zvcm1WYWxpZGF0b3JzLmpzIiwid2VicGFjazovLy8uL3NvdXJjZS90eXBlcy92aWV3RGF0YS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLG1CQUFrQiwrQ0FBK0M7QUFDakUsbUJBQWtCLCtDQUErQzs7QUFFakU7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsbUJBQWtCLGlDQUFpQzs7QUFFbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBbUIsZUFBZTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0JBQW1CLFlBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBQzs7QUFFRDs7QUFFQSxFQUFDOzs7Ozs7O0FDcFlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsbXJCOzs7Ozs7QUNqQjNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLHU0RDs7Ozs7O0FDdkMzQztBQUNBO0FB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O0FBQ0EsVUFBUyxlQUFlLG1DQUFtQyxFQUFFO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0EsNENBQTJDLCt0Rjs7Ozs7O0FDbEUzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2IsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQSw0Q0FBMkMsMnFDOzs7Ozs7QUMzQjNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQSw0Q0FBMkMsMjNCOzs7Ozs7QUNsQjNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLCszRTs7Ozs7O0FDdEQzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyx1c0U7Ozs7OztBQzdEM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBK0QsaUJBQWlCO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywrMEM7Ozs7OztBQ2xDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsK2tCOzs7Ozs7QUNoQjNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsdWxGOzs7Ozs7QUNwRDNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywrZ0c7Ozs7OztBQzFEM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywrTDs7Ozs7O0FDTDNDO0FBQ0E7QUFDQTtBQUNBLG9CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUVBQWtFLGFBQWE7QUFDL0UsaUVBQWdFLGFBQWE7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsdW9JOzs7Ozs7QUNoRjNDO0FBQ0E7QUFDQTtBQUNBLG9CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0EsNENBQTJDLG11RDs7Ozs7O0FDM0MzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBLDRDQUEyQyxta0w7Ozs7OztBQ2hIM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywydkI7Ozs7OztBQ2QzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBa0QsZ0RBQWdELEVBQUU7QUFDcEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyRUFBMEU7QUFDMUU7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxVQUFT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QUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVCwrRUFBOEUsc0JBQXNCLEVBQUU7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSx3RUFBdUUsOEJBQThCLEVBQUU7QUFDdkc7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLCsrSjs7Ozs7O0FDeEgzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywrekI7Ozs7OztBQ3RCM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywrL0Q7Ozs7OztBQzFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsMndCOzs7Ozs7QUNoQjNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBLG9CQUFtQixzQkFBc0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLDIrSDs7Ozs7O0FDOUYzQztBQUNBO0FBQ0E7QUFDQSxvQkFBbUIsc0JBQXNCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsbXpHOzs7Ozs7QUM1RTNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBMkQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0EsNENBQTJDLDI2Qzs7Ozs7O0FDckMzQyw4bUJBQTZtQiw4QkFBOEIsSUFBSSwyQ0FBMkMsbVc7Ozs7OztBQ0ExckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyx1cEI7Ozs7OztBQ2QzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxTEFBb0wsY0FBYywyREFBMkQsbUJBQW1CO0FBQ2hSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLCsxRDs7Ozs7O0FDdkMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdFQUErRDtBQUMvRDtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQSw0Q0FBMkMsdTBDOzs7Ozs7QUMxQzNDLHVJQUFzSSxjQUFjLGdHQUFnRyxtQkFBbUIsMEI7Ozs7OztBQ0F2UTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyx1cUQ7Ozs7OztBQzFDM0Msd0s7Ozs7OztBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFjLHNDQUFzQztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLHVrQjs7Ozs7O0FDWDNDLDZHQUE0RyxtREFBbUQsTUFBTSwwQ0FBMEMsOEI7Ozs7OztBQ0EvTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTRDLCtCQUErQixFQUFFO0FBQzdFLDZDQUE0Qyw2QkFBNkIsRUFBRTtBQUMzRSw2Q0FBNEMsMEJBQTBCLEVBQUU7QUFDeEU7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBLGVBQWMsc0NBQXNDO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsbXpKOzs7Ozs7QUN2RzNDLDRLQUEySywrQkFBK0IsdUtBQXVLLCtCQUErQixvR0FBb0csWUFBWSxpR0FBaUcsc0NBQXNDLGtCQUFrQixNQUFNLHNHQUFzRyxrQ0FBa0MseUpBQXlKLGtDQUFrQyxxRzs7Ozs7O0FDQWwrQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE0QywrQkFBK0IsRUFBRTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0EsZUFBYyxzQ0FBc0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsbThEOzs7Ozs7QUM5QzNDLGtROzs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF3QywyQ0FBMkMsRUFBRTtBQUNyRjtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0EsZUFBYyxzQ0FBc0M7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsbTRGOzs7Ozs7QUMvRDNDLHdGQUF1Rix5QkFBeUIsdW1COzs7Ozs7QUNBaEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrRUFBaUUsYUFBYTtBQUM5RTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOERBQTZELHlCQUF5QixFQUFFO0FBQ3hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyx1bVg7Ozs7OztBQzlQM0MsZ1RBQStTLDBDQUEwQyw4aUNBQThpQyxvOEU7Ozs7OztBQ0F2NEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0EsTUFBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywraVM7Ozs7OztBQzVMM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsK2M7Ozs7OztBQ1YzQywyTzs7Ozs7O0FDQUEsd2dCOzs7Ozs7QUNBQTtBQUNB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OztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1RUFBc0U7QUFDdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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O0FBQ0E7QUFDQSxZQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVTs7QUFFVjtBQUNBO0FBQ0E7QUFDQSxXQUFVOztBQUVWO0FBQ0E7QUFDQTtBQUNBLFdBQVU7O0FBRVY7QUFDQTtBQUNBO0FBQ0EsV0FBVTs7QUFFVjtBQUNBO0FBQ0E7QUFDQSxXQUFVOztBQUVWO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVTs7QUFFVjtBQUNBO0FBQ0E7QUFDQSxXQUFVOztBQUVWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBZ0MsVUFBVTtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0EsaUNBQWdDO0FBQ2hDO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBLDJFQUEwRTtBQUMxRSw4RUFBNkU7QUFDN0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVc7QUFDWCxXQUFVO0FBQ1Y7QUFDQTtBQUNBLFlBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxZQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBLFdBQVU7QUFDVjtBQUNBO0FBQ0EsV0FBVTtBQUNWLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBVztBQUNYLFdBQVU7QUFDVjtBQUNBO0FBQ0EsWUFBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFlBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBLHNCQUFxQixvQkFBb0I7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVTtBQUNWO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBbUM7QUFDbkMscUJBQW9CLDRCQUE0QjtBQUNoRDtBQUNBO0FBQ0EsWUFBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FB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QTtBQUNBLFVBQVM7QUFDVCxvQ0FBbUMsc0JBQXNCLEVBQUU7QUFDM0Q7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYTtBQUNiO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsK25NOzs7Ozs7QUNuSjNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsdTFDOzs7Ozs7QUN0QzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsdTBCOzs7Ozs7QUNwQjNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0E7QUFDQSw0Q0FBMkMsK2hDOzs7Ozs7QUN6QjNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBQztBQUNEO0FBQ0EsNENBQTJDLDJrQjs7Ozs7O0FDckIzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBLDRDQUEyQywraEY7Ozs7OztBQ3ZEM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUE4QjtBQUM5Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0EsK0JBQThCO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0EscURBQW9EOztBQUVwRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBLG9EQUFtRDs7QUFFbkQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQSxtREFBa0Q7O0FBRWxEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxVQUFTOztBQUVUO0FBQ0Esa0RBQWlEOztBQUVqRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0EsVUFBUzs7QUFFVDtBQUNBO0FBQ0EsVUFBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVB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QUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBMkMsMnFEOzs7Ozs7QUMxQzNDLDBMQUF5TCw0QkFBNEIsOEQ7Ozs7OztBQ0FyTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTJDLG1aOzs7Ozs7QUNSM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQywyeUM7Ozs7OztBQzFCM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUEyQyxtVDs7Ozs7O0FDTDNDO0FBQ0EsNENBQTJDLG1MOzs7Ozs7QUNEM0M7QUFDQSw0Q0FBMkMsbUsiLCJmaWxlIjoiY29tcG9uZW50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIm91dHB1dFwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgMzk5NjFjMGQ0ZDY3ZWYyYjA5NWFcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG5yZXF1aXJlKCdhbmd1bGFyLXVpLWJvb3RzdHJhcCcpO1xyXG5yZXF1aXJlKCdhbmd1bGFyLXNhbml0aXplJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnJlcXVpcmUoJy4uL2xpYnJhcmllcy9hbmd1bGFyLWJvb3RzdHJhcC1zbGlkZXIvc2xpZGVyJyk7XHJcbnJlcXVpcmUoJ3NpZ25hdHVyZV9wYWQnKTtcclxudmFyIGJlaGF2aW9ycyA9IHJlcXVpcmUoJy4vYmVoYXZpb3JzL2JlaGF2aW9ycy5tb2R1bGUnKTtcclxuZXhwb3J0cy5iZWhhdmlvcnMgPSBiZWhhdmlvcnM7XHJcbnZhciBjb21wb25lbnRzID0gcmVxdWlyZSgnLi9jb21wb25lbnRzL2NvbXBvbmVudHMubW9kdWxlJyk7XHJcbmV4cG9ydHMuY29tcG9uZW50cyA9IGNvbXBvbmVudHM7XHJcbnZhciBmaWx0ZXJzID0gcmVxdWlyZSgnLi9maWx0ZXJzL2ZpbHRlcnMubW9kdWxlJyk7XHJcbmV4cG9ydHMuZmlsdGVycyA9IGZpbHRlcnM7XHJcbnZhciBzZXJ2aWNlcyA9IHJlcXVpcmUoJy4vc2VydmljZXMvc2VydmljZXMubW9kdWxlJyk7XHJcbmV4cG9ydHMuc2VydmljZXMgPSBzZXJ2aWNlcztcclxudmFyIHR5cGVzID0gcmVxdWlyZSgnLi90eXBlcy90eXBlcy5tb2R1bGUnKTtcclxuZXhwb3J0cy50eXBlcyA9IHR5cGVzO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWknO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgICd1aS5ib290c3RyYXAnLFxyXG4gICAgJ3VpLmJvb3RzdHJhcC1zbGlkZXInLFxyXG4gICAgJ25nU2FuaXRpemUnLFxyXG4gICAgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLm5hbWUsXHJcbiAgICBiZWhhdmlvcnMubW9kdWxlTmFtZSxcclxuICAgIGNvbXBvbmVudHMubW9kdWxlTmFtZSxcclxuICAgIGZpbHRlcnMubW9kdWxlTmFtZSxcclxuICAgIHNlcnZpY2VzLm1vZHVsZU5hbWUsXHJcbl0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lkV2t1Ylc5a2RXeGxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWRXa3ViVzlrZFd4bExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEZsQlFWa3NRMEZCUXp0QlFVVmlMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlJXNURMRkZCUVU4c2MwSkJRWE5DTEVOQlFVTXNRMEZCUVR0QlFVTTVRaXhSUVVGUExHdENRVUZyUWl4RFFVRkRMRU5CUVVFN1FVRkZNVUlzTmtOQlFYZERMRGhDUVVFNFFpeERRVUZETEVOQlFVRTdRVUZGZGtVc1VVRkJUeXc0UTBGQk9FTXNRMEZCUXl4RFFVRkJPMEZCUlhSRUxGRkJRVThzWlVGQlpTeERRVUZETEVOQlFVRTdRVUZGZGtJc1NVRkJXU3hUUVVGVExGZEJRVTBzT0VKQlFUaENMRU5CUVVNc1EwRkJRVHRCUVUxcVJDeHBRa0ZCVXp0QlFVeHNRaXhKUVVGWkxGVkJRVlVzVjBGQlRTeG5RMEZCWjBNc1EwRkJReXhEUVVGQk8wRkJTM3BETEd0Q1FVRlZPMEZCU2psQ0xFbEJRVmtzVDBGQlR5eFhRVUZOTERCQ1FVRXdRaXhEUVVGRExFTkJRVUU3UVVGSmNFSXNaVUZCVHp0QlFVaDJReXhKUVVGWkxGRkJRVkVzVjBGQlRTdzBRa0ZCTkVJc1EwRkJReXhEUVVGQk8wRkJSMlFzWjBKQlFWRTdRVUZHYWtRc1NVRkJXU3hMUVVGTExGZEJRVTBzYzBKQlFYTkNMRU5CUVVNc1EwRkJRVHRCUVVWTExHRkJRVXM3UVVGRk4wTXNhMEpCUVZVc1IwRkJWeXhQUVVGUExFTkJRVU03UVVGRmVFTXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTzBsQlF6RkNMR05CUVdNN1NVRkRaQ3h4UWtGQmNVSTdTVUZEY2tJc1dVRkJXVHRKUVVOYUxHMURRVUZsTzBsQlJXWXNVMEZCVXl4RFFVRkRMRlZCUVZVN1NVRkRjRUlzVlVGQlZTeERRVUZETEZWQlFWVTdTVUZEY2tJc1QwRkJUeXhEUVVGRExGVkJRVlU3U1VGRGJFSXNVVUZCVVN4RFFVRkRMRlZCUVZVN1EwRkRia0lzUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvdWkubW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiKGZ1bmN0aW9uKCkgeyBtb2R1bGUuZXhwb3J0cyA9IHRoaXNbXCJhbmd1bGFyXCJdOyB9KCkpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJhbmd1bGFyXCJcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIoZnVuY3Rpb24oKSB7IG1vZHVsZS5leHBvcnRzID0gdGhpc1tcImFuZ3VsYXItdWlcIl07IH0oKSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcImFuZ3VsYXItdWlcIlxuICoqIG1vZHVsZSBpZCA9IDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInJlcXVpcmUoJy4vYW5ndWxhci1zYW5pdGl6ZScpO1xubW9kdWxlLmV4cG9ydHMgPSAnbmdTYW5pdGl6ZSc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9hbmd1bGFyLXNhbml0aXplL2luZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBAbGljZW5zZSBBbmd1bGFySlMgdjEuNS4wXG4gKiAoYykgMjAxMC0yMDE2IEdvb2dsZSwgSW5jLiBodHRwOi8vYW5ndWxhcmpzLm9yZ1xuICogTGljZW5zZTogTUlUXG4gKi9cbihmdW5jdGlvbih3aW5kb3csIGFuZ3VsYXIsIHVuZGVmaW5lZCkgeyd1c2Ugc3RyaWN0JztcblxuLyogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKlxuICogICAgIEFueSBjb21taXRzIHRvIHRoaXMgZmlsZSBzaG91bGQgYmUgcmV2aWV3ZWQgd2l0aCBzZWN1cml0eSBpbiBtaW5kLiAgKlxuICogICBDaGFuZ2VzIHRvIHRoaXMgZmlsZSBjYW4gcG90ZW50aWFsbHkgY3JlYXRlIHNlY3VyaXR5IHZ1bG5lcmFiaWxpdGllcy4gKlxuICogICAgICAgICAgQW4gYXBwcm92YWwgZnJvbSAyIENvcmUgbWVtYmVycyB3aXRoIGhpc3Rvcnkgb2YgbW9kaWZ5aW5nICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgdGhpcyBmaWxlIGlzIHJlcXVpcmVkLiAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICogIERvZXMgdGhlIGNoYW5nZSBzb21laG93IGFsbG93IGZvciBhcmJpdHJhcnkgamF2YXNjcmlwdCB0byBiZSBleGVjdXRlZD8gKlxuICogICAgT3IgYWxsb3dzIGZvciBzb21lb25lIHRvIGNoYW5nZSB0aGUgcHJvdG90eXBlIG9mIGJ1aWx0LWluIG9iamVjdHM/ICAgKlxuICogICAgIE9yIGdpdmVzIHVuZGVzaXJlZCBhY2Nlc3MgdG8gdmFyaWFibGVzIGxpa2VzIGRvY3VtZW50IG9yIHdpbmRvdz8gICAgKlxuICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKiAqICogKi9cblxudmFyICRzYW5pdGl6ZU1pbkVyciA9IGFuZ3VsYXIuJCRtaW5FcnIoJyRzYW5pdGl6ZScpO1xuXG4vKipcbiAqIEBuZ2RvYyBtb2R1bGVcbiAqIEBuYW1lIG5nU2FuaXRpemVcbiAqIEBkZXNjcmlwdGlvblxuICpcbiAqICMgbmdTYW5pdGl6ZVxuICpcbiAqIFRoZSBgbmdTYW5pdGl6ZWAgbW9kdWxlIHByb3ZpZGVzIGZ1bmN0aW9uYWxpdHkgdG8gc2FuaXRpemUgSFRNTC5cbiAqXG4gKlxuICogPGRpdiBkb2MtbW9kdWxlLWNvbXBvbmVudHM9XCJuZ1Nhbml0aXplXCI+PC9kaXY+XG4gKlxuICogU2VlIHtAbGluayBuZ1Nhbml0aXplLiRzYW5pdGl6ZSBgJHNhbml0aXplYH0gZm9yIHVzYWdlLlxuICovXG5cbi8qKlxuICogQG5nZG9jIHNlcnZpY2VcbiAqIEBuYW1lICRzYW5pdGl6ZVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqICAgU2FuaXRpemVzIGFuIGh0bWwgc3RyaW5nIGJ5IHN0cmlwcGluZyBhbGwgcG90ZW50aWFsbHkgZGFuZ2Vyb3VzIHRva2Vucy5cbiAqXG4gKiAgIFRoZSBpbnB1dCBpcyBzYW5pdGl6ZWQgYnkgcGFyc2luZyB0aGUgSFRNTCBpbnRvIHRva2Vucy4gQWxsIHNhZmUgdG9rZW5zIChmcm9tIGEgd2hpdGVsaXN0KSBhcmVcbiAqICAgdGhlbiBzZXJpYWxpemVkIGJhY2sgdG8gcHJvcGVybHkgZXNjYXBlZCBodG1sIHN0cmluZy4gVGhpcyBtZWFucyB0aGF0IG5vIHVuc2FmZSBpbnB1dCBjYW4gbWFrZVxuICogICBpdCBpbnRvIHRoZSByZXR1cm5lZCBzdHJpbmcuXG4gKlxuICogICBUaGUgd2hpdGVsaXN0IGZvciBVUkwgc2FuaXRpemF0aW9uIG9mIGF0dHJpYnV0ZSB2YWx1ZXMgaXMgY29uZmlndXJlZCB1c2luZyB0aGUgZnVuY3Rpb25zXG4gKiAgIGBhSHJlZlNhbml0aXphdGlvbldoaXRlbGlzdGAgYW5kIGBpbWdTcmNTYW5pdGl6YXRpb25XaGl0ZWxpc3RgIG9mIHtAbGluayBuZy4kY29tcGlsZVByb3ZpZGVyXG4gKiAgIGAkY29tcGlsZVByb3ZpZGVyYH0uXG4gKlxuICogICBUaGUgaW5wdXQgbWF5IGFsc28gY29udGFpbiBTVkcgbWFya3VwIGlmIHRoaXMgaXMgZW5hYmxlZCB2aWEge0BsaW5rICRzYW5pdGl6ZVByb3ZpZGVyfS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbCBIVE1MIGlucHV0LlxuICogQHJldHVybnMge3N0cmluZ30gU2FuaXRpemVkIEhUTUwuXG4gKlxuICogQGV4YW1wbGVcbiAgIDxleGFtcGxlIG1vZHVsZT1cInNhbml0aXplRXhhbXBsZVwiIGRlcHM9XCJhbmd1bGFyLXNhbml0aXplLmpzXCI+XG4gICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICA8c2NyaXB0PlxuICAgICAgICAgYW5ndWxhci5tb2R1bGUoJ3Nhbml0aXplRXhhbXBsZScsIFsnbmdTYW5pdGl6ZSddKVxuICAgICAgICAgICAuY29udHJvbGxlcignRXhhbXBsZUNvbnRyb2xsZXInLCBbJyRzY29wZScsICckc2NlJywgZnVuY3Rpb24oJHNjb3BlLCAkc2NlKSB7XG4gICAgICAgICAgICAgJHNjb3BlLnNuaXBwZXQgPVxuICAgICAgICAgICAgICAgJzxwIHN0eWxlPVwiY29sb3I6Ymx1ZVwiPmFuIGh0bWxcXG4nICtcbiAgICAgICAgICAgICAgICc8ZW0gb25tb3VzZW92ZXI9XCJ0aGlzLnRleHRDb250ZW50PVxcJ1BXTjNEIVxcJ1wiPmNsaWNrIGhlcmU8L2VtPlxcbicgK1xuICAgICAgICAgICAgICAgJ3NuaXBwZXQ8L3A+JztcbiAgICAgICAgICAgICAkc2NvcGUuZGVsaWJlcmF0ZWx5VHJ1c3REYW5nZXJvdXNTbmlwcGV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICByZXR1cm4gJHNjZS50cnVzdEFzSHRtbCgkc2NvcGUuc25pcHBldCk7XG4gICAgICAgICAgICAgfTtcbiAgICAgICAgICAgfV0pO1xuICAgICA8L3NjcmlwdD5cbiAgICAgPGRpdiBuZy1jb250cm9sbGVyPVwiRXhhbXBsZUNvbnRyb2xsZXJcIj5cbiAgICAgICAgU25pcHBldDogPHRleHRhcmVhIG5nLW1vZGVsPVwic25pcHBldFwiIGNvbHM9XCI2MFwiIHJvd3M9XCIzXCI+PC90ZXh0YXJlYT5cbiAgICAgICA8dGFibGU+XG4gICAgICAgICA8dHI+XG4gICAgICAgICAgIDx0ZD5EaXJlY3RpdmU8L3RkPlxuICAgICAgICAgICA8dGQ+SG93PC90ZD5cbiAgICAgICAgICAgPHRkPlNvdXJjZTwvdGQ+XG4gICAgICAgICAgIDx0ZD5SZW5kZXJlZDwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgICAgPHRyIGlkPVwiYmluZC1odG1sLXdpdGgtc2FuaXRpemVcIj5cbiAgICAgICAgICAgPHRkPm5nLWJpbmQtaHRtbDwvdGQ+XG4gICAgICAgICAgIDx0ZD5BdXRvbWF0aWNhbGx5IHVzZXMgJHNhbml0aXplPC90ZD5cbiAgICAgICAgICAgPHRkPjxwcmU+Jmx0O2RpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0XCImZ3Q7PGJyLz4mbHQ7L2RpdiZndDs8L3ByZT48L3RkPlxuICAgICAgICAgICA8dGQ+PGRpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0XCI+PC9kaXY+PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgICA8dHIgaWQ9XCJiaW5kLWh0bWwtd2l0aC10cnVzdFwiPlxuICAgICAgICAgICA8dGQ+bmctYmluZC1odG1sPC90ZD5cbiAgICAgICAgICAgPHRkPkJ5cGFzcyAkc2FuaXRpemUgYnkgZXhwbGljaXRseSB0cnVzdGluZyB0aGUgZGFuZ2Vyb3VzIHZhbHVlPC90ZD5cbiAgICAgICAgICAgPHRkPlxuICAgICAgICAgICA8cHJlPiZsdDtkaXYgbmctYmluZC1odG1sPVwiZGVsaWJlcmF0ZWx5VHJ1c3REYW5nZXJvdXNTbmlwcGV0KClcIiZndDtcbiZsdDsvZGl2Jmd0OzwvcHJlPlxuICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICA8dGQ+PGRpdiBuZy1iaW5kLWh0bWw9XCJkZWxpYmVyYXRlbHlUcnVzdERhbmdlcm91c1NuaXBwZXQoKVwiPjwvZGl2PjwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgICAgPHRyIGlkPVwiYmluZC1kZWZhdWx0XCI+XG4gICAgICAgICAgIDx0ZD5uZy1iaW5kPC90ZD5cbiAgICAgICAgICAgPHRkPkF1dG9tYXRpY2FsbHkgZXNjYXBlczwvdGQ+XG4gICAgICAgICAgIDx0ZD48cHJlPiZsdDtkaXYgbmctYmluZD1cInNuaXBwZXRcIiZndDs8YnIvPiZsdDsvZGl2Jmd0OzwvcHJlPjwvdGQ+XG4gICAgICAgICAgIDx0ZD48ZGl2IG5nLWJpbmQ9XCJzbmlwcGV0XCI+PC9kaXY+PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgPC90YWJsZT5cbiAgICAgICA8L2Rpdj5cbiAgIDwvZmlsZT5cbiAgIDxmaWxlIG5hbWU9XCJwcm90cmFjdG9yLmpzXCIgdHlwZT1cInByb3RyYWN0b3JcIj5cbiAgICAgaXQoJ3Nob3VsZCBzYW5pdGl6ZSB0aGUgaHRtbCBzbmlwcGV0IGJ5IGRlZmF1bHQnLCBmdW5jdGlvbigpIHtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWh0bWwtd2l0aC1zYW5pdGl6ZSBkaXYnKSkuZ2V0SW5uZXJIdG1sKCkpLlxuICAgICAgICAgdG9CZSgnPHA+YW4gaHRtbFxcbjxlbT5jbGljayBoZXJlPC9lbT5cXG5zbmlwcGV0PC9wPicpO1xuICAgICB9KTtcblxuICAgICBpdCgnc2hvdWxkIGlubGluZSByYXcgc25pcHBldCBpZiBib3VuZCB0byBhIHRydXN0ZWQgdmFsdWUnLCBmdW5jdGlvbigpIHtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWh0bWwtd2l0aC10cnVzdCBkaXYnKSkuZ2V0SW5uZXJIdG1sKCkpLlxuICAgICAgICAgdG9CZShcIjxwIHN0eWxlPVxcXCJjb2xvcjpibHVlXFxcIj5hbiBodG1sXFxuXCIgK1xuICAgICAgICAgICAgICBcIjxlbSBvbm1vdXNlb3Zlcj1cXFwidGhpcy50ZXh0Q29udGVudD0nUFdOM0QhJ1xcXCI+Y2xpY2sgaGVyZTwvZW0+XFxuXCIgK1xuICAgICAgICAgICAgICBcInNuaXBwZXQ8L3A+XCIpO1xuICAgICB9KTtcblxuICAgICBpdCgnc2hvdWxkIGVzY2FwZSBzbmlwcGV0IHdpdGhvdXQgYW55IGZpbHRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2JpbmQtZGVmYXVsdCBkaXYnKSkuZ2V0SW5uZXJIdG1sKCkpLlxuICAgICAgICAgdG9CZShcIiZsdDtwIHN0eWxlPVxcXCJjb2xvcjpibHVlXFxcIiZndDthbiBodG1sXFxuXCIgK1xuICAgICAgICAgICAgICBcIiZsdDtlbSBvbm1vdXNlb3Zlcj1cXFwidGhpcy50ZXh0Q29udGVudD0nUFdOM0QhJ1xcXCImZ3Q7Y2xpY2sgaGVyZSZsdDsvZW0mZ3Q7XFxuXCIgK1xuICAgICAgICAgICAgICBcInNuaXBwZXQmbHQ7L3AmZ3Q7XCIpO1xuICAgICB9KTtcblxuICAgICBpdCgnc2hvdWxkIHVwZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuY2xlYXIoKTtcbiAgICAgICBlbGVtZW50KGJ5Lm1vZGVsKCdzbmlwcGV0JykpLnNlbmRLZXlzKCduZXcgPGIgb25jbGljaz1cImFsZXJ0KDEpXCI+dGV4dDwvYj4nKTtcbiAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNiaW5kLWh0bWwtd2l0aC1zYW5pdGl6ZSBkaXYnKSkuZ2V0SW5uZXJIdG1sKCkpLlxuICAgICAgICAgdG9CZSgnbmV3IDxiPnRleHQ8L2I+Jyk7XG4gICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuY3NzKCcjYmluZC1odG1sLXdpdGgtdHJ1c3QgZGl2JykpLmdldElubmVySHRtbCgpKS50b0JlKFxuICAgICAgICAgJ25ldyA8YiBvbmNsaWNrPVwiYWxlcnQoMSlcIj50ZXh0PC9iPicpO1xuICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2JpbmQtZGVmYXVsdCBkaXYnKSkuZ2V0SW5uZXJIdG1sKCkpLnRvQmUoXG4gICAgICAgICBcIm5ldyAmbHQ7YiBvbmNsaWNrPVxcXCJhbGVydCgxKVxcXCImZ3Q7dGV4dCZsdDsvYiZndDtcIik7XG4gICAgIH0pO1xuICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5cblxuLyoqXG4gKiBAbmdkb2MgcHJvdmlkZXJcbiAqIEBuYW1lICRzYW5pdGl6ZVByb3ZpZGVyXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDcmVhdGVzIGFuZCBjb25maWd1cmVzIHtAbGluayAkc2FuaXRpemV9IGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiAkU2FuaXRpemVQcm92aWRlcigpIHtcbiAgdmFyIHN2Z0VuYWJsZWQgPSBmYWxzZTtcblxuICB0aGlzLiRnZXQgPSBbJyQkc2FuaXRpemVVcmknLCBmdW5jdGlvbigkJHNhbml0aXplVXJpKSB7XG4gICAgaWYgKHN2Z0VuYWJsZWQpIHtcbiAgICAgIGFuZ3VsYXIuZXh0ZW5kKHZhbGlkRWxlbWVudHMsIHN2Z0VsZW1lbnRzKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGh0bWwpIHtcbiAgICAgIHZhciBidWYgPSBbXTtcbiAgICAgIGh0bWxQYXJzZXIoaHRtbCwgaHRtbFNhbml0aXplV3JpdGVyKGJ1ZiwgZnVuY3Rpb24odXJpLCBpc0ltYWdlKSB7XG4gICAgICAgIHJldHVybiAhL151bnNhZmU6Ly50ZXN0KCQkc2FuaXRpemVVcmkodXJpLCBpc0ltYWdlKSk7XG4gICAgICB9KSk7XG4gICAgICByZXR1cm4gYnVmLmpvaW4oJycpO1xuICAgIH07XG4gIH1dO1xuXG5cbiAgLyoqXG4gICAqIEBuZ2RvYyBtZXRob2RcbiAgICogQG5hbWUgJHNhbml0aXplUHJvdmlkZXIjZW5hYmxlU3ZnXG4gICAqIEBraW5kIGZ1bmN0aW9uXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiBFbmFibGVzIGEgc3Vic2V0IG9mIHN2ZyB0byBiZSBzdXBwb3J0ZWQgYnkgdGhlIHNhbml0aXplci5cbiAgICpcbiAgICogPGRpdiBjbGFzcz1cImFsZXJ0IGFsZXJ0LXdhcm5pbmdcIj5cbiAgICogICA8cD5CeSBlbmFibGluZyB0aGlzIHNldHRpbmcgd2l0aG91dCB0YWtpbmcgb3RoZXIgcHJlY2F1dGlvbnMsIHlvdSBtaWdodCBleHBvc2UgeW91clxuICAgKiAgIGFwcGxpY2F0aW9uIHRvIGNsaWNrLWhpamFja2luZyBhdHRhY2tzLiBJbiB0aGVzZSBhdHRhY2tzLCBzYW5pdGl6ZWQgc3ZnIGVsZW1lbnRzIGNvdWxkIGJlIHBvc2l0aW9uZWRcbiAgICogICBvdXRzaWRlIG9mIHRoZSBjb250YWluaW5nIGVsZW1lbnQgYW5kIGJlIHJlbmRlcmVkIG92ZXIgb3RoZXIgZWxlbWVudHMgb24gdGhlIHBhZ2UgKGUuZy4gYSBsb2dpblxuICAgKiAgIGxpbmspLiBTdWNoIGJlaGF2aW9yIGNhbiB0aGVuIHJlc3VsdCBpbiBwaGlzaGluZyBpbmNpZGVudHMuPC9wPlxuICAgKlxuICAgKiAgIDxwPlRvIHByb3RlY3QgYWdhaW5zdCB0aGVzZSwgZXhwbGljaXRseSBzZXR1cCBgb3ZlcmZsb3c6IGhpZGRlbmAgY3NzIHJ1bGUgZm9yIGFsbCBwb3RlbnRpYWwgc3ZnXG4gICAqICAgdGFncyB3aXRoaW4gdGhlIHNhbml0aXplZCBjb250ZW50OjwvcD5cbiAgICpcbiAgICogICA8YnI+XG4gICAqXG4gICAqICAgPHByZT48Y29kZT5cbiAgICogICAucm9vdE9mVGhlSW5jbHVkZWRDb250ZW50IHN2ZyB7XG4gICAqICAgICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7XG4gICAqICAgfVxuICAgKiAgIDwvY29kZT48L3ByZT5cbiAgICogPC9kaXY+XG4gICAqXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJlZ2V4cCBOZXcgcmVnZXhwIHRvIHdoaXRlbGlzdCB1cmxzIHdpdGguXG4gICAqIEByZXR1cm5zIHtib29sZWFufG5nLiRzYW5pdGl6ZVByb3ZpZGVyfSBSZXR1cm5zIHRoZSBjdXJyZW50bHkgY29uZmlndXJlZCB2YWx1ZSBpZiBjYWxsZWRcbiAgICogICAgd2l0aG91dCBhbiBhcmd1bWVudCBvciBzZWxmIGZvciBjaGFpbmluZyBvdGhlcndpc2UuXG4gICAqL1xuICB0aGlzLmVuYWJsZVN2ZyA9IGZ1bmN0aW9uKGVuYWJsZVN2Zykge1xuICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChlbmFibGVTdmcpKSB7XG4gICAgICBzdmdFbmFibGVkID0gZW5hYmxlU3ZnO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBzdmdFbmFibGVkO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc2FuaXRpemVUZXh0KGNoYXJzKSB7XG4gIHZhciBidWYgPSBbXTtcbiAgdmFyIHdyaXRlciA9IGh0bWxTYW5pdGl6ZVdyaXRlcihidWYsIGFuZ3VsYXIubm9vcCk7XG4gIHdyaXRlci5jaGFycyhjaGFycyk7XG4gIHJldHVybiBidWYuam9pbignJyk7XG59XG5cblxuLy8gUmVndWxhciBFeHByZXNzaW9ucyBmb3IgcGFyc2luZyB0YWdzIGFuZCBhdHRyaWJ1dGVzXG52YXIgU1VSUk9HQVRFX1BBSVJfUkVHRVhQID0gL1tcXHVEODAwLVxcdURCRkZdW1xcdURDMDAtXFx1REZGRl0vZyxcbiAgLy8gTWF0Y2ggZXZlcnl0aGluZyBvdXRzaWRlIG9mIG5vcm1hbCBjaGFycyBhbmQgXCIgKHF1b3RlIGNoYXJhY3RlcilcbiAgTk9OX0FMUEhBTlVNRVJJQ19SRUdFWFAgPSAvKFteXFwjLX4gfCFdKS9nO1xuXG5cbi8vIEdvb2Qgc291cmNlIG9mIGluZm8gYWJvdXQgZWxlbWVudHMgYW5kIGF0dHJpYnV0ZXNcbi8vIGh0dHA6Ly9kZXYudzMub3JnL2h0bWw1L3NwZWMvT3ZlcnZpZXcuaHRtbCNzZW1hbnRpY3Ncbi8vIGh0dHA6Ly9zaW1vbi5odG1sNS5vcmcvaHRtbC1lbGVtZW50c1xuXG4vLyBTYWZlIFZvaWQgRWxlbWVudHMgLSBIVE1MNVxuLy8gaHR0cDovL2Rldi53My5vcmcvaHRtbDUvc3BlYy9PdmVydmlldy5odG1sI3ZvaWQtZWxlbWVudHNcbnZhciB2b2lkRWxlbWVudHMgPSB0b01hcChcImFyZWEsYnIsY29sLGhyLGltZyx3YnJcIik7XG5cbi8vIEVsZW1lbnRzIHRoYXQgeW91IGNhbiwgaW50ZW50aW9uYWxseSwgbGVhdmUgb3BlbiAoYW5kIHdoaWNoIGNsb3NlIHRoZW1zZWx2ZXMpXG4vLyBodHRwOi8vZGV2LnczLm9yZy9odG1sNS9zcGVjL092ZXJ2aWV3Lmh0bWwjb3B0aW9uYWwtdGFnc1xudmFyIG9wdGlvbmFsRW5kVGFnQmxvY2tFbGVtZW50cyA9IHRvTWFwKFwiY29sZ3JvdXAsZGQsZHQsbGkscCx0Ym9keSx0ZCx0Zm9vdCx0aCx0aGVhZCx0clwiKSxcbiAgICBvcHRpb25hbEVuZFRhZ0lubGluZUVsZW1lbnRzID0gdG9NYXAoXCJycCxydFwiKSxcbiAgICBvcHRpb25hbEVuZFRhZ0VsZW1lbnRzID0gYW5ndWxhci5leHRlbmQoe30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsRW5kVGFnSW5saW5lRWxlbWVudHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsRW5kVGFnQmxvY2tFbGVtZW50cyk7XG5cbi8vIFNhZmUgQmxvY2sgRWxlbWVudHMgLSBIVE1MNVxudmFyIGJsb2NrRWxlbWVudHMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgb3B0aW9uYWxFbmRUYWdCbG9ja0VsZW1lbnRzLCB0b01hcChcImFkZHJlc3MsYXJ0aWNsZSxcIiArXG4gICAgICAgIFwiYXNpZGUsYmxvY2txdW90ZSxjYXB0aW9uLGNlbnRlcixkZWwsZGlyLGRpdixkbCxmaWd1cmUsZmlnY2FwdGlvbixmb290ZXIsaDEsaDIsaDMsaDQsaDUsXCIgK1xuICAgICAgICBcImg2LGhlYWRlcixoZ3JvdXAsaHIsaW5zLG1hcCxtZW51LG5hdixvbCxwcmUsc2VjdGlvbix0YWJsZSx1bFwiKSk7XG5cbi8vIElubGluZSBFbGVtZW50cyAtIEhUTUw1XG52YXIgaW5saW5lRWxlbWVudHMgPSBhbmd1bGFyLmV4dGVuZCh7fSwgb3B0aW9uYWxFbmRUYWdJbmxpbmVFbGVtZW50cywgdG9NYXAoXCJhLGFiYnIsYWNyb255bSxiLFwiICtcbiAgICAgICAgXCJiZGksYmRvLGJpZyxicixjaXRlLGNvZGUsZGVsLGRmbixlbSxmb250LGksaW1nLGlucyxrYmQsbGFiZWwsbWFwLG1hcmsscSxydWJ5LHJwLHJ0LHMsXCIgK1xuICAgICAgICBcInNhbXAsc21hbGwsc3BhbixzdHJpa2Usc3Ryb25nLHN1YixzdXAsdGltZSx0dCx1LHZhclwiKSk7XG5cbi8vIFNWRyBFbGVtZW50c1xuLy8gaHR0cHM6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9TYW5pdGl6YXRpb25fcnVsZXMjc3ZnX0VsZW1lbnRzXG4vLyBOb3RlOiB0aGUgZWxlbWVudHMgYW5pbWF0ZSxhbmltYXRlQ29sb3IsYW5pbWF0ZU1vdGlvbixhbmltYXRlVHJhbnNmb3JtLHNldCBhcmUgaW50ZW50aW9uYWxseSBvbWl0dGVkLlxuLy8gVGhleSBjYW4gcG90ZW50aWFsbHkgYWxsb3cgZm9yIGFyYml0cmFyeSBqYXZhc2NyaXB0IHRvIGJlIGV4ZWN1dGVkLiBTZWUgIzExMjkwXG52YXIgc3ZnRWxlbWVudHMgPSB0b01hcChcImNpcmNsZSxkZWZzLGRlc2MsZWxsaXBzZSxmb250LWZhY2UsZm9udC1mYWNlLW5hbWUsZm9udC1mYWNlLXNyYyxnLGdseXBoLFwiICtcbiAgICAgICAgXCJoa2VybixpbWFnZSxsaW5lYXJHcmFkaWVudCxsaW5lLG1hcmtlcixtZXRhZGF0YSxtaXNzaW5nLWdseXBoLG1wYXRoLHBhdGgscG9seWdvbixwb2x5bGluZSxcIiArXG4gICAgICAgIFwicmFkaWFsR3JhZGllbnQscmVjdCxzdG9wLHN2Zyxzd2l0Y2gsdGV4dCx0aXRsZSx0c3BhblwiKTtcblxuLy8gQmxvY2tlZCBFbGVtZW50cyAod2lsbCBiZSBzdHJpcHBlZClcbnZhciBibG9ja2VkRWxlbWVudHMgPSB0b01hcChcInNjcmlwdCxzdHlsZVwiKTtcblxudmFyIHZhbGlkRWxlbWVudHMgPSBhbmd1bGFyLmV4dGVuZCh7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZEVsZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja0VsZW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVFbGVtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWxFbmRUYWdFbGVtZW50cyk7XG5cbi8vQXR0cmlidXRlcyB0aGF0IGhhdmUgaHJlZiBhbmQgaGVuY2UgbmVlZCB0byBiZSBzYW5pdGl6ZWRcbnZhciB1cmlBdHRycyA9IHRvTWFwKFwiYmFja2dyb3VuZCxjaXRlLGhyZWYsbG9uZ2Rlc2Msc3JjLHhsaW5rOmhyZWZcIik7XG5cbnZhciBodG1sQXR0cnMgPSB0b01hcCgnYWJicixhbGlnbixhbHQsYXhpcyxiZ2NvbG9yLGJvcmRlcixjZWxscGFkZGluZyxjZWxsc3BhY2luZyxjbGFzcyxjbGVhciwnICtcbiAgICAnY29sb3IsY29scyxjb2xzcGFuLGNvbXBhY3QsY29vcmRzLGRpcixmYWNlLGhlYWRlcnMsaGVpZ2h0LGhyZWZsYW5nLGhzcGFjZSwnICtcbiAgICAnaXNtYXAsbGFuZyxsYW5ndWFnZSxub2hyZWYsbm93cmFwLHJlbCxyZXYscm93cyxyb3dzcGFuLHJ1bGVzLCcgK1xuICAgICdzY29wZSxzY3JvbGxpbmcsc2hhcGUsc2l6ZSxzcGFuLHN0YXJ0LHN1bW1hcnksdGFiaW5kZXgsdGFyZ2V0LHRpdGxlLHR5cGUsJyArXG4gICAgJ3ZhbGlnbix2YWx1ZSx2c3BhY2Usd2lkdGgnKTtcblxuLy8gU1ZHIGF0dHJpYnV0ZXMgKHdpdGhvdXQgXCJpZFwiIGFuZCBcIm5hbWVcIiBhdHRyaWJ1dGVzKVxuLy8gaHR0cHM6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9TYW5pdGl6YXRpb25fcnVsZXMjc3ZnX0F0dHJpYnV0ZXNcbnZhciBzdmdBdHRycyA9IHRvTWFwKCdhY2NlbnQtaGVpZ2h0LGFjY3VtdWxhdGUsYWRkaXRpdmUsYWxwaGFiZXRpYyxhcmFiaWMtZm9ybSxhc2NlbnQsJyArXG4gICAgJ2Jhc2VQcm9maWxlLGJib3gsYmVnaW4sYnksY2FsY01vZGUsY2FwLWhlaWdodCxjbGFzcyxjb2xvcixjb2xvci1yZW5kZXJpbmcsY29udGVudCwnICtcbiAgICAnY3gsY3ksZCxkeCxkeSxkZXNjZW50LGRpc3BsYXksZHVyLGVuZCxmaWxsLGZpbGwtcnVsZSxmb250LWZhbWlseSxmb250LXNpemUsZm9udC1zdHJldGNoLCcgK1xuICAgICdmb250LXN0eWxlLGZvbnQtdmFyaWFudCxmb250LXdlaWdodCxmcm9tLGZ4LGZ5LGcxLGcyLGdseXBoLW5hbWUsZ3JhZGllbnRVbml0cyxoYW5naW5nLCcgK1xuICAgICdoZWlnaHQsaG9yaXotYWR2LXgsaG9yaXotb3JpZ2luLXgsaWRlb2dyYXBoaWMsayxrZXlQb2ludHMsa2V5U3BsaW5lcyxrZXlUaW1lcyxsYW5nLCcgK1xuICAgICdtYXJrZXItZW5kLG1hcmtlci1taWQsbWFya2VyLXN0YXJ0LG1hcmtlckhlaWdodCxtYXJrZXJVbml0cyxtYXJrZXJXaWR0aCxtYXRoZW1hdGljYWwsJyArXG4gICAgJ21heCxtaW4sb2Zmc2V0LG9wYWNpdHksb3JpZW50LG9yaWdpbixvdmVybGluZS1wb3NpdGlvbixvdmVybGluZS10aGlja25lc3MscGFub3NlLTEsJyArXG4gICAgJ3BhdGgscGF0aExlbmd0aCxwb2ludHMscHJlc2VydmVBc3BlY3RSYXRpbyxyLHJlZlgscmVmWSxyZXBlYXRDb3VudCxyZXBlYXREdXIsJyArXG4gICAgJ3JlcXVpcmVkRXh0ZW5zaW9ucyxyZXF1aXJlZEZlYXR1cmVzLHJlc3RhcnQscm90YXRlLHJ4LHJ5LHNsb3BlLHN0ZW1oLHN0ZW12LHN0b3AtY29sb3IsJyArXG4gICAgJ3N0b3Atb3BhY2l0eSxzdHJpa2V0aHJvdWdoLXBvc2l0aW9uLHN0cmlrZXRocm91Z2gtdGhpY2tuZXNzLHN0cm9rZSxzdHJva2UtZGFzaGFycmF5LCcgK1xuICAgICdzdHJva2UtZGFzaG9mZnNldCxzdHJva2UtbGluZWNhcCxzdHJva2UtbGluZWpvaW4sc3Ryb2tlLW1pdGVybGltaXQsc3Ryb2tlLW9wYWNpdHksJyArXG4gICAgJ3N0cm9rZS13aWR0aCxzeXN0ZW1MYW5ndWFnZSx0YXJnZXQsdGV4dC1hbmNob3IsdG8sdHJhbnNmb3JtLHR5cGUsdTEsdTIsdW5kZXJsaW5lLXBvc2l0aW9uLCcgK1xuICAgICd1bmRlcmxpbmUtdGhpY2tuZXNzLHVuaWNvZGUsdW5pY29kZS1yYW5nZSx1bml0cy1wZXItZW0sdmFsdWVzLHZlcnNpb24sdmlld0JveCx2aXNpYmlsaXR5LCcgK1xuICAgICd3aWR0aCx3aWR0aHMseCx4LWhlaWdodCx4MSx4Mix4bGluazphY3R1YXRlLHhsaW5rOmFyY3JvbGUseGxpbms6cm9sZSx4bGluazpzaG93LHhsaW5rOnRpdGxlLCcgK1xuICAgICd4bGluazp0eXBlLHhtbDpiYXNlLHhtbDpsYW5nLHhtbDpzcGFjZSx4bWxucyx4bWxuczp4bGluayx5LHkxLHkyLHpvb21BbmRQYW4nLCB0cnVlKTtcblxudmFyIHZhbGlkQXR0cnMgPSBhbmd1bGFyLmV4dGVuZCh7fSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJpQXR0cnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN2Z0F0dHJzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sQXR0cnMpO1xuXG5mdW5jdGlvbiB0b01hcChzdHIsIGxvd2VyY2FzZUtleXMpIHtcbiAgdmFyIG9iaiA9IHt9LCBpdGVtcyA9IHN0ci5zcGxpdCgnLCcpLCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICBvYmpbbG93ZXJjYXNlS2V5cyA/IGFuZ3VsYXIubG93ZXJjYXNlKGl0ZW1zW2ldKSA6IGl0ZW1zW2ldXSA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxudmFyIGluZXJ0Qm9keUVsZW1lbnQ7XG4oZnVuY3Rpb24od2luZG93KSB7XG4gIHZhciBkb2M7XG4gIGlmICh3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmltcGxlbWVudGF0aW9uKSB7XG4gICAgZG9jID0gd2luZG93LmRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcImluZXJ0XCIpO1xuICB9IGVsc2Uge1xuICAgIHRocm93ICRzYW5pdGl6ZU1pbkVycignbm9pbmVydCcsIFwiQ2FuJ3QgY3JlYXRlIGFuIGluZXJ0IGh0bWwgZG9jdW1lbnRcIik7XG4gIH1cbiAgdmFyIGRvY0VsZW1lbnQgPSBkb2MuZG9jdW1lbnRFbGVtZW50IHx8IGRvYy5nZXREb2N1bWVudEVsZW1lbnQoKTtcbiAgdmFyIGJvZHlFbGVtZW50cyA9IGRvY0VsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKTtcblxuICAvLyB1c3VhbGx5IHRoZXJlIHNob3VsZCBiZSBvbmx5IG9uZSBib2R5IGVsZW1lbnQgaW4gdGhlIGRvY3VtZW50LCBidXQgSUUgZG9lc24ndCBoYXZlIGFueSwgc28gd2UgbmVlZCB0byBjcmVhdGUgb25lXG4gIGlmIChib2R5RWxlbWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgaW5lcnRCb2R5RWxlbWVudCA9IGJvZHlFbGVtZW50c1swXTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgaHRtbCA9IGRvYy5jcmVhdGVFbGVtZW50KCdodG1sJyk7XG4gICAgaW5lcnRCb2R5RWxlbWVudCA9IGRvYy5jcmVhdGVFbGVtZW50KCdib2R5Jyk7XG4gICAgaHRtbC5hcHBlbmRDaGlsZChpbmVydEJvZHlFbGVtZW50KTtcbiAgICBkb2MuYXBwZW5kQ2hpbGQoaHRtbCk7XG4gIH1cbn0pKHdpbmRvdyk7XG5cbi8qKlxuICogQGV4YW1wbGVcbiAqIGh0bWxQYXJzZXIoaHRtbFN0cmluZywge1xuICogICAgIHN0YXJ0OiBmdW5jdGlvbih0YWcsIGF0dHJzKSB7fSxcbiAqICAgICBlbmQ6IGZ1bmN0aW9uKHRhZykge30sXG4gKiAgICAgY2hhcnM6IGZ1bmN0aW9uKHRleHQpIHt9LFxuICogICAgIGNvbW1lbnQ6IGZ1bmN0aW9uKHRleHQpIHt9XG4gKiB9KTtcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaHRtbCBzdHJpbmdcbiAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGVyXG4gKi9cbmZ1bmN0aW9uIGh0bWxQYXJzZXIoaHRtbCwgaGFuZGxlcikge1xuICBpZiAoaHRtbCA9PT0gbnVsbCB8fCBodG1sID09PSB1bmRlZmluZWQpIHtcbiAgICBodG1sID0gJyc7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGh0bWwgIT09ICdzdHJpbmcnKSB7XG4gICAgaHRtbCA9ICcnICsgaHRtbDtcbiAgfVxuICBpbmVydEJvZHlFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG5cbiAgLy9tWFNTIHByb3RlY3Rpb25cbiAgdmFyIG1YU1NBdHRlbXB0cyA9IDU7XG4gIGRvIHtcbiAgICBpZiAobVhTU0F0dGVtcHRzID09PSAwKSB7XG4gICAgICB0aHJvdyAkc2FuaXRpemVNaW5FcnIoJ3VpbnB1dCcsIFwiRmFpbGVkIHRvIHNhbml0aXplIGh0bWwgYmVjYXVzZSB0aGUgaW5wdXQgaXMgdW5zdGFibGVcIik7XG4gICAgfVxuICAgIG1YU1NBdHRlbXB0cy0tO1xuXG4gICAgLy8gc3RyaXAgY3VzdG9tLW5hbWVzcGFjZWQgYXR0cmlidXRlcyBvbiBJRTw9MTFcbiAgICBpZiAoZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDw9IDExKSB7XG4gICAgICBzdHJpcEN1c3RvbU5zQXR0cnMoaW5lcnRCb2R5RWxlbWVudCk7XG4gICAgfVxuICAgIGh0bWwgPSBpbmVydEJvZHlFbGVtZW50LmlubmVySFRNTDsgLy90cmlnZ2VyIG1YU1NcbiAgICBpbmVydEJvZHlFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gIH0gd2hpbGUgKGh0bWwgIT09IGluZXJ0Qm9keUVsZW1lbnQuaW5uZXJIVE1MKTtcblxuICB2YXIgbm9kZSA9IGluZXJ0Qm9keUVsZW1lbnQuZmlyc3RDaGlsZDtcbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBzd2l0Y2ggKG5vZGUubm9kZVR5cGUpIHtcbiAgICAgIGNhc2UgMTogLy8gRUxFTUVOVF9OT0RFXG4gICAgICAgIGhhbmRsZXIuc3RhcnQobm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLCBhdHRyVG9NYXAobm9kZS5hdHRyaWJ1dGVzKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOiAvLyBURVhUIE5PREVcbiAgICAgICAgaGFuZGxlci5jaGFycyhub2RlLnRleHRDb250ZW50KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdmFyIG5leHROb2RlO1xuICAgIGlmICghKG5leHROb2RlID0gbm9kZS5maXJzdENoaWxkKSkge1xuICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT0gMSkge1xuICAgICAgICBoYW5kbGVyLmVuZChub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfVxuICAgICAgbmV4dE5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgaWYgKCFuZXh0Tm9kZSkge1xuICAgICAgICB3aGlsZSAobmV4dE5vZGUgPT0gbnVsbCkge1xuICAgICAgICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICAgICAgaWYgKG5vZGUgPT09IGluZXJ0Qm9keUVsZW1lbnQpIGJyZWFrO1xuICAgICAgICAgIG5leHROb2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICBoYW5kbGVyLmVuZChub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBub2RlID0gbmV4dE5vZGU7XG4gIH1cblxuICB3aGlsZSAobm9kZSA9IGluZXJ0Qm9keUVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgIGluZXJ0Qm9keUVsZW1lbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gYXR0clRvTWFwKGF0dHJzKSB7XG4gIHZhciBtYXAgPSB7fTtcbiAgZm9yICh2YXIgaSA9IDAsIGlpID0gYXR0cnMubGVuZ3RoOyBpIDwgaWk7IGkrKykge1xuICAgIHZhciBhdHRyID0gYXR0cnNbaV07XG4gICAgbWFwW2F0dHIubmFtZV0gPSBhdHRyLnZhbHVlO1xuICB9XG4gIHJldHVybiBtYXA7XG59XG5cblxuLyoqXG4gKiBFc2NhcGVzIGFsbCBwb3RlbnRpYWxseSBkYW5nZXJvdXMgY2hhcmFjdGVycywgc28gdGhhdCB0aGVcbiAqIHJlc3VsdGluZyBzdHJpbmcgY2FuIGJlIHNhZmVseSBpbnNlcnRlZCBpbnRvIGF0dHJpYnV0ZSBvclxuICogZWxlbWVudCB0ZXh0LlxuICogQHBhcmFtIHZhbHVlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBlc2NhcGVkIHRleHRcbiAqL1xuZnVuY3Rpb24gZW5jb2RlRW50aXRpZXModmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlLlxuICAgIHJlcGxhY2UoLyYvZywgJyZhbXA7JykuXG4gICAgcmVwbGFjZShTVVJST0dBVEVfUEFJUl9SRUdFWFAsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICB2YXIgaGkgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuICAgICAgdmFyIGxvdyA9IHZhbHVlLmNoYXJDb2RlQXQoMSk7XG4gICAgICByZXR1cm4gJyYjJyArICgoKGhpIC0gMHhEODAwKSAqIDB4NDAwKSArIChsb3cgLSAweERDMDApICsgMHgxMDAwMCkgKyAnOyc7XG4gICAgfSkuXG4gICAgcmVwbGFjZShOT05fQUxQSEFOVU1FUklDX1JFR0VYUCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHJldHVybiAnJiMnICsgdmFsdWUuY2hhckNvZGVBdCgwKSArICc7JztcbiAgICB9KS5cbiAgICByZXBsYWNlKC88L2csICcmbHQ7JykuXG4gICAgcmVwbGFjZSgvPi9nLCAnJmd0OycpO1xufVxuXG4vKipcbiAqIGNyZWF0ZSBhbiBIVE1ML1hNTCB3cml0ZXIgd2hpY2ggd3JpdGVzIHRvIGJ1ZmZlclxuICogQHBhcmFtIHtBcnJheX0gYnVmIHVzZSBidWYuam9pbignJykgdG8gZ2V0IG91dCBzYW5pdGl6ZWQgaHRtbCBzdHJpbmdcbiAqIEByZXR1cm5zIHtvYmplY3R9IGluIHRoZSBmb3JtIG9mIHtcbiAqICAgICBzdGFydDogZnVuY3Rpb24odGFnLCBhdHRycykge30sXG4gKiAgICAgZW5kOiBmdW5jdGlvbih0YWcpIHt9LFxuICogICAgIGNoYXJzOiBmdW5jdGlvbih0ZXh0KSB7fSxcbiAqICAgICBjb21tZW50OiBmdW5jdGlvbih0ZXh0KSB7fVxuICogfVxuICovXG5mdW5jdGlvbiBodG1sU2FuaXRpemVXcml0ZXIoYnVmLCB1cmlWYWxpZGF0b3IpIHtcbiAgdmFyIGlnbm9yZUN1cnJlbnRFbGVtZW50ID0gZmFsc2U7XG4gIHZhciBvdXQgPSBhbmd1bGFyLmJpbmQoYnVmLCBidWYucHVzaCk7XG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IGZ1bmN0aW9uKHRhZywgYXR0cnMpIHtcbiAgICAgIHRhZyA9IGFuZ3VsYXIubG93ZXJjYXNlKHRhZyk7XG4gICAgICBpZiAoIWlnbm9yZUN1cnJlbnRFbGVtZW50ICYmIGJsb2NrZWRFbGVtZW50c1t0YWddKSB7XG4gICAgICAgIGlnbm9yZUN1cnJlbnRFbGVtZW50ID0gdGFnO1xuICAgICAgfVxuICAgICAgaWYgKCFpZ25vcmVDdXJyZW50RWxlbWVudCAmJiB2YWxpZEVsZW1lbnRzW3RhZ10gPT09IHRydWUpIHtcbiAgICAgICAgb3V0KCc8Jyk7XG4gICAgICAgIG91dCh0YWcpO1xuICAgICAgICBhbmd1bGFyLmZvckVhY2goYXR0cnMsIGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICAgICAgICB2YXIgbGtleT1hbmd1bGFyLmxvd2VyY2FzZShrZXkpO1xuICAgICAgICAgIHZhciBpc0ltYWdlID0gKHRhZyA9PT0gJ2ltZycgJiYgbGtleSA9PT0gJ3NyYycpIHx8IChsa2V5ID09PSAnYmFja2dyb3VuZCcpO1xuICAgICAgICAgIGlmICh2YWxpZEF0dHJzW2xrZXldID09PSB0cnVlICYmXG4gICAgICAgICAgICAodXJpQXR0cnNbbGtleV0gIT09IHRydWUgfHwgdXJpVmFsaWRhdG9yKHZhbHVlLCBpc0ltYWdlKSkpIHtcbiAgICAgICAgICAgIG91dCgnICcpO1xuICAgICAgICAgICAgb3V0KGtleSk7XG4gICAgICAgICAgICBvdXQoJz1cIicpO1xuICAgICAgICAgICAgb3V0KGVuY29kZUVudGl0aWVzKHZhbHVlKSk7XG4gICAgICAgICAgICBvdXQoJ1wiJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgb3V0KCc+Jyk7XG4gICAgICB9XG4gICAgfSxcbiAgICBlbmQ6IGZ1bmN0aW9uKHRhZykge1xuICAgICAgdGFnID0gYW5ndWxhci5sb3dlcmNhc2UodGFnKTtcbiAgICAgIGlmICghaWdub3JlQ3VycmVudEVsZW1lbnQgJiYgdmFsaWRFbGVtZW50c1t0YWddID09PSB0cnVlICYmIHZvaWRFbGVtZW50c1t0YWddICE9PSB0cnVlKSB7XG4gICAgICAgIG91dCgnPC8nKTtcbiAgICAgICAgb3V0KHRhZyk7XG4gICAgICAgIG91dCgnPicpO1xuICAgICAgfVxuICAgICAgaWYgKHRhZyA9PSBpZ25vcmVDdXJyZW50RWxlbWVudCkge1xuICAgICAgICBpZ25vcmVDdXJyZW50RWxlbWVudCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG4gICAgY2hhcnM6IGZ1bmN0aW9uKGNoYXJzKSB7XG4gICAgICBpZiAoIWlnbm9yZUN1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgIG91dChlbmNvZGVFbnRpdGllcyhjaGFycykpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuXG4vKipcbiAqIFdoZW4gSUU5LTExIGNvbWVzIGFjcm9zcyBhbiB1bmtub3duIG5hbWVzcGFjZWQgYXR0cmlidXRlIGUuZy4gJ3hsaW5rOmZvbycgaXQgYWRkcyAneG1sbnM6bnMxJyBhdHRyaWJ1dGUgdG8gZGVjbGFyZVxuICogbnMxIG5hbWVzcGFjZSBhbmQgcHJlZml4ZXMgdGhlIGF0dHJpYnV0ZSB3aXRoICduczEnIChlLmcuICduczE6eGxpbms6Zm9vJykuIFRoaXMgaXMgdW5kZXNpcmFibGUgc2luY2Ugd2UgZG9uJ3Qgd2FudFxuICogdG8gYWxsb3cgYW55IG9mIHRoZXNlIGN1c3RvbSBhdHRyaWJ1dGVzLiBUaGlzIG1ldGhvZCBzdHJpcHMgdGhlbSBhbGwuXG4gKlxuICogQHBhcmFtIG5vZGUgUm9vdCBlbGVtZW50IHRvIHByb2Nlc3NcbiAqL1xuZnVuY3Rpb24gc3RyaXBDdXN0b21Oc0F0dHJzKG5vZGUpIHtcbiAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgdmFyIGF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgYXR0ck5vZGUgPSBhdHRyc1tpXTtcbiAgICAgIHZhciBhdHRyTmFtZSA9IGF0dHJOb2RlLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChhdHRyTmFtZSA9PT0gJ3htbG5zOm5zMScgfHwgYXR0ck5hbWUuaW5kZXhPZignbnMxOicpID09PSAwKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlTm9kZShhdHRyTm9kZSk7XG4gICAgICAgIGktLTtcbiAgICAgICAgbC0tO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBuZXh0Tm9kZSA9IG5vZGUuZmlyc3RDaGlsZDtcbiAgaWYgKG5leHROb2RlKSB7XG4gICAgc3RyaXBDdXN0b21Oc0F0dHJzKG5leHROb2RlKTtcbiAgfVxuXG4gIG5leHROb2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgaWYgKG5leHROb2RlKSB7XG4gICAgc3RyaXBDdXN0b21Oc0F0dHJzKG5leHROb2RlKTtcbiAgfVxufVxuXG5cblxuLy8gZGVmaW5lIG5nU2FuaXRpemUgbW9kdWxlIGFuZCByZWdpc3RlciAkc2FuaXRpemUgc2VydmljZVxuYW5ndWxhci5tb2R1bGUoJ25nU2FuaXRpemUnLCBbXSkucHJvdmlkZXIoJyRzYW5pdGl6ZScsICRTYW5pdGl6ZVByb3ZpZGVyKTtcblxuLyogZ2xvYmFsIHNhbml0aXplVGV4dDogZmFsc2UgKi9cblxuLyoqXG4gKiBAbmdkb2MgZmlsdGVyXG4gKiBAbmFtZSBsaW5reVxuICogQGtpbmQgZnVuY3Rpb25cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEZpbmRzIGxpbmtzIGluIHRleHQgaW5wdXQgYW5kIHR1cm5zIHRoZW0gaW50byBodG1sIGxpbmtzLiBTdXBwb3J0cyBgaHR0cC9odHRwcy9mdHAvbWFpbHRvYCBhbmRcbiAqIHBsYWluIGVtYWlsIGFkZHJlc3MgbGlua3MuXG4gKlxuICogUmVxdWlyZXMgdGhlIHtAbGluayBuZ1Nhbml0aXplIGBuZ1Nhbml0aXplYH0gbW9kdWxlIHRvIGJlIGluc3RhbGxlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBJbnB1dCB0ZXh0LlxuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldCBXaW5kb3cgKGBfYmxhbmt8X3NlbGZ8X3BhcmVudHxfdG9wYCkgb3IgbmFtZWQgZnJhbWUgdG8gb3BlbiBsaW5rcyBpbi5cbiAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9uKHVybCl9IFthdHRyaWJ1dGVzXSBBZGQgY3VzdG9tIGF0dHJpYnV0ZXMgdG8gdGhlIGxpbmsgZWxlbWVudC5cbiAqXG4gKiAgICBDYW4gYmUgb25lIG9mOlxuICpcbiAqICAgIC0gYG9iamVjdGA6IEEgbWFwIG9mIGF0dHJpYnV0ZXNcbiAqICAgIC0gYGZ1bmN0aW9uYDogVGFrZXMgdGhlIHVybCBhcyBhIHBhcmFtZXRlciBhbmQgcmV0dXJucyBhIG1hcCBvZiBhdHRyaWJ1dGVzXG4gKlxuICogICAgSWYgdGhlIG1hcCBvZiBhdHRyaWJ1dGVzIGNvbnRhaW5zIGEgdmFsdWUgZm9yIGB0YXJnZXRgLCBpdCBvdmVycmlkZXMgdGhlIHZhbHVlIG9mXG4gKiAgICB0aGUgdGFyZ2V0IHBhcmFtZXRlci5cbiAqXG4gKlxuICogQHJldHVybnMge3N0cmluZ30gSHRtbC1saW5raWZpZWQgYW5kIHtAbGluayAkc2FuaXRpemUgc2FuaXRpemVkfSB0ZXh0LlxuICpcbiAqIEB1c2FnZVxuICAgPHNwYW4gbmctYmluZC1odG1sPVwibGlua3lfZXhwcmVzc2lvbiB8IGxpbmt5XCI+PC9zcGFuPlxuICpcbiAqIEBleGFtcGxlXG4gICA8ZXhhbXBsZSBtb2R1bGU9XCJsaW5reUV4YW1wbGVcIiBkZXBzPVwiYW5ndWxhci1zYW5pdGl6ZS5qc1wiPlxuICAgICA8ZmlsZSBuYW1lPVwiaW5kZXguaHRtbFwiPlxuICAgICAgIDxkaXYgbmctY29udHJvbGxlcj1cIkV4YW1wbGVDb250cm9sbGVyXCI+XG4gICAgICAgU25pcHBldDogPHRleHRhcmVhIG5nLW1vZGVsPVwic25pcHBldFwiIGNvbHM9XCI2MFwiIHJvd3M9XCIzXCI+PC90ZXh0YXJlYT5cbiAgICAgICA8dGFibGU+XG4gICAgICAgICA8dHI+XG4gICAgICAgICAgIDx0aD5GaWx0ZXI8L3RoPlxuICAgICAgICAgICA8dGg+U291cmNlPC90aD5cbiAgICAgICAgICAgPHRoPlJlbmRlcmVkPC90aD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgICA8dHIgaWQ9XCJsaW5reS1maWx0ZXJcIj5cbiAgICAgICAgICAgPHRkPmxpbmt5IGZpbHRlcjwvdGQ+XG4gICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgICA8cHJlPiZsdDtkaXYgbmctYmluZC1odG1sPVwic25pcHBldCB8IGxpbmt5XCImZ3Q7PGJyPiZsdDsvZGl2Jmd0OzwvcHJlPlxuICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICAgPGRpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0IHwgbGlua3lcIj48L2Rpdj5cbiAgICAgICAgICAgPC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgICA8dHIgaWQ9XCJsaW5reS10YXJnZXRcIj5cbiAgICAgICAgICA8dGQ+bGlua3kgdGFyZ2V0PC90ZD5cbiAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICA8cHJlPiZsdDtkaXYgbmctYmluZC1odG1sPVwic25pcHBldFdpdGhTaW5nbGVVUkwgfCBsaW5reTonX2JsYW5rJ1wiJmd0Ozxicj4mbHQ7L2RpdiZndDs8L3ByZT5cbiAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgIDxkaXYgbmctYmluZC1odG1sPVwic25pcHBldFdpdGhTaW5nbGVVUkwgfCBsaW5reTonX2JsYW5rJ1wiPjwvZGl2PlxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgICAgPHRyIGlkPVwibGlua3ktY3VzdG9tLWF0dHJpYnV0ZXNcIj5cbiAgICAgICAgICA8dGQ+bGlua3kgY3VzdG9tIGF0dHJpYnV0ZXM8L3RkPlxuICAgICAgICAgIDx0ZD5cbiAgICAgICAgICAgIDxwcmU+Jmx0O2RpdiBuZy1iaW5kLWh0bWw9XCJzbmlwcGV0V2l0aFNpbmdsZVVSTCB8IGxpbmt5Oidfc2VsZic6e3JlbDogJ25vZm9sbG93J31cIiZndDs8YnI+Jmx0Oy9kaXYmZ3Q7PC9wcmU+XG4gICAgICAgICAgPC90ZD5cbiAgICAgICAgICA8dGQ+XG4gICAgICAgICAgICA8ZGl2IG5nLWJpbmQtaHRtbD1cInNuaXBwZXRXaXRoU2luZ2xlVVJMIHwgbGlua3k6J19zZWxmJzp7cmVsOiAnbm9mb2xsb3cnfVwiPjwvZGl2PlxuICAgICAgICAgIDwvdGQ+XG4gICAgICAgICA8L3RyPlxuICAgICAgICAgPHRyIGlkPVwiZXNjYXBlZC1odG1sXCI+XG4gICAgICAgICAgIDx0ZD5ubyBmaWx0ZXI8L3RkPlxuICAgICAgICAgICA8dGQ+PHByZT4mbHQ7ZGl2IG5nLWJpbmQ9XCJzbmlwcGV0XCImZ3Q7PGJyPiZsdDsvZGl2Jmd0OzwvcHJlPjwvdGQ+XG4gICAgICAgICAgIDx0ZD48ZGl2IG5nLWJpbmQ9XCJzbmlwcGV0XCI+PC9kaXY+PC90ZD5cbiAgICAgICAgIDwvdHI+XG4gICAgICAgPC90YWJsZT5cbiAgICAgPC9maWxlPlxuICAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XG4gICAgICAgYW5ndWxhci5tb2R1bGUoJ2xpbmt5RXhhbXBsZScsIFsnbmdTYW5pdGl6ZSddKVxuICAgICAgICAgLmNvbnRyb2xsZXIoJ0V4YW1wbGVDb250cm9sbGVyJywgWyckc2NvcGUnLCBmdW5jdGlvbigkc2NvcGUpIHtcbiAgICAgICAgICAgJHNjb3BlLnNuaXBwZXQgPVxuICAgICAgICAgICAgICdQcmV0dHkgdGV4dCB3aXRoIHNvbWUgbGlua3M6XFxuJytcbiAgICAgICAgICAgICAnaHR0cDovL2FuZ3VsYXJqcy5vcmcvLFxcbicrXG4gICAgICAgICAgICAgJ21haWx0bzp1c0Bzb21ld2hlcmUub3JnLFxcbicrXG4gICAgICAgICAgICAgJ2Fub3RoZXJAc29tZXdoZXJlLm9yZyxcXG4nK1xuICAgICAgICAgICAgICdhbmQgb25lIG1vcmU6IGZ0cDovLzEyNy4wLjAuMS8uJztcbiAgICAgICAgICAgJHNjb3BlLnNuaXBwZXRXaXRoU2luZ2xlVVJMID0gJ2h0dHA6Ly9hbmd1bGFyanMub3JnLyc7XG4gICAgICAgICB9XSk7XG4gICAgIDwvZmlsZT5cbiAgICAgPGZpbGUgbmFtZT1cInByb3RyYWN0b3IuanNcIiB0eXBlPVwicHJvdHJhY3RvclwiPlxuICAgICAgIGl0KCdzaG91bGQgbGlua2lmeSB0aGUgc25pcHBldCB3aXRoIHVybHMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5reS1maWx0ZXInKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0IHwgbGlua3knKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgICB0b0JlKCdQcmV0dHkgdGV4dCB3aXRoIHNvbWUgbGlua3M6IGh0dHA6Ly9hbmd1bGFyanMub3JnLywgdXNAc29tZXdoZXJlLm9yZywgJyArXG4gICAgICAgICAgICAgICAgICAnYW5vdGhlckBzb21ld2hlcmUub3JnLCBhbmQgb25lIG1vcmU6IGZ0cDovLzEyNy4wLjAuMS8uJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCcjbGlua3ktZmlsdGVyIGEnKSkuY291bnQoKSkudG9FcXVhbCg0KTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgbm90IGxpbmtpZnkgc25pcHBldCB3aXRob3V0IHRoZSBsaW5reSBmaWx0ZXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdlc2NhcGVkLWh0bWwnKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0JykpLmdldFRleHQoKSkuXG4gICAgICAgICAgICAgdG9CZSgnUHJldHR5IHRleHQgd2l0aCBzb21lIGxpbmtzOiBodHRwOi8vYW5ndWxhcmpzLm9yZy8sIG1haWx0bzp1c0Bzb21ld2hlcmUub3JnLCAnICtcbiAgICAgICAgICAgICAgICAgICdhbm90aGVyQHNvbWV3aGVyZS5vcmcsIGFuZCBvbmUgbW9yZTogZnRwOi8vMTI3LjAuMC4xLy4nKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50LmFsbChieS5jc3MoJyNlc2NhcGVkLWh0bWwgYScpKS5jb3VudCgpKS50b0VxdWFsKDApO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCB1cGRhdGUnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuY2xlYXIoKTtcbiAgICAgICAgIGVsZW1lbnQoYnkubW9kZWwoJ3NuaXBwZXQnKSkuc2VuZEtleXMoJ25ldyBodHRwOi8vbGluay4nKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdsaW5reS1maWx0ZXInKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0IHwgbGlua3knKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgICB0b0JlKCduZXcgaHR0cDovL2xpbmsuJyk7XG4gICAgICAgICBleHBlY3QoZWxlbWVudC5hbGwoYnkuY3NzKCcjbGlua3ktZmlsdGVyIGEnKSkuY291bnQoKSkudG9FcXVhbCgxKTtcbiAgICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmlkKCdlc2NhcGVkLWh0bWwnKSkuZWxlbWVudChieS5iaW5kaW5nKCdzbmlwcGV0JykpLmdldFRleHQoKSlcbiAgICAgICAgICAgICAudG9CZSgnbmV3IGh0dHA6Ly9saW5rLicpO1xuICAgICAgIH0pO1xuXG4gICAgICAgaXQoJ3Nob3VsZCB3b3JrIHdpdGggdGhlIHRhcmdldCBwcm9wZXJ0eScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5pZCgnbGlua3ktdGFyZ2V0JykpLlxuICAgICAgICAgICAgZWxlbWVudChieS5iaW5kaW5nKFwic25pcHBldFdpdGhTaW5nbGVVUkwgfCBsaW5reTonX2JsYW5rJ1wiKSkuZ2V0VGV4dCgpKS5cbiAgICAgICAgICAgIHRvQmUoJ2h0dHA6Ly9hbmd1bGFyanMub3JnLycpO1xuICAgICAgICBleHBlY3QoZWxlbWVudChieS5jc3MoJyNsaW5reS10YXJnZXQgYScpKS5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpKS50b0VxdWFsKCdfYmxhbmsnKTtcbiAgICAgICB9KTtcblxuICAgICAgIGl0KCdzaG91bGQgb3B0aW9uYWxseSBhZGQgY3VzdG9tIGF0dHJpYnV0ZXMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgZXhwZWN0KGVsZW1lbnQoYnkuaWQoJ2xpbmt5LWN1c3RvbS1hdHRyaWJ1dGVzJykpLlxuICAgICAgICAgICAgZWxlbWVudChieS5iaW5kaW5nKFwic25pcHBldFdpdGhTaW5nbGVVUkwgfCBsaW5reTonX3NlbGYnOntyZWw6ICdub2ZvbGxvdyd9XCIpKS5nZXRUZXh0KCkpLlxuICAgICAgICAgICAgdG9CZSgnaHR0cDovL2FuZ3VsYXJqcy5vcmcvJyk7XG4gICAgICAgIGV4cGVjdChlbGVtZW50KGJ5LmNzcygnI2xpbmt5LWN1c3RvbS1hdHRyaWJ1dGVzIGEnKSkuZ2V0QXR0cmlidXRlKCdyZWwnKSkudG9FcXVhbCgnbm9mb2xsb3cnKTtcbiAgICAgICB9KTtcbiAgICAgPC9maWxlPlxuICAgPC9leGFtcGxlPlxuICovXG5hbmd1bGFyLm1vZHVsZSgnbmdTYW5pdGl6ZScpLmZpbHRlcignbGlua3knLCBbJyRzYW5pdGl6ZScsIGZ1bmN0aW9uKCRzYW5pdGl6ZSkge1xuICB2YXIgTElOS1lfVVJMX1JFR0VYUCA9XG4gICAgICAgIC8oKGZ0cHxodHRwcz8pOlxcL1xcL3wod3d3XFwuKXwobWFpbHRvOik/W0EtWmEtejAtOS5fJSstXStAKVxcUypbXlxccy47LCgpe308PlwiXFx1MjAxZFxcdTIwMTldL2ksXG4gICAgICBNQUlMVE9fUkVHRVhQID0gL15tYWlsdG86L2k7XG5cbiAgdmFyIGxpbmt5TWluRXJyID0gYW5ndWxhci4kJG1pbkVycignbGlua3knKTtcbiAgdmFyIGlzU3RyaW5nID0gYW5ndWxhci5pc1N0cmluZztcblxuICByZXR1cm4gZnVuY3Rpb24odGV4dCwgdGFyZ2V0LCBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKHRleHQgPT0gbnVsbCB8fCB0ZXh0ID09PSAnJykgcmV0dXJuIHRleHQ7XG4gICAgaWYgKCFpc1N0cmluZyh0ZXh0KSkgdGhyb3cgbGlua3lNaW5FcnIoJ25vdHN0cmluZycsICdFeHBlY3RlZCBzdHJpbmcgYnV0IHJlY2VpdmVkOiB7MH0nLCB0ZXh0KTtcblxuICAgIHZhciBtYXRjaDtcbiAgICB2YXIgcmF3ID0gdGV4dDtcbiAgICB2YXIgaHRtbCA9IFtdO1xuICAgIHZhciB1cmw7XG4gICAgdmFyIGk7XG4gICAgd2hpbGUgKChtYXRjaCA9IHJhdy5tYXRjaChMSU5LWV9VUkxfUkVHRVhQKSkpIHtcbiAgICAgIC8vIFdlIGNhbiBub3QgZW5kIGluIHRoZXNlIGFzIHRoZXkgYXJlIHNvbWV0aW1lcyBmb3VuZCBhdCB0aGUgZW5kIG9mIHRoZSBzZW50ZW5jZVxuICAgICAgdXJsID0gbWF0Y2hbMF07XG4gICAgICAvLyBpZiB3ZSBkaWQgbm90IG1hdGNoIGZ0cC9odHRwL3d3dy9tYWlsdG8gdGhlbiBhc3N1bWUgbWFpbHRvXG4gICAgICBpZiAoIW1hdGNoWzJdICYmICFtYXRjaFs0XSkge1xuICAgICAgICB1cmwgPSAobWF0Y2hbM10gPyAnaHR0cDovLycgOiAnbWFpbHRvOicpICsgdXJsO1xuICAgICAgfVxuICAgICAgaSA9IG1hdGNoLmluZGV4O1xuICAgICAgYWRkVGV4dChyYXcuc3Vic3RyKDAsIGkpKTtcbiAgICAgIGFkZExpbmsodXJsLCBtYXRjaFswXS5yZXBsYWNlKE1BSUxUT19SRUdFWFAsICcnKSk7XG4gICAgICByYXcgPSByYXcuc3Vic3RyaW5nKGkgKyBtYXRjaFswXS5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRUZXh0KHJhdyk7XG4gICAgcmV0dXJuICRzYW5pdGl6ZShodG1sLmpvaW4oJycpKTtcblxuICAgIGZ1bmN0aW9uIGFkZFRleHQodGV4dCkge1xuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGh0bWwucHVzaChzYW5pdGl6ZVRleHQodGV4dCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZExpbmsodXJsLCB0ZXh0KSB7XG4gICAgICB2YXIga2V5O1xuICAgICAgaHRtbC5wdXNoKCc8YSAnKTtcbiAgICAgIGlmIChhbmd1bGFyLmlzRnVuY3Rpb24oYXR0cmlidXRlcykpIHtcbiAgICAgICAgYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXModXJsKTtcbiAgICAgIH1cbiAgICAgIGlmIChhbmd1bGFyLmlzT2JqZWN0KGF0dHJpYnV0ZXMpKSB7XG4gICAgICAgIGZvciAoa2V5IGluIGF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICBodG1sLnB1c2goa2V5ICsgJz1cIicgKyBhdHRyaWJ1dGVzW2tleV0gKyAnXCIgJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgIH1cbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0YXJnZXQpICYmICEoJ3RhcmdldCcgaW4gYXR0cmlidXRlcykpIHtcbiAgICAgICAgaHRtbC5wdXNoKCd0YXJnZXQ9XCInLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgJ1wiICcpO1xuICAgICAgfVxuICAgICAgaHRtbC5wdXNoKCdocmVmPVwiJyxcbiAgICAgICAgICAgICAgICB1cmwucmVwbGFjZSgvXCIvZywgJyZxdW90OycpLFxuICAgICAgICAgICAgICAgICdcIj4nKTtcbiAgICAgIGFkZFRleHQodGV4dCk7XG4gICAgICBodG1sLnB1c2goJzwvYT4nKTtcbiAgICB9XG4gIH07XG59XSk7XG5cblxufSkod2luZG93LCB3aW5kb3cuYW5ndWxhcik7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9hbmd1bGFyLXNhbml0aXplL2FuZ3VsYXItc2FuaXRpemUuanNcbiAqKiBtb2R1bGUgaWQgPSA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIoZnVuY3Rpb24oKSB7IG1vZHVsZS5leHBvcnRzID0gdGhpc1tcInJsX3V0aWxpdGllc1wiXTsgfSgpKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIGV4dGVybmFsIFwicmxfdXRpbGl0aWVzXCJcbiAqKiBtb2R1bGUgaWQgPSA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJyZXF1aXJlKCcuL2Jvb3RzdHJhcC1zbGlkZXIubWluLmNzcycpO1xyXG52YXIgU2xpZGVyID0gcmVxdWlyZSgnLi9ib290c3RyYXAtc2xpZGVyLm1pbicpO1xyXG5cclxuYW5ndWxhci5tb2R1bGUoJ3VpLmJvb3RzdHJhcC1zbGlkZXInLCBbXSlcclxuICAgIC5kaXJlY3RpdmUoJ3NsaWRlcicsIFsnJHBhcnNlJywgJyR0aW1lb3V0JywgJyRyb290U2NvcGUnLCBmdW5jdGlvbiAoJHBhcnNlLCAkdGltZW91dCwgJHJvb3RTY29wZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQUUnLFxyXG4gICAgICAgICAgICByZXBsYWNlOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJzxkaXY+PGlucHV0IGNsYXNzPVwic2xpZGVyLWlucHV0XCIgdHlwZT1cInRleHRcIiBzdHlsZT1cIndpZHRoOjEwMCVcIiAvPjwvZGl2PicsXHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgICAgIG1heDogXCI9XCIsXHJcbiAgICAgICAgICAgICAgICBtaW46IFwiPVwiLFxyXG4gICAgICAgICAgICAgICAgc3RlcDogXCI9XCIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogXCI9XCIsXHJcbiAgICAgICAgICAgICAgICBuZ01vZGVsOiAnPScsXHJcbiAgICAgICAgICAgICAgICBuZ0Rpc2FibGVkOiAnPScsXHJcbiAgICAgICAgICAgICAgICByYW5nZTogJz0nLFxyXG4gICAgICAgICAgICAgICAgc2xpZGVyaWQ6ICc9JyxcclxuICAgICAgICAgICAgICAgIHRpY2tzOiAnPScsXHJcbiAgICAgICAgICAgICAgICB0aWNrc0xhYmVsczogJz0nLFxyXG4gICAgICAgICAgICAgICAgdGlja3NTbmFwQm91bmRzOiAnPScsXHJcbiAgICAgICAgICAgICAgICB0aWNrc1Bvc2l0aW9uczogJz0nLFxyXG4gICAgICAgICAgICAgICAgc2NhbGU6ICc9JyxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlcjogJyYnLFxyXG4gICAgICAgICAgICAgICAgb25TdGFydFNsaWRlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBvblN0b3BTbGlkZTogJyYnLFxyXG4gICAgICAgICAgICAgICAgb25TbGlkZTogJyYnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uICgkc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBuZ01vZGVsQ3RybCwgJGNvbXBpbGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZ01vZGVsRGVyZWdpc3RlckZuLCBuZ0Rpc2FibGVkRGVyZWdpc3RlckZuO1xyXG5cclxuICAgICAgICAgICAgICAgIGluaXRTbGlkZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpbml0U2xpZGVyKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHNldE9wdGlvbihrZXksIHZhbHVlLCBkZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1trZXldID0gdmFsdWUgfHwgZGVmYXVsdFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gc2V0RmxvYXRPcHRpb24oa2V5LCB2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNba2V5XSA9IHZhbHVlIHx8IHZhbHVlID09PSAwID8gcGFyc2VGbG9hdCh2YWx1ZSkgOiBkZWZhdWx0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBzZXRCb29sZWFuT3B0aW9uKGtleSwgdmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zW2tleV0gPSB2YWx1ZSA/IHZhbHVlICsgJycgPT09ICd0cnVlJyA6IGRlZmF1bHRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldEFycmF5T3JWYWx1ZSh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGFuZ3VsYXIuaXNTdHJpbmcodmFsdWUpICYmIHZhbHVlLmluZGV4T2YoXCJbXCIpID09PSAwKSA/IGFuZ3VsYXIuZnJvbUpzb24odmFsdWUpIDogdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRPcHRpb24oJ2lkJywgJHNjb3BlLnNsaWRlcmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRPcHRpb24oJ29yaWVudGF0aW9uJywgYXR0cnMub3JpZW50YXRpb24sICdob3Jpem9udGFsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0T3B0aW9uKCdzZWxlY3Rpb24nLCBhdHRycy5zZWxlY3Rpb24sICdiZWZvcmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRPcHRpb24oJ2hhbmRsZScsIGF0dHJzLmhhbmRsZSwgJ3JvdW5kJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0T3B0aW9uKCd0b29sdGlwJywgYXR0cnMuc2xpZGVyVG9vbHRpcCB8fCBhdHRycy50b29sdGlwLCAnc2hvdycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldE9wdGlvbigndG9vbHRpcF9wb3NpdGlvbicsIGF0dHJzLnNsaWRlclRvb2x0aXBQb3NpdGlvbiwgJ3RvcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldE9wdGlvbigndG9vbHRpcHNlcGFyYXRvcicsIGF0dHJzLnRvb2x0aXBzZXBhcmF0b3IsICc6Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0T3B0aW9uKCd0aWNrcycsICRzY29wZS50aWNrcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0T3B0aW9uKCd0aWNrc19sYWJlbHMnLCAkc2NvcGUudGlja3NMYWJlbHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldE9wdGlvbigndGlja3Nfc25hcF9ib3VuZHMnLCAkc2NvcGUudGlja3NTbmFwQm91bmRzKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRPcHRpb24oJ3RpY2tzX3Bvc2l0aW9ucycsICRzY29wZS50aWNrc1Bvc2l0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0T3B0aW9uKCdzY2FsZScsICRzY29wZS5zY2FsZSwgJ2xpbmVhcicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRGbG9hdE9wdGlvbignbWluJywgJHNjb3BlLm1pbiwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0RmxvYXRPcHRpb24oJ21heCcsICRzY29wZS5tYXgsIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRGbG9hdE9wdGlvbignc3RlcCcsICRzY29wZS5zdGVwLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RyTmJyID0gb3B0aW9ucy5zdGVwICsgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRlY2ltYWxzID0gc3RyTmJyLnN1YnN0cmluZyhzdHJOYnIubGFzdEluZGV4T2YoJy4nKSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEZsb2F0T3B0aW9uKCdwcmVjaXNpb24nLCBhdHRycy5wcmVjaXNpb24sIGRlY2ltYWxzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0Qm9vbGVhbk9wdGlvbigndG9vbHRpcF9zcGxpdCcsIGF0dHJzLnRvb2x0aXBzcGxpdCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEJvb2xlYW5PcHRpb24oJ2VuYWJsZWQnLCBhdHRycy5lbmFibGVkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRCb29sZWFuT3B0aW9uKCduYXR1cmFsYXJyb3drZXlzJywgYXR0cnMubmF0dXJhbGFycm93a2V5cywgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEJvb2xlYW5PcHRpb24oJ3JldmVyc2VkJywgYXR0cnMucmV2ZXJzZWQsIGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0Qm9vbGVhbk9wdGlvbigncmFuZ2UnLCAkc2NvcGUucmFuZ2UsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5yYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0FycmF5KCRzY29wZS52YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudmFsdWUgPSAkc2NvcGUudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYW5ndWxhci5pc1N0cmluZygkc2NvcGUudmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnZhbHVlID0gZ2V0QXJyYXlPclZhbHVlKCRzY29wZS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFuZ3VsYXIuaXNBcnJheShvcHRpb25zLnZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHBhcnNlRmxvYXQoJHNjb3BlLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSB2YWx1ZSA9IDU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8ICRzY29wZS5taW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAkc2NvcGUubWluO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnZhbHVlID0gW3ZhbHVlLCBvcHRpb25zLm1heF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gJHNjb3BlLm1heCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9ICRzY29wZS5tYXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudmFsdWUgPSBbb3B0aW9ucy5taW4sIHZhbHVlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudmFsdWUgPSBbb3B0aW9ucy5taW4sIG9wdGlvbnMubWF4XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnZhbHVlID0gW29wdGlvbnMubWluLCBvcHRpb25zLm1heF07IC8vIFRoaXMgaXMgbmVlZGVkLCBiZWNhdXNlIG9mIHZhbHVlIGRlZmluZWQgYXQgJC5mbi5zbGlkZXIuZGVmYXVsdHMgLSBkZWZhdWx0IHZhbHVlIDUgcHJldmVudHMgY3JlYXRpbmcgcmFuZ2Ugc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm5nTW9kZWwgPSBvcHRpb25zLnZhbHVlOyAvLyBuZWVkZWQsIG90aGVyd2lzZSB0dXJucyB2YWx1ZSBpbnRvIFtudWxsLCAjI11cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZsb2F0T3B0aW9uKCd2YWx1ZScsICRzY29wZS52YWx1ZSwgNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHNjb3BlLmZvcm1hdHRlcikgb3B0aW9ucy5mb3JtYXR0ZXIgPSAkc2NvcGUuJGV2YWwoJHNjb3BlLmZvcm1hdHRlcik7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBzbGlkZXIgalF1ZXJ5IHBsdWdpbiBleGlzdHNcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJyQnIGluIHdpbmRvdyAmJiAkLmZuLnNsaWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhZGRpbmcgbWV0aG9kcyB0byBqUXVlcnkgc2xpZGVyIHBsdWdpbiBwcm90b3R5cGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5mbi5zbGlkZXIuY29uc3RydWN0b3IucHJvdG90eXBlLmRpc2FibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBpY2tlci5vZmYoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5mbi5zbGlkZXIuY29uc3RydWN0b3IucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGlja2VyLm9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBkZXN0cm95IHByZXZpb3VzIHNsaWRlciB0byByZXNldCBhbGwgb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50WzBdLl9fc2xpZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50WzBdLl9fc2xpZGVyLmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWRlciA9IG5ldyBTbGlkZXIoZWxlbWVudFswXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzbGlkZXItaW5wdXQnKVswXSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudFswXS5fX3NsaWRlciA9IHNsaWRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlcnl0aGluZyB0aGF0IG5lZWRzIHNsaWRlciBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVwZGF0ZUV2ZW50ID0gZ2V0QXJyYXlPclZhbHVlKGF0dHJzLnVwZGF0ZWV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc1N0cmluZyh1cGRhdGVFdmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgb25seSBzaW5nbGUgZXZlbnQgbmFtZSBpbiBzdHJpbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRXZlbnQgPSBbdXBkYXRlRXZlbnRdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGVmYXVsdCB0byBzbGlkZSBldmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVFdmVudCA9IFsnc2xpZGUnXTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHVwZGF0ZUV2ZW50LCBmdW5jdGlvbiAoc2xpZGVyRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm9uKHNsaWRlckV2ZW50LCBmdW5jdGlvbiAoZXYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nTW9kZWxDdHJsLiRzZXRWaWV3VmFsdWUoZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXIub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsQ3RybC4kc2V0Vmlld1ZhbHVlKGV2Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsaWRlckV2ZW50cyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVTdGFydDogJ29uU3RhcnRTbGlkZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlOiAnb25TbGlkZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlU3RvcDogJ29uU3RvcFNsaWRlJ1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNsaWRlckV2ZW50cywgZnVuY3Rpb24gKHNsaWRlckV2ZW50QXR0ciwgc2xpZGVyRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gJHBhcnNlKGF0dHJzW3NsaWRlckV2ZW50QXR0cl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIub24oc2xpZGVyRXZlbnQsIGZ1bmN0aW9uIChldikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzY29wZVtzbGlkZXJFdmVudEF0dHJdKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjYWxsYmFjayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm4oJHNjb3BlLiRwYXJlbnQsIHsgJGV2ZW50OiBldiwgdmFsdWU6IGV2IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRyb290U2NvcGUuJCRwaGFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGV2YWxBc3luYyhjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiRhcHBseShjYWxsYmFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVyZWdpc3RlciBuZ0Rpc2FibGVkIHdhdGNoZXIgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKG5nRGlzYWJsZWREZXJlZ2lzdGVyRm4pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5nRGlzYWJsZWREZXJlZ2lzdGVyRm4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmdEaXNhYmxlZERlcmVnaXN0ZXJGbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZ0Rpc2FibGVkRGVyZWdpc3RlckZuID0gJHNjb3BlLiR3YXRjaCgnbmdEaXNhYmxlZCcsIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5kaXNhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIuZW5hYmxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVyZWdpc3RlciBuZ01vZGVsIHdhdGNoZXIgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc0Z1bmN0aW9uKG5nTW9kZWxEZXJlZ2lzdGVyRm4pKSBuZ01vZGVsRGVyZWdpc3RlckZuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmdNb2RlbERlcmVnaXN0ZXJGbiA9ICRzY29wZS4kd2F0Y2goJ25nTW9kZWwnLCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnJhbmdlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlci5zZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnNldFZhbHVlKHBhcnNlRmxvYXQodmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgd2F0Y2hlcnMgPSBbJ21pbicsICdtYXgnLCAnc3RlcCcsICdyYW5nZScsICdzY2FsZSddO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHdhdGNoZXJzLCBmdW5jdGlvbiAocHJvcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS4kd2F0Y2gocHJvcCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0U2xpZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSlcclxuO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9saWJyYXJpZXMvYW5ndWxhci1ib290c3RyYXAtc2xpZGVyL3NsaWRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vYm9vdHN0cmFwLXNsaWRlci5taW4uY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2Jvb3RzdHJhcC1zbGlkZXIubWluLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2Jvb3RzdHJhcC1zbGlkZXIubWluLmNzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2xpYnJhcmllcy9hbmd1bGFyLWJvb3RzdHJhcC1zbGlkZXIvYm9vdHN0cmFwLXNsaWRlci5taW4uY3NzXG4gKiogbW9kdWxlIGlkID0gN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiEgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxcclxcbiAgICAgICAgICAgICAgICAgICAgICBWRVJTSU9OICA1LjEuMVxcclxcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xcclxcbi8qISA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXHJcXG4gKiBib290c3RyYXAtc2xpZGVyLmpzXFxyXFxuICpcXHJcXG4gKiBNYWludGFpbmVyczpcXHJcXG4gKlxcdFxcdEt5bGUgS2VtcFxcclxcbiAqXFx0XFx0XFx0LSBUd2l0dGVyOiBAc2VpeXJpYVxcclxcbiAqXFx0XFx0XFx0LSBHaXRodWI6ICBzZWl5cmlhXFxyXFxuICpcXHRcXHRSb2hpdCBLYWxrdXJcXHJcXG4gKlxcdFxcdFxcdC0gVHdpdHRlcjogQFJvdm9sdXRpb25hcnlcXHJcXG4gKlxcdFxcdFxcdC0gR2l0aHViOiAgcm92b2x1dGlvblxcclxcbiAqXFxyXFxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XFxyXFxuICpcXHJcXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXFxcIkxpY2Vuc2VcXFwiKTtcXHJcXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXFxyXFxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XFxyXFxuICpcXHJcXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcXHJcXG4gKlxcclxcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcXHJcXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcXFwiQVMgSVNcXFwiIEJBU0lTLFxcclxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxcclxcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcXHJcXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cXHJcXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8uc2xpZGVye2Rpc3BsYXk6aW5saW5lLWJsb2NrO3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtwb3NpdGlvbjpyZWxhdGl2ZX0uc2xpZGVyLnNsaWRlci1ob3Jpem9udGFse3dpZHRoOjIxMHB4O2hlaWdodDoyMHB4fS5zbGlkZXIuc2xpZGVyLWhvcml6b250YWwgLnNsaWRlci10cmFja3toZWlnaHQ6MTBweDt3aWR0aDoxMDAlO21hcmdpbi10b3A6LTVweDt0b3A6NTAlO2xlZnQ6MH0uc2xpZGVyLnNsaWRlci1ob3Jpem9udGFsIC5zbGlkZXItc2VsZWN0aW9uLC5zbGlkZXIuc2xpZGVyLWhvcml6b250YWwgLnNsaWRlci10cmFjay1sb3csLnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLXRyYWNrLWhpZ2h7aGVpZ2h0OjEwMCU7dG9wOjA7Ym90dG9tOjB9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLXRpY2ssLnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLWhhbmRsZXttYXJnaW4tbGVmdDotMTBweDttYXJnaW4tdG9wOi01cHh9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLXRpY2sudHJpYW5nbGUsLnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLWhhbmRsZS50cmlhbmdsZXtib3JkZXItd2lkdGg6MCAxMHB4IDEwcHggMTBweDt3aWR0aDowO2hlaWdodDowO2JvcmRlci1ib3R0b20tY29sb3I6IzA0ODBiZTttYXJnaW4tdG9wOjB9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLXRpY2stbGFiZWwtY29udGFpbmVye3doaXRlLXNwYWNlOm5vd3JhcDttYXJnaW4tdG9wOjIwcHh9LnNsaWRlci5zbGlkZXItaG9yaXpvbnRhbCAuc2xpZGVyLXRpY2stbGFiZWwtY29udGFpbmVyIC5zbGlkZXItdGljay1sYWJlbHtwYWRkaW5nLXRvcDo0cHg7ZGlzcGxheTppbmxpbmUtYmxvY2s7dGV4dC1hbGlnbjpjZW50ZXJ9LnNsaWRlci5zbGlkZXItdmVydGljYWx7aGVpZ2h0OjIxMHB4O3dpZHRoOjIwcHh9LnNsaWRlci5zbGlkZXItdmVydGljYWwgLnNsaWRlci10cmFja3t3aWR0aDoxMHB4O2hlaWdodDoxMDAlO21hcmdpbi1sZWZ0Oi01cHg7bGVmdDo1MCU7dG9wOjB9LnNsaWRlci5zbGlkZXItdmVydGljYWwgLnNsaWRlci1zZWxlY3Rpb257d2lkdGg6MTAwJTtsZWZ0OjA7dG9wOjA7Ym90dG9tOjB9LnNsaWRlci5zbGlkZXItdmVydGljYWwgLnNsaWRlci10cmFjay1sb3csLnNsaWRlci5zbGlkZXItdmVydGljYWwgLnNsaWRlci10cmFjay1oaWdoe3dpZHRoOjEwMCU7bGVmdDowO3JpZ2h0OjB9LnNsaWRlci5zbGlkZXItdmVydGljYWwgLnNsaWRlci10aWNrLC5zbGlkZXIuc2xpZGVyLXZlcnRpY2FsIC5zbGlkZXItaGFuZGxle21hcmdpbi1sZWZ0Oi01cHg7bWFyZ2luLXRvcDotMTBweH0uc2xpZGVyLnNsaWRlci12ZXJ0aWNhbCAuc2xpZGVyLXRpY2sudHJpYW5nbGUsLnNsaWRlci5zbGlkZXItdmVydGljYWwgLnNsaWRlci1oYW5kbGUudHJpYW5nbGV7Ym9yZGVyLXdpZHRoOjEwcHggMCAxMHB4IDEwcHg7d2lkdGg6MXB4O2hlaWdodDoxcHg7Ym9yZGVyLWxlZnQtY29sb3I6IzA0ODBiZTttYXJnaW4tbGVmdDowfS5zbGlkZXIuc2xpZGVyLWRpc2FibGVkIC5zbGlkZXItaGFuZGxle2JhY2tncm91bmQtaW1hZ2U6LXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCNkZmRmZGYgMCwjYmViZWJlIDEwMCUpO2JhY2tncm91bmQtaW1hZ2U6LW8tbGluZWFyLWdyYWRpZW50KHRvcCwjZGZkZmRmIDAsI2JlYmViZSAxMDAlKTtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sI2RmZGZkZiAwLCNiZWJlYmUgMTAwJSk7YmFja2dyb3VuZC1yZXBlYXQ6cmVwZWF0LXg7ZmlsdGVyOnByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmZkZmRmZGYnLGVuZENvbG9yc3RyPScjZmZiZWJlYmUnLEdyYWRpZW50VHlwZT0wKX0uc2xpZGVyLnNsaWRlci1kaXNhYmxlZCAuc2xpZGVyLXRyYWNre2JhY2tncm91bmQtaW1hZ2U6LXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCNlNWU1ZTUgMCwjZTllOWU5IDEwMCUpO2JhY2tncm91bmQtaW1hZ2U6LW8tbGluZWFyLWdyYWRpZW50KHRvcCwjZTVlNWU1IDAsI2U5ZTllOSAxMDAlKTtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sI2U1ZTVlNSAwLCNlOWU5ZTkgMTAwJSk7YmFja2dyb3VuZC1yZXBlYXQ6cmVwZWF0LXg7ZmlsdGVyOnByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmZlNWU1ZTUnLGVuZENvbG9yc3RyPScjZmZlOWU5ZTknLEdyYWRpZW50VHlwZT0wKTtjdXJzb3I6bm90LWFsbG93ZWR9LnNsaWRlciBpbnB1dHtkaXNwbGF5Om5vbmV9LnNsaWRlciAudG9vbHRpcC50b3B7bWFyZ2luLXRvcDotMzZweH0uc2xpZGVyIC50b29sdGlwLWlubmVye3doaXRlLXNwYWNlOm5vd3JhcH0uc2xpZGVyIC5oaWRle2Rpc3BsYXk6bm9uZX0uc2xpZGVyLXRyYWNre3Bvc2l0aW9uOmFic29sdXRlO2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQtaW1hZ2U6LXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCNmNWY1ZjUgMCwjZjlmOWY5IDEwMCUpO2JhY2tncm91bmQtaW1hZ2U6LW8tbGluZWFyLWdyYWRpZW50KHRvcCwjZjVmNWY1IDAsI2Y5ZjlmOSAxMDAlKTtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sI2Y1ZjVmNSAwLCNmOWY5ZjkgMTAwJSk7YmFja2dyb3VuZC1yZXBlYXQ6cmVwZWF0LXg7ZmlsdGVyOnByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmZmNWY1ZjUnLGVuZENvbG9yc3RyPScjZmZmOWY5ZjknLEdyYWRpZW50VHlwZT0wKTstd2Via2l0LWJveC1zaGFkb3c6aW5zZXQgMCAxcHggMnB4IHJnYmEoMCwwLDAsMC4xKTtib3gtc2hhZG93Omluc2V0IDAgMXB4IDJweCByZ2JhKDAsMCwwLDAuMSk7Ym9yZGVyLXJhZGl1czo0cHh9LnNsaWRlci1zZWxlY3Rpb257cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZC1pbWFnZTotd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsI2Y5ZjlmOSAwLCNmNWY1ZjUgMTAwJSk7YmFja2dyb3VuZC1pbWFnZTotby1saW5lYXItZ3JhZGllbnQodG9wLCNmOWY5ZjkgMCwjZjVmNWY1IDEwMCUpO2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjZjlmOWY5IDAsI2Y1ZjVmNSAxMDAlKTtiYWNrZ3JvdW5kLXJlcGVhdDpyZXBlYXQteDtmaWx0ZXI6cHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZmY5ZjlmOScsZW5kQ29sb3JzdHI9JyNmZmY1ZjVmNScsR3JhZGllbnRUeXBlPTApOy13ZWJraXQtYm94LXNoYWRvdzppbnNldCAwIC0xcHggMCByZ2JhKDAsMCwwLDAuMTUpO2JveC1zaGFkb3c6aW5zZXQgMCAtMXB4IDAgcmdiYSgwLDAsMCwwLjE1KTstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym9yZGVyLXJhZGl1czo0cHh9LnNsaWRlci1zZWxlY3Rpb24udGljay1zbGlkZXItc2VsZWN0aW9ue2JhY2tncm91bmQtaW1hZ2U6LXdlYmtpdC1saW5lYXItZ3JhZGllbnQodG9wLCM4OWNkZWYgMCwjODFiZmRlIDEwMCUpO2JhY2tncm91bmQtaW1hZ2U6LW8tbGluZWFyLWdyYWRpZW50KHRvcCwjODljZGVmIDAsIzgxYmZkZSAxMDAlKTtiYWNrZ3JvdW5kLWltYWdlOmxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIzg5Y2RlZiAwLCM4MWJmZGUgMTAwJSk7YmFja2dyb3VuZC1yZXBlYXQ6cmVwZWF0LXg7ZmlsdGVyOnByb2dpZDpEWEltYWdlVHJhbnNmb3JtLk1pY3Jvc29mdC5ncmFkaWVudChzdGFydENvbG9yc3RyPScjZmY4OWNkZWYnLGVuZENvbG9yc3RyPScjZmY4MWJmZGUnLEdyYWRpZW50VHlwZT0wKX0uc2xpZGVyLXRyYWNrLWxvdywuc2xpZGVyLXRyYWNrLWhpZ2h7cG9zaXRpb246YWJzb2x1dGU7YmFja2dyb3VuZDp0cmFuc3BhcmVudDstd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtib3gtc2l6aW5nOmJvcmRlci1ib3g7Ym9yZGVyLXJhZGl1czo0cHh9LnNsaWRlci1oYW5kbGV7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDtiYWNrZ3JvdW5kLWNvbG9yOiMzMzdhYjc7YmFja2dyb3VuZC1pbWFnZTotd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsIzE0OWJkZiAwLCMwNDgwYmUgMTAwJSk7YmFja2dyb3VuZC1pbWFnZTotby1saW5lYXItZ3JhZGllbnQodG9wLCMxNDliZGYgMCwjMDQ4MGJlIDEwMCUpO2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjMTQ5YmRmIDAsIzA0ODBiZSAxMDAlKTtiYWNrZ3JvdW5kLXJlcGVhdDpyZXBlYXQteDtmaWx0ZXI6cHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZjE0OWJkZicsZW5kQ29sb3JzdHI9JyNmZjA0ODBiZScsR3JhZGllbnRUeXBlPTApO2ZpbHRlcjpub25lOy13ZWJraXQtYm94LXNoYWRvdzppbnNldCAwIDFweCAwIHJnYmEoMjU1LDI1NSwyNTUsLjIpLDAgMXB4IDJweCByZ2JhKDAsMCwwLC4wNSk7Ym94LXNoYWRvdzppbnNldCAwIDFweCAwIHJnYmEoMjU1LDI1NSwyNTUsLjIpLDAgMXB4IDJweCByZ2JhKDAsMCwwLC4wNSk7Ym9yZGVyOjAgc29saWQgdHJhbnNwYXJlbnR9LnNsaWRlci1oYW5kbGUucm91bmR7Ym9yZGVyLXJhZGl1czo1MCV9LnNsaWRlci1oYW5kbGUudHJpYW5nbGV7YmFja2dyb3VuZDp0cmFuc3BhcmVudCBub25lfS5zbGlkZXItaGFuZGxlLmN1c3RvbXtiYWNrZ3JvdW5kOnRyYW5zcGFyZW50IG5vbmV9LnNsaWRlci1oYW5kbGUuY3VzdG9tOjpiZWZvcmV7bGluZS1oZWlnaHQ6MjBweDtmb250LXNpemU6MjBweDtjb250ZW50OidcXFxcMjYwNSc7Y29sb3I6IzcyNjIwNH0uc2xpZGVyLXRpY2t7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MjBweDtoZWlnaHQ6MjBweDtiYWNrZ3JvdW5kLWltYWdlOi13ZWJraXQtbGluZWFyLWdyYWRpZW50KHRvcCwjZjlmOWY5IDAsI2Y1ZjVmNSAxMDAlKTtiYWNrZ3JvdW5kLWltYWdlOi1vLWxpbmVhci1ncmFkaWVudCh0b3AsI2Y5ZjlmOSAwLCNmNWY1ZjUgMTAwJSk7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQodG8gYm90dG9tLCNmOWY5ZjkgMCwjZjVmNWY1IDEwMCUpO2JhY2tncm91bmQtcmVwZWF0OnJlcGVhdC14O2ZpbHRlcjpwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoc3RhcnRDb2xvcnN0cj0nI2ZmZjlmOWY5JyxlbmRDb2xvcnN0cj0nI2ZmZjVmNWY1JyxHcmFkaWVudFR5cGU9MCk7LXdlYmtpdC1ib3gtc2hhZG93Omluc2V0IDAgLTFweCAwIHJnYmEoMCwwLDAsMC4xNSk7Ym94LXNoYWRvdzppbnNldCAwIC0xcHggMCByZ2JhKDAsMCwwLDAuMTUpOy13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtmaWx0ZXI6bm9uZTtvcGFjaXR5Oi44O2JvcmRlcjowIHNvbGlkIHRyYW5zcGFyZW50fS5zbGlkZXItdGljay5yb3VuZHtib3JkZXItcmFkaXVzOjUwJX0uc2xpZGVyLXRpY2sudHJpYW5nbGV7YmFja2dyb3VuZDp0cmFuc3BhcmVudCBub25lfS5zbGlkZXItdGljay5jdXN0b217YmFja2dyb3VuZDp0cmFuc3BhcmVudCBub25lfS5zbGlkZXItdGljay5jdXN0b206OmJlZm9yZXtsaW5lLWhlaWdodDoyMHB4O2ZvbnQtc2l6ZToyMHB4O2NvbnRlbnQ6J1xcXFwyNjA1Jztjb2xvcjojNzI2MjA0fS5zbGlkZXItdGljay5pbi1zZWxlY3Rpb257YmFja2dyb3VuZC1pbWFnZTotd2Via2l0LWxpbmVhci1ncmFkaWVudCh0b3AsIzg5Y2RlZiAwLCM4MWJmZGUgMTAwJSk7YmFja2dyb3VuZC1pbWFnZTotby1saW5lYXItZ3JhZGllbnQodG9wLCM4OWNkZWYgMCwjODFiZmRlIDEwMCUpO2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHRvIGJvdHRvbSwjODljZGVmIDAsIzgxYmZkZSAxMDAlKTtiYWNrZ3JvdW5kLXJlcGVhdDpyZXBlYXQteDtmaWx0ZXI6cHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KHN0YXJ0Q29sb3JzdHI9JyNmZjg5Y2RlZicsZW5kQ29sb3JzdHI9JyNmZjgxYmZkZScsR3JhZGllbnRUeXBlPTApO29wYWNpdHk6MX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vbGlicmFyaWVzL2FuZ3VsYXItYm9vdHN0cmFwLXNsaWRlci9ib290c3RyYXAtc2xpZGVyLm1pbi5jc3NcbiAqKiBtb2R1bGUgaWQgPSA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxyXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBsaXN0ID0gW107XHJcblxyXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XHJcblx0XHR2YXIgcmVzdWx0ID0gW107XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHRoaXNbaV07XHJcblx0XHRcdGlmKGl0ZW1bMl0pIHtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcclxuXHR9O1xyXG5cclxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxyXG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxyXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XHJcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcclxuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xyXG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXHJcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXHJcblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXHJcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xyXG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XHJcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHRyZXR1cm4gbGlzdDtcclxufTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbiAqKiBtb2R1bGUgaWQgPSA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxyXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG52YXIgc3R5bGVzSW5Eb20gPSB7fSxcclxuXHRtZW1vaXplID0gZnVuY3Rpb24oZm4pIHtcclxuXHRcdHZhciBtZW1vO1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0aWYgKHR5cGVvZiBtZW1vID09PSBcInVuZGVmaW5lZFwiKSBtZW1vID0gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHRcdFx0cmV0dXJuIG1lbW87XHJcblx0XHR9O1xyXG5cdH0sXHJcblx0aXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gL21zaWUgWzYtOV1cXGIvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSk7XHJcblx0fSksXHJcblx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcclxuXHRcdHJldHVybiBkb2N1bWVudC5oZWFkIHx8IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXTtcclxuXHR9KSxcclxuXHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcclxuXHRzaW5nbGV0b25Db3VudGVyID0gMCxcclxuXHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCA9IFtdO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihsaXN0LCBvcHRpb25zKSB7XHJcblx0aWYodHlwZW9mIERFQlVHICE9PSBcInVuZGVmaW5lZFwiICYmIERFQlVHKSB7XHJcblx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcclxuXHR9XHJcblxyXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG5cdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxyXG5cdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcclxuXHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcclxuXHJcblx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIDxoZWFkPi5cclxuXHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xyXG5cclxuXHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QpO1xyXG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XHJcblxyXG5cdHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xyXG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcclxuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XHJcblx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcclxuXHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xyXG5cdFx0fVxyXG5cdFx0aWYobmV3TGlzdCkge1xyXG5cdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QpO1xyXG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xyXG5cdFx0fVxyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XHJcblx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcclxuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspXHJcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xyXG5cdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcclxuXHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcclxuXHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xyXG5cdFx0aWYoZG9tU3R5bGUpIHtcclxuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xyXG5cdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xyXG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2YXIgcGFydHMgPSBbXTtcclxuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcclxuXHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XHJcblx0dmFyIHN0eWxlcyA9IFtdO1xyXG5cdHZhciBuZXdTdHlsZXMgPSB7fTtcclxuXHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xyXG5cdFx0dmFyIGlkID0gaXRlbVswXTtcclxuXHRcdHZhciBjc3MgPSBpdGVtWzFdO1xyXG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcclxuXHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xyXG5cdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xyXG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pXHJcblx0XHRcdHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XHJcblx0XHRlbHNlXHJcblx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcclxuXHR9XHJcblx0cmV0dXJuIHN0eWxlcztcclxufVxyXG5cclxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xyXG5cdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcclxuXHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcFtzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcclxuXHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xyXG5cdFx0aWYoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XHJcblx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgaGVhZC5maXJzdENoaWxkKTtcclxuXHRcdH0gZWxzZSBpZihsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xyXG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcclxuXHRcdH1cclxuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGVFbGVtZW50KTtcclxuXHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcclxuXHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xyXG5cdHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XHJcblx0dmFyIGlkeCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGVFbGVtZW50KTtcclxuXHRpZihpZHggPj0gMCkge1xyXG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykge1xyXG5cdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XHJcblx0c3R5bGVFbGVtZW50LnR5cGUgPSBcInRleHQvY3NzXCI7XHJcblx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCk7XHJcblx0cmV0dXJuIHN0eWxlRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucykge1xyXG5cdHZhciBsaW5rRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xyXG5cdGxpbmtFbGVtZW50LnJlbCA9IFwic3R5bGVzaGVldFwiO1xyXG5cdGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zLCBsaW5rRWxlbWVudCk7XHJcblx0cmV0dXJuIGxpbmtFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRTdHlsZShvYmosIG9wdGlvbnMpIHtcclxuXHR2YXIgc3R5bGVFbGVtZW50LCB1cGRhdGUsIHJlbW92ZTtcclxuXHJcblx0aWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XHJcblx0XHR2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcclxuXHRcdHN0eWxlRWxlbWVudCA9IHNpbmdsZXRvbkVsZW1lbnQgfHwgKHNpbmdsZXRvbkVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xyXG5cdFx0dXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgZmFsc2UpO1xyXG5cdFx0cmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCwgc3R5bGVJbmRleCwgdHJ1ZSk7XHJcblx0fSBlbHNlIGlmKG9iai5zb3VyY2VNYXAgJiZcclxuXHRcdHR5cGVvZiBVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0dHlwZW9mIFVSTC5jcmVhdGVPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0dHlwZW9mIFVSTC5yZXZva2VPYmplY3RVUkwgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0dHlwZW9mIEJsb2IgPT09IFwiZnVuY3Rpb25cIiAmJlxyXG5cdFx0dHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xyXG5cdFx0c3R5bGVFbGVtZW50ID0gY3JlYXRlTGlua0VsZW1lbnQob3B0aW9ucyk7XHJcblx0XHR1cGRhdGUgPSB1cGRhdGVMaW5rLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcclxuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcclxuXHRcdFx0aWYoc3R5bGVFbGVtZW50LmhyZWYpXHJcblx0XHRcdFx0VVJMLnJldm9rZU9iamVjdFVSTChzdHlsZUVsZW1lbnQuaHJlZik7XHJcblx0XHR9O1xyXG5cdH0gZWxzZSB7XHJcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XHJcblx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcclxuXHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHR1cGRhdGUob2JqKTtcclxuXHJcblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xyXG5cdFx0aWYobmV3T2JqKSB7XHJcblx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5cclxudmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcclxuXHR2YXIgdGV4dFN0b3JlID0gW107XHJcblxyXG5cdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XHJcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XHJcblx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcclxuXHR9O1xyXG59KSgpO1xyXG5cclxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZUVsZW1lbnQsIGluZGV4LCByZW1vdmUsIG9iaikge1xyXG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcclxuXHJcblx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XHJcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XHJcblx0fSBlbHNlIHtcclxuXHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcclxuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XHJcblx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XHJcblx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcclxuXHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlRWxlbWVudCwgb2JqKSB7XHJcblx0dmFyIGNzcyA9IG9iai5jc3M7XHJcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xyXG5cclxuXHRpZihtZWRpYSkge1xyXG5cdFx0c3R5bGVFbGVtZW50LnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIG1lZGlhKVxyXG5cdH1cclxuXHJcblx0aWYoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcclxuXHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XHJcblx0fSBlbHNlIHtcclxuXHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XHJcblx0XHRcdHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XHJcblx0XHR9XHJcblx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVMaW5rKGxpbmtFbGVtZW50LCBvYmopIHtcclxuXHR2YXIgY3NzID0gb2JqLmNzcztcclxuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcclxuXHJcblx0aWYoc291cmNlTWFwKSB7XHJcblx0XHQvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjYwMzg3NVxyXG5cdFx0Y3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIiArIGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSkgKyBcIiAqL1wiO1xyXG5cdH1cclxuXHJcblx0dmFyIGJsb2IgPSBuZXcgQmxvYihbY3NzXSwgeyB0eXBlOiBcInRleHQvY3NzXCIgfSk7XHJcblxyXG5cdHZhciBvbGRTcmMgPSBsaW5rRWxlbWVudC5ocmVmO1xyXG5cclxuXHRsaW5rRWxlbWVudC5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcclxuXHJcblx0aWYob2xkU3JjKVxyXG5cdFx0VVJMLnJldm9rZU9iamVjdFVSTChvbGRTcmMpO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAgICAgICAgICAgICAgICAgIFZFUlNJT04gIDUuMS4xXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4vKiEgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIGJvb3RzdHJhcC1zbGlkZXIuanNcclxuICpcclxuICogTWFpbnRhaW5lcnM6XHJcbiAqXHRcdEt5bGUgS2VtcFxyXG4gKlx0XHRcdC0gVHdpdHRlcjogQHNlaXlyaWFcclxuICpcdFx0XHQtIEdpdGh1YjogIHNlaXlyaWFcclxuICpcdFx0Um9oaXQgS2Fsa3VyXHJcbiAqXHRcdFx0LSBUd2l0dGVyOiBAUm92b2x1dGlvbmFyeVxyXG4gKlx0XHRcdC0gR2l0aHViOiAgcm92b2x1dGlvblxyXG4gKlxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbiFmdW5jdGlvbihhLGIpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW1wianF1ZXJ5XCJdLGIpO2Vsc2UgaWYoXCJvYmplY3RcIj09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHMpe3ZhciBjO3RyeXtjPXJlcXVpcmUoXCJqcXVlcnlcIil9Y2F0Y2goZCl7Yz1udWxsfW1vZHVsZS5leHBvcnRzPWIoYyl9ZWxzZSBhLlNsaWRlcj1iKGEualF1ZXJ5KX0odGhpcyxmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gZnVuY3Rpb24oYSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYigpe31mdW5jdGlvbiBjKGEpe2Z1bmN0aW9uIGMoYil7Yi5wcm90b3R5cGUub3B0aW9ufHwoYi5wcm90b3R5cGUub3B0aW9uPWZ1bmN0aW9uKGIpe2EuaXNQbGFpbk9iamVjdChiKSYmKHRoaXMub3B0aW9ucz1hLmV4dGVuZCghMCx0aGlzLm9wdGlvbnMsYikpfSl9ZnVuY3Rpb24gZShiLGMpe2EuZm5bYl09ZnVuY3Rpb24oZSl7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGUpe2Zvcih2YXIgZz1kLmNhbGwoYXJndW1lbnRzLDEpLGg9MCxpPXRoaXMubGVuZ3RoO2k+aDtoKyspe3ZhciBqPXRoaXNbaF0saz1hLmRhdGEoaixiKTtpZihrKWlmKGEuaXNGdW5jdGlvbihrW2VdKSYmXCJfXCIhPT1lLmNoYXJBdCgwKSl7dmFyIGw9a1tlXS5hcHBseShrLGcpO2lmKHZvaWQgMCE9PWwmJmwhPT1rKXJldHVybiBsfWVsc2UgZihcIm5vIHN1Y2ggbWV0aG9kICdcIitlK1wiJyBmb3IgXCIrYitcIiBpbnN0YW5jZVwiKTtlbHNlIGYoXCJjYW5ub3QgY2FsbCBtZXRob2RzIG9uIFwiK2IrXCIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IGF0dGVtcHRlZCB0byBjYWxsICdcIitlK1wiJ1wiKX1yZXR1cm4gdGhpc312YXIgbT10aGlzLm1hcChmdW5jdGlvbigpe3ZhciBkPWEuZGF0YSh0aGlzLGIpO3JldHVybiBkPyhkLm9wdGlvbihlKSxkLl9pbml0KCkpOihkPW5ldyBjKHRoaXMsZSksYS5kYXRhKHRoaXMsYixkKSksYSh0aGlzKX0pO3JldHVybiFtfHxtLmxlbmd0aD4xP206bVswXX19aWYoYSl7dmFyIGY9XCJ1bmRlZmluZWRcIj09dHlwZW9mIGNvbnNvbGU/YjpmdW5jdGlvbihhKXtjb25zb2xlLmVycm9yKGEpfTtyZXR1cm4gYS5icmlkZ2V0PWZ1bmN0aW9uKGEsYil7YyhiKSxlKGEsYil9LGEuYnJpZGdldH19dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlO2MoYSl9KGEpLGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGMoYixjKXtmdW5jdGlvbiBkKGEsYil7dmFyIGM9XCJkYXRhLXNsaWRlci1cIitiLnJlcGxhY2UoL18vZyxcIi1cIiksZD1hLmdldEF0dHJpYnV0ZShjKTt0cnl7cmV0dXJuIEpTT04ucGFyc2UoZCl9Y2F0Y2goZSl7cmV0dXJuIGR9fXRoaXMuX3N0YXRlPXt2YWx1ZTpudWxsLGVuYWJsZWQ6bnVsbCxvZmZzZXQ6bnVsbCxzaXplOm51bGwscGVyY2VudGFnZTpudWxsLGluRHJhZzohMSxvdmVyOiExfSxcInN0cmluZ1wiPT10eXBlb2YgYj90aGlzLmVsZW1lbnQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihiKTpiIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJih0aGlzLmVsZW1lbnQ9YiksYz1jP2M6e307Zm9yKHZhciBmPU9iamVjdC5rZXlzKHRoaXMuZGVmYXVsdE9wdGlvbnMpLGc9MDtnPGYubGVuZ3RoO2crKyl7dmFyIGg9ZltnXSxpPWNbaF07aT1cInVuZGVmaW5lZFwiIT10eXBlb2YgaT9pOmQodGhpcy5lbGVtZW50LGgpLGk9bnVsbCE9PWk/aTp0aGlzLmRlZmF1bHRPcHRpb25zW2hdLHRoaXMub3B0aW9uc3x8KHRoaXMub3B0aW9ucz17fSksdGhpcy5vcHRpb25zW2hdPWl9XCJ2ZXJ0aWNhbFwiIT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9ufHxcInRvcFwiIT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb24mJlwiYm90dG9tXCIhPT10aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbj9cImhvcml6b250YWxcIiE9PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbnx8XCJsZWZ0XCIhPT10aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbiYmXCJyaWdodFwiIT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb258fCh0aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbj1cInRvcFwiKTp0aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbj1cInJpZ2h0XCI7dmFyIGosayxsLG0sbixvPXRoaXMuZWxlbWVudC5zdHlsZS53aWR0aCxwPSExLHE9dGhpcy5lbGVtZW50LnBhcmVudE5vZGU7aWYodGhpcy5zbGlkZXJFbGVtKXA9ITA7ZWxzZXt0aGlzLnNsaWRlckVsZW09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLnNsaWRlckVsZW0uY2xhc3NOYW1lPVwic2xpZGVyXCI7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihyLmNsYXNzTmFtZT1cInNsaWRlci10cmFja1wiLGs9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSxrLmNsYXNzTmFtZT1cInNsaWRlci10cmFjay1sb3dcIixqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksai5jbGFzc05hbWU9XCJzbGlkZXItc2VsZWN0aW9uXCIsbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGwuY2xhc3NOYW1lPVwic2xpZGVyLXRyYWNrLWhpZ2hcIixtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbS5jbGFzc05hbWU9XCJzbGlkZXItaGFuZGxlIG1pbi1zbGlkZXItaGFuZGxlXCIsbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG4uY2xhc3NOYW1lPVwic2xpZGVyLWhhbmRsZSBtYXgtc2xpZGVyLWhhbmRsZVwiLHIuYXBwZW5kQ2hpbGQoayksci5hcHBlbmRDaGlsZChqKSxyLmFwcGVuZENoaWxkKGwpLHRoaXMudGlja3M9W10sQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMudGlja3MpJiZ0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoPjApe2ZvcihnPTA7Zzx0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoO2crKyl7dmFyIHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtzLmNsYXNzTmFtZT1cInNsaWRlci10aWNrXCIsdGhpcy50aWNrcy5wdXNoKHMpLHIuYXBwZW5kQ2hpbGQocyl9ai5jbGFzc05hbWUrPVwiIHRpY2stc2xpZGVyLXNlbGVjdGlvblwifWlmKHIuYXBwZW5kQ2hpbGQobSksci5hcHBlbmRDaGlsZChuKSx0aGlzLnRpY2tMYWJlbHM9W10sQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMudGlja3NfbGFiZWxzKSYmdGhpcy5vcHRpb25zLnRpY2tzX2xhYmVscy5sZW5ndGg+MClmb3IodGhpcy50aWNrTGFiZWxDb250YWluZXI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0aGlzLnRpY2tMYWJlbENvbnRhaW5lci5jbGFzc05hbWU9XCJzbGlkZXItdGljay1sYWJlbC1jb250YWluZXJcIixnPTA7Zzx0aGlzLm9wdGlvbnMudGlja3NfbGFiZWxzLmxlbmd0aDtnKyspe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc05hbWU9XCJzbGlkZXItdGljay1sYWJlbFwiLHQuaW5uZXJIVE1MPXRoaXMub3B0aW9ucy50aWNrc19sYWJlbHNbZ10sdGhpcy50aWNrTGFiZWxzLnB1c2godCksdGhpcy50aWNrTGFiZWxDb250YWluZXIuYXBwZW5kQ2hpbGQodCl9dmFyIHU9ZnVuY3Rpb24oYSl7dmFyIGI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtiLmNsYXNzTmFtZT1cInRvb2x0aXAtYXJyb3dcIjt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuY2xhc3NOYW1lPVwidG9vbHRpcC1pbm5lclwiLGEuYXBwZW5kQ2hpbGQoYiksYS5hcHBlbmRDaGlsZChjKX0sdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3YuY2xhc3NOYW1lPVwidG9vbHRpcCB0b29sdGlwLW1haW5cIix1KHYpO3ZhciB3PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dy5jbGFzc05hbWU9XCJ0b29sdGlwIHRvb2x0aXAtbWluXCIsdSh3KTt2YXIgeD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3guY2xhc3NOYW1lPVwidG9vbHRpcCB0b29sdGlwLW1heFwiLHUoeCksdGhpcy5zbGlkZXJFbGVtLmFwcGVuZENoaWxkKHIpLHRoaXMuc2xpZGVyRWxlbS5hcHBlbmRDaGlsZCh2KSx0aGlzLnNsaWRlckVsZW0uYXBwZW5kQ2hpbGQodyksdGhpcy5zbGlkZXJFbGVtLmFwcGVuZENoaWxkKHgpLHRoaXMudGlja0xhYmVsQ29udGFpbmVyJiZ0aGlzLnNsaWRlckVsZW0uYXBwZW5kQ2hpbGQodGhpcy50aWNrTGFiZWxDb250YWluZXIpLHEuaW5zZXJ0QmVmb3JlKHRoaXMuc2xpZGVyRWxlbSx0aGlzLmVsZW1lbnQpLHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifWlmKGEmJih0aGlzLiRlbGVtZW50PWEodGhpcy5lbGVtZW50KSx0aGlzLiRzbGlkZXJFbGVtPWEodGhpcy5zbGlkZXJFbGVtKSksdGhpcy5ldmVudFRvQ2FsbGJhY2tNYXA9e30sdGhpcy5zbGlkZXJFbGVtLmlkPXRoaXMub3B0aW9ucy5pZCx0aGlzLnRvdWNoQ2FwYWJsZT1cIm9udG91Y2hzdGFydFwiaW4gd2luZG93fHx3aW5kb3cuRG9jdW1lbnRUb3VjaCYmZG9jdW1lbnQgaW5zdGFuY2VvZiB3aW5kb3cuRG9jdW1lbnRUb3VjaCx0aGlzLnRvb2x0aXA9dGhpcy5zbGlkZXJFbGVtLnF1ZXJ5U2VsZWN0b3IoXCIudG9vbHRpcC1tYWluXCIpLHRoaXMudG9vbHRpcElubmVyPXRoaXMudG9vbHRpcC5xdWVyeVNlbGVjdG9yKFwiLnRvb2x0aXAtaW5uZXJcIiksdGhpcy50b29sdGlwX21pbj10aGlzLnNsaWRlckVsZW0ucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLW1pblwiKSx0aGlzLnRvb2x0aXBJbm5lcl9taW49dGhpcy50b29sdGlwX21pbi5xdWVyeVNlbGVjdG9yKFwiLnRvb2x0aXAtaW5uZXJcIiksdGhpcy50b29sdGlwX21heD10aGlzLnNsaWRlckVsZW0ucXVlcnlTZWxlY3RvcihcIi50b29sdGlwLW1heFwiKSx0aGlzLnRvb2x0aXBJbm5lcl9tYXg9dGhpcy50b29sdGlwX21heC5xdWVyeVNlbGVjdG9yKFwiLnRvb2x0aXAtaW5uZXJcIiksZVt0aGlzLm9wdGlvbnMuc2NhbGVdJiYodGhpcy5vcHRpb25zLnNjYWxlPWVbdGhpcy5vcHRpb25zLnNjYWxlXSkscD09PSEwJiYodGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLWhvcml6b250YWxcIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLXZlcnRpY2FsXCIpLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcCxcImhpZGVcIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21pbixcImhpZGVcIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21heCxcImhpZGVcIiksW1wibGVmdFwiLFwidG9wXCIsXCJ3aWR0aFwiLFwiaGVpZ2h0XCJdLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5fcmVtb3ZlUHJvcGVydHkodGhpcy50cmFja0xvdyxhKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eSh0aGlzLnRyYWNrU2VsZWN0aW9uLGEpLHRoaXMuX3JlbW92ZVByb3BlcnR5KHRoaXMudHJhY2tIaWdoLGEpfSx0aGlzKSxbdGhpcy5oYW5kbGUxLHRoaXMuaGFuZGxlMl0uZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwibGVmdFwiKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwidG9wXCIpfSx0aGlzKSxbdGhpcy50b29sdGlwLHRoaXMudG9vbHRpcF9taW4sdGhpcy50b29sdGlwX21heF0uZm9yRWFjaChmdW5jdGlvbihhKXt0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwibGVmdFwiKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwidG9wXCIpLHRoaXMuX3JlbW92ZVByb3BlcnR5KGEsXCJtYXJnaW4tbGVmdFwiKSx0aGlzLl9yZW1vdmVQcm9wZXJ0eShhLFwibWFyZ2luLXRvcFwiKSx0aGlzLl9yZW1vdmVDbGFzcyhhLFwicmlnaHRcIiksdGhpcy5fcmVtb3ZlQ2xhc3MoYSxcInRvcFwiKX0sdGhpcykpLFwidmVydGljYWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj8odGhpcy5fYWRkQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLXZlcnRpY2FsXCIpLHRoaXMuc3R5bGVQb3M9XCJ0b3BcIix0aGlzLm1vdXNlUG9zPVwicGFnZVlcIix0aGlzLnNpemVQb3M9XCJvZmZzZXRIZWlnaHRcIik6KHRoaXMuX2FkZENsYXNzKHRoaXMuc2xpZGVyRWxlbSxcInNsaWRlci1ob3Jpem9udGFsXCIpLHRoaXMuc2xpZGVyRWxlbS5zdHlsZS53aWR0aD1vLHRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj1cImhvcml6b250YWxcIix0aGlzLnN0eWxlUG9zPVwibGVmdFwiLHRoaXMubW91c2VQb3M9XCJwYWdlWFwiLHRoaXMuc2l6ZVBvcz1cIm9mZnNldFdpZHRoXCIpLHRoaXMuX3NldFRvb2x0aXBQb3NpdGlvbigpLEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnRpY2tzKSYmdGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aD4wJiYodGhpcy5vcHRpb25zLm1heD1NYXRoLm1heC5hcHBseShNYXRoLHRoaXMub3B0aW9ucy50aWNrcyksdGhpcy5vcHRpb25zLm1pbj1NYXRoLm1pbi5hcHBseShNYXRoLHRoaXMub3B0aW9ucy50aWNrcykpLEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLnZhbHVlKT8odGhpcy5vcHRpb25zLnJhbmdlPSEwLHRoaXMuX3N0YXRlLnZhbHVlPXRoaXMub3B0aW9ucy52YWx1ZSk6dGhpcy5fc3RhdGUudmFsdWU9dGhpcy5vcHRpb25zLnJhbmdlP1t0aGlzLm9wdGlvbnMudmFsdWUsdGhpcy5vcHRpb25zLm1heF06dGhpcy5vcHRpb25zLnZhbHVlLHRoaXMudHJhY2tMb3c9a3x8dGhpcy50cmFja0xvdyx0aGlzLnRyYWNrU2VsZWN0aW9uPWp8fHRoaXMudHJhY2tTZWxlY3Rpb24sdGhpcy50cmFja0hpZ2g9bHx8dGhpcy50cmFja0hpZ2gsXCJub25lXCI9PT10aGlzLm9wdGlvbnMuc2VsZWN0aW9uJiYodGhpcy5fYWRkQ2xhc3ModGhpcy50cmFja0xvdyxcImhpZGVcIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50cmFja1NlbGVjdGlvbixcImhpZGVcIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50cmFja0hpZ2gsXCJoaWRlXCIpKSx0aGlzLmhhbmRsZTE9bXx8dGhpcy5oYW5kbGUxLHRoaXMuaGFuZGxlMj1ufHx0aGlzLmhhbmRsZTIscD09PSEwKWZvcih0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhhbmRsZTEsXCJyb3VuZCB0cmlhbmdsZVwiKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLmhhbmRsZTIsXCJyb3VuZCB0cmlhbmdsZSBoaWRlXCIpLGc9MDtnPHRoaXMudGlja3MubGVuZ3RoO2crKyl0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRpY2tzW2ddLFwicm91bmQgdHJpYW5nbGUgaGlkZVwiKTt2YXIgeT1bXCJyb3VuZFwiLFwidHJpYW5nbGVcIixcImN1c3RvbVwiXSx6PS0xIT09eS5pbmRleE9mKHRoaXMub3B0aW9ucy5oYW5kbGUpO2lmKHopZm9yKHRoaXMuX2FkZENsYXNzKHRoaXMuaGFuZGxlMSx0aGlzLm9wdGlvbnMuaGFuZGxlKSx0aGlzLl9hZGRDbGFzcyh0aGlzLmhhbmRsZTIsdGhpcy5vcHRpb25zLmhhbmRsZSksZz0wO2c8dGhpcy50aWNrcy5sZW5ndGg7ZysrKXRoaXMuX2FkZENsYXNzKHRoaXMudGlja3NbZ10sdGhpcy5vcHRpb25zLmhhbmRsZSk7dGhpcy5fc3RhdGUub2Zmc2V0PXRoaXMuX29mZnNldCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuX3N0YXRlLnNpemU9dGhpcy5zbGlkZXJFbGVtW3RoaXMuc2l6ZVBvc10sdGhpcy5zZXRWYWx1ZSh0aGlzLl9zdGF0ZS52YWx1ZSksdGhpcy5oYW5kbGUxS2V5ZG93bj10aGlzLl9rZXlkb3duLmJpbmQodGhpcywwKSx0aGlzLmhhbmRsZTEuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLmhhbmRsZTFLZXlkb3duLCExKSx0aGlzLmhhbmRsZTJLZXlkb3duPXRoaXMuX2tleWRvd24uYmluZCh0aGlzLDEpLHRoaXMuaGFuZGxlMi5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuaGFuZGxlMktleWRvd24sITEpLHRoaXMubW91c2Vkb3duPXRoaXMuX21vdXNlZG93bi5iaW5kKHRoaXMpLHRoaXMudG91Y2hDYXBhYmxlJiZ0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIix0aGlzLm1vdXNlZG93biwhMSksdGhpcy5zbGlkZXJFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIix0aGlzLm1vdXNlZG93biwhMSksXCJoaWRlXCI9PT10aGlzLm9wdGlvbnMudG9vbHRpcD8odGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwLFwiaGlkZVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWluLFwiaGlkZVwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiaGlkZVwiKSk6XCJhbHdheXNcIj09PXRoaXMub3B0aW9ucy50b29sdGlwPyh0aGlzLl9zaG93VG9vbHRpcCgpLHRoaXMuX2Fsd2F5c1Nob3dUb29sdGlwPSEwKToodGhpcy5zaG93VG9vbHRpcD10aGlzLl9zaG93VG9vbHRpcC5iaW5kKHRoaXMpLHRoaXMuaGlkZVRvb2x0aXA9dGhpcy5faGlkZVRvb2x0aXAuYmluZCh0aGlzKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZW50ZXJcIix0aGlzLnNob3dUb29sdGlwLCExKSx0aGlzLnNsaWRlckVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIix0aGlzLmhpZGVUb29sdGlwLCExKSx0aGlzLmhhbmRsZTEuYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5zaG93VG9vbHRpcCwhMSksdGhpcy5oYW5kbGUxLmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSksdGhpcy5oYW5kbGUyLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLHRoaXMuc2hvd1Rvb2x0aXAsITEpLHRoaXMuaGFuZGxlMi5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLHRoaXMuaGlkZVRvb2x0aXAsITEpKSx0aGlzLm9wdGlvbnMuZW5hYmxlZD90aGlzLmVuYWJsZSgpOnRoaXMuZGlzYWJsZSgpfXZhciBkPXtmb3JtYXRJbnZhbGlkSW5wdXRFcnJvck1zZzpmdW5jdGlvbihhKXtyZXR1cm5cIkludmFsaWQgaW5wdXQgdmFsdWUgJ1wiK2ErXCInIHBhc3NlZCBpblwifSxjYWxsaW5nQ29udGV4dE5vdFNsaWRlckluc3RhbmNlOlwiQ2FsbGluZyBjb250ZXh0IGVsZW1lbnQgZG9lcyBub3QgaGF2ZSBpbnN0YW5jZSBvZiBTbGlkZXIgYm91bmQgdG8gaXQuIENoZWNrIHlvdXIgY29kZSB0byBtYWtlIHN1cmUgdGhlIEpRdWVyeSBvYmplY3QgcmV0dXJuZWQgZnJvbSB0aGUgY2FsbCB0byB0aGUgc2xpZGVyKCkgaW5pdGlhbGl6ZXIgaXMgY2FsbGluZyB0aGUgbWV0aG9kXCJ9LGU9e2xpbmVhcjp7dG9WYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj1hLzEwMCoodGhpcy5vcHRpb25zLm1heC10aGlzLm9wdGlvbnMubWluKTtpZih0aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zLmxlbmd0aD4wKXtmb3IodmFyIGMsZCxlLGY9MCxnPTA7Zzx0aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zLmxlbmd0aDtnKyspaWYoYTw9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1tnXSl7Yz1nPjA/dGhpcy5vcHRpb25zLnRpY2tzW2ctMV06MCxlPWc+MD90aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zW2ctMV06MCxkPXRoaXMub3B0aW9ucy50aWNrc1tnXSxmPXRoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnNbZ107YnJlYWt9aWYoZz4wKXt2YXIgaD0oYS1lKS8oZi1lKTtiPWMraCooZC1jKX19dmFyIGk9dGhpcy5vcHRpb25zLm1pbitNYXRoLnJvdW5kKGIvdGhpcy5vcHRpb25zLnN0ZXApKnRoaXMub3B0aW9ucy5zdGVwO3JldHVybiBpPHRoaXMub3B0aW9ucy5taW4/dGhpcy5vcHRpb25zLm1pbjppPnRoaXMub3B0aW9ucy5tYXg/dGhpcy5vcHRpb25zLm1heDppfSx0b1BlcmNlbnRhZ2U6ZnVuY3Rpb24oYSl7aWYodGhpcy5vcHRpb25zLm1heD09PXRoaXMub3B0aW9ucy5taW4pcmV0dXJuIDA7aWYodGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9ucy5sZW5ndGg+MCl7Zm9yKHZhciBiLGMsZCxlPTAsZj0wO2Y8dGhpcy5vcHRpb25zLnRpY2tzLmxlbmd0aDtmKyspaWYoYTw9dGhpcy5vcHRpb25zLnRpY2tzW2ZdKXtiPWY+MD90aGlzLm9wdGlvbnMudGlja3NbZi0xXTowLGQ9Zj4wP3RoaXMub3B0aW9ucy50aWNrc19wb3NpdGlvbnNbZi0xXTowLGM9dGhpcy5vcHRpb25zLnRpY2tzW2ZdLGU9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1tmXTticmVha31pZihmPjApe3ZhciBnPShhLWIpLyhjLWIpO3JldHVybiBkK2cqKGUtZCl9fXJldHVybiAxMDAqKGEtdGhpcy5vcHRpb25zLm1pbikvKHRoaXMub3B0aW9ucy5tYXgtdGhpcy5vcHRpb25zLm1pbil9fSxsb2dhcml0aG1pYzp7dG9WYWx1ZTpmdW5jdGlvbihhKXt2YXIgYj0wPT09dGhpcy5vcHRpb25zLm1pbj8wOk1hdGgubG9nKHRoaXMub3B0aW9ucy5taW4pLGM9TWF0aC5sb2codGhpcy5vcHRpb25zLm1heCksZD1NYXRoLmV4cChiKyhjLWIpKmEvMTAwKTtyZXR1cm4gZD10aGlzLm9wdGlvbnMubWluK01hdGgucm91bmQoKGQtdGhpcy5vcHRpb25zLm1pbikvdGhpcy5vcHRpb25zLnN0ZXApKnRoaXMub3B0aW9ucy5zdGVwLGQ8dGhpcy5vcHRpb25zLm1pbj90aGlzLm9wdGlvbnMubWluOmQ+dGhpcy5vcHRpb25zLm1heD90aGlzLm9wdGlvbnMubWF4OmR9LHRvUGVyY2VudGFnZTpmdW5jdGlvbihhKXtpZih0aGlzLm9wdGlvbnMubWF4PT09dGhpcy5vcHRpb25zLm1pbilyZXR1cm4gMDt2YXIgYj1NYXRoLmxvZyh0aGlzLm9wdGlvbnMubWF4KSxjPTA9PT10aGlzLm9wdGlvbnMubWluPzA6TWF0aC5sb2codGhpcy5vcHRpb25zLm1pbiksZD0wPT09YT8wOk1hdGgubG9nKGEpO3JldHVybiAxMDAqKGQtYykvKGItYyl9fX07aWYoYj1mdW5jdGlvbihhLGIpe3JldHVybiBjLmNhbGwodGhpcyxhLGIpLHRoaXN9LGIucHJvdG90eXBlPXtfaW5pdDpmdW5jdGlvbigpe30sY29uc3RydWN0b3I6YixkZWZhdWx0T3B0aW9uczp7aWQ6XCJcIixtaW46MCxtYXg6MTAsc3RlcDoxLHByZWNpc2lvbjowLG9yaWVudGF0aW9uOlwiaG9yaXpvbnRhbFwiLHZhbHVlOjUscmFuZ2U6ITEsc2VsZWN0aW9uOlwiYmVmb3JlXCIsdG9vbHRpcDpcInNob3dcIix0b29sdGlwX3NwbGl0OiExLGhhbmRsZTpcInJvdW5kXCIscmV2ZXJzZWQ6ITEsZW5hYmxlZDohMCxmb3JtYXR0ZXI6ZnVuY3Rpb24oYSl7cmV0dXJuIEFycmF5LmlzQXJyYXkoYSk/YVswXStcIiA6IFwiK2FbMV06YX0sbmF0dXJhbF9hcnJvd19rZXlzOiExLHRpY2tzOltdLHRpY2tzX3Bvc2l0aW9uczpbXSx0aWNrc19sYWJlbHM6W10sdGlja3Nfc25hcF9ib3VuZHM6MCxzY2FsZTpcImxpbmVhclwiLGZvY3VzOiExLHRvb2x0aXBfcG9zaXRpb246bnVsbH0sZ2V0RWxlbWVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnNsaWRlckVsZW19LGdldFZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5yYW5nZT90aGlzLl9zdGF0ZS52YWx1ZTp0aGlzLl9zdGF0ZS52YWx1ZVswXX0sc2V0VmFsdWU6ZnVuY3Rpb24oYSxiLGMpe2F8fChhPTApO3ZhciBkPXRoaXMuZ2V0VmFsdWUoKTt0aGlzLl9zdGF0ZS52YWx1ZT10aGlzLl92YWxpZGF0ZUlucHV0VmFsdWUoYSk7dmFyIGU9dGhpcy5fYXBwbHlQcmVjaXNpb24uYmluZCh0aGlzKTt0aGlzLm9wdGlvbnMucmFuZ2U/KHRoaXMuX3N0YXRlLnZhbHVlWzBdPWUodGhpcy5fc3RhdGUudmFsdWVbMF0pLHRoaXMuX3N0YXRlLnZhbHVlWzFdPWUodGhpcy5fc3RhdGUudmFsdWVbMV0pLHRoaXMuX3N0YXRlLnZhbHVlWzBdPU1hdGgubWF4KHRoaXMub3B0aW9ucy5taW4sTWF0aC5taW4odGhpcy5vcHRpb25zLm1heCx0aGlzLl9zdGF0ZS52YWx1ZVswXSkpLHRoaXMuX3N0YXRlLnZhbHVlWzFdPU1hdGgubWF4KHRoaXMub3B0aW9ucy5taW4sTWF0aC5taW4odGhpcy5vcHRpb25zLm1heCx0aGlzLl9zdGF0ZS52YWx1ZVsxXSkpKToodGhpcy5fc3RhdGUudmFsdWU9ZSh0aGlzLl9zdGF0ZS52YWx1ZSksdGhpcy5fc3RhdGUudmFsdWU9W01hdGgubWF4KHRoaXMub3B0aW9ucy5taW4sTWF0aC5taW4odGhpcy5vcHRpb25zLm1heCx0aGlzLl9zdGF0ZS52YWx1ZSkpXSx0aGlzLl9hZGRDbGFzcyh0aGlzLmhhbmRsZTIsXCJoaWRlXCIpLHRoaXMuX3N0YXRlLnZhbHVlWzFdPVwiYWZ0ZXJcIj09PXRoaXMub3B0aW9ucy5zZWxlY3Rpb24/dGhpcy5vcHRpb25zLm1heDp0aGlzLm9wdGlvbnMubWluKSx0aGlzLl9zdGF0ZS5wZXJjZW50YWdlPXRoaXMub3B0aW9ucy5tYXg+dGhpcy5vcHRpb25zLm1pbj9bdGhpcy5fdG9QZXJjZW50YWdlKHRoaXMuX3N0YXRlLnZhbHVlWzBdKSx0aGlzLl90b1BlcmNlbnRhZ2UodGhpcy5fc3RhdGUudmFsdWVbMV0pLDEwMCp0aGlzLm9wdGlvbnMuc3RlcC8odGhpcy5vcHRpb25zLm1heC10aGlzLm9wdGlvbnMubWluKV06WzAsMCwxMDBdLHRoaXMuX2xheW91dCgpO3ZhciBmPXRoaXMub3B0aW9ucy5yYW5nZT90aGlzLl9zdGF0ZS52YWx1ZTp0aGlzLl9zdGF0ZS52YWx1ZVswXTtyZXR1cm4gYj09PSEwJiZ0aGlzLl90cmlnZ2VyKFwic2xpZGVcIixmKSxkIT09ZiYmYz09PSEwJiZ0aGlzLl90cmlnZ2VyKFwiY2hhbmdlXCIse29sZFZhbHVlOmQsbmV3VmFsdWU6Zn0pLHRoaXMuX3NldERhdGFWYWwoZiksdGhpc30sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuX3JlbW92ZVNsaWRlckV2ZW50SGFuZGxlcnMoKSx0aGlzLnNsaWRlckVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5fY2xlYW5VcEV2ZW50Q2FsbGJhY2tzTWFwKCksdGhpcy5lbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRhdGFcIiksYSYmKHRoaXMuX3VuYmluZEpRdWVyeUV2ZW50SGFuZGxlcnMoKSx0aGlzLiRlbGVtZW50LnJlbW92ZURhdGEoXCJzbGlkZXJcIikpfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ9ITEsdGhpcy5oYW5kbGUxLnJlbW92ZUF0dHJpYnV0ZShcInRhYmluZGV4XCIpLHRoaXMuaGFuZGxlMi5yZW1vdmVBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnNsaWRlckVsZW0sXCJzbGlkZXItZGlzYWJsZWRcIiksdGhpcy5fdHJpZ2dlcihcInNsaWRlRGlzYWJsZWRcIiksdGhpc30sZW5hYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ9ITAsdGhpcy5oYW5kbGUxLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksdGhpcy5oYW5kbGUyLnNldEF0dHJpYnV0ZShcInRhYmluZGV4XCIsMCksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy5zbGlkZXJFbGVtLFwic2xpZGVyLWRpc2FibGVkXCIpLHRoaXMuX3RyaWdnZXIoXCJzbGlkZUVuYWJsZWRcIiksdGhpc30sdG9nZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlLmVuYWJsZWQ/dGhpcy5kaXNhYmxlKCk6dGhpcy5lbmFibGUoKSx0aGlzfSxpc0VuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RhdGUuZW5hYmxlZH0sb246ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5fYmluZE5vblF1ZXJ5RXZlbnRIYW5kbGVyKGEsYiksdGhpc30sb2ZmOmZ1bmN0aW9uKGIsYyl7YT8odGhpcy4kZWxlbWVudC5vZmYoYixjKSx0aGlzLiRzbGlkZXJFbGVtLm9mZihiLGMpKTp0aGlzLl91bmJpbmROb25RdWVyeUV2ZW50SGFuZGxlcihiLGMpfSxnZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oYSl7cmV0dXJuIGE/dGhpcy5vcHRpb25zW2FdOnRoaXMub3B0aW9uc30sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMub3B0aW9uc1thXT1iLHRoaXN9LHJlZnJlc2g6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcmVtb3ZlU2xpZGVyRXZlbnRIYW5kbGVycygpLGMuY2FsbCh0aGlzLHRoaXMuZWxlbWVudCx0aGlzLm9wdGlvbnMpLGEmJmEuZGF0YSh0aGlzLmVsZW1lbnQsXCJzbGlkZXJcIix0aGlzKSx0aGlzfSxyZWxheW91dDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sYXlvdXQoKSx0aGlzfSxfcmVtb3ZlU2xpZGVyRXZlbnRIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMuaGFuZGxlMS5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLHRoaXMuaGFuZGxlMUtleWRvd24sITEpLHRoaXMuaGFuZGxlMS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZm9jdXNcIix0aGlzLnNob3dUb29sdGlwLCExKSx0aGlzLmhhbmRsZTEucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImJsdXJcIix0aGlzLmhpZGVUb29sdGlwLCExKSx0aGlzLmhhbmRsZTIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIix0aGlzLmhhbmRsZTJLZXlkb3duLCExKSx0aGlzLmhhbmRsZTIucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsdGhpcy5oYW5kbGUyS2V5ZG93biwhMSksdGhpcy5oYW5kbGUyLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsdGhpcy5oYW5kbGUyS2V5ZG93biwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWVudGVyXCIsdGhpcy5zaG93VG9vbHRpcCwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWxlYXZlXCIsdGhpcy5oaWRlVG9vbHRpcCwhMSksdGhpcy5zbGlkZXJFbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5tb3VzZWRvd24sITEpLHRoaXMuc2xpZGVyRWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsdGhpcy5tb3VzZWRvd24sITEpfSxfYmluZE5vblF1ZXJ5RXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dm9pZCAwPT09dGhpcy5ldmVudFRvQ2FsbGJhY2tNYXBbYV0mJih0aGlzLmV2ZW50VG9DYWxsYmFja01hcFthXT1bXSksdGhpcy5ldmVudFRvQ2FsbGJhY2tNYXBbYV0ucHVzaChiKX0sX3VuYmluZE5vblF1ZXJ5RXZlbnRIYW5kbGVyOmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5ldmVudFRvQ2FsbGJhY2tNYXBbYV07aWYodm9pZCAwIT09Yylmb3IodmFyIGQ9MDtkPGMubGVuZ3RoO2QrKylpZihjW2RdPT09Yil7Yy5zcGxpY2UoZCwxKTticmVha319LF9jbGVhblVwRXZlbnRDYWxsYmFja3NNYXA6ZnVuY3Rpb24oKXtmb3IodmFyIGE9T2JqZWN0LmtleXModGhpcy5ldmVudFRvQ2FsbGJhY2tNYXApLGI9MDtiPGEubGVuZ3RoO2IrKyl7dmFyIGM9YVtiXTt0aGlzLmV2ZW50VG9DYWxsYmFja01hcFtjXT1udWxsfX0sX3Nob3dUb29sdGlwOmZ1bmN0aW9uKCl7dGhpcy5vcHRpb25zLnRvb2x0aXBfc3BsaXQ9PT0hMT8odGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwLFwiaW5cIiksdGhpcy50b29sdGlwX21pbi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMudG9vbHRpcF9tYXguc3R5bGUuZGlzcGxheT1cIm5vbmVcIik6KHRoaXMuX2FkZENsYXNzKHRoaXMudG9vbHRpcF9taW4sXCJpblwiKSx0aGlzLl9hZGRDbGFzcyh0aGlzLnRvb2x0aXBfbWF4LFwiaW5cIiksdGhpcy50b29sdGlwLnN0eWxlLmRpc3BsYXk9XCJub25lXCIpLHRoaXMuX3N0YXRlLm92ZXI9ITB9LF9oaWRlVG9vbHRpcDpmdW5jdGlvbigpe3RoaXMuX3N0YXRlLmluRHJhZz09PSExJiZ0aGlzLmFsd2F5c1Nob3dUb29sdGlwIT09ITAmJih0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXAsXCJpblwiKSx0aGlzLl9yZW1vdmVDbGFzcyh0aGlzLnRvb2x0aXBfbWluLFwiaW5cIiksdGhpcy5fcmVtb3ZlQ2xhc3ModGhpcy50b29sdGlwX21heCxcImluXCIpKSx0aGlzLl9zdGF0ZS5vdmVyPSExfSxfbGF5b3V0OmZ1bmN0aW9uKCl7dmFyIGE7aWYoYT10aGlzLm9wdGlvbnMucmV2ZXJzZWQ/WzEwMC10aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdLHRoaXMub3B0aW9ucy5yYW5nZT8xMDAtdGhpcy5fc3RhdGUucGVyY2VudGFnZVsxXTp0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdXTpbdGhpcy5fc3RhdGUucGVyY2VudGFnZVswXSx0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdXSx0aGlzLmhhbmRsZTEuc3R5bGVbdGhpcy5zdHlsZVBvc109YVswXStcIiVcIix0aGlzLmhhbmRsZTIuc3R5bGVbdGhpcy5zdHlsZVBvc109YVsxXStcIiVcIixBcnJheS5pc0FycmF5KHRoaXMub3B0aW9ucy50aWNrcykmJnRoaXMub3B0aW9ucy50aWNrcy5sZW5ndGg+MCl7dmFyIGI9TWF0aC5tYXguYXBwbHkoTWF0aCx0aGlzLm9wdGlvbnMudGlja3MpLGM9TWF0aC5taW4uYXBwbHkoTWF0aCx0aGlzLm9wdGlvbnMudGlja3MpLGQ9XCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP1wiaGVpZ2h0XCI6XCJ3aWR0aFwiLGU9XCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP1wibWFyZ2luVG9wXCI6XCJtYXJnaW5MZWZ0XCIsZj10aGlzLl9zdGF0ZS5zaXplLyh0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoLTEpO2lmKHRoaXMudGlja0xhYmVsQ29udGFpbmVyKXt2YXIgZz0wO2lmKDA9PT10aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zLmxlbmd0aCl0aGlzLnRpY2tMYWJlbENvbnRhaW5lci5zdHlsZVtlXT0tZi8yK1wicHhcIixnPXRoaXMudGlja0xhYmVsQ29udGFpbmVyLm9mZnNldEhlaWdodDtlbHNlIGZvcihoPTA7aDx0aGlzLnRpY2tMYWJlbENvbnRhaW5lci5jaGlsZE5vZGVzLmxlbmd0aDtoKyspdGhpcy50aWNrTGFiZWxDb250YWluZXIuY2hpbGROb2Rlc1toXS5vZmZzZXRIZWlnaHQ+ZyYmKGc9dGhpcy50aWNrTGFiZWxDb250YWluZXIuY2hpbGROb2Rlc1toXS5vZmZzZXRIZWlnaHQpO1wiaG9yaXpvbnRhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uJiYodGhpcy5zbGlkZXJFbGVtLnN0eWxlLm1hcmdpbkJvdHRvbT1nK1wicHhcIil9Zm9yKHZhciBoPTA7aDx0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoO2grKyl7dmFyIGk9dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1toXXx8MTAwKih0aGlzLm9wdGlvbnMudGlja3NbaF0tYykvKGItYyk7dGhpcy50aWNrc1toXS5zdHlsZVt0aGlzLnN0eWxlUG9zXT1pK1wiJVwiLHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudGlja3NbaF0sXCJpbi1zZWxlY3Rpb25cIiksdGhpcy5vcHRpb25zLnJhbmdlP2k+PWFbMF0mJmk8PWFbMV0mJnRoaXMuX2FkZENsYXNzKHRoaXMudGlja3NbaF0sXCJpbi1zZWxlY3Rpb25cIik6XCJhZnRlclwiPT09dGhpcy5vcHRpb25zLnNlbGVjdGlvbiYmaT49YVswXT90aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2hdLFwiaW4tc2VsZWN0aW9uXCIpOlwiYmVmb3JlXCI9PT10aGlzLm9wdGlvbnMuc2VsZWN0aW9uJiZpPD1hWzBdJiZ0aGlzLl9hZGRDbGFzcyh0aGlzLnRpY2tzW2hdLFwiaW4tc2VsZWN0aW9uXCIpLHRoaXMudGlja0xhYmVsc1toXSYmKHRoaXMudGlja0xhYmVsc1toXS5zdHlsZVtkXT1mK1wicHhcIix2b2lkIDAhPT10aGlzLm9wdGlvbnMudGlja3NfcG9zaXRpb25zW2hdJiYodGhpcy50aWNrTGFiZWxzW2hdLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0aGlzLnRpY2tMYWJlbHNbaF0uc3R5bGVbdGhpcy5zdHlsZVBvc109dGhpcy5vcHRpb25zLnRpY2tzX3Bvc2l0aW9uc1toXStcIiVcIix0aGlzLnRpY2tMYWJlbHNbaF0uc3R5bGVbZV09LWYvMitcInB4XCIpKX19dmFyIGo7aWYodGhpcy5vcHRpb25zLnJhbmdlKXtqPXRoaXMub3B0aW9ucy5mb3JtYXR0ZXIodGhpcy5fc3RhdGUudmFsdWUpLHRoaXMuX3NldFRleHQodGhpcy50b29sdGlwSW5uZXIsaiksdGhpcy50b29sdGlwLnN0eWxlW3RoaXMuc3R5bGVQb3NdPShhWzFdK2FbMF0pLzIrXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXAsXCJtYXJnaW4tdG9wXCIsLXRoaXMudG9vbHRpcC5vZmZzZXRIZWlnaHQvMitcInB4XCIpOnRoaXMuX2Nzcyh0aGlzLnRvb2x0aXAsXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXAub2Zmc2V0V2lkdGgvMitcInB4XCIpLFwidmVydGljYWxcIj09PXRoaXMub3B0aW9ucy5vcmllbnRhdGlvbj90aGlzLl9jc3ModGhpcy50b29sdGlwLFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXAub2Zmc2V0SGVpZ2h0LzIrXCJweFwiKTp0aGlzLl9jc3ModGhpcy50b29sdGlwLFwibWFyZ2luLWxlZnRcIiwtdGhpcy50b29sdGlwLm9mZnNldFdpZHRoLzIrXCJweFwiKTt2YXIgaz10aGlzLm9wdGlvbnMuZm9ybWF0dGVyKHRoaXMuX3N0YXRlLnZhbHVlWzBdKTt0aGlzLl9zZXRUZXh0KHRoaXMudG9vbHRpcElubmVyX21pbixrKTt2YXIgbD10aGlzLm9wdGlvbnMuZm9ybWF0dGVyKHRoaXMuX3N0YXRlLnZhbHVlWzFdKTt0aGlzLl9zZXRUZXh0KHRoaXMudG9vbHRpcElubmVyX21heCxsKSx0aGlzLnRvb2x0aXBfbWluLnN0eWxlW3RoaXMuc3R5bGVQb3NdPWFbMF0rXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXBfbWluLFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXBfbWluLm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcF9taW4sXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXBfbWluLm9mZnNldFdpZHRoLzIrXCJweFwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlW3RoaXMuc3R5bGVQb3NdPWFbMV0rXCIlXCIsXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uP3RoaXMuX2Nzcyh0aGlzLnRvb2x0aXBfbWF4LFwibWFyZ2luLXRvcFwiLC10aGlzLnRvb2x0aXBfbWF4Lm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcF9tYXgsXCJtYXJnaW4tbGVmdFwiLC10aGlzLnRvb2x0aXBfbWF4Lm9mZnNldFdpZHRoLzIrXCJweFwiKX1lbHNlIGo9dGhpcy5vcHRpb25zLmZvcm1hdHRlcih0aGlzLl9zdGF0ZS52YWx1ZVswXSksdGhpcy5fc2V0VGV4dCh0aGlzLnRvb2x0aXBJbm5lcixqKSx0aGlzLnRvb2x0aXAuc3R5bGVbdGhpcy5zdHlsZVBvc109YVswXStcIiVcIixcInZlcnRpY2FsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24/dGhpcy5fY3NzKHRoaXMudG9vbHRpcCxcIm1hcmdpbi10b3BcIiwtdGhpcy50b29sdGlwLm9mZnNldEhlaWdodC8yK1wicHhcIik6dGhpcy5fY3NzKHRoaXMudG9vbHRpcCxcIm1hcmdpbi1sZWZ0XCIsLXRoaXMudG9vbHRpcC5vZmZzZXRXaWR0aC8yK1wicHhcIik7aWYoXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKXRoaXMudHJhY2tMb3cuc3R5bGUudG9wPVwiMFwiLHRoaXMudHJhY2tMb3cuc3R5bGUuaGVpZ2h0PU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS50b3A9TWF0aC5taW4oYVswXSxhWzFdKStcIiVcIix0aGlzLnRyYWNrU2VsZWN0aW9uLnN0eWxlLmhlaWdodD1NYXRoLmFicyhhWzBdLWFbMV0pK1wiJVwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLmJvdHRvbT1cIjBcIix0aGlzLnRyYWNrSGlnaC5zdHlsZS5oZWlnaHQ9MTAwLU1hdGgubWluKGFbMF0sYVsxXSktTWF0aC5hYnMoYVswXS1hWzFdKStcIiVcIjtlbHNle3RoaXMudHJhY2tMb3cuc3R5bGUubGVmdD1cIjBcIix0aGlzLnRyYWNrTG93LnN0eWxlLndpZHRoPU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS5sZWZ0PU1hdGgubWluKGFbMF0sYVsxXSkrXCIlXCIsdGhpcy50cmFja1NlbGVjdGlvbi5zdHlsZS53aWR0aD1NYXRoLmFicyhhWzBdLWFbMV0pK1wiJVwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLnJpZ2h0PVwiMFwiLHRoaXMudHJhY2tIaWdoLnN0eWxlLndpZHRoPTEwMC1NYXRoLm1pbihhWzBdLGFbMV0pLU1hdGguYWJzKGFbMF0tYVsxXSkrXCIlXCI7dmFyIG09dGhpcy50b29sdGlwX21pbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXRoaXMudG9vbHRpcF9tYXguZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bS5yaWdodD5uLmxlZnQ/KHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJ0b3BcIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwX21heCxcImJvdHRvbVwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLnRvcD1cIjE4cHhcIik6KHRoaXMuX3JlbW92ZUNsYXNzKHRoaXMudG9vbHRpcF9tYXgsXCJib3R0b21cIiksdGhpcy5fYWRkQ2xhc3ModGhpcy50b29sdGlwX21heCxcInRvcFwiKSx0aGlzLnRvb2x0aXBfbWF4LnN0eWxlLnRvcD10aGlzLnRvb2x0aXBfbWluLnN0eWxlLnRvcCl9fSxfcmVtb3ZlUHJvcGVydHk6ZnVuY3Rpb24oYSxiKXthLnN0eWxlLnJlbW92ZVByb3BlcnR5P2Euc3R5bGUucmVtb3ZlUHJvcGVydHkoYik6YS5zdHlsZS5yZW1vdmVBdHRyaWJ1dGUoYil9LF9tb3VzZWRvd246ZnVuY3Rpb24oYSl7aWYoIXRoaXMuX3N0YXRlLmVuYWJsZWQpcmV0dXJuITE7dGhpcy5fc3RhdGUub2Zmc2V0PXRoaXMuX29mZnNldCh0aGlzLnNsaWRlckVsZW0pLHRoaXMuX3N0YXRlLnNpemU9dGhpcy5zbGlkZXJFbGVtW3RoaXMuc2l6ZVBvc107dmFyIGI9dGhpcy5fZ2V0UGVyY2VudGFnZShhKTtpZih0aGlzLm9wdGlvbnMucmFuZ2Upe3ZhciBjPU1hdGguYWJzKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0tYiksZD1NYXRoLmFicyh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdLWIpO3RoaXMuX3N0YXRlLmRyYWdnZWQ9ZD5jPzA6MX1lbHNlIHRoaXMuX3N0YXRlLmRyYWdnZWQ9MDt0aGlzLl9zdGF0ZS5wZXJjZW50YWdlW3RoaXMuX3N0YXRlLmRyYWdnZWRdPWIsdGhpcy5fbGF5b3V0KCksdGhpcy50b3VjaENhcGFibGUmJihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMubW91c2V1cCwhMSkpLHRoaXMubW91c2Vtb3ZlJiZkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLHRoaXMubW91c2V1cCYmZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm1vdXNldXAsITEpLHRoaXMubW91c2Vtb3ZlPXRoaXMuX21vdXNlbW92ZS5iaW5kKHRoaXMpLHRoaXMubW91c2V1cD10aGlzLl9tb3VzZXVwLmJpbmQodGhpcyksdGhpcy50b3VjaENhcGFibGUmJihkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMubW91c2V1cCwhMSkpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm1vdXNlbW92ZSwhMSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm1vdXNldXAsITEpLHRoaXMuX3N0YXRlLmluRHJhZz0hMDt2YXIgZT10aGlzLl9jYWxjdWxhdGVWYWx1ZSgpO3JldHVybiB0aGlzLl90cmlnZ2VyKFwic2xpZGVTdGFydFwiLGUpLHRoaXMuX3NldERhdGFWYWwoZSksdGhpcy5zZXRWYWx1ZShlLCExLCEwKSx0aGlzLl9wYXVzZUV2ZW50KGEpLHRoaXMub3B0aW9ucy5mb2N1cyYmdGhpcy5fdHJpZ2dlckZvY3VzT25IYW5kbGUodGhpcy5fc3RhdGUuZHJhZ2dlZCksITB9LF90cmlnZ2VyRm9jdXNPbkhhbmRsZTpmdW5jdGlvbihhKXswPT09YSYmdGhpcy5oYW5kbGUxLmZvY3VzKCksMT09PWEmJnRoaXMuaGFuZGxlMi5mb2N1cygpfSxfa2V5ZG93bjpmdW5jdGlvbihhLGIpe2lmKCF0aGlzLl9zdGF0ZS5lbmFibGVkKXJldHVybiExO3ZhciBjO3N3aXRjaChiLmtleUNvZGUpe2Nhc2UgMzc6Y2FzZSA0MDpjPS0xO2JyZWFrO2Nhc2UgMzk6Y2FzZSAzODpjPTF9aWYoYyl7aWYodGhpcy5vcHRpb25zLm5hdHVyYWxfYXJyb3dfa2V5cyl7dmFyIGQ9XCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uJiYhdGhpcy5vcHRpb25zLnJldmVyc2VkLGU9XCJob3Jpem9udGFsXCI9PT10aGlzLm9wdGlvbnMub3JpZW50YXRpb24mJnRoaXMub3B0aW9ucy5yZXZlcnNlZDsoZHx8ZSkmJihjPS1jKX12YXIgZj10aGlzLl9zdGF0ZS52YWx1ZVthXStjKnRoaXMub3B0aW9ucy5zdGVwO3JldHVybiB0aGlzLm9wdGlvbnMucmFuZ2UmJihmPVthP3RoaXMuX3N0YXRlLnZhbHVlWzBdOmYsYT9mOnRoaXMuX3N0YXRlLnZhbHVlWzFdXSksdGhpcy5fdHJpZ2dlcihcInNsaWRlU3RhcnRcIixmKSx0aGlzLl9zZXREYXRhVmFsKGYpLHRoaXMuc2V0VmFsdWUoZiwhMCwhMCksdGhpcy5fc2V0RGF0YVZhbChmKSx0aGlzLl90cmlnZ2VyKFwic2xpZGVTdG9wXCIsZiksdGhpcy5fbGF5b3V0KCksdGhpcy5fcGF1c2VFdmVudChiKSwhMX19LF9wYXVzZUV2ZW50OmZ1bmN0aW9uKGEpe2Euc3RvcFByb3BhZ2F0aW9uJiZhLnN0b3BQcm9wYWdhdGlvbigpLGEucHJldmVudERlZmF1bHQmJmEucHJldmVudERlZmF1bHQoKSxhLmNhbmNlbEJ1YmJsZT0hMCxhLnJldHVyblZhbHVlPSExfSxfbW91c2Vtb3ZlOmZ1bmN0aW9uKGEpe2lmKCF0aGlzLl9zdGF0ZS5lbmFibGVkKXJldHVybiExO3ZhciBiPXRoaXMuX2dldFBlcmNlbnRhZ2UoYSk7dGhpcy5fYWRqdXN0UGVyY2VudGFnZUZvclJhbmdlU2xpZGVycyhiKSx0aGlzLl9zdGF0ZS5wZXJjZW50YWdlW3RoaXMuX3N0YXRlLmRyYWdnZWRdPWIsdGhpcy5fbGF5b3V0KCk7dmFyIGM9dGhpcy5fY2FsY3VsYXRlVmFsdWUoITApO3JldHVybiB0aGlzLnNldFZhbHVlKGMsITAsITApLCExfSxfYWRqdXN0UGVyY2VudGFnZUZvclJhbmdlU2xpZGVyczpmdW5jdGlvbihhKXtpZih0aGlzLm9wdGlvbnMucmFuZ2Upe3ZhciBiPXRoaXMuX2dldE51bURpZ2l0c0FmdGVyRGVjaW1hbFBsYWNlKGEpO2I9Yj9iLTE6MDt2YXIgYz10aGlzLl9hcHBseVRvRml4ZWRBbmRQYXJzZUZsb2F0KGEsYik7MD09PXRoaXMuX3N0YXRlLmRyYWdnZWQmJnRoaXMuX2FwcGx5VG9GaXhlZEFuZFBhcnNlRmxvYXQodGhpcy5fc3RhdGUucGVyY2VudGFnZVsxXSxiKTxjPyh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdPXRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV0sdGhpcy5fc3RhdGUuZHJhZ2dlZD0xKToxPT09dGhpcy5fc3RhdGUuZHJhZ2dlZCYmdGhpcy5fYXBwbHlUb0ZpeGVkQW5kUGFyc2VGbG9hdCh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdLGIpPmMmJih0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdPXRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0sdGhpcy5fc3RhdGUuZHJhZ2dlZD0wKX19LF9tb3VzZXVwOmZ1bmN0aW9uKCl7aWYoIXRoaXMuX3N0YXRlLmVuYWJsZWQpcmV0dXJuITE7dGhpcy50b3VjaENhcGFibGUmJihkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5tb3VzZW1vdmUsITEpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLHRoaXMubW91c2V1cCwhMSkpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIix0aGlzLm1vdXNlbW92ZSwhMSksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIix0aGlzLm1vdXNldXAsITEpLHRoaXMuX3N0YXRlLmluRHJhZz0hMSx0aGlzLl9zdGF0ZS5vdmVyPT09ITEmJnRoaXMuX2hpZGVUb29sdGlwKCk7dmFyIGE9dGhpcy5fY2FsY3VsYXRlVmFsdWUoITApO3JldHVybiB0aGlzLl9sYXlvdXQoKSx0aGlzLl9zZXREYXRhVmFsKGEpLHRoaXMuX3RyaWdnZXIoXCJzbGlkZVN0b3BcIixhKSwhMX0sX2NhbGN1bGF0ZVZhbHVlOmZ1bmN0aW9uKGEpe3ZhciBiO2lmKHRoaXMub3B0aW9ucy5yYW5nZT8oYj1bdGhpcy5vcHRpb25zLm1pbix0aGlzLm9wdGlvbnMubWF4XSwwIT09dGhpcy5fc3RhdGUucGVyY2VudGFnZVswXSYmKGJbMF09dGhpcy5fdG9WYWx1ZSh0aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzBdKSxiWzBdPXRoaXMuX2FwcGx5UHJlY2lzaW9uKGJbMF0pKSwxMDAhPT10aGlzLl9zdGF0ZS5wZXJjZW50YWdlWzFdJiYoYlsxXT10aGlzLl90b1ZhbHVlKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMV0pLGJbMV09dGhpcy5fYXBwbHlQcmVjaXNpb24oYlsxXSkpKTooYj10aGlzLl90b1ZhbHVlKHRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMF0pLGI9cGFyc2VGbG9hdChiKSxiPXRoaXMuX2FwcGx5UHJlY2lzaW9uKGIpKSxhKXtmb3IodmFyIGM9W2IsMS8wXSxkPTA7ZDx0aGlzLm9wdGlvbnMudGlja3MubGVuZ3RoO2QrKyl7dmFyIGU9TWF0aC5hYnModGhpcy5vcHRpb25zLnRpY2tzW2RdLWIpO2U8PWNbMV0mJihjPVt0aGlzLm9wdGlvbnMudGlja3NbZF0sZV0pfWlmKGNbMV08PXRoaXMub3B0aW9ucy50aWNrc19zbmFwX2JvdW5kcylyZXR1cm4gY1swXX1yZXR1cm4gYn0sX2FwcGx5UHJlY2lzaW9uOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMub3B0aW9ucy5wcmVjaXNpb258fHRoaXMuX2dldE51bURpZ2l0c0FmdGVyRGVjaW1hbFBsYWNlKHRoaXMub3B0aW9ucy5zdGVwKTtyZXR1cm4gdGhpcy5fYXBwbHlUb0ZpeGVkQW5kUGFyc2VGbG9hdChhLGIpfSxfZ2V0TnVtRGlnaXRzQWZ0ZXJEZWNpbWFsUGxhY2U6ZnVuY3Rpb24oYSl7dmFyIGI9KFwiXCIrYSkubWF0Y2goLyg/OlxcLihcXGQrKSk/KD86W2VFXShbKy1dP1xcZCspKT8kLyk7cmV0dXJuIGI/TWF0aC5tYXgoMCwoYlsxXT9iWzFdLmxlbmd0aDowKS0oYlsyXT8rYlsyXTowKSk6MH0sX2FwcGx5VG9GaXhlZEFuZFBhcnNlRmxvYXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvRml4ZWQoYik7cmV0dXJuIHBhcnNlRmxvYXQoYyl9LF9nZXRQZXJjZW50YWdlOmZ1bmN0aW9uKGEpeyF0aGlzLnRvdWNoQ2FwYWJsZXx8XCJ0b3VjaHN0YXJ0XCIhPT1hLnR5cGUmJlwidG91Y2htb3ZlXCIhPT1hLnR5cGV8fChhPWEudG91Y2hlc1swXSk7dmFyIGI9YVt0aGlzLm1vdXNlUG9zXSxjPXRoaXMuX3N0YXRlLm9mZnNldFt0aGlzLnN0eWxlUG9zXSxkPWItYyxlPWQvdGhpcy5fc3RhdGUuc2l6ZSoxMDA7cmV0dXJuIGU9TWF0aC5yb3VuZChlL3RoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMl0pKnRoaXMuX3N0YXRlLnBlcmNlbnRhZ2VbMl0sdGhpcy5vcHRpb25zLnJldmVyc2VkJiYoZT0xMDAtZSksTWF0aC5tYXgoMCxNYXRoLm1pbigxMDAsZSkpfSxfdmFsaWRhdGVJbnB1dFZhbHVlOmZ1bmN0aW9uKGEpe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBhKXJldHVybiBhO2lmKEFycmF5LmlzQXJyYXkoYSkpcmV0dXJuIHRoaXMuX3ZhbGlkYXRlQXJyYXkoYSksYTt0aHJvdyBuZXcgRXJyb3IoZC5mb3JtYXRJbnZhbGlkSW5wdXRFcnJvck1zZyhhKSl9LF92YWxpZGF0ZUFycmF5OmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz1hW2JdO2lmKFwibnVtYmVyXCIhPXR5cGVvZiBjKXRocm93IG5ldyBFcnJvcihkLmZvcm1hdEludmFsaWRJbnB1dEVycm9yTXNnKGMpKX19LF9zZXREYXRhVmFsOmZ1bmN0aW9uKGEpe3RoaXMuZWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkYXRhLXZhbHVlXCIsYSksdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShcInZhbHVlXCIsYSksdGhpcy5lbGVtZW50LnZhbHVlPWF9LF90cmlnZ2VyOmZ1bmN0aW9uKGIsYyl7Yz1jfHwwPT09Yz9jOnZvaWQgMDt2YXIgZD10aGlzLmV2ZW50VG9DYWxsYmFja01hcFtiXTtpZihkJiZkLmxlbmd0aClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyl7dmFyIGY9ZFtlXTtmKGMpfWEmJnRoaXMuX3RyaWdnZXJKUXVlcnlFdmVudChiLGMpfSxfdHJpZ2dlckpRdWVyeUV2ZW50OmZ1bmN0aW9uKGEsYil7dmFyIGM9e3R5cGU6YSx2YWx1ZTpifTt0aGlzLiRlbGVtZW50LnRyaWdnZXIoYyksdGhpcy4kc2xpZGVyRWxlbS50cmlnZ2VyKGMpfSxfdW5iaW5kSlF1ZXJ5RXZlbnRIYW5kbGVyczpmdW5jdGlvbigpe3RoaXMuJGVsZW1lbnQub2ZmKCksdGhpcy4kc2xpZGVyRWxlbS5vZmYoKX0sX3NldFRleHQ6ZnVuY3Rpb24oYSxiKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5pbm5lclRleHQ/YS5pbm5lclRleHQ9YjpcInVuZGVmaW5lZFwiIT10eXBlb2YgYS50ZXh0Q29udGVudCYmKGEudGV4dENvbnRlbnQ9Yil9LF9yZW1vdmVDbGFzczpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1iLnNwbGl0KFwiIFwiKSxkPWEuY2xhc3NOYW1lLGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9Y1tlXSxnPW5ldyBSZWdFeHAoXCIoPzpcXFxcc3xeKVwiK2YrXCIoPzpcXFxcc3wkKVwiKTtkPWQucmVwbGFjZShnLFwiIFwiKX1hLmNsYXNzTmFtZT1kLnRyaW0oKX0sX2FkZENsYXNzOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWIuc3BsaXQoXCIgXCIpLGQ9YS5jbGFzc05hbWUsZT0wO2U8Yy5sZW5ndGg7ZSsrKXt2YXIgZj1jW2VdLGc9bmV3IFJlZ0V4cChcIig/OlxcXFxzfF4pXCIrZitcIig/OlxcXFxzfCQpXCIpLGg9Zy50ZXN0KGQpO2h8fChkKz1cIiBcIitmKX1hLmNsYXNzTmFtZT1kLnRyaW0oKX0sX29mZnNldExlZnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdH0sX29mZnNldFRvcDpmdW5jdGlvbihhKXtmb3IodmFyIGI9YS5vZmZzZXRUb3A7KGE9YS5vZmZzZXRQYXJlbnQpJiYhaXNOYU4oYS5vZmZzZXRUb3ApOyliKz1hLm9mZnNldFRvcDtyZXR1cm4gYn0sX29mZnNldDpmdW5jdGlvbihhKXtyZXR1cm57bGVmdDp0aGlzLl9vZmZzZXRMZWZ0KGEpLHRvcDp0aGlzLl9vZmZzZXRUb3AoYSl9fSxfY3NzOmZ1bmN0aW9uKGIsYyxkKXtpZihhKWEuc3R5bGUoYixjLGQpO2Vsc2V7dmFyIGU9Yy5yZXBsYWNlKC9eLW1zLS8sXCJtcy1cIikucmVwbGFjZSgvLShbXFxkYS16XSkvZ2ksZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfSk7Yi5zdHlsZVtlXT1kfX0sX3RvVmFsdWU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub3B0aW9ucy5zY2FsZS50b1ZhbHVlLmFwcGx5KHRoaXMsW2FdKX0sX3RvUGVyY2VudGFnZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vcHRpb25zLnNjYWxlLnRvUGVyY2VudGFnZS5hcHBseSh0aGlzLFthXSl9LF9zZXRUb29sdGlwUG9zaXRpb246ZnVuY3Rpb24oKXt2YXIgYT1bdGhpcy50b29sdGlwLHRoaXMudG9vbHRpcF9taW4sdGhpcy50b29sdGlwX21heF07aWYoXCJ2ZXJ0aWNhbFwiPT09dGhpcy5vcHRpb25zLm9yaWVudGF0aW9uKXt2YXIgYj10aGlzLm9wdGlvbnMudG9vbHRpcF9wb3NpdGlvbnx8XCJyaWdodFwiLGM9XCJsZWZ0XCI9PT1iP1wicmlnaHRcIjpcImxlZnRcIjthLmZvckVhY2goZnVuY3Rpb24oYSl7dGhpcy5fYWRkQ2xhc3MoYSxiKSxhLnN0eWxlW2NdPVwiMTAwJVwifS5iaW5kKHRoaXMpKX1lbHNlIGEuZm9yRWFjaChcImJvdHRvbVwiPT09dGhpcy5vcHRpb25zLnRvb2x0aXBfcG9zaXRpb24/ZnVuY3Rpb24oYSl7dGhpcy5fYWRkQ2xhc3MoYSxcImJvdHRvbVwiKSxhLnN0eWxlLnRvcD1cIjIycHhcIn0uYmluZCh0aGlzKTpmdW5jdGlvbihhKXt0aGlzLl9hZGRDbGFzcyhhLFwidG9wXCIpLGEuc3R5bGUudG9wPS10aGlzLnRvb2x0aXAub3V0ZXJIZWlnaHQtMTQrXCJweFwifS5iaW5kKHRoaXMpKX19LGEpe3ZhciBmPWEuZm4uc2xpZGVyP1wiYm9vdHN0cmFwU2xpZGVyXCI6XCJzbGlkZXJcIjthLmJyaWRnZXQoZixiKX19KGEpLGJ9KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vbGlicmFyaWVzL2FuZ3VsYXItYm9vdHN0cmFwLXNsaWRlci9ib290c3RyYXAtc2xpZGVyLm1pbi5qc1xuICoqIG1vZHVsZSBpZCA9IDExXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIoZnVuY3Rpb24oKSB7IG1vZHVsZS5leHBvcnRzID0gdGhpc1tcIiRcIl07IH0oKSk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiBleHRlcm5hbCBcIiRcIlxuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZSB1bmxlc3MgYW1kTW9kdWxlSWQgaXMgc2V0XG4gICAgZGVmaW5lKFtdLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gKHJvb3RbJ1NpZ25hdHVyZVBhZCddID0gZmFjdG9yeSgpKTtcbiAgICB9KTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICAvLyBOb2RlLiBEb2VzIG5vdCB3b3JrIHdpdGggc3RyaWN0IENvbW1vbkpTLCBidXRcbiAgICAvLyBvbmx5IENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHRoYXQgc3VwcG9ydCBtb2R1bGUuZXhwb3J0cyxcbiAgICAvLyBsaWtlIE5vZGUuXG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdFsnU2lnbmF0dXJlUGFkJ10gPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKCkge1xuXG4vKiFcbiAqIFNpZ25hdHVyZSBQYWQgdjEuNS4zXG4gKiBodHRwczovL2dpdGh1Yi5jb20vc3ppbWVrL3NpZ25hdHVyZV9wYWRcbiAqXG4gKiBDb3B5cmlnaHQgMjAxNiBTenltb24gTm93YWtcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICpcbiAqIFRoZSBtYWluIGlkZWEgYW5kIHNvbWUgcGFydHMgb2YgdGhlIGNvZGUgKGUuZy4gZHJhd2luZyB2YXJpYWJsZSB3aWR0aCBCw6l6aWVyIGN1cnZlKSBhcmUgdGFrZW4gZnJvbTpcbiAqIGh0dHA6Ly9jb3JuZXIuc3F1YXJldXAuY29tLzIwMTIvMDcvc21vb3RoZXItc2lnbmF0dXJlcy5odG1sXG4gKlxuICogSW1wbGVtZW50YXRpb24gb2YgaW50ZXJwb2xhdGlvbiB1c2luZyBjdWJpYyBCw6l6aWVyIGN1cnZlcyBpcyB0YWtlbiBmcm9tOlxuICogaHR0cDovL2Jlbmtub3dzY29kZS53b3JkcHJlc3MuY29tLzIwMTIvMDkvMTQvcGF0aC1pbnRlcnBvbGF0aW9uLXVzaW5nLWN1YmljLWJlemllci1hbmQtY29udHJvbC1wb2ludC1lc3RpbWF0aW9uLWluLWphdmFzY3JpcHRcbiAqXG4gKiBBbGdvcml0aG0gZm9yIGFwcHJveGltYXRlZCBsZW5ndGggb2YgYSBCw6l6aWVyIGN1cnZlIGlzIHRha2VuIGZyb206XG4gKiBodHRwOi8vd3d3LmxlbW9kYS5uZXQvbWF0aHMvYmV6aWVyLWxlbmd0aC9pbmRleC5odG1sXG4gKlxuICovXG52YXIgU2lnbmF0dXJlUGFkID0gKGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIFNpZ25hdHVyZVBhZCA9IGZ1bmN0aW9uIChjYW52YXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgb3B0cyA9IG9wdGlvbnMgfHwge307XG5cbiAgICAgICAgdGhpcy52ZWxvY2l0eUZpbHRlcldlaWdodCA9IG9wdHMudmVsb2NpdHlGaWx0ZXJXZWlnaHQgfHwgMC43O1xuICAgICAgICB0aGlzLm1pbldpZHRoID0gb3B0cy5taW5XaWR0aCB8fCAwLjU7XG4gICAgICAgIHRoaXMubWF4V2lkdGggPSBvcHRzLm1heFdpZHRoIHx8IDIuNTtcbiAgICAgICAgdGhpcy5kb3RTaXplID0gb3B0cy5kb3RTaXplIHx8IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5taW5XaWR0aCArIHRoaXMubWF4V2lkdGgpIC8gMjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5wZW5Db2xvciA9IG9wdHMucGVuQ29sb3IgfHwgXCJibGFja1wiO1xuICAgICAgICB0aGlzLmJhY2tncm91bmRDb2xvciA9IG9wdHMuYmFja2dyb3VuZENvbG9yIHx8IFwicmdiYSgwLDAsMCwwKVwiO1xuICAgICAgICB0aGlzLm9uRW5kID0gb3B0cy5vbkVuZDtcbiAgICAgICAgdGhpcy5vbkJlZ2luID0gb3B0cy5vbkJlZ2luO1xuXG4gICAgICAgIHRoaXMuX2NhbnZhcyA9IGNhbnZhcztcbiAgICAgICAgdGhpcy5fY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuXG4gICAgICAgIC8vIHdlIG5lZWQgYWRkIHRoZXNlIGlubGluZSBzbyB0aGV5IGFyZSBhdmFpbGFibGUgdG8gdW5iaW5kIHdoaWxlIHN0aWxsIGhhdmluZ1xuICAgICAgICAvLyAgYWNjZXNzIHRvICdzZWxmJyB3ZSBjb3VsZCB1c2UgXy5iaW5kIGJ1dCBpdCdzIG5vdCB3b3J0aCBhZGRpbmcgYSBkZXBlbmRlbmN5XG4gICAgICAgIHRoaXMuX2hhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fbW91c2VCdXR0b25Eb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZWxmLl9zdHJva2VCZWdpbihldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5faGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fbW91c2VCdXR0b25Eb3duKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fc3Ryb2tlVXBkYXRlKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZVVwID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEgJiYgc2VsZi5fbW91c2VCdXR0b25Eb3duKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fbW91c2VCdXR0b25Eb3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgc2VsZi5fc3Ryb2tlRW5kKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9oYW5kbGVUb3VjaFN0YXJ0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT0gMSkge1xuICAgICAgICAgICAgICAgIHZhciB0b3VjaCA9IGV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgICAgICAgICAgICAgIHNlbGYuX3N0cm9rZUJlZ2luKHRvdWNoKTtcbiAgICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5faGFuZGxlVG91Y2hNb3ZlID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IHNjcm9sbGluZy5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciB0b3VjaCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF07XG4gICAgICAgICAgICBzZWxmLl9zdHJva2VVcGRhdGUodG91Y2gpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2hhbmRsZVRvdWNoRW5kID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB2YXIgd2FzQ2FudmFzVG91Y2hlZCA9IGV2ZW50LnRhcmdldCA9PT0gc2VsZi5fY2FudmFzO1xuICAgICAgICAgICAgaWYgKHdhc0NhbnZhc1RvdWNoZWQpIHtcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3N0cm9rZUVuZChldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5faGFuZGxlTW91c2VFdmVudHMoKTtcbiAgICAgICAgdGhpcy5faGFuZGxlVG91Y2hFdmVudHMoKTtcbiAgICB9O1xuXG4gICAgU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eCxcbiAgICAgICAgICAgIGNhbnZhcyA9IHRoaXMuX2NhbnZhcztcblxuICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5iYWNrZ3JvdW5kQ29sb3I7XG4gICAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgfTtcblxuICAgIFNpZ25hdHVyZVBhZC5wcm90b3R5cGUudG9EYXRhVVJMID0gZnVuY3Rpb24gKGltYWdlVHlwZSwgcXVhbGl0eSkge1xuICAgICAgICB2YXIgY2FudmFzID0gdGhpcy5fY2FudmFzO1xuICAgICAgICByZXR1cm4gY2FudmFzLnRvRGF0YVVSTC5hcHBseShjYW52YXMsIGFyZ3VtZW50cyk7XG4gICAgfTtcblxuICAgIFNpZ25hdHVyZVBhZC5wcm90b3R5cGUuZnJvbURhdGFVUkwgPSBmdW5jdGlvbiAoZGF0YVVybCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgICAgICBpbWFnZSA9IG5ldyBJbWFnZSgpLFxuICAgICAgICAgICAgcmF0aW8gPSB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyB8fCAxLFxuICAgICAgICAgICAgd2lkdGggPSB0aGlzLl9jYW52YXMud2lkdGggLyByYXRpbyxcbiAgICAgICAgICAgIGhlaWdodCA9IHRoaXMuX2NhbnZhcy5oZWlnaHQgLyByYXRpbztcblxuICAgICAgICB0aGlzLl9yZXNldCgpO1xuICAgICAgICBpbWFnZS5zcmMgPSBkYXRhVXJsO1xuICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLl9jdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5faXNFbXB0eSA9IGZhbHNlO1xuICAgIH07XG5cbiAgICBTaWduYXR1cmVQYWQucHJvdG90eXBlLl9zdHJva2VVcGRhdGUgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHBvaW50ID0gdGhpcy5fY3JlYXRlUG9pbnQoZXZlbnQpO1xuICAgICAgICB0aGlzLl9hZGRQb2ludChwb2ludCk7XG4gICAgfTtcblxuICAgIFNpZ25hdHVyZVBhZC5wcm90b3R5cGUuX3N0cm9rZUJlZ2luID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICAgIHRoaXMuX3N0cm9rZVVwZGF0ZShldmVudCk7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkJlZ2luID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9uQmVnaW4oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIFNpZ25hdHVyZVBhZC5wcm90b3R5cGUuX3N0cm9rZURyYXcgPSBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eCxcbiAgICAgICAgICAgIGRvdFNpemUgPSB0eXBlb2YodGhpcy5kb3RTaXplKSA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuZG90U2l6ZSgpIDogdGhpcy5kb3RTaXplO1xuXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5fZHJhd1BvaW50KHBvaW50LngsIHBvaW50LnksIGRvdFNpemUpO1xuICAgICAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIGN0eC5maWxsKCk7XG4gICAgfTtcblxuICAgIFNpZ25hdHVyZVBhZC5wcm90b3R5cGUuX3N0cm9rZUVuZCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgY2FuRHJhd0N1cnZlID0gdGhpcy5wb2ludHMubGVuZ3RoID4gMixcbiAgICAgICAgICAgIHBvaW50ID0gdGhpcy5wb2ludHNbMF07XG5cbiAgICAgICAgaWYgKCFjYW5EcmF3Q3VydmUgJiYgcG9pbnQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0cm9rZURyYXcocG9pbnQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbkVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5vbkVuZChldmVudCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5faGFuZGxlTW91c2VFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX21vdXNlQnV0dG9uRG93biA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU1vdXNlRG93bik7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX2hhbmRsZU1vdXNlTW92ZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX2hhbmRsZU1vdXNlVXApO1xuICAgIH07XG5cbiAgICBTaWduYXR1cmVQYWQucHJvdG90eXBlLl9oYW5kbGVUb3VjaEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gUGFzcyB0b3VjaCBldmVudHMgdG8gY2FudmFzIGVsZW1lbnQgb24gbW9iaWxlIElFMTEgYW5kIEVkZ2UuXG4gICAgICAgIHRoaXMuX2NhbnZhcy5zdHlsZS5tc1RvdWNoQWN0aW9uID0gJ25vbmUnO1xuICAgICAgICB0aGlzLl9jYW52YXMuc3R5bGUudG91Y2hBY3Rpb24gPSAnbm9uZSc7XG5cbiAgICAgICAgdGhpcy5fY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMuX2hhbmRsZVRvdWNoU3RhcnQpO1xuICAgICAgICB0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCB0aGlzLl9oYW5kbGVUb3VjaE1vdmUpO1xuICAgICAgICB0aGlzLl9jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMuX2hhbmRsZVRvdWNoRW5kKTtcbiAgICB9O1xuXG4gICAgU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlTW91c2VFdmVudHMoKTtcbiAgICAgICAgdGhpcy5faGFuZGxlVG91Y2hFdmVudHMoKTtcbiAgICB9O1xuXG4gICAgU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZU1vdXNlRG93bik7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuX2hhbmRsZU1vdXNlTW92ZSk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMuX2hhbmRsZU1vdXNlVXApO1xuXG4gICAgICAgIHRoaXMuX2NhbnZhcy5yZW1vdmVFdmVudExpc3RlbmVyKFwidG91Y2hzdGFydFwiLCB0aGlzLl9oYW5kbGVUb3VjaFN0YXJ0KTtcbiAgICAgICAgdGhpcy5fY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5faGFuZGxlVG91Y2hNb3ZlKTtcbiAgICAgICAgdGhpcy5fY2FudmFzLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLl9oYW5kbGVUb3VjaEVuZCk7XG4gICAgfTtcblxuICAgIFNpZ25hdHVyZVBhZC5wcm90b3R5cGUuaXNFbXB0eSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRW1wdHk7XG4gICAgfTtcblxuICAgIFNpZ25hdHVyZVBhZC5wcm90b3R5cGUuX3Jlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLnBvaW50cyA9IFtdO1xuICAgICAgICB0aGlzLl9sYXN0VmVsb2NpdHkgPSAwO1xuICAgICAgICB0aGlzLl9sYXN0V2lkdGggPSAodGhpcy5taW5XaWR0aCArIHRoaXMubWF4V2lkdGgpIC8gMjtcbiAgICAgICAgdGhpcy5faXNFbXB0eSA9IHRydWU7XG4gICAgICAgIHRoaXMuX2N0eC5maWxsU3R5bGUgPSB0aGlzLnBlbkNvbG9yO1xuICAgIH07XG5cbiAgICBTaWduYXR1cmVQYWQucHJvdG90eXBlLl9jcmVhdGVQb2ludCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgcmVjdCA9IHRoaXMuX2NhbnZhcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQb2ludChcbiAgICAgICAgICAgIGV2ZW50LmNsaWVudFggLSByZWN0LmxlZnQsXG4gICAgICAgICAgICBldmVudC5jbGllbnRZIC0gcmVjdC50b3BcbiAgICAgICAgKTtcbiAgICB9O1xuXG4gICAgU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5fYWRkUG9pbnQgPSBmdW5jdGlvbiAocG9pbnQpIHtcbiAgICAgICAgdmFyIHBvaW50cyA9IHRoaXMucG9pbnRzLFxuICAgICAgICAgICAgYzIsIGMzLFxuICAgICAgICAgICAgY3VydmUsIHRtcDtcblxuICAgICAgICBwb2ludHMucHVzaChwb2ludCk7XG5cbiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICAvLyBUbyByZWR1Y2UgdGhlIGluaXRpYWwgbGFnIG1ha2UgaXQgd29yayB3aXRoIDMgcG9pbnRzXG4gICAgICAgICAgICAvLyBieSBjb3B5aW5nIHRoZSBmaXJzdCBwb2ludCB0byB0aGUgYmVnaW5uaW5nLlxuICAgICAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPT09IDMpIHBvaW50cy51bnNoaWZ0KHBvaW50c1swXSk7XG5cbiAgICAgICAgICAgIHRtcCA9IHRoaXMuX2NhbGN1bGF0ZUN1cnZlQ29udHJvbFBvaW50cyhwb2ludHNbMF0sIHBvaW50c1sxXSwgcG9pbnRzWzJdKTtcbiAgICAgICAgICAgIGMyID0gdG1wLmMyO1xuICAgICAgICAgICAgdG1wID0gdGhpcy5fY2FsY3VsYXRlQ3VydmVDb250cm9sUG9pbnRzKHBvaW50c1sxXSwgcG9pbnRzWzJdLCBwb2ludHNbM10pO1xuICAgICAgICAgICAgYzMgPSB0bXAuYzE7XG4gICAgICAgICAgICBjdXJ2ZSA9IG5ldyBCZXppZXIocG9pbnRzWzFdLCBjMiwgYzMsIHBvaW50c1syXSk7XG4gICAgICAgICAgICB0aGlzLl9hZGRDdXJ2ZShjdXJ2ZSk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgZmlyc3QgZWxlbWVudCBmcm9tIHRoZSBsaXN0LFxuICAgICAgICAgICAgLy8gc28gdGhhdCB3ZSBhbHdheXMgaGF2ZSBubyBtb3JlIHRoYW4gNCBwb2ludHMgaW4gcG9pbnRzIGFycmF5LlxuICAgICAgICAgICAgcG9pbnRzLnNoaWZ0KCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5fY2FsY3VsYXRlQ3VydmVDb250cm9sUG9pbnRzID0gZnVuY3Rpb24gKHMxLCBzMiwgczMpIHtcbiAgICAgICAgdmFyIGR4MSA9IHMxLnggLSBzMi54LCBkeTEgPSBzMS55IC0gczIueSxcbiAgICAgICAgICAgIGR4MiA9IHMyLnggLSBzMy54LCBkeTIgPSBzMi55IC0gczMueSxcblxuICAgICAgICAgICAgbTEgPSB7eDogKHMxLnggKyBzMi54KSAvIDIuMCwgeTogKHMxLnkgKyBzMi55KSAvIDIuMH0sXG4gICAgICAgICAgICBtMiA9IHt4OiAoczIueCArIHMzLngpIC8gMi4wLCB5OiAoczIueSArIHMzLnkpIC8gMi4wfSxcblxuICAgICAgICAgICAgbDEgPSBNYXRoLnNxcnQoZHgxKmR4MSArIGR5MSpkeTEpLFxuICAgICAgICAgICAgbDIgPSBNYXRoLnNxcnQoZHgyKmR4MiArIGR5MipkeTIpLFxuXG4gICAgICAgICAgICBkeG0gPSAobTEueCAtIG0yLngpLFxuICAgICAgICAgICAgZHltID0gKG0xLnkgLSBtMi55KSxcblxuICAgICAgICAgICAgayA9IGwyIC8gKGwxICsgbDIpLFxuICAgICAgICAgICAgY20gPSB7eDogbTIueCArIGR4bSprLCB5OiBtMi55ICsgZHltKmt9LFxuXG4gICAgICAgICAgICB0eCA9IHMyLnggLSBjbS54LFxuICAgICAgICAgICAgdHkgPSBzMi55IC0gY20ueTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYzE6IG5ldyBQb2ludChtMS54ICsgdHgsIG0xLnkgKyB0eSksXG4gICAgICAgICAgICBjMjogbmV3IFBvaW50KG0yLnggKyB0eCwgbTIueSArIHR5KVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBTaWduYXR1cmVQYWQucHJvdG90eXBlLl9hZGRDdXJ2ZSA9IGZ1bmN0aW9uIChjdXJ2ZSkge1xuICAgICAgICB2YXIgc3RhcnRQb2ludCA9IGN1cnZlLnN0YXJ0UG9pbnQsXG4gICAgICAgICAgICBlbmRQb2ludCA9IGN1cnZlLmVuZFBvaW50LFxuICAgICAgICAgICAgdmVsb2NpdHksIG5ld1dpZHRoO1xuXG4gICAgICAgIHZlbG9jaXR5ID0gZW5kUG9pbnQudmVsb2NpdHlGcm9tKHN0YXJ0UG9pbnQpO1xuICAgICAgICB2ZWxvY2l0eSA9IHRoaXMudmVsb2NpdHlGaWx0ZXJXZWlnaHQgKiB2ZWxvY2l0eVxuICAgICAgICAgICAgKyAoMSAtIHRoaXMudmVsb2NpdHlGaWx0ZXJXZWlnaHQpICogdGhpcy5fbGFzdFZlbG9jaXR5O1xuXG4gICAgICAgIG5ld1dpZHRoID0gdGhpcy5fc3Ryb2tlV2lkdGgodmVsb2NpdHkpO1xuICAgICAgICB0aGlzLl9kcmF3Q3VydmUoY3VydmUsIHRoaXMuX2xhc3RXaWR0aCwgbmV3V2lkdGgpO1xuXG4gICAgICAgIHRoaXMuX2xhc3RWZWxvY2l0eSA9IHZlbG9jaXR5O1xuICAgICAgICB0aGlzLl9sYXN0V2lkdGggPSBuZXdXaWR0aDtcbiAgICB9O1xuXG4gICAgU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5fZHJhd1BvaW50ID0gZnVuY3Rpb24gKHgsIHksIHNpemUpIHtcbiAgICAgICAgdmFyIGN0eCA9IHRoaXMuX2N0eDtcblxuICAgICAgICBjdHgubW92ZVRvKHgsIHkpO1xuICAgICAgICBjdHguYXJjKHgsIHksIHNpemUsIDAsIDIgKiBNYXRoLlBJLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuX2lzRW1wdHkgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5fZHJhd0N1cnZlID0gZnVuY3Rpb24gKGN1cnZlLCBzdGFydFdpZHRoLCBlbmRXaWR0aCkge1xuICAgICAgICB2YXIgY3R4ID0gdGhpcy5fY3R4LFxuICAgICAgICAgICAgd2lkdGhEZWx0YSA9IGVuZFdpZHRoIC0gc3RhcnRXaWR0aCxcbiAgICAgICAgICAgIGRyYXdTdGVwcywgd2lkdGgsIGksIHQsIHR0LCB0dHQsIHUsIHV1LCB1dXUsIHgsIHk7XG5cbiAgICAgICAgZHJhd1N0ZXBzID0gTWF0aC5mbG9vcihjdXJ2ZS5sZW5ndGgoKSk7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGRyYXdTdGVwczsgaSsrKSB7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIEJlemllciAoeCwgeSkgY29vcmRpbmF0ZSBmb3IgdGhpcyBzdGVwLlxuICAgICAgICAgICAgdCA9IGkgLyBkcmF3U3RlcHM7XG4gICAgICAgICAgICB0dCA9IHQgKiB0O1xuICAgICAgICAgICAgdHR0ID0gdHQgKiB0O1xuICAgICAgICAgICAgdSA9IDEgLSB0O1xuICAgICAgICAgICAgdXUgPSB1ICogdTtcbiAgICAgICAgICAgIHV1dSA9IHV1ICogdTtcblxuICAgICAgICAgICAgeCA9IHV1dSAqIGN1cnZlLnN0YXJ0UG9pbnQueDtcbiAgICAgICAgICAgIHggKz0gMyAqIHV1ICogdCAqIGN1cnZlLmNvbnRyb2wxLng7XG4gICAgICAgICAgICB4ICs9IDMgKiB1ICogdHQgKiBjdXJ2ZS5jb250cm9sMi54O1xuICAgICAgICAgICAgeCArPSB0dHQgKiBjdXJ2ZS5lbmRQb2ludC54O1xuXG4gICAgICAgICAgICB5ID0gdXV1ICogY3VydmUuc3RhcnRQb2ludC55O1xuICAgICAgICAgICAgeSArPSAzICogdXUgKiB0ICogY3VydmUuY29udHJvbDEueTtcbiAgICAgICAgICAgIHkgKz0gMyAqIHUgKiB0dCAqIGN1cnZlLmNvbnRyb2wyLnk7XG4gICAgICAgICAgICB5ICs9IHR0dCAqIGN1cnZlLmVuZFBvaW50Lnk7XG5cbiAgICAgICAgICAgIHdpZHRoID0gc3RhcnRXaWR0aCArIHR0dCAqIHdpZHRoRGVsdGE7XG4gICAgICAgICAgICB0aGlzLl9kcmF3UG9pbnQoeCwgeSwgd2lkdGgpO1xuICAgICAgICB9XG4gICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICAgICAgY3R4LmZpbGwoKTtcbiAgICB9O1xuXG4gICAgU2lnbmF0dXJlUGFkLnByb3RvdHlwZS5fc3Ryb2tlV2lkdGggPSBmdW5jdGlvbiAodmVsb2NpdHkpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KHRoaXMubWF4V2lkdGggLyAodmVsb2NpdHkgKyAxKSwgdGhpcy5taW5XaWR0aCk7XG4gICAgfTtcblxuXG4gICAgdmFyIFBvaW50ID0gZnVuY3Rpb24gKHgsIHksIHRpbWUpIHtcbiAgICAgICAgdGhpcy54ID0geDtcbiAgICAgICAgdGhpcy55ID0geTtcbiAgICAgICAgdGhpcy50aW1lID0gdGltZSB8fCBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB9O1xuXG4gICAgUG9pbnQucHJvdG90eXBlLnZlbG9jaXR5RnJvbSA9IGZ1bmN0aW9uIChzdGFydCkge1xuICAgICAgICByZXR1cm4gKHRoaXMudGltZSAhPT0gc3RhcnQudGltZSkgPyB0aGlzLmRpc3RhbmNlVG8oc3RhcnQpIC8gKHRoaXMudGltZSAtIHN0YXJ0LnRpbWUpIDogMTtcbiAgICB9O1xuXG4gICAgUG9pbnQucHJvdG90eXBlLmRpc3RhbmNlVG8gPSBmdW5jdGlvbiAoc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh0aGlzLnggLSBzdGFydC54LCAyKSArIE1hdGgucG93KHRoaXMueSAtIHN0YXJ0LnksIDIpKTtcbiAgICB9O1xuXG4gICAgdmFyIEJlemllciA9IGZ1bmN0aW9uIChzdGFydFBvaW50LCBjb250cm9sMSwgY29udHJvbDIsIGVuZFBvaW50KSB7XG4gICAgICAgIHRoaXMuc3RhcnRQb2ludCA9IHN0YXJ0UG9pbnQ7XG4gICAgICAgIHRoaXMuY29udHJvbDEgPSBjb250cm9sMTtcbiAgICAgICAgdGhpcy5jb250cm9sMiA9IGNvbnRyb2wyO1xuICAgICAgICB0aGlzLmVuZFBvaW50ID0gZW5kUG9pbnQ7XG4gICAgfTtcblxuICAgIC8vIFJldHVybnMgYXBwcm94aW1hdGVkIGxlbmd0aC5cbiAgICBCZXppZXIucHJvdG90eXBlLmxlbmd0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0ZXBzID0gMTAsXG4gICAgICAgICAgICBsZW5ndGggPSAwLFxuICAgICAgICAgICAgaSwgdCwgY3gsIGN5LCBweCwgcHksIHhkaWZmLCB5ZGlmZjtcblxuICAgICAgICBmb3IgKGkgPSAwOyBpIDw9IHN0ZXBzOyBpKyspIHtcbiAgICAgICAgICAgIHQgPSBpIC8gc3RlcHM7XG4gICAgICAgICAgICBjeCA9IHRoaXMuX3BvaW50KHQsIHRoaXMuc3RhcnRQb2ludC54LCB0aGlzLmNvbnRyb2wxLngsIHRoaXMuY29udHJvbDIueCwgdGhpcy5lbmRQb2ludC54KTtcbiAgICAgICAgICAgIGN5ID0gdGhpcy5fcG9pbnQodCwgdGhpcy5zdGFydFBvaW50LnksIHRoaXMuY29udHJvbDEueSwgdGhpcy5jb250cm9sMi55LCB0aGlzLmVuZFBvaW50LnkpO1xuICAgICAgICAgICAgaWYgKGkgPiAwKSB7XG4gICAgICAgICAgICAgICAgeGRpZmYgPSBjeCAtIHB4O1xuICAgICAgICAgICAgICAgIHlkaWZmID0gY3kgLSBweTtcbiAgICAgICAgICAgICAgICBsZW5ndGggKz0gTWF0aC5zcXJ0KHhkaWZmICogeGRpZmYgKyB5ZGlmZiAqIHlkaWZmKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHB4ID0gY3g7XG4gICAgICAgICAgICBweSA9IGN5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsZW5ndGg7XG4gICAgfTtcblxuICAgIEJlemllci5wcm90b3R5cGUuX3BvaW50ID0gZnVuY3Rpb24gKHQsIHN0YXJ0LCBjMSwgYzIsIGVuZCkge1xuICAgICAgICByZXR1cm4gICAgICAgICAgc3RhcnQgKiAoMS4wIC0gdCkgKiAoMS4wIC0gdCkgICogKDEuMCAtIHQpXG4gICAgICAgICAgICAgICArIDMuMCAqICBjMSAgICAqICgxLjAgLSB0KSAqICgxLjAgLSB0KSAgKiB0XG4gICAgICAgICAgICAgICArIDMuMCAqICBjMiAgICAqICgxLjAgLSB0KSAqIHQgICAgICAgICAgKiB0XG4gICAgICAgICAgICAgICArICAgICAgICBlbmQgICAqIHQgICAgICAgICAqIHQgICAgICAgICAgKiB0O1xuICAgIH07XG5cbiAgICByZXR1cm4gU2lnbmF0dXJlUGFkO1xufSkoZG9jdW1lbnQpO1xuXG5yZXR1cm4gU2lnbmF0dXJlUGFkO1xuXG59KSk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9zaWduYXR1cmVfcGFkL3NpZ25hdHVyZV9wYWQuanNcbiAqKiBtb2R1bGUgaWQgPSAxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgYWxpYXMgPSByZXF1aXJlKCcuL2FsaWFzL2FsaWFzJyk7XHJcbmV4cG9ydHMuYWxpYXMgPSBhbGlhcztcclxudmFyIGF1dG9zYXZlID0gcmVxdWlyZSgnLi9hdXRvc2F2ZS9hdXRvc2F2ZScpO1xyXG5leHBvcnRzLmF1dG9zYXZlID0gYXV0b3NhdmU7XHJcbnZhciBwb3BvdmVyID0gcmVxdWlyZSgnLi9wb3BvdmVyL3BvcG92ZXInKTtcclxuZXhwb3J0cy5wb3BvdmVyID0gcG9wb3ZlcjtcclxudmFyIHJlcXVpcmVkID0gcmVxdWlyZSgnLi9yZXF1aXJlZC9yZXF1aXJlZCcpO1xyXG5leHBvcnRzLnJlcXVpcmVkID0gcmVxdWlyZWQ7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5iZWhhdmlvcnMnO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgIGFsaWFzLm1vZHVsZU5hbWUsXHJcbiAgICBhdXRvc2F2ZS5tb2R1bGVOYW1lLFxyXG4gICAgcG9wb3Zlci5tb2R1bGVOYW1lLFxyXG4gICAgcmVxdWlyZWQubW9kdWxlTmFtZSxcclxuXSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVltVm9ZWFpwYjNKekxtMXZaSFZzWlM1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJbUpsYUdGMmFXOXljeTV0YjJSMWJHVXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJanRCUVVGQkxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUlc1RExFbEJRVmtzUzBGQlN5eFhRVUZOTEdWQlFXVXNRMEZCUXl4RFFVRkJPMEZCU3psQ0xHRkJRVXM3UVVGS1pDeEpRVUZaTEZGQlFWRXNWMEZCVFN4eFFrRkJjVUlzUTBGQlF5eERRVUZCTzBGQlNXaERMR2RDUVVGUk8wRkJTSGhDTEVsQlFWa3NUMEZCVHl4WFFVRk5MRzFDUVVGdFFpeERRVUZETEVOQlFVRTdRVUZIYmtJc1pVRkJUenRCUVVacVF5eEpRVUZaTEZGQlFWRXNWMEZCVFN4eFFrRkJjVUlzUTBGQlF5eERRVUZCTzBGQlJXSXNaMEpCUVZFN1FVRkZhRU1zYTBKQlFWVXNSMEZCVnl4cFFrRkJhVUlzUTBGQlF6dEJRVVZzUkN4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVTdTVUZETVVJc1MwRkJTeXhEUVVGRExGVkJRVlU3U1VGRGFFSXNVVUZCVVN4RFFVRkRMRlZCUVZVN1NVRkRia0lzVDBGQlR5eERRVUZETEZWQlFWVTdTVUZEYkVJc1VVRkJVU3hEUVVGRExGVkJRVlU3UTBGRGJrSXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9iZWhhdmlvcnMvYmVoYXZpb3JzLm1vZHVsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuYmVoYXZpb3JzLmFsaWFzJztcclxuZXhwb3J0cy5kaXJlY3RpdmVOYW1lID0gJ3JsQWxpYXMnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ0FsaWFzQ29udHJvbGxlcic7XHJcbnZhciBBbGlhc0NvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQWxpYXNDb250cm9sbGVyKCRzY29wZSwgJGF0dHJzLCAkcGFyc2UsICRpbnRlcnBvbGF0ZSkge1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMuJGF0dHJzID0gJGF0dHJzO1xyXG4gICAgICAgIHRoaXMuJHBhcnNlID0gJHBhcnNlO1xyXG4gICAgICAgIHRoaXMuJGludGVycG9sYXRlID0gJGludGVycG9sYXRlO1xyXG4gICAgICAgIHZhciBpbml0aWFsVmFsdWUgPSB0aGlzLmdldFZhbHVlKCk7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlQWxpYXMoaW5pdGlhbFZhbHVlKTtcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKHRoaXMuZ2V0VmFsdWUuYmluZCh0aGlzKSwgdGhpcy5yZXNvbHZlQWxpYXMuYmluZCh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBBbGlhc0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRoaXMuJGF0dHJzLnJsQWxpYXMuc3BsaXQoJyBhcyAnKTtcclxuICAgICAgICByZXR1cm4gdGhpcy4kcGFyc2UodGhpcy5leHByZXNzaW9uWzBdKSh0aGlzLiRzY29wZSk7XHJcbiAgICB9O1xyXG4gICAgQWxpYXNDb250cm9sbGVyLnByb3RvdHlwZS5yZXNvbHZlQWxpYXMgPSBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICB2YXIgYWxpYXMgPSB0aGlzLiRpbnRlcnBvbGF0ZSh0aGlzLmV4cHJlc3Npb25bMV0pKHRoaXMuJHNjb3BlKTtcclxuICAgICAgICBpZiAoYWxpYXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZVthbGlhc10gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQWxpYXNDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckYXR0cnMnLCAnJHBhcnNlJywgJyRpbnRlcnBvbGF0ZSddO1xyXG4gICAgcmV0dXJuIEFsaWFzQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5BbGlhc0NvbnRyb2xsZXIgPSBBbGlhc0NvbnRyb2xsZXI7XHJcbmZ1bmN0aW9uIGFsaWFzKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuYWxpYXMgPSBhbGlhcztcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5kaXJlY3RpdmUoZXhwb3J0cy5kaXJlY3RpdmVOYW1lLCBhbGlhcylcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIEFsaWFzQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVlXeHBZWE11YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SmhiR2xoY3k1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3haUVVGWkxFTkJRVU03UVVGRllpeEpRVUZaTEU5QlFVOHNWMEZCVFN4VFFVRlRMRU5CUVVNc1EwRkJRVHRCUVVWNFFpeHJRa0ZCVlN4SFFVRlhMSFZDUVVGMVFpeERRVUZETzBGQlF6ZERMSEZDUVVGaExFZEJRVmNzVTBGQlV5eERRVUZETzBGQlEyeERMSE5DUVVGakxFZEJRVmNzYVVKQlFXbENMRU5CUVVNN1FVRk5kRVE3U1VGRlF5eDVRa0ZCYjBJc1RVRkJjMElzUlVGRE9VSXNUVUZCZDBJc1JVRkRlRUlzVFVGQk5rSXNSVUZETjBJc1dVRkJlVU03VVVGSWFrTXNWMEZCVFN4SFFVRk9MRTFCUVUwc1EwRkJaMEk3VVVGRE9VSXNWMEZCVFN4SFFVRk9MRTFCUVUwc1EwRkJhMEk3VVVGRGVFSXNWMEZCVFN4SFFVRk9MRTFCUVUwc1EwRkJkVUk3VVVGRE4wSXNhVUpCUVZrc1IwRkJXaXhaUVVGWkxFTkJRVFpDTzFGQlEzQkVMRWxCUVVrc1dVRkJXU3hIUVVGUkxFbEJRVWtzUTBGQlF5eFJRVUZSTEVWQlFVVXNRMEZCUXp0UlFVTjRReXhKUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEZsQlFWa3NRMEZCUXl4RFFVRkRPMUZCUTJoRExFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNTVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0SlFVTjJSU3hEUVVGRE8wbEJTVThzYTBOQlFWRXNSMEZCYUVJN1VVRkRReXhKUVVGSkxFTkJRVU1zVlVGQlZTeEhRVUZITEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1QwRkJUeXhEUVVGRExFdEJRVXNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXp0UlFVTndSQ3hOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8wbEJRM0pFTEVOQlFVTTdTVUZGVHl4elEwRkJXU3hIUVVGd1FpeFZRVUZ4UWl4TFFVRlZPMUZCUXpsQ0xFbEJRVWtzUzBGQlN5eEhRVUZYTEVsQlFVa3NRMEZCUXl4WlFVRlpMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF6dFJRVU4yUlN4RlFVRkZMRU5CUVVNc1EwRkJReXhMUVVGTExFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTnVRaXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRXRCUVVzc1EwRkJRenRSUVVNMVFpeERRVUZETzBsQlEwWXNRMEZCUXp0SlFYUkNUU3gxUWtGQlR5eEhRVUZoTEVOQlFVTXNVVUZCVVN4RlFVRkZMRkZCUVZFc1JVRkJSU3hSUVVGUkxFVkJRVVVzWTBGQll5eERRVUZETEVOQlFVTTdTVUYxUWpORkxITkNRVUZETzBGQlFVUXNRMEZCUXl4QlFYaENSQ3hKUVhkQ1F6dEJRWGhDV1N4MVFrRkJaU3hyUWtGM1FqTkNMRU5CUVVFN1FVRkZSRHRKUVVORExFMUJRVTBzUTBGQlF6dFJRVU5PTEZGQlFWRXNSVUZCUlN4SFFVRkhPMUZCUTJJc1ZVRkJWU3hGUVVGRkxITkNRVUZqTzB0QlF6RkNMRU5CUVVNN1FVRkRTQ3hEUVVGRE8wRkJUR1VzWVVGQlN5eFJRVXR3UWl4RFFVRkJPMEZCUlVRc1QwRkJUeXhEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZMRVZCUVVVc1EwRkJRenRMUVVNMVFpeFRRVUZUTEVOQlFVTXNjVUpCUVdFc1JVRkJSU3hMUVVGTExFTkJRVU03UzBGREwwSXNWVUZCVlN4RFFVRkRMSE5DUVVGakxFVkJRVVVzWlVGQlpTeERRVUZETEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9iZWhhdmlvcnMvYWxpYXMvYWxpYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fcGFyZW50Q2hpbGQgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMucGFyZW50Q2hpbGRCZWhhdmlvcjtcclxudmFyIF9fb2JqZWN0VXRpbGl0eSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbnZhciBhdXRvc2F2ZV9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9hdXRvc2F2ZS9hdXRvc2F2ZS5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5iZWhhdmlvcnMuYXV0b3NhdmUnO1xyXG5leHBvcnRzLmRpcmVjdGl2ZU5hbWUgPSAncmxBdXRvc2F2ZSc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnQXV0b3NhdmVDb250cm9sbGVyJztcclxudmFyIEF1dG9zYXZlQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBdXRvc2F2ZUNvbnRyb2xsZXIoJHNjb3BlLCAkYXR0cnMsICRwYXJzZSwgJGVsZW1lbnQsICR0aW1lb3V0LCBhdXRvc2F2ZUZhY3RvcnksIHBhcmVudENoaWxkQmVoYXZpb3IsIG9iamVjdFV0aWxpdHkpIHtcclxuICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcclxuICAgICAgICB0aGlzLiRhdHRycyA9ICRhdHRycztcclxuICAgICAgICB0aGlzLiRwYXJzZSA9ICRwYXJzZTtcclxuICAgICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy4kdGltZW91dCA9ICR0aW1lb3V0O1xyXG4gICAgICAgIHRoaXMuYXV0b3NhdmVGYWN0b3J5ID0gYXV0b3NhdmVGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMucGFyZW50Q2hpbGRCZWhhdmlvciA9IHBhcmVudENoaWxkQmVoYXZpb3I7XHJcbiAgICAgICAgdGhpcy5vYmplY3RVdGlsaXR5ID0gb2JqZWN0VXRpbGl0eTtcclxuICAgIH1cclxuICAgIEF1dG9zYXZlQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMua2V5dXBMaXN0ZW5lciA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICBfdGhpcy4kZWxlbWVudC5vbigna2V5dXAnLCBmdW5jdGlvbiAoKSB7IF90aGlzLiRzY29wZS4kYXBwbHkoY2FsbGJhY2spOyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLiRlbGVtZW50Lm9mZigna2V5dXAnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBzYXZlRXhwcmVzc2lvbiA9IHRoaXMuJHBhcnNlKHRoaXMuJGF0dHJzLnNhdmUpO1xyXG4gICAgICAgIHZhciBzYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2F2ZUV4cHJlc3Npb24oX3RoaXMuJHNjb3BlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBkZWJvdW5jZSA9IHRoaXMuJHBhcnNlKHRoaXMuJGF0dHJzLmRlYm91bmNlRHVyYXRpb24pKHRoaXMuJHNjb3BlKTtcclxuICAgICAgICB0aGlzLmF1dG9zYXZlID0gdGhpcy5hdXRvc2F2ZUZhY3RvcnkuZ2V0SW5zdGFuY2Uoe1xyXG4gICAgICAgICAgICBzYXZlOiBzYXZlLFxyXG4gICAgICAgICAgICBjb250ZW50Rm9ybTogdGhpcy5mb3JtLFxyXG4gICAgICAgICAgICBkZWJvdW5jZUR1cmF0aW9uOiBkZWJvdW5jZSxcclxuICAgICAgICAgICAgdHJpZ2dlcnM6IHRoaXMuJGF0dHJzLnRyaWdnZXJzLFxyXG4gICAgICAgICAgICBzZXRDaGFuZ2VMaXN0ZW5lcjogdGhpcy5rZXl1cExpc3RlbmVyLFxyXG4gICAgICAgICAgICBzYXZlV2hlbkludmFsaWQ6IHRoaXMuJHBhcnNlKHRoaXMuJGF0dHJzLnNhdmVXaGVuSW52YWxpZCkodGhpcy4kc2NvcGUpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBiZWhhdmlvciA9IHtcclxuICAgICAgICAgICAgYXV0b3NhdmU6IHRoaXMuYXV0b3NhdmUuYXV0b3NhdmUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyByZWdpc3RlciBhdXRvc2F2ZSBiZWhhdmlvciBhbmQgYXNzaWduIHRoZSB2YWx1ZSBiYWNrIHRvIHRoZSBwYXJlbnRcclxuICAgICAgICB2YXIgY2hpbGRMaW5rID0gdGhpcy4kcGFyc2UodGhpcy4kYXR0cnMucmxBdXRvc2F2ZSkodGhpcy4kc2NvcGUpO1xyXG4gICAgICAgIHRoaXMucGFyZW50Q2hpbGRCZWhhdmlvci5yZWdpc3RlckNoaWxkQmVoYXZpb3IoY2hpbGRMaW5rLCBiZWhhdmlvcik7XHJcbiAgICB9O1xyXG4gICAgQXV0b3NhdmVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsXHJcbiAgICAgICAgJyRhdHRycycsXHJcbiAgICAgICAgJyRwYXJzZScsXHJcbiAgICAgICAgJyRlbGVtZW50JyxcclxuICAgICAgICAnJHRpbWVvdXQnLFxyXG4gICAgICAgIGF1dG9zYXZlX3NlcnZpY2VfMS5mYWN0b3J5TmFtZSxcclxuICAgICAgICBfX3BhcmVudENoaWxkLnNlcnZpY2VOYW1lLFxyXG4gICAgICAgIF9fb2JqZWN0VXRpbGl0eS5zZXJ2aWNlTmFtZV07XHJcbiAgICByZXR1cm4gQXV0b3NhdmVDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkF1dG9zYXZlQ29udHJvbGxlciA9IEF1dG9zYXZlQ29udHJvbGxlcjtcclxuZnVuY3Rpb24gYXV0b3NhdmUoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgcHJpb3JpdHk6IDEwMDAsXHJcbiAgICAgICAgcmVxdWlyZTogeyBmb3JtOiAnP2Zvcm0nIH0sXHJcbiAgICAgICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB0cnVlLFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmF1dG9zYXZlID0gYXV0b3NhdmU7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW1xyXG4gICAgYXV0b3NhdmVfc2VydmljZV8xLm1vZHVsZU5hbWUsXHJcbiAgICBfX29iamVjdFV0aWxpdHkubW9kdWxlTmFtZSxcclxuICAgIF9fcGFyZW50Q2hpbGQubW9kdWxlTmFtZSxcclxuXSlcclxuICAgIC5kaXJlY3RpdmUoZXhwb3J0cy5kaXJlY3RpdmVOYW1lLCBhdXRvc2F2ZSlcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIEF1dG9zYXZlQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVlYVjBiM05oZG1VdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUpoZFhSdmMyRjJaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdRVUZGWWl4SlFVRlpMRTlCUVU4c1YwRkJUU3hUUVVGVExFTkJRVU1zUTBGQlFUdEJRVVZ1UXl3MlEwRkJlVUlzT0VKQlFUaENMRU5CUVVNc1EwRkJRVHRCUVVWNFJDeEpRVUZQTEdGQlFXRXNSMEZCUnl4MVEwRkJVU3hEUVVGRExHMUNRVUZ0UWl4RFFVRkRPMEZCUTNCRUxFbEJRVThzWlVGQlpTeEhRVUZITEhWRFFVRlJMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJSWHBETEdsRFFVMVBMREJEUVVFd1F5eERRVUZETEVOQlFVRTdRVUZIZGtNc2EwSkJRVlVzUjBGQlZ5d3dRa0ZCTUVJc1EwRkJRenRCUVVOb1JDeHhRa0ZCWVN4SFFVRlhMRmxCUVZrc1EwRkJRenRCUVVOeVF5eHpRa0ZCWXl4SFFVRlhMRzlDUVVGdlFpeERRVUZETzBGQlkzcEVPMGxCWTBNc05FSkJRVzlDTEUxQlFYTkNMRVZCUXk5Q0xFMUJRVEpDTEVWQlF6TkNMRTFCUVRaQ0xFVkJRemRDTEZGQlFXdERMRVZCUTJ4RExGRkJRV2xETEVWQlEycERMR1ZCUVhkRExFVkJRM2hETEcxQ1FVRTRSQ3hGUVVNNVJDeGhRVUUyUXp0UlFWQndReXhYUVVGTkxFZEJRVTRzVFVGQlRTeERRVUZuUWp0UlFVTXZRaXhYUVVGTkxFZEJRVTRzVFVGQlRTeERRVUZ4UWp0UlFVTXpRaXhYUVVGTkxFZEJRVTRzVFVGQlRTeERRVUYxUWp0UlFVTTNRaXhoUVVGUkxFZEJRVklzVVVGQlVTeERRVUV3UWp0UlFVTnNReXhoUVVGUkxFZEJRVklzVVVGQlVTeERRVUY1UWp0UlFVTnFReXh2UWtGQlpTeEhRVUZtTEdWQlFXVXNRMEZCZVVJN1VVRkRlRU1zZDBKQlFXMUNMRWRCUVc1Q0xHMUNRVUZ0UWl4RFFVRXlRenRSUVVNNVJDeHJRa0ZCWVN4SFFVRmlMR0ZCUVdFc1EwRkJaME03U1VGQlJ5eERRVUZETzBsQlJUVkVMRzlEUVVGUExFZEJRVkE3VVVGQlFTeHBRa0VyUWtNN1VVRTVRa0VzU1VGQlNTeERRVUZETEdGQlFXRXNSMEZCUnl4VlFVRkRMRkZCUVRSQ08xbEJRMnBFTEV0QlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1JVRkJSU3hEUVVGRExFOUJRVThzUlVGQlJTeGpRVUZqTEV0QlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRla1VzVFVGQlRTeERRVUZETzJkQ1FVTk9MRXRCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zUjBGQlJ5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRPMWxCUXpWQ0xFTkJRVU1zUTBGQlF6dFJRVU5JTEVOQlFVTXNRMEZCUXp0UlFVVkdMRWxCUVVrc1kwRkJZeXhIUVVGblF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdVVUZEYUVZc1NVRkJTU3hKUVVGSkxFZEJRVzFETzFsQlF6RkRMRTFCUVUwc1EwRkJReXhqUVVGakxFTkJRVU1zUzBGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRPMUZCUTNCRExFTkJRVU1zUTBGQlF6dFJRVVZHTEVsQlFVa3NVVUZCVVN4SFFVRlhMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4blFrRkJaMElzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRenRSUVVVNVJTeEpRVUZKTEVOQlFVTXNVVUZCVVN4SFFVRkhMRWxCUVVrc1EwRkJReXhsUVVGbExFTkJRVU1zVjBGQlZ5eERRVUZETzFsQlEyaEVMRWxCUVVrc1JVRkJSU3hKUVVGSk8xbEJRMVlzVjBGQlZ5eEZRVUZGTEVsQlFVa3NRMEZCUXl4SlFVRkpPMWxCUTNSQ0xHZENRVUZuUWl4RlFVRkZMRkZCUVZFN1dVRkRNVUlzVVVGQlVTeEZRVUZGTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVVHRaUVVNNVFpeHBRa0ZCYVVJc1JVRkJSU3hKUVVGSkxFTkJRVU1zWVVGQllUdFpRVU55UXl4bFFVRmxMRVZCUVVVc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMR1ZCUVdVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTTdVMEZEZEVVc1EwRkJReXhEUVVGRE8xRkJSVWdzU1VGQlNTeFJRVUZSTEVkQlFYTkNPMWxCUTJwRExGRkJRVkVzUlVGQlJTeEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRkZCUVZFN1UwRkRhRU1zUTBGQlF6dFJRVVZHTEhGRlFVRnhSVHRSUVVOeVJTeEpRVUZKTEZOQlFWTXNSMEZCVVN4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETzFGQlEzUkZMRWxCUVVrc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4eFFrRkJjVUlzUTBGQlF5eFRRVUZUTEVWQlFVVXNVVUZCVVN4RFFVRkRMRU5CUVVNN1NVRkRja1VzUTBGQlF6dEpRV2hFVFN3d1FrRkJUeXhIUVVGaExFTkJRVU1zVVVGQlVUdFJRVU0xUWl4UlFVRlJPMUZCUTFJc1VVRkJVVHRSUVVOU0xGVkJRVlU3VVVGRFZpeFZRVUZWTzFGQlExWXNPRUpCUVcxQ08xRkJRMjVDTEdGQlFXRXNRMEZCUXl4WFFVRlhPMUZCUTNwQ0xHVkJRV1VzUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXp0SlFUQkRkRU1zZVVKQlFVTTdRVUZCUkN4RFFVRkRMRUZCZGtSRUxFbEJkVVJETzBGQmRrUlpMREJDUVVGclFpeHhRa0YxUkRsQ0xFTkJRVUU3UVVGRlJEdEpRVU5ETEZsQlFWa3NRMEZCUXp0SlFVTmlMRTFCUVUwc1EwRkJRenRSUVVOT0xGRkJRVkVzUlVGQlJTeEhRVUZITzFGQlEySXNVVUZCVVN4RlFVRkZMRWxCUVVrN1VVRkRaQ3hQUVVGUExFVkJRVVVzUlVGQlJTeEpRVUZKTEVWQlFVVXNUMEZCVHl4RlFVRkZPMUZCUXpGQ0xGVkJRVlVzUlVGQlJTeHpRa0ZCWXp0UlFVTXhRaXhuUWtGQlowSXNSVUZCUlN4SlFVRkpPMHRCUTNSQ0xFTkJRVU03UVVGRFNDeERRVUZETzBGQlZHVXNaMEpCUVZFc1YwRlRka0lzUTBGQlFUdEJRVVZFTEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc2EwSkJRVlVzUlVGQlJUdEpRVU14UWl3MlFrRkJhMEk3U1VGRGJFSXNaVUZCWlN4RFFVRkRMRlZCUVZVN1NVRkRNVUlzWVVGQllTeERRVUZETEZWQlFWVTdRMEZEZUVJc1EwRkJRenRMUVVOQkxGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMRkZCUVZFc1EwRkJRenRMUVVOc1F5eFZRVUZWTEVOQlFVTXNjMEpCUVdNc1JVRkJSU3hyUWtGQmEwSXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9iZWhhdmlvcnMvYXV0b3NhdmUvYXV0b3NhdmUuanNcbiAqKiBtb2R1bGUgaWQgPSAxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fbm90aWZpY2F0aW9uID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm5vdGlmaWNhdGlvbjtcclxudmFyIGF1dG9zYXZlQWN0aW9uX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL2F1dG9zYXZlQWN0aW9uL2F1dG9zYXZlQWN0aW9uLnNlcnZpY2UnKTtcclxudmFyIHRyaWdnZXJzID0gcmVxdWlyZSgnLi90cmlnZ2Vycy90cmlnZ2Vycy5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMudHJpZ2dlcnMgPSB0cmlnZ2VycztcclxudmFyIGZvcm1fc2VydmljZV8xID0gcmVxdWlyZSgnLi4vZm9ybS9mb3JtLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLnNlcnZpY2VzLmF1dG9zYXZlJztcclxuZXhwb3J0cy5mYWN0b3J5TmFtZSA9ICdhdXRvc2F2ZUZhY3RvcnknO1xyXG52YXIgQXV0b3NhdmVTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEF1dG9zYXZlU2VydmljZShub3RpZmljYXRpb24sIGF1dG9zYXZlU2VydmljZSwgb3B0aW9ucywgdHJpZ2dlclNlcnZpY2VGYWN0b3J5LCBmb3JtU2VydmljZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5ub3RpZmljYXRpb24gPSBub3RpZmljYXRpb247XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZVNlcnZpY2UgPSBhdXRvc2F2ZVNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5mb3JtU2VydmljZSA9IGZvcm1TZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuYXV0b3NhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhW19pIC0gMF0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBfdGhpcy52YWxpZGF0ZUFuZFNhdmUuYXBwbHkoX3RoaXMsIGRhdGEpO1xyXG4gICAgICAgICAgICBpZiAoXy5pc0Jvb2xlYW4ocmVzdWx0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmF1dG9zYXZlU2VydmljZS50cmlnZ2VyKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5jb250ZW50Rm9ybSA9IG9wdGlvbnMuY29udGVudEZvcm0gfHwgdGhpcy5udWxsRm9ybSgpO1xyXG4gICAgICAgIHRoaXMuc2F2ZSA9IG9wdGlvbnMuc2F2ZTtcclxuICAgICAgICB0aGlzLnNhdmVXaGVuSW52YWxpZCA9IG9wdGlvbnMuc2F2ZVdoZW5JbnZhbGlkO1xyXG4gICAgICAgIHRoaXMudHJpZ2dlclNlcnZpY2UgPSB0cmlnZ2VyU2VydmljZUZhY3RvcnkuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICB0aGlzLmNvbmZpZ3VyZVRyaWdnZXJzKG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMudHJpZ2dlclNlcnZpY2Uuc2V0VHJpZ2dlcnMob3B0aW9ucy50cmlnZ2VycywgdGhpcy5hdXRvc2F2ZSk7XHJcbiAgICB9XHJcbiAgICBBdXRvc2F2ZVNlcnZpY2UucHJvdG90eXBlLnZhbGlkYXRlQW5kU2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkYXRhID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgZGF0YVtfaSAtIDBdID0gYXJndW1lbnRzW19pXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY29udGVudEZvcm0uJHByaXN0aW5lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb250ZW50Rm9ybS4kdmFsaWQgfHwgdGhpcy5zYXZlV2hlbkludmFsaWQpIHtcclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnNhdmUuYXBwbHkodGhpcywgZGF0YSk7XHJcbiAgICAgICAgICAgIGlmICghXy5pc1VuZGVmaW5lZChwcm9taXNlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNvbnRlbnRGb3JtICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuY29udGVudEZvcm0uJHNldFByaXN0aW5lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbi53YXJuaW5nKHRoaXMuZm9ybVNlcnZpY2UuZ2V0QWdncmVnYXRlRXJyb3IodGhpcy5jb250ZW50Rm9ybSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEF1dG9zYXZlU2VydmljZS5wcm90b3R5cGUuY29uZmlndXJlVHJpZ2dlcnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMudHJpZ2dlclNlcnZpY2UudHJpZ2dlcnMub25DaGFuZ2UuY29uZmlndXJlKHtcclxuICAgICAgICAgICAgZm9ybTogb3B0aW9ucy5jb250ZW50Rm9ybSxcclxuICAgICAgICAgICAgc2V0Q2hhbmdlTGlzdGVuZXI6IG9wdGlvbnMuc2V0Q2hhbmdlTGlzdGVuZXIsXHJcbiAgICAgICAgICAgIGRlYm91bmNlRHVyYXRpb246IG9wdGlvbnMuZGVib3VuY2VEdXJhdGlvbixcclxuICAgICAgICAgICAgc2F2ZVdoZW5JbnZhbGlkOiBvcHRpb25zLnNhdmVXaGVuSW52YWxpZCxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBBdXRvc2F2ZVNlcnZpY2UucHJvdG90eXBlLm51bGxGb3JtID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICRwcmlzdGluZTogZmFsc2UsXHJcbiAgICAgICAgICAgICRkaXJ0eTogdHJ1ZSxcclxuICAgICAgICAgICAgJHZhbGlkOiB0cnVlLFxyXG4gICAgICAgICAgICAkc2V0UHJpc3RpbmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHJldHVybiBBdXRvc2F2ZVNlcnZpY2U7XHJcbn0oKSk7XHJcbmF1dG9zYXZlU2VydmljZUZhY3RvcnkuJGluamVjdCA9IFtfX25vdGlmaWNhdGlvbi5zZXJ2aWNlTmFtZSwgYXV0b3NhdmVBY3Rpb25fc2VydmljZV8xLnNlcnZpY2VOYW1lLCB0cmlnZ2Vycy5mYWN0b3J5TmFtZSwgZm9ybV9zZXJ2aWNlXzEuc2VydmljZU5hbWVdO1xyXG5mdW5jdGlvbiBhdXRvc2F2ZVNlcnZpY2VGYWN0b3J5KG5vdGlmaWNhdGlvbiwgYXV0b3NhdmVTZXJ2aWNlLCB0cmlnZ2VyU2VydmljZUZhY3RvcnksIGZvcm1TZXJ2aWNlKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldEluc3RhbmNlOiBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEF1dG9zYXZlU2VydmljZShub3RpZmljYXRpb24sIGF1dG9zYXZlU2VydmljZSwgb3B0aW9ucywgdHJpZ2dlclNlcnZpY2VGYWN0b3J5LCBmb3JtU2VydmljZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtfX25vdGlmaWNhdGlvbi5tb2R1bGVOYW1lLCBhdXRvc2F2ZUFjdGlvbl9zZXJ2aWNlXzEubW9kdWxlTmFtZSwgdHJpZ2dlcnMubW9kdWxlTmFtZSwgZm9ybV9zZXJ2aWNlXzEubW9kdWxlTmFtZV0pXHJcbiAgICAuZmFjdG9yeShleHBvcnRzLmZhY3RvcnlOYW1lLCBhdXRvc2F2ZVNlcnZpY2VGYWN0b3J5KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWVhWMGIzTmhkbVV1YzJWeWRtbGpaUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkltRjFkRzl6WVhabExuTmxjblpwWTJVdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzV1VGQldTeERRVUZETzBGQlJXSXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGRGJrTXNTVUZCV1N4RFFVRkRMRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGRk5VSXNOa05CUVhsQ0xEaENRVUU0UWl4RFFVRkRMRU5CUVVFN1FVRkRlRVFzU1VGQlR5eGpRVUZqTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhaUVVGWkxFTkJRVU03UVVGRk9VTXNkVU5CU1U4c01FTkJRVEJETEVOQlFVTXNRMEZCUVR0QlFVTnNSQ3hKUVVGWkxGRkJRVkVzVjBGQlRTdzJRa0ZCTmtJc1EwRkJReXhEUVVGQk8wRkJTUzlETEdkQ1FVRlJPMEZCU0dwQ0xEWkNRVUYxUml4elFrRkJjMElzUTBGQlF5eERRVUZCTzBGQlMyNUhMR3RDUVVGVkxFZEJRVmNzZVVKQlFYbENMRU5CUVVNN1FVRkRMME1zYlVKQlFWY3NSMEZCVnl4cFFrRkJhVUlzUTBGQlF6dEJRV2xDYmtRN1NVRk5ReXg1UWtGQmIwSXNXVUZCYVVRc1JVRkRla1FzWlVGQmRVTXNSVUZETDBNc1QwRkJaME1zUlVGRGFFTXNjVUpCUVhORUxFVkJRemxETEZkQlFYbENPMUZCVm5SRExHbENRWGRGUXp0UlFXeEZiMElzYVVKQlFWa3NSMEZCV2l4WlFVRlpMRU5CUVhGRE8xRkJRM3BFTEc5Q1FVRmxMRWRCUVdZc1pVRkJaU3hEUVVGM1FqdFJRVWQyUXl4blFrRkJWeXhIUVVGWUxGZEJRVmNzUTBGQll6dFJRVlZ5UXl4aFFVRlJMRWRCUVd0RE8xbEJRVU1zWTBGQll6dHBRa0ZCWkN4WFFVRmpMRU5CUVdRc2MwSkJRV01zUTBGQlpDeEpRVUZqTzJkQ1FVRmtMRFpDUVVGak96dFpRVU40UkN4SlFVRkpMRTFCUVUwc1IwRkJjVU1zUzBGQlNTeERRVUZETEdWQlFXVXNUMEZCY0VJc1MwRkJTU3hGUVVGdlFpeEpRVUZKTEVOQlFVTXNRMEZCUXp0WlFVTTNSU3hGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dG5Ra0ZEZWtJc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF6dFpRVU5tTEVOQlFVTTdXVUZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRuUWtGRFVDeExRVUZKTEVOQlFVTXNaVUZCWlN4RFFVRkRMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF6dG5Ra0ZEY2tNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF6dFpRVU5pTEVOQlFVTTdVVUZEUml4RFFVRkRMRU5CUVVFN1VVRnFRa0VzU1VGQlNTeERRVUZETEZkQlFWY3NSMEZCUnl4UFFVRlBMRU5CUVVNc1YwRkJWeXhKUVVGSkxFbEJRVWtzUTBGQlF5eFJRVUZSTEVWQlFVVXNRMEZCUXp0UlFVTXhSQ3hKUVVGSkxFTkJRVU1zU1VGQlNTeEhRVUZITEU5QlFVOHNRMEZCUXl4SlFVRkpMRU5CUVVNN1VVRkRla0lzU1VGQlNTeERRVUZETEdWQlFXVXNSMEZCUnl4UFFVRlBMRU5CUVVNc1pVRkJaU3hEUVVGRE8xRkJSUzlETEVsQlFVa3NRMEZCUXl4alFVRmpMRWRCUVVjc2NVSkJRWEZDTEVOQlFVTXNWMEZCVnl4RlFVRkZMRU5CUVVNN1VVRkRNVVFzU1VGQlNTeERRVUZETEdsQ1FVRnBRaXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETzFGQlEyaERMRWxCUVVrc1EwRkJReXhqUVVGakxFTkJRVU1zVjBGQlZ5eERRVUZETEU5QlFVOHNRMEZCUXl4UlFVRlJMRVZCUVVVc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzBsQlEyeEZMRU5CUVVNN1NVRlpSQ3g1UTBGQlpTeEhRVUZtTzFGQlFVRXNhVUpCY1VKRE8xRkJja0psTEdOQlFXTTdZVUZCWkN4WFFVRmpMRU5CUVdRc2MwSkJRV01zUTBGQlpDeEpRVUZqTzFsQlFXUXNOa0pCUVdNN08xRkJRemRDTEVWQlFVVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhYUVVGWExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTm9ReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETzFGQlEySXNRMEZCUXp0UlFVVkVMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNUVUZCVFN4SlFVRkpMRWxCUVVrc1EwRkJReXhsUVVGbExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEzSkVMRWxCUVVrc1QwRkJUeXhIUVVFeVFpeEpRVUZKTEVOQlFVTXNTVUZCU1N4UFFVRlVMRWxCUVVrc1JVRkJVeXhKUVVGSkxFTkJRVU1zUTBGQlF6dFpRVVY2UkN4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFhRVUZYTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU0zUWl4TlFVRk5MRU5CUVVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUTBGQlF6dHZRa0ZEYmtJc1JVRkJSU3hEUVVGRExFTkJRVU1zUzBGQlNTeERRVUZETEZkQlFWY3NTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8zZENRVU01UWl4TFFVRkpMRU5CUVVNc1YwRkJWeXhEUVVGRExGbEJRVmtzUlVGQlJTeERRVUZETzI5Q1FVTnFReXhEUVVGRE8yZENRVU5HTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTBvc1EwRkJRenRaUVVWRUxFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTTdVVUZEWWl4RFFVRkRPMUZCUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03V1VGRFVDeEpRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRMRTlCUVU4c1EwRkJReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEdsQ1FVRnBRaXhEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTJoR0xFMUJRVTBzUTBGQlF5eExRVUZMTEVOQlFVTTdVVUZEWkN4RFFVRkRPMGxCUTBZc1EwRkJRenRKUVVWUExESkRRVUZwUWl4SFFVRjZRaXhWUVVFd1FpeFBRVUZuUXp0UlFVTjZSQ3hKUVVGSkxFTkJRVU1zWTBGQll5eERRVUZETEZGQlFWRXNRMEZCUXl4UlFVRlJMRU5CUVVNc1UwRkJVeXhEUVVGRE8xbEJReTlETEVsQlFVa3NSVUZCUlN4UFFVRlBMRU5CUVVNc1YwRkJWenRaUVVONlFpeHBRa0ZCYVVJc1JVRkJSU3hQUVVGUExFTkJRVU1zYVVKQlFXbENPMWxCUXpWRExHZENRVUZuUWl4RlFVRkZMRTlCUVU4c1EwRkJReXhuUWtGQlowSTdXVUZETVVNc1pVRkJaU3hGUVVGRkxFOUJRVThzUTBGQlF5eGxRVUZsTzFOQlEzaERMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGRlR5eHJRMEZCVVN4SFFVRm9RanRSUVVORExFMUJRVTBzUTBGQlRUdFpRVU5ZTEZOQlFWTXNSVUZCUlN4TFFVRkxPMWxCUTJoQ0xFMUJRVTBzUlVGQlJTeEpRVUZKTzFsQlExb3NUVUZCVFN4RlFVRkZMRWxCUVVrN1dVRkRXaXhaUVVGWk8yZENRVU5ZTEUxQlFVMHNRMEZCUXp0WlFVTlNMRU5CUVVNN1UwRkRSQ3hEUVVGRE8wbEJRMGdzUTBGQlF6dEpRVU5HTEhOQ1FVRkRPMEZCUVVRc1EwRkJReXhCUVhoRlJDeEpRWGRGUXp0QlFVMUVMSE5DUVVGelFpeERRVUZETEU5QlFVOHNSMEZCUnl4RFFVRkRMR05CUVdNc1EwRkJReXhYUVVGWExFVkJRVVVzYjBOQlFYbENMRVZCUVVVc1VVRkJVU3hEUVVGRExGZEJRVmNzUlVGQlJTd3dRa0ZCWlN4RFFVRkRMRU5CUVVNN1FVRkRhRWtzWjBOQlFXZERMRmxCUVdsRUxFVkJRM2hGTEdWQlFYVkRMRVZCUTNaRExIRkNRVUZ6UkN4RlFVTjBSQ3hYUVVGNVFqdEpRVU5xUXl4WlFVRlpMRU5CUVVNN1NVRkRZaXhOUVVGTkxFTkJRVU03VVVGRFRpeFhRVUZYTEZsQlFVTXNUMEZCWjBNN1dVRkRNME1zVFVGQlRTeERRVUZETEVsQlFVa3NaVUZCWlN4RFFVRkRMRmxCUVZrc1JVRkJSU3hsUVVGbExFVkJRVVVzVDBGQlR5eEZRVUZGTEhGQ1FVRnhRaXhGUVVGRkxGZEJRVmNzUTBGQlF5eERRVUZETzFGQlEzaEhMRU5CUVVNN1MwRkRSQ3hEUVVGRE8wRkJRMGdzUTBGQlF6dEJRVVZFTEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc2EwSkJRVlVzUlVGQlJTeERRVUZETEdOQlFXTXNRMEZCUXl4VlFVRlZMRVZCUVVVc2JVTkJRWGRDTEVWQlFVVXNVVUZCVVN4RFFVRkRMRlZCUVZVc1JVRkJSU3g1UWtGQlZTeERRVUZETEVOQlFVTTdTMEZEYUVnc1QwRkJUeXhEUVVGRExHMUNRVUZYTEVWQlFVVXNjMEpCUVhOQ0xFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL3NlcnZpY2VzL2F1dG9zYXZlL2F1dG9zYXZlLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiKGZ1bmN0aW9uKCkgeyBtb2R1bGUuZXhwb3J0cyA9IHRoaXNbXCJfXCJdOyB9KCkpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJfXCJcbiAqKiBtb2R1bGUgaWQgPSAxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgbmcgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51dGlsaXRpZXMuc2VydmljZXMuYXV0b3NhdmVBY3Rpb24nO1xyXG5leHBvcnRzLnNlcnZpY2VOYW1lID0gJ2F1dG9zYXZlQWN0aW9uJztcclxudmFyIEF1dG9zYXZlQWN0aW9uU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBdXRvc2F2ZUFjdGlvblNlcnZpY2UoJHRpbWVvdXQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuJHRpbWVvdXQgPSAkdGltZW91dDtcclxuICAgICAgICB0aGlzLmNvbXBsZXRlTWVzc2FnZUR1cmF0aW9uID0gMTAwMDtcclxuICAgICAgICB0aGlzLmF1dG9zYXZlU3VjY2Vzc2Z1bCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5yZXNvbHZlQXV0b3NhdmUoZGF0YSwgdHJ1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmF1dG9zYXZlRmFpbGVkID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnJlc29sdmVBdXRvc2F2ZShkYXRhLCBmYWxzZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLnJlc29sdmVBdXRvc2F2ZSA9IGZ1bmN0aW9uIChkYXRhLCBzdWNjZXNzKSB7XHJcbiAgICAgICAgICAgIF90aGlzLl9zYXZpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgX3RoaXMuX2NvbXBsZXRlID0gdHJ1ZTtcclxuICAgICAgICAgICAgX3RoaXMuX3N1Y2Nlc3NmdWwgPSBzdWNjZXNzO1xyXG4gICAgICAgICAgICBfdGhpcy4kdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5fY29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSwgX3RoaXMuY29tcGxldGVNZXNzYWdlRHVyYXRpb24pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEF1dG9zYXZlQWN0aW9uU2VydmljZS5wcm90b3R5cGUsIFwic2F2aW5nXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NhdmluZztcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBdXRvc2F2ZUFjdGlvblNlcnZpY2UucHJvdG90eXBlLCBcImNvbXBsZXRlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBsZXRlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEF1dG9zYXZlQWN0aW9uU2VydmljZS5wcm90b3R5cGUsIFwic3VjY2Vzc2Z1bFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdWNjZXNzZnVsO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQXV0b3NhdmVBY3Rpb25TZXJ2aWNlLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKHByb21pc2UpIHtcclxuICAgICAgICB0aGlzLl9zYXZpbmcgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4odGhpcy5hdXRvc2F2ZVN1Y2Nlc3NmdWwpXHJcbiAgICAgICAgICAgIC5jYXRjaCh0aGlzLmF1dG9zYXZlRmFpbGVkKTtcclxuICAgIH07XHJcbiAgICBBdXRvc2F2ZUFjdGlvblNlcnZpY2UuJGluamVjdCA9IFsnJHRpbWVvdXQnXTtcclxuICAgIHJldHVybiBBdXRvc2F2ZUFjdGlvblNlcnZpY2U7XHJcbn0oKSk7XHJcbm5nLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLnNlcnZpY2UoZXhwb3J0cy5zZXJ2aWNlTmFtZSwgQXV0b3NhdmVBY3Rpb25TZXJ2aWNlKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWVhWMGIzTmhkbVZCWTNScGIyNHVjMlZ5ZG1salpTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW1GMWRHOXpZWFpsUVdOMGFXOXVMbk5sY25acFkyVXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeEZRVUZGTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkZia0lzYTBKQlFWVXNSMEZCVnl4elEwRkJjME1zUTBGQlF6dEJRVU0xUkN4dFFrRkJWeXhIUVVGWExHZENRVUZuUWl4RFFVRkRPMEZCVTJ4RU8wbEJSVU1zSzBKQlFXOUNMRkZCUVRSQ08xRkJSbXBFTEdsQ1FTdERRenRSUVRkRGIwSXNZVUZCVVN4SFFVRlNMRkZCUVZFc1EwRkJiMEk3VVVGRmVFTXNORUpCUVhWQ0xFZEJRVmNzU1VGQlNTeERRVUZETzFGQmQwSjJReXgxUWtGQmEwSXNSMEZCZVVJc1ZVRkJReXhKUVVGVE8xbEJRelZFTEUxQlFVMHNRMEZCUXl4TFFVRkpMRU5CUVVNc1pVRkJaU3hEUVVGRExFbEJRVWtzUlVGQlJTeEpRVUZKTEVOQlFVTXNRMEZCUXp0UlFVTjZReXhEUVVGRExFTkJRVUU3VVVGRlR5eHRRa0ZCWXl4SFFVRjVRaXhWUVVGRExFbEJRVk03V1VGRGVFUXNUVUZCVFN4RFFVRkRMRXRCUVVrc1EwRkJReXhsUVVGbExFTkJRVU1zU1VGQlNTeEZRVUZGTEV0QlFVc3NRMEZCUXl4RFFVRkRPMUZCUXpGRExFTkJRVU1zUTBGQlFUdFJRVVZQTEc5Q1FVRmxMRWRCUVRKRExGVkJRVU1zU1VGQlV5eEZRVUZGTEU5QlFXZENPMWxCUXpkR0xFdEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NTMEZCU3l4RFFVRkRPMWxCUTNKQ0xFdEJRVWtzUTBGQlF5eFRRVUZUTEVkQlFVY3NTVUZCU1N4RFFVRkRPMWxCUTNSQ0xFdEJRVWtzUTBGQlF5eFhRVUZYTEVkQlFVY3NUMEZCVHl4RFFVRkRPMWxCUlROQ0xFdEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTTdaMEpCUTJJc1MwRkJTU3hEUVVGRExGTkJRVk1zUjBGQlJ5eExRVUZMTEVOQlFVTTdXVUZEZUVJc1EwRkJReXhGUVVGRkxFdEJRVWtzUTBGQlF5eDFRa0ZCZFVJc1EwRkJReXhEUVVGRE8xbEJSV3BETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNN1VVRkRZaXhEUVVGRExFTkJRVUU3U1VFMVEydEVMRU5CUVVNN1NVRlJjRVFzYzBKQlFVa3NlVU5CUVUwN1lVRkJWanRaUVVORExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRPMUZCUTNKQ0xFTkJRVU03T3p0UFFVRkJPMGxCUlVRc2MwSkJRVWtzTWtOQlFWRTdZVUZCV2p0WlFVTkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETzFGQlEzWkNMRU5CUVVNN096dFBRVUZCTzBsQlJVUXNjMEpCUVVrc05rTkJRVlU3WVVGQlpEdFpRVU5ETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1YwRkJWeXhEUVVGRE8xRkJRM3BDTEVOQlFVTTdPenRQUVVGQk8wbEJSVVFzZFVOQlFVOHNSMEZCVUN4VlFVRlJMRTlCUVhsQ08xRkJRMmhETEVsQlFVa3NRMEZCUXl4UFFVRlBMRWRCUVVjc1NVRkJTU3hEUVVGRE8xRkJRM0JDTEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eHJRa0ZCYTBJc1EwRkJRenRoUVVONFF5eExRVUZMTEVOQlFVTXNTVUZCU1N4RFFVRkRMR05CUVdNc1EwRkJReXhEUVVGRE8wbEJRMmhETEVOQlFVTTdTVUY2UWswc05rSkJRVThzUjBGQllTeERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRPMGxCT0VONlF5dzBRa0ZCUXp0QlFVRkVMRU5CUVVNc1FVRXZRMFFzU1VFclEwTTdRVUZGUkN4RlFVRkZMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVXNSVUZCUlN4RFFVRkRPMHRCUTNaQ0xFOUJRVThzUTBGQlF5eHRRa0ZCVnl4RlFVRkZMSEZDUVVGeFFpeERRVUZETEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9zZXJ2aWNlcy9hdXRvc2F2ZUFjdGlvbi9hdXRvc2F2ZUFjdGlvbi5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgb25DaGFuZ2VUcmlnZ2VyXzEgPSByZXF1aXJlKCcuL29uQ2hhbmdlVHJpZ2dlcicpO1xyXG52YXIgdHJpZ2dlcl8xID0gcmVxdWlyZSgnLi90cmlnZ2VyJyk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoJy4vb25DaGFuZ2VUcmlnZ2VyJykpO1xyXG5fX2V4cG9ydChyZXF1aXJlKCcuL3RyaWdnZXInKSk7XHJcbmV4cG9ydHMuZGVmYXVsdFRyaWdnZXJzID0gJ29uQ2hhbmdlJztcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLnNlcnZpY2VzLmF1dG9zYXZlLnRyaWdnZXJzJztcclxuZXhwb3J0cy5mYWN0b3J5TmFtZSA9ICdhdXRvc2F2ZVRyaWdnZXJzJztcclxudmFyIFRyaWdnZXJTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRyaWdnZXJTZXJ2aWNlKCRyb290U2NvcGUsICR0aW1lb3V0KSB7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VycyA9IHtcclxuICAgICAgICAgICAgb25DaGFuZ2U6IG5ldyBvbkNoYW5nZVRyaWdnZXJfMS5PbkNoYW5nZVRyaWdnZXIoJHJvb3RTY29wZSwgJHRpbWVvdXQpLFxyXG4gICAgICAgICAgICBub25lOiBuZXcgdHJpZ2dlcl8xLlRyaWdnZXIoJ25vbmUnKSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgVHJpZ2dlclNlcnZpY2UucHJvdG90eXBlLnNldFRyaWdnZXJzID0gZnVuY3Rpb24gKHRyaWdnZXJTdHJpbmcsIGF1dG9zYXZlKSB7XHJcbiAgICAgICAgaWYgKHRyaWdnZXJTdHJpbmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0cmlnZ2VyU3RyaW5nID0gZXhwb3J0cy5kZWZhdWx0VHJpZ2dlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF8uZWFjaCh0aGlzLnRyaWdnZXJzLCBmdW5jdGlvbiAodHJpZ2dlcikge1xyXG4gICAgICAgICAgICBpZiAodHJpZ2dlci5oYXNNYXRjaCh0cmlnZ2VyU3RyaW5nKSkge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlci5zZXRUcmlnZ2VyKGF1dG9zYXZlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBUcmlnZ2VyU2VydmljZTtcclxufSgpKTtcclxudHJpZ2dlclNlcnZpY2VGYWN0b3J5LiRpbmplY3QgPSBbJyRyb290U2NvcGUnLCAnJHRpbWVvdXQnXTtcclxuZnVuY3Rpb24gdHJpZ2dlclNlcnZpY2VGYWN0b3J5KCRyb290U2NvcGUsICR0aW1lb3V0KSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldEluc3RhbmNlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHJpZ2dlclNlcnZpY2UoJHJvb3RTY29wZSwgJHRpbWVvdXQpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuZmFjdG9yeShleHBvcnRzLmZhY3RvcnlOYW1lLCB0cmlnZ2VyU2VydmljZUZhY3RvcnkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lkSEpwWjJkbGNuTXVjMlZ5ZG1salpTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW5SeWFXZG5aWEp6TG5ObGNuWnBZMlV1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNXVUZCV1N4RFFVRkRPenM3TzBGQlJXSXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGRGJrTXNTVUZCV1N4RFFVRkRMRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGRk5VSXNaME5CUVd0RUxHMUNRVUZ0UWl4RFFVRkRMRU5CUVVFN1FVRkRkRVVzZDBKQlFXdERMRmRCUVZjc1EwRkJReXhEUVVGQk8wRkJSVGxETEdsQ1FVRmpMRzFDUVVGdFFpeERRVUZETEVWQlFVRTdRVUZEYkVNc2FVSkJRV01zVjBGQlZ5eERRVUZETEVWQlFVRTdRVUZGWml4MVFrRkJaU3hIUVVGWExGVkJRVlVzUTBGQlF6dEJRVVZ5UXl4clFrRkJWU3hIUVVGWExHdERRVUZyUXl4RFFVRkRPMEZCUTNoRUxHMUNRVUZYTEVkQlFWY3NhMEpCUVd0Q0xFTkJRVU03UVVGdlFuQkVPMGxCUjBNc2QwSkJRVmtzVlVGQmNVTXNSVUZCUlN4UlFVRnBRenRSUVVOdVJpeEpRVUZKTEVOQlFVTXNVVUZCVVN4SFFVRkhPMWxCUTJZc1VVRkJVU3hGUVVGRkxFbEJRVWtzYVVOQlFXVXNRMEZCUXl4VlFVRlZMRVZCUVVVc1VVRkJVU3hEUVVGRE8xbEJRMjVFTEVsQlFVa3NSVUZCUlN4SlFVRkpMR2xDUVVGUExFTkJRVThzVFVGQlRTeERRVUZETzFOQlF5OUNMRU5CUVVNN1NVRkRTQ3hEUVVGRE8wbEJSVVFzYjBOQlFWY3NSMEZCV0N4VlFVRlpMR0ZCUVhGQ0xFVkJRVVVzVVVGQmIwSTdVVUZEZEVRc1JVRkJSU3hEUVVGRExFTkJRVU1zWVVGQllTeEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRNMElzWVVGQllTeEhRVUZITEhWQ1FVRmxMRU5CUVVNN1VVRkRha01zUTBGQlF6dFJRVVZFTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVUwc1NVRkJTU3hEUVVGRExGRkJRVkVzUlVGQlJTeFZRVUZETEU5QlFYTkNPMWxCUTJwRUxFVkJRVVVzUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4UlFVRlJMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTnlReXhQUVVGUExFTkJRVU1zVlVGQlZTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRPMWxCUXpsQ0xFTkJRVU03VVVGRFJpeERRVUZETEVOQlFVTXNRMEZCUXp0SlFVTktMRU5CUVVNN1NVRkRSaXh4UWtGQlF6dEJRVUZFTEVOQlFVTXNRVUZ5UWtRc1NVRnhRa003UVVGTlJDeHhRa0ZCY1VJc1EwRkJReXhQUVVGUExFZEJRVWNzUTBGQlF5eFpRVUZaTEVWQlFVVXNWVUZCVlN4RFFVRkRMRU5CUVVNN1FVRkRNMFFzSzBKQlFTdENMRlZCUVhGRExFVkJRVVVzVVVGQmFVTTdTVUZEZEVjc1RVRkJUU3hEUVVGRE8xRkJRMDRzVjBGQlZ6dFpRVU5XTEUxQlFVMHNRMEZCUXl4SlFVRkpMR05CUVdNc1EwRkJReXhWUVVGVkxFVkJRVVVzVVVGQlVTeERRVUZETEVOQlFVTTdVVUZEYWtRc1EwRkJRenRMUVVORUxFTkJRVU03UVVGRFNDeERRVUZETzBGQlJVUXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVWQlFVVXNRMEZCUXp0TFFVTTFRaXhQUVVGUExFTkJRVU1zYlVKQlFWY3NSVUZCUlN4eFFrRkJjVUlzUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2Uvc2VydmljZXMvYXV0b3NhdmUvdHJpZ2dlcnMvdHJpZ2dlcnMuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0cmlnZ2VyXzEgPSByZXF1aXJlKCcuL3RyaWdnZXInKTtcclxudmFyIE9uQ2hhbmdlVHJpZ2dlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoT25DaGFuZ2VUcmlnZ2VyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gT25DaGFuZ2VUcmlnZ2VyKCRyb290U2NvcGUsICR0aW1lb3V0KSB7XHJcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgJ29uQ2hhbmdlJyk7XHJcbiAgICAgICAgdGhpcy4kcm9vdFNjb3BlID0gJHJvb3RTY29wZTtcclxuICAgICAgICB0aGlzLiR0aW1lb3V0ID0gJHRpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy5kZWJvdW5jZUR1cmF0aW9uID0gMTAwMDtcclxuICAgIH1cclxuICAgIE9uQ2hhbmdlVHJpZ2dlci5wcm90b3R5cGUuc2V0VHJpZ2dlciA9IGZ1bmN0aW9uIChhdXRvc2F2ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQodGhpcy5zZXR0aW5ncykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLiRyb290U2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNldHRpbmdzLmZvcm0gIT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgPyBfdGhpcy5zZXR0aW5ncy5mb3JtLiRkaXJ0eVxyXG4gICAgICAgICAgICAgICAgOiBmYWxzZTtcclxuICAgICAgICB9LCBmdW5jdGlvbiAoKSB7IF90aGlzLnRyaWdnZXJTYXZlQWN0aW9uKGF1dG9zYXZlKTsgfSk7XHJcbiAgICAgICAgdGhpcy4kcm9vdFNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5zZXR0aW5ncy5mb3JtICE9IG51bGxcclxuICAgICAgICAgICAgICAgID8gX3RoaXMuc2V0dGluZ3MuZm9ybS4kdmFsaWRcclxuICAgICAgICAgICAgICAgIDogZmFsc2U7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkgeyBfdGhpcy50cmlnZ2VyU2F2ZUFjdGlvbihhdXRvc2F2ZSk7IH0pO1xyXG4gICAgfTtcclxuICAgIE9uQ2hhbmdlVHJpZ2dlci5wcm90b3R5cGUudHJpZ2dlclNhdmVBY3Rpb24gPSBmdW5jdGlvbiAoYXV0b3NhdmUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmZvcm0uJGRpcnR5ICYmICh0aGlzLnNldHRpbmdzLmZvcm0uJHZhbGlkIHx8IHRoaXMuc2V0dGluZ3Muc2F2ZVdoZW5JbnZhbGlkKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFRpbWVyKGF1dG9zYXZlKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckxpc3RlbmVyID0gdGhpcy5zZXRMaXN0ZW5lcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUaW1lcihhdXRvc2F2ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBPbkNoYW5nZVRyaWdnZXIucHJvdG90eXBlLnNldFRpbWVyID0gZnVuY3Rpb24gKGF1dG9zYXZlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy50aW1lciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHRpbWVvdXQuY2FuY2VsKHRoaXMudGltZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnRpbWVyID0gdGhpcy4kdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNsZWFyTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgYXV0b3NhdmUoKTtcclxuICAgICAgICB9LCB0aGlzLmRlYm91bmNlRHVyYXRpb24pO1xyXG4gICAgfTtcclxuICAgIE9uQ2hhbmdlVHJpZ2dlci5wcm90b3R5cGUuaW5pdExpc3RlbmVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnNldExpc3RlbmVyID0gdGhpcy5zZXR0aW5ncy5zZXRDaGFuZ2VMaXN0ZW5lciB8fCB0aGlzLm51bGxTZXRMaXN0ZW5lcjtcclxuICAgICAgICB0aGlzLmNsZWFyTGlzdGVuZXIgPSB0aGlzLm51bGxDbGVhckxpc3RlbmVyO1xyXG4gICAgfTtcclxuICAgIE9uQ2hhbmdlVHJpZ2dlci5wcm90b3R5cGUubnVsbFNldExpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdObyBjaGFuZ2UgbGlzdGVuZXIgYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubnVsbENsZWFyTGlzdGVuZXI7XHJcbiAgICB9O1xyXG4gICAgT25DaGFuZ2VUcmlnZ2VyLnByb3RvdHlwZS5udWxsQ2xlYXJMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm8gY2hhbmdlIGxpc3RlbmVyIHJlZ2lzdGVyJyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE9uQ2hhbmdlVHJpZ2dlcjtcclxufSh0cmlnZ2VyXzEuVHJpZ2dlcikpO1xyXG5leHBvcnRzLk9uQ2hhbmdlVHJpZ2dlciA9IE9uQ2hhbmdlVHJpZ2dlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYjI1RGFHRnVaMlZVY21sbloyVnlMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWIyNURhR0Z1WjJWVWNtbG5aMlZ5TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenM3T3pzN08wRkJSMklzU1VGQldTeERRVUZETEZkQlFVMHNVVUZCVVN4RFFVRkRMRU5CUVVFN1FVRkZOVUlzZDBKQlFXdERMRmRCUVZjc1EwRkJReXhEUVVGQk8wRkJWVGxETzBsQlFYRkRMRzFEUVVGNVFqdEpRVTAzUkN4NVFrRkJiMElzVlVGQlowTXNSVUZCVlN4UlFVRTBRanRSUVVONlJpeHJRa0ZCVFN4VlFVRlZMRU5CUVVNc1EwRkJRenRSUVVSRExHVkJRVlVzUjBGQlZpeFZRVUZWTEVOQlFYTkNPMUZCUVZVc1lVRkJVU3hIUVVGU0xGRkJRVkVzUTBGQmIwSTdVVUZNYkVZc2NVSkJRV2RDTEVkQlFWY3NTVUZCU1N4RFFVRkRPMGxCVDNoRExFTkJRVU03U1VGRlJDeHZRMEZCVlN4SFFVRldMRlZCUVZjc1VVRkJjMEk3VVVGQmFrTXNhVUpCYTBKRE8xRkJha0pCTEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhYUVVGWExFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOc1F5eE5RVUZOTEVOQlFVTTdVVUZEVWl4RFFVRkRPMUZCUlVRc1NVRkJTU3hEUVVGRExHRkJRV0VzUlVGQlJTeERRVUZETzFGQlJYSkNMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zVFVGQlRTeERRVUZETzFsQlEzUkNMRTFCUVUwc1EwRkJReXhMUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEVsQlFVa3NTVUZCU1N4SlFVRkpPMnRDUVVNNVFpeExRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTk8ydENRVU42UWl4TFFVRkxMRU5CUVVNN1VVRkRWaXhEUVVGRExFVkJRVVVzWTBGQlVTeExRVUZKTEVOQlFVTXNhVUpCUVdsQ0xFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRSUVVWb1JDeEpRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRTFCUVUwc1EwRkJRenRaUVVOMFFpeE5RVUZOTEVOQlFVTXNTMEZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSkxFbEJRVWtzU1VGQlNUdHJRa0ZET1VJc1MwRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFR0clFrRkRla0lzUzBGQlN5eERRVUZETzFGQlExWXNRMEZCUXl4RlFVRkZMR05CUVZFc1MwRkJTU3hEUVVGRExHbENRVUZwUWl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdTVUZEYWtRc1EwRkJRenRKUVVWUExESkRRVUZwUWl4SFFVRjZRaXhWUVVFd1FpeFJRVUZ2UWp0UlFVRTVReXhwUWtGUlF6dFJRVkJCTEVWQlFVVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNTVUZCU1N4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExHVkJRV1VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTXZSaXhKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRPMWxCUlhoQ0xFbEJRVWtzUTBGQlF5eGhRVUZoTEVkQlFVY3NTVUZCU1N4RFFVRkRMRmRCUVZjc1EwRkJRenRuUWtGRGNrTXNTMEZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF6dFpRVU42UWl4RFFVRkRMRU5CUVVNc1EwRkJRenRSUVVOS0xFTkJRVU03U1VGRFJpeERRVUZETzBsQlJVOHNhME5CUVZFc1IwRkJhRUlzVlVGQmFVSXNVVUZCYzBJN1VVRkJka01zYVVKQlUwTTdVVUZTUVN4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRlRUlzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETzFGQlEyeERMRU5CUVVNN1VVRkZSQ3hKUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNN1dVRkRNVUlzUzBGQlNTeERRVUZETEdGQlFXRXNSVUZCUlN4RFFVRkRPMWxCUTNKQ0xGRkJRVkVzUlVGQlJTeERRVUZETzFGQlExb3NRMEZCUXl4RlFVRkZMRWxCUVVrc1EwRkJReXhuUWtGQlowSXNRMEZCUXl4RFFVRkRPMGxCUXpOQ0xFTkJRVU03U1VGRlR5eDFRMEZCWVN4SFFVRnlRanRSUVVORExFbEJRVWtzUTBGQlF5eFhRVUZYTEVkQlFVY3NTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhwUWtGQmFVSXNTVUZCU1N4SlFVRkpMRU5CUVVNc1pVRkJaU3hEUVVGRE8xRkJRek5GTEVsQlFVa3NRMEZCUXl4aFFVRmhMRWRCUVVjc1NVRkJTU3hEUVVGRExHbENRVUZwUWl4RFFVRkRPMGxCUXpkRExFTkJRVU03U1VGRlR5eDVRMEZCWlN4SFFVRjJRanRSUVVORExFOUJRVThzUTBGQlF5eEhRVUZITEVOQlFVTXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlF6dFJRVU0xUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExHbENRVUZwUWl4RFFVRkRPMGxCUXk5Q0xFTkJRVU03U1VGRlR5d3lRMEZCYVVJc1IwRkJla0k3VVVGRFF5eFBRVUZQTEVOQlFVTXNSMEZCUnl4RFFVRkRMRFpDUVVFMlFpeERRVUZETEVOQlFVTTdTVUZETlVNc1EwRkJRenRKUVVOR0xITkNRVUZETzBGQlFVUXNRMEZCUXl4QlFXaEZSQ3hEUVVGeFF5eHBRa0ZCVHl4SFFXZEZNME03UVVGb1JWa3NkVUpCUVdVc2EwSkJaMFV6UWl4RFFVRkJJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9zZXJ2aWNlcy9hdXRvc2F2ZS90cmlnZ2Vycy9vbkNoYW5nZVRyaWdnZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgVHJpZ2dlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUcmlnZ2VyKGFsaWFzZXMsIHRyaWdnZXJBY3Rpb24pIHtcclxuICAgICAgICB0aGlzLnRyaWdnZXJBY3Rpb24gPSB0cmlnZ2VyQWN0aW9uO1xyXG4gICAgICAgIHRoaXMuYWxpYXNlcyA9IGFsaWFzZXMuc3BsaXQoJyAnKTtcclxuICAgIH1cclxuICAgIFRyaWdnZXIucHJvdG90eXBlLnNldFRyaWdnZXIgPSBmdW5jdGlvbiAoYXV0b3NhdmUpIHtcclxuICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMudHJpZ2dlckFjdGlvbikpIHtcclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyQWN0aW9uKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUcmlnZ2VyLnByb3RvdHlwZS5oYXNNYXRjaCA9IGZ1bmN0aW9uICh0cmlnZ2Vycykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHRyaWdnZXJMaXN0ID0gdHJpZ2dlcnMuc3BsaXQoJyAnKTtcclxuICAgICAgICByZXR1cm4gXy5zb21lKHRyaWdnZXJMaXN0LCBmdW5jdGlvbiAodHJpZ2dlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gXy5zb21lKF90aGlzLmFsaWFzZXMsIGZ1bmN0aW9uIChhbGlhcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXIgPT09IGFsaWFzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBUcmlnZ2VyLnByb3RvdHlwZS5jb25maWd1cmUgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRyaWdnZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVHJpZ2dlciA9IFRyaWdnZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWRISnBaMmRsY2k1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJblJ5YVdkblpYSXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeERRVUZETEZkQlFVMHNVVUZCVVN4RFFVRkRMRU5CUVVFN1FVRlROVUk3U1VGSlF5eHBRa0ZCV1N4UFFVRmxMRVZCUVZVc1lVRkJOa003VVVGQk4wTXNhMEpCUVdFc1IwRkJZaXhoUVVGaExFTkJRV2RETzFGQlEycEdMRWxCUVVrc1EwRkJReXhQUVVGUExFZEJRVWNzVDBGQlR5eERRVUZETEV0QlFVc3NRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJRenRKUVVOdVF5eERRVUZETzBsQlJVUXNORUpCUVZVc1IwRkJWaXhWUVVGWExGRkJRWE5DTzFGQlEyaERMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNTVUZCU1N4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU4wUXl4SlFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRExFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXp0UlFVTnVReXhEUVVGRE8wbEJRMFlzUTBGQlF6dEpRVVZFTERCQ1FVRlJMRWRCUVZJc1ZVRkJVeXhSUVVGblFqdFJRVUY2UWl4cFFrRlBRenRSUVU1QkxFbEJRVWtzVjBGQlZ5eEhRVUZoTEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU03VVVGRGFFUXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eEZRVUZGTEZWQlFVTXNUMEZCWlR0WlFVTXhReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkpMRU5CUVVNc1QwRkJUeXhGUVVGRkxGVkJRVU1zUzBGQllUdG5Ra0ZEZWtNc1RVRkJUU3hEUVVGRExFOUJRVThzUzBGQlN5eExRVUZMTEVOQlFVTTdXVUZETVVJc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRFNpeERRVUZETEVOQlFVTXNRMEZCUXp0SlFVTktMRU5CUVVNN1NVRkZSQ3d5UWtGQlV5eEhRVUZVTEZWQlFWVXNVVUZCYlVJN1VVRkROVUlzU1VGQlNTeERRVUZETEZGQlFWRXNSMEZCUnl4UlFVRlJMRU5CUVVNN1NVRkRNVUlzUTBGQlF6dEpRVU5HTEdOQlFVTTdRVUZCUkN4RFFVRkRMRUZCTVVKRUxFbEJNRUpETzBGQk1VSlpMR1ZCUVU4c1ZVRXdRbTVDTEVOQlFVRWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9zZXJ2aWNlcy9hdXRvc2F2ZS90cmlnZ2Vycy90cmlnZ2VyLmpzXG4gKiogbW9kdWxlIGlkID0gMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5zZXJ2aWNlcy5mb3JtJztcclxuZXhwb3J0cy5zZXJ2aWNlTmFtZSA9ICdmb3JtU2VydmljZSc7XHJcbnZhciBGb3JtU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGb3JtU2VydmljZSgpIHtcclxuICAgIH1cclxuICAgIEZvcm1TZXJ2aWNlLnByb3RvdHlwZS5nZXRBZ2dyZWdhdGVFcnJvciA9IGZ1bmN0aW9uIChmb3JtKSB7XHJcbiAgICAgICAgdmFyIGZpbHRlcmVkRm9ybSA9IF8uZmlsdGVyKGZvcm0sIGZ1bmN0aW9uIChwcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm9wICE9IG51bGwgJiYgcHJvcC5ybEVycm9yTWVzc2FnZSAhPSBudWxsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHZhciBlcnJvcnMgPSBfLm1hcFZhbHVlcyhmaWx0ZXJlZEZvcm0sICdybEVycm9yTWVzc2FnZScpO1xyXG4gICAgICAgIHJldHVybiBfLmZpcnN0KGVycm9ycyk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEZvcm1TZXJ2aWNlO1xyXG59KCkpO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLnNlcnZpY2UoZXhwb3J0cy5zZXJ2aWNlTmFtZSwgRm9ybVNlcnZpY2UpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2labTl5YlM1elpYSjJhV05sTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2labTl5YlM1elpYSjJhV05sTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCU1hoQ0xHdENRVUZWTEVkQlFWY3NjVUpCUVhGQ0xFTkJRVU03UVVGRE0wTXNiVUpCUVZjc1IwRkJWeXhoUVVGaExFTkJRVU03UVVGTkwwTTdTVUZCUVR0SlFWRkJMRU5CUVVNN1NVRlFRU3gxUTBGQmFVSXNSMEZCYWtJc1ZVRkJhMElzU1VGQmIwSTdVVUZEY2tNc1NVRkJTU3haUVVGWkxFZEJRVkVzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRVZCUVVVc1ZVRkJReXhKUVVGVE8xbEJRMmhFTEUxQlFVMHNRMEZCUXl4SlFVRkpMRWxCUVVrc1NVRkJTU3hKUVVGSkxFbEJRVWtzUTBGQlF5eGpRVUZqTEVsQlFVa3NTVUZCU1N4RFFVRkRPMUZCUTNCRUxFTkJRVU1zUTBGQlF5eERRVUZETzFGQlEwZ3NTVUZCU1N4TlFVRk5MRWRCUVd0Q0xFTkJRVU1zUTBGQlF5eFRRVUZUTEVOQlFVTXNXVUZCV1N4RlFVRkZMR2RDUVVGblFpeERRVUZETEVOQlFVTTdVVUZEZUVVc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNN1NVRkRlRUlzUTBGQlF6dEpRVU5HTEd0Q1FVRkRPMEZCUVVRc1EwRkJReXhCUVZKRUxFbEJVVU03UVVGRlJDeFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMR3RDUVVGVkxFVkJRVVVzUlVGQlJTeERRVUZETzB0QlF6VkNMRTlCUVU4c1EwRkJReXh0UWtGQlZ5eEZRVUZGTEZkQlFWY3NRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9zZXJ2aWNlcy9mb3JtL2Zvcm0uc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19ndWlkID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLmd1aWQ7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5iZWhhdmlvcnMucG9wb3Zlcic7XHJcbmV4cG9ydHMuZGlyZWN0aXZlTmFtZSA9ICdybFBvcG92ZXInO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ1BvcG92ZXJDb250cm9sbGVyJztcclxudmFyIFBvcG92ZXJDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBvcG92ZXJDb250cm9sbGVyKCRhdHRycywgJGVsZW1lbnQsICRjb21waWxlLCAkc2NvcGUsICRwYXJzZSwgJHRlbXBsYXRlQ2FjaGUsIGd1aWQpIHtcclxuICAgICAgICB0aGlzLiRhdHRycyA9ICRhdHRycztcclxuICAgICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy4kY29tcGlsZSA9ICRjb21waWxlO1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMuJHBhcnNlID0gJHBhcnNlO1xyXG4gICAgICAgIHRoaXMuJHRlbXBsYXRlQ2FjaGUgPSAkdGVtcGxhdGVDYWNoZTtcclxuICAgICAgICB0aGlzLmd1aWQgPSBndWlkO1xyXG4gICAgfVxyXG4gICAgUG9wb3ZlckNvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuJHBhcnNlKHRoaXMuJGF0dHJzLnRleHRPbmx5KSh0aGlzLiRzY29wZSkpIHtcclxuICAgICAgICAgICAgdGhpcy4kZWxlbWVudC5hdHRyKCd1aWItcG9wb3ZlcicsIHRoaXMuJGF0dHJzLnJsUG9wb3Zlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGVQYXRoID0gdGhpcy5ndWlkLnJhbmRvbSgpICsgJy5odG1sJztcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlQ29udGVudCA9ICc8ZGl2PicgKyB0aGlzLiRwYXJzZSh0aGlzLiRhdHRycy5ybFBvcG92ZXIpKHRoaXMuJHNjb3BlKSArICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICBpZiAodGVtcGxhdGVDb250ZW50ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHRlbXBsYXRlQ2FjaGUucHV0KHRlbXBsYXRlUGF0aCwgdGVtcGxhdGVDb250ZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJGVsZW1lbnQuYXR0cigndWliLXBvcG92ZXItdGVtcGxhdGUnLCAnXFwnJyArIHRlbXBsYXRlUGF0aCArICdcXCcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUF0dHIoJ3JsLXBvcG92ZXInKTtcclxuICAgICAgICB0aGlzLiRjb21waWxlKHRoaXMuJGVsZW1lbnQpKHRoaXMuJHNjb3BlKTtcclxuICAgIH07XHJcbiAgICBQb3BvdmVyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckYXR0cnMnLFxyXG4gICAgICAgICckZWxlbWVudCcsXHJcbiAgICAgICAgJyRjb21waWxlJyxcclxuICAgICAgICAnJHNjb3BlJyxcclxuICAgICAgICAnJHBhcnNlJyxcclxuICAgICAgICAnJHRlbXBsYXRlQ2FjaGUnLFxyXG4gICAgICAgIF9fZ3VpZC5zZXJ2aWNlTmFtZV07XHJcbiAgICByZXR1cm4gUG9wb3ZlckNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuUG9wb3ZlckNvbnRyb2xsZXIgPSBQb3BvdmVyQ29udHJvbGxlcjtcclxuZnVuY3Rpb24gcG9wb3ZlcigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICBwcmlvcml0eTogMzAwLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMucG9wb3ZlciA9IHBvcG92ZXI7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuZGlyZWN0aXZlKGV4cG9ydHMuZGlyZWN0aXZlTmFtZSwgcG9wb3ZlcilcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIFBvcG92ZXJDb250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pY0c5d2IzWmxjaTVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkluQnZjRzkyWlhJdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzV1VGQldTeERRVUZETzBGQlJXSXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGRmJrTXNOa05CUVhsQ0xEaENRVUU0UWl4RFFVRkRMRU5CUVVFN1FVRkRlRVFzU1VGQlR5eE5RVUZOTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhKUVVGSkxFTkJRVU03UVVGRmJrSXNhMEpCUVZVc1IwRkJWeXg1UWtGQmVVSXNRMEZCUXp0QlFVTXZReXh4UWtGQllTeEhRVUZYTEZkQlFWY3NRMEZCUXp0QlFVTndReXh6UWtGQll5eEhRVUZYTEcxQ1FVRnRRaXhEUVVGRE8wRkJUM2hFTzBsQlVVTXNNa0pCUVc5Q0xFMUJRVEJDTEVWQlEyeERMRkZCUVd0RExFVkJRMnhETEZGQlFXbERMRVZCUTJwRExFMUJRWE5DTEVWQlEzUkNMRTFCUVRaQ0xFVkJRemRDTEdOQlFUWkRMRVZCUXpkRExFbEJRWGxDTzFGQlRtcENMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRVzlDTzFGQlEyeERMR0ZCUVZFc1IwRkJVaXhSUVVGUkxFTkJRVEJDTzFGQlEyeERMR0ZCUVZFc1IwRkJVaXhSUVVGUkxFTkJRWGxDTzFGQlEycERMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRV2RDTzFGQlEzUkNMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRWFZDTzFGQlF6ZENMRzFDUVVGakxFZEJRV1FzWTBGQll5eERRVUVyUWp0UlFVTTNReXhUUVVGSkxFZEJRVW9zU1VGQlNTeERRVUZ4UWp0SlFVRkpMRU5CUVVNN1NVRkZNVU1zYlVOQlFVOHNSMEZCVUR0UlFVTkRMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRM0JFTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJTU3hEUVVGRExHRkJRV0VzUlVGQlJTeEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRE8xRkJRekZFTEVOQlFVTTdVVUZEUkN4SlFVRkpMRU5CUVVNc1EwRkJRenRaUVVOTUxFbEJRVWtzV1VGQldTeEhRVUZYTEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hGUVVGRkxFZEJRVWNzVDBGQlR5eERRVUZETzFsQlEzaEVMRWxCUVVrc1pVRkJaU3hIUVVGWExFOUJRVThzUjBGQlJ5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhIUVVGSExGRkJRVkVzUTBGQlF6dFpRVVZ1Unl4RlFVRkZMRU5CUVVNc1EwRkJReXhsUVVGbExFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0blFrRkROMElzU1VGQlNTeERRVUZETEdOQlFXTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1dVRkJXU3hGUVVGRkxHVkJRV1VzUTBGQlF5eERRVUZETzJkQ1FVTjJSQ3hKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEVsQlFVa3NRMEZCUXl4elFrRkJjMElzUlVGQlJTeEpRVUZKTEVkQlFVY3NXVUZCV1N4SFFVRkhMRWxCUVVrc1EwRkJReXhEUVVGRE8xbEJRM2hGTEVOQlFVTTdVVUZEUml4RFFVRkRPMUZCUlVRc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eFZRVUZWTEVOQlFVTXNXVUZCV1N4RFFVRkRMRU5CUVVNN1VVRkRka01zU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRPMGxCUXpORExFTkJRVU03U1VFdlFrMHNlVUpCUVU4c1IwRkJZU3hEUVVGRExGRkJRVkU3VVVGRE5VSXNWVUZCVlR0UlFVTldMRlZCUVZVN1VVRkRWaXhSUVVGUk8xRkJRMUlzVVVGQlVUdFJRVU5TTEdkQ1FVRm5RanRSUVVOb1FpeE5RVUZOTEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNN1NVRXdRamRDTEhkQ1FVRkRPMEZCUVVRc1EwRkJReXhCUVdwRFJDeEpRV2xEUXp0QlFXcERXU3g1UWtGQmFVSXNiMEpCYVVNM1FpeERRVUZCTzBGQlJVUTdTVUZEUXl4WlFVRlpMRU5CUVVNN1NVRkRZaXhOUVVGTkxFTkJRVU03VVVGRFRpeFJRVUZSTEVWQlFVVXNSMEZCUnp0UlFVTmlMRkZCUVZFc1JVRkJSU3hIUVVGSE8xRkJRMklzVlVGQlZTeEZRVUZGTEhOQ1FVRmpPMHRCUXpGQ0xFTkJRVU03UVVGRFNDeERRVUZETzBGQlVHVXNaVUZCVHl4VlFVOTBRaXhEUVVGQk8wRkJSVVFzVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4clFrRkJWU3hGUVVGRkxFVkJRVVVzUTBGQlF6dExRVU0xUWl4VFFVRlRMRU5CUVVNc2NVSkJRV0VzUlVGQlJTeFBRVUZQTEVOQlFVTTdTMEZEYWtNc1ZVRkJWU3hEUVVGRExITkNRVUZqTEVWQlFVVXNhVUpCUVdsQ0xFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2JlaGF2aW9ycy9wb3BvdmVyL3BvcG92ZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmJlaGF2aW9ycy5yZXF1aXJlZCc7XHJcbmV4cG9ydHMuZGlyZWN0aXZlTmFtZSA9ICdybFJlcXVpcmVkJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdSZXF1aXJlZENvbnRyb2xsZXInO1xyXG52YXIgUmVxdWlyZWRDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJlcXVpcmVkQ29udHJvbGxlcigkc2NvcGUsICRhdHRycywgJGludGVycG9sYXRlKSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy4kYXR0cnMgPSAkYXR0cnM7XHJcbiAgICAgICAgdGhpcy4kaW50ZXJwb2xhdGUgPSAkaW50ZXJwb2xhdGU7XHJcbiAgICB9XHJcbiAgICBSZXF1aXJlZENvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gdGhpcy4kaW50ZXJwb2xhdGUodGhpcy4kYXR0cnMucmxSZXF1aXJlZCkodGhpcy4kc2NvcGUpO1xyXG4gICAgfTtcclxuICAgIFJlcXVpcmVkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGF0dHJzJywgJyRpbnRlcnBvbGF0ZSddO1xyXG4gICAgcmV0dXJuIFJlcXVpcmVkQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5SZXF1aXJlZENvbnRyb2xsZXIgPSBSZXF1aXJlZENvbnRyb2xsZXI7XHJcbmZ1bmN0aW9uIHJlcXVpcmVkKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0EnLFxyXG4gICAgICAgIHByaW9yaXR5OiAyMDAsXHJcbiAgICAgICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgIH07XHJcbn1cclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5kaXJlY3RpdmUoZXhwb3J0cy5kaXJlY3RpdmVOYW1lLCByZXF1aXJlZClcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIFJlcXVpcmVkQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWNtVnhkV2x5WldRdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUp5WlhGMWFYSmxaQzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdRVUZGWWl4SlFVRlpMRTlCUVU4c1YwRkJUU3hUUVVGVExFTkJRVU1zUTBGQlFUdEJRVTk0UWl4clFrRkJWU3hIUVVGWExEQkNRVUV3UWl4RFFVRkRPMEZCUTJoRUxIRkNRVUZoTEVkQlFWY3NXVUZCV1N4RFFVRkRPMEZCUTNKRExITkNRVUZqTEVkQlFWY3NiMEpCUVc5Q0xFTkJRVU03UVVGTmVrUTdTVUZGUXl3MFFrRkJiMElzVFVGQmMwSXNSVUZET1VJc1RVRkJNa0lzUlVGRE0wSXNXVUZCZVVNN1VVRkdha01zVjBGQlRTeEhRVUZPTEUxQlFVMHNRMEZCWjBJN1VVRkRPVUlzVjBGQlRTeEhRVUZPTEUxQlFVMHNRMEZCY1VJN1VVRkRNMElzYVVKQlFWa3NSMEZCV2l4WlFVRlpMRU5CUVRaQ08wbEJRVWNzUTBGQlF6dEpRVWw2UkN4dlEwRkJUeXhIUVVGUU8xRkJRME1zU1VGQlNTeERRVUZETEU5QlFVOHNSMEZCUnl4SlFVRkpMRU5CUVVNc1dVRkJXU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETzBsQlEzWkZMRU5CUVVNN1NVRlVUU3d3UWtGQlR5eEhRVUZoTEVOQlFVTXNVVUZCVVN4RlFVRkZMRkZCUVZFc1JVRkJSU3hqUVVGakxFTkJRVU1zUTBGQlF6dEpRVlZxUlN4NVFrRkJRenRCUVVGRUxFTkJRVU1zUVVGWVJDeEpRVmRETzBGQldGa3NNRUpCUVd0Q0xIRkNRVmM1UWl4RFFVRkJPMEZCUlVRN1NVRkRReXhOUVVGTkxFTkJRVU03VVVGRFRpeFJRVUZSTEVWQlFVVXNSMEZCUnp0UlFVTmlMRkZCUVZFc1JVRkJSU3hIUVVGSE8xRkJRMklzVlVGQlZTeEZRVUZGTEhOQ1FVRmpPMHRCUXpGQ0xFTkJRVU03UVVGRFNDeERRVUZETzBGQlJVUXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVWQlFVVXNRMEZCUXp0TFFVTTFRaXhUUVVGVExFTkJRVU1zY1VKQlFXRXNSVUZCUlN4UlFVRlJMRU5CUVVNN1MwRkRiRU1zVlVGQlZTeERRVUZETEhOQ1FVRmpMRVZCUVVVc2EwSkJRV3RDTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvYmVoYXZpb3JzL3JlcXVpcmVkL3JlcXVpcmVkLmpzXG4gKiogbW9kdWxlIGlkID0gMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBidXN5ID0gcmVxdWlyZSgnLi9idXN5L2J1c3knKTtcclxuZXhwb3J0cy5idXN5ID0gYnVzeTtcclxudmFyIGJ1dHRvbiA9IHJlcXVpcmUoJy4vYnV0dG9uL2J1dHRvbicpO1xyXG5leHBvcnRzLmJ1dHRvbiA9IGJ1dHRvbjtcclxudmFyIGJ1dHRvbkFzeW5jID0gcmVxdWlyZSgnLi9idXR0b25Bc3luYy9idXR0b25Bc3luYycpO1xyXG5leHBvcnRzLmJ1dHRvbkFzeW5jID0gYnV0dG9uQXN5bmM7XHJcbnZhciBidXR0b25MaW5rID0gcmVxdWlyZSgnLi9idXR0b25MaW5rL2J1dHRvbkxpbmsnKTtcclxuZXhwb3J0cy5idXR0b25MaW5rID0gYnV0dG9uTGluaztcclxudmFyIGJ1dHRvblN1Ym1pdCA9IHJlcXVpcmUoJy4vYnV0dG9uU3VibWl0L2J1dHRvblN1Ym1pdCcpO1xyXG5leHBvcnRzLmJ1dHRvblN1Ym1pdCA9IGJ1dHRvblN1Ym1pdDtcclxudmFyIGJ1dHRvblRvZ2dsZSA9IHJlcXVpcmUoJy4vYnV0dG9uVG9nZ2xlL2J1dHRvblRvZ2dsZScpO1xyXG5leHBvcnRzLmJ1dHRvblRvZ2dsZSA9IGJ1dHRvblRvZ2dsZTtcclxudmFyIGNhcmRDb250YWluZXIgPSByZXF1aXJlKCcuL2NhcmRDb250YWluZXIvY2FyZENvbnRhaW5lci5tb2R1bGUnKTtcclxuZXhwb3J0cy5jYXJkQ29udGFpbmVyID0gY2FyZENvbnRhaW5lcjtcclxudmFyIGNoZWNrYm94ID0gcmVxdWlyZSgnLi9jaGVja2JveC9jaGVja2JveCcpO1xyXG5leHBvcnRzLmNoZWNrYm94ID0gY2hlY2tib3g7XHJcbnZhciBjb21tYUxpc3QgPSByZXF1aXJlKCcuL2NvbW1hTGlzdC9jb21tYUxpc3QnKTtcclxuZXhwb3J0cy5jb21tYUxpc3QgPSBjb21tYUxpc3Q7XHJcbnZhciBkYXRlVGltZSA9IHJlcXVpcmUoJy4vZGF0ZVRpbWUvZGF0ZVRpbWUnKTtcclxuZXhwb3J0cy5kYXRlVGltZSA9IGRhdGVUaW1lO1xyXG52YXIgZGF0ZVRpbWVTdGF0aWMgPSByZXF1aXJlKCcuL2RhdGVUaW1lU3RhdGljL2RhdGVUaW1lU3RhdGljJyk7XHJcbmV4cG9ydHMuZGF0ZVRpbWVTdGF0aWMgPSBkYXRlVGltZVN0YXRpYztcclxudmFyIGRpYWxvZyA9IHJlcXVpcmUoJy4vZGlhbG9nL2RpYWxvZycpO1xyXG5leHBvcnRzLmRpYWxvZyA9IGRpYWxvZztcclxudmFyIGZvcm0gPSByZXF1aXJlKCcuL2Zvcm0vZm9ybScpO1xyXG5leHBvcnRzLmZvcm0gPSBmb3JtO1xyXG52YXIgZ2VuZXJpY0NvbnRhaW5lciA9IHJlcXVpcmUoJy4vZ2VuZXJpY0NvbnRhaW5lci9nZW5lcmljQ29udGFpbmVyJyk7XHJcbmV4cG9ydHMuZ2VuZXJpY0NvbnRhaW5lciA9IGdlbmVyaWNDb250YWluZXI7XHJcbnZhciBsYXp5TG9hZCA9IHJlcXVpcmUoJy4vbGF6eUxvYWQvbGF6eUxvYWQnKTtcclxuZXhwb3J0cy5sYXp5TG9hZCA9IGxhenlMb2FkO1xyXG52YXIgbG9uZ0NsaWNrQnV0dG9uID0gcmVxdWlyZSgnLi9sb25nQ2xpY2tCdXR0b24vbG9uZ0NsaWNrQnV0dG9uJyk7XHJcbmV4cG9ydHMubG9uZ0NsaWNrQnV0dG9uID0gbG9uZ0NsaWNrQnV0dG9uO1xyXG52YXIgbWVzc2FnZUxvZyA9IHJlcXVpcmUoJy4vbWVzc2FnZUxvZy9tZXNzYWdlTG9nLm1vZHVsZScpO1xyXG5leHBvcnRzLm1lc3NhZ2VMb2cgPSBtZXNzYWdlTG9nO1xyXG52YXIgbXVsdGlTdGVwSW5kaWNhdG9yID0gcmVxdWlyZSgnLi9tdWx0aVN0ZXBJbmRpY2F0b3IvbXVsdGlTdGVwSW5kaWNhdG9yJyk7XHJcbmV4cG9ydHMubXVsdGlTdGVwSW5kaWNhdG9yID0gbXVsdGlTdGVwSW5kaWNhdG9yO1xyXG52YXIgcmFkaW8gPSByZXF1aXJlKCcuL3JhZGlvL3JhZGlvLm1vZHVsZScpO1xyXG5leHBvcnRzLnJhZGlvID0gcmFkaW87XHJcbnZhciByYXRpbmdCYXIgPSByZXF1aXJlKCcuL3JhdGluZ0Jhci9yYXRpbmdCYXInKTtcclxuZXhwb3J0cy5yYXRpbmdCYXIgPSByYXRpbmdCYXI7XHJcbnZhciByaWNoVGV4dEVkaXRvciA9IHJlcXVpcmUoJy4vcmljaFRleHRFZGl0b3IvcmljaFRleHRFZGl0b3InKTtcclxuZXhwb3J0cy5yaWNoVGV4dEVkaXRvciA9IHJpY2hUZXh0RWRpdG9yO1xyXG52YXIgc2VsZWN0ID0gcmVxdWlyZSgnLi9zZWxlY3Qvc2VsZWN0Jyk7XHJcbmV4cG9ydHMuc2VsZWN0ID0gc2VsZWN0O1xyXG52YXIgc2lnbmF0dXJlUGFkID0gcmVxdWlyZSgnLi9zaWduYXR1cmVQYWQvc2lnbmF0dXJlUGFkJyk7XHJcbmV4cG9ydHMuc2lnbmF0dXJlUGFkID0gc2lnbmF0dXJlUGFkO1xyXG52YXIgc2ltcGxlQ2FyZExpc3QgPSByZXF1aXJlKCcuL3NpbXBsZUNhcmRMaXN0L3NpbXBsZUNhcmRMaXN0Lm1vZHVsZScpO1xyXG5leHBvcnRzLnNpbXBsZUNhcmRMaXN0ID0gc2ltcGxlQ2FyZExpc3Q7XHJcbnZhciBzcGlubmVyID0gcmVxdWlyZSgnLi9zcGlubmVyL3NwaW5uZXInKTtcclxuZXhwb3J0cy5zcGlubmVyID0gc3Bpbm5lcjtcclxudmFyIHN0cmluZ1dpdGhXYXRlcm1hcmsgPSByZXF1aXJlKCcuL3N0cmluZ1dpdGhXYXRlcm1hcmsvc3RyaW5nV2l0aFdhdGVybWFyaycpO1xyXG5leHBvcnRzLnN0cmluZ1dpdGhXYXRlcm1hcmsgPSBzdHJpbmdXaXRoV2F0ZXJtYXJrO1xyXG52YXIgdGFicyA9IHJlcXVpcmUoJy4vdGFicy90YWJzLm1vZHVsZScpO1xyXG5leHBvcnRzLnRhYnMgPSB0YWJzO1xyXG52YXIgdGVtcGxhdGVSZW5kZXJlciA9IHJlcXVpcmUoJy4vdGVtcGxhdGVSZW5kZXJlci90ZW1wbGF0ZVJlbmRlcmVyJyk7XHJcbmV4cG9ydHMudGVtcGxhdGVSZW5kZXJlciA9IHRlbXBsYXRlUmVuZGVyZXI7XHJcbnZhciB0ZXh0YXJlYSA9IHJlcXVpcmUoJy4vdGV4dGFyZWEvdGV4dGFyZWEnKTtcclxuZXhwb3J0cy50ZXh0YXJlYSA9IHRleHRhcmVhO1xyXG52YXIgdGV4dGJveCA9IHJlcXVpcmUoJy4vdGV4dGJveC90ZXh0Ym94Jyk7XHJcbmV4cG9ydHMudGV4dGJveCA9IHRleHRib3g7XHJcbnZhciB0eXBlYWhlYWQgPSByZXF1aXJlKCcuL3R5cGVhaGVhZC90eXBlYWhlYWQnKTtcclxuZXhwb3J0cy50eXBlYWhlYWQgPSB0eXBlYWhlYWQ7XHJcbnZhciB0eXBlYWhlYWRMaXN0ID0gcmVxdWlyZSgnLi90eXBlYWhlYWRMaXN0L3R5cGVhaGVhZExpc3QnKTtcclxuZXhwb3J0cy50eXBlYWhlYWRMaXN0ID0gdHlwZWFoZWFkTGlzdDtcclxudmFyIHVzZXJSYXRpbmcgPSByZXF1aXJlKCcuL3VzZXJSYXRpbmcvdXNlclJhdGluZycpO1xyXG5leHBvcnRzLnVzZXJSYXRpbmcgPSB1c2VyUmF0aW5nO1xyXG52YXIgdmFsaWRhdGlvbkdyb3VwID0gcmVxdWlyZSgnLi92YWxpZGF0aW9uR3JvdXAvdmFsaWRhdGlvbkdyb3VwJyk7XHJcbmV4cG9ydHMudmFsaWRhdGlvbkdyb3VwID0gdmFsaWRhdGlvbkdyb3VwO1xyXG52YXIgY29tcG9uZW50c0RlZmF1bHRUaGVtZV8xID0gcmVxdWlyZSgnLi9jb21wb25lbnRzRGVmYXVsdFRoZW1lJyk7XHJcbmV4cG9ydHMuZGVmYXVsdFRoZW1lVmFsdWVOYW1lID0gY29tcG9uZW50c0RlZmF1bHRUaGVtZV8xLmRlZmF1bHRUaGVtZVZhbHVlTmFtZTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMnO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgIGJ1c3kubW9kdWxlTmFtZSxcclxuICAgIGJ1dHRvbi5tb2R1bGVOYW1lLFxyXG4gICAgYnV0dG9uQXN5bmMubW9kdWxlTmFtZSxcclxuICAgIGJ1dHRvbkxpbmsubW9kdWxlTmFtZSxcclxuICAgIGJ1dHRvblN1Ym1pdC5tb2R1bGVOYW1lLFxyXG4gICAgYnV0dG9uVG9nZ2xlLm1vZHVsZU5hbWUsXHJcbiAgICBjYXJkQ29udGFpbmVyLm1vZHVsZU5hbWUsXHJcbiAgICBjaGVja2JveC5tb2R1bGVOYW1lLFxyXG4gICAgY29tbWFMaXN0Lm1vZHVsZU5hbWUsXHJcbiAgICBkYXRlVGltZS5tb2R1bGVOYW1lLFxyXG4gICAgZGF0ZVRpbWVTdGF0aWMubW9kdWxlTmFtZSxcclxuICAgIGRpYWxvZy5tb2R1bGVOYW1lLFxyXG4gICAgZm9ybS5tb2R1bGVOYW1lLFxyXG4gICAgZ2VuZXJpY0NvbnRhaW5lci5tb2R1bGVOYW1lLFxyXG4gICAgbGF6eUxvYWQubW9kdWxlTmFtZSxcclxuICAgIGxvbmdDbGlja0J1dHRvbi5tb2R1bGVOYW1lLFxyXG4gICAgbWVzc2FnZUxvZy5tb2R1bGVOYW1lLFxyXG4gICAgbXVsdGlTdGVwSW5kaWNhdG9yLm1vZHVsZU5hbWUsXHJcbiAgICByYWRpby5tb2R1bGVOYW1lLFxyXG4gICAgcmF0aW5nQmFyLm1vZHVsZU5hbWUsXHJcbiAgICByaWNoVGV4dEVkaXRvci5tb2R1bGVOYW1lLFxyXG4gICAgc2VsZWN0Lm1vZHVsZU5hbWUsXHJcbiAgICBzaWduYXR1cmVQYWQubW9kdWxlTmFtZSxcclxuICAgIHNpbXBsZUNhcmRMaXN0Lm1vZHVsZU5hbWUsXHJcbiAgICBzcGlubmVyLm1vZHVsZU5hbWUsXHJcbiAgICBzdHJpbmdXaXRoV2F0ZXJtYXJrLm1vZHVsZU5hbWUsXHJcbiAgICB0YWJzLm1vZHVsZU5hbWUsXHJcbiAgICB0ZW1wbGF0ZVJlbmRlcmVyLm1vZHVsZU5hbWUsXHJcbiAgICB0ZXh0YXJlYS5tb2R1bGVOYW1lLFxyXG4gICAgdGV4dGJveC5tb2R1bGVOYW1lLFxyXG4gICAgdHlwZWFoZWFkLm1vZHVsZU5hbWUsXHJcbiAgICB0eXBlYWhlYWRMaXN0Lm1vZHVsZU5hbWUsXHJcbiAgICB1c2VyUmF0aW5nLm1vZHVsZU5hbWUsXHJcbiAgICB2YWxpZGF0aW9uR3JvdXAubW9kdWxlTmFtZSxcclxuXSlcclxuICAgIC52YWx1ZShjb21wb25lbnRzRGVmYXVsdFRoZW1lXzEuZGVmYXVsdFRoZW1lVmFsdWVOYW1lLCBjb21wb25lbnRzRGVmYXVsdFRoZW1lXzEuZGVmYXVsdFRoZW1lVmFsdWUpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lZMjl0Y0c5dVpXNTBjeTV0YjJSMWJHVXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKamIyMXdiMjVsYm5SekxtMXZaSFZzWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3haUVVGWkxFTkJRVU03UVVGRllpeEpRVUZaTEU5QlFVOHNWMEZCVFN4VFFVRlRMRU5CUVVNc1EwRkJRVHRCUVVWdVF5eEpRVUZaTEVsQlFVa3NWMEZCVFN4aFFVRmhMRU5CUVVNc1EwRkJRVHRCUVhsRGJrTXNXVUZCU1R0QlFYaERUQ3hKUVVGWkxFMUJRVTBzVjBGQlRTeHBRa0ZCYVVJc1EwRkJReXhEUVVGQk8wRkJlVU42UXl4alFVRk5PMEZCZUVOUUxFbEJRVmtzVjBGQlZ5eFhRVUZOTERKQ1FVRXlRaXhEUVVGRExFTkJRVUU3UVVGNVEzaEVMRzFDUVVGWE8wRkJlRU5hTEVsQlFWa3NWVUZCVlN4WFFVRk5MSGxDUVVGNVFpeERRVUZETEVOQlFVRTdRVUY1UTNKRUxHdENRVUZWTzBGQmVFTllMRWxCUVZrc1dVRkJXU3hYUVVGTkxEWkNRVUUyUWl4RFFVRkRMRU5CUVVFN1FVRjVRek5FTEc5Q1FVRlpPMEZCZUVOaUxFbEJRVmtzV1VGQldTeFhRVUZOTERaQ1FVRTJRaXhEUVVGRExFTkJRVUU3UVVGNVF6TkVMRzlDUVVGWk8wRkJlRU5pTEVsQlFWa3NZVUZCWVN4WFFVRk5MSE5EUVVGelF5eERRVUZETEVOQlFVRTdRVUY1UTNKRkxIRkNRVUZoTzBGQmVFTmtMRWxCUVZrc1VVRkJVU3hYUVVGTkxIRkNRVUZ4UWl4RFFVRkRMRU5CUVVFN1FVRjVReTlETEdkQ1FVRlJPMEZCZUVOVUxFbEJRVmtzVTBGQlV5eFhRVUZOTEhWQ1FVRjFRaXhEUVVGRExFTkJRVUU3UVVGNVEyeEVMR2xDUVVGVE8wRkJlRU5XTEVsQlFWa3NVVUZCVVN4WFFVRk5MSEZDUVVGeFFpeERRVUZETEVOQlFVRTdRVUY1UXk5RExHZENRVUZSTzBGQmVFTlVMRWxCUVZrc1kwRkJZeXhYUVVGTkxHbERRVUZwUXl4RFFVRkRMRU5CUVVFN1FVRjVRMnBGTEhOQ1FVRmpPMEZCZUVObUxFbEJRVmtzVFVGQlRTeFhRVUZOTEdsQ1FVRnBRaXhEUVVGRExFTkJRVUU3UVVGNVEzcERMR05CUVUwN1FVRjRRMUFzU1VGQldTeEpRVUZKTEZkQlFVMHNZVUZCWVN4RFFVRkRMRU5CUVVFN1FVRjVRMjVETEZsQlFVazdRVUY0UTB3c1NVRkJXU3huUWtGQlowSXNWMEZCVFN4eFEwRkJjVU1zUTBGQlF5eERRVUZCTzBGQmVVTjJSU3gzUWtGQlowSTdRVUYyUTJwQ0xFbEJRVmtzVVVGQlVTeFhRVUZOTEhGQ1FVRnhRaXhEUVVGRExFTkJRVUU3UVVGM1F5OURMR2RDUVVGUk8wRkJka05VTEVsQlFWa3NaVUZCWlN4WFFVRk5MRzFEUVVGdFF5eERRVUZETEVOQlFVRTdRVUYzUTNCRkxIVkNRVUZsTzBGQmRrTm9RaXhKUVVGWkxGVkJRVlVzVjBGQlRTeG5RMEZCWjBNc1EwRkJReXhEUVVGQk8wRkJkME0xUkN4clFrRkJWVHRCUVhaRFdDeEpRVUZaTEd0Q1FVRnJRaXhYUVVGTkxIbERRVUY1UXl4RFFVRkRMRU5CUVVFN1FVRjNRemRGTERCQ1FVRnJRanRCUVhaRGJrSXNTVUZCV1N4TFFVRkxMRmRCUVUwc2MwSkJRWE5DTEVOQlFVTXNRMEZCUVR0QlFYZEROME1zWVVGQlN6dEJRWFpEVGl4SlFVRlpMRk5CUVZNc1YwRkJUU3gxUWtGQmRVSXNRMEZCUXl4RFFVRkJPMEZCZDBOc1JDeHBRa0ZCVXp0QlFYWkRWaXhKUVVGWkxHTkJRV01zVjBGQlRTeHBRMEZCYVVNc1EwRkJReXhEUVVGQk8wRkJkME5xUlN4elFrRkJZenRCUVhaRFppeEpRVUZaTEUxQlFVMHNWMEZCVFN4cFFrRkJhVUlzUTBGQlF5eERRVUZCTzBGQmQwTjZReXhqUVVGTk8wRkJka05RTEVsQlFWa3NXVUZCV1N4WFFVRk5MRFpDUVVFMlFpeERRVUZETEVOQlFVRTdRVUYzUXpORUxHOUNRVUZaTzBGQmRrTmlMRWxCUVZrc1kwRkJZeXhYUVVGTkxIZERRVUYzUXl4RFFVRkRMRU5CUVVFN1FVRjNRM2hGTEhOQ1FVRmpPMEZCZGtObUxFbEJRVmtzVDBGQlR5eFhRVUZOTEcxQ1FVRnRRaXhEUVVGRExFTkJRVUU3UVVGM1F6VkRMR1ZCUVU4N1FVRjJRMUlzU1VGQldTeHRRa0ZCYlVJc1YwRkJUU3d5UTBGQk1rTXNRMEZCUXl4RFFVRkJPMEZCZDBOb1Jpd3lRa0ZCYlVJN1FVRjJRM0JDTEVsQlFWa3NTVUZCU1N4WFFVRk5MRzlDUVVGdlFpeERRVUZETEVOQlFVRTdRVUYzUXpGRExGbEJRVWs3UVVGMlEwd3NTVUZCV1N4blFrRkJaMElzVjBGQlRTeHhRMEZCY1VNc1EwRkJReXhEUVVGQk8wRkJkME4yUlN4M1FrRkJaMEk3UVVGMlEycENMRWxCUVZrc1VVRkJVU3hYUVVGTkxIRkNRVUZ4UWl4RFFVRkRMRU5CUVVFN1FVRjNReTlETEdkQ1FVRlJPMEZCZGtOVUxFbEJRVmtzVDBGQlR5eFhRVUZOTEcxQ1FVRnRRaXhEUVVGRExFTkJRVUU3UVVGM1F6VkRMR1ZCUVU4N1FVRjJRMUlzU1VGQldTeFRRVUZUTEZkQlFVMHNkVUpCUVhWQ0xFTkJRVU1zUTBGQlFUdEJRWGREYkVRc2FVSkJRVk03UVVGMlExWXNTVUZCV1N4aFFVRmhMRmRCUVUwc0swSkJRU3RDTEVOQlFVTXNRMEZCUVR0QlFYZERPVVFzY1VKQlFXRTdRVUYyUTJRc1NVRkJXU3hWUVVGVkxGZEJRVTBzZVVKQlFYbENMRU5CUVVNc1EwRkJRVHRCUVhkRGNrUXNhMEpCUVZVN1FVRjJRMWdzU1VGQldTeGxRVUZsTEZkQlFVMHNiVU5CUVcxRExFTkJRVU1zUTBGQlFUdEJRWGREY0VVc2RVSkJRV1U3UVVGMFEyaENMSFZEUVVGNVJDd3dRa0ZCTUVJc1EwRkJReXhEUVVGQk8wRkJSMjVHTERaQ1FVRnhRanRCUVhORFdDeHJRa0ZCVlN4SFFVRlhMR3RDUVVGclFpeERRVUZETzBGQlJXNUVMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFWVXNSVUZCUlR0SlFVTXhRaXhKUVVGSkxFTkJRVU1zVlVGQlZUdEpRVU5tTEUxQlFVMHNRMEZCUXl4VlFVRlZPMGxCUTJwQ0xGZEJRVmNzUTBGQlF5eFZRVUZWTzBsQlEzUkNMRlZCUVZVc1EwRkJReXhWUVVGVk8wbEJRM0pDTEZsQlFWa3NRMEZCUXl4VlFVRlZPMGxCUTNaQ0xGbEJRVmtzUTBGQlF5eFZRVUZWTzBsQlEzWkNMR0ZCUVdFc1EwRkJReXhWUVVGVk8wbEJRM2hDTEZGQlFWRXNRMEZCUXl4VlFVRlZPMGxCUTI1Q0xGTkJRVk1zUTBGQlF5eFZRVUZWTzBsQlEzQkNMRkZCUVZFc1EwRkJReXhWUVVGVk8wbEJRMjVDTEdOQlFXTXNRMEZCUXl4VlFVRlZPMGxCUTNwQ0xFMUJRVTBzUTBGQlF5eFZRVUZWTzBsQlEycENMRWxCUVVrc1EwRkJReXhWUVVGVk8wbEJRMllzWjBKQlFXZENMRU5CUVVNc1ZVRkJWVHRKUVVNelFpeFJRVUZSTEVOQlFVTXNWVUZCVlR0SlFVTnVRaXhsUVVGbExFTkJRVU1zVlVGQlZUdEpRVU14UWl4VlFVRlZMRU5CUVVNc1ZVRkJWVHRKUVVOeVFpeHJRa0ZCYTBJc1EwRkJReXhWUVVGVk8wbEJRemRDTEV0QlFVc3NRMEZCUXl4VlFVRlZPMGxCUTJoQ0xGTkJRVk1zUTBGQlF5eFZRVUZWTzBsQlEzQkNMR05CUVdNc1EwRkJReXhWUVVGVk8wbEJRM3BDTEUxQlFVMHNRMEZCUXl4VlFVRlZPMGxCUTJwQ0xGbEJRVmtzUTBGQlF5eFZRVUZWTzBsQlEzWkNMR05CUVdNc1EwRkJReXhWUVVGVk8wbEJRM3BDTEU5QlFVOHNRMEZCUXl4VlFVRlZPMGxCUTJ4Q0xHMUNRVUZ0UWl4RFFVRkRMRlZCUVZVN1NVRkRPVUlzU1VGQlNTeERRVUZETEZWQlFWVTdTVUZEWml4blFrRkJaMElzUTBGQlF5eFZRVUZWTzBsQlF6TkNMRkZCUVZFc1EwRkJReXhWUVVGVk8wbEJRMjVDTEU5QlFVOHNRMEZCUXl4VlFVRlZPMGxCUTJ4Q0xGTkJRVk1zUTBGQlF5eFZRVUZWTzBsQlEzQkNMR0ZCUVdFc1EwRkJReXhWUVVGVk8wbEJRM2hDTEZWQlFWVXNRMEZCUXl4VlFVRlZPMGxCUTNKQ0xHVkJRV1VzUTBGQlF5eFZRVUZWTzBOQlF6RkNMRU5CUVVNN1MwRkRRU3hMUVVGTExFTkJRVU1zT0VOQlFYRkNMRVZCUVVVc01FTkJRV2xDTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jb21wb25lbnRzLm1vZHVsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnJlcXVpcmUoJy4vYnVzeS5jc3MnKTtcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBjb21wb25lbnRzRGVmYXVsdFRoZW1lXzEgPSByZXF1aXJlKCcuLi9jb21wb25lbnRzRGVmYXVsdFRoZW1lJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmJ1c3knO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxCdXN5JztcclxudmFyIEJ1c3lDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJ1c3lDb250cm9sbGVyKHVzZURlZmF1bHRUaGVtZSkge1xyXG4gICAgICAgIHRoaXMudXNlRGVmYXVsdFRoZW1lID0gdXNlRGVmYXVsdFRoZW1lO1xyXG4gICAgfVxyXG4gICAgQnVzeUNvbnRyb2xsZXIuJGluamVjdCA9IFtjb21wb25lbnRzRGVmYXVsdFRoZW1lXzEuZGVmYXVsdFRoZW1lVmFsdWVOYW1lXTtcclxuICAgIHJldHVybiBCdXN5Q29udHJvbGxlcjtcclxufSgpKTtcclxudmFyIGJ1c3kgPSB7XHJcbiAgICB0ZW1wbGF0ZTogXCI8aSBjbGFzcz1cXFwiYnVzeSBybC17ezo6YnVzeS5zaXplfX1cXFwiIG5nLWNsYXNzPVxcXCJ7ICdkZWZhdWx0LXRoZW1lJzogYnVzeS51c2VEZWZhdWx0VGhlbWUgfVxcXCIgbmctc2hvdz1cXFwiYnVzeS5sb2FkaW5nXFxcIj48L2k+XCIsXHJcbiAgICBjb250cm9sbGVyOiBCdXN5Q29udHJvbGxlcixcclxuICAgIGNvbnRyb2xsZXJBczogJ2J1c3knLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBsb2FkaW5nOiAnPCcsXHJcbiAgICAgICAgLy8gVmFsaWQgdmFsdWVzIGFyZTpcclxuICAgICAgICAvLyBgbGdgLCBgMnhgLCBgM3hgLCBgNHhgLCBhbmQgYDV4YFxyXG4gICAgICAgIHNpemU6ICdAJyxcclxuICAgIH0sXHJcbn07XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgYnVzeSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVluVnplUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkltSjFjM2t1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNXVUZCV1N4RFFVRkRPMEZCUldJc1VVRkJUeXhaUVVGWkxFTkJRVU1zUTBGQlFUdEJRVVZ3UWl4SlFVRlpMRTlCUVU4c1YwRkJUU3hUUVVGVExFTkJRVU1zUTBGQlFUdEJRVVZ1UXl4MVEwRkJjME1zTWtKQlFUSkNMRU5CUVVNc1EwRkJRVHRCUVVWMlJDeHJRa0ZCVlN4SFFVRlhMSFZDUVVGMVFpeERRVUZETzBGQlF6ZERMSEZDUVVGaExFZEJRVmNzVVVGQlVTeERRVUZETzBGQlRUVkRPMGxCUlVNc2QwSkJRVzFDTEdWQlFYZENPMUZCUVhoQ0xHOUNRVUZsTEVkQlFXWXNaVUZCWlN4RFFVRlRPMGxCUVVrc1EwRkJRenRKUVVSNlF5eHpRa0ZCVHl4SFFVRmhMRU5CUVVNc09FTkJRWEZDTEVOQlFVTXNRMEZCUXp0SlFVVndSQ3h4UWtGQlF6dEJRVUZFTEVOQlFVTXNRVUZJUkN4SlFVZERPMEZCUlVRc1NVRkJTU3hKUVVGSkxFZEJRVGhDTzBsQlEzSkRMRkZCUVZFc1JVRkJSU3d5U0VGQmNVZzdTVUZETDBnc1ZVRkJWU3hGUVVGRkxHTkJRV003U1VGRE1VSXNXVUZCV1N4RlFVRkZMRTFCUVUwN1NVRkRjRUlzVVVGQlVTeEZRVUZGTzFGQlExUXNUMEZCVHl4RlFVRkZMRWRCUVVjN1VVRkRXaXh2UWtGQmIwSTdVVUZEY0VJc2JVTkJRVzFETzFGQlEyNURMRWxCUVVrc1JVRkJSU3hIUVVGSE8wdEJRMVE3UTBGRFJDeERRVUZETzBGQlJVWXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVWQlFVVXNRMEZCUXp0TFFVTTFRaXhUUVVGVExFTkJRVU1zY1VKQlFXRXNSVUZCUlN4SlFVRkpMRU5CUVVNc1EwRkJReUo5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2J1c3kvYnVzeS5qc1xuICoqIG1vZHVsZSBpZCA9IDI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2J1c3kuY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2J1c3kuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vYnVzeS5jc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9idXN5L2J1c3kuY3NzXG4gKiogbW9kdWxlIGlkID0gMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmRlZmF1bHQtdGhlbWUuYnVzeSB7XFxyXFxuXFx0LXdlYmtpdC1hbmltYXRpb246IGZhLXNwaW4gMnMgaW5maW5pdGUgbGluZWFyO1xcclxcblxcdGFuaW1hdGlvbjogZmEtc3BpbiAycyBpbmZpbml0ZSBsaW5lYXI7XFxyXFxuXFx0ZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcblxcdGZvbnQtc2l6ZTogaW5oZXJpdDtcXHJcXG5cXHRmb250LXN0eWxlOiBub3JtYWw7XFxyXFxuXFx0Zm9udC1mYW1pbHk6IEZvbnRBd2Vzb21lO1xcclxcbn1cXHJcXG5cXHJcXG4uZGVmYXVsdC10aGVtZS5idXN5OmJlZm9yZSB7XFxyXFxuXFx0Y29udGVudDogXFxcIlxcXFxGMTEwXFxcIjsgLyogZmEtc3Bpbm5lciAqL1xcclxcbn1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vc291cmNlL2NvbXBvbmVudHMvYnVzeS9idXN5LmNzc1xuICoqIG1vZHVsZSBpZCA9IDI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcclxuZXhwb3J0cy5kZWZhdWx0VGhlbWVWYWx1ZU5hbWUgPSAndXNlRGVmYXVsdFRoZW1lJztcclxuZXhwb3J0cy5kZWZhdWx0VGhlbWVWYWx1ZSA9IHRydWU7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVkyOXRjRzl1Wlc1MGMwUmxabUYxYkhSVWFHVnRaUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkltTnZiWEJ2Ym1WdWRITkVaV1poZFd4MFZHaGxiV1V1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWp0QlFVRlhMRFpDUVVGeFFpeEhRVUZYTEdsQ1FVRnBRaXhEUVVGRE8wRkJRMnhFTEhsQ1FVRnBRaXhIUVVGWkxFbEJRVWtzUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY29tcG9uZW50c0RlZmF1bHRUaGVtZS5qc1xuICoqIG1vZHVsZSBpZCA9IDMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi90eXBpbmdzL2NvbW1vbmpzLmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmJ1dHRvbic7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybEJ1dHRvbic7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnQnV0dG9uQ29udHJvbGxlcic7XHJcbnZhciBCdXR0b25Db250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJ1dHRvbkNvbnRyb2xsZXIoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdGhpcy50eXBlICE9IG51bGwgPyB0aGlzLnR5cGUgOiAnZGVmYXVsdCc7XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVkU2l6ZSA9IHRoaXMuc2l6ZSAhPSBudWxsID8gJ2J0bi0nICsgdGhpcy5zaXplIDogbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBCdXR0b25Db250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkJ1dHRvbkNvbnRyb2xsZXIgPSBCdXR0b25Db250cm9sbGVyO1xyXG52YXIgYnV0dG9uID0ge1xyXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL2J1dHRvbi5odG1sJyksXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIGFjdGlvbjogJyYnLFxyXG4gICAgICAgIHR5cGU6ICdAJyxcclxuICAgICAgICBuZ0Rpc2FibGVkOiAnPD8nLFxyXG4gICAgICAgIHNpemU6ICdAJyxcclxuICAgIH0sXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnYnV0dG9uJyxcclxufTtcclxuZnVuY3Rpb24gYnVpbGRCdXR0b24ob3B0aW9ucykge1xyXG4gICAgdmFyIGNsb25lID0gXy5jbG9uZShidXR0b24pO1xyXG4gICAgY2xvbmUucmVxdWlyZSA9IG9wdGlvbnMucmVxdWlyZTtcclxuICAgIGNsb25lLnRyYW5zY2x1ZGUgPSBvcHRpb25zLnRyYW5zY2x1ZGUgIT0gbnVsbCA/IG9wdGlvbnMudHJhbnNjbHVkZSA6IGNsb25lLnRyYW5zY2x1ZGU7XHJcbiAgICBjbG9uZS50ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XHJcbiAgICBjbG9uZS5jb250cm9sbGVyID0gb3B0aW9ucy5jb250cm9sbGVyIHx8IGNsb25lLmNvbnRyb2xsZXI7XHJcbiAgICBjbG9uZS5jb250cm9sbGVyQXMgPSBvcHRpb25zLmNvbnRyb2xsZXJBcyB8fCBjbG9uZS5jb250cm9sbGVyQXM7XHJcbiAgICBjbG9uZS5iaW5kaW5ncyA9IF8uYXNzaWduKHt9LCBjbG9uZS5iaW5kaW5ncywgb3B0aW9ucy5iaW5kaW5ncyk7XHJcbiAgICBfLmVhY2goY2xvbmUuYmluZGluZ3MsIGZ1bmN0aW9uIChiaW5kaW5nLCBrZXkpIHtcclxuICAgICAgICBpZiAoYmluZGluZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBjbG9uZS5iaW5kaW5nc1trZXldO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIGNsb25lO1xyXG59XHJcbmV4cG9ydHMuYnVpbGRCdXR0b24gPSBidWlsZEJ1dHRvbjtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBidXR0b24pXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBCdXR0b25Db250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWW5WMGRHOXVMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaVluVjBkRzl1TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMREJFUVVFd1JEdEJRVVV4UkN4WlFVRlpMRU5CUVVNN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVVjRRaXhyUWtGQlZTeEhRVUZYTEhsQ1FVRjVRaXhEUVVGRE8wRkJReTlETEhGQ1FVRmhMRWRCUVZjc1ZVRkJWU3hEUVVGRE8wRkJRMjVETEhOQ1FVRmpMRWRCUVZjc2EwSkJRV3RDTEVOQlFVTTdRVUZYZGtRN1NVRlRRenRSUVVORExFbEJRVWtzUTBGQlF5eEpRVUZKTEVkQlFVY3NTVUZCU1N4RFFVRkRMRWxCUVVrc1NVRkJTU3hKUVVGSkxFZEJRVWNzU1VGQlNTeERRVUZETEVsQlFVa3NSMEZCUnl4VFFVRlRMRU5CUVVNN1VVRkRkRVFzU1VGQlNTeERRVUZETEdOQlFXTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1NVRkJTU3hKUVVGSkxFbEJRVWtzUjBGQlJ5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRWxCUVVrc1IwRkJSeXhKUVVGSkxFTkJRVU03U1VGRGNrVXNRMEZCUXp0SlFVTkdMSFZDUVVGRE8wRkJRVVFzUTBGQlF5eEJRV0pFTEVsQllVTTdRVUZpV1N4M1FrRkJaMElzYlVKQllUVkNMRU5CUVVFN1FVRkZSQ3hKUVVGSkxFMUJRVTBzUjBGQk9FSTdTVUZEZGtNc1ZVRkJWU3hGUVVGRkxFbEJRVWs3U1VGRGFFSXNVVUZCVVN4RlFVRkZMRTlCUVU4c1EwRkJReXhsUVVGbExFTkJRVU03U1VGRGJFTXNVVUZCVVN4RlFVRkZPMUZCUTFRc1RVRkJUU3hGUVVGRkxFZEJRVWM3VVVGRFdDeEpRVUZKTEVWQlFVVXNSMEZCUnp0UlFVTlVMRlZCUVZVc1JVRkJSU3hKUVVGSk8xRkJRMmhDTEVsQlFVa3NSVUZCUlN4SFFVRkhPMHRCUTFRN1NVRkRSQ3hWUVVGVkxFVkJRVVVzYzBKQlFXTTdTVUZETVVJc1dVRkJXU3hGUVVGRkxGRkJRVkU3UTBGRGRFSXNRMEZCUXp0QlFVVkdMSEZDUVVFMFFpeFBRVUYxUWp0SlFVTnNSQ3hKUVVGSkxFdEJRVXNzUjBGQlVTeERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8wbEJRMnBETEV0QlFVc3NRMEZCUXl4UFFVRlBMRWRCUVVjc1QwRkJUeXhEUVVGRExFOUJRVThzUTBGQlF6dEpRVU5vUXl4TFFVRkxMRU5CUVVNc1ZVRkJWU3hIUVVGSExFOUJRVThzUTBGQlF5eFZRVUZWTEVsQlFVa3NTVUZCU1N4SFFVRkhMRTlCUVU4c1EwRkJReXhWUVVGVkxFZEJRVWNzUzBGQlN5eERRVUZETEZWQlFWVXNRMEZCUXp0SlFVTjBSaXhMUVVGTExFTkJRVU1zVVVGQlVTeEhRVUZITEU5QlFVOHNRMEZCUXl4UlFVRlJMRU5CUVVNN1NVRkRiRU1zUzBGQlN5eERRVUZETEZWQlFWVXNSMEZCUnl4UFFVRlBMRU5CUVVNc1ZVRkJWU3hKUVVGSkxFdEJRVXNzUTBGQlF5eFZRVUZWTEVOQlFVTTdTVUZETVVRc1MwRkJTeXhEUVVGRExGbEJRVmtzUjBGQlJ5eFBRVUZQTEVOQlFVTXNXVUZCV1N4SlFVRkpMRXRCUVVzc1EwRkJReXhaUVVGWkxFTkJRVU03U1VGRGFFVXNTMEZCU3l4RFFVRkRMRkZCUVZFc1IwRkJSeXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEVWQlFVVXNSVUZCUlN4TFFVRkxMRU5CUVVNc1VVRkJVU3hGUVVGRkxFOUJRVThzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXp0SlFVTm9SU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4UlFVRlJMRVZCUVVVc1ZVRkJReXhQUVVGWkxFVkJRVVVzUjBGQlZ6dFJRVU5vUkN4RlFVRkZMRU5CUVVNc1EwRkJReXhQUVVGUExFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTnlRaXhQUVVGUExFdEJRVXNzUTBGQlF5eFJRVUZSTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNN1VVRkROVUlzUTBGQlF6dEpRVU5HTEVOQlFVTXNRMEZCUXl4RFFVRkRPMGxCUTBnc1RVRkJUU3hEUVVGRExFdEJRVXNzUTBGQlF6dEJRVU5rTEVOQlFVTTdRVUZrWlN4dFFrRkJWeXhqUVdNeFFpeERRVUZCTzBGQlJVUXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVWQlFVVXNRMEZCUXp0TFFVTTFRaXhUUVVGVExFTkJRVU1zY1VKQlFXRXNSVUZCUlN4TlFVRk5MRU5CUVVNN1MwRkRhRU1zVlVGQlZTeERRVUZETEhOQ1FVRmpMRVZCUVVVc1owSkJRV2RDTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9idXR0b24vYnV0dG9uLmpzXG4gKiogbW9kdWxlIGlkID0gMzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4te3s6OmJ1dHRvbi50eXBlfX0ge3s6OmJ1dHRvbi5jb25maWd1cmVkU2l6ZX19XFxcIiBuZy1jbGljaz1cXFwiYnV0dG9uLmFjdGlvbigpXFxcIiBuZy1kaXNhYmxlZD1cXFwiYnV0dG9uLm5nRGlzYWJsZWRcXFwiPlxcclxcblxcdDxzcGFuIG5nLXRyYW5zY2x1ZGU+PC9zcGFuPlxcclxcbjwvYnV0dG9uPlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2J1dHRvbi9idXR0b24uaHRtbFxuICoqIG1vZHVsZSBpZCA9IDMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19wcm9taXNlVXRpbGl0eSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5wcm9taXNlO1xyXG52YXIgYnV0dG9uXzEgPSByZXF1aXJlKCcuLi9idXR0b24vYnV0dG9uJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmJ1dHRvbkFzeW5jJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsQnV0dG9uQXN5bmMnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ0J1dHRvbkFzeW5jQ29udHJvbGxlcic7XHJcbnZhciBCdXR0b25Bc3luY0NvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEJ1dHRvbkFzeW5jQ29udHJvbGxlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEJ1dHRvbkFzeW5jQ29udHJvbGxlcihwcm9taXNlVXRpbGl0eSkge1xyXG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvbWlzZVV0aWxpdHkgPSBwcm9taXNlVXRpbGl0eTtcclxuICAgIH1cclxuICAgIEJ1dHRvbkFzeW5jQ29udHJvbGxlci5wcm90b3R5cGUudHJpZ2dlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICghdGhpcy5idXN5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVzeSA9IHRydWU7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmFjdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wcm9taXNlVXRpbGl0eS5pc1Byb21pc2UocmVzdWx0KSAmJiBfLmlzRnVuY3Rpb24ocmVzdWx0LmZpbmFsbHkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQuZmluYWxseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuYnVzeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAocmVzdWx0ICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1c3kgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCdXR0b25Bc3luY0NvbnRyb2xsZXIuJGluamVjdCA9IFtfX3Byb21pc2VVdGlsaXR5LnNlcnZpY2VOYW1lXTtcclxuICAgIHJldHVybiBCdXR0b25Bc3luY0NvbnRyb2xsZXI7XHJcbn0oYnV0dG9uXzEuQnV0dG9uQ29udHJvbGxlcikpO1xyXG5leHBvcnRzLkJ1dHRvbkFzeW5jQ29udHJvbGxlciA9IEJ1dHRvbkFzeW5jQ29udHJvbGxlcjtcclxudmFyIGJ1dHRvbkFzeW5jID0gYnV0dG9uXzEuYnVpbGRCdXR0b24oe1xyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vYnV0dG9uQXN5bmMuaHRtbCcpLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBidXN5OiAnPD8nLFxyXG4gICAgICAgIHJpZ2h0QWxpZ25lZDogJzw/JyxcclxuICAgIH0sXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG59KTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbX19wcm9taXNlVXRpbGl0eS5tb2R1bGVOYW1lXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBidXR0b25Bc3luYylcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIEJ1dHRvbkFzeW5jQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVluVjBkRzl1UVhONWJtTXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKaWRYUjBiMjVCYzNsdVl5NTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4WlFVRlpMRU5CUVVNN096czdPenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUTI1RExFbEJRVmtzUTBGQlF5eFhRVUZOTEZGQlFWRXNRMEZCUXl4RFFVRkJPMEZCUlRWQ0xEWkRRVUY1UWl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlJYaEVMRWxCUVU4c1owSkJRV2RDTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhQUVVGUExFTkJRVU03UVVGRk0wTXNkVUpCUVRoRExHdENRVUZyUWl4RFFVRkRMRU5CUVVFN1FVRkZkRVFzYTBKQlFWVXNSMEZCVnl3NFFrRkJPRUlzUTBGQlF6dEJRVVZ3UkN4eFFrRkJZU3hIUVVGWExHVkJRV1VzUTBGQlF6dEJRVU40UXl4elFrRkJZeXhIUVVGWExIVkNRVUYxUWl4RFFVRkRPMEZCVnpWRU8wbEJRVEpETEhsRFFVRm5RanRKUVU4eFJDd3JRa0ZCYjBJc1kwRkJaMFE3VVVGRGJrVXNhVUpCUVU4c1EwRkJRenRSUVVSWExHMUNRVUZqTEVkQlFXUXNZMEZCWXl4RFFVRnJRenRKUVVWd1JTeERRVUZETzBsQlJVUXNkVU5CUVU4c1IwRkJVRHRSUVVGQkxHbENRV0ZETzFGQldrRXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTm9RaXhKUVVGSkxFTkJRVU1zU1VGQlNTeEhRVUZITEVsQlFVa3NRMEZCUXp0WlFVVnFRaXhKUVVGSkxFMUJRVTBzUjBGQmFVUXNTVUZCU1N4RFFVRkRMRTFCUVUwc1JVRkJSU3hEUVVGRE8xbEJRM3BGTEVWQlFVVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhqUVVGakxFTkJRVU1zVTBGQlV5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zVFVGQlRTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRE0wVXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJRenR2UWtGRFpDeExRVUZKTEVOQlFVTXNTVUZCU1N4SFFVRkhMRXRCUVVzc1EwRkJRenRuUWtGRGJrSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRTaXhEUVVGRE8xbEJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRk5MRTFCUVUwc1MwRkJTeXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTnFReXhKUVVGSkxFTkJRVU1zU1VGQlNTeEhRVUZITEV0QlFVc3NRMEZCUXp0WlFVTnVRaXhEUVVGRE8xRkJRMFlzUTBGQlF6dEpRVU5HTEVOQlFVTTdTVUZzUWswc05rSkJRVThzUjBGQllTeERRVUZETEdkQ1FVRm5RaXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETzBsQmJVSXpSQ3cwUWtGQlF6dEJRVUZFTEVOQlFVTXNRVUY2UWtRc1EwRkJNa01zZVVKQlFXZENMRWRCZVVJeFJEdEJRWHBDV1N3MlFrRkJjVUlzZDBKQmVVSnFReXhEUVVGQk8wRkJSVVFzU1VGQlNTeFhRVUZYTEVkQlFUaENMRzlDUVVGWExFTkJRVU03U1VGRGVFUXNVVUZCVVN4RlFVRkZMRTlCUVU4c1EwRkJReXh2UWtGQmIwSXNRMEZCUXp0SlFVTjJReXhSUVVGUkxFVkJRVVU3VVVGRFZDeEpRVUZKTEVWQlFVVXNTVUZCU1R0UlFVTldMRmxCUVZrc1JVRkJSU3hKUVVGSk8wdEJRMnhDTzBsQlEwUXNWVUZCVlN4RlFVRkZMSE5DUVVGak8wTkJRekZDTEVOQlFVTXNRMEZCUXp0QlFVVklMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFWVXNSVUZCUlN4RFFVRkRMR2RDUVVGblFpeERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRPMHRCUTNaRUxGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMRmRCUVZjc1EwRkJRenRMUVVOeVF5eFZRVUZWTEVOQlFVTXNjMEpCUVdNc1JVRkJSU3h4UWtGQmNVSXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2J1dHRvbkFzeW5jL2J1dHRvbkFzeW5jLmpzXG4gKiogbW9kdWxlIGlkID0gMzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4te3s6OmJ1dHRvbi50eXBlfX0ge3s6OmJ1dHRvbi5jb25maWd1cmVkU2l6ZX19XFxcIiBuZy1jbGljaz1cXFwiYnV0dG9uLnRyaWdnZXIoKVxcXCIgbmctZGlzYWJsZWQ9XFxcImJ1dHRvbi5idXN5IHx8IGJ1dHRvbi5uZ0Rpc2FibGVkXFxcIj5cXHJcXG5cXHQ8cmwtYnVzeSBuZy1pZj1cXFwiOjpidXR0b24ucmlnaHRBbGlnbmVkXFxcIiBsb2FkaW5nPVxcXCJidXR0b24uYnVzeVxcXCI+PC9ybC1idXN5PlxcclxcblxcdDxzcGFuIG5nLXRyYW5zY2x1ZGU+PC9zcGFuPlxcclxcblxcdDxybC1idXN5IG5nLWlmPVxcXCI6OiFidXR0b24ucmlnaHRBbGlnbmVkXFxcIiBsb2FkaW5nPVxcXCJidXR0b24uYnVzeVxcXCI+PC9ybC1idXN5PlxcclxcbjwvYnV0dG9uPlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2J1dHRvbkFzeW5jL2J1dHRvbkFzeW5jLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgYnV0dG9uXzEgPSByZXF1aXJlKCcuLi9idXR0b24vYnV0dG9uJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmJ1dHRvbkxpbmsnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxCdXR0b25MaW5rJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdCdXR0b25MaW5rQ29udHJvbGxlcic7XHJcbnZhciBCdXR0b25MaW5rQ29udHJvbGxlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQnV0dG9uTGlua0NvbnRyb2xsZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCdXR0b25MaW5rQ29udHJvbGxlcigpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMubmV3VGFiID8gJ19ibGFuaycgOiAnX3NlbGYnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIEJ1dHRvbkxpbmtDb250cm9sbGVyO1xyXG59KGJ1dHRvbl8xLkJ1dHRvbkNvbnRyb2xsZXIpKTtcclxuZXhwb3J0cy5CdXR0b25MaW5rQ29udHJvbGxlciA9IEJ1dHRvbkxpbmtDb250cm9sbGVyO1xyXG52YXIgYnV0dG9uTGluayA9IGJ1dHRvbl8xLmJ1aWxkQnV0dG9uKHtcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL2J1dHRvbkxpbmsuaHRtbCcpLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBsaW5rOiAnQCcsXHJcbiAgICAgICAgbmV3VGFiOiAnPD8nLFxyXG4gICAgICAgIGFjdGlvbjogbnVsbCxcclxuICAgIH0sXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG59KTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBidXR0b25MaW5rKVxyXG4gICAgLmNvbnRyb2xsZXIoZXhwb3J0cy5jb250cm9sbGVyTmFtZSwgQnV0dG9uTGlua0NvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lZblYwZEc5dVRHbHVheTVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkltSjFkSFJ2Ymt4cGJtc3VkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc01FUkJRVEJFTzBGQlJURkVMRmxCUVZrc1EwRkJRenM3T3pzN08wRkJSV0lzU1VGQldTeFBRVUZQTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkZia01zZFVKQlFUaERMR3RDUVVGclFpeERRVUZETEVOQlFVRTdRVUZGZEVRc2EwSkJRVlVzUjBGQlZ5dzJRa0ZCTmtJc1EwRkJRenRCUVVOdVJDeHhRa0ZCWVN4SFFVRlhMR05CUVdNc1EwRkJRenRCUVVOMlF5eHpRa0ZCWXl4SFFVRlhMSE5DUVVGelFpeERRVUZETzBGQlJUTkVPMGxCUVRCRExIZERRVUZuUWp0SlFVOTZSRHRSUVVORExHbENRVUZQTEVOQlFVTTdVVUZEVWl4SlFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSExFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NVVUZCVVN4SFFVRkhMRTlCUVU4c1EwRkJRenRKUVVOb1JDeERRVUZETzBsQlEwWXNNa0pCUVVNN1FVRkJSQ3hEUVVGRExFRkJXRVFzUTBGQk1FTXNlVUpCUVdkQ0xFZEJWM3BFTzBGQldGa3NORUpCUVc5Q0xIVkNRVmRvUXl4RFFVRkJPMEZCUlVRc1NVRkJTU3hWUVVGVkxFZEJRVGhDTEc5Q1FVRlhMRU5CUVVNN1NVRkRka1FzVVVGQlVTeEZRVUZGTEU5QlFVOHNRMEZCUXl4dFFrRkJiVUlzUTBGQlF6dEpRVU4wUXl4UlFVRlJMRVZCUVVVN1VVRkRWQ3hKUVVGSkxFVkJRVVVzUjBGQlJ6dFJRVU5VTEUxQlFVMHNSVUZCUlN4SlFVRkpPMUZCUTFvc1RVRkJUU3hGUVVGRkxFbEJRVWs3UzBGRFdqdEpRVU5FTEZWQlFWVXNSVUZCUlN4elFrRkJZenREUVVNeFFpeERRVUZETEVOQlFVTTdRVUZGU0N4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVXNSVUZCUlN4RFFVRkRPMHRCUXpWQ0xGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMRlZCUVZVc1EwRkJRenRMUVVOd1F5eFZRVUZWTEVOQlFVTXNjMEpCUVdNc1JVRkJSU3h2UWtGQmIwSXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2J1dHRvbkxpbmsvYnV0dG9uTGluay5qc1xuICoqIG1vZHVsZSBpZCA9IDM1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGEgY2xhc3M9XFxcImJ0biBidG4te3s6OmJ1dHRvbi50eXBlfX0ge3s6OmJ1dHRvbi5jb25maWd1cmVkU2l6ZX19XFxcIiBuZy1ocmVmPVxcXCJ7e2J1dHRvbi5saW5rfX1cXFwiIG5nLWRpc2FibGVkPVxcXCJidXR0b24ubmdEaXNhYmxlZFxcXCIgdGFyZ2V0PVxcXCJ7ezo6YnV0dG9uLnRhcmdldH19XFxcIj5cXHJcXG5cXHQ8c3BhbiBuZy10cmFuc2NsdWRlPjwvc3Bhbj5cXHJcXG48L2E+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvYnV0dG9uTGluay9idXR0b25MaW5rLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgYnV0dG9uXzEgPSByZXF1aXJlKCcuLi9idXR0b24vYnV0dG9uJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmJ1dHRvblN1Ym1pdCc7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybEJ1dHRvblN1Ym1pdCc7XHJcbnZhciBidXR0b25TdWJtaXQgPSBidXR0b25fMS5idWlsZEJ1dHRvbih7XHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9idXR0b25TdWJtaXQuaHRtbCcpLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICByaWdodEFsaWduZWQ6ICc8PycsXHJcbiAgICAgICAgc2F2aW5nOiAnPD8nLFxyXG4gICAgICAgIGFjdGlvbjogbnVsbCxcclxuICAgIH0sXHJcbn0pO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIGJ1dHRvblN1Ym1pdCk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVluVjBkRzl1VTNWaWJXbDBMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaVluVjBkRzl1VTNWaWJXbDBMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxEQkVRVUV3UkR0QlFVVXhSQ3haUVVGWkxFTkJRVU03UVVGRllpeEpRVUZaTEU5QlFVOHNWMEZCVFN4VFFVRlRMRU5CUVVNc1EwRkJRVHRCUVVWdVF5eDFRa0ZCTkVJc2EwSkJRV3RDTEVOQlFVTXNRMEZCUVR0QlFVVndReXhyUWtGQlZTeEhRVUZYTEN0Q1FVRXJRaXhEUVVGRE8wRkJRM0pFTEhGQ1FVRmhMRWRCUVZjc1owSkJRV2RDTEVOQlFVTTdRVUZGY0VRc1NVRkJTU3haUVVGWkxFZEJRVGhDTEc5Q1FVRlhMRU5CUVVNN1NVRkRlRVFzVVVGQlVTeEZRVUZGTEU5QlFVOHNRMEZCUXl4eFFrRkJjVUlzUTBGQlF6dEpRVU40UXl4UlFVRlJMRVZCUVVVN1VVRkRWQ3haUVVGWkxFVkJRVVVzU1VGQlNUdFJRVU5zUWl4TlFVRk5MRVZCUVVVc1NVRkJTVHRSUVVOYUxFMUJRVTBzUlVGQlJTeEpRVUZKTzB0QlExbzdRMEZEUkN4RFFVRkRMRU5CUVVNN1FVRkZTaXhQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVc1JVRkJSU3hEUVVGRE8wdEJRelZDTEZOQlFWTXNRMEZCUXl4eFFrRkJZU3hGUVVGRkxGbEJRVmtzUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9idXR0b25TdWJtaXQvYnV0dG9uU3VibWl0LmpzXG4gKiogbW9kdWxlIGlkID0gMzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8YnV0dG9uIHR5cGU9XFxcInN1Ym1pdFxcXCIgY2xhc3M9XFxcImJ0biBidG4te3s6OmJ1dHRvbi50eXBlfX0ge3s6OmJ1dHRvbi5jb25maWd1cmVkU2l6ZX19XFxcIiBuZy1kaXNhYmxlZD1cXFwiYnV0dG9uLnNhdmluZyB8fCBidXR0b24ubmdEaXNhYmxlZFxcXCI+XFxyXFxuXFx0PHJsLWJ1c3kgbmctaWY9XFxcIjo6YnV0dG9uLnJpZ2h0QWxpZ25lZFxcXCIgbG9hZGluZz1cXFwiYnV0dG9uLnNhdmluZ1xcXCI+PC9ybC1idXN5PlxcclxcblxcdDxzcGFuIG5nLXRyYW5zY2x1ZGU+PC9zcGFuPlxcclxcblxcdDxybC1idXN5IG5nLWlmPVxcXCI6OiFidXR0b24ucmlnaHRBbGlnbmVkXFxcIiBsb2FkaW5nPVxcXCJidXR0b24uc2F2aW5nXFxcIj48L3JsLWJ1c3k+XFxyXFxuPC9idXR0b24+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvYnV0dG9uU3VibWl0L2J1dHRvblN1Ym1pdC5odG1sXG4gKiogbW9kdWxlIGlkID0gMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufTtcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBidXR0b25fMSA9IHJlcXVpcmUoJy4uL2J1dHRvbi9idXR0b24nKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuYnV0dG9uVG9nZ2xlJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsQnV0dG9uVG9nZ2xlJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdCdXR0b25Ub2dnbGVDb250cm9sbGVyJztcclxudmFyIEJ1dHRvblRvZ2dsZUNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEJ1dHRvblRvZ2dsZUNvbnRyb2xsZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBCdXR0b25Ub2dnbGVDb250cm9sbGVyKCkge1xyXG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1dHRvblRvZ2dsZUNvbnRyb2xsZXIucHJvdG90eXBlLCBcImNoZWNrZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZ01vZGVsLiR2aWV3VmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5nTW9kZWwuJHNldFZpZXdWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBCdXR0b25Ub2dnbGVDb250cm9sbGVyLnByb3RvdHlwZS5jbGlja2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5uZ0Rpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tlZCA9ICF0aGlzLmNoZWNrZWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25Ub2dnbGUoeyB2YWx1ZTogdGhpcy5jaGVja2VkIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQnV0dG9uVG9nZ2xlQ29udHJvbGxlcjtcclxufShidXR0b25fMS5CdXR0b25Db250cm9sbGVyKSk7XHJcbmV4cG9ydHMuQnV0dG9uVG9nZ2xlQ29udHJvbGxlciA9IEJ1dHRvblRvZ2dsZUNvbnRyb2xsZXI7XHJcbnZhciBidXR0b25Ub2dnbGUgPSBidXR0b25fMS5idWlsZEJ1dHRvbih7XHJcbiAgICByZXF1aXJlOiB7IG5nTW9kZWw6ICdebmdNb2RlbCcgfSxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL2J1dHRvblRvZ2dsZS5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnYnV0dG9uVG9nZ2xlJyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgb25Ub2dnbGU6ICcmJyxcclxuICAgICAgICBhY3Rpb246IG51bGwsXHJcbiAgICB9LFxyXG59KTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBidXR0b25Ub2dnbGUpXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBCdXR0b25Ub2dnbGVDb250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWW5WMGRHOXVWRzluWjJ4bExtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpWW5WMGRHOXVWRzluWjJ4bExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEZsQlFWa3NRMEZCUXpzN096czdPMEZCUldJc1NVRkJXU3hQUVVGUExGZEJRVTBzVTBGQlV5eERRVUZETEVOQlFVRTdRVUZKYmtNc2RVSkJRVGhETEd0Q1FVRnJRaXhEUVVGRExFTkJRVUU3UVVGRmRFUXNhMEpCUVZVc1IwRkJWeXdyUWtGQkswSXNRMEZCUXp0QlFVTnlSQ3h4UWtGQllTeEhRVUZYTEdkQ1FVRm5RaXhEUVVGRE8wRkJRM3BETEhOQ1FVRmpMRWRCUVZjc2QwSkJRWGRDTEVOQlFVTTdRVUZoTjBRN1NVRkJORU1zTUVOQlFXZENPMGxCWVRORU8xRkJRME1zYVVKQlFVOHNRMEZCUXp0SlFVTlVMRU5CUVVNN1NVRldSQ3h6UWtGQlNTd3lRMEZCVHp0aFFVRllPMWxCUTBNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNWVUZCVlN4RFFVRkRPMUZCUTJoRExFTkJRVU03WVVGRlJDeFZRVUZaTEV0QlFXTTdXVUZEZWtJc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eGhRVUZoTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNN1VVRkRia01zUTBGQlF6czdPMDlCU2tFN1NVRlZSQ3gzUTBGQlR5eEhRVUZRTzFGQlEwTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTjBRaXhKUVVGSkxFTkJRVU1zVDBGQlR5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJRenRaUVVNM1FpeEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRVZCUVVVc1MwRkJTeXhGUVVGRkxFbEJRVWtzUTBGQlF5eFBRVUZQTEVWQlFVVXNRMEZCUXl4RFFVRkRPMUZCUTNoRExFTkJRVU03U1VGRFJpeERRVUZETzBsQlEwWXNOa0pCUVVNN1FVRkJSQ3hEUVVGRExFRkJka0pFTEVOQlFUUkRMSGxDUVVGblFpeEhRWFZDTTBRN1FVRjJRbGtzT0VKQlFYTkNMSGxDUVhWQ2JFTXNRMEZCUVR0QlFVVkVMRWxCUVVrc1dVRkJXU3hIUVVFNFFpeHZRa0ZCVnl4RFFVRkRPMGxCUTNwRUxFOUJRVThzUlVGQlJTeEZRVUZGTEU5QlFVOHNSVUZCUlN4VlFVRlZMRVZCUVVVN1NVRkRhRU1zVVVGQlVTeEZRVUZGTEU5QlFVOHNRMEZCUXl4eFFrRkJjVUlzUTBGQlF6dEpRVU40UXl4VlFVRlZMRVZCUVVVc2MwSkJRV003U1VGRE1VSXNXVUZCV1N4RlFVRkZMR05CUVdNN1NVRkROVUlzVVVGQlVTeEZRVUZGTzFGQlExUXNVVUZCVVN4RlFVRkZMRWRCUVVjN1VVRkRZaXhOUVVGTkxFVkJRVVVzU1VGQlNUdExRVU5hTzBOQlEwUXNRMEZCUXl4RFFVRkRPMEZCUlVnc1QwRkJUeXhEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZMRVZCUVVVc1EwRkJRenRMUVVNMVFpeFRRVUZUTEVOQlFVTXNjVUpCUVdFc1JVRkJSU3haUVVGWkxFTkJRVU03UzBGRGRFTXNWVUZCVlN4RFFVRkRMSE5DUVVGakxFVkJRVVVzYzBKQlFYTkNMRU5CUVVNc1EwRkJReUo5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2J1dHRvblRvZ2dsZS9idXR0b25Ub2dnbGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi17ezo6YnV0dG9uVG9nZ2xlLnR5cGV9fSB7ezo6YnV0dG9uVG9nZ2xlLmNvbmZpZ3VyZWRTaXplfX1cXFwiXFxyXFxuXFx0XFx0bmctY2xhc3M9XFxcInsgYWN0aXZlIDogYnV0dG9uVG9nZ2xlLmNoZWNrZWQgfVxcXCIgbmctY2xpY2s9XFxcImJ1dHRvblRvZ2dsZS5jbGlja2VkKClcXFwiIG5nLWRpc2FibGVkPVxcXCJidXR0b25Ub2dnbGUubmdEaXNhYmxlZFxcXCI+XFxyXFxuXFx0PGkgbmctc2hvdz1cXFwiYnV0dG9uVG9nZ2xlLmNoZWNrZWRcXFwiIGNsYXNzPVxcXCJmYSBmYS1jaGVjayBjb21wbGV0ZWRcXFwiPjwvaT4gPHNwYW4gbmctdHJhbnNjbHVkZT48L3NwYW4+XFxyXFxuPC9idXR0b24+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvYnV0dG9uVG9nZ2xlL2J1dHRvblRvZ2dsZS5odG1sXG4gKiogbW9kdWxlIGlkID0gNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG52YXIgX19hcnJheSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5hcnJheTtcclxudmFyIF9fcGFyZW50Q2hpbGQgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMucGFyZW50Q2hpbGRCZWhhdmlvcjtcclxudmFyIF9fZ2VuZXJpY1NlYXJjaEZpbHRlciA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5nZW5lcmljU2VhcmNoRmlsdGVyO1xyXG52YXIgY2FyZCA9IHJlcXVpcmUoJy4vY2FyZC9jYXJkJyk7XHJcbmV4cG9ydHMuY2FyZCA9IGNhcmQ7XHJcbnZhciBjYXJkU2VhcmNoID0gcmVxdWlyZSgnLi9jYXJkU2VhcmNoL2NhcmRTZWFyY2gnKTtcclxuZXhwb3J0cy5jYXJkU2VhcmNoID0gY2FyZFNlYXJjaDtcclxudmFyIGNvbHVtbkhlYWRlciA9IHJlcXVpcmUoJy4vY29sdW1uSGVhZGVyL2NvbHVtbkhlYWRlcicpO1xyXG5leHBvcnRzLmNvbHVtbkhlYWRlciA9IGNvbHVtbkhlYWRlcjtcclxudmFyIGRhdGFTb3VyY2VzID0gcmVxdWlyZSgnLi9kYXRhU291cmNlcy9kYXRhU291cmNlcy5tb2R1bGUnKTtcclxuZXhwb3J0cy5kYXRhU291cmNlcyA9IGRhdGFTb3VyY2VzO1xyXG52YXIgZmlsdGVycyA9IHJlcXVpcmUoJy4vZmlsdGVycy9maWx0ZXJzLm1vZHVsZScpO1xyXG5leHBvcnRzLmZpbHRlcnMgPSBmaWx0ZXJzO1xyXG52YXIgaXRlbUNvdW50ID0gcmVxdWlyZSgnLi9pdGVtQ291bnQvaXRlbUNvdW50Jyk7XHJcbmV4cG9ydHMuaXRlbUNvdW50ID0gaXRlbUNvdW50O1xyXG52YXIgcGFnZXIgPSByZXF1aXJlKCcuL3BhZ2VyL3BhZ2VyJyk7XHJcbmV4cG9ydHMucGFnZXIgPSBwYWdlcjtcclxudmFyIHBhZ2VTaXplID0gcmVxdWlyZSgnLi9wYWdlU2l6ZS9wYWdlU2l6ZScpO1xyXG5leHBvcnRzLnBhZ2VTaXplID0gcGFnZVNpemU7XHJcbnZhciBzZWxlY3Rpb25Db250cm9sID0gcmVxdWlyZSgnLi9zZWxlY3Rpb25Db250cm9sL3NlbGVjdGlvbkNvbnRyb2wnKTtcclxuZXhwb3J0cy5zZWxlY3Rpb25Db250cm9sID0gc2VsZWN0aW9uQ29udHJvbDtcclxudmFyIHNvcnRzID0gcmVxdWlyZSgnLi9zb3J0cy9zb3J0cy5tb2R1bGUnKTtcclxuZXhwb3J0cy5zb3J0cyA9IHNvcnRzO1xyXG52YXIgY2FyZENvbnRhaW5lcl8xID0gcmVxdWlyZSgnLi9jYXJkQ29udGFpbmVyJyk7XHJcbnZhciBidWlsZGVyID0gcmVxdWlyZSgnLi9jYXJkQ29udGFpbmVyQnVpbGRlci5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMuYnVpbGRlciA9IGJ1aWxkZXI7XHJcbnZhciBkZWZhdWx0Q29tcG9uZW50c18xID0gcmVxdWlyZSgnLi9kZWZhdWx0Q29tcG9uZW50cycpO1xyXG5fX2V4cG9ydChyZXF1aXJlKCcuL2NhcmRDb250YWluZXInKSk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXInO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgIC8vIGRlcGVuZGVuY2llc1xyXG4gICAgZGF0YVNvdXJjZXMuZGF0YVBhZ2VyLm1vZHVsZU5hbWUsXHJcbiAgICBfX29iamVjdC5tb2R1bGVOYW1lLFxyXG4gICAgX19hcnJheS5tb2R1bGVOYW1lLFxyXG4gICAgX19wYXJlbnRDaGlsZC5tb2R1bGVOYW1lLFxyXG4gICAgX19nZW5lcmljU2VhcmNoRmlsdGVyLm1vZHVsZU5hbWUsXHJcbiAgICAvLyBjb21wb25lbnRzXHJcbiAgICBjYXJkLm1vZHVsZU5hbWUsXHJcbiAgICBjYXJkU2VhcmNoLm1vZHVsZU5hbWUsXHJcbiAgICBjb2x1bW5IZWFkZXIubW9kdWxlTmFtZSxcclxuICAgIGl0ZW1Db3VudC5tb2R1bGVOYW1lLFxyXG4gICAgcGFnZXIubW9kdWxlTmFtZSxcclxuICAgIHBhZ2VTaXplLm1vZHVsZU5hbWUsXHJcbiAgICBzZWxlY3Rpb25Db250cm9sLm1vZHVsZU5hbWUsXHJcbiAgICAvLyBzdWJtb2R1bGVzXHJcbiAgICBkYXRhU291cmNlcy5tb2R1bGVOYW1lLFxyXG4gICAgZmlsdGVycy5tb2R1bGVOYW1lLFxyXG4gICAgc29ydHMubW9kdWxlTmFtZSxcclxuXSlcclxuICAgIC5jb21wb25lbnQoY2FyZENvbnRhaW5lcl8xLmNvbXBvbmVudE5hbWUsIGNhcmRDb250YWluZXJfMS5jYXJkQ29udGFpbmVyKVxyXG4gICAgLmNvbnRyb2xsZXIoY2FyZENvbnRhaW5lcl8xLmNvbnRyb2xsZXJOYW1lLCBjYXJkQ29udGFpbmVyXzEuQ2FyZENvbnRhaW5lckNvbnRyb2xsZXIpXHJcbiAgICAuZmFjdG9yeShidWlsZGVyLmZhY3RvcnlOYW1lLCBidWlsZGVyLmNhcmRDb250YWluZXJCdWlsZGVyRmFjdG9yeSlcclxuICAgIC5jb21wb25lbnQoZGVmYXVsdENvbXBvbmVudHNfMS5oZWFkZXJDb21wb25lbnROYW1lLCBkZWZhdWx0Q29tcG9uZW50c18xLmRlZmF1bHRDb250YWluZXJIZWFkZXIpXHJcbiAgICAuY29tcG9uZW50KGRlZmF1bHRDb21wb25lbnRzXzEuZm9vdGVyQ29tcG9uZW50TmFtZSwgZGVmYXVsdENvbXBvbmVudHNfMS5kZWZhdWx0Q29udGFpbmVyRm9vdGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWTJGeVpFTnZiblJoYVc1bGNpNXRiMlIxYkdVdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUpqWVhKa1EyOXVkR0ZwYm1WeUxtMXZaSFZzWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3haUVVGWkxFTkJRVU03T3pzN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVVnVReXcyUTBGQmVVSXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlFUdEJRVU40UkN4SlFVRlBMRkZCUVZFc1IwRkJSeXgxUTBGQlVTeERRVUZETEUxQlFVMHNRMEZCUXp0QlFVTnNReXhKUVVGUExFOUJRVThzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRXRCUVVzc1EwRkJRenRCUVVOb1F5eEpRVUZQTEdGQlFXRXNSMEZCUnl4MVEwRkJVU3hEUVVGRExHMUNRVUZ0UWl4RFFVRkRPMEZCUTNCRUxFbEJRVThzY1VKQlFYRkNMRWRCUVVjc2RVTkJRVkVzUTBGQlF5eHRRa0ZCYlVJc1EwRkJRenRCUVVVMVJDeEpRVUZaTEVsQlFVa3NWMEZCVFN4aFFVRmhMRU5CUVVNc1EwRkJRVHRCUVdsQ2JrTXNXVUZCU1R0QlFXaENUQ3hKUVVGWkxGVkJRVlVzVjBGQlRTeDVRa0ZCZVVJc1EwRkJReXhEUVVGQk8wRkJhVUp5UkN4clFrRkJWVHRCUVdoQ1dDeEpRVUZaTEZsQlFWa3NWMEZCVFN3MlFrRkJOa0lzUTBGQlF5eERRVUZCTzBGQmFVSXpSQ3h2UWtGQldUdEJRV2hDWWl4SlFVRlpMRmRCUVZjc1YwRkJUU3hyUTBGQmEwTXNRMEZCUXl4RFFVRkJPMEZCYVVJdlJDeHRRa0ZCVnp0QlFXaENXaXhKUVVGWkxFOUJRVThzVjBGQlRTd3dRa0ZCTUVJc1EwRkJReXhEUVVGQk8wRkJhVUp1UkN4bFFVRlBPMEZCYUVKU0xFbEJRVmtzVTBGQlV5eFhRVUZOTEhWQ1FVRjFRaXhEUVVGRExFTkJRVUU3UVVGcFFteEVMR2xDUVVGVE8wRkJhRUpXTEVsQlFWa3NTMEZCU3l4WFFVRk5MR1ZCUVdVc1EwRkJReXhEUVVGQk8wRkJhVUowUXl4aFFVRkxPMEZCYUVKT0xFbEJRVmtzVVVGQlVTeFhRVUZOTEhGQ1FVRnhRaXhEUVVGRExFTkJRVUU3UVVGcFFpOURMR2RDUVVGUk8wRkJhRUpVTEVsQlFWa3NaMEpCUVdkQ0xGZEJRVTBzY1VOQlFYRkRMRU5CUVVNc1EwRkJRVHRCUVdsQ2RrVXNkMEpCUVdkQ08wRkJhRUpxUWl4SlFVRlpMRXRCUVVzc1YwRkJUU3h6UWtGQmMwSXNRMEZCUXl4RFFVRkJPMEZCYVVJM1F5eGhRVUZMTzBGQlprNHNPRUpCUVhOR0xHbENRVUZwUWl4RFFVRkRMRU5CUVVFN1FVRkRlRWNzU1VGQldTeFBRVUZQTEZkQlFVMHNaME5CUVdkRExFTkJRVU1zUTBGQlFUdEJRVWw2UkN4bFFVRlBPMEZCU0ZJc2EwTkJRWGxITEhGQ1FVRnhRaXhEUVVGRExFTkJRVUU3UVVGblFpOUlMR2xDUVVGakxHbENRVUZwUWl4RFFVRkRMRVZCUVVFN1FVRkhja0lzYTBKQlFWVXNSMEZCVnl4blEwRkJaME1zUTBGQlF6dEJRVVZxUlN4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVTdTVUZETVVJc1pVRkJaVHRKUVVObUxGZEJRVmNzUTBGQlF5eFRRVUZUTEVOQlFVTXNWVUZCVlR0SlFVTm9ReXhSUVVGUkxFTkJRVU1zVlVGQlZUdEpRVU51UWl4UFFVRlBMRU5CUVVNc1ZVRkJWVHRKUVVOc1FpeGhRVUZoTEVOQlFVTXNWVUZCVlR0SlFVTjRRaXh4UWtGQmNVSXNRMEZCUXl4VlFVRlZPMGxCUldoRExHRkJRV0U3U1VGRFlpeEpRVUZKTEVOQlFVTXNWVUZCVlR0SlFVTm1MRlZCUVZVc1EwRkJReXhWUVVGVk8wbEJRM0pDTEZsQlFWa3NRMEZCUXl4VlFVRlZPMGxCUTNaQ0xGTkJRVk1zUTBGQlF5eFZRVUZWTzBsQlEzQkNMRXRCUVVzc1EwRkJReXhWUVVGVk8wbEJRMmhDTEZGQlFWRXNRMEZCUXl4VlFVRlZPMGxCUTI1Q0xHZENRVUZuUWl4RFFVRkRMRlZCUVZVN1NVRkZNMElzWVVGQllUdEpRVU5pTEZkQlFWY3NRMEZCUXl4VlFVRlZPMGxCUTNSQ0xFOUJRVThzUTBGQlF5eFZRVUZWTzBsQlEyeENMRXRCUVVzc1EwRkJReXhWUVVGVk8wTkJRMmhDTEVOQlFVTTdTMEZEUVN4VFFVRlRMRU5CUVVNc05rSkJRV0VzUlVGQlJTdzJRa0ZCWVN4RFFVRkRPMHRCUTNaRExGVkJRVlVzUTBGQlF5dzRRa0ZCWXl4RlFVRkZMSFZEUVVGMVFpeERRVUZETzB0QlEyNUVMRTlCUVU4c1EwRkJReXhQUVVGUExFTkJRVU1zVjBGQlZ5eEZRVUZGTEU5QlFVOHNRMEZCUXl3eVFrRkJNa0lzUTBGQlF6dExRVU5xUlN4VFFVRlRMRU5CUVVNc2RVTkJRVzFDTEVWQlFVVXNNRU5CUVhOQ0xFTkJRVU03UzBGRGRFUXNVMEZCVXl4RFFVRkRMSFZEUVVGdFFpeEZRVUZGTERCRFFVRnpRaXhEUVVGRExFTkJRVU1pZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2NhcmRDb250YWluZXIubW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL3R5cGluZ3MvanF1ZXJ5L2pxdWVyeS5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgUnggPSByZXF1aXJlKCdyeCcpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19wYXJlbnRDaGlsZCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5wYXJlbnRDaGlsZEJlaGF2aW9yO1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG52YXIgaGVhZGVyQ29sdW1uX21vZHVsZV8xID0gcmVxdWlyZSgnLi9oZWFkZXJDb2x1bW4vaGVhZGVyQ29sdW1uLm1vZHVsZScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5jYXJkQ29udGFpbmVyLmNhcmQnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxDYXJkJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdDYXJkQ29udHJvbGxlcic7XHJcbnZhciBDYXJkQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDYXJkQ29udHJvbGxlcigkc2NvcGUsICRjb250cm9sbGVyLCAkcSwgJGVsZW1lbnQsIHBhcmVudENoaWxkLCBvYmplY3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMuJHEgPSAkcTtcclxuICAgICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRDaGlsZCA9IHBhcmVudENoaWxkO1xyXG4gICAgICAgIHRoaXMuc2hvd0NvbnRlbnQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmRpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZUxpbmsgPSB7fTtcclxuICAgICAgICB0aGlzLmF1dG9zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuc2hvd0NvbnRlbnQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX3RoaXMucGFyZW50Q2hpbGQudHJpZ2dlckNoaWxkQmVoYXZpb3IoX3RoaXMuYXV0b3NhdmVMaW5rLCBmdW5jdGlvbiAoYmVoYXZpb3IpIHtcclxuICAgICAgICAgICAgICAgIGlmIChiZWhhdmlvci5hdXRvc2F2ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuc2hvd0NvbnRlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5jYXJkQXMpIHtcclxuICAgICAgICAgICAgJHNjb3BlW3RoaXMuY2FyZEFzXSA9IHRoaXMuaXRlbTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLmNvbGxhcHNlID0gdGhpcy5hdXRvc2F2ZTtcclxuICAgICAgICAkc2NvcGUuc2V0U2VsZWN0ZWQgPSB0aGlzLnNldFNlbGVjdGVkLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoID0gbmV3IFJ4LlN1YmplY3QoKTtcclxuICAgICAgICAkc2NvcGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc291cmNlLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgX3RoaXMucmVmcmVzaC5vbk5leHQobnVsbCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAkc2NvcGUucmVtb3ZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5zb3VyY2UucmVtb3ZlKF90aGlzLml0ZW0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJHNjb3BlLmNvbnRhaW5lckRhdGEgPSB0aGlzLmNvbnRhaW5lckRhdGE7XHJcbiAgICAgICAgaWYgKG9iamVjdC5pc051bGxPcldoaXRlc3BhY2UodGhpcy5jYXJkQ29udHJvbGxlcikgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gJGNvbnRyb2xsZXIodGhpcy5jYXJkQ29udHJvbGxlciwgeyAkc2NvcGU6ICRzY29wZSB9KTtcclxuICAgICAgICAgICAgaWYgKG9iamVjdC5pc051bGxPcldoaXRlc3BhY2UodGhpcy5jYXJkQ29udHJvbGxlckFzKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICRzY29wZVt0aGlzLmNhcmRDb250cm9sbGVyQXNdID0gY29udHJvbGxlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBwYXJlbnRDaGlsZC5yZWdpc3RlckNoaWxkQmVoYXZpb3IodGhpcy5pdGVtLCB7XHJcbiAgICAgICAgICAgIGNsb3NlOiB0aGlzLmF1dG9zYXZlLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgQ2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZUNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNob3dDb250ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMub3BlbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRvc2F2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDYXJkQ29udHJvbGxlci5wcm90b3R5cGUudmFsaWRhdGVDYXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiZWhhdmlvciA9IHRoaXMucGFyZW50Q2hpbGQuZ2V0Q2hpbGRCZWhhdmlvcih0aGlzLml0ZW0pO1xyXG4gICAgICAgIGlmIChfLmlzRnVuY3Rpb24oYmVoYXZpb3IudmFsaWRhdGVDYXJkKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYmVoYXZpb3IudmFsaWRhdGVDYXJkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNhdmVDYXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiZWhhdmlvciA9IHRoaXMucGFyZW50Q2hpbGQuZ2V0Q2hpbGRCZWhhdmlvcih0aGlzLml0ZW0pO1xyXG4gICAgICAgIGlmIChfLmlzRnVuY3Rpb24oYmVoYXZpb3Iuc2F2ZUNhcmQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBiZWhhdmlvci5zYXZlQ2FyZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHEud2hlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDYXJkQ29udHJvbGxlci5wcm90b3R5cGUuY2xpY2tDYXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMucGFyZW50Q2hpbGQudHJpZ2dlckNoaWxkQmVoYXZpb3IodGhpcy5pdGVtLCBmdW5jdGlvbiAoYmVoYXZpb3IpIHtcclxuICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihiZWhhdmlvci5jbGlja0NhcmQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmVoYXZpb3IuY2xpY2tDYXJkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBDYXJkQ29udHJvbGxlci5wcm90b3R5cGUuJHBvc3RMaW5rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLm1ha2VDYXJkKHRoaXMuJHNjb3BlLCBmdW5jdGlvbiAoY29udGVudCkge1xyXG4gICAgICAgICAgICB2YXIgY29udGVudEFyZWEgPSBfdGhpcy4kZWxlbWVudC5maW5kKCcuY29udGVudC10ZW1wbGF0ZScpO1xyXG4gICAgICAgICAgICBjb250ZW50QXJlYS5hcHBlbmQoY29udGVudCk7XHJcbiAgICAgICAgICAgIF90aGlzLmhhc0JvZHkgPSBjb250ZW50Lmxlbmd0aCA+IDA7XHJcbiAgICAgICAgfSwgbnVsbCwgJ2NvbnRlbnRTbG90Jyk7XHJcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLm1ha2VDYXJkKHRoaXMuJHNjb3BlLCBmdW5jdGlvbiAoZm9vdGVyKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhhc0Zvb3RlciA9IChmb290ZXIubGVuZ3RoID4gMCk7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5oYXNGb290ZXIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmb290ZXJBcmVhID0gX3RoaXMuJGVsZW1lbnQuZmluZCgnLmZvb3Rlci10ZW1wbGF0ZScpO1xyXG4gICAgICAgICAgICAgICAgZm9vdGVyQXJlYS5hcHBlbmQoZm9vdGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIG51bGwsICdmb290ZXJTbG90Jyk7XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRyb2xsZXIucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRDaGlsZC50cmlnZ2VyQ2hpbGRCZWhhdmlvcih0aGlzLml0ZW0sIGZ1bmN0aW9uIChiZWhhdmlvcikge1xyXG4gICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKGJlaGF2aW9yLmluaXRDYXJkKSkge1xyXG4gICAgICAgICAgICAgICAgYmVoYXZpb3IuaW5pdENhcmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLmNhcmRDb250YWluZXIub3BlbkNhcmQoKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dDb250ZW50ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnNldFNlbGVjdGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQodGhpcy5pdGVtLnZpZXdEYXRhKSkge1xyXG4gICAgICAgICAgICB0aGlzLml0ZW0udmlld0RhdGEgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pdGVtLnZpZXdEYXRhLnNlbGVjdGVkID0gdmFsdWU7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkKCk7XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRjb250cm9sbGVyJywgJyRxJywgJyRlbGVtZW50JywgX19wYXJlbnRDaGlsZC5zZXJ2aWNlTmFtZSwgX19vYmplY3Quc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIENhcmRDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkNhcmRDb250cm9sbGVyID0gQ2FyZENvbnRyb2xsZXI7XHJcbnZhciBjYXJkID0ge1xyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vY2FyZC5odG1sJyksXHJcbiAgICByZXF1aXJlOiB7IGNhcmRDb250YWluZXI6ICdeXnJsQ2FyZENvbnRhaW5lcicgfSxcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdfX2NhcmQnLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBjb2x1bW5zOiAnPD8nLFxyXG4gICAgICAgIGl0ZW06ICc9JyxcclxuICAgICAgICBjbGlja2FibGU6ICc8PycsXHJcbiAgICAgICAgc291cmNlOiAnPScsXHJcbiAgICAgICAgY29udGFpbmVyRGF0YTogJzw/JyxcclxuICAgICAgICBjYXJkQ29udHJvbGxlcjogJzw/JyxcclxuICAgICAgICBjYXJkQ29udHJvbGxlckFzOiAnPD8nLFxyXG4gICAgICAgIGNhcmRBczogJzw/JyxcclxuICAgICAgICBwZXJtYW5lbnRGb290ZXI6ICc8PycsXHJcbiAgICAgICAgc2VsZWN0YWJsZTogJzw/JyxcclxuICAgICAgICBzZWxlY3Rpb25DaGFuZ2VkOiAnJicsXHJcbiAgICAgICAgc2F2ZVdoZW5JbnZhbGlkOiAnPD8nLFxyXG4gICAgfSxcclxufTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXHJcbiAgICBfX3BhcmVudENoaWxkLm1vZHVsZU5hbWUsXHJcbiAgICBfX29iamVjdC5tb2R1bGVOYW1lLFxyXG4gICAgaGVhZGVyQ29sdW1uX21vZHVsZV8xLm1vZHVsZU5hbWUsXHJcbl0pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgY2FyZClcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIENhcmRDb250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWTJGeVpDNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW1OaGNtUXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc2EwVkJRV3RGTzBGQlJXeEZMRmxCUVZrc1EwRkJRenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUTI1RExFbEJRVmtzUTBGQlF5eFhRVUZOTEZGQlFWRXNRMEZCUXl4RFFVRkJPMEZCUXpWQ0xFbEJRVmtzUlVGQlJTeFhRVUZOTEVsQlFVa3NRMEZCUXl4RFFVRkJPMEZCUlhwQ0xEWkRRVUY1UWl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlEzaEVMRWxCUVU4c1lVRkJZU3hIUVVGSExIVkRRVUZSTEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU03UVVGRGNFUXNTVUZCVHl4UlFVRlJMRWRCUVVjc2RVTkJRVkVzUTBGQlF5eE5RVUZOTEVOQlFVTTdRVUZGYkVNc2IwTkJRWEZFTEc5RFFVRnZReXhEUVVGRExFTkJRVUU3UVVGTkwwVXNhMEpCUVZVc1IwRkJWeXh4UTBGQmNVTXNRMEZCUXp0QlFVTXpSQ3h4UWtGQllTeEhRVUZYTEZGQlFWRXNRMEZCUXp0QlFVTnFReXh6UWtGQll5eEhRVUZYTEdkQ1FVRm5RaXhEUVVGRE8wRkJiVU55UkR0SlFYZENReXgzUWtGQmIwSXNUVUZCYTBJc1JVRkRiRU1zVjBGQmRVTXNSVUZETDBJc1JVRkJjVUlzUlVGRGNrSXNVVUZCYTBNc1JVRkRiRU1zVjBGQmMwUXNSVUZET1VRc1RVRkJLMEk3VVVFM1FuQkRMR2xDUVdkS1F6dFJRWGhJYjBJc1YwRkJUU3hIUVVGT0xFMUJRVTBzUTBGQldUdFJRVVV4UWl4UFFVRkZMRWRCUVVZc1JVRkJSU3hEUVVGdFFqdFJRVU55UWl4aFFVRlJMRWRCUVZJc1VVRkJVU3hEUVVFd1FqdFJRVU5zUXl4blFrRkJWeXhIUVVGWUxGZEJRVmNzUTBGQk1rTTdVVUZpYkVVc1owSkJRVmNzUjBGQldTeExRVUZMTEVOQlFVTTdVVUZETjBJc1ZVRkJTeXhIUVVGWkxFdEJRVXNzUTBGQlF6dFJRVU4yUWl4cFFrRkJXU3hIUVVGcFJDeEZRVUZGTEVOQlFVTTdVVUV5Um5oRUxHRkJRVkVzUjBGQmIwSTdXVUZEYmtNc1JVRkJSU3hEUVVGRExFTkJRVU1zUzBGQlNTeERRVUZETEZkQlFWY3NTMEZCU3l4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU5vUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRE8xbEJRMklzUTBGQlF6dFpRVVZFTEUxQlFVMHNRMEZCUXl4TFFVRkpMRU5CUVVNc1YwRkJWeXhEUVVGRExHOUNRVUZ2UWl4RFFVRkRMRXRCUVVrc1EwRkJReXhaUVVGWkxFVkJRVVVzVlVGQlF5eFJRVUV5UWp0blFrRkRNMFlzUlVGQlJTeERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRkZCUVZFc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF6dHZRa0ZEZWtJc1MwRkJTU3hEUVVGRExGZEJRVmNzUjBGQlJ5eExRVUZMTEVOQlFVTTdiMEpCUTNwQ0xFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTTdaMEpCUTJJc1EwRkJRenRuUWtGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0dlFrRkRVQ3hOUVVGTkxFTkJRVU1zUzBGQlN5eERRVUZETzJkQ1FVTmtMRU5CUVVNN1dVRkRSaXhEUVVGRExFTkJRVU1zUTBGQlF6dFJRVU5LTEVOQlFVTXNRMEZCUXp0UlFUTkdSQ3hGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOcVFpeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhIUVVGSExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTTdVVUZEYWtNc1EwRkJRenRSUVVWRUxFMUJRVTBzUTBGQlF5eFJRVUZSTEVkQlFVY3NTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJRenRSUVVOb1F5eE5RVUZOTEVOQlFVTXNWMEZCVnl4SFFVRkhMRWxCUVVrc1EwRkJReXhYUVVGWExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMUZCUTJwRUxFbEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NTVUZCU1N4RlFVRkZMRU5CUVVNc1QwRkJUeXhGUVVGUkxFTkJRVU03VVVGRGRFTXNUVUZCVFN4RFFVRkRMRTlCUVU4c1IwRkJSenRaUVVOb1FpeExRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRTlCUVU4c1JVRkJSU3hEUVVGRE8xbEJRM1JDTEV0QlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzFGQlF6TkNMRU5CUVVNc1EwRkJRenRSUVVOR0xFMUJRVTBzUTBGQlF5eE5RVUZOTEVkQlFVYzdXVUZEWml4TFFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1VVRkRMMElzUTBGQlF5eERRVUZETzFGQlEwWXNUVUZCVFN4RFFVRkRMR0ZCUVdFc1IwRkJSeXhKUVVGSkxFTkJRVU1zWVVGQllTeERRVUZETzFGQlJURkRMRVZCUVVVc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCYTBJc1EwRkJReXhKUVVGSkxFTkJRVU1zWTBGQll5eERRVUZETEV0QlFVc3NTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVNNVJDeEpRVUZKTEZWQlFWVXNSMEZCVVN4WFFVRlhMRU5CUVVNc1NVRkJTU3hEUVVGRExHTkJRV01zUlVGQlJTeEZRVUZGTEUxQlFVMHNSVUZCUlN4TlFVRk5MRVZCUVVVc1EwRkJReXhEUVVGRE8xbEJSVE5GTEVWQlFVVXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQmEwSXNRMEZCUXl4SlFVRkpMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNTMEZCU3l4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU5vUlN4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExHZENRVUZuUWl4RFFVRkRMRWRCUVVjc1ZVRkJWU3hEUVVGRE8xbEJRelZETEVOQlFVTTdVVUZEUml4RFFVRkRPMUZCUlVRc1YwRkJWeXhEUVVGRExIRkNRVUZ4UWl4RFFVRm5RaXhKUVVGSkxFTkJRVU1zU1VGQlNTeEZRVUZGTzFsQlF6TkVMRXRCUVVzc1JVRkJSU3hKUVVGSkxFTkJRVU1zVVVGQlVUdFRRVU53UWl4RFFVRkRMRU5CUVVNN1NVRkRTaXhEUVVGRE8wbEJSVVFzYzBOQlFXRXNSMEZCWWp0UlFVTkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRka0lzU1VGQlNTeERRVUZETEVsQlFVa3NSVUZCUlN4RFFVRkRPMUZCUTJJc1EwRkJRenRSUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzFsQlExQXNTVUZCU1N4RFFVRkRMRkZCUVZFc1JVRkJSU3hEUVVGRE8xRkJRMnBDTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCUlVRc2NVTkJRVmtzUjBGQldqdFJRVU5ETEVsQlFVa3NVVUZCVVN4SFFVRjFRaXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEdkQ1FVRm5RaXhEUVVGeFFpeEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1VVRkRjRWNzUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhSUVVGUkxFTkJRVU1zV1VGQldTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNwRExFMUJRVTBzUTBGQlF5eFJRVUZSTEVOQlFVTXNXVUZCV1N4RlFVRkZMRU5CUVVNN1VVRkRhRU1zUTBGQlF6dFJRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTFBc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF6dFJRVU5pTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCUlVRc2FVTkJRVkVzUjBGQlVqdFJRVU5ETEVsQlFVa3NVVUZCVVN4SFFVRjFRaXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEdkQ1FVRm5RaXhEUVVGeFFpeEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1VVRkRjRWNzUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhSUVVGUkxFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNKRExFMUJRVTBzUTBGQlF5eFJRVUZSTEVOQlFVTXNVVUZCVVN4RlFVRkZMRU5CUVVNN1VVRkROVUlzUTBGQlF6dFJRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTFBc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RlFVRkZMRU5CUVVNN1VVRkRka0lzUTBGQlF6dEpRVU5HTEVOQlFVTTdTVUZGUkN4clEwRkJVeXhIUVVGVU8xRkJRME1zU1VGQlNTeERRVUZETEZkQlFWY3NRMEZCUXl4dlFrRkJiMElzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RlFVRkZMRlZCUVVNc1VVRkJORUk3V1VGRE4wVXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eFJRVUZSTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU4wUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRExGTkJRVk1zUlVGQlJTeERRVUZETzFsQlF6ZENMRU5CUVVNN1VVRkRSaXhEUVVGRExFTkJRVU1zUTBGQlF6dEpRVU5LTEVOQlFVTTdTVUZGUkN4clEwRkJVeXhIUVVGVU8xRkJRVUVzYVVKQllVTTdVVUZhUVN4SlFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RlFVRkZMRlZCUVVNc1QwRkJaVHRaUVVONFJDeEpRVUZKTEZkQlFWY3NSMEZCVnl4TFFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eHRRa0ZCYlVJc1EwRkJReXhEUVVGRE8xbEJRMnhGTEZkQlFWY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU03V1VGRE5VSXNTMEZCU1N4RFFVRkRMRTlCUVU4c1IwRkJSeXhQUVVGUExFTkJRVU1zVFVGQlRTeEhRVUZITEVOQlFVTXNRMEZCUXp0UlFVTnVReXhEUVVGRExFVkJRVVVzU1VGQlNTeEZRVUZGTEdGQlFXRXNRMEZCUXl4RFFVRkRPMUZCUTNoQ0xFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNVVUZCVVN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFVkJRVVVzVlVGQlF5eE5RVUZqTzFsQlEzWkVMRXRCUVVrc1EwRkJReXhUUVVGVExFZEJRVWNzUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRM0pETEVWQlFVVXNRMEZCUXl4RFFVRkRMRXRCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTndRaXhKUVVGSkxGVkJRVlVzUjBGQlZ5eExRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRWxCUVVrc1EwRkJReXhyUWtGQmEwSXNRMEZCUXl4RFFVRkRPMmRDUVVOb1JTeFZRVUZWTEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8xbEJRek5DTEVOQlFVTTdVVUZEUml4RFFVRkRMRVZCUVVVc1NVRkJTU3hGUVVGRkxGbEJRVmtzUTBGQlF5eERRVUZETzBsQlEzaENMRU5CUVVNN1NVRnBRazhzTmtKQlFVa3NSMEZCV2p0UlFVTkRMRWxCUVVrc1EwRkJReXhYUVVGWExFTkJRVU1zYjBKQlFXOUNMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUlVGQlJTeFZRVUZETEZGQlFUUkNPMWxCUXpkRkxFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1VVRkJVU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0blFrRkRja01zVVVGQlVTeERRVUZETEZGQlFWRXNSVUZCUlN4RFFVRkRPMWxCUTNKQ0xFTkJRVU03VVVGRFJpeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVVklMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNVVUZCVVN4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRMjVETEVsQlFVa3NRMEZCUXl4WFFVRlhMRWRCUVVjc1NVRkJTU3hEUVVGRE8xRkJRM3BDTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCUlU4c2IwTkJRVmNzUjBGQmJrSXNWVUZCYjBJc1MwRkJZenRSUVVOcVF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1YwRkJWeXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRM1pETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hIUVVGSExFVkJRVVVzUTBGQlF6dFJRVU42UWl4RFFVRkRPMUZCUlVRc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNVVUZCVVN4SFFVRkhMRXRCUVVzc1EwRkJRenRSUVVWd1F5eEpRVUZKTEVOQlFVTXNaMEpCUVdkQ0xFVkJRVVVzUTBGQlF6dEpRVU42UWl4RFFVRkRPMGxCZUVoTkxITkNRVUZQTEVkQlFXRXNRMEZCUXl4UlFVRlJMRVZCUVVVc1lVRkJZU3hGUVVGRkxFbEJRVWtzUlVGQlJTeFZRVUZWTEVWQlFVVXNZVUZCWVN4RFFVRkRMRmRCUVZjc1JVRkJSU3hSUVVGUkxFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTTdTVUY1U0hwSUxIRkNRVUZETzBGQlFVUXNRMEZCUXl4QlFXaEtSQ3hKUVdkS1F6dEJRV2hLV1N4elFrRkJZeXhwUWtGblNqRkNMRU5CUVVFN1FVRkZSQ3hKUVVGSkxFbEJRVWtzUjBGQk9FSTdTVUZEY2tNc1VVRkJVU3hGUVVGRkxFOUJRVThzUTBGQlF5eGhRVUZoTEVOQlFVTTdTVUZEYUVNc1QwRkJUeXhGUVVGRkxFVkJRVVVzWVVGQllTeEZRVUZGTEcxQ1FVRnRRaXhGUVVGRk8wbEJReTlETEZWQlFWVXNSVUZCUlN4elFrRkJZenRKUVVNeFFpeFpRVUZaTEVWQlFVVXNVVUZCVVR0SlFVTjBRaXhSUVVGUkxFVkJRVVU3VVVGRFZDeFBRVUZQTEVWQlFVVXNTVUZCU1R0UlFVTmlMRWxCUVVrc1JVRkJSU3hIUVVGSE8xRkJRMVFzVTBGQlV5eEZRVUZGTEVsQlFVazdVVUZEWml4TlFVRk5MRVZCUVVVc1IwRkJSenRSUVVOWUxHRkJRV0VzUlVGQlJTeEpRVUZKTzFGQlEyNUNMR05CUVdNc1JVRkJSU3hKUVVGSk8xRkJRM0JDTEdkQ1FVRm5RaXhGUVVGRkxFbEJRVWs3VVVGRGRFSXNUVUZCVFN4RlFVRkZMRWxCUVVrN1VVRkRXaXhsUVVGbExFVkJRVVVzU1VGQlNUdFJRVU55UWl4VlFVRlZMRVZCUVVVc1NVRkJTVHRSUVVOb1FpeG5Ra0ZCWjBJc1JVRkJSU3hIUVVGSE8xRkJRM0pDTEdWQlFXVXNSVUZCUlN4SlFVRkpPMHRCUTNKQ08wTkJRMFFzUTBGQlF6dEJRVVZHTEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc2EwSkJRVlVzUlVGQlJUdEpRVU14UWl4aFFVRmhMRU5CUVVNc1ZVRkJWVHRKUVVONFFpeFJRVUZSTEVOQlFVTXNWVUZCVlR0SlFVVnVRaXhuUTBGQmMwSTdRMEZEZEVJc1EwRkJRenRMUVVOQkxGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMRWxCUVVrc1EwRkJRenRMUVVNNVFpeFZRVUZWTEVOQlFVTXNjMEpCUVdNc1JVRkJSU3hqUVVGakxFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jYXJkL2NhcmQuanNcbiAqKiBtb2R1bGUgaWQgPSA0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQsIEFsbCByaWdodHMgcmVzZXJ2ZWQuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuXG47KGZ1bmN0aW9uICh1bmRlZmluZWQpIHtcblxuICB2YXIgb2JqZWN0VHlwZXMgPSB7XG4gICAgJ2Z1bmN0aW9uJzogdHJ1ZSxcbiAgICAnb2JqZWN0JzogdHJ1ZVxuICB9O1xuXG4gIGZ1bmN0aW9uIGNoZWNrR2xvYmFsKHZhbHVlKSB7XG4gICAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZS5PYmplY3QgPT09IE9iamVjdCkgPyB2YWx1ZSA6IG51bGw7XG4gIH1cblxuICB2YXIgZnJlZUV4cG9ydHMgPSAob2JqZWN0VHlwZXNbdHlwZW9mIGV4cG9ydHNdICYmIGV4cG9ydHMgJiYgIWV4cG9ydHMubm9kZVR5cGUpID8gZXhwb3J0cyA6IG51bGw7XG4gIHZhciBmcmVlTW9kdWxlID0gKG9iamVjdFR5cGVzW3R5cGVvZiBtb2R1bGVdICYmIG1vZHVsZSAmJiAhbW9kdWxlLm5vZGVUeXBlKSA/IG1vZHVsZSA6IG51bGw7XG4gIHZhciBmcmVlR2xvYmFsID0gY2hlY2tHbG9iYWwoZnJlZUV4cG9ydHMgJiYgZnJlZU1vZHVsZSAmJiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwpO1xuICB2YXIgZnJlZVNlbGYgPSBjaGVja0dsb2JhbChvYmplY3RUeXBlc1t0eXBlb2Ygc2VsZl0gJiYgc2VsZik7XG4gIHZhciBmcmVlV2luZG93ID0gY2hlY2tHbG9iYWwob2JqZWN0VHlwZXNbdHlwZW9mIHdpbmRvd10gJiYgd2luZG93KTtcbiAgdmFyIG1vZHVsZUV4cG9ydHMgPSAoZnJlZU1vZHVsZSAmJiBmcmVlTW9kdWxlLmV4cG9ydHMgPT09IGZyZWVFeHBvcnRzKSA/IGZyZWVFeHBvcnRzIDogbnVsbDtcbiAgdmFyIHRoaXNHbG9iYWwgPSBjaGVja0dsb2JhbChvYmplY3RUeXBlc1t0eXBlb2YgdGhpc10gJiYgdGhpcyk7XG4gIHZhciByb290ID0gZnJlZUdsb2JhbCB8fCAoKGZyZWVXaW5kb3cgIT09ICh0aGlzR2xvYmFsICYmIHRoaXNHbG9iYWwud2luZG93KSkgJiYgZnJlZVdpbmRvdykgfHwgZnJlZVNlbGYgfHwgdGhpc0dsb2JhbCB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG4gIHZhciBSeCA9IHtcbiAgICBpbnRlcm5hbHM6IHt9LFxuICAgIGNvbmZpZzoge1xuICAgICAgUHJvbWlzZTogcm9vdC5Qcm9taXNlXG4gICAgfSxcbiAgICBoZWxwZXJzOiB7IH1cbiAgfTtcblxuICAvLyBEZWZhdWx0c1xuICB2YXIgbm9vcCA9IFJ4LmhlbHBlcnMubm9vcCA9IGZ1bmN0aW9uICgpIHsgfSxcbiAgICBpZGVudGl0eSA9IFJ4LmhlbHBlcnMuaWRlbnRpdHkgPSBmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSxcbiAgICBkZWZhdWx0Tm93ID0gUnguaGVscGVycy5kZWZhdWx0Tm93ID0gRGF0ZS5ub3csXG4gICAgZGVmYXVsdENvbXBhcmVyID0gUnguaGVscGVycy5kZWZhdWx0Q29tcGFyZXIgPSBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4gaXNFcXVhbCh4LCB5KTsgfSxcbiAgICBkZWZhdWx0U3ViQ29tcGFyZXIgPSBSeC5oZWxwZXJzLmRlZmF1bHRTdWJDb21wYXJlciA9IGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4ID4geSA/IDEgOiAoeCA8IHkgPyAtMSA6IDApOyB9LFxuICAgIGRlZmF1bHRLZXlTZXJpYWxpemVyID0gUnguaGVscGVycy5kZWZhdWx0S2V5U2VyaWFsaXplciA9IGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnRvU3RyaW5nKCk7IH0sXG4gICAgZGVmYXVsdEVycm9yID0gUnguaGVscGVycy5kZWZhdWx0RXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7IHRocm93IGVycjsgfSxcbiAgICBpc1Byb21pc2UgPSBSeC5oZWxwZXJzLmlzUHJvbWlzZSA9IGZ1bmN0aW9uIChwKSB7IHJldHVybiAhIXAgJiYgdHlwZW9mIHAuc3Vic2NyaWJlICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbic7IH0sXG4gICAgaXNGdW5jdGlvbiA9IFJ4LmhlbHBlcnMuaXNGdW5jdGlvbiA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICAgIHZhciBpc0ZuID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTtcbiAgICAgIH07XG5cbiAgICAgIC8vIGZhbGxiYWNrIGZvciBvbGRlciB2ZXJzaW9ucyBvZiBDaHJvbWUgYW5kIFNhZmFyaVxuICAgICAgaWYgKGlzRm4oL3gvKSkge1xuICAgICAgICBpc0ZuID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gJ1tvYmplY3QgRnVuY3Rpb25dJztcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGlzRm47XG4gICAgfSgpKTtcblxuICBmdW5jdGlvbiBjbG9uZUFycmF5KGFycikgeyBmb3IodmFyIGEgPSBbXSwgaSA9IDAsIGxlbiA9IGFyci5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBhLnB1c2goYXJyW2ldKTsgfSByZXR1cm4gYTt9XG5cbiAgdmFyIGVycm9yT2JqID0ge2U6IHt9fTtcbiAgXG4gIGZ1bmN0aW9uIHRyeUNhdGNoZXJHZW4odHJ5Q2F0Y2hUYXJnZXQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gdHJ5Q2F0Y2hlcigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0cnlDYXRjaFRhcmdldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBlcnJvck9iai5lID0gZTtcbiAgICAgICAgcmV0dXJuIGVycm9yT2JqO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICB2YXIgdHJ5Q2F0Y2ggPSBSeC5pbnRlcm5hbHMudHJ5Q2F0Y2ggPSBmdW5jdGlvbiB0cnlDYXRjaChmbikge1xuICAgIGlmICghaXNGdW5jdGlvbihmbikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignZm4gbXVzdCBiZSBhIGZ1bmN0aW9uJyk7IH1cbiAgICByZXR1cm4gdHJ5Q2F0Y2hlckdlbihmbik7XG4gIH07XG5cbiAgZnVuY3Rpb24gdGhyb3dlcihlKSB7XG4gICAgdGhyb3cgZTtcbiAgfVxuXG4gIFJ4LmNvbmZpZy5sb25nU3RhY2tTdXBwb3J0ID0gZmFsc2U7XG4gIHZhciBoYXNTdGFja3MgPSBmYWxzZSwgc3RhY2tzID0gdHJ5Q2F0Y2goZnVuY3Rpb24gKCkgeyB0aHJvdyBuZXcgRXJyb3IoKTsgfSkoKTtcbiAgaGFzU3RhY2tzID0gISFzdGFja3MuZSAmJiAhIXN0YWNrcy5lLnN0YWNrO1xuXG4gIC8vIEFsbCBjb2RlIGFmdGVyIHRoaXMgcG9pbnQgd2lsbCBiZSBmaWx0ZXJlZCBmcm9tIHN0YWNrIHRyYWNlcyByZXBvcnRlZCBieSBSeEpTXG4gIHZhciByU3RhcnRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKSwgckZpbGVOYW1lO1xuXG4gIHZhciBTVEFDS19KVU1QX1NFUEFSQVRPUiA9ICdGcm9tIHByZXZpb3VzIGV2ZW50Oic7XG5cbiAgZnVuY3Rpb24gbWFrZVN0YWNrVHJhY2VMb25nKGVycm9yLCBvYnNlcnZhYmxlKSB7XG4gICAgLy8gSWYgcG9zc2libGUsIHRyYW5zZm9ybSB0aGUgZXJyb3Igc3RhY2sgdHJhY2UgYnkgcmVtb3ZpbmcgTm9kZSBhbmQgUnhKU1xuICAgIC8vIGNydWZ0LCB0aGVuIGNvbmNhdGVuYXRpbmcgd2l0aCB0aGUgc3RhY2sgdHJhY2Ugb2YgYG9ic2VydmFibGVgLlxuICAgIGlmIChoYXNTdGFja3MgJiZcbiAgICAgICAgb2JzZXJ2YWJsZS5zdGFjayAmJlxuICAgICAgICB0eXBlb2YgZXJyb3IgPT09ICdvYmplY3QnICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgIGVycm9yLnN0YWNrICYmXG4gICAgICAgIGVycm9yLnN0YWNrLmluZGV4T2YoU1RBQ0tfSlVNUF9TRVBBUkFUT1IpID09PSAtMVxuICAgICkge1xuICAgICAgdmFyIHN0YWNrcyA9IFtdO1xuICAgICAgZm9yICh2YXIgbyA9IG9ic2VydmFibGU7ICEhbzsgbyA9IG8uc291cmNlKSB7XG4gICAgICAgIGlmIChvLnN0YWNrKSB7XG4gICAgICAgICAgc3RhY2tzLnVuc2hpZnQoby5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHN0YWNrcy51bnNoaWZ0KGVycm9yLnN0YWNrKTtcblxuICAgICAgdmFyIGNvbmNhdGVkU3RhY2tzID0gc3RhY2tzLmpvaW4oJ1xcbicgKyBTVEFDS19KVU1QX1NFUEFSQVRPUiArICdcXG4nKTtcbiAgICAgIGVycm9yLnN0YWNrID0gZmlsdGVyU3RhY2tTdHJpbmcoY29uY2F0ZWRTdGFja3MpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbHRlclN0YWNrU3RyaW5nKHN0YWNrU3RyaW5nKSB7XG4gICAgdmFyIGxpbmVzID0gc3RhY2tTdHJpbmcuc3BsaXQoJ1xcbicpLCBkZXNpcmVkTGluZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbGluZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBsaW5lID0gbGluZXNbaV07XG5cbiAgICAgIGlmICghaXNJbnRlcm5hbEZyYW1lKGxpbmUpICYmICFpc05vZGVGcmFtZShsaW5lKSAmJiBsaW5lKSB7XG4gICAgICAgIGRlc2lyZWRMaW5lcy5wdXNoKGxpbmUpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVzaXJlZExpbmVzLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNJbnRlcm5hbEZyYW1lKHN0YWNrTGluZSkge1xuICAgIHZhciBmaWxlTmFtZUFuZExpbmVOdW1iZXIgPSBnZXRGaWxlTmFtZUFuZExpbmVOdW1iZXIoc3RhY2tMaW5lKTtcbiAgICBpZiAoIWZpbGVOYW1lQW5kTGluZU51bWJlcikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgZmlsZU5hbWUgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMF0sIGxpbmVOdW1iZXIgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG5cbiAgICByZXR1cm4gZmlsZU5hbWUgPT09IHJGaWxlTmFtZSAmJlxuICAgICAgbGluZU51bWJlciA+PSByU3RhcnRpbmdMaW5lICYmXG4gICAgICBsaW5lTnVtYmVyIDw9IHJFbmRpbmdMaW5lO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNOb2RlRnJhbWUoc3RhY2tMaW5lKSB7XG4gICAgcmV0dXJuIHN0YWNrTGluZS5pbmRleE9mKCcobW9kdWxlLmpzOicpICE9PSAtMSB8fFxuICAgICAgc3RhY2tMaW5lLmluZGV4T2YoJyhub2RlLmpzOicpICE9PSAtMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhcHR1cmVMaW5lKCkge1xuICAgIGlmICghaGFzU3RhY2tzKSB7IHJldHVybjsgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHZhciBsaW5lcyA9IGUuc3RhY2suc3BsaXQoJ1xcbicpO1xuICAgICAgdmFyIGZpcnN0TGluZSA9IGxpbmVzWzBdLmluZGV4T2YoJ0AnKSA+IDAgPyBsaW5lc1sxXSA6IGxpbmVzWzJdO1xuICAgICAgdmFyIGZpbGVOYW1lQW5kTGluZU51bWJlciA9IGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihmaXJzdExpbmUpO1xuICAgICAgaWYgKCFmaWxlTmFtZUFuZExpbmVOdW1iZXIpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHJGaWxlTmFtZSA9IGZpbGVOYW1lQW5kTGluZU51bWJlclswXTtcbiAgICAgIHJldHVybiBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKHN0YWNrTGluZSkge1xuICAgIC8vIE5hbWVkIGZ1bmN0aW9uczogJ2F0IGZ1bmN0aW9uTmFtZSAoZmlsZW5hbWU6bGluZU51bWJlcjpjb2x1bW5OdW1iZXIpJ1xuICAgIHZhciBhdHRlbXB0MSA9IC9hdCAuKyBcXCgoLispOihcXGQrKTooPzpcXGQrKVxcKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDEpIHsgcmV0dXJuIFthdHRlbXB0MVsxXSwgTnVtYmVyKGF0dGVtcHQxWzJdKV07IH1cblxuICAgIC8vIEFub255bW91cyBmdW5jdGlvbnM6ICdhdCBmaWxlbmFtZTpsaW5lTnVtYmVyOmNvbHVtbk51bWJlcidcbiAgICB2YXIgYXR0ZW1wdDIgPSAvYXQgKFteIF0rKTooXFxkKyk6KD86XFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQyKSB7IHJldHVybiBbYXR0ZW1wdDJbMV0sIE51bWJlcihhdHRlbXB0MlsyXSldOyB9XG5cbiAgICAvLyBGaXJlZm94IHN0eWxlOiAnZnVuY3Rpb25AZmlsZW5hbWU6bGluZU51bWJlciBvciBAZmlsZW5hbWU6bGluZU51bWJlcidcbiAgICB2YXIgYXR0ZW1wdDMgPSAvLipAKC4rKTooXFxkKykkLy5leGVjKHN0YWNrTGluZSk7XG4gICAgaWYgKGF0dGVtcHQzKSB7IHJldHVybiBbYXR0ZW1wdDNbMV0sIE51bWJlcihhdHRlbXB0M1syXSldOyB9XG4gIH1cblxuICB2YXIgRW1wdHlFcnJvciA9IFJ4LkVtcHR5RXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnU2VxdWVuY2UgY29udGFpbnMgbm8gZWxlbWVudHMuJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBFbXB0eUVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgRW1wdHlFcnJvci5wcm90b3R5cGUubmFtZSA9ICdFbXB0eUVycm9yJztcblxuICB2YXIgT2JqZWN0RGlzcG9zZWRFcnJvciA9IFJ4Lk9iamVjdERpc3Bvc2VkRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnT2JqZWN0IGhhcyBiZWVuIGRpc3Bvc2VkJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBPYmplY3REaXNwb3NlZEVycm9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbiAgT2JqZWN0RGlzcG9zZWRFcnJvci5wcm90b3R5cGUubmFtZSA9ICdPYmplY3REaXNwb3NlZEVycm9yJztcblxuICB2YXIgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IgPSBSeC5Bcmd1bWVudE91dE9mUmFuZ2VFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSAnQXJndW1lbnQgb3V0IG9mIHJhbmdlJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBBcmd1bWVudE91dE9mUmFuZ2VFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0FyZ3VtZW50T3V0T2ZSYW5nZUVycm9yJztcblxuICB2YXIgTm90U3VwcG9ydGVkRXJyb3IgPSBSeC5Ob3RTdXBwb3J0ZWRFcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XG4gICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZSB8fCAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCc7XG4gICAgRXJyb3IuY2FsbCh0aGlzKTtcbiAgfTtcbiAgTm90U3VwcG9ydGVkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBOb3RTdXBwb3J0ZWRFcnJvci5wcm90b3R5cGUubmFtZSA9ICdOb3RTdXBwb3J0ZWRFcnJvcic7XG5cbiAgdmFyIE5vdEltcGxlbWVudGVkRXJyb3IgPSBSeC5Ob3RJbXBsZW1lbnRlZEVycm9yID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlIHx8ICdUaGlzIG9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQnO1xuICAgIEVycm9yLmNhbGwodGhpcyk7XG4gIH07XG4gIE5vdEltcGxlbWVudGVkRXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICBOb3RJbXBsZW1lbnRlZEVycm9yLnByb3RvdHlwZS5uYW1lID0gJ05vdEltcGxlbWVudGVkRXJyb3InO1xuXG4gIHZhciBub3RJbXBsZW1lbnRlZCA9IFJ4LmhlbHBlcnMubm90SW1wbGVtZW50ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfTtcblxuICB2YXIgbm90U3VwcG9ydGVkID0gUnguaGVscGVycy5ub3RTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IE5vdFN1cHBvcnRlZEVycm9yKCk7XG4gIH07XG5cbiAgLy8gU2hpbSBpbiBpdGVyYXRvciBzdXBwb3J0XG4gIHZhciAkaXRlcmF0b3IkID0gKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sLml0ZXJhdG9yKSB8fFxuICAgICdfZXM2c2hpbV9pdGVyYXRvcl8nO1xuICAvLyBCdWcgZm9yIG1vemlsbGEgdmVyc2lvblxuICBpZiAocm9vdC5TZXQgJiYgdHlwZW9mIG5ldyByb290LlNldCgpWydAQGl0ZXJhdG9yJ10gPT09ICdmdW5jdGlvbicpIHtcbiAgICAkaXRlcmF0b3IkID0gJ0BAaXRlcmF0b3InO1xuICB9XG5cbiAgdmFyIGRvbmVFbnVtZXJhdG9yID0gUnguZG9uZUVudW1lcmF0b3IgPSB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcblxuICB2YXIgaXNJdGVyYWJsZSA9IFJ4LmhlbHBlcnMuaXNJdGVyYWJsZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgcmV0dXJuIG8gJiYgb1skaXRlcmF0b3IkXSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuXG4gIHZhciBpc0FycmF5TGlrZSA9IFJ4LmhlbHBlcnMuaXNBcnJheUxpa2UgPSBmdW5jdGlvbiAobykge1xuICAgIHJldHVybiBvICYmIG8ubGVuZ3RoICE9PSB1bmRlZmluZWQ7XG4gIH07XG5cbiAgUnguaGVscGVycy5pdGVyYXRvciA9ICRpdGVyYXRvciQ7XG5cbiAgdmFyIGJpbmRDYWxsYmFjayA9IFJ4LmludGVybmFscy5iaW5kQ2FsbGJhY2sgPSBmdW5jdGlvbiAoZnVuYywgdGhpc0FyZywgYXJnQ291bnQpIHtcbiAgICBpZiAodHlwZW9mIHRoaXNBcmcgPT09ICd1bmRlZmluZWQnKSB7IHJldHVybiBmdW5jOyB9XG4gICAgc3dpdGNoKGFyZ0NvdW50KSB7XG4gICAgICBjYXNlIDA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpXG4gICAgICAgIH07XG4gICAgICBjYXNlIDE6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZyk7XG4gICAgICAgIH07XG4gICAgICBjYXNlIDI6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCk7XG4gICAgICAgIH07XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgICByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKiBVc2VkIHRvIGRldGVybWluZSBpZiB2YWx1ZXMgYXJlIG9mIHRoZSBsYW5ndWFnZSB0eXBlIE9iamVjdCAqL1xuICB2YXIgZG9udEVudW1zID0gWyd0b1N0cmluZycsXG4gICAgJ3RvTG9jYWxlU3RyaW5nJyxcbiAgICAndmFsdWVPZicsXG4gICAgJ2hhc093blByb3BlcnR5JyxcbiAgICAnaXNQcm90b3R5cGVPZicsXG4gICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJyxcbiAgICAnY29uc3RydWN0b3InXSxcbiAgZG9udEVudW1zTGVuZ3RoID0gZG9udEVudW1zLmxlbmd0aDtcblxudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG52YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbnR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xudHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPSB0eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPSB0eXBlZEFycmF5VGFnc1ttYXBUYWddID1cbnR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID1cbnR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzZXRUYWddID1cbnR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPSB0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlLFxuICAgIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHksXG4gICAgb2JqVG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZyxcbiAgICBNQVhfU0FGRV9JTlRFR0VSID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcblxudmFyIGtleXMgPSBPYmplY3Qua2V5cyB8fCAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSxcbiAgICAgICAgaGFzRG9udEVudW1CdWcgPSAhKHsgdG9TdHJpbmc6IG51bGwgfSkucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyksXG4gICAgICAgIGRvbnRFbnVtcyA9IFtcbiAgICAgICAgICAndG9TdHJpbmcnLFxuICAgICAgICAgICd0b0xvY2FsZVN0cmluZycsXG4gICAgICAgICAgJ3ZhbHVlT2YnLFxuICAgICAgICAgICdoYXNPd25Qcm9wZXJ0eScsXG4gICAgICAgICAgJ2lzUHJvdG90eXBlT2YnLFxuICAgICAgICAgICdwcm9wZXJ0eUlzRW51bWVyYWJsZScsXG4gICAgICAgICAgJ2NvbnN0cnVjdG9yJ1xuICAgICAgICBdLFxuICAgICAgICBkb250RW51bXNMZW5ndGggPSBkb250RW51bXMubGVuZ3RoO1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnICYmICh0eXBlb2Ygb2JqICE9PSAnZnVuY3Rpb24nIHx8IG9iaiA9PT0gbnVsbCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmtleXMgY2FsbGVkIG9uIG5vbi1vYmplY3QnKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHJlc3VsdCA9IFtdLCBwcm9wLCBpO1xuXG4gICAgICBmb3IgKHByb3AgaW4gb2JqKSB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChwcm9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaGFzRG9udEVudW1CdWcpIHtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGRvbnRFbnVtc0xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqLCBkb250RW51bXNbaV0pKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChkb250RW51bXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9KCkpO1xuXG5mdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG4gICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gIGlmIChvYmpMZW5ndGggIT09IG90aExlbmd0aCAmJiAhaXNMb29zZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgaW5kZXggPSBvYmpMZW5ndGgsIGtleTtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgaWYgKCEoaXNMb29zZSA/IGtleSBpbiBvdGhlciA6IGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsIGtleSkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHZhciBza2lwQ3RvciA9IGlzTG9vc2U7XG4gIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG4gICAga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIHZhciBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV0sXG4gICAgICAgIHJlc3VsdDtcblxuICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkID8gZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIDogcmVzdWx0KSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT09ICdjb25zdHJ1Y3RvcicpO1xuICB9XG4gIGlmICghc2tpcEN0b3IpIHtcbiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgaWYgKG9iakN0b3IgIT09IG90aEN0b3IgJiZcbiAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG4gICAgICAgICEodHlwZW9mIG9iakN0b3IgPT09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcbiAgICAgICAgICB0eXBlb2Ygb3RoQ3RvciA9PT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGVxdWFsQnlUYWcob2JqZWN0LCBvdGhlciwgdGFnKSB7XG4gIHN3aXRjaCAodGFnKSB7XG4gICAgY2FzZSBib29sVGFnOlxuICAgIGNhc2UgZGF0ZVRhZzpcbiAgICAgIHJldHVybiArb2JqZWN0ID09PSArb3RoZXI7XG5cbiAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICByZXR1cm4gKG9iamVjdCAhPT0gK29iamVjdCkgP1xuICAgICAgICBvdGhlciAhPT0gK290aGVyIDpcbiAgICAgICAgb2JqZWN0ID09PSArb3RoZXI7XG5cbiAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgIHJldHVybiBvYmplY3QgPT09IChvdGhlciArICcnKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBpc09iamVjdCA9IFJ4LmludGVybmFscy5pc09iamVjdCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gISF2YWx1ZSAmJiAodHlwZSA9PT0gJ29iamVjdCcgfHwgdHlwZSA9PT0gJ2Z1bmN0aW9uJyk7XG59O1xuXG5mdW5jdGlvbiBpc09iamVjdExpa2UodmFsdWUpIHtcbiAgcmV0dXJuICEhdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jztcbn1cblxuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxudmFyIGlzSG9zdE9iamVjdCA9IChmdW5jdGlvbigpIHtcbiAgdHJ5IHtcbiAgICBPYmplY3QoeyAndG9TdHJpbmcnOiAwIH0gKyAnJyk7XG4gIH0gY2F0Y2goZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHsgcmV0dXJuIGZhbHNlOyB9O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUudG9TdHJpbmcgIT09ICdmdW5jdGlvbicgJiYgdHlwZW9mICh2YWx1ZSArICcnKSA9PT0gJ3N0cmluZyc7XG4gIH07XG59KCkpO1xuXG5mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29ialRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09IGFycmF5VGFnO1xufTtcblxuZnVuY3Rpb24gYXJyYXlTb21lIChhcnJheSwgcHJlZGljYXRlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICBpZiAoYXJyTGVuZ3RoICE9PSBvdGhMZW5ndGggJiYgIShpc0xvb3NlICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gSWdub3JlIG5vbi1pbmRleCBwcm9wZXJ0aWVzLlxuICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltpbmRleF0sXG4gICAgICAgIHJlc3VsdDtcblxuICAgIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoaXNMb29zZSkge1xuICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGlzTG9vc2UsIHN0YWNrQSwgc3RhY2tCKTtcbiAgICAgICAgICB9KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQikge1xuICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG4gICAgICBvdGhUYWcgPSBhcnJheVRhZztcblxuICBpZiAoIW9iaklzQXJyKSB7XG4gICAgb2JqVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvYmplY3QpO1xuICAgIGlmIChvYmpUYWcgPT09IGFyZ3NUYWcpIHtcbiAgICAgIG9ialRhZyA9IG9iamVjdFRhZztcbiAgICB9IGVsc2UgaWYgKG9ialRhZyAhPT0gb2JqZWN0VGFnKSB7XG4gICAgICBvYmpJc0FyciA9IGlzVHlwZWRBcnJheShvYmplY3QpO1xuICAgIH1cbiAgfVxuICBpZiAoIW90aElzQXJyKSB7XG4gICAgb3RoVGFnID0gb2JqVG9TdHJpbmcuY2FsbChvdGhlcik7XG4gICAgaWYgKG90aFRhZyA9PT0gYXJnc1RhZykge1xuICAgICAgb3RoVGFnID0gb2JqZWN0VGFnO1xuICAgIH1cbiAgfVxuICB2YXIgb2JqSXNPYmogPSBvYmpUYWcgPT09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG9iamVjdCksXG4gICAgICBvdGhJc09iaiA9IG90aFRhZyA9PT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob3RoZXIpLFxuICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09PSBvdGhUYWc7XG5cbiAgaWYgKGlzU2FtZVRhZyAmJiAhKG9iaklzQXJyIHx8IG9iaklzT2JqKSkge1xuICAgIHJldHVybiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZyk7XG4gIH1cbiAgaWYgKCFpc0xvb3NlKSB7XG4gICAgdmFyIG9iaklzV3JhcHBlZCA9IG9iaklzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCAnX193cmFwcGVkX18nKSxcbiAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cbiAgICBpZiAob2JqSXNXcmFwcGVkIHx8IG90aElzV3JhcHBlZCkge1xuICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCwgb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgLy8gRm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZGV0ZWN0aW5nIGNpcmN1bGFyIHJlZmVyZW5jZXMgc2VlIGh0dHBzOi8vZXM1LmdpdGh1Yi5pby8jSk8uXG4gIHN0YWNrQSB8fCAoc3RhY2tBID0gW10pO1xuICBzdGFja0IgfHwgKHN0YWNrQiA9IFtdKTtcblxuICB2YXIgbGVuZ3RoID0gc3RhY2tBLmxlbmd0aDtcbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgaWYgKHN0YWNrQVtsZW5ndGhdID09PSBvYmplY3QpIHtcbiAgICAgIHJldHVybiBzdGFja0JbbGVuZ3RoXSA9PT0gb3RoZXI7XG4gICAgfVxuICB9XG4gIC8vIEFkZCBgb2JqZWN0YCBhbmQgYG90aGVyYCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gIHN0YWNrQS5wdXNoKG9iamVjdCk7XG4gIHN0YWNrQi5wdXNoKG90aGVyKTtcblxuICB2YXIgcmVzdWx0ID0gKG9iaklzQXJyID8gZXF1YWxBcnJheXMgOiBlcXVhbE9iamVjdHMpKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpO1xuXG4gIHN0YWNrQS5wb3AoKTtcbiAgc3RhY2tCLnBvcCgpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgaXNMb29zZSwgc3RhY2tBLCBzdGFja0IpIHtcbiAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gIH1cbiAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBpc0xvb3NlLCBzdGFja0EsIHN0YWNrQik7XG59XG5cbnZhciBpc0VxdWFsID0gUnguaW50ZXJuYWxzLmlzRXF1YWwgPSBmdW5jdGlvbiAodmFsdWUsIG90aGVyKSB7XG4gIHJldHVybiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIpO1xufTtcblxuICB2YXIgaGFzUHJvcCA9IHt9Lmhhc093blByb3BlcnR5LFxuICAgICAgc2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2U7XG5cbiAgdmFyIGluaGVyaXRzID0gUnguaW50ZXJuYWxzLmluaGVyaXRzID0gZnVuY3Rpb24gKGNoaWxkLCBwYXJlbnQpIHtcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9XG4gICAgX18ucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTtcbiAgICBjaGlsZC5wcm90b3R5cGUgPSBuZXcgX18oKTtcbiAgfTtcblxuICB2YXIgYWRkUHJvcGVydGllcyA9IFJ4LmludGVybmFscy5hZGRQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKG9iaikge1xuICAgIGZvcih2YXIgc291cmNlcyA9IFtdLCBpID0gMSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IHNvdXJjZXMucHVzaChhcmd1bWVudHNbaV0pOyB9XG4gICAgZm9yICh2YXIgaWR4ID0gMCwgbG4gPSBzb3VyY2VzLmxlbmd0aDsgaWR4IDwgbG47IGlkeCsrKSB7XG4gICAgICB2YXIgc291cmNlID0gc291cmNlc1tpZHhdO1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBSeCBVdGlsc1xuICB2YXIgYWRkUmVmID0gUnguaW50ZXJuYWxzLmFkZFJlZiA9IGZ1bmN0aW9uICh4cywgcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShyLmdldERpc3Bvc2FibGUoKSwgeHMuc3Vic2NyaWJlKG9ic2VydmVyKSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gYXJyYXlJbml0aWFsaXplKGNvdW50LCBmYWN0b3J5KSB7XG4gICAgdmFyIGEgPSBuZXcgQXJyYXkoY291bnQpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgYVtpXSA9IGZhY3RvcnkoKTtcbiAgICB9XG4gICAgcmV0dXJuIGE7XG4gIH1cblxuICBmdW5jdGlvbiBJbmRleGVkSXRlbShpZCwgdmFsdWUpIHtcbiAgICB0aGlzLmlkID0gaWQ7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgSW5kZXhlZEl0ZW0ucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHZhciBjID0gdGhpcy52YWx1ZS5jb21wYXJlVG8ob3RoZXIudmFsdWUpO1xuICAgIGMgPT09IDAgJiYgKGMgPSB0aGlzLmlkIC0gb3RoZXIuaWQpO1xuICAgIHJldHVybiBjO1xuICB9O1xuXG4gIHZhciBQcmlvcml0eVF1ZXVlID0gUnguaW50ZXJuYWxzLlByaW9yaXR5UXVldWUgPSBmdW5jdGlvbiAoY2FwYWNpdHkpIHtcbiAgICB0aGlzLml0ZW1zID0gbmV3IEFycmF5KGNhcGFjaXR5KTtcbiAgICB0aGlzLmxlbmd0aCA9IDA7XG4gIH07XG5cbiAgdmFyIHByaW9yaXR5UHJvdG8gPSBQcmlvcml0eVF1ZXVlLnByb3RvdHlwZTtcbiAgcHJpb3JpdHlQcm90by5pc0hpZ2hlclByaW9yaXR5ID0gZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbXNbbGVmdF0uY29tcGFyZVRvKHRoaXMuaXRlbXNbcmlnaHRdKSA8IDA7XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5wZXJjb2xhdGUgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGggfHwgaW5kZXggPCAwKSB7IHJldHVybjsgfVxuICAgIHZhciBwYXJlbnQgPSBpbmRleCAtIDEgPj4gMTtcbiAgICBpZiAocGFyZW50IDwgMCB8fCBwYXJlbnQgPT09IGluZGV4KSB7IHJldHVybjsgfVxuICAgIGlmICh0aGlzLmlzSGlnaGVyUHJpb3JpdHkoaW5kZXgsIHBhcmVudCkpIHtcbiAgICAgIHZhciB0ZW1wID0gdGhpcy5pdGVtc1tpbmRleF07XG4gICAgICB0aGlzLml0ZW1zW2luZGV4XSA9IHRoaXMuaXRlbXNbcGFyZW50XTtcbiAgICAgIHRoaXMuaXRlbXNbcGFyZW50XSA9IHRlbXA7XG4gICAgICB0aGlzLnBlcmNvbGF0ZShwYXJlbnQpO1xuICAgIH1cbiAgfTtcblxuICBwcmlvcml0eVByb3RvLmhlYXBpZnkgPSBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAraW5kZXggfHwgKGluZGV4ID0gMCk7XG4gICAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoIHx8IGluZGV4IDwgMCkgeyByZXR1cm47IH1cbiAgICB2YXIgbGVmdCA9IDIgKiBpbmRleCArIDEsXG4gICAgICAgIHJpZ2h0ID0gMiAqIGluZGV4ICsgMixcbiAgICAgICAgZmlyc3QgPSBpbmRleDtcbiAgICBpZiAobGVmdCA8IHRoaXMubGVuZ3RoICYmIHRoaXMuaXNIaWdoZXJQcmlvcml0eShsZWZ0LCBmaXJzdCkpIHtcbiAgICAgIGZpcnN0ID0gbGVmdDtcbiAgICB9XG4gICAgaWYgKHJpZ2h0IDwgdGhpcy5sZW5ndGggJiYgdGhpcy5pc0hpZ2hlclByaW9yaXR5KHJpZ2h0LCBmaXJzdCkpIHtcbiAgICAgIGZpcnN0ID0gcmlnaHQ7XG4gICAgfVxuICAgIGlmIChmaXJzdCAhPT0gaW5kZXgpIHtcbiAgICAgIHZhciB0ZW1wID0gdGhpcy5pdGVtc1tpbmRleF07XG4gICAgICB0aGlzLml0ZW1zW2luZGV4XSA9IHRoaXMuaXRlbXNbZmlyc3RdO1xuICAgICAgdGhpcy5pdGVtc1tmaXJzdF0gPSB0ZW1wO1xuICAgICAgdGhpcy5oZWFwaWZ5KGZpcnN0KTtcbiAgICB9XG4gIH07XG5cbiAgcHJpb3JpdHlQcm90by5wZWVrID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5pdGVtc1swXS52YWx1ZTsgfTtcblxuICBwcmlvcml0eVByb3RvLnJlbW92ZUF0ID0gZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgdGhpcy5pdGVtc1tpbmRleF0gPSB0aGlzLml0ZW1zWy0tdGhpcy5sZW5ndGhdO1xuICAgIHRoaXMuaXRlbXNbdGhpcy5sZW5ndGhdID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuaGVhcGlmeSgpO1xuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8uZGVxdWV1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzdWx0ID0gdGhpcy5wZWVrKCk7XG4gICAgdGhpcy5yZW1vdmVBdCgwKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHByaW9yaXR5UHJvdG8uZW5xdWV1ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5sZW5ndGgrKztcbiAgICB0aGlzLml0ZW1zW2luZGV4XSA9IG5ldyBJbmRleGVkSXRlbShQcmlvcml0eVF1ZXVlLmNvdW50KyssIGl0ZW0pO1xuICAgIHRoaXMucGVyY29sYXRlKGluZGV4KTtcbiAgfTtcblxuICBwcmlvcml0eVByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5pdGVtc1tpXS52YWx1ZSA9PT0gaXRlbSkge1xuICAgICAgICB0aGlzLnJlbW92ZUF0KGkpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICBQcmlvcml0eVF1ZXVlLmNvdW50ID0gMDtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhIGdyb3VwIG9mIGRpc3Bvc2FibGUgcmVzb3VyY2VzIHRoYXQgYXJlIGRpc3Bvc2VkIHRvZ2V0aGVyLlxuICAgKiBAY29uc3RydWN0b3JcbiAgICovXG4gIHZhciBDb21wb3NpdGVEaXNwb3NhYmxlID0gUnguQ29tcG9zaXRlRGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJncyA9IFtdLCBpLCBsZW47XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgYXJncyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcihpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgdGhpcy5kaXNwb3NhYmxlcyA9IGFyZ3M7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgdGhpcy5sZW5ndGggPSBhcmdzLmxlbmd0aDtcbiAgfTtcblxuICB2YXIgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZSA9IENvbXBvc2l0ZURpc3Bvc2FibGUucHJvdG90eXBlO1xuXG4gIC8qKlxuICAgKiBBZGRzIGEgZGlzcG9zYWJsZSB0byB0aGUgQ29tcG9zaXRlRGlzcG9zYWJsZSBvciBkaXNwb3NlcyB0aGUgZGlzcG9zYWJsZSBpZiB0aGUgQ29tcG9zaXRlRGlzcG9zYWJsZSBpcyBkaXNwb3NlZC5cbiAgICogQHBhcmFtIHtNaXhlZH0gaXRlbSBEaXNwb3NhYmxlIHRvIGFkZC5cbiAgICovXG4gIENvbXBvc2l0ZURpc3Bvc2FibGVQcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICBpZiAodGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICBpdGVtLmRpc3Bvc2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXNwb3NhYmxlcy5wdXNoKGl0ZW0pO1xuICAgICAgdGhpcy5sZW5ndGgrKztcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYW5kIGRpc3Bvc2VzIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGEgZGlzcG9zYWJsZSBmcm9tIHRoZSBDb21wb3NpdGVEaXNwb3NhYmxlLlxuICAgKiBAcGFyYW0ge01peGVkfSBpdGVtIERpc3Bvc2FibGUgdG8gcmVtb3ZlLlxuICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gdHJ1ZSBpZiBmb3VuZDsgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHZhciBzaG91bGREaXNwb3NlID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHZhciBpZHggPSB0aGlzLmRpc3Bvc2FibGVzLmluZGV4T2YoaXRlbSk7XG4gICAgICBpZiAoaWR4ICE9PSAtMSkge1xuICAgICAgICBzaG91bGREaXNwb3NlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgdGhpcy5sZW5ndGgtLTtcbiAgICAgICAgaXRlbS5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaG91bGREaXNwb3NlO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgRGlzcG9zZXMgYWxsIGRpc3Bvc2FibGVzIGluIHRoZSBncm91cCBhbmQgcmVtb3ZlcyB0aGVtIGZyb20gdGhlIGdyb3VwLlxuICAgKi9cbiAgQ29tcG9zaXRlRGlzcG9zYWJsZVByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIGxlbiA9IHRoaXMuZGlzcG9zYWJsZXMubGVuZ3RoLCBjdXJyZW50RGlzcG9zYWJsZXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBjdXJyZW50RGlzcG9zYWJsZXNbaV0gPSB0aGlzLmRpc3Bvc2FibGVzW2ldOyB9XG4gICAgICB0aGlzLmRpc3Bvc2FibGVzID0gW107XG4gICAgICB0aGlzLmxlbmd0aCA9IDA7XG5cbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBjdXJyZW50RGlzcG9zYWJsZXNbaV0uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogUHJvdmlkZXMgYSBzZXQgb2Ygc3RhdGljIG1ldGhvZHMgZm9yIGNyZWF0aW5nIERpc3Bvc2FibGVzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBkaXNwb3NlIEFjdGlvbiB0byBydW4gZHVyaW5nIHRoZSBmaXJzdCBjYWxsIHRvIGRpc3Bvc2UuIFRoZSBhY3Rpb24gaXMgZ3VhcmFudGVlZCB0byBiZSBydW4gYXQgbW9zdCBvbmNlLlxuICAgKi9cbiAgdmFyIERpc3Bvc2FibGUgPSBSeC5EaXNwb3NhYmxlID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uIHx8IG5vb3A7XG4gIH07XG5cbiAgLyoqIFBlcmZvcm1zIHRoZSB0YXNrIG9mIGNsZWFuaW5nIHVwIHJlc291cmNlcy4gKi9cbiAgRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgdGhpcy5hY3Rpb24oKTtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZGlzcG9zYWJsZSBvYmplY3QgdGhhdCBpbnZva2VzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIHdoZW4gZGlzcG9zZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGRpc3Bvc2UgQWN0aW9uIHRvIHJ1biBkdXJpbmcgdGhlIGZpcnN0IGNhbGwgdG8gZGlzcG9zZS4gVGhlIGFjdGlvbiBpcyBndWFyYW50ZWVkIHRvIGJlIHJ1biBhdCBtb3N0IG9uY2UuXG4gICAqIEByZXR1cm4ge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB0aGF0IHJ1bnMgdGhlIGdpdmVuIGFjdGlvbiB1cG9uIGRpc3Bvc2FsLlxuICAgKi9cbiAgdmFyIGRpc3Bvc2FibGVDcmVhdGUgPSBEaXNwb3NhYmxlLmNyZWF0ZSA9IGZ1bmN0aW9uIChhY3Rpb24pIHsgcmV0dXJuIG5ldyBEaXNwb3NhYmxlKGFjdGlvbik7IH07XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGRpc3Bvc2FibGUgdGhhdCBkb2VzIG5vdGhpbmcgd2hlbiBkaXNwb3NlZC5cbiAgICovXG4gIHZhciBkaXNwb3NhYmxlRW1wdHkgPSBEaXNwb3NhYmxlLmVtcHR5ID0geyBkaXNwb3NlOiBub29wIH07XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBkaXNwb3NhYmxlXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBPYmplY3QgdG8gdGVzdCB3aGV0aGVyIGl0IGhhcyBhIGRpc3Bvc2UgbWV0aG9kXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGEgZGlzcG9zYWJsZSBvYmplY3QsIGVsc2UgZmFsc2UuXG4gICAqL1xuICB2YXIgaXNEaXNwb3NhYmxlID0gRGlzcG9zYWJsZS5pc0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoZCkge1xuICAgIHJldHVybiBkICYmIGlzRnVuY3Rpb24oZC5kaXNwb3NlKTtcbiAgfTtcblxuICB2YXIgY2hlY2tEaXNwb3NlZCA9IERpc3Bvc2FibGUuY2hlY2tEaXNwb3NlZCA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlKSB7XG4gICAgaWYgKGRpc3Bvc2FibGUuaXNEaXNwb3NlZCkgeyB0aHJvdyBuZXcgT2JqZWN0RGlzcG9zZWRFcnJvcigpOyB9XG4gIH07XG5cbiAgdmFyIGRpc3Bvc2FibGVGaXh1cCA9IERpc3Bvc2FibGUuX2ZpeHVwID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgIHJldHVybiBpc0Rpc3Bvc2FibGUocmVzdWx0KSA/IHJlc3VsdCA6IGRpc3Bvc2FibGVFbXB0eTtcbiAgfTtcblxuICAvLyBTaW5nbGUgYXNzaWdubWVudFxuICB2YXIgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUgPSBSeC5TaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICB9O1xuICBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZS5wcm90b3R5cGUuZ2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50O1xuICB9O1xuICBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZS5wcm90b3R5cGUuc2V0RGlzcG9zYWJsZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmN1cnJlbnQpIHsgdGhyb3cgbmV3IEVycm9yKCdEaXNwb3NhYmxlIGhhcyBhbHJlYWR5IGJlZW4gYXNzaWduZWQnKTsgfVxuICAgIHZhciBzaG91bGREaXNwb3NlID0gdGhpcy5pc0Rpc3Bvc2VkO1xuICAgICFzaG91bGREaXNwb3NlICYmICh0aGlzLmN1cnJlbnQgPSB2YWx1ZSk7XG4gICAgc2hvdWxkRGlzcG9zZSAmJiB2YWx1ZSAmJiB2YWx1ZS5kaXNwb3NlKCk7XG4gIH07XG4gIFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIG9sZCA9IHRoaXMuY3VycmVudDtcbiAgICAgIHRoaXMuY3VycmVudCA9IG51bGw7XG4gICAgICBvbGQgJiYgb2xkLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gTXVsdGlwbGUgYXNzaWdubWVudCBkaXNwb3NhYmxlXG4gIHZhciBTZXJpYWxEaXNwb3NhYmxlID0gUnguU2VyaWFsRGlzcG9zYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB0aGlzLmN1cnJlbnQgPSBudWxsO1xuICB9O1xuICBTZXJpYWxEaXNwb3NhYmxlLnByb3RvdHlwZS5nZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmN1cnJlbnQ7XG4gIH07XG4gIFNlcmlhbERpc3Bvc2FibGUucHJvdG90eXBlLnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YXIgc2hvdWxkRGlzcG9zZSA9IHRoaXMuaXNEaXNwb3NlZDtcbiAgICBpZiAoIXNob3VsZERpc3Bvc2UpIHtcbiAgICAgIHZhciBvbGQgPSB0aGlzLmN1cnJlbnQ7XG4gICAgICB0aGlzLmN1cnJlbnQgPSB2YWx1ZTtcbiAgICB9XG4gICAgb2xkICYmIG9sZC5kaXNwb3NlKCk7XG4gICAgc2hvdWxkRGlzcG9zZSAmJiB2YWx1ZSAmJiB2YWx1ZS5kaXNwb3NlKCk7XG4gIH07XG4gIFNlcmlhbERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICB2YXIgb2xkID0gdGhpcy5jdXJyZW50O1xuICAgICAgdGhpcy5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gICAgb2xkICYmIG9sZC5kaXNwb3NlKCk7XG4gIH07XG5cbiAgdmFyIEJpbmFyeURpc3Bvc2FibGUgPSBSeC5CaW5hcnlEaXNwb3NhYmxlID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHtcbiAgICB0aGlzLl9maXJzdCA9IGZpcnN0O1xuICAgIHRoaXMuX3NlY29uZCA9IHNlY29uZDtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfTtcblxuICBCaW5hcnlEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdmFyIG9sZDEgPSB0aGlzLl9maXJzdDtcbiAgICAgIHRoaXMuX2ZpcnN0ID0gbnVsbDtcbiAgICAgIG9sZDEgJiYgb2xkMS5kaXNwb3NlKCk7XG4gICAgICB2YXIgb2xkMiA9IHRoaXMuX3NlY29uZDtcbiAgICAgIHRoaXMuX3NlY29uZCA9IG51bGw7XG4gICAgICBvbGQyICYmIG9sZDIuZGlzcG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgTkFyeURpc3Bvc2FibGUgPSBSeC5OQXJ5RGlzcG9zYWJsZSA9IGZ1bmN0aW9uIChkaXNwb3NhYmxlcykge1xuICAgIHRoaXMuX2Rpc3Bvc2FibGVzID0gZGlzcG9zYWJsZXM7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIH07XG5cbiAgTkFyeURpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdGhpcy5fZGlzcG9zYWJsZXNbaV0uZGlzcG9zZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5fZGlzcG9zYWJsZXMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYSBkaXNwb3NhYmxlIHJlc291cmNlIHRoYXQgb25seSBkaXNwb3NlcyBpdHMgdW5kZXJseWluZyBkaXNwb3NhYmxlIHJlc291cmNlIHdoZW4gYWxsIGRlcGVuZGVudCBkaXNwb3NhYmxlIG9iamVjdHMgaGF2ZSBiZWVuIGRpc3Bvc2VkLlxuICAgKi9cbiAgdmFyIFJlZkNvdW50RGlzcG9zYWJsZSA9IFJ4LlJlZkNvdW50RGlzcG9zYWJsZSA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICBmdW5jdGlvbiBJbm5lckRpc3Bvc2FibGUoZGlzcG9zYWJsZSkge1xuICAgICAgdGhpcy5kaXNwb3NhYmxlID0gZGlzcG9zYWJsZTtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZS5jb3VudCsrO1xuICAgICAgdGhpcy5pc0lubmVyRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBJbm5lckRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkICYmICF0aGlzLmlzSW5uZXJEaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmlzSW5uZXJEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlzcG9zYWJsZS5jb3VudC0tO1xuICAgICAgICBpZiAodGhpcy5kaXNwb3NhYmxlLmNvdW50ID09PSAwICYmIHRoaXMuZGlzcG9zYWJsZS5pc1ByaW1hcnlEaXNwb3NlZCkge1xuICAgICAgICAgIHRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2FibGUudW5kZXJseWluZ0Rpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHRoZSBSZWZDb3VudERpc3Bvc2FibGUgd2l0aCB0aGUgc3BlY2lmaWVkIGRpc3Bvc2FibGUuXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtEaXNwb3NhYmxlfSBkaXNwb3NhYmxlIFVuZGVybHlpbmcgZGlzcG9zYWJsZS5cbiAgICAgICovXG4gICAgZnVuY3Rpb24gUmVmQ291bnREaXNwb3NhYmxlKGRpc3Bvc2FibGUpIHtcbiAgICAgIHRoaXMudW5kZXJseWluZ0Rpc3Bvc2FibGUgPSBkaXNwb3NhYmxlO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzUHJpbWFyeURpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlcyB0aGUgdW5kZXJseWluZyBkaXNwb3NhYmxlIG9ubHkgd2hlbiBhbGwgZGVwZW5kZW50IGRpc3Bvc2FibGVzIGhhdmUgYmVlbiBkaXNwb3NlZFxuICAgICAqL1xuICAgIFJlZkNvdW50RGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkICYmICF0aGlzLmlzUHJpbWFyeURpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaXNQcmltYXJ5RGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5jb3VudCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy51bmRlcmx5aW5nRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGRlcGVuZGVudCBkaXNwb3NhYmxlIHRoYXQgd2hlbiBkaXNwb3NlZCBkZWNyZWFzZXMgdGhlIHJlZmNvdW50IG9uIHRoZSB1bmRlcmx5aW5nIGRpc3Bvc2FibGUuXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IEEgZGVwZW5kZW50IGRpc3Bvc2FibGUgY29udHJpYnV0aW5nIHRvIHRoZSByZWZlcmVuY2UgY291bnQgdGhhdCBtYW5hZ2VzIHRoZSB1bmRlcmx5aW5nIGRpc3Bvc2FibGUncyBsaWZldGltZS5cbiAgICAgKi9cbiAgICBSZWZDb3VudERpc3Bvc2FibGUucHJvdG90eXBlLmdldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5pc0Rpc3Bvc2VkID8gZGlzcG9zYWJsZUVtcHR5IDogbmV3IElubmVyRGlzcG9zYWJsZSh0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlZkNvdW50RGlzcG9zYWJsZTtcbiAgfSkoKTtcblxuICBmdW5jdGlvbiBTY2hlZHVsZWREaXNwb3NhYmxlKHNjaGVkdWxlciwgZGlzcG9zYWJsZSkge1xuICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgIHRoaXMuZGlzcG9zYWJsZSA9IGRpc3Bvc2FibGU7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gIH1cblxuICBmdW5jdGlvbiBzY2hlZHVsZUl0ZW0ocywgc2VsZikge1xuICAgIGlmICghc2VsZi5pc0Rpc3Bvc2VkKSB7XG4gICAgICBzZWxmLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgc2VsZi5kaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICB9XG4gIH1cblxuICBTY2hlZHVsZWREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKHRoaXMsIHNjaGVkdWxlSXRlbSk7XG4gIH07XG5cbiAgdmFyIFNjaGVkdWxlZEl0ZW0gPSBSeC5pbnRlcm5hbHMuU2NoZWR1bGVkSXRlbSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIsIHN0YXRlLCBhY3Rpb24sIGR1ZVRpbWUsIGNvbXBhcmVyKSB7XG4gICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgdGhpcy5zdGF0ZSA9IHN0YXRlO1xuICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xuICAgIHRoaXMuZHVlVGltZSA9IGR1ZVRpbWU7XG4gICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyIHx8IGRlZmF1bHRTdWJDb21wYXJlcjtcbiAgICB0aGlzLmRpc3Bvc2FibGUgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgfTtcblxuICBTY2hlZHVsZWRJdGVtLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kaXNwb3NhYmxlLnNldERpc3Bvc2FibGUodGhpcy5pbnZva2VDb3JlKCkpO1xuICB9O1xuXG4gIFNjaGVkdWxlZEl0ZW0ucHJvdG90eXBlLmNvbXBhcmVUbyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiB0aGlzLmNvbXBhcmVyKHRoaXMuZHVlVGltZSwgb3RoZXIuZHVlVGltZSk7XG4gIH07XG5cbiAgU2NoZWR1bGVkSXRlbS5wcm90b3R5cGUuaXNDYW5jZWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcG9zYWJsZS5pc0Rpc3Bvc2VkO1xuICB9O1xuXG4gIFNjaGVkdWxlZEl0ZW0ucHJvdG90eXBlLmludm9rZUNvcmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGRpc3Bvc2FibGVGaXh1cCh0aGlzLmFjdGlvbih0aGlzLnNjaGVkdWxlciwgdGhpcy5zdGF0ZSkpO1xuICB9O1xuXG4gIC8qKiBQcm92aWRlcyBhIHNldCBvZiBzdGF0aWMgcHJvcGVydGllcyB0byBhY2Nlc3MgY29tbW9ubHkgdXNlZCBzY2hlZHVsZXJzLiAqL1xuICB2YXIgU2NoZWR1bGVyID0gUnguU2NoZWR1bGVyID0gKGZ1bmN0aW9uICgpIHtcblxuICAgIGZ1bmN0aW9uIFNjaGVkdWxlcigpIHsgfVxuXG4gICAgLyoqIERldGVybWluZXMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgc2NoZWR1bGVyICovXG4gICAgU2NoZWR1bGVyLmlzU2NoZWR1bGVyID0gZnVuY3Rpb24gKHMpIHtcbiAgICAgIHJldHVybiBzIGluc3RhbmNlb2YgU2NoZWR1bGVyO1xuICAgIH07XG5cbiAgICB2YXIgc2NoZWR1bGVyUHJvdG8gPSBTY2hlZHVsZXIucHJvdG90eXBlO1xuXG4gICAgLyoqXG4gICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAqIEBwYXJhbSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICAgIH07XG5cbiAgLyoqXG4gICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZHVlVGltZS5cbiAgICogQHBhcmFtIHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVlVGltZSBSZWxhdGl2ZSB0aW1lIGFmdGVyIHdoaWNoIHRvIGV4ZWN1dGUgdGhlIGFjdGlvbi5cbiAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IFRoZSBkaXNwb3NhYmxlIG9iamVjdCB1c2VkIHRvIGNhbmNlbCB0aGUgc2NoZWR1bGVkIGFjdGlvbiAoYmVzdCBlZmZvcnQpLlxuICAgKi9cbiAgICBzY2hlZHVsZXJQcm90by5zY2hlZHVsZUZ1dHVyZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgZHQgPSBkdWVUaW1lO1xuICAgICAgZHQgaW5zdGFuY2VvZiBEYXRlICYmIChkdCA9IGR0IC0gdGhpcy5ub3coKSk7XG4gICAgICBkdCA9IFNjaGVkdWxlci5ub3JtYWxpemUoZHQpO1xuXG4gICAgICBpZiAoZHQgPT09IDApIHsgcmV0dXJuIHRoaXMuc2NoZWR1bGUoc3RhdGUsIGFjdGlvbik7IH1cblxuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlRnV0dXJlKHN0YXRlLCBkdCwgYWN0aW9uKTtcbiAgICB9O1xuXG4gICAgc2NoZWR1bGVyUHJvdG8uX3NjaGVkdWxlRnV0dXJlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHRocm93IG5ldyBOb3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gICAgfTtcblxuICAgIC8qKiBHZXRzIHRoZSBjdXJyZW50IHRpbWUgYWNjb3JkaW5nIHRvIHRoZSBsb2NhbCBtYWNoaW5lJ3Mgc3lzdGVtIGNsb2NrLiAqL1xuICAgIFNjaGVkdWxlci5ub3cgPSBkZWZhdWx0Tm93O1xuXG4gICAgLyoqIEdldHMgdGhlIGN1cnJlbnQgdGltZSBhY2NvcmRpbmcgdG8gdGhlIGxvY2FsIG1hY2hpbmUncyBzeXN0ZW0gY2xvY2suICovXG4gICAgU2NoZWR1bGVyLnByb3RvdHlwZS5ub3cgPSBkZWZhdWx0Tm93O1xuXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXplcyB0aGUgc3BlY2lmaWVkIFRpbWVTcGFuIHZhbHVlIHRvIGEgcG9zaXRpdmUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVTcGFuIFRoZSB0aW1lIHNwYW4gdmFsdWUgdG8gbm9ybWFsaXplLlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBzcGVjaWZpZWQgVGltZVNwYW4gdmFsdWUgaWYgaXQgaXMgemVybyBvciBwb3NpdGl2ZTsgb3RoZXJ3aXNlLCAwXG4gICAgICovXG4gICAgU2NoZWR1bGVyLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uICh0aW1lU3Bhbikge1xuICAgICAgdGltZVNwYW4gPCAwICYmICh0aW1lU3BhbiA9IDApO1xuICAgICAgcmV0dXJuIHRpbWVTcGFuO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2NoZWR1bGVyO1xuICB9KCkpO1xuXG4gIHZhciBub3JtYWxpemVUaW1lID0gU2NoZWR1bGVyLm5vcm1hbGl6ZSwgaXNTY2hlZHVsZXIgPSBTY2hlZHVsZXIuaXNTY2hlZHVsZXI7XG5cbiAgKGZ1bmN0aW9uIChzY2hlZHVsZXJQcm90bykge1xuXG4gICAgZnVuY3Rpb24gaW52b2tlUmVjSW1tZWRpYXRlKHNjaGVkdWxlciwgcGFpcikge1xuICAgICAgdmFyIHN0YXRlID0gcGFpclswXSwgYWN0aW9uID0gcGFpclsxXSwgZ3JvdXAgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgYWN0aW9uKHN0YXRlLCBpbm5lckFjdGlvbik7XG4gICAgICByZXR1cm4gZ3JvdXA7XG5cbiAgICAgIGZ1bmN0aW9uIGlubmVyQWN0aW9uKHN0YXRlMikge1xuICAgICAgICB2YXIgaXNBZGRlZCA9IGZhbHNlLCBpc0RvbmUgPSBmYWxzZTtcblxuICAgICAgICB2YXIgZCA9IHNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZTIsIHNjaGVkdWxlV29yayk7XG4gICAgICAgIGlmICghaXNEb25lKSB7XG4gICAgICAgICAgZ3JvdXAuYWRkKGQpO1xuICAgICAgICAgIGlzQWRkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2NoZWR1bGVXb3JrKF8sIHN0YXRlMykge1xuICAgICAgICAgIGlmIChpc0FkZGVkKSB7XG4gICAgICAgICAgICBncm91cC5yZW1vdmUoZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjdGlvbihzdGF0ZTMsIGlubmVyQWN0aW9uKTtcbiAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW52b2tlUmVjRGF0ZShzY2hlZHVsZXIsIHBhaXIpIHtcbiAgICAgIHZhciBzdGF0ZSA9IHBhaXJbMF0sIGFjdGlvbiA9IHBhaXJbMV0sIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIGFjdGlvbihzdGF0ZSwgaW5uZXJBY3Rpb24pO1xuICAgICAgcmV0dXJuIGdyb3VwO1xuXG4gICAgICBmdW5jdGlvbiBpbm5lckFjdGlvbihzdGF0ZTIsIGR1ZVRpbWUxKSB7XG4gICAgICAgIHZhciBpc0FkZGVkID0gZmFsc2UsIGlzRG9uZSA9IGZhbHNlO1xuXG4gICAgICAgIHZhciBkID0gc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKHN0YXRlMiwgZHVlVGltZTEsIHNjaGVkdWxlV29yayk7XG4gICAgICAgIGlmICghaXNEb25lKSB7XG4gICAgICAgICAgZ3JvdXAuYWRkKGQpO1xuICAgICAgICAgIGlzQWRkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2NoZWR1bGVXb3JrKF8sIHN0YXRlMykge1xuICAgICAgICAgIGlmIChpc0FkZGVkKSB7XG4gICAgICAgICAgICBncm91cC5yZW1vdmUoZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFjdGlvbihzdGF0ZTMsIGlubmVyQWN0aW9uKTtcbiAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCByZWN1cnNpdmVseS5cbiAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGV4ZWN1dGUgcmVjdXJzaXZlbHkuIFRoZSBsYXN0IHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIGFjdGlvbiBpcyB1c2VkIHRvIHRyaWdnZXIgcmVjdXJzaXZlIHNjaGVkdWxpbmcgb2YgdGhlIGFjdGlvbiwgcGFzc2luZyBpbiByZWN1cnNpdmUgaW52b2NhdGlvbiBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVSZWN1cnNpdmUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGUoW3N0YXRlLCBhY3Rpb25dLCBpbnZva2VSZWNJbW1lZGlhdGUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIHJlY3Vyc2l2ZWx5IGFmdGVyIGEgc3BlY2lmaWVkIHJlbGF0aXZlIG9yIGFic29sdXRlIGR1ZSB0aW1lLlxuICAgICAqIEBwYXJhbSB7TWl4ZWR9IHN0YXRlIFN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBY3Rpb24gdG8gZXhlY3V0ZSByZWN1cnNpdmVseS4gVGhlIGxhc3QgcGFyYW1ldGVyIHBhc3NlZCB0byB0aGUgYWN0aW9uIGlzIHVzZWQgdG8gdHJpZ2dlciByZWN1cnNpdmUgc2NoZWR1bGluZyBvZiB0aGUgYWN0aW9uLCBwYXNzaW5nIGluIHRoZSByZWN1cnNpdmUgZHVlIHRpbWUgYW5kIGludm9jYXRpb24gc3RhdGUuXG4gICAgICogQHBhcmFtIHtOdW1iZXIgfCBEYXRlfSBkdWVUaW1lIFJlbGF0aXZlIG9yIGFic29sdXRlIHRpbWUgYWZ0ZXIgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uIGZvciB0aGUgZmlyc3QgdGltZS5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVGdXR1cmUoW3N0YXRlLCBhY3Rpb25dLCBkdWVUaW1lLCBpbnZva2VSZWNEYXRlKTtcbiAgICB9O1xuXG4gIH0oU2NoZWR1bGVyLnByb3RvdHlwZSkpO1xuXG4gIChmdW5jdGlvbiAoc2NoZWR1bGVyUHJvdG8pIHtcblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHBlcmlvZGljIHBpZWNlIG9mIHdvcmsgYnkgZHluYW1pY2FsbHkgZGlzY292ZXJpbmcgdGhlIHNjaGVkdWxlcidzIGNhcGFiaWxpdGllcy4gVGhlIHBlcmlvZGljIHRhc2sgd2lsbCBiZSBzY2hlZHVsZWQgdXNpbmcgd2luZG93LnNldEludGVydmFsIGZvciB0aGUgYmFzZSBpbXBsZW1lbnRhdGlvbi5cbiAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBJbml0aWFsIHN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHVwb24gdGhlIGZpcnN0IGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcGVyaW9kIFBlcmlvZCBmb3IgcnVubmluZyB0aGUgd29yayBwZXJpb2RpY2FsbHkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZCwgcG90ZW50aWFsbHkgdXBkYXRpbmcgdGhlIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCByZWN1cnJpbmcgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uc2NoZWR1bGVQZXJpb2RpYyA9IGZ1bmN0aW9uKHN0YXRlLCBwZXJpb2QsIGFjdGlvbikge1xuICAgICAgaWYgKHR5cGVvZiByb290LnNldEludGVydmFsID09PSAndW5kZWZpbmVkJykgeyB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXJyb3IoKTsgfVxuICAgICAgcGVyaW9kID0gbm9ybWFsaXplVGltZShwZXJpb2QpO1xuICAgICAgdmFyIHMgPSBzdGF0ZSwgaWQgPSByb290LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsgcyA9IGFjdGlvbihzKTsgfSwgcGVyaW9kKTtcbiAgICAgIHJldHVybiBkaXNwb3NhYmxlQ3JlYXRlKGZ1bmN0aW9uICgpIHsgcm9vdC5jbGVhckludGVydmFsKGlkKTsgfSk7XG4gICAgfTtcblxuICB9KFNjaGVkdWxlci5wcm90b3R5cGUpKTtcblxuICAoZnVuY3Rpb24gKHNjaGVkdWxlclByb3RvKSB7XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHNjaGVkdWxlciB0aGF0IHdyYXBzIHRoZSBvcmlnaW5hbCBzY2hlZHVsZXIsIGFkZGluZyBleGNlcHRpb24gaGFuZGxpbmcgZm9yIHNjaGVkdWxlZCBhY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgSGFuZGxlciB0aGF0J3MgcnVuIGlmIGFuIGV4Y2VwdGlvbiBpcyBjYXVnaHQuIFRoZSBleGNlcHRpb24gd2lsbCBiZSByZXRocm93biBpZiB0aGUgaGFuZGxlciByZXR1cm5zIGZhbHNlLlxuICAgICAqIEByZXR1cm5zIHtTY2hlZHVsZXJ9IFdyYXBwZXIgYXJvdW5kIHRoZSBvcmlnaW5hbCBzY2hlZHVsZXIsIGVuZm9yY2luZyBleGNlcHRpb24gaGFuZGxpbmcuXG4gICAgICovXG4gICAgc2NoZWR1bGVyUHJvdG8uY2F0Y2hFcnJvciA9IHNjaGVkdWxlclByb3RvWydjYXRjaCddID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcbiAgICAgIHJldHVybiBuZXcgQ2F0Y2hTY2hlZHVsZXIodGhpcywgaGFuZGxlcik7XG4gICAgfTtcbiAgfShTY2hlZHVsZXIucHJvdG90eXBlKSk7XG5cbiAgdmFyIFNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUgPSBSeC5pbnRlcm5hbHMuU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gY3JlYXRlVGljayhzZWxmKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gdGljayhjb21tYW5kLCByZWN1cnNlKSB7XG4gICAgICAgIHJlY3Vyc2UoMCwgc2VsZi5fcGVyaW9kKTtcbiAgICAgICAgdmFyIHN0YXRlID0gdHJ5Q2F0Y2goc2VsZi5fYWN0aW9uKShzZWxmLl9zdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZSA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICBzZWxmLl9jYW5jZWwuZGlzcG9zZSgpO1xuICAgICAgICAgIHRocm93ZXIoc3RhdGUuZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gU2NoZWR1bGVQZXJpb2RpY1JlY3Vyc2l2ZShzY2hlZHVsZXIsIHN0YXRlLCBwZXJpb2QsIGFjdGlvbikge1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3BlcmlvZCA9IHBlcmlvZDtcbiAgICAgIHRoaXMuX2FjdGlvbiA9IGFjdGlvbjtcbiAgICB9XG5cbiAgICBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICB0aGlzLl9jYW5jZWwgPSBkO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZUZ1dHVyZSgwLCB0aGlzLl9wZXJpb2QsIGNyZWF0ZVRpY2sodGhpcykpKTtcblxuICAgICAgcmV0dXJuIGQ7XG4gICAgfTtcblxuICAgIHJldHVybiBTY2hlZHVsZVBlcmlvZGljUmVjdXJzaXZlO1xuICB9KCkpO1xuXG4gIC8qKiBHZXRzIGEgc2NoZWR1bGVyIHRoYXQgc2NoZWR1bGVzIHdvcmsgaW1tZWRpYXRlbHkgb24gdGhlIGN1cnJlbnQgdGhyZWFkLiAqL1xuICAgdmFyIEltbWVkaWF0ZVNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSW1tZWRpYXRlU2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEltbWVkaWF0ZVNjaGVkdWxlcigpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEltbWVkaWF0ZVNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIGRpc3Bvc2FibGVGaXh1cChhY3Rpb24odGhpcywgc3RhdGUpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEltbWVkaWF0ZVNjaGVkdWxlcjtcbiAgfShTY2hlZHVsZXIpKTtcblxuICB2YXIgaW1tZWRpYXRlU2NoZWR1bGVyID0gU2NoZWR1bGVyLmltbWVkaWF0ZSA9IG5ldyBJbW1lZGlhdGVTY2hlZHVsZXIoKTtcblxuICAvKipcbiAgICogR2V0cyBhIHNjaGVkdWxlciB0aGF0IHNjaGVkdWxlcyB3b3JrIGFzIHNvb24gYXMgcG9zc2libGUgb24gdGhlIGN1cnJlbnQgdGhyZWFkLlxuICAgKi9cbiAgdmFyIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIHZhciBxdWV1ZTtcblxuICAgIGZ1bmN0aW9uIHJ1blRyYW1wb2xpbmUgKCkge1xuICAgICAgd2hpbGUgKHF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFyIGl0ZW0gPSBxdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgICFpdGVtLmlzQ2FuY2VsbGVkKCkgJiYgaXRlbS5pbnZva2UoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpbmhlcml0cyhDdXJyZW50VGhyZWFkU2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEN1cnJlbnRUaHJlYWRTY2hlZHVsZXIoKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDdXJyZW50VGhyZWFkU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZSA9IGZ1bmN0aW9uIChzdGF0ZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgc2kgPSBuZXcgU2NoZWR1bGVkSXRlbSh0aGlzLCBzdGF0ZSwgYWN0aW9uLCB0aGlzLm5vdygpKTtcblxuICAgICAgaWYgKCFxdWV1ZSkge1xuICAgICAgICBxdWV1ZSA9IG5ldyBQcmlvcml0eVF1ZXVlKDQpO1xuICAgICAgICBxdWV1ZS5lbnF1ZXVlKHNpKTtcblxuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2gocnVuVHJhbXBvbGluZSkoKTtcbiAgICAgICAgcXVldWUgPSBudWxsO1xuICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyB0aHJvd2VyKHJlc3VsdC5lKTsgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWUuZW5xdWV1ZShzaSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2kuZGlzcG9zYWJsZTtcbiAgICB9O1xuXG4gICAgQ3VycmVudFRocmVhZFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGVSZXF1aXJlZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICFxdWV1ZTsgfTtcblxuICAgIHJldHVybiBDdXJyZW50VGhyZWFkU2NoZWR1bGVyO1xuICB9KFNjaGVkdWxlcikpO1xuXG4gIHZhciBjdXJyZW50VGhyZWFkU2NoZWR1bGVyID0gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQgPSBuZXcgQ3VycmVudFRocmVhZFNjaGVkdWxlcigpO1xuXG4gIHZhciBzY2hlZHVsZU1ldGhvZCwgY2xlYXJNZXRob2Q7XG5cbiAgdmFyIGxvY2FsVGltZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBsb2NhbFNldFRpbWVvdXQsIGxvY2FsQ2xlYXJUaW1lb3V0ID0gbm9vcDtcbiAgICBpZiAoISFyb290LnNldFRpbWVvdXQpIHtcbiAgICAgIGxvY2FsU2V0VGltZW91dCA9IHJvb3Quc2V0VGltZW91dDtcbiAgICAgIGxvY2FsQ2xlYXJUaW1lb3V0ID0gcm9vdC5jbGVhclRpbWVvdXQ7XG4gICAgfSBlbHNlIGlmICghIXJvb3QuV1NjcmlwdCkge1xuICAgICAgbG9jYWxTZXRUaW1lb3V0ID0gZnVuY3Rpb24gKGZuLCB0aW1lKSB7XG4gICAgICAgIHJvb3QuV1NjcmlwdC5TbGVlcCh0aW1lKTtcbiAgICAgICAgZm4oKTtcbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBOb3RTdXBwb3J0ZWRFcnJvcigpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBzZXRUaW1lb3V0OiBsb2NhbFNldFRpbWVvdXQsXG4gICAgICBjbGVhclRpbWVvdXQ6IGxvY2FsQ2xlYXJUaW1lb3V0XG4gICAgfTtcbiAgfSgpKTtcbiAgdmFyIGxvY2FsU2V0VGltZW91dCA9IGxvY2FsVGltZXIuc2V0VGltZW91dCxcbiAgICBsb2NhbENsZWFyVGltZW91dCA9IGxvY2FsVGltZXIuY2xlYXJUaW1lb3V0O1xuXG4gIChmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgbmV4dEhhbmRsZSA9IDEsIHRhc2tzQnlIYW5kbGUgPSB7fSwgY3VycmVudGx5UnVubmluZyA9IGZhbHNlO1xuXG4gICAgY2xlYXJNZXRob2QgPSBmdW5jdGlvbiAoaGFuZGxlKSB7XG4gICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBydW5UYXNrKGhhbmRsZSkge1xuICAgICAgaWYgKGN1cnJlbnRseVJ1bm5pbmcpIHtcbiAgICAgICAgbG9jYWxTZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsgcnVuVGFzayhoYW5kbGUpOyB9LCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciB0YXNrID0gdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0YXNrKSgpO1xuICAgICAgICAgIGNsZWFyTWV0aG9kKGhhbmRsZSk7XG4gICAgICAgICAgY3VycmVudGx5UnVubmluZyA9IGZhbHNlO1xuICAgICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHRocm93ZXIocmVzdWx0LmUpOyB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVOYXRpdmUgPSBuZXcgUmVnRXhwKCdeJyArXG4gICAgICBTdHJpbmcodG9TdHJpbmcpXG4gICAgICAgIC5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpXG4gICAgICAgIC5yZXBsYWNlKC90b1N0cmluZ3wgZm9yIFteXFxdXSsvZywgJy4qPycpICsgJyQnXG4gICAgKTtcblxuICAgIHZhciBzZXRJbW1lZGlhdGUgPSB0eXBlb2YgKHNldEltbWVkaWF0ZSA9IGZyZWVHbG9iYWwgJiYgbW9kdWxlRXhwb3J0cyAmJiBmcmVlR2xvYmFsLnNldEltbWVkaWF0ZSkgPT0gJ2Z1bmN0aW9uJyAmJlxuICAgICAgIXJlTmF0aXZlLnRlc3Qoc2V0SW1tZWRpYXRlKSAmJiBzZXRJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBwb3N0TWVzc2FnZVN1cHBvcnRlZCAoKSB7XG4gICAgICAvLyBFbnN1cmUgbm90IGluIGEgd29ya2VyXG4gICAgICBpZiAoIXJvb3QucG9zdE1lc3NhZ2UgfHwgcm9vdC5pbXBvcnRTY3JpcHRzKSB7IHJldHVybiBmYWxzZTsgfVxuICAgICAgdmFyIGlzQXN5bmMgPSBmYWxzZSwgb2xkSGFuZGxlciA9IHJvb3Qub25tZXNzYWdlO1xuICAgICAgLy8gVGVzdCBmb3IgYXN5bmNcbiAgICAgIHJvb3Qub25tZXNzYWdlID0gZnVuY3Rpb24gKCkgeyBpc0FzeW5jID0gdHJ1ZTsgfTtcbiAgICAgIHJvb3QucG9zdE1lc3NhZ2UoJycsICcqJyk7XG4gICAgICByb290Lm9ubWVzc2FnZSA9IG9sZEhhbmRsZXI7XG5cbiAgICAgIHJldHVybiBpc0FzeW5jO1xuICAgIH1cblxuICAgIC8vIFVzZSBpbiBvcmRlciwgc2V0SW1tZWRpYXRlLCBuZXh0VGljaywgcG9zdE1lc3NhZ2UsIE1lc3NhZ2VDaGFubmVsLCBzY3JpcHQgcmVhZHlzdGF0ZWNoYW5nZWQsIHNldFRpbWVvdXRcbiAgICBpZiAoaXNGdW5jdGlvbihzZXRJbW1lZGlhdGUpKSB7XG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgc2V0SW1tZWRpYXRlKGZ1bmN0aW9uICgpIHsgcnVuVGFzayhpZCk7IH0pO1xuXG4gICAgICAgIHJldHVybiBpZDtcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1blRhc2soaWQpOyB9KTtcblxuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAocG9zdE1lc3NhZ2VTdXBwb3J0ZWQoKSkge1xuICAgICAgdmFyIE1TR19QUkVGSVggPSAnbXMucnguc2NoZWR1bGUnICsgTWF0aC5yYW5kb20oKTtcblxuICAgICAgdmFyIG9uR2xvYmFsUG9zdE1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgLy8gT25seSBpZiB3ZSdyZSBhIG1hdGNoIHRvIGF2b2lkIGFueSBvdGhlciBnbG9iYWwgZXZlbnRzXG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnQuZGF0YSA9PT0gJ3N0cmluZycgJiYgZXZlbnQuZGF0YS5zdWJzdHJpbmcoMCwgTVNHX1BSRUZJWC5sZW5ndGgpID09PSBNU0dfUFJFRklYKSB7XG4gICAgICAgICAgcnVuVGFzayhldmVudC5kYXRhLnN1YnN0cmluZyhNU0dfUFJFRklYLmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICByb290LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBvbkdsb2JhbFBvc3RNZXNzYWdlLCBmYWxzZSk7XG5cbiAgICAgIHNjaGVkdWxlTWV0aG9kID0gZnVuY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB2YXIgaWQgPSBuZXh0SGFuZGxlKys7XG4gICAgICAgIHRhc2tzQnlIYW5kbGVbaWRdID0gYWN0aW9uO1xuICAgICAgICByb290LnBvc3RNZXNzYWdlKE1TR19QUkVGSVggKyBpZCwgJyonKTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKCEhcm9vdC5NZXNzYWdlQ2hhbm5lbCkge1xuICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgcm9vdC5NZXNzYWdlQ2hhbm5lbCgpO1xuXG4gICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7IHJ1blRhc2soZS5kYXRhKTsgfTtcblxuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBpZCA9IG5leHRIYW5kbGUrKztcbiAgICAgICAgdGFza3NCeUhhbmRsZVtpZF0gPSBhY3Rpb247XG4gICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaWQpO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAoJ2RvY3VtZW50JyBpbiByb290ICYmICdvbnJlYWR5c3RhdGVjaGFuZ2UnIGluIHJvb3QuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpIHtcblxuICAgICAgc2NoZWR1bGVNZXRob2QgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICAgIHZhciBzY3JpcHRFbGVtZW50ID0gcm9vdC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcblxuICAgICAgICBzY3JpcHRFbGVtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBydW5UYXNrKGlkKTtcbiAgICAgICAgICBzY3JpcHRFbGVtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7XG4gICAgICAgICAgc2NyaXB0RWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdEVsZW1lbnQpO1xuICAgICAgICAgIHNjcmlwdEVsZW1lbnQgPSBudWxsO1xuICAgICAgICB9O1xuICAgICAgICByb290LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChzY3JpcHRFbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBzY2hlZHVsZU1ldGhvZCA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGlkID0gbmV4dEhhbmRsZSsrO1xuICAgICAgICB0YXNrc0J5SGFuZGxlW2lkXSA9IGFjdGlvbjtcbiAgICAgICAgbG9jYWxTZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBydW5UYXNrKGlkKTtcbiAgICAgICAgfSwgMCk7XG5cbiAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgfTtcbiAgICB9XG4gIH0oKSk7XG5cbiAgLyoqXG4gICAqIEdldHMgYSBzY2hlZHVsZXIgdGhhdCBzY2hlZHVsZXMgd29yayB2aWEgYSB0aW1lZCBjYWxsYmFjayBiYXNlZCB1cG9uIHBsYXRmb3JtLlxuICAgKi9cbiAgIHZhciBEZWZhdWx0U2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICAgaW5oZXJpdHMoRGVmYXVsdFNjaGVkdWxlciwgX19zdXBlcl9fKTtcbiAgICAgZnVuY3Rpb24gRGVmYXVsdFNjaGVkdWxlcigpIHtcbiAgICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgfVxuXG4gICAgIGZ1bmN0aW9uIHNjaGVkdWxlQWN0aW9uKGRpc3Bvc2FibGUsIGFjdGlvbiwgc2NoZWR1bGVyLCBzdGF0ZSkge1xuICAgICAgIHJldHVybiBmdW5jdGlvbiBzY2hlZHVsZSgpIHtcbiAgICAgICAgIGRpc3Bvc2FibGUuc2V0RGlzcG9zYWJsZShEaXNwb3NhYmxlLl9maXh1cChhY3Rpb24oc2NoZWR1bGVyLCBzdGF0ZSkpKTtcbiAgICAgICB9O1xuICAgICB9XG5cbiAgICAgZnVuY3Rpb24gQ2xlYXJEaXNwb3NhYmxlKGlkKSB7XG4gICAgICAgdGhpcy5faWQgPSBpZDtcbiAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgfVxuXG4gICAgIENsZWFyRGlzcG9zYWJsZS5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgIGNsZWFyTWV0aG9kKHRoaXMuX2lkKTtcbiAgICAgICB9XG4gICAgIH07XG5cbiAgICAgZnVuY3Rpb24gTG9jYWxDbGVhckRpc3Bvc2FibGUoaWQpIHtcbiAgICAgICB0aGlzLl9pZCA9IGlkO1xuICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgICB9XG5cbiAgICAgTG9jYWxDbGVhckRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICBsb2NhbENsZWFyVGltZW91dCh0aGlzLl9pZCk7XG4gICAgICAgfVxuICAgICB9O1xuXG4gICAgRGVmYXVsdFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgdmFyIGRpc3Bvc2FibGUgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgICBpZCA9IHNjaGVkdWxlTWV0aG9kKHNjaGVkdWxlQWN0aW9uKGRpc3Bvc2FibGUsIGFjdGlvbiwgdGhpcywgc3RhdGUpKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShkaXNwb3NhYmxlLCBuZXcgQ2xlYXJEaXNwb3NhYmxlKGlkKSk7XG4gICAgfTtcblxuICAgIERlZmF1bHRTY2hlZHVsZXIucHJvdG90eXBlLl9zY2hlZHVsZUZ1dHVyZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICBpZiAoZHVlVGltZSA9PT0gMCkgeyByZXR1cm4gdGhpcy5zY2hlZHVsZShzdGF0ZSwgYWN0aW9uKTsgfVxuICAgICAgdmFyIGRpc3Bvc2FibGUgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgICBpZCA9IGxvY2FsU2V0VGltZW91dChzY2hlZHVsZUFjdGlvbihkaXNwb3NhYmxlLCBhY3Rpb24sIHRoaXMsIHN0YXRlKSwgZHVlVGltZSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoZGlzcG9zYWJsZSwgbmV3IExvY2FsQ2xlYXJEaXNwb3NhYmxlKGlkKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZWZhdWx0U2NoZWR1bGVyO1xuICB9KFNjaGVkdWxlcikpO1xuXG4gIHZhciBkZWZhdWx0U2NoZWR1bGVyID0gU2NoZWR1bGVyWydkZWZhdWx0J10gPSBTY2hlZHVsZXIuYXN5bmMgPSBuZXcgRGVmYXVsdFNjaGVkdWxlcigpO1xuXG4gIHZhciBDYXRjaFNjaGVkdWxlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ2F0Y2hTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBDYXRjaFNjaGVkdWxlcihzY2hlZHVsZXIsIGhhbmRsZXIpIHtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMuX2hhbmRsZXIgPSBoYW5kbGVyO1xuICAgICAgdGhpcy5fcmVjdXJzaXZlT3JpZ2luYWwgPSBudWxsO1xuICAgICAgdGhpcy5fcmVjdXJzaXZlV3JhcHBlciA9IG51bGw7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgdGhpcy5fd3JhcChhY3Rpb24pKTtcbiAgICB9O1xuXG4gICAgQ2F0Y2hTY2hlZHVsZXIucHJvdG90eXBlLl9zY2hlZHVsZUZ1dHVyZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBkdWVUaW1lLCB0aGlzLl93cmFwKGFjdGlvbikpO1xuICAgIH07XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUubm93ID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLm5vdygpOyB9O1xuXG4gICAgQ2F0Y2hTY2hlZHVsZXIucHJvdG90eXBlLl9jbG9uZSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDYXRjaFNjaGVkdWxlcihzY2hlZHVsZXIsIHRoaXMuX2hhbmRsZXIpO1xuICAgIH07XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUuX3dyYXAgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoc2VsZiwgc3RhdGUpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKGFjdGlvbikocGFyZW50Ll9nZXRSZWN1cnNpdmVXcmFwcGVyKHNlbGYpLCBzdGF0ZSk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgaWYgKCFwYXJlbnQuX2hhbmRsZXIocmVzLmUpKSB7IHRocm93ZXIocmVzLmUpOyB9XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUZpeHVwKHJlcyk7XG4gICAgICB9O1xuICAgIH07XG5cbiAgICBDYXRjaFNjaGVkdWxlci5wcm90b3R5cGUuX2dldFJlY3Vyc2l2ZVdyYXBwZXIgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgICBpZiAodGhpcy5fcmVjdXJzaXZlT3JpZ2luYWwgIT09IHNjaGVkdWxlcikge1xuICAgICAgICB0aGlzLl9yZWN1cnNpdmVPcmlnaW5hbCA9IHNjaGVkdWxlcjtcbiAgICAgICAgdmFyIHdyYXBwZXIgPSB0aGlzLl9jbG9uZShzY2hlZHVsZXIpO1xuICAgICAgICB3cmFwcGVyLl9yZWN1cnNpdmVPcmlnaW5hbCA9IHNjaGVkdWxlcjtcbiAgICAgICAgd3JhcHBlci5fcmVjdXJzaXZlV3JhcHBlciA9IHdyYXBwZXI7XG4gICAgICAgIHRoaXMuX3JlY3Vyc2l2ZVdyYXBwZXIgPSB3cmFwcGVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3JlY3Vyc2l2ZVdyYXBwZXI7XG4gICAgfTtcblxuICAgIENhdGNoU2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZVBlcmlvZGljID0gZnVuY3Rpb24gKHN0YXRlLCBwZXJpb2QsIGFjdGlvbikge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzLCBmYWlsZWQgPSBmYWxzZSwgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXG4gICAgICBkLnNldERpc3Bvc2FibGUodGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUGVyaW9kaWMoc3RhdGUsIHBlcmlvZCwgZnVuY3Rpb24gKHN0YXRlMSkge1xuICAgICAgICBpZiAoZmFpbGVkKSB7IHJldHVybiBudWxsOyB9XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaChhY3Rpb24pKHN0YXRlMSk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAoIXNlbGYuX2hhbmRsZXIocmVzLmUpKSB7IHRocm93ZXIocmVzLmUpOyB9XG4gICAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgIH0pKTtcblxuICAgICAgcmV0dXJuIGQ7XG4gICAgfTtcblxuICAgIHJldHVybiBDYXRjaFNjaGVkdWxlcjtcbiAgfShTY2hlZHVsZXIpKTtcblxuICAvKipcbiAgICogIFJlcHJlc2VudHMgYSBub3RpZmljYXRpb24gdG8gYW4gb2JzZXJ2ZXIuXG4gICAqL1xuICB2YXIgTm90aWZpY2F0aW9uID0gUnguTm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOb3RpZmljYXRpb24oKSB7XG5cbiAgICB9XG5cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHQgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgICB9O1xuXG4gICAgTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgdGhyb3cgbmV3IE5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSW52b2tlcyB0aGUgZGVsZWdhdGUgY29ycmVzcG9uZGluZyB0byB0aGUgbm90aWZpY2F0aW9uIG9yIHRoZSBvYnNlcnZlcidzIG1ldGhvZCBjb3JyZXNwb25kaW5nIHRvIHRoZSBub3RpZmljYXRpb24gYW5kIHJldHVybnMgdGhlIHByb2R1Y2VkIHJlc3VsdC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9uIHwgT2JzZXJ2ZXJ9IG9ic2VydmVyT3JPbk5leHQgRnVuY3Rpb24gdG8gaW52b2tlIGZvciBhbiBPbk5leHQgbm90aWZpY2F0aW9uIG9yIE9ic2VydmVyIHRvIGludm9rZSB0aGUgbm90aWZpY2F0aW9uIG9uLi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIEZ1bmN0aW9uIHRvIGludm9rZSBmb3IgYW4gT25FcnJvciBub3RpZmljYXRpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25Db21wbGV0ZWQgRnVuY3Rpb24gdG8gaW52b2tlIGZvciBhbiBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24uXG4gICAgICogQHJldHVybnMge0FueX0gUmVzdWx0IHByb2R1Y2VkIGJ5IHRoZSBvYnNlcnZhdGlvbi5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLmFjY2VwdCA9IGZ1bmN0aW9uIChvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgcmV0dXJuIG9ic2VydmVyT3JPbk5leHQgJiYgdHlwZW9mIG9ic2VydmVyT3JPbk5leHQgPT09ICdvYmplY3QnID9cbiAgICAgICAgdGhpcy5fYWNjZXB0T2JzZXJ2ZXIob2JzZXJ2ZXJPck9uTmV4dCkgOlxuICAgICAgICB0aGlzLl9hY2NlcHQob2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBhIHNpbmdsZSBub3RpZmljYXRpb24uXG4gICAgICpcbiAgICAgKiBAbWVtYmVyT2YgTm90aWZpY2F0aW9uc1xuICAgICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gc2VuZCBvdXQgdGhlIG5vdGlmaWNhdGlvbiBjYWxscyBvbi5cbiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzdXJmYWNlcyB0aGUgYmVoYXZpb3Igb2YgdGhlIG5vdGlmaWNhdGlvbiB1cG9uIHN1YnNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBOb3RpZmljYXRpb24ucHJvdG90eXBlLnRvT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG4gICAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlci5zY2hlZHVsZShzZWxmLCBmdW5jdGlvbiAoXywgbm90aWZpY2F0aW9uKSB7XG4gICAgICAgICAgbm90aWZpY2F0aW9uLl9hY2NlcHRPYnNlcnZlcihvKTtcbiAgICAgICAgICBub3RpZmljYXRpb24ua2luZCA9PT0gJ04nICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5vdGlmaWNhdGlvbjtcbiAgfSkoKTtcblxuICB2YXIgT25OZXh0Tm90aWZpY2F0aW9uID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbk5leHROb3RpZmljYXRpb24sIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT25OZXh0Tm90aWZpY2F0aW9uKHZhbHVlKSB7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLmtpbmQgPSAnTic7XG4gICAgfVxuXG4gICAgT25OZXh0Tm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0ID0gZnVuY3Rpb24gKG9uTmV4dCkge1xuICAgICAgcmV0dXJuIG9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICB9O1xuXG4gICAgT25OZXh0Tm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0T2JzZXJ2ZXIgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIG8ub25OZXh0KHRoaXMudmFsdWUpO1xuICAgIH07XG5cbiAgICBPbk5leHROb3RpZmljYXRpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICdPbk5leHQoJyArIHRoaXMudmFsdWUgKyAnKSc7XG4gICAgfTtcblxuICAgIHJldHVybiBPbk5leHROb3RpZmljYXRpb247XG4gIH0oTm90aWZpY2F0aW9uKSk7XG5cbiAgdmFyIE9uRXJyb3JOb3RpZmljYXRpb24gPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9uRXJyb3JOb3RpZmljYXRpb24sIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT25FcnJvck5vdGlmaWNhdGlvbihlcnJvcikge1xuICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgdGhpcy5raW5kID0gJ0UnO1xuICAgIH1cblxuICAgIE9uRXJyb3JOb3RpZmljYXRpb24ucHJvdG90eXBlLl9hY2NlcHQgPSBmdW5jdGlvbiAob25OZXh0LCBvbkVycm9yKSB7XG4gICAgICByZXR1cm4gb25FcnJvcih0aGlzLmVycm9yKTtcbiAgICB9O1xuXG4gICAgT25FcnJvck5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdE9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvLm9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgfTtcblxuICAgIE9uRXJyb3JOb3RpZmljYXRpb24ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICdPbkVycm9yKCcgKyB0aGlzLmVycm9yICsgJyknO1xuICAgIH07XG5cbiAgICByZXR1cm4gT25FcnJvck5vdGlmaWNhdGlvbjtcbiAgfShOb3RpZmljYXRpb24pKTtcblxuICB2YXIgT25Db21wbGV0ZWROb3RpZmljYXRpb24gPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9uQ29tcGxldGVkTm90aWZpY2F0aW9uLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uKCkge1xuICAgICAgdGhpcy5raW5kID0gJ0MnO1xuICAgIH1cblxuICAgIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uLnByb3RvdHlwZS5fYWNjZXB0ID0gZnVuY3Rpb24gKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIHJldHVybiBvbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbi5wcm90b3R5cGUuX2FjY2VwdE9ic2VydmVyID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBvLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIE9uQ29tcGxldGVkTm90aWZpY2F0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAnT25Db21wbGV0ZWQoKSc7XG4gICAgfTtcblxuICAgIHJldHVybiBPbkNvbXBsZXRlZE5vdGlmaWNhdGlvbjtcbiAgfShOb3RpZmljYXRpb24pKTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIGFuIE9uTmV4dCBub3RpZmljYXRpb24gdG8gYW4gb2JzZXJ2ZXIuXG4gICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBUaGUgdmFsdWUgY29udGFpbmVkIGluIHRoZSBub3RpZmljYXRpb24uXG4gICAqIEByZXR1cm5zIHtOb3RpZmljYXRpb259IFRoZSBPbk5leHQgbm90aWZpY2F0aW9uIGNvbnRhaW5pbmcgdGhlIHZhbHVlLlxuICAgKi9cbiAgdmFyIG5vdGlmaWNhdGlvbkNyZWF0ZU9uTmV4dCA9IE5vdGlmaWNhdGlvbi5jcmVhdGVPbk5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IE9uTmV4dE5vdGlmaWNhdGlvbih2YWx1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhbiBPbkVycm9yIG5vdGlmaWNhdGlvbiB0byBhbiBvYnNlcnZlci5cbiAgICogQHBhcmFtIHtBbnl9IGVycm9yIFRoZSBleGNlcHRpb24gY29udGFpbmVkIGluIHRoZSBub3RpZmljYXRpb24uXG4gICAqIEByZXR1cm5zIHtOb3RpZmljYXRpb259IFRoZSBPbkVycm9yIG5vdGlmaWNhdGlvbiBjb250YWluaW5nIHRoZSBleGNlcHRpb24uXG4gICAqL1xuICB2YXIgbm90aWZpY2F0aW9uQ3JlYXRlT25FcnJvciA9IE5vdGlmaWNhdGlvbi5jcmVhdGVPbkVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgcmV0dXJuIG5ldyBPbkVycm9yTm90aWZpY2F0aW9uKGVycm9yKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIGFuIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbiB0byBhbiBvYnNlcnZlci5cbiAgICogQHJldHVybnMge05vdGlmaWNhdGlvbn0gVGhlIE9uQ29tcGxldGVkIG5vdGlmaWNhdGlvbi5cbiAgICovXG4gIHZhciBub3RpZmljYXRpb25DcmVhdGVPbkNvbXBsZXRlZCA9IE5vdGlmaWNhdGlvbi5jcmVhdGVPbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IE9uQ29tcGxldGVkTm90aWZpY2F0aW9uKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN1cHBvcnRzIHB1c2gtc3R5bGUgaXRlcmF0aW9uIG92ZXIgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICovXG4gIHZhciBPYnNlcnZlciA9IFJ4Lk9ic2VydmVyID0gZnVuY3Rpb24gKCkgeyB9O1xuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhIG5vdGlmaWNhdGlvbiBjYWxsYmFjayBmcm9tIGFuIG9ic2VydmVyLlxuICAgKiBAcmV0dXJucyBUaGUgYWN0aW9uIHRoYXQgZm9yd2FyZHMgaXRzIGlucHV0IG5vdGlmaWNhdGlvbiB0byB0aGUgdW5kZXJseWluZyBvYnNlcnZlci5cbiAgICovXG4gIE9ic2VydmVyLnByb3RvdHlwZS50b05vdGlmaWVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYnNlcnZlciA9IHRoaXM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChuKSB7IHJldHVybiBuLmFjY2VwdChvYnNlcnZlcik7IH07XG4gIH07XG5cbiAgLyoqXG4gICAqICBIaWRlcyB0aGUgaWRlbnRpdHkgb2YgYW4gb2JzZXJ2ZXIuXG4gICAqIEByZXR1cm5zIEFuIG9ic2VydmVyIHRoYXQgaGlkZXMgdGhlIGlkZW50aXR5IG9mIHRoZSBzcGVjaWZpZWQgb2JzZXJ2ZXIuXG4gICAqL1xuICBPYnNlcnZlci5wcm90b3R5cGUuYXNPYnNlcnZlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZlcihcbiAgICAgIGZ1bmN0aW9uICh4KSB7IHNlbGYub25OZXh0KHgpOyB9LFxuICAgICAgZnVuY3Rpb24gKGVycikgeyBzZWxmLm9uRXJyb3IoZXJyKTsgfSxcbiAgICAgIGZ1bmN0aW9uICgpIHsgc2VsZi5vbkNvbXBsZXRlZCgpOyB9KTtcbiAgfTtcblxuICAvKipcbiAgICogIENoZWNrcyBhY2Nlc3MgdG8gdGhlIG9ic2VydmVyIGZvciBncmFtbWFyIHZpb2xhdGlvbnMuIFRoaXMgaW5jbHVkZXMgY2hlY2tpbmcgZm9yIG11bHRpcGxlIE9uRXJyb3Igb3IgT25Db21wbGV0ZWQgY2FsbHMsIGFzIHdlbGwgYXMgcmVlbnRyYW5jeSBpbiBhbnkgb2YgdGhlIG9ic2VydmVyIG1ldGhvZHMuXG4gICAqICBJZiBhIHZpb2xhdGlvbiBpcyBkZXRlY3RlZCwgYW4gRXJyb3IgaXMgdGhyb3duIGZyb20gdGhlIG9mZmVuZGluZyBvYnNlcnZlciBtZXRob2QgY2FsbC5cbiAgICogQHJldHVybnMgQW4gb2JzZXJ2ZXIgdGhhdCBjaGVja3MgY2FsbGJhY2tzIGludm9jYXRpb25zIGFnYWluc3QgdGhlIG9ic2VydmVyIGdyYW1tYXIgYW5kLCBpZiB0aGUgY2hlY2tzIHBhc3MsIGZvcndhcmRzIHRob3NlIHRvIHRoZSBzcGVjaWZpZWQgb2JzZXJ2ZXIuXG4gICAqL1xuICBPYnNlcnZlci5wcm90b3R5cGUuY2hlY2tlZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBDaGVja2VkT2JzZXJ2ZXIodGhpcyk7IH07XG5cbiAgLyoqXG4gICAqICBDcmVhdGVzIGFuIG9ic2VydmVyIGZyb20gdGhlIHNwZWNpZmllZCBPbk5leHQsIGFsb25nIHdpdGggb3B0aW9uYWwgT25FcnJvciwgYW5kIE9uQ29tcGxldGVkIGFjdGlvbnMuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbk5leHRdIE9ic2VydmVyJ3MgT25OZXh0IGFjdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW29uRXJyb3JdIE9ic2VydmVyJ3MgT25FcnJvciBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkNvbXBsZXRlZF0gT2JzZXJ2ZXIncyBPbkNvbXBsZXRlZCBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZlcn0gVGhlIG9ic2VydmVyIG9iamVjdCBpbXBsZW1lbnRlZCB1c2luZyB0aGUgZ2l2ZW4gYWN0aW9ucy5cbiAgICovXG4gIHZhciBvYnNlcnZlckNyZWF0ZSA9IE9ic2VydmVyLmNyZWF0ZSA9IGZ1bmN0aW9uIChvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkKSB7XG4gICAgb25OZXh0IHx8IChvbk5leHQgPSBub29wKTtcbiAgICBvbkVycm9yIHx8IChvbkVycm9yID0gZGVmYXVsdEVycm9yKTtcbiAgICBvbkNvbXBsZXRlZCB8fCAob25Db21wbGV0ZWQgPSBub29wKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmVyKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhbiBvYnNlcnZlciBmcm9tIGEgbm90aWZpY2F0aW9uIGNhbGxiYWNrLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIEFjdGlvbiB0aGF0IGhhbmRsZXMgYSBub3RpZmljYXRpb24uXG4gICAqIEByZXR1cm5zIFRoZSBvYnNlcnZlciBvYmplY3QgdGhhdCBpbnZva2VzIHRoZSBzcGVjaWZpZWQgaGFuZGxlciB1c2luZyBhIG5vdGlmaWNhdGlvbiBjb3JyZXNwb25kaW5nIHRvIGVhY2ggbWVzc2FnZSBpdCByZWNlaXZlcy5cbiAgICovXG4gIE9ic2VydmVyLmZyb21Ob3RpZmllciA9IGZ1bmN0aW9uIChoYW5kbGVyLCB0aGlzQXJnKSB7XG4gICAgdmFyIGNiID0gYmluZENhbGxiYWNrKGhhbmRsZXIsIHRoaXNBcmcsIDEpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2ZXIoZnVuY3Rpb24gKHgpIHtcbiAgICAgIHJldHVybiBjYihub3RpZmljYXRpb25DcmVhdGVPbk5leHQoeCkpO1xuICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gY2Iobm90aWZpY2F0aW9uQ3JlYXRlT25FcnJvcihlKSk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNiKG5vdGlmaWNhdGlvbkNyZWF0ZU9uQ29tcGxldGVkKCkpO1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTY2hlZHVsZXMgdGhlIGludm9jYXRpb24gb2Ygb2JzZXJ2ZXIgbWV0aG9kcyBvbiB0aGUgZ2l2ZW4gc2NoZWR1bGVyLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBzY2hlZHVsZSBvYnNlcnZlciBtZXNzYWdlcyBvbi5cbiAgICogQHJldHVybnMge09ic2VydmVyfSBPYnNlcnZlciB3aG9zZSBtZXNzYWdlcyBhcmUgc2NoZWR1bGVkIG9uIHRoZSBnaXZlbiBzY2hlZHVsZXIuXG4gICAqL1xuICBPYnNlcnZlci5wcm90b3R5cGUubm90aWZ5T24gPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZlT25PYnNlcnZlcihzY2hlZHVsZXIsIHRoaXMpO1xuICB9O1xuXG4gIE9ic2VydmVyLnByb3RvdHlwZS5tYWtlU2FmZSA9IGZ1bmN0aW9uKGRpc3Bvc2FibGUpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c1NhZmVPYnNlcnZlcih0aGlzLl9vbk5leHQsIHRoaXMuX29uRXJyb3IsIHRoaXMuX29uQ29tcGxldGVkLCBkaXNwb3NhYmxlKTtcbiAgfTtcblxuICAvKipcbiAgICogQWJzdHJhY3QgYmFzZSBjbGFzcyBmb3IgaW1wbGVtZW50YXRpb25zIG9mIHRoZSBPYnNlcnZlciBjbGFzcy5cbiAgICogVGhpcyBiYXNlIGNsYXNzIGVuZm9yY2VzIHRoZSBncmFtbWFyIG9mIG9ic2VydmVycyB3aGVyZSBPbkVycm9yIGFuZCBPbkNvbXBsZXRlZCBhcmUgdGVybWluYWwgbWVzc2FnZXMuXG4gICAqL1xuICB2YXIgQWJzdHJhY3RPYnNlcnZlciA9IFJ4LmludGVybmFscy5BYnN0cmFjdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhBYnN0cmFjdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBvYnNlcnZlciBpbiBhIG5vbi1zdG9wcGVkIHN0YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFic3RyYWN0T2JzZXJ2ZXIoKSB7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8vIE11c3QgYmUgaW1wbGVtZW50ZWQgYnkgb3RoZXIgb2JzZXJ2ZXJzXG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IG5vdEltcGxlbWVudGVkO1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gbm90SW1wbGVtZW50ZWQ7XG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gbm90SW1wbGVtZW50ZWQ7XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyB0aGUgb2JzZXJ2ZXIgb2YgYSBuZXcgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtBbnl9IHZhbHVlIE5leHQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICovXG4gICAgQWJzdHJhY3RPYnNlcnZlci5wcm90b3R5cGUub25OZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAhdGhpcy5pc1N0b3BwZWQgJiYgdGhpcy5uZXh0KHZhbHVlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgdGhlIG9ic2VydmVyIHRoYXQgYW4gZXhjZXB0aW9uIGhhcyBvY2N1cnJlZC5cbiAgICAgKiBAcGFyYW0ge0FueX0gZXJyb3IgVGhlIGVycm9yIHRoYXQgaGFzIG9jY3VycmVkLlxuICAgICAqL1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgdGhpcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgdGhlIG9ic2VydmVyIG9mIHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2VzIHRoZSBvYnNlcnZlciwgY2F1c2luZyBpdCB0byB0cmFuc2l0aW9uIHRvIHRoZSBzdG9wcGVkIHN0YXRlLlxuICAgICAqL1xuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7IHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTsgfTtcblxuICAgIEFic3RyYWN0T2JzZXJ2ZXIucHJvdG90eXBlLmZhaWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXJyb3IoZSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIHJldHVybiBBYnN0cmFjdE9ic2VydmVyO1xuICB9KE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENsYXNzIHRvIGNyZWF0ZSBhbiBPYnNlcnZlciBpbnN0YW5jZSBmcm9tIGRlbGVnYXRlLWJhc2VkIGltcGxlbWVudGF0aW9ucyBvZiB0aGUgb24qIG1ldGhvZHMuXG4gICAqL1xuICB2YXIgQW5vbnltb3VzT2JzZXJ2ZXIgPSBSeC5Bbm9ueW1vdXNPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQW5vbnltb3VzT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9ic2VydmVyIGZyb20gdGhlIHNwZWNpZmllZCBPbk5leHQsIE9uRXJyb3IsIGFuZCBPbkNvbXBsZXRlZCBhY3Rpb25zLlxuICAgICAqIEBwYXJhbSB7QW55fSBvbk5leHQgT2JzZXJ2ZXIncyBPbk5leHQgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSBvbkVycm9yIE9ic2VydmVyJ3MgT25FcnJvciBhY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAgICogQHBhcmFtIHtBbnl9IG9uQ29tcGxldGVkIE9ic2VydmVyJ3MgT25Db21wbGV0ZWQgYWN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFub255bW91c09ic2VydmVyKG9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5fb25OZXh0ID0gb25OZXh0O1xuICAgICAgdGhpcy5fb25FcnJvciA9IG9uRXJyb3I7XG4gICAgICB0aGlzLl9vbkNvbXBsZXRlZCA9IG9uQ29tcGxldGVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxzIHRoZSBvbk5leHQgYWN0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBOZXh0IGVsZW1lbnQgaW4gdGhlIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIEFub255bW91c09ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB0aGlzLl9vbk5leHQodmFsdWUpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxscyB0aGUgb25FcnJvciBhY3Rpb24uXG4gICAgICogQHBhcmFtIHtBbnl9IGVycm9yIFRoZSBlcnJvciB0aGF0IGhhcyBvY2N1cnJlZC5cbiAgICAgKi9cbiAgICBBbm9ueW1vdXNPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIHRoaXMuX29uRXJyb3IoZXJyb3IpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiAgQ2FsbHMgdGhlIG9uQ29tcGxldGVkIGFjdGlvbi5cbiAgICAgKi9cbiAgICBBbm9ueW1vdXNPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fb25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFub255bW91c09ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgQ2hlY2tlZE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDaGVja2VkT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBDaGVja2VkT2JzZXJ2ZXIob2JzZXJ2ZXIpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5fb2JzZXJ2ZXIgPSBvYnNlcnZlcjtcbiAgICAgIHRoaXMuX3N0YXRlID0gMDsgLy8gMCAtIGlkbGUsIDEgLSBidXN5LCAyIC0gZG9uZVxuICAgIH1cblxuICAgIHZhciBDaGVja2VkT2JzZXJ2ZXJQcm90b3R5cGUgPSBDaGVja2VkT2JzZXJ2ZXIucHJvdG90eXBlO1xuXG4gICAgQ2hlY2tlZE9ic2VydmVyUHJvdG90eXBlLm9uTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5jaGVja0FjY2VzcygpO1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX29ic2VydmVyLm9uTmV4dCkuY2FsbCh0aGlzLl9vYnNlcnZlciwgdmFsdWUpO1xuICAgICAgdGhpcy5fc3RhdGUgPSAwO1xuICAgICAgcmVzID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlcy5lKTtcbiAgICB9O1xuXG4gICAgQ2hlY2tlZE9ic2VydmVyUHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB0aGlzLmNoZWNrQWNjZXNzKCk7XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fb2JzZXJ2ZXIub25FcnJvcikuY2FsbCh0aGlzLl9vYnNlcnZlciwgZXJyKTtcbiAgICAgIHRoaXMuX3N0YXRlID0gMjtcbiAgICAgIHJlcyA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXMuZSk7XG4gICAgfTtcblxuICAgIENoZWNrZWRPYnNlcnZlclByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY2hlY2tBY2Nlc3MoKTtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9vYnNlcnZlci5vbkNvbXBsZXRlZCkuY2FsbCh0aGlzLl9vYnNlcnZlcik7XG4gICAgICB0aGlzLl9zdGF0ZSA9IDI7XG4gICAgICByZXMgPT09IGVycm9yT2JqICYmIHRocm93ZXIocmVzLmUpO1xuICAgIH07XG5cbiAgICBDaGVja2VkT2JzZXJ2ZXJQcm90b3R5cGUuY2hlY2tBY2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IDEpIHsgdGhyb3cgbmV3IEVycm9yKCdSZS1lbnRyYW5jeSBkZXRlY3RlZCcpOyB9XG4gICAgICBpZiAodGhpcy5fc3RhdGUgPT09IDIpIHsgdGhyb3cgbmV3IEVycm9yKCdPYnNlcnZlciBjb21wbGV0ZWQnKTsgfVxuICAgICAgaWYgKHRoaXMuX3N0YXRlID09PSAwKSB7IHRoaXMuX3N0YXRlID0gMTsgfVxuICAgIH07XG5cbiAgICByZXR1cm4gQ2hlY2tlZE9ic2VydmVyO1xuICB9KE9ic2VydmVyKSk7XG5cbiAgdmFyIFNjaGVkdWxlZE9ic2VydmVyID0gUnguaW50ZXJuYWxzLlNjaGVkdWxlZE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTY2hlZHVsZWRPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNjaGVkdWxlZE9ic2VydmVyKHNjaGVkdWxlciwgb2JzZXJ2ZXIpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLmlzQWNxdWlyZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzRmF1bHRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xuICAgICAgdGhpcy5kaXNwb3NhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlbnF1ZXVlTmV4dChvYnNlcnZlciwgeCkgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyBvYnNlcnZlci5vbk5leHQoeCk7IH07IH1cbiAgICBmdW5jdGlvbiBlbnF1ZXVlRXJyb3Iob2JzZXJ2ZXIsIGUpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgb2JzZXJ2ZXIub25FcnJvcihlKTsgfTsgfVxuICAgIGZ1bmN0aW9uIGVucXVldWVDb21wbGV0ZWQob2JzZXJ2ZXIpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTsgfTsgfVxuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5xdWV1ZS5wdXNoKGVucXVldWVOZXh0KHRoaXMub2JzZXJ2ZXIsIHgpKTtcbiAgICB9O1xuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMucXVldWUucHVzaChlbnF1ZXVlRXJyb3IodGhpcy5vYnNlcnZlciwgZSkpO1xuICAgIH07XG5cbiAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5xdWV1ZS5wdXNoKGVucXVldWVDb21wbGV0ZWQodGhpcy5vYnNlcnZlcikpO1xuICAgIH07XG5cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICB2YXIgd29yaztcbiAgICAgIGlmIChzdGF0ZS5xdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHdvcmsgPSBzdGF0ZS5xdWV1ZS5zaGlmdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuaXNBY3F1aXJlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2god29yaykoKTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHN0YXRlLnF1ZXVlID0gW107XG4gICAgICAgIHN0YXRlLmhhc0ZhdWx0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhyb3dlcihyZXMuZSk7XG4gICAgICB9XG4gICAgICByZWN1cnNlKHN0YXRlKTtcbiAgICB9XG5cbiAgICBTY2hlZHVsZWRPYnNlcnZlci5wcm90b3R5cGUuZW5zdXJlQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGlzT3duZXIgPSBmYWxzZTtcbiAgICAgIGlmICghdGhpcy5oYXNGYXVsdGVkICYmIHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICBpc093bmVyID0gIXRoaXMuaXNBY3F1aXJlZDtcbiAgICAgICAgdGhpcy5pc0FjcXVpcmVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlzT3duZXIgJiZcbiAgICAgICAgdGhpcy5kaXNwb3NhYmxlLnNldERpc3Bvc2FibGUodGhpcy5zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUodGhpcywgc2NoZWR1bGVNZXRob2QpKTtcbiAgICB9O1xuXG4gICAgU2NoZWR1bGVkT2JzZXJ2ZXIucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBfX3N1cGVyX18ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuZGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTY2hlZHVsZWRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIE9ic2VydmVPbk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPYnNlcnZlT25PYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIE9ic2VydmVPbk9ic2VydmVyKHNjaGVkdWxlciwgb2JzZXJ2ZXIsIGNhbmNlbCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcywgc2NoZWR1bGVyLCBvYnNlcnZlcik7XG4gICAgICB0aGlzLl9jYW5jZWwgPSBjYW5jZWw7XG4gICAgfVxuXG4gICAgT2JzZXJ2ZU9uT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIF9fc3VwZXJfXy5wcm90b3R5cGUubmV4dC5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgIHRoaXMuZW5zdXJlQWN0aXZlKCk7XG4gICAgfTtcblxuICAgIE9ic2VydmVPbk9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBfX3N1cGVyX18ucHJvdG90eXBlLmVycm9yLmNhbGwodGhpcywgZSk7XG4gICAgICB0aGlzLmVuc3VyZUFjdGl2ZSgpO1xuICAgIH07XG5cbiAgICBPYnNlcnZlT25PYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5jb21wbGV0ZWQuY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuZW5zdXJlQWN0aXZlKCk7XG4gICAgfTtcblxuICAgIE9ic2VydmVPbk9ic2VydmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLl9jYW5jZWwgJiYgdGhpcy5fY2FuY2VsLmRpc3Bvc2UoKTtcbiAgICAgIHRoaXMuX2NhbmNlbCA9IG51bGw7XG4gICAgfTtcblxuICAgIHJldHVybiBPYnNlcnZlT25PYnNlcnZlcjtcbiAgfSkoU2NoZWR1bGVkT2JzZXJ2ZXIpO1xuXG4gIHZhciBvYnNlcnZhYmxlUHJvdG87XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgYSBwdXNoLXN0eWxlIGNvbGxlY3Rpb24uXG4gICAqL1xuICB2YXIgT2JzZXJ2YWJsZSA9IFJ4Lk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKCkge1xuXG4gICAgZnVuY3Rpb24gbWFrZVN1YnNjcmliZShzZWxmLCBzdWJzY3JpYmUpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAobykge1xuICAgICAgICB2YXIgb2xkT25FcnJvciA9IG8ub25FcnJvcjtcbiAgICAgICAgby5vbkVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBtYWtlU3RhY2tUcmFjZUxvbmcoZSwgc2VsZik7XG4gICAgICAgICAgb2xkT25FcnJvci5jYWxsKG8sIGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBzdWJzY3JpYmUuY2FsbChzZWxmLCBvKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gT2JzZXJ2YWJsZSgpIHtcbiAgICAgIGlmIChSeC5jb25maWcubG9uZ1N0YWNrU3VwcG9ydCAmJiBoYXNTdGFja3MpIHtcbiAgICAgICAgdmFyIG9sZFN1YnNjcmliZSA9IHRoaXMuX3N1YnNjcmliZTtcbiAgICAgICAgdmFyIGUgPSB0cnlDYXRjaCh0aHJvd2VyKShuZXcgRXJyb3IoKSkuZTtcbiAgICAgICAgdGhpcy5zdGFjayA9IGUuc3RhY2suc3Vic3RyaW5nKGUuc3RhY2suaW5kZXhPZignXFxuJykgKyAxKTtcbiAgICAgICAgdGhpcy5fc3Vic2NyaWJlID0gbWFrZVN1YnNjcmliZSh0aGlzLCBvbGRTdWJzY3JpYmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIG9ic2VydmFibGVQcm90byA9IE9ic2VydmFibGUucHJvdG90eXBlO1xuXG4gICAgLyoqXG4gICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhbiBPYnNlcnZhYmxlXG4gICAgKiBAcGFyYW0ge0FueX0gQW4gb2JqZWN0IHRvIGRldGVybWluZSB3aGV0aGVyIGl0IGlzIGFuIE9ic2VydmFibGVcbiAgICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGFuIE9ic2VydmFibGUsIGVsc2UgZmFsc2UuXG4gICAgKi9cbiAgICBPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gbyAmJiBpc0Z1bmN0aW9uKG8uc3Vic2NyaWJlKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIFN1YnNjcmliZXMgYW4gbyB0byB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiAgQHBhcmFtIHtNaXhlZH0gW29Pck9uTmV4dF0gVGhlIG9iamVjdCB0aGF0IGlzIHRvIHJlY2VpdmUgbm90aWZpY2F0aW9ucyBvciBhbiBhY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogIEBwYXJhbSB7RnVuY3Rpb259IFtvbkVycm9yXSBBY3Rpb24gdG8gaW52b2tlIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogIEBwYXJhbSB7RnVuY3Rpb259IFtvbkNvbXBsZXRlZF0gQWN0aW9uIHRvIGludm9rZSB1cG9uIGdyYWNlZnVsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqICBAcmV0dXJucyB7RGlwb3NhYmxlfSBBIGRpc3Bvc2FibGUgaGFuZGxpbmcgdGhlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucy5cbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uc3Vic2NyaWJlID0gb2JzZXJ2YWJsZVByb3RvLmZvckVhY2ggPSBmdW5jdGlvbiAob09yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1YnNjcmliZSh0eXBlb2Ygb09yT25OZXh0ID09PSAnb2JqZWN0JyA/XG4gICAgICAgIG9Pck9uTmV4dCA6XG4gICAgICAgIG9ic2VydmVyQ3JlYXRlKG9Pck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0byB0aGUgbmV4dCB2YWx1ZSBpbiB0aGUgc2VxdWVuY2Ugd2l0aCBhbiBvcHRpb25hbCBcInRoaXNcIiBhcmd1bWVudC5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbk5leHQgVGhlIGZ1bmN0aW9uIHRvIGludm9rZSBvbiBlYWNoIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IEEgZGlzcG9zYWJsZSBoYW5kbGluZyB0aGUgc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zLlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmVPbk5leHQgPSBmdW5jdGlvbiAob25OZXh0LCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaWJlKG9ic2VydmVyQ3JlYXRlKHR5cGVvZiB0aGlzQXJnICE9PSAndW5kZWZpbmVkJyA/IGZ1bmN0aW9uKHgpIHsgb25OZXh0LmNhbGwodGhpc0FyZywgeCk7IH0gOiBvbk5leHQpKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlcyB0byBhbiBleGNlcHRpb25hbCBjb25kaXRpb24gaW4gdGhlIHNlcXVlbmNlIHdpdGggYW4gb3B0aW9uYWwgXCJ0aGlzXCIgYXJndW1lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBUaGUgZnVuY3Rpb24gdG8gaW52b2tlIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAgICogQHJldHVybnMge0Rpc3Bvc2FibGV9IEEgZGlzcG9zYWJsZSBoYW5kbGluZyB0aGUgc3Vic2NyaXB0aW9ucyBhbmQgdW5zdWJzY3JpcHRpb25zLlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5zdWJzY3JpYmVPbkVycm9yID0gZnVuY3Rpb24gKG9uRXJyb3IsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUob2JzZXJ2ZXJDcmVhdGUobnVsbCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24oZSkgeyBvbkVycm9yLmNhbGwodGhpc0FyZywgZSk7IH0gOiBvbkVycm9yKSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgdG8gdGhlIG5leHQgdmFsdWUgaW4gdGhlIHNlcXVlbmNlIHdpdGggYW4gb3B0aW9uYWwgXCJ0aGlzXCIgYXJndW1lbnQuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25Db21wbGV0ZWQgVGhlIGZ1bmN0aW9uIHRvIGludm9rZSB1cG9uIGdyYWNlZnVsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBBIGRpc3Bvc2FibGUgaGFuZGxpbmcgdGhlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucy5cbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uc3Vic2NyaWJlT25Db21wbGV0ZWQgPSBmdW5jdGlvbiAob25Db21wbGV0ZWQsIHRoaXNBcmcpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJzY3JpYmUob2JzZXJ2ZXJDcmVhdGUobnVsbCwgbnVsbCwgdHlwZW9mIHRoaXNBcmcgIT09ICd1bmRlZmluZWQnID8gZnVuY3Rpb24oKSB7IG9uQ29tcGxldGVkLmNhbGwodGhpc0FyZyk7IH0gOiBvbkNvbXBsZXRlZCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gT2JzZXJ2YWJsZTtcbiAgfSkoKTtcblxuICB2YXIgT2JzZXJ2YWJsZUJhc2UgPSBSeC5PYnNlcnZhYmxlQmFzZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoT2JzZXJ2YWJsZUJhc2UsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBmaXhTdWJzY3JpYmVyKHN1YnNjcmliZXIpIHtcbiAgICAgIHJldHVybiBzdWJzY3JpYmVyICYmIGlzRnVuY3Rpb24oc3Vic2NyaWJlci5kaXNwb3NlKSA/IHN1YnNjcmliZXIgOlxuICAgICAgICBpc0Z1bmN0aW9uKHN1YnNjcmliZXIpID8gZGlzcG9zYWJsZUNyZWF0ZShzdWJzY3JpYmVyKSA6IGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXREaXNwb3NhYmxlKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgYWRvID0gc3RhdGVbMF0sIHNlbGYgPSBzdGF0ZVsxXTtcbiAgICAgIHZhciBzdWIgPSB0cnlDYXRjaChzZWxmLnN1YnNjcmliZUNvcmUpLmNhbGwoc2VsZiwgYWRvKTtcbiAgICAgIGlmIChzdWIgPT09IGVycm9yT2JqICYmICFhZG8uZmFpbChlcnJvck9iai5lKSkgeyB0aHJvd2VyKGVycm9yT2JqLmUpOyB9XG4gICAgICBhZG8uc2V0RGlzcG9zYWJsZShmaXhTdWJzY3JpYmVyKHN1YikpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIE9ic2VydmFibGVCYXNlKCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgT2JzZXJ2YWJsZUJhc2UucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGFkbyA9IG5ldyBBdXRvRGV0YWNoT2JzZXJ2ZXIobyksIHN0YXRlID0gW2FkbywgdGhpc107XG5cbiAgICAgIGlmIChjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlUmVxdWlyZWQoKSkge1xuICAgICAgICBjdXJyZW50VGhyZWFkU2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzZXREaXNwb3NhYmxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldERpc3Bvc2FibGUobnVsbCwgc3RhdGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGFkbztcbiAgICB9O1xuXG4gICAgT2JzZXJ2YWJsZUJhc2UucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBub3RJbXBsZW1lbnRlZDtcblxuICAgIHJldHVybiBPYnNlcnZhYmxlQmFzZTtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbnZhciBGbGF0TWFwT2JzZXJ2YWJsZSA9IFJ4LkZsYXRNYXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuXG4gICAgaW5oZXJpdHMoRmxhdE1hcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBGbGF0TWFwT2JzZXJ2YWJsZShzb3VyY2UsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykge1xuICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24ocmVzdWx0U2VsZWN0b3IpID8gcmVzdWx0U2VsZWN0b3IgOiBudWxsO1xuICAgICAgdGhpcy5zZWxlY3RvciA9IGJpbmRDYWxsYmFjayhpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/IHNlbGVjdG9yIDogZnVuY3Rpb24oKSB7IHJldHVybiBzZWxlY3RvcjsgfSwgdGhpc0FyZywgMyk7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZsYXRNYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvLCB0aGlzLnNlbGVjdG9yLCB0aGlzLnJlc3VsdFNlbGVjdG9yLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIob2JzZXJ2ZXIsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3Rvciwgc291cmNlKSB7XG4gICAgICB0aGlzLmkgPSAwO1xuICAgICAgdGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgICAgdGhpcy5yZXN1bHRTZWxlY3RvciA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLm8gPSBvYnNlcnZlcjtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5fd3JhcFJlc3VsdCA9IGZ1bmN0aW9uKHJlc3VsdCwgeCwgaSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0U2VsZWN0b3IgP1xuICAgICAgICByZXN1bHQubWFwKGZ1bmN0aW9uKHksIGkyKSB7IHJldHVybiB0aGlzLnJlc3VsdFNlbGVjdG9yKHgsIHksIGksIGkyKTsgfSwgdGhpcykgOlxuICAgICAgICByZXN1bHQ7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih4KSB7XG4gICAgICB2YXIgaSA9IHRoaXMuaSsrO1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuc2VsZWN0b3IpKHgsIGksIHRoaXMuc291cmNlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihyZXN1bHQuZSk7IH1cblxuICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcbiAgICAgIChpc0FycmF5TGlrZShyZXN1bHQpIHx8IGlzSXRlcmFibGUocmVzdWx0KSkgJiYgKHJlc3VsdCA9IE9ic2VydmFibGUuZnJvbShyZXN1bHQpKTtcbiAgICAgIHRoaXMuby5vbk5leHQodGhpcy5fd3JhcFJlc3VsdChyZXN1bHQsIHgsIGkpKTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlKSB7IHRoaXMuby5vbkVycm9yKGUpOyB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24oKSB7IHRoaXMuby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIEZsYXRNYXBPYnNlcnZhYmxlO1xuXG59KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEVudW1lcmFibGUgPSBSeC5pbnRlcm5hbHMuRW51bWVyYWJsZSA9IGZ1bmN0aW9uICgpIHsgfTtcblxuICBmdW5jdGlvbiBJc0Rpc3Bvc2VkRGlzcG9zYWJsZShzdGF0ZSkge1xuICAgIHRoaXMuX3MgPSBzdGF0ZTtcbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfVxuXG4gIElzRGlzcG9zZWREaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlKHNvdXJjZXMpIHtcbiAgICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgaWYgKHN0YXRlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICB2YXIgY3VycmVudEl0ZW0gPSB0cnlDYXRjaChzdGF0ZS5lLm5leHQpLmNhbGwoc3RhdGUuZSk7XG4gICAgICBpZiAoY3VycmVudEl0ZW0gPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3IoY3VycmVudEl0ZW0uZSk7IH1cbiAgICAgIGlmIChjdXJyZW50SXRlbS5kb25lKSB7IHJldHVybiBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7IH1cblxuICAgICAgLy8gQ2hlY2sgaWYgcHJvbWlzZVxuICAgICAgdmFyIGN1cnJlbnRWYWx1ZSA9IGN1cnJlbnRJdGVtLnZhbHVlO1xuICAgICAgaXNQcm9taXNlKGN1cnJlbnRWYWx1ZSkgJiYgKGN1cnJlbnRWYWx1ZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShjdXJyZW50VmFsdWUpKTtcblxuICAgICAgdmFyIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKGN1cnJlbnRWYWx1ZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpKSk7XG4gICAgfVxuXG4gICAgQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIGlzRGlzcG9zZWQ6IGZhbHNlLFxuICAgICAgICBvOiBvLFxuICAgICAgICBzdWJzY3JpcHRpb246IHN1YnNjcmlwdGlvbixcbiAgICAgICAgZTogdGhpcy5zb3VyY2VzWyRpdGVyYXRvciRdKClcbiAgICAgIH07XG5cbiAgICAgIHZhciBjYW5jZWxhYmxlID0gY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVNZXRob2QpO1xuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlLCBuZXcgSXNEaXNwb3NlZERpc3Bvc2FibGUoc3RhdGUpXSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9yZWN1cnNlID0gcmVjdXJzZTtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zdGF0ZS5vLm9uTmV4dCh4KTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3N0YXRlLm8ub25FcnJvcihlKTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX3JlY3Vyc2UodGhpcy5fc3RhdGUpOyB9O1xuXG4gICAgcmV0dXJuIENvbmNhdEVudW1lcmFibGVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgRW51bWVyYWJsZS5wcm90b3R5cGUuY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgQ29uY2F0RW51bWVyYWJsZU9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIENhdGNoRXJyb3JPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGZ1bmN0aW9uIENhdGNoRXJyb3JPYnNlcnZhYmxlKHNvdXJjZXMpIHtcbiAgICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhDYXRjaEVycm9yT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBpZiAoc3RhdGUuaXNEaXNwb3NlZCkgeyByZXR1cm47IH1cbiAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRyeUNhdGNoKHN0YXRlLmUubmV4dCkuY2FsbChzdGF0ZS5lKTtcbiAgICAgIGlmIChjdXJyZW50SXRlbSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihjdXJyZW50SXRlbS5lKTsgfVxuICAgICAgaWYgKGN1cnJlbnRJdGVtLmRvbmUpIHsgcmV0dXJuIHN0YXRlLmxhc3RFcnJvciAhPT0gbnVsbCA/IHN0YXRlLm8ub25FcnJvcihzdGF0ZS5sYXN0RXJyb3IpIDogc3RhdGUuby5vbkNvbXBsZXRlZCgpOyB9XG5cbiAgICAgIHZhciBjdXJyZW50VmFsdWUgPSBjdXJyZW50SXRlbS52YWx1ZTtcbiAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBzdGF0ZS5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHN0YXRlLCByZWN1cnNlKSkpO1xuICAgIH1cblxuICAgIENhdGNoRXJyb3JPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBpc0Rpc3Bvc2VkOiBmYWxzZSxcbiAgICAgICAgZTogdGhpcy5zb3VyY2VzWyRpdGVyYXRvciRdKCksXG4gICAgICAgIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLFxuICAgICAgICBsYXN0RXJyb3I6IG51bGwsXG4gICAgICAgIG86IG9cbiAgICAgIH07XG5cbiAgICAgIHZhciBjYW5jZWxhYmxlID0gY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVNZXRob2QpO1xuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlLCBuZXcgSXNEaXNwb3NlZERpc3Bvc2FibGUoc3RhdGUpXSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9yZWN1cnNlID0gcmVjdXJzZTtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9zdGF0ZS5vLm9uTmV4dCh4KTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3N0YXRlLmxhc3RFcnJvciA9IGU7IHRoaXMuX3JlY3Vyc2UodGhpcy5fc3RhdGUpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fc3RhdGUuby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIENhdGNoRXJyb3JPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgRW51bWVyYWJsZS5wcm90b3R5cGUuY2F0Y2hFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IENhdGNoRXJyb3JPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBSZXBlYXRFbnVtZXJhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhSZXBlYXRFbnVtZXJhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJlcGVhdEVudW1lcmFibGUodiwgYykge1xuICAgICAgdGhpcy52ID0gdjtcbiAgICAgIHRoaXMuYyA9IGMgPT0gbnVsbCA/IC0xIDogYztcbiAgICB9XG5cbiAgICBSZXBlYXRFbnVtZXJhYmxlLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgUmVwZWF0RW51bWVyYXRvcih0aGlzKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gUmVwZWF0RW51bWVyYXRvcihwKSB7XG4gICAgICB0aGlzLnYgPSBwLnY7XG4gICAgICB0aGlzLmwgPSBwLmM7XG4gICAgfVxuXG4gICAgUmVwZWF0RW51bWVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLmwgPT09IDApIHsgcmV0dXJuIGRvbmVFbnVtZXJhdG9yOyB9XG4gICAgICBpZiAodGhpcy5sID4gMCkgeyB0aGlzLmwtLTsgfVxuICAgICAgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiB0aGlzLnYgfTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcGVhdEVudW1lcmFibGU7XG4gIH0oRW51bWVyYWJsZSkpO1xuXG4gIHZhciBlbnVtZXJhYmxlUmVwZWF0ID0gRW51bWVyYWJsZS5yZXBlYXQgPSBmdW5jdGlvbiAodmFsdWUsIHJlcGVhdENvdW50KSB7XG4gICAgcmV0dXJuIG5ldyBSZXBlYXRFbnVtZXJhYmxlKHZhbHVlLCByZXBlYXRDb3VudCk7XG4gIH07XG5cbiAgdmFyIE9mRW51bWVyYWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPZkVudW1lcmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT2ZFbnVtZXJhYmxlKHMsIGZuLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnMgPSBzO1xuICAgICAgdGhpcy5mbiA9IGZuID8gYmluZENhbGxiYWNrKGZuLCB0aGlzQXJnLCAzKSA6IG51bGw7XG4gICAgfVxuICAgIE9mRW51bWVyYWJsZS5wcm90b3R5cGVbJGl0ZXJhdG9yJF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IE9mRW51bWVyYXRvcih0aGlzKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gT2ZFbnVtZXJhdG9yKHApIHtcbiAgICAgIHRoaXMuaSA9IC0xO1xuICAgICAgdGhpcy5zID0gcC5zO1xuICAgICAgdGhpcy5sID0gdGhpcy5zLmxlbmd0aDtcbiAgICAgIHRoaXMuZm4gPSBwLmZuO1xuICAgIH1cblxuICAgIE9mRW51bWVyYXRvci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgcmV0dXJuICsrdGhpcy5pIDwgdGhpcy5sID9cbiAgICAgICB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogIXRoaXMuZm4gPyB0aGlzLnNbdGhpcy5pXSA6IHRoaXMuZm4odGhpcy5zW3RoaXMuaV0sIHRoaXMuaSwgdGhpcy5zKSB9IDpcbiAgICAgICBkb25lRW51bWVyYXRvcjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9mRW51bWVyYWJsZTtcbiAgfShFbnVtZXJhYmxlKSk7XG5cbiAgdmFyIGVudW1lcmFibGVPZiA9IEVudW1lcmFibGUub2YgPSBmdW5jdGlvbiAoc291cmNlLCBzZWxlY3RvciwgdGhpc0FyZykge1xuICAgIHJldHVybiBuZXcgT2ZFbnVtZXJhYmxlKHNvdXJjZSwgc2VsZWN0b3IsIHRoaXNBcmcpO1xuICB9O1xuXG52YXIgT2JzZXJ2ZU9uT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gIGluaGVyaXRzKE9ic2VydmVPbk9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gIGZ1bmN0aW9uIE9ic2VydmVPbk9ic2VydmFibGUoc291cmNlLCBzKSB7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5fcyA9IHM7XG4gICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gIH1cblxuICBPYnNlcnZlT25PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBPYnNlcnZlT25PYnNlcnZlcih0aGlzLl9zLCBvKSk7XG4gIH07XG5cbiAgcmV0dXJuIE9ic2VydmVPbk9ic2VydmFibGU7XG59KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgIC8qKlxuICAgKiAgV3JhcHMgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpbiBvcmRlciB0byBydW4gaXRzIG9ic2VydmVyIGNhbGxiYWNrcyBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci5cbiAgICpcbiAgICogIFRoaXMgb25seSBpbnZva2VzIG9ic2VydmVyIGNhbGxiYWNrcyBvbiBhIHNjaGVkdWxlci4gSW4gY2FzZSB0aGUgc3Vic2NyaXB0aW9uIGFuZC9vciB1bnN1YnNjcmlwdGlvbiBhY3Rpb25zIGhhdmUgc2lkZS1lZmZlY3RzXG4gICAqICB0aGF0IHJlcXVpcmUgdG8gYmUgcnVuIG9uIGEgc2NoZWR1bGVyLCB1c2Ugc3Vic2NyaWJlT24uXG4gICAqXG4gICAqICBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBub3RpZnkgb2JzZXJ2ZXJzIG9uLlxuICAgKiAgQHJldHVybnMge09ic2VydmFibGV9IFRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2hvc2Ugb2JzZXJ2YXRpb25zIGhhcHBlbiBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5vYnNlcnZlT24gPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBPYnNlcnZlT25PYnNlcnZhYmxlKHRoaXMsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFN1YnNjcmliZU9uT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3Vic2NyaWJlT25PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN1YnNjcmliZU9uT2JzZXJ2YWJsZShzb3VyY2UsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzY2hlZHVsZXIsIHN0YXRlKSB7XG4gICAgICB2YXIgc291cmNlID0gc3RhdGVbMF0sIGQgPSBzdGF0ZVsxXSwgbyA9IHN0YXRlWzJdO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKG5ldyBTY2hlZHVsZWREaXNwb3NhYmxlKHNjaGVkdWxlciwgc291cmNlLnN1YnNjcmliZShvKSkpO1xuICAgIH1cblxuICAgIFN1YnNjcmliZU9uT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLCBkID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShtKTtcbiAgICAgIG0uc2V0RGlzcG9zYWJsZSh0aGlzLl9zLnNjaGVkdWxlKFt0aGlzLnNvdXJjZSwgZCwgb10sIHNjaGVkdWxlTWV0aG9kKSk7XG4gICAgICByZXR1cm4gZDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN1YnNjcmliZU9uT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gICAvKipcbiAgICogIFdyYXBzIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaW4gb3JkZXIgdG8gcnVuIGl0cyBzdWJzY3JpcHRpb24gYW5kIHVuc3Vic2NyaXB0aW9uIGxvZ2ljIG9uIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLiBUaGlzIG9wZXJhdGlvbiBpcyBub3QgY29tbW9ubHkgdXNlZDtcbiAgICogIHNlZSB0aGUgcmVtYXJrcyBzZWN0aW9uIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIHRoZSBkaXN0aW5jdGlvbiBiZXR3ZWVuIHN1YnNjcmliZU9uIGFuZCBvYnNlcnZlT24uXG5cbiAgICogIFRoaXMgb25seSBwZXJmb3JtcyB0aGUgc2lkZS1lZmZlY3RzIG9mIHN1YnNjcmlwdGlvbiBhbmQgdW5zdWJzY3JpcHRpb24gb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuIEluIG9yZGVyIHRvIGludm9rZSBvYnNlcnZlclxuICAgKiAgY2FsbGJhY2tzIG9uIGEgc2NoZWR1bGVyLCB1c2Ugb2JzZXJ2ZU9uLlxuXG4gICAqICBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBwZXJmb3JtIHN1YnNjcmlwdGlvbiBhbmQgdW5zdWJzY3JpcHRpb24gYWN0aW9ucyBvbi5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHdob3NlIHN1YnNjcmlwdGlvbnMgYW5kIHVuc3Vic2NyaXB0aW9ucyBoYXBwZW4gb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc3Vic2NyaWJlT24gPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpYmVPbk9ic2VydmFibGUodGhpcywgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgRnJvbVByb21pc2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZyb21Qcm9taXNlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGcm9tUHJvbWlzZU9ic2VydmFibGUocCwgcykge1xuICAgICAgdGhpcy5fcCA9IHA7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTmV4dChzLCBzdGF0ZSkge1xuICAgICAgdmFyIG8gPSBzdGF0ZVswXSwgZGF0YSA9IHN0YXRlWzFdO1xuICAgICAgby5vbk5leHQoZGF0YSk7XG4gICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVFcnJvcihzLCBzdGF0ZSkge1xuICAgICAgdmFyIG8gPSBzdGF0ZVswXSwgZXJyID0gc3RhdGVbMV07XG4gICAgICBvLm9uRXJyb3IoZXJyKTtcbiAgICB9XG5cbiAgICBGcm9tUHJvbWlzZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG4gICAgICB2YXIgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksIHNlbGYgPSB0aGlzO1xuXG4gICAgICB0aGlzLl9wXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc2VsZi5fcy5zY2hlZHVsZShbbywgZGF0YV0sIHNjaGVkdWxlTmV4dCkpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc2VsZi5fcy5zY2hlZHVsZShbbywgZXJyXSwgc2NoZWR1bGVFcnJvcikpO1xuICAgICAgICB9KTtcblxuICAgICAgcmV0dXJuIHNhZDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZyb21Qcm9taXNlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqIENvbnZlcnRzIGEgUHJvbWlzZSB0byBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlXG4gICogQHBhcmFtIHtQcm9taXNlfSBBbiBFUzYgQ29tcGxpYW50IHByb21pc2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggd3JhcHMgdGhlIGV4aXN0aW5nIHByb21pc2Ugc3VjY2VzcyBhbmQgZmFpbHVyZS5cbiAgKi9cbiAgdmFyIG9ic2VydmFibGVGcm9tUHJvbWlzZSA9IE9ic2VydmFibGUuZnJvbVByb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZSwgc2NoZWR1bGVyKSB7XG4gICAgc2NoZWR1bGVyIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEZyb21Qcm9taXNlT2JzZXJ2YWJsZShwcm9taXNlLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIC8qXG4gICAqIENvbnZlcnRzIGFuIGV4aXN0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYW4gRVM2IENvbXBhdGlibGUgUHJvbWlzZVxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcHJvbWlzZSA9IFJ4Lk9ic2VydmFibGUucmV0dXJuKDQyKS50b1Byb21pc2UoUlNWUC5Qcm9taXNlKTtcbiAgICpcbiAgICogLy8gV2l0aCBjb25maWdcbiAgICogUnguY29uZmlnLlByb21pc2UgPSBSU1ZQLlByb21pc2U7XG4gICAqIHZhciBwcm9taXNlID0gUnguT2JzZXJ2YWJsZS5yZXR1cm4oNDIpLnRvUHJvbWlzZSgpO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJvbWlzZUN0b3JdIFRoZSBjb25zdHJ1Y3RvciBvZiB0aGUgcHJvbWlzZS4gSWYgbm90IHByb3ZpZGVkLCBpdCBsb29rcyBmb3IgaXQgaW4gUnguY29uZmlnLlByb21pc2UuXG4gICAqIEByZXR1cm5zIHtQcm9taXNlfSBBbiBFUzYgY29tcGF0aWJsZSBwcm9taXNlIHdpdGggdGhlIGxhc3QgdmFsdWUgZnJvbSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50b1Byb21pc2UgPSBmdW5jdGlvbiAocHJvbWlzZUN0b3IpIHtcbiAgICBwcm9taXNlQ3RvciB8fCAocHJvbWlzZUN0b3IgPSBSeC5jb25maWcuUHJvbWlzZSk7XG4gICAgaWYgKCFwcm9taXNlQ3RvcikgeyB0aHJvdyBuZXcgTm90U3VwcG9ydGVkRXJyb3IoJ1Byb21pc2UgdHlwZSBub3QgcHJvdmlkZWQgbm9yIGluIFJ4LmNvbmZpZy5Qcm9taXNlJyk7IH1cbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IHByb21pc2VDdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIC8vIE5vIGNhbmNlbGxhdGlvbiBjYW4gYmUgZG9uZVxuICAgICAgdmFyIHZhbHVlO1xuICAgICAgc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAodikge1xuICAgICAgICB2YWx1ZSA9IHY7XG4gICAgICB9LCByZWplY3QsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICB2YXIgVG9BcnJheU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVG9BcnJheU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVG9BcnJheU9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRvQXJyYXlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMuYSA9IFtdO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5hLnB1c2goeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLm8ub25FcnJvcihlKTsgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLm8ub25OZXh0KHRoaXMuYSk7IHRoaXMuby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFRvQXJyYXlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogQ3JlYXRlcyBhbiBhcnJheSBmcm9tIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggYSBsaXN0IGNvbnRhaW5pbmcgYWxsIHRoZSBlbGVtZW50cyBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IFRvQXJyYXlPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgQ3JlYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gYSBzcGVjaWZpZWQgc3Vic2NyaWJlIG1ldGhvZCBpbXBsZW1lbnRhdGlvbi5cbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmNyZWF0ZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgfSApO1xuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuY3JlYXRlKGZ1bmN0aW9uIChvYnNlcnZlcikgeyByZXR1cm4gUnguRGlzcG9zYWJsZS5lbXB0eTsgfSApO1xuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuY3JlYXRlKGZ1bmN0aW9uIChvYnNlcnZlcikgeyB9ICk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHN1YnNjcmliZSBJbXBsZW1lbnRhdGlvbiBvZiB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UncyBzdWJzY3JpYmUgbWV0aG9kLCByZXR1cm5pbmcgYSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgd3JhcHBlZCBpbiBhIERpc3Bvc2FibGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBzcGVjaWZpZWQgaW1wbGVtZW50YXRpb24gZm9yIHRoZSBTdWJzY3JpYmUgbWV0aG9kLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5jcmVhdGUgPSBmdW5jdGlvbiAoc3Vic2NyaWJlLCBwYXJlbnQpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoc3Vic2NyaWJlLCBwYXJlbnQpO1xuICB9O1xuXG4gIHZhciBEZWZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZWZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEZWZlcihmYWN0b3J5KSB7XG4gICAgICB0aGlzLl9mID0gZmFjdG9yeTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlZmVyLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaCh0aGlzLl9mKSgpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG9ic2VydmFibGVUaHJvdyhyZXN1bHQuZSkuc3Vic2NyaWJlKG8pO31cbiAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICByZXR1cm4gcmVzdWx0LnN1YnNjcmliZShvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlZmVyO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpbnZva2VzIHRoZSBzcGVjaWZpZWQgZmFjdG9yeSBmdW5jdGlvbiB3aGVuZXZlciBhIG5ldyBvYnNlcnZlciBzdWJzY3JpYmVzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuZGVmZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gUnguT2JzZXJ2YWJsZS5mcm9tQXJyYXkoWzEsMiwzXSk7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvYnNlcnZhYmxlRmFjdG9yeSBPYnNlcnZhYmxlIGZhY3RvcnkgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIG9ic2VydmVyIHRoYXQgc3Vic2NyaWJlcyB0byB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlIG9yIFByb21pc2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIG9ic2VydmVycyB0cmlnZ2VyIGFuIGludm9jYXRpb24gb2YgdGhlIGdpdmVuIG9ic2VydmFibGUgZmFjdG9yeSBmdW5jdGlvbi5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlRGVmZXIgPSBPYnNlcnZhYmxlLmRlZmVyID0gZnVuY3Rpb24gKG9ic2VydmFibGVGYWN0b3J5KSB7XG4gICAgcmV0dXJuIG5ldyBEZWZlcihvYnNlcnZhYmxlRmFjdG9yeSk7XG4gIH07XG5cbiAgdmFyIEVtcHR5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFbXB0eU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRW1wdHlPYnNlcnZhYmxlKHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFbXB0eU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBzaW5rID0gbmV3IEVtcHR5U2luayhvYnNlcnZlciwgdGhpcy5zY2hlZHVsZXIpO1xuICAgICAgcmV0dXJuIHNpbmsucnVuKCk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIEVtcHR5U2luayhvYnNlcnZlciwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUl0ZW0ocywgc3RhdGUpIHtcbiAgICAgIHN0YXRlLm9uQ29tcGxldGVkKCk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIEVtcHR5U2luay5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHN0YXRlID0gdGhpcy5vYnNlcnZlcjtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID9cbiAgICAgICAgc2NoZWR1bGVJdGVtKG51bGwsIHN0YXRlKSA6XG4gICAgICAgIHRoaXMuc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzY2hlZHVsZUl0ZW0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gRW1wdHlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEVNUFRZX09CU0VSVkFCTEUgPSBuZXcgRW1wdHlPYnNlcnZhYmxlKGltbWVkaWF0ZVNjaGVkdWxlcik7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIGVtcHR5IG9ic2VydmFibGUgc2VxdWVuY2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IHRoZSBzaW5nbGUgT25Db21wbGV0ZWQgbWVzc2FnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmVtcHR5KCk7XG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5lbXB0eShSeC5TY2hlZHVsZXIudGltZW91dCk7XG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gc2VuZCB0aGUgdGVybWluYXRpb24gY2FsbCBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBubyBlbGVtZW50cy5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlRW1wdHkgPSBPYnNlcnZhYmxlLmVtcHR5ID0gZnVuY3Rpb24gKHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG4gICAgcmV0dXJuIHNjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID8gRU1QVFlfT0JTRVJWQUJMRSA6IG5ldyBFbXB0eU9ic2VydmFibGUoc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgRnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRnJvbU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRnJvbU9ic2VydmFibGUoaXRlcmFibGUsIGZuLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX2l0ZXJhYmxlID0gaXRlcmFibGU7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlU2NoZWR1bGVNZXRob2QobywgaXQsIGZuKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbG9vcFJlY3Vyc2l2ZShpLCByZWN1cnNlKSB7XG4gICAgICAgIHZhciBuZXh0ID0gdHJ5Q2F0Y2goaXQubmV4dCkuY2FsbChpdCk7XG4gICAgICAgIGlmIChuZXh0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKG5leHQuZSk7IH1cbiAgICAgICAgaWYgKG5leHQuZG9uZSkgeyByZXR1cm4gby5vbkNvbXBsZXRlZCgpOyB9XG5cbiAgICAgICAgdmFyIHJlc3VsdCA9IG5leHQudmFsdWU7XG5cbiAgICAgICAgaWYgKGlzRnVuY3Rpb24oZm4pKSB7XG4gICAgICAgICAgcmVzdWx0ID0gdHJ5Q2F0Y2goZm4pKHJlc3VsdCwgaSk7XG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgICAgfVxuXG4gICAgICAgIG8ub25OZXh0KHJlc3VsdCk7XG4gICAgICAgIHJlY3Vyc2UoaSArIDEpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbGlzdCA9IE9iamVjdCh0aGlzLl9pdGVyYWJsZSksXG4gICAgICAgICAgaXQgPSBnZXRJdGVyYWJsZShsaXN0KTtcblxuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZSgwLCBjcmVhdGVTY2hlZHVsZU1ldGhvZChvLCBpdCwgdGhpcy5fZm4pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZyb21PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIG1heFNhZmVJbnRlZ2VyID0gTWF0aC5wb3coMiwgNTMpIC0gMTtcblxuICBmdW5jdGlvbiBTdHJpbmdJdGVyYWJsZShzKSB7XG4gICAgdGhpcy5fcyA9IHM7XG4gIH1cblxuICBTdHJpbmdJdGVyYWJsZS5wcm90b3R5cGVbJGl0ZXJhdG9yJF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTdHJpbmdJdGVyYXRvcih0aGlzLl9zKTtcbiAgfTtcblxuICBmdW5jdGlvbiBTdHJpbmdJdGVyYXRvcihzKSB7XG4gICAgdGhpcy5fcyA9IHM7XG4gICAgdGhpcy5fbCA9IHMubGVuZ3RoO1xuICAgIHRoaXMuX2kgPSAwO1xuICB9XG5cbiAgU3RyaW5nSXRlcmF0b3IucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIFN0cmluZ0l0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9pIDwgdGhpcy5fbCA/IHsgZG9uZTogZmFsc2UsIHZhbHVlOiB0aGlzLl9zLmNoYXJBdCh0aGlzLl9pKyspIH0gOiBkb25lRW51bWVyYXRvcjtcbiAgfTtcblxuICBmdW5jdGlvbiBBcnJheUl0ZXJhYmxlKGEpIHtcbiAgICB0aGlzLl9hID0gYTtcbiAgfVxuXG4gIEFycmF5SXRlcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgQXJyYXlJdGVyYXRvcih0aGlzLl9hKTtcbiAgfTtcblxuICBmdW5jdGlvbiBBcnJheUl0ZXJhdG9yKGEpIHtcbiAgICB0aGlzLl9hID0gYTtcbiAgICB0aGlzLl9sID0gdG9MZW5ndGgoYSk7XG4gICAgdGhpcy5faSA9IDA7XG4gIH1cblxuICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZVskaXRlcmF0b3IkXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBBcnJheUl0ZXJhdG9yLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9pIDwgdGhpcy5fbCA/IHsgZG9uZTogZmFsc2UsIHZhbHVlOiB0aGlzLl9hW3RoaXMuX2krK10gfSA6IGRvbmVFbnVtZXJhdG9yO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG51bWJlcklzRmluaXRlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgcm9vdC5pc0Zpbml0ZSh2YWx1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBpc05hbihuKSB7XG4gICAgcmV0dXJuIG4gIT09IG47XG4gIH1cblxuICBmdW5jdGlvbiBnZXRJdGVyYWJsZShvKSB7XG4gICAgdmFyIGkgPSBvWyRpdGVyYXRvciRdLCBpdDtcbiAgICBpZiAoIWkgJiYgdHlwZW9mIG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICBpdCA9IG5ldyBTdHJpbmdJdGVyYWJsZShvKTtcbiAgICAgIHJldHVybiBpdFskaXRlcmF0b3IkXSgpO1xuICAgIH1cbiAgICBpZiAoIWkgJiYgby5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgICAgaXQgPSBuZXcgQXJyYXlJdGVyYWJsZShvKTtcbiAgICAgIHJldHVybiBpdFskaXRlcmF0b3IkXSgpO1xuICAgIH1cbiAgICBpZiAoIWkpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0IGlzIG5vdCBpdGVyYWJsZScpOyB9XG4gICAgcmV0dXJuIG9bJGl0ZXJhdG9yJF0oKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNpZ24odmFsdWUpIHtcbiAgICB2YXIgbnVtYmVyID0gK3ZhbHVlO1xuICAgIGlmIChudW1iZXIgPT09IDApIHsgcmV0dXJuIG51bWJlcjsgfVxuICAgIGlmIChpc05hTihudW1iZXIpKSB7IHJldHVybiBudW1iZXI7IH1cbiAgICByZXR1cm4gbnVtYmVyIDwgMCA/IC0xIDogMTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvTGVuZ3RoKG8pIHtcbiAgICB2YXIgbGVuID0gK28ubGVuZ3RoO1xuICAgIGlmIChpc05hTihsZW4pKSB7IHJldHVybiAwOyB9XG4gICAgaWYgKGxlbiA9PT0gMCB8fCAhbnVtYmVySXNGaW5pdGUobGVuKSkgeyByZXR1cm4gbGVuOyB9XG4gICAgbGVuID0gc2lnbihsZW4pICogTWF0aC5mbG9vcihNYXRoLmFicyhsZW4pKTtcbiAgICBpZiAobGVuIDw9IDApIHsgcmV0dXJuIDA7IH1cbiAgICBpZiAobGVuID4gbWF4U2FmZUludGVnZXIpIHsgcmV0dXJuIG1heFNhZmVJbnRlZ2VyOyB9XG4gICAgcmV0dXJuIGxlbjtcbiAgfVxuXG4gIC8qKlxuICAqIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSBzZXF1ZW5jZSBmcm9tIGFuIGFycmF5LWxpa2Ugb3IgaXRlcmFibGUgb2JqZWN0LlxuICAqIEBwYXJhbSB7QW55fSBhcnJheUxpa2UgQW4gYXJyYXktbGlrZSBvciBpdGVyYWJsZSBvYmplY3QgdG8gY29udmVydCB0byBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFttYXBGbl0gTWFwIGZ1bmN0aW9uIHRvIGNhbGwgb24gZXZlcnkgZWxlbWVudCBvZiB0aGUgYXJyYXkuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBUaGUgY29udGV4dCB0byB1c2UgY2FsbGluZyB0aGUgbWFwRm4gaWYgcHJvdmlkZWQuXG4gICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIE9wdGlvbmFsIHNjaGVkdWxlciB0byB1c2UgZm9yIHNjaGVkdWxpbmcuICBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5jdXJyZW50VGhyZWFkLlxuICAqL1xuICB2YXIgb2JzZXJ2YWJsZUZyb20gPSBPYnNlcnZhYmxlLmZyb20gPSBmdW5jdGlvbiAoaXRlcmFibGUsIG1hcEZuLCB0aGlzQXJnLCBzY2hlZHVsZXIpIHtcbiAgICBpZiAoaXRlcmFibGUgPT0gbnVsbCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpdGVyYWJsZSBjYW5ub3QgYmUgbnVsbC4nKVxuICAgIH1cbiAgICBpZiAobWFwRm4gJiYgIWlzRnVuY3Rpb24obWFwRm4pKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ21hcEZuIHdoZW4gcHJvdmlkZWQgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgfVxuICAgIGlmIChtYXBGbikge1xuICAgICAgdmFyIG1hcHBlciA9IGJpbmRDYWxsYmFjayhtYXBGbiwgdGhpc0FyZywgMik7XG4gICAgfVxuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgRnJvbU9ic2VydmFibGUoaXRlcmFibGUsIG1hcHBlciwgc2NoZWR1bGVyKTtcbiAgfVxuXG4gIHZhciBGcm9tQXJyYXlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZyb21BcnJheU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRnJvbUFycmF5T2JzZXJ2YWJsZShhcmdzLCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMuX2FyZ3MgPSBhcmdzO1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2QobywgYXJncykge1xuICAgICAgdmFyIGxlbiA9IGFyZ3MubGVuZ3RoO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUgKGksIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKGkgPCBsZW4pIHtcbiAgICAgICAgICBvLm9uTmV4dChhcmdzW2ldKTtcbiAgICAgICAgICByZWN1cnNlKGkgKyAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgRnJvbUFycmF5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKDAsIHNjaGVkdWxlTWV0aG9kKG8sIHRoaXMuX2FyZ3MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZyb21BcnJheU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgKiAgQ29udmVydHMgYW4gYXJyYXkgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgdXNpbmcgYW4gb3B0aW9uYWwgc2NoZWR1bGVyIHRvIGVudW1lcmF0ZSB0aGUgYXJyYXkuXG4gICogQGRlcHJlY2F0ZWQgdXNlIE9ic2VydmFibGUuZnJvbSBvciBPYnNlcnZhYmxlLm9mXG4gICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIGVudW1lcmF0aW9uIG9mIHRoZSBpbnB1dCBzZXF1ZW5jZSBvbi5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgYXJlIHB1bGxlZCBmcm9tIHRoZSBnaXZlbiBlbnVtZXJhYmxlIHNlcXVlbmNlLlxuICAqL1xuICB2YXIgb2JzZXJ2YWJsZUZyb21BcnJheSA9IE9ic2VydmFibGUuZnJvbUFycmF5ID0gZnVuY3Rpb24gKGFycmF5LCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEZyb21BcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlcilcbiAgfTtcblxuICB2YXIgR2VuZXJhdGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhHZW5lcmF0ZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gR2VuZXJhdGVPYnNlcnZhYmxlKHN0YXRlLCBjbmRGbiwgaXRyRm4sIHJlc0ZuLCBzKSB7XG4gICAgICB0aGlzLl9pbml0aWFsU3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX2NuZEZuID0gY25kRm47XG4gICAgICB0aGlzLl9pdHJGbiA9IGl0ckZuO1xuICAgICAgdGhpcy5fcmVzRm4gPSByZXNGbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5maXJzdCkge1xuICAgICAgICBzdGF0ZS5maXJzdCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUubmV3U3RhdGUgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9pdHJGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUubmV3U3RhdGUgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUubmV3U3RhdGUuZSk7IH1cbiAgICAgIH1cbiAgICAgIHZhciBoYXNSZXN1bHQgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9jbmRGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgaWYgKGhhc1Jlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihoYXNSZXN1bHQuZSk7IH1cbiAgICAgIGlmIChoYXNSZXN1bHQpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX3Jlc0ZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgIHN0YXRlLm8ub25OZXh0KHJlc3VsdCk7XG4gICAgICAgIHJlY3Vyc2Uoc3RhdGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIEdlbmVyYXRlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIG86IG8sXG4gICAgICAgIHNlbGY6IHRoaXMsXG4gICAgICAgIGZpcnN0OiB0cnVlLFxuICAgICAgICBuZXdTdGF0ZTogdGhpcy5faW5pdGlhbFN0YXRlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuX3Muc2NoZWR1bGVSZWN1cnNpdmUoc3RhdGUsIHNjaGVkdWxlUmVjdXJzaXZlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEdlbmVyYXRlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgR2VuZXJhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgcnVubmluZyBhIHN0YXRlLWRyaXZlbiBsb29wIHByb2R1Y2luZyB0aGUgc2VxdWVuY2UncyBlbGVtZW50cywgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5nZW5lcmF0ZSgwLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCA8IDEwOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geCArIDE7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9KTtcbiAgICogIHZhciByZXMgPSBSeC5PYnNlcnZhYmxlLmdlbmVyYXRlKDAsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4IDwgMTA7IH0sIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4ICsgMTsgfSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHg7IH0sIFJ4LlNjaGVkdWxlci50aW1lb3V0KTtcbiAgICogQHBhcmFtIHtNaXhlZH0gaW5pdGlhbFN0YXRlIEluaXRpYWwgc3RhdGUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBDb25kaXRpb24gdG8gdGVybWluYXRlIGdlbmVyYXRpb24gKHVwb24gcmV0dXJuaW5nIGZhbHNlKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZSBJdGVyYXRpb24gc3RlcCBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgU2VsZWN0b3IgZnVuY3Rpb24gZm9yIHJlc3VsdHMgcHJvZHVjZWQgaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIG9uIHdoaWNoIHRvIHJ1biB0aGUgZ2VuZXJhdG9yIGxvb3AuIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgZ2VuZXJhdGVkIHNlcXVlbmNlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5nZW5lcmF0ZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgR2VuZXJhdGVPYnNlcnZhYmxlKGluaXRpYWxTdGF0ZSwgY29uZGl0aW9uLCBpdGVyYXRlLCByZXN1bHRTZWxlY3Rvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlT2YgKHNjaGVkdWxlciwgYXJyYXkpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBjdXJyZW50VGhyZWFkU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEZyb21BcnJheU9ic2VydmFibGUoYXJyYXksIHNjaGVkdWxlcik7XG4gIH1cblxuICAvKipcbiAgKiAgVGhpcyBtZXRob2QgY3JlYXRlcyBhIG5ldyBPYnNlcnZhYmxlIGluc3RhbmNlIHdpdGggYSB2YXJpYWJsZSBudW1iZXIgb2YgYXJndW1lbnRzLCByZWdhcmRsZXNzIG9mIG51bWJlciBvciB0eXBlIG9mIHRoZSBhcmd1bWVudHMuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSBwdWxsZWQgZnJvbSB0aGUgZ2l2ZW4gYXJndW1lbnRzLlxuICAqL1xuICBPYnNlcnZhYmxlLm9mID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gbmV3IEZyb21BcnJheU9ic2VydmFibGUoYXJncywgY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gIH07XG5cbiAgLyoqXG4gICogIFRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBuZXcgT2JzZXJ2YWJsZSBpbnN0YW5jZSB3aXRoIGEgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50cywgcmVnYXJkbGVzcyBvZiBudW1iZXIgb3IgdHlwZSBvZiB0aGUgYXJndW1lbnRzLlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgQSBzY2hlZHVsZXIgdG8gdXNlIGZvciBzY2hlZHVsaW5nIHRoZSBhcmd1bWVudHMuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSBwdWxsZWQgZnJvbSB0aGUgZ2l2ZW4gYXJndW1lbnRzLlxuICAqL1xuICBPYnNlcnZhYmxlLm9mV2l0aFNjaGVkdWxlciA9IGZ1bmN0aW9uIChzY2hlZHVsZXIpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4gLSAxKTtcbiAgICBmb3IodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gbmV3IEZyb21BcnJheU9ic2VydmFibGUoYXJncywgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlIGZyb20gY2hhbmdlcyB0byBhbiBhcnJheSB1c2luZyBBcnJheS5vYnNlcnZlLlxuICAgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBBbiBhcnJheSB0byBvYnNlcnZlIGNoYW5nZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgY2hhbmdlcyB0byBhbiBhcnJheSBmcm9tIEFycmF5Lm9ic2VydmUuXG4gICAqL1xuICBPYnNlcnZhYmxlLm9mQXJyYXlDaGFuZ2VzID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoYXJyYXkpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5Lm9ic2VydmUgb25seSBhY2NlcHRzIGFycmF5cy4nKTsgfVxuICAgIGlmICh0eXBlb2YgQXJyYXkub2JzZXJ2ZSAhPT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgQXJyYXkudW5vYnNlcnZlICE9PSAnZnVuY3Rpb24nKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ0FycmF5Lm9ic2VydmUgaXMgbm90IHN1cHBvcnRlZCBvbiB5b3VyIHBsYXRmb3JtJykgfVxuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgZnVuY3Rpb24gb2JzZXJ2ZXJGbihjaGFuZ2VzKSB7XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbiA9IGNoYW5nZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQoY2hhbmdlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgQXJyYXkub2JzZXJ2ZShhcnJheSwgb2JzZXJ2ZXJGbik7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEFycmF5LnVub2JzZXJ2ZShhcnJheSwgb2JzZXJ2ZXJGbik7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIE9ic2VydmFibGUgc2VxdWVuY2UgZnJvbSBjaGFuZ2VzIHRvIGFuIG9iamVjdCB1c2luZyBPYmplY3Qub2JzZXJ2ZS5cbiAgICogQHBhcmFtIHtPYmplY3R9IG9iaiBBbiBvYmplY3QgdG8gb2JzZXJ2ZSBjaGFuZ2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGNoYW5nZXMgdG8gYW4gb2JqZWN0IGZyb20gT2JqZWN0Lm9ic2VydmUuXG4gICAqL1xuICBPYnNlcnZhYmxlLm9mT2JqZWN0Q2hhbmdlcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdvYmplY3QgbXVzdCBub3QgYmUgbnVsbCBvciB1bmRlZmluZWQuJyk7IH1cbiAgICBpZiAodHlwZW9mIE9iamVjdC5vYnNlcnZlICE9PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBPYmplY3QudW5vYnNlcnZlICE9PSAnZnVuY3Rpb24nKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoJ09iamVjdC5vYnNlcnZlIGlzIG5vdCBzdXBwb3J0ZWQgb24geW91ciBwbGF0Zm9ybScpIH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24ob2JzZXJ2ZXIpIHtcbiAgICAgIGZ1bmN0aW9uIG9ic2VydmVyRm4oY2hhbmdlcykge1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBjaGFuZ2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGNoYW5nZXNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIE9iamVjdC5vYnNlcnZlKG9iaiwgb2JzZXJ2ZXJGbik7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIE9iamVjdC51bm9ic2VydmUob2JqLCBvYnNlcnZlckZuKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIE5ldmVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhOZXZlck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTmV2ZXJPYnNlcnZhYmxlKCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTmV2ZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH07XG5cbiAgICByZXR1cm4gTmV2ZXJPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE5FVkVSX09CU0VSVkFCTEUgPSBuZXcgTmV2ZXJPYnNlcnZhYmxlKCk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBub24tdGVybWluYXRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gZGVub3RlIGFuIGluZmluaXRlIGR1cmF0aW9uIChlLmcuIHdoZW4gdXNpbmcgcmVhY3RpdmUgam9pbnMpLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBvYnNlcnZlcnMgd2lsbCBuZXZlciBnZXQgY2FsbGVkLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVOZXZlciA9IE9ic2VydmFibGUubmV2ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE5FVkVSX09CU0VSVkFCTEU7XG4gIH07XG5cbiAgdmFyIFBhaXJzT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYWlyc09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGFpcnNPYnNlcnZhYmxlKG8sIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9rZXlzID0gT2JqZWN0LmtleXMobyk7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChvLCBvYmosIGtleXMpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKGksIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKGkgPCBrZXlzLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgIG8ub25OZXh0KFtrZXksIG9ialtrZXldXSk7XG4gICAgICAgICAgcmVjdXJzZShpICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIFBhaXJzT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKDAsIHNjaGVkdWxlTWV0aG9kKG8sIHRoaXMuX28sIHRoaXMuX2tleXMpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhaXJzT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGFuIG9iamVjdCBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgW2tleSwgdmFsdWVdIHBhaXJzLlxuICAgKiBAcGFyYW0ge09iamVjdH0gb2JqIFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIGVudW1lcmF0aW9uIG9mIHRoZSBpbnB1dCBzZXF1ZW5jZSBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgW2tleSwgdmFsdWVdIHBhaXJzIGZyb20gdGhlIG9iamVjdC5cbiAgICovXG4gIE9ic2VydmFibGUucGFpcnMgPSBmdW5jdGlvbiAob2JqLCBzY2hlZHVsZXIpIHtcbiAgICBzY2hlZHVsZXIgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgUGFpcnNPYnNlcnZhYmxlKG9iaiwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAgIHZhciBSYW5nZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmFuZ2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJhbmdlT2JzZXJ2YWJsZShzdGFydCwgY291bnQsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgICAgdGhpcy5yYW5nZUNvdW50ID0gY291bnQ7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxvb3BSZWN1cnNpdmUoc3RhcnQsIGNvdW50LCBvKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24gbG9vcCAoaSwgcmVjdXJzZSkge1xuICAgICAgICBpZiAoaSA8IGNvdW50KSB7XG4gICAgICAgICAgby5vbk5leHQoc3RhcnQgKyBpKTtcbiAgICAgICAgICByZWN1cnNlKGkgKyAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgUmFuZ2VPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShcbiAgICAgICAgMCxcbiAgICAgICAgbG9vcFJlY3Vyc2l2ZSh0aGlzLnN0YXJ0LCB0aGlzLnJhbmdlQ291bnQsIG8pXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmFuZ2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGludGVncmFsIG51bWJlcnMgd2l0aGluIGEgc3BlY2lmaWVkIHJhbmdlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBzZW5kIG91dCBvYnNlcnZlciBtZXNzYWdlcy5cbiAgKiBAcGFyYW0ge051bWJlcn0gc3RhcnQgVGhlIHZhbHVlIG9mIHRoZSBmaXJzdCBpbnRlZ2VyIGluIHRoZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBzZXF1ZW50aWFsIGludGVnZXJzIHRvIGdlbmVyYXRlLlxuICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBnZW5lcmF0b3IgbG9vcCBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLmN1cnJlbnRUaHJlYWQuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyBhIHJhbmdlIG9mIHNlcXVlbnRpYWwgaW50ZWdyYWwgbnVtYmVycy5cbiAgKi9cbiAgT2JzZXJ2YWJsZS5yYW5nZSA9IGZ1bmN0aW9uIChzdGFydCwgY291bnQsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgUmFuZ2VPYnNlcnZhYmxlKHN0YXJ0LCBjb3VudCwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgUmVwZWF0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhSZXBlYXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJlcGVhdE9ic2VydmFibGUodmFsdWUsIHJlcGVhdENvdW50LCBzY2hlZHVsZXIpIHtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMucmVwZWF0Q291bnQgPSByZXBlYXRDb3VudCA9PSBudWxsID8gLTEgOiByZXBlYXRDb3VudDtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUmVwZWF0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIHNpbmsgPSBuZXcgUmVwZWF0U2luayhvYnNlcnZlciwgdGhpcyk7XG4gICAgICByZXR1cm4gc2luay5ydW4oKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcGVhdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICBmdW5jdGlvbiBSZXBlYXRTaW5rKG9ic2VydmVyLCBwYXJlbnQpIHtcbiAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gIH1cblxuICBSZXBlYXRTaW5rLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9ic2VydmVyID0gdGhpcy5vYnNlcnZlciwgdmFsdWUgPSB0aGlzLnBhcmVudC52YWx1ZTtcbiAgICBmdW5jdGlvbiBsb29wUmVjdXJzaXZlKGksIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChpID09PSAtMSB8fCBpID4gMCkge1xuICAgICAgICBvYnNlcnZlci5vbk5leHQodmFsdWUpO1xuICAgICAgICBpID4gMCAmJiBpLS07XG4gICAgICB9XG4gICAgICBpZiAoaSA9PT0gMCkgeyByZXR1cm4gb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTsgfVxuICAgICAgcmVjdXJzZShpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wYXJlbnQuc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHRoaXMucGFyZW50LnJlcGVhdENvdW50LCBsb29wUmVjdXJzaXZlKTtcbiAgfTtcblxuICAvKipcbiAgICogIEdlbmVyYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcmVwZWF0cyB0aGUgZ2l2ZW4gZWxlbWVudCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcywgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIEVsZW1lbnQgdG8gcmVwZWF0LlxuICAgKiBAcGFyYW0ge051bWJlcn0gcmVwZWF0Q291bnQgW09wdGlvbmFdIE51bWJlciBvZiB0aW1lcyB0byByZXBlYXQgdGhlIGVsZW1lbnQuIElmIG5vdCBzcGVjaWZpZWQsIHJlcGVhdHMgaW5kZWZpbml0ZWx5LlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBydW4gdGhlIHByb2R1Y2VyIGxvb3Agb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5pbW1lZGlhdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgcmVwZWF0cyB0aGUgZ2l2ZW4gZWxlbWVudCB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcy5cbiAgICovXG4gIE9ic2VydmFibGUucmVwZWF0ID0gZnVuY3Rpb24gKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBSZXBlYXRPYnNlcnZhYmxlKHZhbHVlLCByZXBlYXRDb3VudCwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgSnVzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSnVzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSnVzdE9ic2VydmFibGUodmFsdWUsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEp1c3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdGF0ZSA9IFt0aGlzLl92YWx1ZSwgb107XG4gICAgICByZXR1cm4gdGhpcy5fc2NoZWR1bGVyID09PSBpbW1lZGlhdGVTY2hlZHVsZXIgP1xuICAgICAgICBzY2hlZHVsZUl0ZW0obnVsbCwgc3RhdGUpIDpcbiAgICAgICAgdGhpcy5fc2NoZWR1bGVyLnNjaGVkdWxlKHN0YXRlLCBzY2hlZHVsZUl0ZW0pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZUl0ZW0ocywgc3RhdGUpIHtcbiAgICAgIHZhciB2YWx1ZSA9IHN0YXRlWzBdLCBvYnNlcnZlciA9IHN0YXRlWzFdO1xuICAgICAgb2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIHJldHVybiBKdXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgYSBzaW5nbGUgZWxlbWVudCwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gc2VuZCBvdXQgb2JzZXJ2ZXIgbWVzc2FnZXMuXG4gICAqICBUaGVyZSBpcyBhbiBhbGlhcyBjYWxsZWQgJ2p1c3QnIG9yIGJyb3dzZXJzIDxJRTkuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IHZhbHVlIFNpbmdsZSBlbGVtZW50IGluIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IHNjaGVkdWxlciBTY2hlZHVsZXIgdG8gc2VuZCB0aGUgc2luZ2xlIGVsZW1lbnQgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci5pbW1lZGlhdGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNpbmdsZSBzcGVjaWZpZWQgZWxlbWVudC5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlUmV0dXJuID0gT2JzZXJ2YWJsZVsncmV0dXJuJ10gPSBPYnNlcnZhYmxlLmp1c3QgPSBmdW5jdGlvbiAodmFsdWUsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGltbWVkaWF0ZVNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBKdXN0T2JzZXJ2YWJsZSh2YWx1ZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgVGhyb3dPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRocm93T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUaHJvd09ic2VydmFibGUoZXJyb3IsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5fZXJyb3IgPSBlcnJvcjtcbiAgICAgIHRoaXMuX3NjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRocm93T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3RhdGUgPSBbdGhpcy5fZXJyb3IsIG9dO1xuICAgICAgcmV0dXJuIHRoaXMuX3NjaGVkdWxlciA9PT0gaW1tZWRpYXRlU2NoZWR1bGVyID9cbiAgICAgICAgc2NoZWR1bGVJdGVtKG51bGwsIHN0YXRlKSA6XG4gICAgICAgIHRoaXMuX3NjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2NoZWR1bGVJdGVtKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVJdGVtKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgZSA9IHN0YXRlWzBdLCBvID0gc3RhdGVbMV07XG4gICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgIH1cblxuICAgIHJldHVybiBUaHJvd09ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHRlcm1pbmF0ZXMgd2l0aCBhbiBleGNlcHRpb24sIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIHRvIHNlbmQgb3V0IHRoZSBzaW5nbGUgb25FcnJvciBtZXNzYWdlLlxuICAgKiAgVGhlcmUgaXMgYW4gYWxpYXMgdG8gdGhpcyBtZXRob2QgY2FsbGVkICd0aHJvd0Vycm9yJyBmb3IgYnJvd3NlcnMgPElFOS5cbiAgICogQHBhcmFtIHtNaXhlZH0gZXJyb3IgQW4gb2JqZWN0IHVzZWQgZm9yIHRoZSBzZXF1ZW5jZSdzIHRlcm1pbmF0aW9uLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBzZW5kIHRoZSBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBjYWxsIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIuaW1tZWRpYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCB0ZXJtaW5hdGVzIGV4Y2VwdGlvbmFsbHkgd2l0aCB0aGUgc3BlY2lmaWVkIGV4Y2VwdGlvbiBvYmplY3QuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVRocm93ID0gT2JzZXJ2YWJsZVsndGhyb3cnXSA9IGZ1bmN0aW9uIChlcnJvciwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFRocm93T2JzZXJ2YWJsZShlcnJvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgVXNpbmdPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhVc2luZ09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVXNpbmdPYnNlcnZhYmxlKHJlc0ZuLCBvYnNGbikge1xuICAgICAgdGhpcy5fcmVzRm4gPSByZXNGbjtcbiAgICAgIHRoaXMuX29ic0ZuID0gb2JzRm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBVc2luZ09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGRpc3Bvc2FibGUgPSBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICB2YXIgcmVzb3VyY2UgPSB0cnlDYXRjaCh0aGlzLl9yZXNGbikoKTtcbiAgICAgIGlmIChyZXNvdXJjZSA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKG9ic2VydmFibGVUaHJvdyhyZXNvdXJjZS5lKS5zdWJzY3JpYmUobyksIGRpc3Bvc2FibGUpO1xuICAgICAgfVxuICAgICAgcmVzb3VyY2UgJiYgKGRpc3Bvc2FibGUgPSByZXNvdXJjZSk7XG4gICAgICB2YXIgc291cmNlID0gdHJ5Q2F0Y2godGhpcy5fb2JzRm4pKHJlc291cmNlKTtcbiAgICAgIGlmIChzb3VyY2UgPT09IGVycm9yT2JqKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShvYnNlcnZhYmxlVGhyb3coc291cmNlLmUpLnN1YnNjcmliZShvKSwgZGlzcG9zYWJsZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShvKSwgZGlzcG9zYWJsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBVc2luZ09ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgZGVwZW5kcyBvbiBhIHJlc291cmNlIG9iamVjdCwgd2hvc2UgbGlmZXRpbWUgaXMgdGllZCB0byB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2UncyBsaWZldGltZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzb3VyY2VGYWN0b3J5IEZhY3RvcnkgZnVuY3Rpb24gdG8gb2J0YWluIGEgcmVzb3VyY2Ugb2JqZWN0LlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvYnNlcnZhYmxlRmFjdG9yeSBGYWN0b3J5IGZ1bmN0aW9uIHRvIG9idGFpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgZGVwZW5kcyBvbiB0aGUgb2J0YWluZWQgcmVzb3VyY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGxpZmV0aW1lIGNvbnRyb2xzIHRoZSBsaWZldGltZSBvZiB0aGUgZGVwZW5kZW50IHJlc291cmNlIG9iamVjdC5cbiAgICovXG4gIE9ic2VydmFibGUudXNpbmcgPSBmdW5jdGlvbiAocmVzb3VyY2VGYWN0b3J5LCBvYnNlcnZhYmxlRmFjdG9yeSkge1xuICAgIHJldHVybiBuZXcgVXNpbmdPYnNlcnZhYmxlKHJlc291cmNlRmFjdG9yeSwgb2JzZXJ2YWJsZUZhY3RvcnkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm9wYWdhdGVzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIG9yIFByb21pc2UgdGhhdCByZWFjdHMgZmlyc3QuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gcmlnaHRTb3VyY2UgU2Vjb25kIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc3VyZmFjZXMgZWl0aGVyIG9mIHRoZSBnaXZlbiBzZXF1ZW5jZXMsIHdoaWNoZXZlciByZWFjdGVkIGZpcnN0LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmFtYiA9IGZ1bmN0aW9uIChyaWdodFNvdXJjZSkge1xuICAgIHZhciBsZWZ0U291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgY2hvaWNlLFxuICAgICAgICBsZWZ0Q2hvaWNlID0gJ0wnLCByaWdodENob2ljZSA9ICdSJyxcbiAgICAgICAgbGVmdFN1YnNjcmlwdGlvbiA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICByaWdodFN1YnNjcmlwdGlvbiA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuXG4gICAgICBpc1Byb21pc2UocmlnaHRTb3VyY2UpICYmIChyaWdodFNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyaWdodFNvdXJjZSkpO1xuXG4gICAgICBmdW5jdGlvbiBjaG9pY2VMKCkge1xuICAgICAgICBpZiAoIWNob2ljZSkge1xuICAgICAgICAgIGNob2ljZSA9IGxlZnRDaG9pY2U7XG4gICAgICAgICAgcmlnaHRTdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGNob2ljZVIoKSB7XG4gICAgICAgIGlmICghY2hvaWNlKSB7XG4gICAgICAgICAgY2hvaWNlID0gcmlnaHRDaG9pY2U7XG4gICAgICAgICAgbGVmdFN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIGxlZnRTdWJzY3JpYmUgPSBvYnNlcnZlckNyZWF0ZShcbiAgICAgICAgZnVuY3Rpb24gKGxlZnQpIHtcbiAgICAgICAgICBjaG9pY2VMKCk7XG4gICAgICAgICAgY2hvaWNlID09PSBsZWZ0Q2hvaWNlICYmIG9ic2VydmVyLm9uTmV4dChsZWZ0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjaG9pY2VMKCk7XG4gICAgICAgICAgY2hvaWNlID09PSBsZWZ0Q2hvaWNlICYmIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjaG9pY2VMKCk7XG4gICAgICAgICAgY2hvaWNlID09PSBsZWZ0Q2hvaWNlICYmIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICB2YXIgcmlnaHRTdWJzY3JpYmUgPSBvYnNlcnZlckNyZWF0ZShcbiAgICAgICAgZnVuY3Rpb24gKHJpZ2h0KSB7XG4gICAgICAgICAgY2hvaWNlUigpO1xuICAgICAgICAgIGNob2ljZSA9PT0gcmlnaHRDaG9pY2UgJiYgb2JzZXJ2ZXIub25OZXh0KHJpZ2h0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjaG9pY2VSKCk7XG4gICAgICAgICAgY2hvaWNlID09PSByaWdodENob2ljZSAmJiBvYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2hvaWNlUigpO1xuICAgICAgICAgIGNob2ljZSA9PT0gcmlnaHRDaG9pY2UgJiYgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgKTtcblxuICAgICAgbGVmdFN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGxlZnRTb3VyY2Uuc3Vic2NyaWJlKGxlZnRTdWJzY3JpYmUpKTtcbiAgICAgIHJpZ2h0U3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUocmlnaHRTb3VyY2Uuc3Vic2NyaWJlKHJpZ2h0U3Vic2NyaWJlKSk7XG5cbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShsZWZ0U3Vic2NyaXB0aW9uLCByaWdodFN1YnNjcmlwdGlvbik7XG4gICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gYW1iKHAsIGMpIHsgcmV0dXJuIHAuYW1iKGMpOyB9XG5cbiAgLyoqXG4gICAqIFByb3BhZ2F0ZXMgdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHJlYWN0cyBmaXJzdC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzdXJmYWNlcyBhbnkgb2YgdGhlIGdpdmVuIHNlcXVlbmNlcywgd2hpY2hldmVyIHJlYWN0ZWQgZmlyc3QuXG4gICAqL1xuICBPYnNlcnZhYmxlLmFtYiA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYWNjID0gb2JzZXJ2YWJsZU5ldmVyKCksIGl0ZW1zO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGl0ZW1zID0gYXJndW1lbnRzWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICAgIGl0ZW1zID0gbmV3IEFycmF5KGl0ZW1zKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBpdGVtc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gaXRlbXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGFjYyA9IGFtYihhY2MsIGl0ZW1zW2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIGFjYztcbiAgfTtcblxuICB2YXIgQ2F0Y2hPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDYXRjaE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ2F0Y2hPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENhdGNoT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZDEgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSwgc3Vic2NyaXB0aW9uID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcbiAgICAgIHN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQxKTtcbiAgICAgIGQxLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBDYXRjaE9ic2VydmVyKG8sIHN1YnNjcmlwdGlvbiwgdGhpcy5fZm4pKSk7XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2F0Y2hPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIENhdGNoT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQ2F0Y2hPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDYXRjaE9ic2VydmVyKG8sIHMsIGZuKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENhdGNoT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkgeyB0aGlzLl9vLm9uTmV4dCh4KTsgfTtcbiAgICBDYXRjaE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG4gICAgQ2F0Y2hPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuX2ZuKShlKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICBpc1Byb21pc2UocmVzdWx0KSAmJiAocmVzdWx0ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHJlc3VsdCkpO1xuXG4gICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5fcy5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgZC5zZXREaXNwb3NhYmxlKHJlc3VsdC5zdWJzY3JpYmUodGhpcy5fbykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ2F0Y2hPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENvbnRpbnVlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGVybWluYXRlZCBieSBhbiBleGNlcHRpb24gd2l0aCB0aGUgbmV4dCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge01peGVkfSBoYW5kbGVyT3JTZWNvbmQgRXhjZXB0aW9uIGhhbmRsZXIgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgZ2l2ZW4gdGhlIGVycm9yIHRoYXQgb2NjdXJyZWQgaW4gdGhlIGZpcnN0IHNlcXVlbmNlLCBvciBhIHNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlIHVzZWQgdG8gcHJvZHVjZSByZXN1bHRzIHdoZW4gYW4gZXJyb3Igb2NjdXJyZWQgaW4gdGhlIGZpcnN0IHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBmaXJzdCBzZXF1ZW5jZSdzIGVsZW1lbnRzLCBmb2xsb3dlZCBieSB0aGUgZWxlbWVudHMgb2YgdGhlIGhhbmRsZXIgc2VxdWVuY2UgaW4gY2FzZSBhbiBleGNlcHRpb24gb2NjdXJyZWQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG9bJ2NhdGNoJ10gPSBmdW5jdGlvbiAoaGFuZGxlck9yU2Vjb25kKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24oaGFuZGxlck9yU2Vjb25kKSA/IG5ldyBDYXRjaE9ic2VydmFibGUodGhpcywgaGFuZGxlck9yU2Vjb25kKSA6IG9ic2VydmFibGVDYXRjaChbdGhpcywgaGFuZGxlck9yU2Vjb25kXSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbnRpbnVlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGVybWluYXRlZCBieSBhbiBleGNlcHRpb24gd2l0aCB0aGUgbmV4dCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byB1c2UgYXMgdGhlIG5leHQgc2VxdWVuY2UgaWYgYW4gZXJyb3Igb2NjdXJzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGVsZW1lbnRzIGZyb20gY29uc2VjdXRpdmUgc291cmNlIHNlcXVlbmNlcyB1bnRpbCBhIHNvdXJjZSBzZXF1ZW5jZSB0ZXJtaW5hdGVzIHN1Y2Nlc3NmdWxseS5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlQ2F0Y2ggPSBPYnNlcnZhYmxlWydjYXRjaCddID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpdGVtcztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBpdGVtcyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpdGVtcyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGl0ZW1zW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgfVxuICAgIHJldHVybiBlbnVtZXJhYmxlT2YoaXRlbXMpLmNhdGNoRXJyb3IoKTtcbiAgfTtcblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYW55IG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBQcm9taXNlcyBwcm9kdWNlcyBhbiBlbGVtZW50LlxuICAgKiBUaGlzIGNhbiBiZSBpbiB0aGUgZm9ybSBvZiBhbiBhcmd1bWVudCBsaXN0IG9mIG9ic2VydmFibGVzIG9yIGFuIGFycmF5LlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAxIC0gb2JzID0gb2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KG9iczEsIG9iczIsIG9iczMsIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAgKiAyIC0gb2JzID0gb2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0KFtvYnMxLCBvYnMyLCBvYnMzXSwgZnVuY3Rpb24gKG8xLCBvMiwgbzMpIHsgcmV0dXJuIG8xICsgbzIgKyBvMzsgfSk7XG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZXMgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY29tYmluZUxhdGVzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJnc1swXSkpIHtcbiAgICAgIGFyZ3NbMF0udW5zaGlmdCh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuICAgIH1cbiAgICByZXR1cm4gY29tYmluZUxhdGVzdC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgfTtcblxuICBmdW5jdGlvbiBmYWxzZUZhY3RvcnkoKSB7IHJldHVybiBmYWxzZTsgfVxuICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIHZhciBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZShwYXJhbXMsIGNiKSB7XG4gICAgICB0aGlzLl9wYXJhbXMgPSBwYXJhbXM7XG4gICAgICB0aGlzLl9jYiA9IGNiO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQ29tYmluZUxhdGVzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgdmFyIGxlbiA9IHRoaXMuX3BhcmFtcy5sZW5ndGgsXG4gICAgICAgICAgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShsZW4pO1xuXG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIGhhc1ZhbHVlOiBhcnJheUluaXRpYWxpemUobGVuLCBmYWxzZUZhY3RvcnkpLFxuICAgICAgICBoYXNWYWx1ZUFsbDogZmFsc2UsXG4gICAgICAgIGlzRG9uZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgdmFsdWVzOiBuZXcgQXJyYXkobGVuKVxuICAgICAgfTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5fcGFyYW1zW2ldLCBzYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgc3Vic2NyaXB0aW9uc1tpXSA9IHNhZDtcbiAgICAgICAgaXNQcm9taXNlKHNvdXJjZSkgJiYgKHNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShzb3VyY2UpKTtcbiAgICAgICAgc2FkLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShuZXcgQ29tYmluZUxhdGVzdE9ic2VydmVyKG9ic2VydmVyLCBpLCB0aGlzLl9jYiwgc3RhdGUpKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb21iaW5lTGF0ZXN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbWJpbmVMYXRlc3RPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb21iaW5lTGF0ZXN0T2JzZXJ2ZXIobywgaSwgY2IsIHN0YXRlKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2kgPSBpO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBub3RUaGVTYW1lKGkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaikge1xuICAgICAgICByZXR1cm4gaiAhPT0gaTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgQ29tYmluZUxhdGVzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3N0YXRlLnZhbHVlc1t0aGlzLl9pXSA9IHg7XG4gICAgICB0aGlzLl9zdGF0ZS5oYXNWYWx1ZVt0aGlzLl9pXSA9IHRydWU7XG4gICAgICBpZiAodGhpcy5fc3RhdGUuaGFzVmFsdWVBbGwgfHwgKHRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsID0gdGhpcy5fc3RhdGUuaGFzVmFsdWUuZXZlcnkoaWRlbnRpdHkpKSkge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fY2IpLmFwcGx5KG51bGwsIHRoaXMuX3N0YXRlLnZhbHVlcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3N0YXRlLmlzRG9uZS5maWx0ZXIobm90VGhlU2FtZSh0aGlzLl9pKSkuZXZlcnkoaWRlbnRpdHkpKSB7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29tYmluZUxhdGVzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIENvbWJpbmVMYXRlc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fc3RhdGUuaXNEb25lW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzRG9uZS5ldmVyeShpZGVudGl0eSkgJiYgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29tYmluZUxhdGVzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aGVuZXZlciBhbnkgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIG9yIFByb21pc2VzIHByb2R1Y2VzIGFuIGVsZW1lbnQuXG4gICpcbiAgKiBAZXhhbXBsZVxuICAqIDEgLSBvYnMgPSBSeC5PYnNlcnZhYmxlLmNvbWJpbmVMYXRlc3Qob2JzMSwgb2JzMiwgb2JzMywgZnVuY3Rpb24gKG8xLCBvMiwgbzMpIHsgcmV0dXJuIG8xICsgbzIgKyBvMzsgfSk7XG4gICogMiAtIG9icyA9IFJ4Lk9ic2VydmFibGUuY29tYmluZUxhdGVzdChbb2JzMSwgb2JzMiwgb2JzM10sIGZ1bmN0aW9uIChvMSwgbzIsIG8zKSB7IHJldHVybiBvMSArIG8yICsgbzM7IH0pO1xuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIHNvdXJjZXMgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICovXG4gIHZhciBjb21iaW5lTGF0ZXN0ID0gT2JzZXJ2YWJsZS5jb21iaW5lTGF0ZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKGFyZ3NbbGVuIC0gMV0pID8gYXJncy5wb3AoKSA6IGFyZ3VtZW50c1RvQXJyYXk7XG4gICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuICAgIHJldHVybiBuZXcgQ29tYmluZUxhdGVzdE9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb25jYXRlbmF0ZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcy4gIFRoaXMgdGFrZXMgaW4gZWl0aGVyIGFuIGFycmF5IG9yIHZhcmlhYmxlIGFyZ3VtZW50cyB0byBjb25jYXRlbmF0ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgZWFjaCBnaXZlbiBzZXF1ZW5jZSwgaW4gc2VxdWVudGlhbCBvcmRlci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5jb25jYXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yKHZhciBhcmdzID0gW10sIGkgPSAwLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIG9ic2VydmFibGVDb25jYXQuYXBwbHkobnVsbCwgYXJncyk7XG4gIH07XG5cbiAgdmFyIENvbmNhdE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbmNhdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbmNhdE9ic2VydmVyKHMsIGZuKSB7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDb25jYXRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3Muby5vbk5leHQoeCk7IH07XG4gICAgQ29uY2F0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vLm9uRXJyb3IoZSk7IH07XG4gICAgQ29uY2F0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fcy5pKys7IHRoaXMuX2ZuKHRoaXMuX3MpOyB9O1xuXG4gICAgcmV0dXJuIENvbmNhdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgQ29uY2F0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb25jYXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbmNhdE9ic2VydmFibGUoc291cmNlcykge1xuICAgICAgdGhpcy5fc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZVJlY3Vyc2l2ZSAoc3RhdGUsIHJlY3Vyc2UpIHtcbiAgICAgIGlmIChzdGF0ZS5kaXNwb3NhYmxlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICBpZiAoc3RhdGUuaSA9PT0gc3RhdGUuc291cmNlcy5sZW5ndGgpIHsgcmV0dXJuIHN0YXRlLm8ub25Db21wbGV0ZWQoKTsgfVxuXG4gICAgICAvLyBDaGVjayBpZiBwcm9taXNlXG4gICAgICB2YXIgY3VycmVudFZhbHVlID0gc3RhdGUuc291cmNlc1tzdGF0ZS5pXTtcbiAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBzdGF0ZS5zdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKG5ldyBDb25jYXRPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkpKTtcbiAgICB9XG5cbiAgICBDb25jYXRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgZGlzcG9zYWJsZSA9IGRpc3Bvc2FibGVDcmVhdGUobm9vcCk7XG4gICAgICB2YXIgc3RhdGUgPSB7XG4gICAgICAgIG86IG8sXG4gICAgICAgIGk6IDAsXG4gICAgICAgIHN1YnNjcmlwdGlvbjogc3Vic2NyaXB0aW9uLFxuICAgICAgICBkaXNwb3NhYmxlOiBkaXNwb3NhYmxlLFxuICAgICAgICBzb3VyY2VzOiB0aGlzLl9zb3VyY2VzXG4gICAgICB9O1xuXG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IGltbWVkaWF0ZVNjaGVkdWxlci5zY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgc2NoZWR1bGVSZWN1cnNpdmUpO1xuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBkaXNwb3NhYmxlLCBjYW5jZWxhYmxlXSk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb25jYXRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqIENvbmNhdGVuYXRlcyBhbGwgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byBjb25jYXQgdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGVhY2ggZ2l2ZW4gc2VxdWVuY2UsIGluIHNlcXVlbnRpYWwgb3JkZXIuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZUNvbmNhdCA9IE9ic2VydmFibGUuY29uY2F0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IENvbmNhdE9ic2VydmFibGUoYXJncyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENvbmNhdGVuYXRlcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBlYWNoIG9ic2VydmVkIGlubmVyIHNlcXVlbmNlLCBpbiBzZXF1ZW50aWFsIG9yZGVyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmNvbmNhdEFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXJnZSgxKTtcbiAgfTtcblxuICB2YXIgTWVyZ2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNZXJnZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNZXJnZU9ic2VydmFibGUoc291cmNlLCBtYXhDb25jdXJyZW50KSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMubWF4Q29uY3VycmVudCA9IG1heENvbmN1cnJlbnQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBNZXJnZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgdmFyIGcgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgZy5hZGQodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZU9ic2VydmVyKG9ic2VydmVyLCB0aGlzLm1heENvbmN1cnJlbnQsIGcpKSk7XG4gICAgICByZXR1cm4gZztcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE1lcmdlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGZ1bmN0aW9uIE1lcmdlT2JzZXJ2ZXIobywgbWF4LCBnKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5tYXggPSBtYXg7XG4gICAgICB0aGlzLmcgPSBnO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgICB0aGlzLnEgPSBbXTtcbiAgICAgIHRoaXMuYWN0aXZlQ291bnQgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoTWVyZ2VPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmhhbmRsZVN1YnNjcmliZSA9IGZ1bmN0aW9uICh4cykge1xuICAgICAgdmFyIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5nLmFkZChzYWQpO1xuICAgICAgaXNQcm9taXNlKHhzKSAmJiAoeHMgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoeHMpKTtcbiAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHhzLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcih0aGlzLCBzYWQpKSk7XG4gICAgfTtcblxuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaW5uZXJTb3VyY2UpIHtcbiAgICAgIGlmKHRoaXMuYWN0aXZlQ291bnQgPCB0aGlzLm1heCkge1xuICAgICAgICB0aGlzLmFjdGl2ZUNvdW50Kys7XG4gICAgICAgIHRoaXMuaGFuZGxlU3Vic2NyaWJlKGlubmVyU291cmNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucS5wdXNoKGlubmVyU291cmNlKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIE1lcmdlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5vLm9uRXJyb3IoZSk7IH07XG4gICAgTWVyZ2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLmRvbmUgPSB0cnVlOyB0aGlzLmFjdGl2ZUNvdW50ID09PSAwICYmIHRoaXMuby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihwYXJlbnQsIHNhZCkge1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0aGlzLnNhZCA9IHNhZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5wYXJlbnQuby5vbk5leHQoeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLnBhcmVudC5vLm9uRXJyb3IoZSk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wYXJlbnQuZy5yZW1vdmUodGhpcy5zYWQpO1xuICAgICAgaWYgKHRoaXMucGFyZW50LnEubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLnBhcmVudC5oYW5kbGVTdWJzY3JpYmUodGhpcy5wYXJlbnQucS5zaGlmdCgpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGFyZW50LmFjdGl2ZUNvdW50LS07XG4gICAgICAgIHRoaXMucGFyZW50LmRvbmUgJiYgdGhpcy5wYXJlbnQuYWN0aXZlQ291bnQgPT09IDAgJiYgdGhpcy5wYXJlbnQuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gTWVyZ2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogTWVyZ2VzIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLCBsaW1pdGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgc3Vic2NyaXB0aW9ucyB0byBpbm5lciBzZXF1ZW5jZXMuXG4gICogT3IgbWVyZ2VzIHR3byBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGEgc2luZ2xlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHBhcmFtIHtNaXhlZH0gW21heENvbmN1cnJlbnRPck90aGVyXSBNYXhpbXVtIG51bWJlciBvZiBpbm5lciBvYnNlcnZhYmxlIHNlcXVlbmNlcyBiZWluZyBzdWJzY3JpYmVkIHRvIGNvbmN1cnJlbnRseSBvciB0aGUgc2Vjb25kIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgbWVyZ2VzIHRoZSBlbGVtZW50cyBvZiB0aGUgaW5uZXIgc2VxdWVuY2VzLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWVyZ2UgPSBmdW5jdGlvbiAobWF4Q29uY3VycmVudE9yT3RoZXIpIHtcbiAgICByZXR1cm4gdHlwZW9mIG1heENvbmN1cnJlbnRPck90aGVyICE9PSAnbnVtYmVyJyA/XG4gICAgICBvYnNlcnZhYmxlTWVyZ2UodGhpcywgbWF4Q29uY3VycmVudE9yT3RoZXIpIDpcbiAgICAgIG5ldyBNZXJnZU9ic2VydmFibGUodGhpcywgbWF4Q29uY3VycmVudE9yT3RoZXIpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNZXJnZXMgYWxsIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGEgc2luZ2xlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIFRoZSBzY2hlZHVsZXIgaXMgb3B0aW9uYWwgYW5kIGlmIG5vdCBzcGVjaWZpZWQsIHRoZSBpbW1lZGlhdGUgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IG1lcmdlcyB0aGUgZWxlbWVudHMgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVNZXJnZSA9IE9ic2VydmFibGUubWVyZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjaGVkdWxlciwgc291cmNlcyA9IFtdLCBpLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIGlmICghYXJndW1lbnRzWzBdKSB7XG4gICAgICBzY2hlZHVsZXIgPSBpbW1lZGlhdGVTY2hlZHVsZXI7XG4gICAgICBmb3IoaSA9IDE7IGkgPCBsZW47IGkrKykgeyBzb3VyY2VzLnB1c2goYXJndW1lbnRzW2ldKTsgfVxuICAgIH0gZWxzZSBpZiAoaXNTY2hlZHVsZXIoYXJndW1lbnRzWzBdKSkge1xuICAgICAgc2NoZWR1bGVyID0gYXJndW1lbnRzWzBdO1xuICAgICAgZm9yKGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyO1xuICAgICAgZm9yKGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgc291cmNlcy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICB9XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoc291cmNlc1swXSkpIHtcbiAgICAgIHNvdXJjZXMgPSBzb3VyY2VzWzBdO1xuICAgIH1cbiAgICByZXR1cm4gb2JzZXJ2YWJsZU9mKHNjaGVkdWxlciwgc291cmNlcykubWVyZ2VBbGwoKTtcbiAgfTtcblxuICB2YXIgTWVyZ2VBbGxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNZXJnZUFsbE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNZXJnZUFsbE9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE1lcmdlQWxsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCksIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIGcuYWRkKG0pO1xuICAgICAgbS5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTWVyZ2VBbGxPYnNlcnZlcihvLCBnKSkpO1xuICAgICAgcmV0dXJuIGc7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZUFsbE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgTWVyZ2VBbGxPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgZnVuY3Rpb24gTWVyZ2VBbGxPYnNlcnZlcihvLCBnKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5nID0gZztcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoTWVyZ2VBbGxPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIE1lcmdlQWxsT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbihpbm5lclNvdXJjZSkge1xuICAgICAgdmFyIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5nLmFkZChzYWQpO1xuICAgICAgaXNQcm9taXNlKGlubmVyU291cmNlKSAmJiAoaW5uZXJTb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoaW5uZXJTb3VyY2UpKTtcbiAgICAgIHNhZC5zZXREaXNwb3NhYmxlKGlubmVyU291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcih0aGlzLCBzYWQpKSk7XG4gICAgfTtcblxuICAgIE1lcmdlQWxsT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBNZXJnZUFsbE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuICAgICAgdGhpcy5nLmxlbmd0aCA9PT0gMSAmJiB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihwYXJlbnQsIHNhZCkge1xuICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgICB0aGlzLnNhZCA9IHNhZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMucGFyZW50Lm8ub25OZXh0KHgpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5wYXJlbnQuby5vbkVycm9yKGUpO1xuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5wYXJlbnQuZy5yZW1vdmUodGhpcy5zYWQpO1xuICAgICAgdGhpcy5wYXJlbnQuZG9uZSAmJiB0aGlzLnBhcmVudC5nLmxlbmd0aCA9PT0gMSAmJiB0aGlzLnBhcmVudC5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZUFsbE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiBNZXJnZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgbWVyZ2VzIHRoZSBlbGVtZW50cyBvZiB0aGUgaW5uZXIgc2VxdWVuY2VzLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWVyZ2VBbGwgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBNZXJnZUFsbE9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbiAgdmFyIENvbXBvc2l0ZUVycm9yID0gUnguQ29tcG9zaXRlRXJyb3IgPSBmdW5jdGlvbihlcnJvcnMpIHtcbiAgICB0aGlzLmlubmVyRXJyb3JzID0gZXJyb3JzO1xuICAgIHRoaXMubWVzc2FnZSA9ICdUaGlzIGNvbnRhaW5zIG11bHRpcGxlIGVycm9ycy4gQ2hlY2sgdGhlIGlubmVyRXJyb3JzJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBDb21wb3NpdGVFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG4gIENvbXBvc2l0ZUVycm9yLnByb3RvdHlwZS5uYW1lID0gJ0NvbXBvc2l0ZUVycm9yJztcblxuICB2YXIgTWVyZ2VEZWxheUVycm9yT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNZXJnZURlbGF5RXJyb3JPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSxcbiAgICAgICAgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICBzdGF0ZSA9IHsgaXNTdG9wcGVkOiBmYWxzZSwgZXJyb3JzOiBbXSwgbzogbyB9O1xuXG4gICAgICBncm91cC5hZGQobSk7XG4gICAgICBtLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBNZXJnZURlbGF5RXJyb3JPYnNlcnZlcihncm91cCwgc3RhdGUpKSk7XG5cbiAgICAgIHJldHVybiBncm91cDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTWVyZ2VEZWxheUVycm9yT2JzZXJ2ZXIoZ3JvdXAsIHN0YXRlKSB7XG4gICAgICB0aGlzLl9ncm91cCA9IGdyb3VwO1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldENvbXBsZXRpb24obywgZXJyb3JzKSB7XG4gICAgICBpZiAoZXJyb3JzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICB9IGVsc2UgaWYgKGVycm9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgby5vbkVycm9yKGVycm9yc1swXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvLm9uRXJyb3IobmV3IENvbXBvc2l0ZUVycm9yKGVycm9ycykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBpbm5lciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgdGhpcy5fZ3JvdXAuYWRkKGlubmVyKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIHByb21pc2VzIHN1cHBvcnRcbiAgICAgIGlzUHJvbWlzZSh4KSAmJiAoeCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh4KSk7XG4gICAgICBpbm5lci5zZXREaXNwb3NhYmxlKHguc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKGlubmVyLCB0aGlzLl9ncm91cCwgdGhpcy5fc3RhdGUpKSk7XG4gICAgfTtcblxuICAgIE1lcmdlRGVsYXlFcnJvck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9zdGF0ZS5lcnJvcnMucHVzaChlKTtcbiAgICAgIHRoaXMuX3N0YXRlLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICB0aGlzLl9ncm91cC5sZW5ndGggPT09IDEgJiYgc2V0Q29tcGxldGlvbih0aGlzLl9zdGF0ZS5vLCB0aGlzLl9zdGF0ZS5lcnJvcnMpO1xuICAgIH07XG5cbiAgICBNZXJnZURlbGF5RXJyb3JPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fc3RhdGUuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihpbm5lciwgZ3JvdXAsIHN0YXRlKSB7XG4gICAgICB0aGlzLl9pbm5lciA9IGlubmVyO1xuICAgICAgdGhpcy5fZ3JvdXAgPSBncm91cDtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fc3RhdGUuby5vbk5leHQoeCk7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fc3RhdGUuZXJyb3JzLnB1c2goZSk7XG4gICAgICB0aGlzLl9ncm91cC5yZW1vdmUodGhpcy5faW5uZXIpO1xuICAgICAgdGhpcy5fc3RhdGUuaXNTdG9wcGVkICYmIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9ncm91cC5yZW1vdmUodGhpcy5faW5uZXIpO1xuICAgICAgdGhpcy5fc3RhdGUuaXNTdG9wcGVkICYmIHRoaXMuX2dyb3VwLmxlbmd0aCA9PT0gMSAmJiBzZXRDb21wbGV0aW9uKHRoaXMuX3N0YXRlLm8sIHRoaXMuX3N0YXRlLmVycm9ycyk7XG4gICAgfTtcblxuICAgIHJldHVybiBNZXJnZURlbGF5RXJyb3JPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogRmxhdHRlbnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIE9ic2VydmFibGVzIGludG8gb25lIE9ic2VydmFibGUsIGluIGEgd2F5IHRoYXQgYWxsb3dzIGFuIE9ic2VydmVyIHRvXG4gICogcmVjZWl2ZSBhbGwgc3VjY2Vzc2Z1bGx5IGVtaXR0ZWQgaXRlbXMgZnJvbSBhbGwgb2YgdGhlIHNvdXJjZSBPYnNlcnZhYmxlcyB3aXRob3V0IGJlaW5nIGludGVycnVwdGVkIGJ5XG4gICogYW4gZXJyb3Igbm90aWZpY2F0aW9uIGZyb20gb25lIG9mIHRoZW0uXG4gICpcbiAgKiBUaGlzIGJlaGF2ZXMgbGlrZSBPYnNlcnZhYmxlLnByb3RvdHlwZS5tZXJnZUFsbCBleGNlcHQgdGhhdCBpZiBhbnkgb2YgdGhlIG1lcmdlZCBPYnNlcnZhYmxlcyBub3RpZnkgb2YgYW5cbiAgKiBlcnJvciB2aWEgdGhlIE9ic2VydmVyJ3Mgb25FcnJvciwgbWVyZ2VEZWxheUVycm9yIHdpbGwgcmVmcmFpbiBmcm9tIHByb3BhZ2F0aW5nIHRoYXRcbiAgKiBlcnJvciBub3RpZmljYXRpb24gdW50aWwgYWxsIG9mIHRoZSBtZXJnZWQgT2JzZXJ2YWJsZXMgaGF2ZSBmaW5pc2hlZCBlbWl0dGluZyBpdGVtcy5cbiAgKiBAcGFyYW0ge0FycmF5IHwgQXJndW1lbnRzfSBhcmdzIEFyZ3VtZW50cyBvciBhbiBhcnJheSB0byBtZXJnZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIGFsbCBvZiB0aGUgaXRlbXMgZW1pdHRlZCBieSB0aGUgT2JzZXJ2YWJsZXMgZW1pdHRlZCBieSB0aGUgT2JzZXJ2YWJsZVxuICAqL1xuICBPYnNlcnZhYmxlLm1lcmdlRGVsYXlFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzO1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB9XG4gICAgdmFyIHNvdXJjZSA9IG9ic2VydmFibGVPZihudWxsLCBhcmdzKTtcbiAgICByZXR1cm4gbmV3IE1lcmdlRGVsYXlFcnJvck9ic2VydmFibGUoc291cmNlKTtcbiAgfTtcblxuICAvKipcbiAgICogQ29udGludWVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0ZXJtaW5hdGVkIG5vcm1hbGx5IG9yIGJ5IGFuIGV4Y2VwdGlvbiB3aXRoIHRoZSBuZXh0IG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gc2Vjb25kIFNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlIHVzZWQgdG8gcHJvZHVjZSByZXN1bHRzIGFmdGVyIHRoZSBmaXJzdCBzZXF1ZW5jZSB0ZXJtaW5hdGVzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbmNhdGVuYXRlcyB0aGUgZmlyc3QgYW5kIHNlY29uZCBzZXF1ZW5jZSwgZXZlbiBpZiB0aGUgZmlyc3Qgc2VxdWVuY2UgdGVybWluYXRlcyBleGNlcHRpb25hbGx5LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm9uRXJyb3JSZXN1bWVOZXh0ID0gZnVuY3Rpb24gKHNlY29uZCkge1xuICAgIGlmICghc2Vjb25kKSB7IHRocm93IG5ldyBFcnJvcignU2Vjb25kIG9ic2VydmFibGUgaXMgcmVxdWlyZWQnKTsgfVxuICAgIHJldHVybiBvbkVycm9yUmVzdW1lTmV4dChbdGhpcywgc2Vjb25kXSk7XG4gIH07XG5cbiAgdmFyIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhPbkVycm9yUmVzdW1lTmV4dE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT25FcnJvclJlc3VtZU5leHRPYnNlcnZhYmxlKHNvdXJjZXMpIHtcbiAgICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZU1ldGhvZChzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgaWYgKHN0YXRlLnBvcyA8IHN0YXRlLnNvdXJjZXMubGVuZ3RoKSB7XG4gICAgICAgIHZhciBjdXJyZW50ID0gc3RhdGUuc291cmNlc1tzdGF0ZS5wb3MrK107XG4gICAgICAgIGlzUHJvbWlzZShjdXJyZW50KSAmJiAoY3VycmVudCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShjdXJyZW50KSk7XG4gICAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHN0YXRlLnN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgICBkLnNldERpc3Bvc2FibGUoY3VycmVudC5zdWJzY3JpYmUobmV3IE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIoc3RhdGUsIHJlY3Vyc2UpKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgT25FcnJvclJlc3VtZU5leHRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLFxuICAgICAgICAgIHN0YXRlID0ge3BvczogMCwgc3Vic2NyaXB0aW9uOiBzdWJzY3JpcHRpb24sIG86IG8sIHNvdXJjZXM6IHRoaXMuc291cmNlcyB9LFxuICAgICAgICAgIGNhbmNlbGxhYmxlID0gaW1tZWRpYXRlU2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCBzY2hlZHVsZU1ldGhvZCk7XG5cbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIGNhbmNlbGxhYmxlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gT25FcnJvclJlc3VtZU5leHRPYnNlcnZlcihzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgdGhpcy5fc3RhdGUgPSBzdGF0ZTtcbiAgICAgIHRoaXMuX3JlY3Vyc2UgPSByZWN1cnNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgT25FcnJvclJlc3VtZU5leHRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX3N0YXRlLm8ub25OZXh0KHgpOyB9O1xuICAgIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9yZWN1cnNlKHRoaXMuX3N0YXRlKTsgfTtcbiAgICBPbkVycm9yUmVzdW1lTmV4dE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX3JlY3Vyc2UodGhpcy5fc3RhdGUpOyB9O1xuXG4gICAgcmV0dXJuIE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBDb250aW51ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRlcm1pbmF0ZWQgbm9ybWFsbHkgb3IgYnkgYW4gZXhjZXB0aW9uIHdpdGggdGhlIG5leHQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb25jYXRlbmF0ZXMgdGhlIHNvdXJjZSBzZXF1ZW5jZXMsIGV2ZW4gaWYgYSBzZXF1ZW5jZSB0ZXJtaW5hdGVzIGV4Y2VwdGlvbmFsbHkuXG4gICAqL1xuICB2YXIgb25FcnJvclJlc3VtZU5leHQgPSBPYnNlcnZhYmxlLm9uRXJyb3JSZXN1bWVOZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzb3VyY2VzID0gW107XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgc291cmNlcyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBzb3VyY2VzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgc291cmNlc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IE9uRXJyb3JSZXN1bWVOZXh0T2JzZXJ2YWJsZShzb3VyY2VzKTtcbiAgfTtcblxuICB2YXIgU2tpcFVudGlsT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2tpcFVudGlsT2JzZXJ2YWJsZShzb3VyY2UsIG90aGVyKSB7XG4gICAgICB0aGlzLl9zID0gc291cmNlO1xuICAgICAgdGhpcy5fbyA9IGlzUHJvbWlzZShvdGhlcikgPyBvYnNlcnZhYmxlRnJvbVByb21pc2Uob3RoZXIpIDogb3RoZXI7XG4gICAgICB0aGlzLl9vcGVuID0gZmFsc2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwVW50aWxPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgdmFyIGxlZnRTdWJzY3JpcHRpb24gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIGxlZnRTdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZSh0aGlzLl9zLnN1YnNjcmliZShuZXcgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIobywgdGhpcykpKTtcblxuICAgICAgaXNQcm9taXNlKHRoaXMuX28pICYmICh0aGlzLl9vID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHRoaXMuX28pKTtcblxuICAgICAgdmFyIHJpZ2h0U3Vic2NyaXB0aW9uID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICByaWdodFN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHRoaXMuX28uc3Vic2NyaWJlKG5ldyBTa2lwVW50aWxPdGhlck9ic2VydmVyKG8sIHRoaXMsIHJpZ2h0U3Vic2NyaXB0aW9uKSkpO1xuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUobGVmdFN1YnNjcmlwdGlvbiwgcmlnaHRTdWJzY3JpcHRpb24pO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFVudGlsT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTa2lwVW50aWxTb3VyY2VPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwVW50aWxTb3VyY2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwVW50aWxTb3VyY2VPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcC5fb3BlbiAmJiB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgU2tpcFVudGlsU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGVycik7XG4gICAgfTtcblxuICAgIFNraXBVbnRpbFNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3AuX29wZW4gJiYgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFVudGlsU291cmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIHZhciBTa2lwVW50aWxPdGhlck9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBVbnRpbE90aGVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcFVudGlsT3RoZXJPYnNlcnZlcihvLCBwLCByKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fciA9IHI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwVW50aWxPdGhlck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fcC5fb3BlbiA9IHRydWU7XG4gICAgICB0aGlzLl9yLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgU2tpcFVudGlsT3RoZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZXJyKTtcbiAgICB9O1xuXG4gICAgU2tpcFVudGlsT3RoZXJPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9yLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBVbnRpbE90aGVyT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIG9ic2VydmFibGUgc2VxdWVuY2Ugb25seSBhZnRlciB0aGUgb3RoZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNlcyBhIHZhbHVlLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGUgfCBQcm9taXNlfSBvdGhlciBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBQcm9taXNlIHRoYXQgdHJpZ2dlcnMgcHJvcGFnYXRpb24gb2YgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZSBzdGFydGluZyBmcm9tIHRoZSBwb2ludCB0aGUgb3RoZXIgc2VxdWVuY2UgdHJpZ2dlcmVkIHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNraXBVbnRpbCA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiBuZXcgU2tpcFVudGlsT2JzZXJ2YWJsZSh0aGlzLCBvdGhlcik7XG4gIH07XG5cbiAgdmFyIFN3aXRjaE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU3dpdGNoT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTd2l0Y2hPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTd2l0Y2hPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBpbm5lciA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksIHMgPSB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFN3aXRjaE9ic2VydmVyKG8sIGlubmVyKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUocywgaW5uZXIpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhTd2l0Y2hPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gU3dpdGNoT2JzZXJ2ZXIobywgaW5uZXIpIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLmlubmVyID0gaW5uZXI7XG4gICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGF0ZXN0ID0gMDtcbiAgICAgIHRoaXMuaGFzTGF0ZXN0ID0gZmFsc2U7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3dpdGNoT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoaW5uZXJTb3VyY2UpIHtcbiAgICAgIHZhciBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksIGlkID0gKyt0aGlzLmxhdGVzdDtcbiAgICAgIHRoaXMuaGFzTGF0ZXN0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW5uZXIuc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGlzUHJvbWlzZShpbm5lclNvdXJjZSkgJiYgKGlubmVyU291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGlubmVyU291cmNlKSk7XG4gICAgICBkLnNldERpc3Bvc2FibGUoaW5uZXJTb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHRoaXMsIGlkKSkpO1xuICAgIH07XG5cbiAgICBTd2l0Y2hPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFN3aXRjaE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgIXRoaXMuaGFzTGF0ZXN0ICYmIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKHBhcmVudCwgaWQpIHtcbiAgICAgIHRoaXMucGFyZW50ID0gcGFyZW50O1xuICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCAmJiB0aGlzLnBhcmVudC5vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5wYXJlbnQubGF0ZXN0ID09PSB0aGlzLmlkICYmIHRoaXMucGFyZW50Lm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMucGFyZW50LmxhdGVzdCA9PT0gdGhpcy5pZCkge1xuICAgICAgICB0aGlzLnBhcmVudC5oYXNMYXRlc3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXJlbnQuc3RvcHBlZCAmJiB0aGlzLnBhcmVudC5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBTd2l0Y2hPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogVHJhbnNmb3JtcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNpbmcgdmFsdWVzIG9ubHkgZnJvbSB0aGUgbW9zdCByZWNlbnQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBhdCBhbnkgcG9pbnQgaW4gdGltZSBwcm9kdWNlcyB0aGUgZWxlbWVudHMgb2YgdGhlIG1vc3QgcmVjZW50IGlubmVyIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBoYXMgYmVlbiByZWNlaXZlZC5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvWydzd2l0Y2gnXSA9IG9ic2VydmFibGVQcm90by5zd2l0Y2hMYXRlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTd2l0Y2hPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBUYWtlVW50aWxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VVbnRpbE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBUYWtlVW50aWxPYnNlcnZhYmxlKHNvdXJjZSwgb3RoZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5vdGhlciA9IGlzUHJvbWlzZShvdGhlcikgPyBvYnNlcnZhYmxlRnJvbVByb21pc2Uob3RoZXIpIDogb3RoZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlVW50aWxPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobyksXG4gICAgICAgIHRoaXMub3RoZXIuc3Vic2NyaWJlKG5ldyBUYWtlVW50aWxPYnNlcnZlcihvKSlcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlVW50aWxPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRha2VVbnRpbE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VVbnRpbE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRha2VVbnRpbE9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZVVudGlsT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIFRha2VVbnRpbE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlcnIpO1xuICAgIH07XG5cbiAgICBUYWtlVW50aWxPYnNlcnZlci5wcm90b3R5cGUub25Db21wbGV0ZWQgPSBub29wO1xuXG4gICAgcmV0dXJuIFRha2VVbnRpbE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHVudGlsIHRoZSBvdGhlciBvYnNlcnZhYmxlIHNlcXVlbmNlIHByb2R1Y2VzIGEgdmFsdWUuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZSB8IFByb21pc2V9IG90aGVyIE9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHRlcm1pbmF0ZXMgcHJvcGFnYXRpb24gb2YgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgZWxlbWVudHMgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZSB1cCB0byB0aGUgcG9pbnQgdGhlIG90aGVyIHNlcXVlbmNlIGludGVycnVwdGVkIGZ1cnRoZXIgcHJvcGFnYXRpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZVVudGlsID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIG5ldyBUYWtlVW50aWxPYnNlcnZhYmxlKHRoaXMsIG90aGVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBmYWxzZUZhY3RvcnkoKSB7IHJldHVybiBmYWxzZTsgfVxuICBmdW5jdGlvbiBhcmd1bWVudHNUb0FycmF5KCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIHZhciBXaXRoTGF0ZXN0RnJvbU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoV2l0aExhdGVzdEZyb21PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZShzb3VyY2UsIHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgICB0aGlzLl9zID0gc291cmNlO1xuICAgICAgdGhpcy5fc3MgPSBzb3VyY2VzO1xuICAgICAgdGhpcy5fY2IgPSByZXN1bHRTZWxlY3RvcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbGVuID0gdGhpcy5fc3MubGVuZ3RoO1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBoYXNWYWx1ZTogYXJyYXlJbml0aWFsaXplKGxlbiwgZmFsc2VGYWN0b3J5KSxcbiAgICAgICAgaGFzVmFsdWVBbGw6IGZhbHNlLFxuICAgICAgICB2YWx1ZXM6IG5ldyBBcnJheShsZW4pXG4gICAgICB9O1xuXG4gICAgICB2YXIgbiA9IHRoaXMuX3NzLmxlbmd0aCwgc3Vic2NyaXB0aW9ucyA9IG5ldyBBcnJheShuICsgMSk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgb3RoZXIgPSB0aGlzLl9zc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIGlzUHJvbWlzZShvdGhlcikgJiYgKG90aGVyID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKG90aGVyKSk7XG4gICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKG90aGVyLnN1YnNjcmliZShuZXcgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyKG8sIGksIHN0YXRlKSkpO1xuICAgICAgICBzdWJzY3JpcHRpb25zW2ldID0gc2FkO1xuICAgICAgfVxuXG4gICAgICB2YXIgb3V0ZXJTYWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIG91dGVyU2FkLnNldERpc3Bvc2FibGUodGhpcy5fcy5zdWJzY3JpYmUobmV3IFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIobywgdGhpcy5fY2IsIHN0YXRlKSkpO1xuICAgICAgc3Vic2NyaXB0aW9uc1tuXSA9IG91dGVyU2FkO1xuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV2l0aExhdGVzdEZyb21PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlcihvLCBpLCBzdGF0ZSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fc3RhdGUudmFsdWVzW3RoaXMuX2ldID0geDtcbiAgICAgIHRoaXMuX3N0YXRlLmhhc1ZhbHVlW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsID0gdGhpcy5fc3RhdGUuaGFzVmFsdWUuZXZlcnkoaWRlbnRpdHkpO1xuICAgIH07XG5cbiAgICBXaXRoTGF0ZXN0RnJvbU90aGVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgV2l0aExhdGVzdEZyb21PdGhlck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBub29wO1xuXG4gICAgcmV0dXJuIFdpdGhMYXRlc3RGcm9tT3RoZXJPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgdmFyIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlcihvLCBjYiwgc3RhdGUpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBXaXRoTGF0ZXN0RnJvbVNvdXJjZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBhbGxWYWx1ZXMgPSBbeF0uY29uY2F0KHRoaXMuX3N0YXRlLnZhbHVlcyk7XG4gICAgICBpZiAoIXRoaXMuX3N0YXRlLmhhc1ZhbHVlQWxsKSB7IHJldHVybjsgfVxuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX2NiKS5hcHBseShudWxsLCBhbGxWYWx1ZXMpO1xuICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgfTtcblxuICAgIFdpdGhMYXRlc3RGcm9tU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gV2l0aExhdGVzdEZyb21Tb3VyY2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIE1lcmdlcyB0aGUgc3BlY2lmaWVkIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgdXNpbmcgdGhlIHNlbGVjdG9yIGZ1bmN0aW9uIG9ubHkgd2hlbiB0aGUgKGZpcnN0KSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNlcyBhbiBlbGVtZW50LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2VzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLndpdGhMYXRlc3RGcm9tID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSB7IHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhcmd1bWVudHMnKTsgfVxuXG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHZhciByZXN1bHRTZWxlY3RvciA9IGlzRnVuY3Rpb24oYXJnc1tsZW4gLSAxXSkgPyBhcmdzLnBvcCgpIDogYXJndW1lbnRzVG9BcnJheTtcbiAgICBBcnJheS5pc0FycmF5KGFyZ3NbMF0pICYmIChhcmdzID0gYXJnc1swXSk7XG5cbiAgICByZXR1cm4gbmV3IFdpdGhMYXRlc3RGcm9tT2JzZXJ2YWJsZSh0aGlzLCBhcmdzLCByZXN1bHRTZWxlY3Rvcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgZnVuY3Rpb24gZW1wdHlBcnJheUZhY3RvcnkoKSB7IHJldHVybiBbXTsgfVxuXG4gIHZhciBaaXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFppcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gWmlwT2JzZXJ2YWJsZShzb3VyY2VzLCByZXN1bHRTZWxlY3Rvcikge1xuICAgICAgdGhpcy5fcyA9IHNvdXJjZXM7XG4gICAgICB0aGlzLl9jYiA9IHJlc3VsdFNlbGVjdG9yO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgWmlwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG9ic2VydmVyKSB7XG4gICAgICB2YXIgbiA9IHRoaXMuX3MubGVuZ3RoLFxuICAgICAgICAgIHN1YnNjcmlwdGlvbnMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgICAgZG9uZSA9IGFycmF5SW5pdGlhbGl6ZShuLCBmYWxzZUZhY3RvcnkpLFxuICAgICAgICAgIHEgPSBhcnJheUluaXRpYWxpemUobiwgZW1wdHlBcnJheUZhY3RvcnkpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICB2YXIgc291cmNlID0gdGhpcy5fc1tpXSwgc2FkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbnNbaV0gPSBzYWQ7XG4gICAgICAgIGlzUHJvbWlzZShzb3VyY2UpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uoc291cmNlKSk7XG4gICAgICAgIHNhZC5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUobmV3IFppcE9ic2VydmVyKG9ic2VydmVyLCBpLCB0aGlzLCBxLCBkb25lKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IE5BcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gWmlwT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBaaXBPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoWmlwT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gWmlwT2JzZXJ2ZXIobywgaSwgcCwgcSwgZCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fcSA9IHE7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG5vdEVtcHR5KHgpIHsgcmV0dXJuIHgubGVuZ3RoID4gMDsgfVxuICAgIGZ1bmN0aW9uIHNoaWZ0RWFjaCh4KSB7IHJldHVybiB4LnNoaWZ0KCk7IH1cbiAgICBmdW5jdGlvbiBub3RUaGVTYW1lKGkpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoeCwgaikge1xuICAgICAgICByZXR1cm4gaiAhPT0gaTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgWmlwT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdGhpcy5fcVt0aGlzLl9pXS5wdXNoKHgpO1xuICAgICAgaWYgKHRoaXMuX3EuZXZlcnkobm90RW1wdHkpKSB7XG4gICAgICAgIHZhciBxdWV1ZWRWYWx1ZXMgPSB0aGlzLl9xLm1hcChzaGlmdEVhY2gpO1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcC5fY2IpLmFwcGx5KG51bGwsIHF1ZXVlZFZhbHVlcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2QuZmlsdGVyKG5vdFRoZVNhbWUodGhpcy5faSkpLmV2ZXJ5KGlkZW50aXR5KSkge1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIFppcE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFppcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9kW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2QuZXZlcnkoaWRlbnRpdHkpICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFppcE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYWxsIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBhbiBhcnJheSBoYXZlIHByb2R1Y2VkIGFuIGVsZW1lbnQgYXQgYSBjb3JyZXNwb25kaW5nIGluZGV4LlxuICAgKiBUaGUgbGFzdCBlbGVtZW50IGluIHRoZSBhcmd1bWVudHMgbXVzdCBiZSBhIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZWFjaCBzZXJpZXMgb2YgZWxlbWVudHMgYXQgY29ycmVzcG9uZGluZyBpbmRleGVzIGluIHRoZSBhcmdzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgY29tYmluaW5nIGVsZW1lbnRzIG9mIHRoZSBhcmdzIHVzaW5nIHRoZSBzcGVjaWZpZWQgcmVzdWx0IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnppcCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoJ2ludmFsaWQgYXJndW1lbnRzJyk7IH1cblxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKGFyZ3NbbGVuIC0gMV0pID8gYXJncy5wb3AoKSA6IGFyZ3VtZW50c1RvQXJyYXk7XG4gICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuXG4gICAgdmFyIHBhcmVudCA9IHRoaXM7XG4gICAgYXJncy51bnNoaWZ0KHBhcmVudCk7XG5cbiAgICByZXR1cm4gbmV3IFppcE9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNZXJnZXMgdGhlIHNwZWNpZmllZCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGJ5IHVzaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aGVuZXZlciBhbGwgb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2VzIGhhdmUgcHJvZHVjZWQgYW4gZWxlbWVudCBhdCBhIGNvcnJlc3BvbmRpbmcgaW5kZXguXG4gICAqIEBwYXJhbSBhcmd1bWVudHMgT2JzZXJ2YWJsZSBzb3VyY2VzLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXN1bHRTZWxlY3RvciBGdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggc2VyaWVzIG9mIGVsZW1lbnRzIGF0IGNvcnJlc3BvbmRpbmcgaW5kZXhlcyBpbiB0aGUgc291cmNlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGNvbWJpbmluZyBlbGVtZW50cyBvZiB0aGUgc291cmNlcyB1c2luZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIE9ic2VydmFibGUuemlwID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzWzBdKSkge1xuICAgICAgYXJncyA9IGlzRnVuY3Rpb24oYXJnc1sxXSkgPyBhcmdzWzBdLmNvbmNhdChhcmdzWzFdKSA6IGFyZ3NbMF07XG4gICAgfVxuICAgIHZhciBmaXJzdCA9IGFyZ3Muc2hpZnQoKTtcbiAgICByZXR1cm4gZmlyc3QuemlwLmFwcGx5KGZpcnN0LCBhcmdzKTtcbiAgfTtcblxuZnVuY3Rpb24gZmFsc2VGYWN0b3J5KCkgeyByZXR1cm4gZmFsc2U7IH1cbmZ1bmN0aW9uIGVtcHR5QXJyYXlGYWN0b3J5KCkgeyByZXR1cm4gW107IH1cbmZ1bmN0aW9uIGFyZ3VtZW50c1RvQXJyYXkoKSB7XG4gIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gIHJldHVybiBhcmdzO1xufVxuXG52YXIgWmlwSXRlcmFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICBpbmhlcml0cyhaaXBJdGVyYWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gIGZ1bmN0aW9uIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZShzb3VyY2VzLCBjYikge1xuICAgIHRoaXMuc291cmNlcyA9IHNvdXJjZXM7XG4gICAgdGhpcy5fY2IgPSBjYjtcbiAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgfVxuXG4gIFppcEl0ZXJhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgdmFyIHNvdXJjZXMgPSB0aGlzLnNvdXJjZXMsIGxlbiA9IHNvdXJjZXMubGVuZ3RoLCBzdWJzY3JpcHRpb25zID0gbmV3IEFycmF5KGxlbik7XG5cbiAgICB2YXIgc3RhdGUgPSB7XG4gICAgICBxOiBhcnJheUluaXRpYWxpemUobGVuLCBlbXB0eUFycmF5RmFjdG9yeSksXG4gICAgICBkb25lOiBhcnJheUluaXRpYWxpemUobGVuLCBmYWxzZUZhY3RvcnkpLFxuICAgICAgY2I6IHRoaXMuX2NiLFxuICAgICAgbzogb1xuICAgIH07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHNvdXJjZXNbaV0sIHNhZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAoaXNBcnJheUxpa2Uoc291cmNlKSB8fCBpc0l0ZXJhYmxlKHNvdXJjZSkpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbShzb3VyY2UpKTtcblxuICAgICAgICBzdWJzY3JpcHRpb25zW2ldID0gc2FkO1xuICAgICAgICBzYWQuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKG5ldyBaaXBJdGVyYWJsZU9ic2VydmVyKHN0YXRlLCBpKSkpO1xuICAgICAgfShpKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb25zKTtcbiAgfTtcblxuICByZXR1cm4gWmlwSXRlcmFibGVPYnNlcnZhYmxlO1xufShPYnNlcnZhYmxlQmFzZSkpO1xuXG52YXIgWmlwSXRlcmFibGVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gIGluaGVyaXRzKFppcEl0ZXJhYmxlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gIGZ1bmN0aW9uIFppcEl0ZXJhYmxlT2JzZXJ2ZXIocywgaSkge1xuICAgIHRoaXMuX3MgPSBzO1xuICAgIHRoaXMuX2kgPSBpO1xuICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICB9XG5cbiAgZnVuY3Rpb24gbm90RW1wdHkoeCkgeyByZXR1cm4geC5sZW5ndGggPiAwOyB9XG4gIGZ1bmN0aW9uIHNoaWZ0RWFjaCh4KSB7IHJldHVybiB4LnNoaWZ0KCk7IH1cbiAgZnVuY3Rpb24gbm90VGhlU2FtZShpKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICh4LCBqKSB7XG4gICAgICByZXR1cm4gaiAhPT0gaTtcbiAgICB9O1xuICB9XG5cbiAgWmlwSXRlcmFibGVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgdGhpcy5fcy5xW3RoaXMuX2ldLnB1c2goeCk7XG4gICAgaWYgKHRoaXMuX3MucS5ldmVyeShub3RFbXB0eSkpIHtcbiAgICAgIHZhciBxdWV1ZWRWYWx1ZXMgPSB0aGlzLl9zLnEubWFwKHNoaWZ0RWFjaCksXG4gICAgICAgICAgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcy5jYikuYXBwbHkobnVsbCwgcXVldWVkVmFsdWVzKTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9zLm8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuX3Muby5vbk5leHQocmVzKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3MuZG9uZS5maWx0ZXIobm90VGhlU2FtZSh0aGlzLl9pKSkuZXZlcnkoaWRlbnRpdHkpKSB7XG4gICAgICB0aGlzLl9zLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9XG4gIH07XG5cbiAgWmlwSXRlcmFibGVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9zLm8ub25FcnJvcihlKTsgfTtcblxuICBaaXBJdGVyYWJsZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fcy5kb25lW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICB0aGlzLl9zLmRvbmUuZXZlcnkoaWRlbnRpdHkpICYmIHRoaXMuX3Muby5vbkNvbXBsZXRlZCgpO1xuICB9O1xuXG4gIHJldHVybiBaaXBJdGVyYWJsZU9ic2VydmVyO1xufShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbi8qKlxuICogTWVyZ2VzIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSB1c2luZyB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2hlbmV2ZXIgYWxsIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlcyBvciBhbiBhcnJheSBoYXZlIHByb2R1Y2VkIGFuIGVsZW1lbnQgYXQgYSBjb3JyZXNwb25kaW5nIGluZGV4LlxuICogVGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgYXJndW1lbnRzIG11c3QgYmUgYSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggc2VyaWVzIG9mIGVsZW1lbnRzIGF0IGNvcnJlc3BvbmRpbmcgaW5kZXhlcyBpbiB0aGUgYXJncy5cbiAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBjb21iaW5pbmcgZWxlbWVudHMgb2YgdGhlIGFyZ3MgdXNpbmcgdGhlIHNwZWNpZmllZCByZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24uXG4gKi9cbm9ic2VydmFibGVQcm90by56aXBJdGVyYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHsgdGhyb3cgbmV3IEVycm9yKCdpbnZhbGlkIGFyZ3VtZW50cycpOyB9XG5cbiAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgdmFyIHJlc3VsdFNlbGVjdG9yID0gaXNGdW5jdGlvbihhcmdzW2xlbiAtIDFdKSA/IGFyZ3MucG9wKCkgOiBhcmd1bWVudHNUb0FycmF5O1xuXG4gIHZhciBwYXJlbnQgPSB0aGlzO1xuICBhcmdzLnVuc2hpZnQocGFyZW50KTtcbiAgcmV0dXJuIG5ldyBaaXBJdGVyYWJsZU9ic2VydmFibGUoYXJncywgcmVzdWx0U2VsZWN0b3IpO1xufTtcblxuICBmdW5jdGlvbiBhc09ic2VydmFibGUoc291cmNlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHN1YnNjcmliZShvKSB7IHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG8pOyB9O1xuICB9XG5cbiAgLyoqXG4gICAqICBIaWRlcyB0aGUgaWRlbnRpdHkgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBoaWRlcyB0aGUgaWRlbnRpdHkgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5hc09ic2VydmFibGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGFzT2JzZXJ2YWJsZSh0aGlzKSwgdGhpcyk7XG4gIH07XG5cbiAgZnVuY3Rpb24gdG9BcnJheSh4KSB7IHJldHVybiB4LnRvQXJyYXkoKTsgfVxuICBmdW5jdGlvbiBub3RFbXB0eSh4KSB7IHJldHVybiB4Lmxlbmd0aCA+IDA7IH1cblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gemVybyBvciBtb3JlIGJ1ZmZlcnMgd2hpY2ggYXJlIHByb2R1Y2VkIGJhc2VkIG9uIGVsZW1lbnQgY291bnQgaW5mb3JtYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBMZW5ndGggb2YgZWFjaCBidWZmZXIuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBbc2tpcF0gTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYmV0d2VlbiBjcmVhdGlvbiBvZiBjb25zZWN1dGl2ZSBidWZmZXJzLiBJZiBub3QgcHJvdmlkZWQsIGRlZmF1bHRzIHRvIHRoZSBjb3VudC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgYnVmZmVycy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5idWZmZXJXaXRoQ291bnQgPSBmdW5jdGlvbiAoY291bnQsIHNraXApIHtcbiAgICB0eXBlb2Ygc2tpcCAhPT0gJ251bWJlcicgJiYgKHNraXAgPSBjb3VudCk7XG4gICAgcmV0dXJuIHRoaXMud2luZG93V2l0aENvdW50KGNvdW50LCBza2lwKVxuICAgICAgLmZsYXRNYXAodG9BcnJheSlcbiAgICAgIC5maWx0ZXIobm90RW1wdHkpO1xuICB9O1xuXG4gIHZhciBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVtYXRlcmlhbGl6ZU9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IERlbWF0ZXJpYWxpemVPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEZW1hdGVyaWFsaXplT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBEZW1hdGVyaWFsaXplT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERlbWF0ZXJpYWxpemVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIERlbWF0ZXJpYWxpemVPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlbWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHguYWNjZXB0KHRoaXMuX28pOyB9O1xuICAgIERlbWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgRGVtYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBEZW1hdGVyaWFsaXplT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBEZW1hdGVyaWFsaXplcyB0aGUgZXhwbGljaXQgbm90aWZpY2F0aW9uIHZhbHVlcyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIGltcGxpY2l0IG5vdGlmaWNhdGlvbnMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGV4aGliaXRpbmcgdGhlIGJlaGF2aW9yIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZSdzIG5vdGlmaWNhdGlvbiB2YWx1ZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZGVtYXRlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IERlbWF0ZXJpYWxpemVPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIHZhciBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2YWJsZShzb3VyY2UsIGtleUZuLCBjb21wYXJlcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmtleUZuID0ga2V5Rm47XG4gICAgICB0aGlzLmNvbXBhcmVyID0gY29tcGFyZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlcihvLCB0aGlzLmtleUZuLCB0aGlzLmNvbXBhcmVyKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERpc3RpbmN0VW50aWxDaGFuZ2VkT2JzZXJ2ZXIobywga2V5Rm4sIGNvbXBhcmVyKSB7XG4gICAgICB0aGlzLm8gPSBvO1xuICAgICAgdGhpcy5rZXlGbiA9IGtleUZuO1xuICAgICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyO1xuICAgICAgdGhpcy5oYXNDdXJyZW50S2V5ID0gZmFsc2U7XG4gICAgICB0aGlzLmN1cnJlbnRLZXkgPSBudWxsO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIga2V5ID0geCwgY29tcGFyZXJFcXVhbHM7XG4gICAgICBpZiAoaXNGdW5jdGlvbih0aGlzLmtleUZuKSkge1xuICAgICAgICBrZXkgPSB0cnlDYXRjaCh0aGlzLmtleUZuKSh4KTtcbiAgICAgICAgaWYgKGtleSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuby5vbkVycm9yKGtleS5lKTsgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzQ3VycmVudEtleSkge1xuICAgICAgICBjb21wYXJlckVxdWFscyA9IHRyeUNhdGNoKHRoaXMuY29tcGFyZXIpKHRoaXMuY3VycmVudEtleSwga2V5KTtcbiAgICAgICAgaWYgKGNvbXBhcmVyRXF1YWxzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3IoY29tcGFyZXJFcXVhbHMuZSk7IH1cbiAgICAgIH1cbiAgICAgIGlmICghdGhpcy5oYXNDdXJyZW50S2V5IHx8ICFjb21wYXJlckVxdWFscykge1xuICAgICAgICB0aGlzLmhhc0N1cnJlbnRLZXkgPSB0cnVlO1xuICAgICAgICB0aGlzLmN1cnJlbnRLZXkgPSBrZXk7XG4gICAgICAgIHRoaXMuby5vbk5leHQoeCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuICAgIH07XG4gICAgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBEaXN0aW5jdFVudGlsQ2hhbmdlZE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiAgUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgb25seSBkaXN0aW5jdCBjb250aWd1b3VzIGVsZW1lbnRzIGFjY29yZGluZyB0byB0aGUga2V5Rm4gYW5kIHRoZSBjb21wYXJlci5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBba2V5Rm5dIEEgZnVuY3Rpb24gdG8gY29tcHV0ZSB0aGUgY29tcGFyaXNvbiBrZXkgZm9yIGVhY2ggZWxlbWVudC4gSWYgbm90IHByb3ZpZGVkLCBpdCBwcm9qZWN0cyB0aGUgdmFsdWUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmVyXSBFcXVhbGl0eSBjb21wYXJlciBmb3IgY29tcHV0ZWQga2V5IHZhbHVlcy4gSWYgbm90IHByb3ZpZGVkLCBkZWZhdWx0cyB0byBhbiBlcXVhbGl0eSBjb21wYXJlciBmdW5jdGlvbi5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvbmx5IGNvbnRhaW5pbmcgdGhlIGRpc3RpbmN0IGNvbnRpZ3VvdXMgZWxlbWVudHMsIGJhc2VkIG9uIGEgY29tcHV0ZWQga2V5IHZhbHVlLCBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5kaXN0aW5jdFVudGlsQ2hhbmdlZCA9IGZ1bmN0aW9uIChrZXlGbiwgY29tcGFyZXIpIHtcbiAgICBjb21wYXJlciB8fCAoY29tcGFyZXIgPSBkZWZhdWx0Q29tcGFyZXIpO1xuICAgIHJldHVybiBuZXcgRGlzdGluY3RVbnRpbENoYW5nZWRPYnNlcnZhYmxlKHRoaXMsIGtleUZuLCBjb21wYXJlcik7XG4gIH07XG5cbiAgdmFyIFRhcE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFwT2JzZXJ2YWJsZSxfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRhcE9ic2VydmFibGUoc291cmNlLCBvYnNlcnZlck9yT25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9vTiA9IG9ic2VydmVyT3JPbk5leHQ7XG4gICAgICB0aGlzLl9vRSA9IG9uRXJyb3I7XG4gICAgICB0aGlzLl9vQyA9IG9uQ29tcGxldGVkO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFwT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobywgdGhpcykpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcbiAgICBmdW5jdGlvbiBJbm5lck9ic2VydmVyKG8sIHApIHtcbiAgICAgIHRoaXMubyA9IG87XG4gICAgICB0aGlzLnQgPSAhcC5fb04gfHwgaXNGdW5jdGlvbihwLl9vTikgP1xuICAgICAgICBvYnNlcnZlckNyZWF0ZShwLl9vTiB8fCBub29wLCBwLl9vRSB8fCBub29wLCBwLl9vQyB8fCBub29wKSA6XG4gICAgICAgIHAuX29OO1xuICAgICAgdGhpcy5pc1N0b3BwZWQgPSBmYWxzZTtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uKHgpIHtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLnQub25OZXh0KS5jYWxsKHRoaXMudCwgeCk7XG4gICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyB0aGlzLm8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuby5vbk5leHQoeCk7XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uKGVycikge1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMudC5vbkVycm9yKS5jYWxsKHRoaXMudCwgZXJyKTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuby5vbkVycm9yKGVycik7XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLnQub25Db21wbGV0ZWQpLmNhbGwodGhpcy50KTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLm8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFwT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqICBJbnZva2VzIGFuIGFjdGlvbiBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCBpbnZva2VzIGFuIGFjdGlvbiB1cG9uIGdyYWNlZnVsIG9yIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG4gICogQHBhcmFtIHtGdW5jdGlvbiB8IE9ic2VydmVyfSBvYnNlcnZlck9yT25OZXh0IEFjdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBhbiBvLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IFtvbkVycm9yXSAgQWN0aW9uIHRvIGludm9rZSB1cG9uIGV4Y2VwdGlvbmFsIHRlcm1pbmF0aW9uIG9mIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLiBVc2VkIGlmIG9ubHkgdGhlIG9ic2VydmVyT3JPbk5leHQgcGFyYW1ldGVyIGlzIGFsc28gYSBmdW5jdGlvbi5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb25Db21wbGV0ZWRdICBBY3Rpb24gdG8gaW52b2tlIHVwb24gZ3JhY2VmdWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuIFVzZWQgaWYgb25seSB0aGUgb2JzZXJ2ZXJPck9uTmV4dCBwYXJhbWV0ZXIgaXMgYWxzbyBhIGZ1bmN0aW9uLlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHdpdGggdGhlIHNpZGUtZWZmZWN0aW5nIGJlaGF2aW9yIGFwcGxpZWQuXG4gICovXG4gIG9ic2VydmFibGVQcm90b1snZG8nXSA9IG9ic2VydmFibGVQcm90by50YXAgPSBvYnNlcnZhYmxlUHJvdG8uZG9BY3Rpb24gPSBmdW5jdGlvbiAob2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpIHtcbiAgICByZXR1cm4gbmV3IFRhcE9ic2VydmFibGUodGhpcywgb2JzZXJ2ZXJPck9uTmV4dCwgb25FcnJvciwgb25Db21wbGV0ZWQpO1xuICB9O1xuXG4gIC8qKlxuICAqICBJbnZva2VzIGFuIGFjdGlvbiBmb3IgZWFjaCBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqICBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCBmb3IgZGVidWdnaW5nLCBsb2dnaW5nLCBldGMuIG9mIHF1ZXJ5IGJlaGF2aW9yIGJ5IGludGVyY2VwdGluZyB0aGUgbWVzc2FnZSBzdHJlYW0gdG8gcnVuIGFyYml0cmFyeSBhY3Rpb25zIGZvciBtZXNzYWdlcyBvbiB0aGUgcGlwZWxpbmUuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gb25OZXh0IEFjdGlvbiB0byBpbnZva2UgZm9yIGVhY2ggZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBzaWRlLWVmZmVjdGluZyBiZWhhdmlvciBhcHBsaWVkLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZG9Pbk5leHQgPSBvYnNlcnZhYmxlUHJvdG8udGFwT25OZXh0ID0gZnVuY3Rpb24gKG9uTmV4dCwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzLnRhcCh0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoeCkgeyBvbk5leHQuY2FsbCh0aGlzQXJnLCB4KTsgfSA6IG9uTmV4dCk7XG4gIH07XG5cbiAgLyoqXG4gICogIEludm9rZXMgYW4gYWN0aW9uIHVwb24gZXhjZXB0aW9uYWwgdGVybWluYXRpb24gb2YgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICogIFRoaXMgbWV0aG9kIGNhbiBiZSB1c2VkIGZvciBkZWJ1Z2dpbmcsIGxvZ2dpbmcsIGV0Yy4gb2YgcXVlcnkgYmVoYXZpb3IgYnkgaW50ZXJjZXB0aW5nIHRoZSBtZXNzYWdlIHN0cmVhbSB0byBydW4gYXJiaXRyYXJ5IGFjdGlvbnMgZm9yIG1lc3NhZ2VzIG9uIHRoZSBwaXBlbGluZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkVycm9yIEFjdGlvbiB0byBpbnZva2UgdXBvbiBleGNlcHRpb25hbCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBzaWRlLWVmZmVjdGluZyBiZWhhdmlvciBhcHBsaWVkLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZG9PbkVycm9yID0gb2JzZXJ2YWJsZVByb3RvLnRhcE9uRXJyb3IgPSBmdW5jdGlvbiAob25FcnJvciwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzLnRhcChub29wLCB0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoZSkgeyBvbkVycm9yLmNhbGwodGhpc0FyZywgZSk7IH0gOiBvbkVycm9yKTtcbiAgfTtcblxuICAvKipcbiAgKiAgSW52b2tlcyBhbiBhY3Rpb24gdXBvbiBncmFjZWZ1bCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiAgVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgZm9yIGRlYnVnZ2luZywgbG9nZ2luZywgZXRjLiBvZiBxdWVyeSBiZWhhdmlvciBieSBpbnRlcmNlcHRpbmcgdGhlIG1lc3NhZ2Ugc3RyZWFtIHRvIHJ1biBhcmJpdHJhcnkgYWN0aW9ucyBmb3IgbWVzc2FnZXMgb24gdGhlIHBpcGVsaW5lLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uQ29tcGxldGVkIEFjdGlvbiB0byBpbnZva2UgdXBvbiBncmFjZWZ1bCB0ZXJtaW5hdGlvbiBvZiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoIHRoZSBzaWRlLWVmZmVjdGluZyBiZWhhdmlvciBhcHBsaWVkLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZG9PbkNvbXBsZXRlZCA9IG9ic2VydmFibGVQcm90by50YXBPbkNvbXBsZXRlZCA9IGZ1bmN0aW9uIChvbkNvbXBsZXRlZCwgdGhpc0FyZykge1xuICAgIHJldHVybiB0aGlzLnRhcChub29wLCBudWxsLCB0eXBlb2YgdGhpc0FyZyAhPT0gJ3VuZGVmaW5lZCcgPyBmdW5jdGlvbiAoKSB7IG9uQ29tcGxldGVkLmNhbGwodGhpc0FyZyk7IH0gOiBvbkNvbXBsZXRlZCk7XG4gIH07XG5cbiAgdmFyIEZpbmFsbHlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGaW5hbGx5T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGaW5hbGx5T2JzZXJ2YWJsZShzb3VyY2UsIGZuLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gYmluZENhbGxiYWNrKGZuLCB0aGlzQXJnLCAwKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEZpbmFsbHlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBkID0gdHJ5Q2F0Y2godGhpcy5zb3VyY2Uuc3Vic2NyaWJlKS5jYWxsKHRoaXMuc291cmNlLCBvKTtcbiAgICAgIGlmIChkID09PSBlcnJvck9iaikge1xuICAgICAgICB0aGlzLl9mbigpO1xuICAgICAgICB0aHJvd2VyKGQuZSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgRmluYWxseURpc3Bvc2FibGUoZCwgdGhpcy5fZm4pO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBGaW5hbGx5RGlzcG9zYWJsZShzLCBmbikge1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgfVxuICAgIEZpbmFsbHlEaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3MuZGlzcG9zZSkuY2FsbCh0aGlzLl9zKTtcbiAgICAgICAgdGhpcy5fZm4oKTtcbiAgICAgICAgcmVzID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlcy5lKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIEZpbmFsbHlPYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIEludm9rZXMgYSBzcGVjaWZpZWQgYWN0aW9uIGFmdGVyIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0ZXJtaW5hdGVzIGdyYWNlZnVsbHkgb3IgZXhjZXB0aW9uYWxseS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZmluYWxseUFjdGlvbiBBY3Rpb24gdG8gaW52b2tlIGFmdGVyIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0ZXJtaW5hdGVzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gU291cmNlIHNlcXVlbmNlIHdpdGggdGhlIGFjdGlvbi1pbnZva2luZyB0ZXJtaW5hdGlvbiBiZWhhdmlvciBhcHBsaWVkLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvWydmaW5hbGx5J10gPSBmdW5jdGlvbiAoYWN0aW9uLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGaW5hbGx5T2JzZXJ2YWJsZSh0aGlzLCBhY3Rpb24sIHRoaXNBcmcpO1xuICB9O1xuXG4gIHZhciBJZ25vcmVFbGVtZW50c09ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlKHNvdXJjZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJZ25vcmVFbGVtZW50c09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgfVxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm9uTmV4dCA9IG5vb3A7XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUub25FcnJvciA9IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGlmKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuby5vbkVycm9yKGVycik7XG4gICAgICB9XG4gICAgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5vbkNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0aGlzLmlzU3RvcHBlZCA9IHRydWU7IH07XG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZmFpbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkVycm9yKGUpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gSWdub3JlRWxlbWVudHNPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBJZ25vcmVzIGFsbCBlbGVtZW50cyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGxlYXZpbmcgb25seSB0aGUgdGVybWluYXRpb24gbWVzc2FnZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBlbXB0eSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2lnbmFscyB0ZXJtaW5hdGlvbiwgc3VjY2Vzc2Z1bCBvciBleGNlcHRpb25hbCwgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5pZ25vcmVFbGVtZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IElnbm9yZUVsZW1lbnRzT2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgTWF0ZXJpYWxpemVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNYXRlcmlhbGl6ZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTWF0ZXJpYWxpemVPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTWF0ZXJpYWxpemVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IE1hdGVyaWFsaXplT2JzZXJ2ZXIobykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTWF0ZXJpYWxpemVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIE1hdGVyaWFsaXplT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE1hdGVyaWFsaXplT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNYXRlcmlhbGl6ZU9ic2VydmVyKG8pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7IHRoaXMuX28ub25OZXh0KG5vdGlmaWNhdGlvbkNyZWF0ZU9uTmV4dCh4KSkgfTtcbiAgICBNYXRlcmlhbGl6ZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25OZXh0KG5vdGlmaWNhdGlvbkNyZWF0ZU9uRXJyb3IoZSkpOyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG4gICAgTWF0ZXJpYWxpemVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uTmV4dChub3RpZmljYXRpb25DcmVhdGVPbkNvbXBsZXRlZCgpKTsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIE1hdGVyaWFsaXplT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgTWF0ZXJpYWxpemVzIHRoZSBpbXBsaWNpdCBub3RpZmljYXRpb25zIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgZXhwbGljaXQgbm90aWZpY2F0aW9uIHZhbHVlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgbWF0ZXJpYWxpemVkIG5vdGlmaWNhdGlvbiB2YWx1ZXMgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1hdGVyaWFsaXplID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgTWF0ZXJpYWxpemVPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUmVwZWF0cyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhIHNwZWNpZmllZCBudW1iZXIgb2YgdGltZXMuIElmIHRoZSByZXBlYXQgY291bnQgaXMgbm90IHNwZWNpZmllZCwgdGhlIHNlcXVlbmNlIHJlcGVhdHMgaW5kZWZpbml0ZWx5LlxuICAgKiBAcGFyYW0ge051bWJlcn0gW3JlcGVhdENvdW50XSAgTnVtYmVyIG9mIHRpbWVzIHRvIHJlcGVhdCB0aGUgc2VxdWVuY2UuIElmIG5vdCBwcm92aWRlZCwgcmVwZWF0cyB0aGUgc2VxdWVuY2UgaW5kZWZpbml0ZWx5LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgcHJvZHVjaW5nIHRoZSBlbGVtZW50cyBvZiB0aGUgZ2l2ZW4gc2VxdWVuY2UgcmVwZWF0ZWRseS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5yZXBlYXQgPSBmdW5jdGlvbiAocmVwZWF0Q291bnQpIHtcbiAgICByZXR1cm4gZW51bWVyYWJsZVJlcGVhdCh0aGlzLCByZXBlYXRDb3VudCkuY29uY2F0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBSZXBlYXRzIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiB0aW1lcyBvciB1bnRpbCBpdCBzdWNjZXNzZnVsbHkgdGVybWluYXRlcy4gSWYgdGhlIHJldHJ5IGNvdW50IGlzIG5vdCBzcGVjaWZpZWQsIGl0IHJldHJpZXMgaW5kZWZpbml0ZWx5LlxuICAgKiAgTm90ZSBpZiB5b3UgZW5jb3VudGVyIGFuIGVycm9yIGFuZCB3YW50IGl0IHRvIHJldHJ5IG9uY2UsIHRoZW4geW91IG11c3QgdXNlIC5yZXRyeSgyKTtcbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSByZXRyaWVkID0gcmV0cnkucmVwZWF0KCk7XG4gICAqICB2YXIgcmVzID0gcmV0cmllZCA9IHJldHJ5LnJlcGVhdCgyKTtcbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtyZXRyeUNvdW50XSAgTnVtYmVyIG9mIHRpbWVzIHRvIHJldHJ5IHRoZSBzZXF1ZW5jZS4gSWYgbm90IHByb3ZpZGVkLCByZXRyeSB0aGUgc2VxdWVuY2UgaW5kZWZpbml0ZWx5LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBwcm9kdWNpbmcgdGhlIGVsZW1lbnRzIG9mIHRoZSBnaXZlbiBzZXF1ZW5jZSByZXBlYXRlZGx5IHVudGlsIGl0IHRlcm1pbmF0ZXMgc3VjY2Vzc2Z1bGx5LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnJldHJ5ID0gZnVuY3Rpb24gKHJldHJ5Q291bnQpIHtcbiAgICByZXR1cm4gZW51bWVyYWJsZVJlcGVhdCh0aGlzLCByZXRyeUNvdW50KS5jYXRjaEVycm9yKCk7XG4gIH07XG5cbiAgZnVuY3Rpb24gcmVwZWF0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdAQGl0ZXJhdG9yJzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHZhciBSZXRyeVdoZW5PYnNlcnZhYmxlID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGZ1bmN0aW9uIGNyZWF0ZURpc3Bvc2FibGUoc3RhdGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzRGlzcG9zZWQ6IGZhbHNlLFxuICAgICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgICBzdGF0ZS5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gUmV0cnlXaGVuT2JzZXJ2YWJsZShzb3VyY2UsIG5vdGlmaWVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX25vdGlmaWVyID0gbm90aWZpZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBpbmhlcml0cyhSZXRyeVdoZW5PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgUmV0cnlXaGVuT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZXhjZXB0aW9ucyA9IG5ldyBTdWJqZWN0KCksXG4gICAgICAgIG5vdGlmaWVyID0gbmV3IFN1YmplY3QoKSxcbiAgICAgICAgaGFuZGxlZCA9IHRoaXMuX25vdGlmaWVyKGV4Y2VwdGlvbnMpLFxuICAgICAgICBub3RpZmljYXRpb25EaXNwb3NhYmxlID0gaGFuZGxlZC5zdWJzY3JpYmUobm90aWZpZXIpO1xuXG4gICAgICB2YXIgZSA9IHRoaXMuc291cmNlWydAQGl0ZXJhdG9yJ10oKTtcblxuICAgICAgdmFyIHN0YXRlID0geyBpc0Rpc3Bvc2VkOiBmYWxzZSB9LFxuICAgICAgICBsYXN0RXJyb3IsXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUobnVsbCwgZnVuY3Rpb24gKF8sIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKHN0YXRlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGUubmV4dCgpO1xuXG4gICAgICAgIGlmIChjdXJyZW50SXRlbS5kb25lKSB7XG4gICAgICAgICAgaWYgKGxhc3RFcnJvcikge1xuICAgICAgICAgICAgby5vbkVycm9yKGxhc3RFcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcHJvbWlzZVxuICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gY3VycmVudEl0ZW0udmFsdWU7XG4gICAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgICAgdmFyIG91dGVyID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHZhciBpbm5lciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShuZXcgQmluYXJ5RGlzcG9zYWJsZShpbm5lciwgb3V0ZXIpKTtcbiAgICAgICAgb3V0ZXIuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uKHgpIHsgby5vbk5leHQoeCk7IH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGV4bikge1xuICAgICAgICAgICAgaW5uZXIuc2V0RGlzcG9zYWJsZShub3RpZmllci5zdWJzY3JpYmUocmVjdXJzZSwgZnVuY3Rpb24oZXgpIHtcbiAgICAgICAgICAgICAgby5vbkVycm9yKGV4KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICAgIGV4Y2VwdGlvbnMub25OZXh0KGV4bik7XG4gICAgICAgICAgICBvdXRlci5kaXNwb3NlKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbigpIHsgby5vbkNvbXBsZXRlZCgpOyB9KSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbbm90aWZpY2F0aW9uRGlzcG9zYWJsZSwgc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlLCBjcmVhdGVEaXNwb3NhYmxlKHN0YXRlKV0pO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmV0cnlXaGVuT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIG9ic2VydmFibGVQcm90by5yZXRyeVdoZW4gPSBmdW5jdGlvbiAobm90aWZpZXIpIHtcbiAgICByZXR1cm4gbmV3IFJldHJ5V2hlbk9ic2VydmFibGUocmVwZWF0KHRoaXMpLCBub3RpZmllcik7XG4gIH07XG5cbiAgZnVuY3Rpb24gcmVwZWF0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdAQGl0ZXJhdG9yJzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogdmFsdWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIHZhciBSZXBlYXRXaGVuT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVEaXNwb3NhYmxlKHN0YXRlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBpc0Rpc3Bvc2VkOiBmYWxzZSxcbiAgICAgICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghdGhpcy5pc0Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICAgICAgc3RhdGUuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFJlcGVhdFdoZW5PYnNlcnZhYmxlKHNvdXJjZSwgbm90aWZpZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fbm90aWZpZXIgPSBub3RpZmllcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKFJlcGVhdFdoZW5PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgUmVwZWF0V2hlbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNvbXBsZXRpb25zID0gbmV3IFN1YmplY3QoKSxcbiAgICAgICAgbm90aWZpZXIgPSBuZXcgU3ViamVjdCgpLFxuICAgICAgICBoYW5kbGVkID0gdGhpcy5fbm90aWZpZXIoY29tcGxldGlvbnMpLFxuICAgICAgICBub3RpZmljYXRpb25EaXNwb3NhYmxlID0gaGFuZGxlZC5zdWJzY3JpYmUobm90aWZpZXIpO1xuXG4gICAgICB2YXIgZSA9IHRoaXMuc291cmNlWydAQGl0ZXJhdG9yJ10oKTtcblxuICAgICAgdmFyIHN0YXRlID0geyBpc0Rpc3Bvc2VkOiBmYWxzZSB9LFxuICAgICAgICBsYXN0RXJyb3IsXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IGN1cnJlbnRUaHJlYWRTY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUobnVsbCwgZnVuY3Rpb24gKF8sIHJlY3Vyc2UpIHtcbiAgICAgICAgaWYgKHN0YXRlLmlzRGlzcG9zZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IGUubmV4dCgpO1xuXG4gICAgICAgIGlmIChjdXJyZW50SXRlbS5kb25lKSB7XG4gICAgICAgICAgaWYgKGxhc3RFcnJvcikge1xuICAgICAgICAgICAgby5vbkVycm9yKGxhc3RFcnJvcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgcHJvbWlzZVxuICAgICAgICB2YXIgY3VycmVudFZhbHVlID0gY3VycmVudEl0ZW0udmFsdWU7XG4gICAgICAgIGlzUHJvbWlzZShjdXJyZW50VmFsdWUpICYmIChjdXJyZW50VmFsdWUgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UoY3VycmVudFZhbHVlKSk7XG5cbiAgICAgICAgdmFyIG91dGVyID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHZhciBpbm5lciA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShuZXcgQmluYXJ5RGlzcG9zYWJsZShpbm5lciwgb3V0ZXIpKTtcbiAgICAgICAgb3V0ZXIuc2V0RGlzcG9zYWJsZShjdXJyZW50VmFsdWUuc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uKHgpIHsgby5vbk5leHQoeCk7IH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGV4bikgeyBvLm9uRXJyb3IoZXhuKTsgfSxcbiAgICAgICAgICBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlubmVyLnNldERpc3Bvc2FibGUobm90aWZpZXIuc3Vic2NyaWJlKHJlY3Vyc2UsIGZ1bmN0aW9uKGV4KSB7XG4gICAgICAgICAgICAgIG8ub25FcnJvcihleCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICBjb21wbGV0aW9ucy5vbk5leHQobnVsbCk7XG4gICAgICAgICAgICBvdXRlci5kaXNwb3NlKCk7XG4gICAgICAgICAgfSkpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBuZXcgTkFyeURpc3Bvc2FibGUoW25vdGlmaWNhdGlvbkRpc3Bvc2FibGUsIHN1YnNjcmlwdGlvbiwgY2FuY2VsYWJsZSwgY3JlYXRlRGlzcG9zYWJsZShzdGF0ZSldKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFJlcGVhdFdoZW5PYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgb2JzZXJ2YWJsZVByb3RvLnJlcGVhdFdoZW4gPSBmdW5jdGlvbiAobm90aWZpZXIpIHtcbiAgICByZXR1cm4gbmV3IFJlcGVhdFdoZW5PYnNlcnZhYmxlKHJlcGVhdCh0aGlzKSwgbm90aWZpZXIpO1xuICB9O1xuXG4gIHZhciBTY2FuT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTY2FuT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTY2FuT2JzZXJ2YWJsZShzb3VyY2UsIGFjY3VtdWxhdG9yLCBoYXNTZWVkLCBzZWVkKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuYWNjdW11bGF0b3IgPSBhY2N1bXVsYXRvcjtcbiAgICAgIHRoaXMuaGFzU2VlZCA9IGhhc1NlZWQ7XG4gICAgICB0aGlzLnNlZWQgPSBzZWVkO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2Nhbk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTY2FuT2JzZXJ2ZXIobyx0aGlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTY2FuT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTY2FuT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNjYW5PYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTY2FuT2JzZXJ2ZXIobywgcGFyZW50KSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9mbiA9IHBhcmVudC5hY2N1bXVsYXRvcjtcbiAgICAgIHRoaXMuX2hzID0gcGFyZW50Lmhhc1NlZWQ7XG4gICAgICB0aGlzLl9zID0gcGFyZW50LnNlZWQ7XG4gICAgICB0aGlzLl9oYSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYSA9IG51bGw7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTY2FuT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgIXRoaXMuX2h2ICYmICh0aGlzLl9odiA9IHRydWUpO1xuICAgICAgaWYgKHRoaXMuX2hhKSB7XG4gICAgICAgIHRoaXMuX2EgPSB0cnlDYXRjaCh0aGlzLl9mbikodGhpcy5fYSwgeCwgdGhpcy5faSwgdGhpcy5fcCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9hID0gdGhpcy5faHMgPyB0cnlDYXRjaCh0aGlzLl9mbikodGhpcy5fcywgeCwgdGhpcy5faSwgdGhpcy5fcCkgOiB4O1xuICAgICAgICB0aGlzLl9oYSA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5fYSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcih0aGlzLl9hLmUpOyB9XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9hKTtcbiAgICAgIHRoaXMuX2krKztcbiAgICB9O1xuXG4gICAgU2Nhbk9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFNjYW5PYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgIXRoaXMuX2h2ICYmIHRoaXMuX2hzICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX3MpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2Nhbk9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgKiAgQXBwbGllcyBhbiBhY2N1bXVsYXRvciBmdW5jdGlvbiBvdmVyIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIHJldHVybnMgZWFjaCBpbnRlcm1lZGlhdGUgcmVzdWx0LiBUaGUgb3B0aW9uYWwgc2VlZCB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBpbml0aWFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAqICBGb3IgYWdncmVnYXRpb24gYmVoYXZpb3Igd2l0aCBubyBpbnRlcm1lZGlhdGUgcmVzdWx0cywgc2VlIE9ic2VydmFibGUuYWdncmVnYXRlLlxuICAqIEBwYXJhbSB7TWl4ZWR9IFtzZWVkXSBUaGUgaW5pdGlhbCBhY2N1bXVsYXRvciB2YWx1ZS5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY2N1bXVsYXRvciBBbiBhY2N1bXVsYXRvciBmdW5jdGlvbiB0byBiZSBpbnZva2VkIG9uIGVhY2ggZWxlbWVudC5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIHRoZSBhY2N1bXVsYXRlZCB2YWx1ZXMuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5zY2FuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNTZWVkID0gZmFsc2UsIHNlZWQsIGFjY3VtdWxhdG9yID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICBoYXNTZWVkID0gdHJ1ZTtcbiAgICAgIHNlZWQgPSBhcmd1bWVudHNbMV07XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2Nhbk9ic2VydmFibGUodGhpcywgYWNjdW11bGF0b3IsIGhhc1NlZWQsIHNlZWQpO1xuICB9O1xuXG4gIHZhciBTa2lwTGFzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBMYXN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwTGFzdE9ic2VydmFibGUoc291cmNlLCBjKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcExhc3RPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBMYXN0T2JzZXJ2ZXIobywgdGhpcy5fYykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcExhc3RPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNraXBMYXN0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBMYXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcExhc3RPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcExhc3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9xLnB1c2goeCk7XG4gICAgICB0aGlzLl9xLmxlbmd0aCA+IHRoaXMuX2MgJiYgdGhpcy5fby5vbk5leHQodGhpcy5fcS5zaGlmdCgpKTtcbiAgICB9O1xuXG4gICAgU2tpcExhc3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBTa2lwTGFzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwTGFzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIEJ5cGFzc2VzIGEgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBhdCB0aGUgZW5kIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIHF1ZXVlIHdpdGggYSBsZW5ndGggZW5vdWdoIHRvIHN0b3JlIHRoZSBmaXJzdCBgY291bnRgIGVsZW1lbnRzLiBBcyBtb3JlIGVsZW1lbnRzIGFyZVxuICAgKiAgcmVjZWl2ZWQsIGVsZW1lbnRzIGFyZSB0YWtlbiBmcm9tIHRoZSBmcm9udCBvZiB0aGUgcXVldWUgYW5kIHByb2R1Y2VkIG9uIHRoZSByZXN1bHQgc2VxdWVuY2UuIFRoaXMgY2F1c2VzIGVsZW1lbnRzIHRvIGJlIGRlbGF5ZWQuXG4gICAqIEBwYXJhbSBjb3VudCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gYnlwYXNzIGF0IHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgc291cmNlIHNlcXVlbmNlIGVsZW1lbnRzIGV4Y2VwdCBmb3IgdGhlIGJ5cGFzc2VkIG9uZXMgYXQgdGhlIGVuZC5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwTGFzdCA9IGZ1bmN0aW9uIChjb3VudCkge1xuICAgIGlmIChjb3VudCA8IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IFNraXBMYXN0T2JzZXJ2YWJsZSh0aGlzLCBjb3VudCk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBQcmVwZW5kcyBhIHNlcXVlbmNlIG9mIHZhbHVlcyB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYW4gb3B0aW9uYWwgc2NoZWR1bGVyIGFuZCBhbiBhcmd1bWVudCBsaXN0IG9mIHZhbHVlcyB0byBwcmVwZW5kLlxuICAgKiAgQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBzb3VyY2Uuc3RhcnRXaXRoKDEsIDIsIDMpO1xuICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5zdGFydFdpdGgoUnguU2NoZWR1bGVyLnRpbWVvdXQsIDEsIDIsIDMpO1xuICAgKiBAcGFyYW0ge0FyZ3VtZW50c30gYXJncyBUaGUgc3BlY2lmaWVkIHZhbHVlcyB0byBwcmVwZW5kIHRvIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgc291cmNlIHNlcXVlbmNlIHByZXBlbmRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWVzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnN0YXJ0V2l0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdmFsdWVzLCBzY2hlZHVsZXIsIHN0YXJ0ID0gMDtcbiAgICBpZiAoISFhcmd1bWVudHMubGVuZ3RoICYmIGlzU2NoZWR1bGVyKGFyZ3VtZW50c1swXSkpIHtcbiAgICAgIHNjaGVkdWxlciA9IGFyZ3VtZW50c1swXTtcbiAgICAgIHN0YXJ0ID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NoZWR1bGVyID0gaW1tZWRpYXRlU2NoZWR1bGVyO1xuICAgIH1cbiAgICBmb3IodmFyIGFyZ3MgPSBbXSwgaSA9IHN0YXJ0LCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICByZXR1cm4gZW51bWVyYWJsZU9mKFtvYnNlcnZhYmxlRnJvbUFycmF5KGFyZ3MsIHNjaGVkdWxlciksIHRoaXNdKS5jb25jYXQoKTtcbiAgfTtcblxuICB2YXIgVGFrZUxhc3RPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZUxhc3RPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYWtlTGFzdE9ic2VydmVyKG8sIGMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fYyA9IGM7XG4gICAgICB0aGlzLl9xID0gW107XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlTGFzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3EucHVzaCh4KTtcbiAgICAgIHRoaXMuX3EubGVuZ3RoID4gdGhpcy5fYyAmJiB0aGlzLl9xLnNoaWZ0KCk7XG4gICAgfTtcblxuICAgIFRha2VMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgVGFrZUxhc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgd2hpbGUgKHRoaXMuX3EubGVuZ3RoID4gMCkgeyB0aGlzLl9vLm9uTmV4dCh0aGlzLl9xLnNoaWZ0KCkpOyB9XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlTGFzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGNvbnRpZ3VvdXMgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIGJ1ZmZlciB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSBlbGVtZW50cyBjb3VudCBlbGVtZW50cy4gVXBvbiBjb21wbGV0aW9uIG9mXG4gICAqICB0aGUgc291cmNlIHNlcXVlbmNlLCB0aGlzIGJ1ZmZlciBpcyBkcmFpbmVkIG9uIHRoZSByZXN1bHQgc2VxdWVuY2UuIFRoaXMgY2F1c2VzIHRoZSBlbGVtZW50cyB0byBiZSBkZWxheWVkLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHRha2UgZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZUxhc3QgPSBmdW5jdGlvbiAoY291bnQpIHtcbiAgICBpZiAoY291bnQgPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVGFrZUxhc3RPYnNlcnZlcihvLCBjb3VudCkpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgdmFyIFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZUxhc3RCdWZmZXJPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZUxhc3RCdWZmZXJPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9xLnB1c2goeCk7XG4gICAgICB0aGlzLl9xLmxlbmd0aCA+IHRoaXMuX2MgJiYgdGhpcy5fcS5zaGlmdCgpO1xuICAgIH07XG5cbiAgICBUYWtlTGFzdEJ1ZmZlck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3EpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZUxhc3RCdWZmZXJPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIGFycmF5IHdpdGggdGhlIHNwZWNpZmllZCBudW1iZXIgb2YgY29udGlndW91cyBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBUaGlzIG9wZXJhdG9yIGFjY3VtdWxhdGVzIGEgYnVmZmVyIHdpdGggYSBsZW5ndGggZW5vdWdoIHRvIHN0b3JlIGNvdW50IGVsZW1lbnRzLiBVcG9uIGNvbXBsZXRpb24gb2YgdGhlXG4gICAqICBzb3VyY2Ugc2VxdWVuY2UsIHRoaXMgYnVmZmVyIGlzIHByb2R1Y2VkIG9uIHRoZSByZXN1bHQgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgZWxlbWVudHMgdG8gdGFrZSBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBhcnJheSB3aXRoIHRoZSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGZyb20gdGhlIGVuZCBvZiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRha2VMYXN0QnVmZmVyID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgaWYgKGNvdW50IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFRha2VMYXN0QnVmZmVyT2JzZXJ2ZXIobywgY291bnQpKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byB6ZXJvIG9yIG1vcmUgd2luZG93cyB3aGljaCBhcmUgcHJvZHVjZWQgYmFzZWQgb24gZWxlbWVudCBjb3VudCBpbmZvcm1hdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IExlbmd0aCBvZiBlYWNoIHdpbmRvdy5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtza2lwXSBOdW1iZXIgb2YgZWxlbWVudHMgdG8gc2tpcCBiZXR3ZWVuIGNyZWF0aW9uIG9mIGNvbnNlY3V0aXZlIHdpbmRvd3MuIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHRoZSBjb3VudC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygd2luZG93cy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by53aW5kb3dXaXRoQ291bnQgPSBmdW5jdGlvbiAoY291bnQsIHNraXApIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICArY291bnQgfHwgKGNvdW50ID0gMCk7XG4gICAgTWF0aC5hYnMoY291bnQpID09PSBJbmZpbml0eSAmJiAoY291bnQgPSAwKTtcbiAgICBpZiAoY291bnQgPD0gMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIHNraXAgPT0gbnVsbCAmJiAoc2tpcCA9IGNvdW50KTtcbiAgICArc2tpcCB8fCAoc2tpcCA9IDApO1xuICAgIE1hdGguYWJzKHNraXApID09PSBJbmZpbml0eSAmJiAoc2tpcCA9IDApO1xuXG4gICAgaWYgKHNraXAgPD0gMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBtID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG4gICAgICAgIHJlZkNvdW50RGlzcG9zYWJsZSA9IG5ldyBSZWZDb3VudERpc3Bvc2FibGUobSksXG4gICAgICAgIG4gPSAwLFxuICAgICAgICBxID0gW107XG5cbiAgICAgIGZ1bmN0aW9uIGNyZWF0ZVdpbmRvdyAoKSB7XG4gICAgICAgIHZhciBzID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgcS5wdXNoKHMpO1xuICAgICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHMsIHJlZkNvdW50RGlzcG9zYWJsZSkpO1xuICAgICAgfVxuXG4gICAgICBjcmVhdGVXaW5kb3coKTtcblxuICAgICAgbS5zZXREaXNwb3NhYmxlKHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHEubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgcVtpXS5vbk5leHQoeCk7IH1cbiAgICAgICAgICB2YXIgYyA9IG4gLSBjb3VudCArIDE7XG4gICAgICAgICAgYyA+PSAwICYmIGMgJSBza2lwID09PSAwICYmIHEuc2hpZnQoKS5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICsrbiAlIHNraXAgPT09IDAgJiYgY3JlYXRlV2luZG93KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgd2hpbGUgKHEubGVuZ3RoID4gMCkgeyBxLnNoaWZ0KCkub25FcnJvcihlKTsgfVxuICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aGlsZSAocS5sZW5ndGggPiAwKSB7IHEuc2hpZnQoKS5vbkNvbXBsZXRlZCgpOyB9XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgKSk7XG4gICAgICByZXR1cm4gcmVmQ291bnREaXNwb3NhYmxlO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gY29uY2F0TWFwKHNvdXJjZSwgc2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICB2YXIgc2VsZWN0b3JGdW5jID0gYmluZENhbGxiYWNrKHNlbGVjdG9yLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gc291cmNlLm1hcChmdW5jdGlvbiAoeCwgaSkge1xuICAgICAgdmFyIHJlc3VsdCA9IHNlbGVjdG9yRnVuYyh4LCBpLCBzb3VyY2UpO1xuICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcbiAgICAgIChpc0FycmF5TGlrZShyZXN1bHQpIHx8IGlzSXRlcmFibGUocmVzdWx0KSkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tKHJlc3VsdCkpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KS5jb25jYXRBbGwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiAgT25lIG9mIHRoZSBGb2xsb3dpbmc6XG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFuZCBtZXJnZXMgdGhlIHJlc3VsdGluZyBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbnRvIG9uZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgdmFyIHJlcyA9IHNvdXJjZS5jb25jYXRNYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUucmFuZ2UoMCwgeCk7IH0pO1xuICAgKiAgT3I6XG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLCBpbnZva2VzIHRoZSByZXN1bHQgc2VsZWN0b3IgZm9yIHRoZSBzb3VyY2UgZWxlbWVudCBhbmQgZWFjaCBvZiB0aGUgY29ycmVzcG9uZGluZyBpbm5lciBzZXF1ZW5jZSdzIGVsZW1lbnRzLCBhbmQgbWVyZ2VzIHRoZSByZXN1bHRzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqXG4gICAqICB2YXIgcmVzID0gc291cmNlLmNvbmNhdE1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gUnguT2JzZXJ2YWJsZS5yYW5nZSgwLCB4KTsgfSwgZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHggKyB5OyB9KTtcbiAgICogIE9yOlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIHRoZSBzb3VyY2Ugb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byB0aGUgb3RoZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhbmQgbWVyZ2VzIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICpcbiAgICogIHZhciByZXMgPSBzb3VyY2UuY29uY2F0TWFwKFJ4Lk9ic2VydmFibGUuZnJvbUFycmF5KFsxLDIsM10pKTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBlbGVtZW50IG9yIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gcHJvamVjdCBlYWNoIGVsZW1lbnQgZnJvbSB0aGVcbiAgICogc291cmNlIHNlcXVlbmNlIG9udG8gd2hpY2ggY291bGQgYmUgZWl0aGVyIGFuIG9ic2VydmFibGUgb3IgUHJvbWlzZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Jlc3VsdFNlbGVjdG9yXSAgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBpbnRlcm1lZGlhdGUgc2VxdWVuY2UuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBvbmUtdG8tbWFueSB0cmFuc2Zvcm0gZnVuY3Rpb24gY29sbGVjdGlvblNlbGVjdG9yIG9uIGVhY2ggZWxlbWVudCBvZiB0aGUgaW5wdXQgc2VxdWVuY2UgYW5kIHRoZW4gbWFwcGluZyBlYWNoIG9mIHRob3NlIHNlcXVlbmNlIGVsZW1lbnRzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIHNvdXJjZSBlbGVtZW50IHRvIGEgcmVzdWx0IGVsZW1lbnQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2VsZWN0Q29uY2F0ID0gb2JzZXJ2YWJsZVByb3RvLmNvbmNhdE1hcCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihzZWxlY3RvcikgJiYgaXNGdW5jdGlvbihyZXN1bHRTZWxlY3RvcikpIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbmNhdE1hcChmdW5jdGlvbiAoeCwgaSkge1xuICAgICAgICB2YXIgc2VsZWN0b3JSZXN1bHQgPSBzZWxlY3Rvcih4LCBpKTtcbiAgICAgICAgaXNQcm9taXNlKHNlbGVjdG9yUmVzdWx0KSAmJiAoc2VsZWN0b3JSZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uoc2VsZWN0b3JSZXN1bHQpKTtcbiAgICAgICAgKGlzQXJyYXlMaWtlKHNlbGVjdG9yUmVzdWx0KSB8fCBpc0l0ZXJhYmxlKHNlbGVjdG9yUmVzdWx0KSkgJiYgKHNlbGVjdG9yUmVzdWx0ID0gb2JzZXJ2YWJsZUZyb20oc2VsZWN0b3JSZXN1bHQpKTtcblxuICAgICAgICByZXR1cm4gc2VsZWN0b3JSZXN1bHQubWFwKGZ1bmN0aW9uICh5LCBpMikge1xuICAgICAgICAgIHJldHVybiByZXN1bHRTZWxlY3Rvcih4LCB5LCBpLCBpMik7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/XG4gICAgICBjb25jYXRNYXAodGhpcywgc2VsZWN0b3IsIHRoaXNBcmcpIDpcbiAgICAgIGNvbmNhdE1hcCh0aGlzLCBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxlY3RvcjsgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByb2plY3RzIGVhY2ggbm90aWZpY2F0aW9uIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhbmQgY29uY2F0cyB0aGUgcmVzdWx0aW5nIG9ic2VydmFibGUgc2VxdWVuY2VzIGludG8gb25lIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uTmV4dCBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGVsZW1lbnQ7IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9uRXJyb3IgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgd2hlbiBhbiBlcnJvciBvY2N1cnMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25Db21wbGV0ZWQgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgd2hlbiB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UgaXMgcmVhY2hlZC5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBBbiBvcHRpb25hbCBcInRoaXNcIiB0byB1c2UgdG8gaW52b2tlIGVhY2ggdHJhbnNmb3JtLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgb25lLXRvLW1hbnkgdHJhbnNmb3JtIGZ1bmN0aW9uIGNvcnJlc3BvbmRpbmcgdG8gZWFjaCBub3RpZmljYXRpb24gaW4gdGhlIGlucHV0IHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmNvbmNhdE1hcE9ic2VydmVyID0gb2JzZXJ2YWJsZVByb3RvLnNlbGVjdENvbmNhdE9ic2VydmVyID0gZnVuY3Rpb24ob25OZXh0LCBvbkVycm9yLCBvbkNvbXBsZXRlZCwgdGhpc0FyZykge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzLFxuICAgICAgICBvbk5leHRGdW5jID0gYmluZENhbGxiYWNrKG9uTmV4dCwgdGhpc0FyZywgMiksXG4gICAgICAgIG9uRXJyb3JGdW5jID0gYmluZENhbGxiYWNrKG9uRXJyb3IsIHRoaXNBcmcsIDEpLFxuICAgICAgICBvbkNvbXBsZXRlZEZ1bmMgPSBiaW5kQ2FsbGJhY2sob25Db21wbGV0ZWQsIHRoaXNBcmcsIDApO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBpbmRleCA9IDA7XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBvbk5leHRGdW5jKHgsIGluZGV4KyspO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHJlc3VsdCk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBvbkVycm9yRnVuYyhlcnIpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHJlc3VsdCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG9uQ29tcGxldGVkRnVuYygpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHJlc3VsdCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSk7XG4gICAgfSwgdGhpcykuY29uY2F0QWxsKCk7XG4gIH07XG5cbiAgdmFyIERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVmYXVsdElmRW1wdHlPYnNlcnZlcihvLCBkKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgdGhpcy5fZiA9IGZhbHNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGVmYXVsdElmRW1wdHlPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9mID0gdHJ1ZTtcbiAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgIH07XG5cbiAgICBEZWZhdWx0SWZFbXB0eU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIERlZmF1bHRJZkVtcHR5T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICF0aGlzLl9mICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX2QpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVmYXVsdElmRW1wdHlPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIHRoZSBlbGVtZW50cyBvZiB0aGUgc3BlY2lmaWVkIHNlcXVlbmNlIG9yIHRoZSBzcGVjaWZpZWQgdmFsdWUgaW4gYSBzaW5nbGV0b24gc2VxdWVuY2UgaWYgdGhlIHNlcXVlbmNlIGlzIGVtcHR5LlxuICAgKlxuICAgKiAgdmFyIHJlcyA9IG9icyA9IHhzLmRlZmF1bHRJZkVtcHR5KCk7XG4gICAqICAyIC0gb2JzID0geHMuZGVmYXVsdElmRW1wdHkoZmFsc2UpO1xuICAgKlxuICAgKiBAbWVtYmVyT2YgT2JzZXJ2YWJsZSNcbiAgICogQHBhcmFtIGRlZmF1bHRWYWx1ZSBUaGUgdmFsdWUgdG8gcmV0dXJuIGlmIHRoZSBzZXF1ZW5jZSBpcyBlbXB0eS4gSWYgbm90IHByb3ZpZGVkLCB0aGlzIGRlZmF1bHRzIHRvIG51bGwuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIHNwZWNpZmllZCBkZWZhdWx0IHZhbHVlIGlmIHRoZSBzb3VyY2UgaXMgZW1wdHk7IG90aGVyd2lzZSwgdGhlIGVsZW1lbnRzIG9mIHRoZSBzb3VyY2UgaXRzZWxmLlxuICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uZGVmYXVsdElmRW1wdHkgPSBmdW5jdGlvbiAoZGVmYXVsdFZhbHVlKSB7XG4gICAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICAgIGRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkICYmIChkZWZhdWx0VmFsdWUgPSBudWxsKTtcbiAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgRGVmYXVsdElmRW1wdHlPYnNlcnZlcihvLCBkZWZhdWx0VmFsdWUpKTtcbiAgICAgIH0sIHNvdXJjZSk7XG4gICAgfTtcblxuICAvLyBTd2FwIG91dCBmb3IgQXJyYXkuZmluZEluZGV4XG4gIGZ1bmN0aW9uIGFycmF5SW5kZXhPZkNvbXBhcmVyKGFycmF5LCBpdGVtLCBjb21wYXJlcikge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGNvbXBhcmVyKGFycmF5W2ldLCBpdGVtKSkgeyByZXR1cm4gaTsgfVxuICAgIH1cbiAgICByZXR1cm4gLTE7XG4gIH1cblxuICBmdW5jdGlvbiBIYXNoU2V0KGNvbXBhcmVyKSB7XG4gICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyO1xuICAgIHRoaXMuc2V0ID0gW107XG4gIH1cbiAgSGFzaFNldC5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgdmFyIHJldFZhbHVlID0gYXJyYXlJbmRleE9mQ29tcGFyZXIodGhpcy5zZXQsIHZhbHVlLCB0aGlzLmNvbXBhcmVyKSA9PT0gLTE7XG4gICAgcmV0VmFsdWUgJiYgdGhpcy5zZXQucHVzaCh2YWx1ZSk7XG4gICAgcmV0dXJuIHJldFZhbHVlO1xuICB9O1xuXG4gIHZhciBEaXN0aW5jdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKERpc3RpbmN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBEaXN0aW5jdE9ic2VydmFibGUoc291cmNlLCBrZXlGbiwgY21wRm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fa2V5Rm4gPSBrZXlGbjtcbiAgICAgIHRoaXMuX2NtcEZuID0gY21wRm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEaXN0aW5jdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRGlzdGluY3RPYnNlcnZlcihvLCB0aGlzLl9rZXlGbiwgdGhpcy5fY21wRm4pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERpc3RpbmN0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBEaXN0aW5jdE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEaXN0aW5jdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERpc3RpbmN0T2JzZXJ2ZXIobywga2V5Rm4sIGNtcEZuKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2tleUZuID0ga2V5Rm47XG4gICAgICB0aGlzLl9oID0gbmV3IEhhc2hTZXQoY21wRm4pO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRGlzdGluY3RPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIga2V5ID0geDtcbiAgICAgIGlmIChpc0Z1bmN0aW9uKHRoaXMuX2tleUZuKSkge1xuICAgICAgICBrZXkgPSB0cnlDYXRjaCh0aGlzLl9rZXlGbikoeCk7XG4gICAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3Ioa2V5LmUpOyB9XG4gICAgICB9XG4gICAgICB0aGlzLl9oLnB1c2goa2V5KSAmJiB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgRGlzdGluY3RPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgRGlzdGluY3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gRGlzdGluY3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyBvbmx5IGRpc3RpbmN0IGVsZW1lbnRzIGFjY29yZGluZyB0byB0aGUga2V5U2VsZWN0b3IgYW5kIHRoZSBjb21wYXJlci5cbiAgICogIFVzYWdlIG9mIHRoaXMgb3BlcmF0b3Igc2hvdWxkIGJlIGNvbnNpZGVyZWQgY2FyZWZ1bGx5IGR1ZSB0byB0aGUgbWFpbnRlbmFuY2Ugb2YgYW4gaW50ZXJuYWwgbG9va3VwIHN0cnVjdHVyZSB3aGljaCBjYW4gZ3JvdyBsYXJnZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHZhciByZXMgPSBvYnMgPSB4cy5kaXN0aW5jdCgpO1xuICAgKiAgMiAtIG9icyA9IHhzLmRpc3RpbmN0KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KTtcbiAgICogIDIgLSBvYnMgPSB4cy5kaXN0aW5jdChmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSwgZnVuY3Rpb24gKGEsYikgeyByZXR1cm4gYSA9PT0gYjsgfSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtrZXlTZWxlY3Rvcl0gIEEgZnVuY3Rpb24gdG8gY29tcHV0ZSB0aGUgY29tcGFyaXNvbiBrZXkgZm9yIGVhY2ggZWxlbWVudC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmVyXSAgVXNlZCB0byBjb21wYXJlIGl0ZW1zIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvbmx5IGNvbnRhaW5pbmcgdGhlIGRpc3RpbmN0IGVsZW1lbnRzLCBiYXNlZCBvbiBhIGNvbXB1dGVkIGtleSB2YWx1ZSwgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRpc3RpbmN0ID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCBjb21wYXJlcikge1xuICAgIGNvbXBhcmVyIHx8IChjb21wYXJlciA9IGRlZmF1bHRDb21wYXJlcik7XG4gICAgcmV0dXJuIG5ldyBEaXN0aW5jdE9ic2VydmFibGUodGhpcywga2V5U2VsZWN0b3IsIGNvbXBhcmVyKTtcbiAgfTtcblxuICAvKipcbiAgICogIEdyb3VwcyB0aGUgZWxlbWVudHMgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhY2NvcmRpbmcgdG8gYSBzcGVjaWZpZWQga2V5IHNlbGVjdG9yIGZ1bmN0aW9uIGFuZCBjb21wYXJlciBhbmQgc2VsZWN0cyB0aGUgcmVzdWx0aW5nIGVsZW1lbnRzIGJ5IHVzaW5nIGEgc3BlY2lmaWVkIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgdmFyIHJlcyA9IG9ic2VydmFibGUuZ3JvdXBCeShmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZDsgfSk7XG4gICAqICAyIC0gb2JzZXJ2YWJsZS5ncm91cEJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubmFtZTsgfSk7XG4gICAqICAzIC0gb2JzZXJ2YWJsZS5ncm91cEJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubmFtZTsgfSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudG9TdHJpbmcoKTsgfSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGtleVNlbGVjdG9yIEEgZnVuY3Rpb24gdG8gZXh0cmFjdCB0aGUga2V5IGZvciBlYWNoIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtlbGVtZW50U2VsZWN0b3JdICBBIGZ1bmN0aW9uIHRvIG1hcCBlYWNoIHNvdXJjZSBlbGVtZW50IHRvIGFuIGVsZW1lbnQgaW4gYW4gb2JzZXJ2YWJsZSBncm91cC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEEgc2VxdWVuY2Ugb2Ygb2JzZXJ2YWJsZSBncm91cHMsIGVhY2ggb2Ygd2hpY2ggY29ycmVzcG9uZHMgdG8gYSB1bmlxdWUga2V5IHZhbHVlLCBjb250YWluaW5nIGFsbCBlbGVtZW50cyB0aGF0IHNoYXJlIHRoYXQgc2FtZSBrZXkgdmFsdWUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZ3JvdXBCeSA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgZWxlbWVudFNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHRoaXMuZ3JvdXBCeVVudGlsKGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IsIG9ic2VydmFibGVOZXZlcik7XG4gIH07XG5cbiAgICAvKipcbiAgICAgKiAgR3JvdXBzIHRoZSBlbGVtZW50cyBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFjY29yZGluZyB0byBhIHNwZWNpZmllZCBrZXkgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAgICogIEEgZHVyYXRpb24gc2VsZWN0b3IgZnVuY3Rpb24gaXMgdXNlZCB0byBjb250cm9sIHRoZSBsaWZldGltZSBvZiBncm91cHMuIFdoZW4gYSBncm91cCBleHBpcmVzLCBpdCByZWNlaXZlcyBhbiBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24uIFdoZW4gYSBuZXcgZWxlbWVudCB3aXRoIHRoZSBzYW1lXG4gICAgICogIGtleSB2YWx1ZSBhcyBhIHJlY2xhaW1lZCBncm91cCBvY2N1cnMsIHRoZSBncm91cCB3aWxsIGJlIHJlYm9ybiB3aXRoIGEgbmV3IGxpZmV0aW1lIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICB2YXIgcmVzID0gb2JzZXJ2YWJsZS5ncm91cEJ5VW50aWwoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0sIG51bGwsICBmdW5jdGlvbiAoKSB7IHJldHVybiBSeC5PYnNlcnZhYmxlLm5ldmVyKCk7IH0pO1xuICAgICAqICAyIC0gb2JzZXJ2YWJsZS5ncm91cEJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkOyB9KSwgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgubmFtZTsgfSwgIGZ1bmN0aW9uICgpIHsgcmV0dXJuIFJ4Lk9ic2VydmFibGUubmV2ZXIoKTsgfSk7XG4gICAgICogIDMgLSBvYnNlcnZhYmxlLmdyb3VwQnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguaWQ7IH0pLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5uYW1lOyB9LCAgZnVuY3Rpb24gKCkgeyByZXR1cm4gUnguT2JzZXJ2YWJsZS5uZXZlcigpOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC50b1N0cmluZygpOyB9KTtcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlTZWxlY3RvciBBIGZ1bmN0aW9uIHRvIGV4dHJhY3QgdGhlIGtleSBmb3IgZWFjaCBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGR1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvbiB0byBzaWduYWwgdGhlIGV4cGlyYXRpb24gb2YgYSBncm91cC5cbiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX1cbiAgICAgKiAgQSBzZXF1ZW5jZSBvZiBvYnNlcnZhYmxlIGdyb3VwcywgZWFjaCBvZiB3aGljaCBjb3JyZXNwb25kcyB0byBhIHVuaXF1ZSBrZXkgdmFsdWUsIGNvbnRhaW5pbmcgYWxsIGVsZW1lbnRzIHRoYXQgc2hhcmUgdGhhdCBzYW1lIGtleSB2YWx1ZS5cbiAgICAgKiAgSWYgYSBncm91cCdzIGxpZmV0aW1lIGV4cGlyZXMsIGEgbmV3IGdyb3VwIHdpdGggdGhlIHNhbWUga2V5IHZhbHVlIGNhbiBiZSBjcmVhdGVkIG9uY2UgYW4gZWxlbWVudCB3aXRoIHN1Y2ggYSBrZXkgdmFsdWUgaXMgZW5jb3V0ZXJlZC5cbiAgICAgKlxuICAgICAqL1xuICAgIG9ic2VydmFibGVQcm90by5ncm91cEJ5VW50aWwgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3RvciwgZHVyYXRpb25TZWxlY3Rvcikge1xuICAgICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgdmFyIG1hcCA9IG5ldyBNYXAoKSxcbiAgICAgICAgICBncm91cERpc3Bvc2FibGUgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpLFxuICAgICAgICAgIHJlZkNvdW50RGlzcG9zYWJsZSA9IG5ldyBSZWZDb3VudERpc3Bvc2FibGUoZ3JvdXBEaXNwb3NhYmxlKSxcbiAgICAgICAgICBoYW5kbGVFcnJvciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBmdW5jdGlvbiAoaXRlbSkgeyBpdGVtLm9uRXJyb3IoZSk7IH07IH07XG5cbiAgICAgICAgZ3JvdXBEaXNwb3NhYmxlLmFkZChcbiAgICAgICAgICBzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gdHJ5Q2F0Y2goa2V5U2VsZWN0b3IpKHgpO1xuICAgICAgICAgICAgaWYgKGtleSA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgICAgbWFwLmZvckVhY2goaGFuZGxlRXJyb3Ioa2V5LmUpKTtcbiAgICAgICAgICAgICAgcmV0dXJuIG8ub25FcnJvcihrZXkuZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBmaXJlTmV3TWFwRW50cnkgPSBmYWxzZSwgd3JpdGVyID0gbWFwLmdldChrZXkpO1xuICAgICAgICAgICAgaWYgKHdyaXRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHdyaXRlciA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgICAgICAgIG1hcC5zZXQoa2V5LCB3cml0ZXIpO1xuICAgICAgICAgICAgICBmaXJlTmV3TWFwRW50cnkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZmlyZU5ld01hcEVudHJ5KSB7XG4gICAgICAgICAgICAgIHZhciBncm91cCA9IG5ldyBHcm91cGVkT2JzZXJ2YWJsZShrZXksIHdyaXRlciwgcmVmQ291bnREaXNwb3NhYmxlKSxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbkdyb3VwID0gbmV3IEdyb3VwZWRPYnNlcnZhYmxlKGtleSwgd3JpdGVyKTtcbiAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gdHJ5Q2F0Y2goZHVyYXRpb25TZWxlY3RvcikoZHVyYXRpb25Hcm91cCk7XG4gICAgICAgICAgICAgIGlmIChkdXJhdGlvbiA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgICAgICAgICBtYXAuZm9yRWFjaChoYW5kbGVFcnJvcihkdXJhdGlvbi5lKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG8ub25FcnJvcihkdXJhdGlvbi5lKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIG8ub25OZXh0KGdyb3VwKTtcblxuICAgICAgICAgICAgICB2YXIgbWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgICAgICAgZ3JvdXBEaXNwb3NhYmxlLmFkZChtZCk7XG5cbiAgICAgICAgICAgICAgbWQuc2V0RGlzcG9zYWJsZShkdXJhdGlvbi50YWtlKDEpLnN1YnNjcmliZShcbiAgICAgICAgICAgICAgICBub29wLFxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICBtYXAuZm9yRWFjaChoYW5kbGVFcnJvcihlKSk7XG4gICAgICAgICAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICBpZiAobWFwWydkZWxldGUnXShrZXkpKSB7IHdyaXRlci5vbkNvbXBsZXRlZCgpOyB9XG4gICAgICAgICAgICAgICAgICBncm91cERpc3Bvc2FibGUucmVtb3ZlKG1kKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0geDtcbiAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKGVsZW1lbnRTZWxlY3RvcikpIHtcbiAgICAgICAgICAgICAgZWxlbWVudCA9IHRyeUNhdGNoKGVsZW1lbnRTZWxlY3RvcikoeCk7XG4gICAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgICAgIG1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGVsZW1lbnQuZSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBvLm9uRXJyb3IoZWxlbWVudC5lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3cml0ZXIub25OZXh0KGVsZW1lbnQpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIG1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGUpKTtcbiAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBtYXAuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgeyBpdGVtLm9uQ29tcGxldGVkKCk7IH0pO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICByZXR1cm4gcmVmQ291bnREaXNwb3NhYmxlO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgdmFyIE1hcE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE1hcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNYXBPYnNlcnZhYmxlKHNvdXJjZSwgc2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5zZWxlY3RvciA9IGJpbmRDYWxsYmFjayhzZWxlY3RvciwgdGhpc0FyZywgMyk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbm5lck1hcChzZWxlY3Rvciwgc2VsZikge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICh4LCBpLCBvKSB7IHJldHVybiBzZWxlY3Rvci5jYWxsKHRoaXMsIHNlbGYuc2VsZWN0b3IoeCwgaSwgbyksIGksIG8pOyB9O1xuICAgIH1cblxuICAgIE1hcE9ic2VydmFibGUucHJvdG90eXBlLmludGVybmFsTWFwID0gZnVuY3Rpb24gKHNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgICByZXR1cm4gbmV3IE1hcE9ic2VydmFibGUodGhpcy5zb3VyY2UsIGlubmVyTWFwKHNlbGVjdG9yLCB0aGlzKSwgdGhpc0FyZyk7XG4gICAgfTtcblxuICAgIE1hcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgSW5uZXJPYnNlcnZlcihvLCB0aGlzLnNlbGVjdG9yLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIGluaGVyaXRzKElubmVyT2JzZXJ2ZXIsIEFic3RyYWN0T2JzZXJ2ZXIpO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIobywgc2VsZWN0b3IsIHNvdXJjZSkge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5pID0gMDtcbiAgICAgIEFic3RyYWN0T2JzZXJ2ZXIuY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24oeCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRoaXMuc2VsZWN0b3IpKHgsIHRoaXMuaSsrLCB0aGlzLnNvdXJjZSk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICB0aGlzLm8ub25OZXh0KHJlc3VsdCk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLm8ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1hcE9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAqIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gYSBuZXcgZm9ybSBieSBpbmNvcnBvcmF0aW5nIHRoZSBlbGVtZW50J3MgaW5kZXguXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBzb3VyY2UgZWxlbWVudDsgdGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIHJlcHJlc2VudHMgdGhlIGluZGV4IG9mIHRoZSBzb3VyY2UgZWxlbWVudC5cbiAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBhcmUgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgdHJhbnNmb3JtIGZ1bmN0aW9uIG9uIGVhY2ggZWxlbWVudCBvZiBzb3VyY2UuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5tYXAgPSBvYnNlcnZhYmxlUHJvdG8uc2VsZWN0ID0gZnVuY3Rpb24gKHNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgdmFyIHNlbGVjdG9yRm4gPSB0eXBlb2Ygc2VsZWN0b3IgPT09ICdmdW5jdGlvbicgPyBzZWxlY3RvciA6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNlbGVjdG9yOyB9O1xuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgTWFwT2JzZXJ2YWJsZSA/XG4gICAgICB0aGlzLmludGVybmFsTWFwKHNlbGVjdG9yRm4sIHRoaXNBcmcpIDpcbiAgICAgIG5ldyBNYXBPYnNlcnZhYmxlKHRoaXMsIHNlbGVjdG9yRm4sIHRoaXNBcmcpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHBsdWNrZXIoYXJncywgbGVuKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1hcHBlcih4KSB7XG4gICAgICB2YXIgY3VycmVudFByb3AgPSB4O1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICB2YXIgcCA9IGN1cnJlbnRQcm9wW2FyZ3NbaV1dO1xuICAgICAgICBpZiAodHlwZW9mIHAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY3VycmVudFByb3AgPSBwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJyZW50UHJvcDtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgdmFsdWUgb2YgYSBzcGVjaWZpZWQgbmVzdGVkIHByb3BlcnR5IGZyb20gYWxsIGVsZW1lbnRzIGluXG4gICAqIHRoZSBPYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0FyZ3VtZW50c30gYXJndW1lbnRzIFRoZSBuZXN0ZWQgcHJvcGVydGllcyB0byBwbHVjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFJldHVybnMgYSBuZXcgT2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGx1Y2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBpZiAobGVuID09PSAwKSB7IHRocm93IG5ldyBFcnJvcignTGlzdCBvZiBwcm9wZXJ0aWVzIGNhbm5vdCBiZSBlbXB0eS4nKTsgfVxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBhcmdzW2ldID0gYXJndW1lbnRzW2ldOyB9XG4gICAgcmV0dXJuIHRoaXMubWFwKHBsdWNrZXIoYXJncywgbGVuKSk7XG4gIH07XG5cbm9ic2VydmFibGVQcm90by5mbGF0TWFwID0gb2JzZXJ2YWJsZVByb3RvLnNlbGVjdE1hbnkgPSBmdW5jdGlvbihzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gbmV3IEZsYXRNYXBPYnNlcnZhYmxlKHRoaXMsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykubWVyZ2VBbGwoKTtcbn07XG5cbiAgLyoqXG4gICAqIFByb2plY3RzIGVhY2ggbm90aWZpY2F0aW9uIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhbmQgbWVyZ2VzIHRoZSByZXN1bHRpbmcgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW50byBvbmUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25OZXh0IEEgdHJhbnNmb3JtIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggZWxlbWVudDsgdGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIHJlcHJlc2VudHMgdGhlIGluZGV4IG9mIHRoZSBzb3VyY2UgZWxlbWVudC5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25FcnJvciBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB3aGVuIGFuIGVycm9yIG9jY3VycyBpbiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvbkNvbXBsZXRlZCBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB3aGVuIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpcyByZWFjaGVkLlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIEFuIG9wdGlvbmFsIFwidGhpc1wiIHRvIHVzZSB0byBpbnZva2UgZWFjaCB0cmFuc2Zvcm0uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdob3NlIGVsZW1lbnRzIGFyZSB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBvbmUtdG8tbWFueSB0cmFuc2Zvcm0gZnVuY3Rpb24gY29ycmVzcG9uZGluZyB0byBlYWNoIG5vdGlmaWNhdGlvbiBpbiB0aGUgaW5wdXQgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZmxhdE1hcE9ic2VydmVyID0gb2JzZXJ2YWJsZVByb3RvLnNlbGVjdE1hbnlPYnNlcnZlciA9IGZ1bmN0aW9uIChvbk5leHQsIG9uRXJyb3IsIG9uQ29tcGxldGVkLCB0aGlzQXJnKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIGluZGV4ID0gMDtcblxuICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gb25OZXh0LmNhbGwodGhpc0FyZywgeCwgaW5kZXgrKyk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQocmVzdWx0KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG9uRXJyb3IuY2FsbCh0aGlzQXJnLCBlcnIpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIGlzUHJvbWlzZShyZXN1bHQpICYmIChyZXN1bHQgPSBvYnNlcnZhYmxlRnJvbVByb21pc2UocmVzdWx0KSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KHJlc3VsdCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG9uQ29tcGxldGVkLmNhbGwodGhpc0FyZyk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQocmVzdWx0KTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9KTtcbiAgICB9LCBzb3VyY2UpLm1lcmdlQWxsKCk7XG4gIH07XG5cblJ4Lk9ic2VydmFibGUucHJvdG90eXBlLmZsYXRNYXBMYXRlc3QgPSBmdW5jdGlvbihzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gbmV3IEZsYXRNYXBPYnNlcnZhYmxlKHRoaXMsIHNlbGVjdG9yLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykuc3dpdGNoTGF0ZXN0KCk7XG59O1xuICB2YXIgU2tpcE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcE9ic2VydmFibGUoc291cmNlLCBjb3VudCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jb3VudCA9IGNvdW50O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2tpcE9ic2VydmVyKG8sIHRoaXMuX2NvdW50KSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFNraXBPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3IgPSBjO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGluaGVyaXRzKFNraXBPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG5cbiAgICBTa2lwT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX3IgPD0gMCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3ItLTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFNraXBPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbihlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTa2lwT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gU2tpcE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogQnlwYXNzZXMgYSBzcGVjaWZpZWQgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYW5kIHRoZW4gcmV0dXJucyB0aGUgcmVtYWluaW5nIGVsZW1lbnRzLlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgVGhlIG51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGJlZm9yZSByZXR1cm5pbmcgdGhlIHJlbWFpbmluZyBlbGVtZW50cy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgdGhhdCBvY2N1ciBhZnRlciB0aGUgc3BlY2lmaWVkIGluZGV4IGluIHRoZSBpbnB1dCBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwID0gZnVuY3Rpb24gKGNvdW50KSB7XG4gICAgaWYgKGNvdW50IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIHJldHVybiBuZXcgU2tpcE9ic2VydmFibGUodGhpcywgY291bnQpO1xuICB9O1xuXG4gIHZhciBTa2lwV2hpbGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwV2hpbGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBXaGlsZU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcFdoaWxlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwV2hpbGVPYnNlcnZlcihvLCB0aGlzKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTa2lwV2hpbGVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNraXBXaGlsZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwV2hpbGVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNraXBXaGlsZU9ic2VydmVyKG8sIHApIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcCA9IHA7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIHRoaXMuX3IgPSBmYWxzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICghdGhpcy5fcikge1xuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fcC5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcCk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIHRoaXMuX3IgPSAhcmVzO1xuICAgICAgfVxuICAgICAgdGhpcy5fciAmJiB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICB9O1xuICAgIFNraXBXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTa2lwV2hpbGVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gU2tpcFdoaWxlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgQnlwYXNzZXMgZWxlbWVudHMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhcyBsb25nIGFzIGEgc3BlY2lmaWVkIGNvbmRpdGlvbiBpcyB0cnVlIGFuZCB0aGVuIHJldHVybnMgdGhlIHJlbWFpbmluZyBlbGVtZW50cy5cbiAgICogIFRoZSBlbGVtZW50J3MgaW5kZXggaXMgdXNlZCBpbiB0aGUgbG9naWMgb2YgdGhlIHByZWRpY2F0ZSBmdW5jdGlvbi5cbiAgICpcbiAgICogIHZhciByZXMgPSBzb3VyY2Uuc2tpcFdoaWxlKGZ1bmN0aW9uICh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgPCAxMDsgfSk7XG4gICAqICB2YXIgcmVzID0gc291cmNlLnNraXBXaGlsZShmdW5jdGlvbiAodmFsdWUsIGluZGV4KSB7IHJldHVybiB2YWx1ZSA8IDEwIHx8IGluZGV4IDwgMTA7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb247IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBmcm9tIHRoZSBpbnB1dCBzZXF1ZW5jZSBzdGFydGluZyBhdCB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgbGluZWFyIHNlcmllcyB0aGF0IGRvZXMgbm90IHBhc3MgdGhlIHRlc3Qgc3BlY2lmaWVkIGJ5IHByZWRpY2F0ZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwV2hpbGUgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgdmFyIGZuID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIG5ldyBTa2lwV2hpbGVPYnNlcnZhYmxlKHRoaXMsIGZuKTtcbiAgfTtcblxuICB2YXIgVGFrZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZU9ic2VydmFibGUoc291cmNlLCBjb3VudCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jb3VudCA9IGNvdW50O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVGFrZU9ic2VydmVyKG8sIHRoaXMuX2NvdW50KSk7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIFRha2VPYnNlcnZlcihvLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgdGhpcy5fciA9IGM7XG4gICAgICBBYnN0cmFjdE9ic2VydmVyLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoVGFrZU9ic2VydmVyLCBBYnN0cmFjdE9ic2VydmVyKTtcblxuICAgIFRha2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5fci0tID4gMCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgICAgdGhpcy5fciA8PSAwICYmIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgVGFrZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBUYWtlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFRha2VPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBSZXR1cm5zIGEgc3BlY2lmaWVkIG51bWJlciBvZiBjb250aWd1b3VzIGVsZW1lbnRzIGZyb20gdGhlIHN0YXJ0IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UsIHVzaW5nIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyIGZvciB0aGUgZWRnZSBjYXNlIG9mIHRha2UoMCkuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIHRvIHJldHVybi5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB1c2VkIHRvIHByb2R1Y2UgYW4gT25Db21wbGV0ZWQgbWVzc2FnZSBpbiBjYXNlIDxwYXJhbXJlZiBuYW1lPVwiY291bnQgY291bnQ8L3BhcmFtcmVmPiBpcyBzZXQgdG8gMC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgc3BlY2lmaWVkIG51bWJlciBvZiBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgaW5wdXQgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZSA9IGZ1bmN0aW9uIChjb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgaWYgKGNvdW50IDwgMCkgeyB0aHJvdyBuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIGlmIChjb3VudCA9PT0gMCkgeyByZXR1cm4gb2JzZXJ2YWJsZUVtcHR5KHNjaGVkdWxlcik7IH1cbiAgICByZXR1cm4gbmV3IFRha2VPYnNlcnZhYmxlKHRoaXMsIGNvdW50KTtcbiAgfTtcblxuICB2YXIgVGFrZVdoaWxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZVdoaWxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUYWtlV2hpbGVPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VXaGlsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgVGFrZVdoaWxlT2JzZXJ2ZXIobywgdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZVdoaWxlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUYWtlV2hpbGVPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZVdoaWxlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBUYWtlV2hpbGVPYnNlcnZlcihvLCBwKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICB0aGlzLl9yID0gdHJ1ZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRha2VXaGlsZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9yKSB7XG4gICAgICAgIHRoaXMuX3IgPSB0cnlDYXRjaCh0aGlzLl9wLl9mbikoeCwgdGhpcy5faSsrLCB0aGlzLl9wKTtcbiAgICAgICAgaWYgKHRoaXMuX3IgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IodGhpcy5fci5lKTsgfVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3IpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBUYWtlV2hpbGVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgVGFrZVdoaWxlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFRha2VXaGlsZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFJldHVybnMgZWxlbWVudHMgZnJvbSBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIGxvbmcgYXMgYSBzcGVjaWZpZWQgY29uZGl0aW9uIGlzIHRydWUuXG4gICAqICBUaGUgZWxlbWVudCdzIGluZGV4IGlzIHVzZWQgaW4gdGhlIGxvZ2ljIG9mIHRoZSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBlbGVtZW50IGZvciBhIGNvbmRpdGlvbjsgdGhlIHNlY29uZCBwYXJhbWV0ZXIgb2YgdGhlIGZ1bmN0aW9uIHJlcHJlc2VudHMgdGhlIGluZGV4IG9mIHRoZSBzb3VyY2UgZWxlbWVudC5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIGZyb20gdGhlIGlucHV0IHNlcXVlbmNlIHRoYXQgb2NjdXIgYmVmb3JlIHRoZSBlbGVtZW50IGF0IHdoaWNoIHRoZSB0ZXN0IG5vIGxvbmdlciBwYXNzZXMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZVdoaWxlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgVGFrZVdoaWxlT2JzZXJ2YWJsZSh0aGlzLCBmbik7XG4gIH07XG5cbiAgdmFyIEZpbHRlck9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZpbHRlck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBGaWx0ZXJPYnNlcnZhYmxlKHNvdXJjZSwgcHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMucHJlZGljYXRlID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGaWx0ZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElubmVyT2JzZXJ2ZXIobywgdGhpcy5wcmVkaWNhdGUsIHRoaXMpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gaW5uZXJQcmVkaWNhdGUocHJlZGljYXRlLCBzZWxmKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oeCwgaSwgbykgeyByZXR1cm4gc2VsZi5wcmVkaWNhdGUoeCwgaSwgbykgJiYgcHJlZGljYXRlLmNhbGwodGhpcywgeCwgaSwgbyk7IH1cbiAgICB9XG5cbiAgICBGaWx0ZXJPYnNlcnZhYmxlLnByb3RvdHlwZS5pbnRlcm5hbEZpbHRlciA9IGZ1bmN0aW9uKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgcmV0dXJuIG5ldyBGaWx0ZXJPYnNlcnZhYmxlKHRoaXMuc291cmNlLCBpbm5lclByZWRpY2F0ZShwcmVkaWNhdGUsIHRoaXMpLCB0aGlzQXJnKTtcbiAgICB9O1xuXG4gICAgaW5oZXJpdHMoSW5uZXJPYnNlcnZlciwgQWJzdHJhY3RPYnNlcnZlcik7XG4gICAgZnVuY3Rpb24gSW5uZXJPYnNlcnZlcihvLCBwcmVkaWNhdGUsIHNvdXJjZSkge1xuICAgICAgdGhpcy5vID0gbztcbiAgICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmkgPSAwO1xuICAgICAgQWJzdHJhY3RPYnNlcnZlci5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbih4KSB7XG4gICAgICB2YXIgc2hvdWxkWWllbGQgPSB0cnlDYXRjaCh0aGlzLnByZWRpY2F0ZSkoeCwgdGhpcy5pKyssIHRoaXMuc291cmNlKTtcbiAgICAgIGlmIChzaG91bGRZaWVsZCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuby5vbkVycm9yKHNob3VsZFlpZWxkLmUpO1xuICAgICAgfVxuICAgICAgc2hvdWxkWWllbGQgJiYgdGhpcy5vLm9uTmV4dCh4KTtcbiAgICB9O1xuXG4gICAgSW5uZXJPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRmlsdGVyT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICogIEZpbHRlcnMgdGhlIGVsZW1lbnRzIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYmFzZWQgb24gYSBwcmVkaWNhdGUgYnkgaW5jb3Jwb3JhdGluZyB0aGUgZWxlbWVudCdzIGluZGV4LlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBBIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBzb3VyY2UgZWxlbWVudCBmb3IgYSBjb25kaXRpb247IHRoZSBzZWNvbmQgcGFyYW1ldGVyIG9mIHRoZSBmdW5jdGlvbiByZXByZXNlbnRzIHRoZSBpbmRleCBvZiB0aGUgc291cmNlIGVsZW1lbnQuXG4gICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIHRoaXMgd2hlbiBleGVjdXRpbmcgY2FsbGJhY2suXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyBlbGVtZW50cyBmcm9tIHRoZSBpbnB1dCBzZXF1ZW5jZSB0aGF0IHNhdGlzZnkgdGhlIGNvbmRpdGlvbi5cbiAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZpbHRlciA9IG9ic2VydmFibGVQcm90by53aGVyZSA9IGZ1bmN0aW9uIChwcmVkaWNhdGUsIHRoaXNBcmcpIHtcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIEZpbHRlck9ic2VydmFibGUgPyB0aGlzLmludGVybmFsRmlsdGVyKHByZWRpY2F0ZSwgdGhpc0FyZykgOlxuICAgICAgbmV3IEZpbHRlck9ic2VydmFibGUodGhpcywgcHJlZGljYXRlLCB0aGlzQXJnKTtcbiAgfTtcblxuICB2YXIgRXh0cmVtYUJ5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXh0cmVtYUJ5T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFeHRyZW1hQnlPYnNlcnZhYmxlKHNvdXJjZSwgaywgYykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9rID0gaztcbiAgICAgIHRoaXMuX2MgPSBjO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRXh0cmVtYUJ5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBFeHRyZW1hQnlPYnNlcnZlcihvLCB0aGlzLl9rLCB0aGlzLl9jKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBFeHRyZW1hQnlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEV4dHJlbWFCeU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFeHRyZW1hQnlPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFeHRyZW1hQnlPYnNlcnZlcihvLCBrLCBjKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2sgPSBrO1xuICAgICAgdGhpcy5fYyA9IGM7XG4gICAgICB0aGlzLl92ID0gbnVsbDtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl9sID0gW107XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFeHRyZW1hQnlPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIga2V5ID0gdHJ5Q2F0Y2godGhpcy5faykoeCk7XG4gICAgICBpZiAoa2V5ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKGtleS5lKTsgfVxuICAgICAgdmFyIGNvbXBhcmlzb24gPSAwO1xuICAgICAgaWYgKCF0aGlzLl9odikge1xuICAgICAgICB0aGlzLl9odiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3YgPSBrZXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wYXJpc29uID0gdHJ5Q2F0Y2godGhpcy5fYykoa2V5LCB0aGlzLl92KTtcbiAgICAgICAgaWYgKGNvbXBhcmlzb24gPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IoY29tcGFyaXNvbi5lKTsgfVxuICAgICAgfVxuICAgICAgaWYgKGNvbXBhcmlzb24gPiAwKSB7XG4gICAgICAgIHRoaXMuX3YgPSBrZXk7XG4gICAgICAgIHRoaXMuX2wgPSBbXTtcbiAgICAgIH1cbiAgICAgIGlmIChjb21wYXJpc29uID49IDApIHsgdGhpcy5fbC5wdXNoKHgpOyB9XG4gICAgfTtcblxuICAgIEV4dHJlbWFCeU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIEV4dHJlbWFCeU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9sKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV4dHJlbWFCeU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICBmdW5jdGlvbiBmaXJzdE9ubHkoeCkge1xuICAgIGlmICh4Lmxlbmd0aCA9PT0gMCkgeyB0aHJvdyBuZXcgRW1wdHlFcnJvcigpOyB9XG4gICAgcmV0dXJuIHhbMF07XG4gIH1cblxuICB2YXIgUmVkdWNlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhSZWR1Y2VPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFJlZHVjZU9ic2VydmFibGUoc291cmNlLCBhY2N1bXVsYXRvciwgaGFzU2VlZCwgc2VlZCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmFjY3VtdWxhdG9yID0gYWNjdW11bGF0b3I7XG4gICAgICB0aGlzLmhhc1NlZWQgPSBoYXNTZWVkO1xuICAgICAgdGhpcy5zZWVkID0gc2VlZDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFJlZHVjZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbihvYnNlcnZlcikge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgUmVkdWNlT2JzZXJ2ZXIob2JzZXJ2ZXIsdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gUmVkdWNlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBSZWR1Y2VPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUmVkdWNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUmVkdWNlT2JzZXJ2ZXIobywgcGFyZW50KSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9mbiA9IHBhcmVudC5hY2N1bXVsYXRvcjtcbiAgICAgIHRoaXMuX2hzID0gcGFyZW50Lmhhc1NlZWQ7XG4gICAgICB0aGlzLl9zID0gcGFyZW50LnNlZWQ7XG4gICAgICB0aGlzLl9oYSA9IGZhbHNlO1xuICAgICAgdGhpcy5fYSA9IG51bGw7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBSZWR1Y2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAhdGhpcy5faHYgJiYgKHRoaXMuX2h2ID0gdHJ1ZSk7XG4gICAgICBpZiAodGhpcy5faGEpIHtcbiAgICAgICAgdGhpcy5fYSA9IHRyeUNhdGNoKHRoaXMuX2ZuKSh0aGlzLl9hLCB4LCB0aGlzLl9pLCB0aGlzLl9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2EgPSB0aGlzLl9ocyA/IHRyeUNhdGNoKHRoaXMuX2ZuKSh0aGlzLl9zLCB4LCB0aGlzLl9pLCB0aGlzLl9wKSA6IHg7XG4gICAgICAgIHRoaXMuX2hhID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9hID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHRoaXMuX2EuZSk7IH1cbiAgICAgIHRoaXMuX2krKztcbiAgICB9O1xuXG4gICAgUmVkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgUmVkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX2h2ICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX2EpO1xuICAgICAgIXRoaXMuX2h2ICYmIHRoaXMuX2hzICYmIHRoaXMuX28ub25OZXh0KHRoaXMuX3MpO1xuICAgICAgIXRoaXMuX2h2ICYmICF0aGlzLl9ocyAmJiB0aGlzLl9vLm9uRXJyb3IobmV3IEVtcHR5RXJyb3IoKSk7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBSZWR1Y2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICogQXBwbGllcyBhbiBhY2N1bXVsYXRvciBmdW5jdGlvbiBvdmVyIGFuIG9ic2VydmFibGUgc2VxdWVuY2UsIHJldHVybmluZyB0aGUgcmVzdWx0IG9mIHRoZSBhZ2dyZWdhdGlvbiBhcyBhIHNpbmdsZSBlbGVtZW50IGluIHRoZSByZXN1bHQgc2VxdWVuY2UuIFRoZSBzcGVjaWZpZWQgc2VlZCB2YWx1ZSBpcyB1c2VkIGFzIHRoZSBpbml0aWFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAqIEZvciBhZ2dyZWdhdGlvbiBiZWhhdmlvciB3aXRoIGluY3JlbWVudGFsIGludGVybWVkaWF0ZSByZXN1bHRzLCBzZWUgT2JzZXJ2YWJsZS5zY2FuLlxuICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjY3VtdWxhdG9yIEFuIGFjY3VtdWxhdG9yIGZ1bmN0aW9uIHRvIGJlIGludm9rZWQgb24gZWFjaCBlbGVtZW50LlxuICAqIEBwYXJhbSB7QW55fSBbc2VlZF0gVGhlIGluaXRpYWwgYWNjdW11bGF0b3IgdmFsdWUuXG4gICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggdGhlIGZpbmFsIGFjY3VtdWxhdG9yIHZhbHVlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucmVkdWNlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNTZWVkID0gZmFsc2UsIHNlZWQsIGFjY3VtdWxhdG9yID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICBoYXNTZWVkID0gdHJ1ZTtcbiAgICAgIHNlZWQgPSBhcmd1bWVudHNbMV07XG4gICAgfVxuICAgIHJldHVybiBuZXcgUmVkdWNlT2JzZXJ2YWJsZSh0aGlzLCBhY2N1bXVsYXRvciwgaGFzU2VlZCwgc2VlZCk7XG4gIH07XG5cbiAgdmFyIFNvbWVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTb21lT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTb21lT2JzZXJ2YWJsZShzb3VyY2UsIGZuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTb21lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTb21lT2JzZXJ2ZXIobywgdGhpcy5fZm4sIHRoaXMuc291cmNlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTb21lT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTb21lT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNvbWVPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNvbWVPYnNlcnZlcihvLCBmbiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNvbWVPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgaWYgKEJvb2xlYW4ocmVzdWx0KSkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0cnVlKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgU29tZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTb21lT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KGZhbHNlKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNvbWVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBhbnkgZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHNhdGlzZmllcyBhIGNvbmRpdGlvbiBpZiBwcmVzZW50LCBlbHNlIGlmIGFueSBpdGVtcyBhcmUgaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlXSBBIGZ1bmN0aW9uIHRvIHRlc3QgZWFjaCBlbGVtZW50IGZvciBhIGNvbmRpdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IGRldGVybWluaW5nIHdoZXRoZXIgYW55IGVsZW1lbnRzIGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UgcGFzcyB0aGUgdGVzdCBpbiB0aGUgc3BlY2lmaWVkIHByZWRpY2F0ZSBpZiBnaXZlbiwgZWxzZSBpZiBhbnkgaXRlbXMgYXJlIGluIHRoZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zb21lID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgU29tZU9ic2VydmFibGUodGhpcywgZm4pO1xuICB9O1xuXG4gIHZhciBJc0VtcHR5T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSXNFbXB0eU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSXNFbXB0eU9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElzRW1wdHlPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IElzRW1wdHlPYnNlcnZlcihvKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBJc0VtcHR5T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBJc0VtcHR5T2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSXNFbXB0eU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIElzRW1wdHlPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIElzRW1wdHlPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KGZhbHNlKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuICAgIElzRW1wdHlPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgSXNFbXB0eU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0cnVlKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIElzRW1wdHlPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGlzIGVtcHR5LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgZGV0ZXJtaW5pbmcgd2hldGhlciB0aGUgc291cmNlIHNlcXVlbmNlIGlzIGVtcHR5LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmlzRW1wdHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBJc0VtcHR5T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgRXZlcnlPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFdmVyeU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXZlcnlPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEV2ZXJ5T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBFdmVyeU9ic2VydmVyKG8sIHRoaXMuX2ZuLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXZlcnlPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEV2ZXJ5T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV2ZXJ5T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBFdmVyeU9ic2VydmVyKG8sIGZuLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRXZlcnlPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgaWYgKCFCb29sZWFuKHJlc3VsdCkpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoZmFsc2UpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBFdmVyeU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBFdmVyeU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0cnVlKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV2ZXJ5T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgYWxsIGVsZW1lbnRzIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugc2F0aXNmeSBhIGNvbmRpdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3ByZWRpY2F0ZV0gQSBmdW5jdGlvbiB0byB0ZXN0IGVhY2ggZWxlbWVudCBmb3IgYSBjb25kaXRpb24uXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgZGV0ZXJtaW5pbmcgd2hldGhlciBhbGwgZWxlbWVudHMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZSBwYXNzIHRoZSB0ZXN0IGluIHRoZSBzcGVjaWZpZWQgcHJlZGljYXRlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmV2ZXJ5ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgRXZlcnlPYnNlcnZhYmxlKHRoaXMsIGZuKTtcbiAgfTtcblxuICB2YXIgSW5jbHVkZXNPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJbmNsdWRlc09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW5jbHVkZXNPYnNlcnZhYmxlKHNvdXJjZSwgZWxlbSwgaWR4KSB7XG4gICAgICB2YXIgbiA9ICtpZHggfHwgMDtcbiAgICAgIE1hdGguYWJzKG4pID09PSBJbmZpbml0eSAmJiAobiA9IDApO1xuXG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2VsZW0gPSBlbGVtO1xuICAgICAgdGhpcy5fbiA9IG47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbmNsdWRlc09ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgaWYgKHRoaXMuX24gPCAwKSB7XG4gICAgICAgIG8ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbmNsdWRlc09ic2VydmVyKG8sIHRoaXMuX2VsZW0sIHRoaXMuX24pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEluY2x1ZGVzT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBJbmNsdWRlc09ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJbmNsdWRlc09ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEluY2x1ZGVzT2JzZXJ2ZXIobywgZWxlbSwgbikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9lbGVtID0gZWxlbTtcbiAgICAgIHRoaXMuX24gPSBuO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb21wYXJlcihhLCBiKSB7XG4gICAgICByZXR1cm4gKGEgPT09IDAgJiYgYiA9PT0gMCkgfHwgKGEgPT09IGIgfHwgKGlzTmFOKGEpICYmIGlzTmFOKGIpKSk7XG4gICAgfVxuXG4gICAgSW5jbHVkZXNPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAodGhpcy5faSsrID49IHRoaXMuX24gJiYgY29tcGFyZXIoeCwgdGhpcy5fZWxlbSkpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodHJ1ZSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIEluY2x1ZGVzT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIEluY2x1ZGVzT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbk5leHQoZmFsc2UpOyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gSW5jbHVkZXNPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGluY2x1ZGVzIGEgc3BlY2lmaWVkIGVsZW1lbnQgd2l0aCBhbiBvcHRpb25hbCBlcXVhbGl0eSBjb21wYXJlci5cbiAgICogQHBhcmFtIHNlYXJjaEVsZW1lbnQgVGhlIHZhbHVlIHRvIGxvY2F0ZSBpbiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge051bWJlcn0gW2Zyb21JbmRleF0gQW4gZXF1YWxpdHkgY29tcGFyZXIgdG8gY29tcGFyZSBlbGVtZW50cy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IGRldGVybWluaW5nIHdoZXRoZXIgdGhlIHNvdXJjZSBzZXF1ZW5jZSBpbmNsdWRlcyBhbiBlbGVtZW50IHRoYXQgaGFzIHRoZSBzcGVjaWZpZWQgdmFsdWUgZnJvbSB0aGUgZ2l2ZW4gaW5kZXguXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uaW5jbHVkZXMgPSBmdW5jdGlvbiAoc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KSB7XG4gICAgcmV0dXJuIG5ldyBJbmNsdWRlc09ic2VydmFibGUodGhpcywgc2VhcmNoRWxlbWVudCwgZnJvbUluZGV4KTtcbiAgfTtcblxuICB2YXIgQ291bnRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb3VudE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ291bnRPYnNlcnZhYmxlKHNvdXJjZSwgZm4pIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIENvdW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBDb3VudE9ic2VydmVyKG8sIHRoaXMuX2ZuLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ291bnRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIENvdW50T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvdW50T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBDb3VudE9ic2VydmVyKG8sIGZuLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgdGhpcy5fYyA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBDb3VudE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9mbikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgIEJvb2xlYW4ocmVzdWx0KSAmJiAodGhpcy5fYysrKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2MrKztcbiAgICAgIH1cbiAgICB9O1xuICAgIENvdW50T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIENvdW50T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX2MpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ291bnRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgdmFsdWUgdGhhdCByZXByZXNlbnRzIGhvdyBtYW55IGVsZW1lbnRzIGluIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBzYXRpc2Z5IGEgY29uZGl0aW9uIGlmIHByb3ZpZGVkLCBlbHNlIHRoZSBjb3VudCBvZiBpdGVtcy5cbiAgICogQGV4YW1wbGVcbiAgICogcmVzID0gc291cmNlLmNvdW50KCk7XG4gICAqIHJlcyA9IHNvdXJjZS5jb3VudChmdW5jdGlvbiAoeCkgeyByZXR1cm4geCA+IDM7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlXUEgZnVuY3Rpb24gdG8gdGVzdCBlYWNoIGVsZW1lbnQgZm9yIGEgY29uZGl0aW9uLlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggYSBudW1iZXIgdGhhdCByZXByZXNlbnRzIGhvdyBtYW55IGVsZW1lbnRzIGluIHRoZSBpbnB1dCBzZXF1ZW5jZSBzYXRpc2Z5IHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZSBmdW5jdGlvbiBpZiBwcm92aWRlZCwgZWxzZSB0aGUgY291bnQgb2YgaXRlbXMgaW4gdGhlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmNvdW50ID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgIHZhciBmbiA9IGJpbmRDYWxsYmFjayhwcmVkaWNhdGUsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgQ291bnRPYnNlcnZhYmxlKHRoaXMsIGZuKTtcbiAgfTtcblxuICB2YXIgSW5kZXhPZk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEluZGV4T2ZPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEluZGV4T2ZPYnNlcnZhYmxlKHNvdXJjZSwgZSwgbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIHRoaXMuX24gPSBuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5kZXhPZk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgaWYgKHRoaXMuX24gPCAwKSB7XG4gICAgICAgIG8ub25OZXh0KC0xKTtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBJbmRleE9mT2JzZXJ2ZXIobywgdGhpcy5fZSwgdGhpcy5fbikpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSW5kZXhPZk9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgSW5kZXhPZk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhJbmRleE9mT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gSW5kZXhPZk9ic2VydmVyKG8sIGUsIG4pIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICB0aGlzLl9uID0gbjtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgSW5kZXhPZk9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9pID49IHRoaXMuX24gJiYgeCA9PT0gdGhpcy5fZSkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9pKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5faSsrO1xuICAgIH07XG4gICAgSW5kZXhPZk9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBJbmRleE9mT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbk5leHQoLTEpOyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gSW5kZXhPZk9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggYXQgd2hpY2ggYSBnaXZlbiBlbGVtZW50IGNhbiBiZSBmb3VuZCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuXG4gICAqIEBwYXJhbSB7QW55fSBzZWFyY2hFbGVtZW50IEVsZW1lbnQgdG8gbG9jYXRlIGluIHRoZSBhcnJheS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtmcm9tSW5kZXhdIFRoZSBpbmRleCB0byBzdGFydCB0aGUgc2VhcmNoLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gMC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuZCBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGZpcnN0IGluZGV4IGF0IHdoaWNoIGEgZ2l2ZW4gZWxlbWVudCBjYW4gYmUgZm91bmQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UsIG9yIC0xIGlmIGl0IGlzIG5vdCBwcmVzZW50LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcbiAgICB2YXIgbiA9ICtmcm9tSW5kZXggfHwgMDtcbiAgICBNYXRoLmFicyhuKSA9PT0gSW5maW5pdHkgJiYgKG4gPSAwKTtcbiAgICByZXR1cm4gbmV3IEluZGV4T2ZPYnNlcnZhYmxlKHRoaXMsIHNlYXJjaEVsZW1lbnQsIG4pO1xuICB9O1xuXG4gIHZhciBTdW1PYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTdW1PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN1bU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU3VtT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTdW1PYnNlcnZlcihvLCB0aGlzLl9mbiwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN1bU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU3VtT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN1bU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU3VtT2JzZXJ2ZXIobywgZm4sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICB0aGlzLl9jID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN1bU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9mbikge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fZm4pKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzdWx0LmUpOyB9XG4gICAgICAgIHRoaXMuX2MgKz0gcmVzdWx0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYyArPSB4O1xuICAgICAgfVxuICAgIH07XG4gICAgU3VtT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFN1bU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9jKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFN1bU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogQ29tcHV0ZXMgdGhlIHN1bSBvZiBhIHNlcXVlbmNlIG9mIHZhbHVlcyB0aGF0IGFyZSBvYnRhaW5lZCBieSBpbnZva2luZyBhbiBvcHRpb25hbCB0cmFuc2Zvcm0gZnVuY3Rpb24gb24gZWFjaCBlbGVtZW50IG9mIHRoZSBpbnB1dCBzZXF1ZW5jZSwgZWxzZSBpZiBub3Qgc3BlY2lmaWVkIGNvbXB1dGVzIHRoZSBzdW0gb24gZWFjaCBpdGVtIGluIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHRyYW5zZm9ybSBmdW5jdGlvbiB0byBhcHBseSB0byBlYWNoIGVsZW1lbnQuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyB0aGlzIHdoZW4gZXhlY3V0aW5nIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgd2l0aCB0aGUgc3VtIG9mIHRoZSB2YWx1ZXMgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zdW0gPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIHRoaXNBcmcpIHtcbiAgICB2YXIgZm4gPSBiaW5kQ2FsbGJhY2soa2V5U2VsZWN0b3IsIHRoaXNBcmcsIDMpO1xuICAgIHJldHVybiBuZXcgU3VtT2JzZXJ2YWJsZSh0aGlzLCBmbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGVsZW1lbnRzIGluIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgbWluaW11bSBrZXkgdmFsdWUgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgY29tcGFyZXIuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UubWluQnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudmFsdWU7IH0pO1xuICAgKiB2YXIgcmVzID0gc291cmNlLm1pbkJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnZhbHVlOyB9LCBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAtIHk7IH0pO1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlTZWxlY3RvciBLZXkgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gQ29tcGFyZXIgdXNlZCB0byBjb21wYXJlIGtleSB2YWx1ZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHplcm8gb3IgbW9yZSBlbGVtZW50cyB0aGF0IGhhdmUgYSBtaW5pbXVtIGtleSB2YWx1ZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5taW5CeSA9IGZ1bmN0aW9uIChrZXlTZWxlY3RvciwgY29tcGFyZXIpIHtcbiAgICBjb21wYXJlciB8fCAoY29tcGFyZXIgPSBkZWZhdWx0U3ViQ29tcGFyZXIpO1xuICAgIHJldHVybiBuZXcgRXh0cmVtYUJ5T2JzZXJ2YWJsZSh0aGlzLCBrZXlTZWxlY3RvciwgZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIGNvbXBhcmVyKHgsIHkpICogLTE7IH0pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtaW5pbXVtIGVsZW1lbnQgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbmFsIGNvbXBhcmVyIGVsc2UgYSBkZWZhdWx0IGdyZWF0ZXIgdGhhbiBsZXNzIHRoYW4gY2hlY2suXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UubWluKCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UubWluKGZ1bmN0aW9uICh4LCB5KSB7IHJldHVybiB4LnZhbHVlIC0geS52YWx1ZTsgfSk7XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjb21wYXJlcl0gQ29tcGFyZXIgdXNlZCB0byBjb21wYXJlIGVsZW1lbnRzLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBjb250YWluaW5nIGEgc2luZ2xlIGVsZW1lbnQgd2l0aCB0aGUgbWluaW11bSBlbGVtZW50IGluIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWluID0gZnVuY3Rpb24gKGNvbXBhcmVyKSB7XG4gICAgcmV0dXJuIHRoaXMubWluQnkoaWRlbnRpdHksIGNvbXBhcmVyKS5tYXAoZmlyc3RPbmx5KTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZWxlbWVudHMgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBtYXhpbXVtICBrZXkgdmFsdWUgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpZWQgY29tcGFyZXIuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UubWF4QnkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudmFsdWU7IH0pO1xuICAgKiB2YXIgcmVzID0gc291cmNlLm1heEJ5KGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnZhbHVlOyB9LCBmdW5jdGlvbiAoeCwgeSkgeyByZXR1cm4geCAtIHk7OyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5U2VsZWN0b3IgS2V5IHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyZXJdICBDb21wYXJlciB1c2VkIHRvIGNvbXBhcmUga2V5IHZhbHVlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIGxpc3Qgb2YgemVybyBvciBtb3JlIGVsZW1lbnRzIHRoYXQgaGF2ZSBhIG1heGltdW0ga2V5IHZhbHVlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLm1heEJ5ID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCBjb21wYXJlcikge1xuICAgIGNvbXBhcmVyIHx8IChjb21wYXJlciA9IGRlZmF1bHRTdWJDb21wYXJlcik7XG4gICAgcmV0dXJuIG5ldyBFeHRyZW1hQnlPYnNlcnZhYmxlKHRoaXMsIGtleVNlbGVjdG9yLCBjb21wYXJlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1heGltdW0gdmFsdWUgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmllZCBjb21wYXJlci5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5tYXgoKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5tYXgoZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHgudmFsdWUgLSB5LnZhbHVlOyB9KTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NvbXBhcmVyXSBDb21wYXJlciB1c2VkIHRvIGNvbXBhcmUgZWxlbWVudHMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgYSBzaW5nbGUgZWxlbWVudCB3aXRoIHRoZSBtYXhpbXVtIGVsZW1lbnQgaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5tYXggPSBmdW5jdGlvbiAoY29tcGFyZXIpIHtcbiAgICByZXR1cm4gdGhpcy5tYXhCeShpZGVudGl0eSwgY29tcGFyZXIpLm1hcChmaXJzdE9ubHkpO1xuICB9O1xuXG4gIHZhciBBdmVyYWdlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQXZlcmFnZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQXZlcmFnZU9ic2VydmFibGUoc291cmNlLCBmbikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgQXZlcmFnZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgQXZlcmFnZU9ic2VydmVyKG8sIHRoaXMuX2ZuLCB0aGlzLnNvdXJjZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXZlcmFnZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgQXZlcmFnZU9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEF2ZXJhZ2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBBdmVyYWdlT2JzZXJ2ZXIobywgZm4sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fYyA9IDA7XG4gICAgICB0aGlzLl90ID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEF2ZXJhZ2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZih0aGlzLl9mbikge1xuICAgICAgICB2YXIgciA9IHRyeUNhdGNoKHRoaXMuX2ZuKSh4LCB0aGlzLl9jKyssIHRoaXMuX3MpO1xuICAgICAgICBpZiAociA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX28ub25FcnJvcihyLmUpOyB9XG4gICAgICAgIHRoaXMuX3QgKz0gcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2MrKztcbiAgICAgICAgdGhpcy5fdCArPSB4O1xuICAgICAgfVxuICAgIH07XG4gICAgQXZlcmFnZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBBdmVyYWdlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLl9jID09PSAwKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IobmV3IEVtcHR5RXJyb3IoKSk7IH1cbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3QgLyB0aGlzLl9jKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEF2ZXJhZ2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBhdmVyYWdlIG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgdmFsdWVzIHRoYXQgYXJlIGluIHRoZSBzZXF1ZW5jZSBvciBvYnRhaW5lZCBieSBpbnZva2luZyBhIHRyYW5zZm9ybSBmdW5jdGlvbiBvbiBlYWNoIGVsZW1lbnQgb2YgdGhlIGlucHV0IHNlcXVlbmNlIGlmIHByZXNlbnQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge0FueX0gW3RoaXNBcmddIE9iamVjdCB0byB1c2UgYXMgdGhpcyB3aGVuIGV4ZWN1dGluZyBjYWxsYmFjay5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBlbGVtZW50IHdpdGggdGhlIGF2ZXJhZ2Ugb2YgdGhlIHNlcXVlbmNlIG9mIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5hdmVyYWdlID0gZnVuY3Rpb24gKGtleVNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMsIGZuO1xuICAgIGlmIChpc0Z1bmN0aW9uKGtleVNlbGVjdG9yKSkge1xuICAgICAgZm4gPSBiaW5kQ2FsbGJhY2soa2V5U2VsZWN0b3IsIHRoaXNBcmcsIDMpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEF2ZXJhZ2VPYnNlcnZhYmxlKHNvdXJjZSwgZm4pO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgRGV0ZXJtaW5lcyB3aGV0aGVyIHR3byBzZXF1ZW5jZXMgYXJlIGVxdWFsIGJ5IGNvbXBhcmluZyB0aGUgZWxlbWVudHMgcGFpcndpc2UgdXNpbmcgYSBzcGVjaWZpZWQgZXF1YWxpdHkgY29tcGFyZXIuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSByZXMgPSBzb3VyY2Uuc2VxdWVuY2VFcXVhbChbMSwyLDNdKTtcbiAgICogdmFyIHJlcyA9IHJlcyA9IHNvdXJjZS5zZXF1ZW5jZUVxdWFsKFt7IHZhbHVlOiA0MiB9XSwgZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHgudmFsdWUgPT09IHkudmFsdWU7IH0pO1xuICAgKiAzIC0gcmVzID0gc291cmNlLnNlcXVlbmNlRXF1YWwoUnguT2JzZXJ2YWJsZS5yZXR1cm5WYWx1ZSg0MikpO1xuICAgKiA0IC0gcmVzID0gc291cmNlLnNlcXVlbmNlRXF1YWwoUnguT2JzZXJ2YWJsZS5yZXR1cm5WYWx1ZSh7IHZhbHVlOiA0MiB9KSwgZnVuY3Rpb24gKHgsIHkpIHsgcmV0dXJuIHgudmFsdWUgPT09IHkudmFsdWU7IH0pO1xuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHNlY29uZCBTZWNvbmQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBhcnJheSB0byBjb21wYXJlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY29tcGFyZXJdIENvbXBhcmVyIHVzZWQgdG8gY29tcGFyZSBlbGVtZW50cyBvZiBib3RoIHNlcXVlbmNlcy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyBhIHNpbmdsZSBlbGVtZW50IHdoaWNoIGluZGljYXRlcyB3aGV0aGVyIGJvdGggc2VxdWVuY2VzIGFyZSBvZiBlcXVhbCBsZW5ndGggYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgZWxlbWVudHMgYXJlIGVxdWFsIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWVkIGVxdWFsaXR5IGNvbXBhcmVyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNlcXVlbmNlRXF1YWwgPSBmdW5jdGlvbiAoc2Vjb25kLCBjb21wYXJlcikge1xuICAgIHZhciBmaXJzdCA9IHRoaXM7XG4gICAgY29tcGFyZXIgfHwgKGNvbXBhcmVyID0gZGVmYXVsdENvbXBhcmVyKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBkb25lbCA9IGZhbHNlLCBkb25lciA9IGZhbHNlLCBxbCA9IFtdLCBxciA9IFtdO1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbjEgPSBmaXJzdC5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgaWYgKHFyLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgdiA9IHFyLnNoaWZ0KCk7XG4gICAgICAgICAgdmFyIGVxdWFsID0gdHJ5Q2F0Y2goY29tcGFyZXIpKHYsIHgpO1xuICAgICAgICAgIGlmIChlcXVhbCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihlcXVhbC5lKTsgfVxuICAgICAgICAgIGlmICghZXF1YWwpIHtcbiAgICAgICAgICAgIG8ub25OZXh0KGZhbHNlKTtcbiAgICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZG9uZXIpIHtcbiAgICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHFsLnB1c2goeCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uKGUpIHsgby5vbkVycm9yKGUpOyB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvbmVsID0gdHJ1ZTtcbiAgICAgICAgaWYgKHFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGlmIChxci5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChkb25lcikge1xuICAgICAgICAgICAgby5vbk5leHQodHJ1ZSk7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgKGlzQXJyYXlMaWtlKHNlY29uZCkgfHwgaXNJdGVyYWJsZShzZWNvbmQpKSAmJiAoc2Vjb25kID0gb2JzZXJ2YWJsZUZyb20oc2Vjb25kKSk7XG4gICAgICBpc1Byb21pc2Uoc2Vjb25kKSAmJiAoc2Vjb25kID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNlY29uZCkpO1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbjIgPSBzZWNvbmQuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIGlmIChxbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdmFyIHYgPSBxbC5zaGlmdCgpO1xuICAgICAgICAgIHZhciBlcXVhbCA9IHRyeUNhdGNoKGNvbXBhcmVyKSh2LCB4KTtcbiAgICAgICAgICBpZiAoZXF1YWwgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IoZXF1YWwuZSk7IH1cbiAgICAgICAgICBpZiAoIWVxdWFsKSB7XG4gICAgICAgICAgICBvLm9uTmV4dChmYWxzZSk7XG4gICAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGRvbmVsKSB7XG4gICAgICAgICAgby5vbk5leHQoZmFsc2UpO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxci5wdXNoKHgpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbihlKSB7IG8ub25FcnJvcihlKTsgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBkb25lciA9IHRydWU7XG4gICAgICAgIGlmIChxci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBpZiAocWwubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgby5vbk5leHQoZmFsc2UpO1xuICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZG9uZWwpIHtcbiAgICAgICAgICAgIG8ub25OZXh0KHRydWUpO1xuICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uMSwgc3Vic2NyaXB0aW9uMik7XG4gICAgfSwgZmlyc3QpO1xuICB9O1xuXG4gIHZhciBFbGVtZW50QXRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFbGVtZW50QXRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEVsZW1lbnRBdE9ic2VydmFibGUoc291cmNlLCBpLCBkKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2kgPSBpO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBFbGVtZW50QXRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IEVsZW1lbnRBdE9ic2VydmVyKG8sIHRoaXMuX2ksIHRoaXMuX2QpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEVsZW1lbnRBdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRWxlbWVudEF0T2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEVsZW1lbnRBdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gRWxlbWVudEF0T2JzZXJ2ZXIobywgaSwgZCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9pID0gaTtcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRWxlbWVudEF0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX2ktLSA9PT0gMCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh4KTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgRWxlbWVudEF0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIEVsZW1lbnRBdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX28ub25FcnJvcihuZXcgQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9kKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gRWxlbWVudEF0T2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBlbGVtZW50IGF0IGEgc3BlY2lmaWVkIGluZGV4IGluIGEgc2VxdWVuY2Ugb3IgZGVmYXVsdCB2YWx1ZSBpZiBub3QgZm91bmQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCBUaGUgemVyby1iYXNlZCBpbmRleCBvZiB0aGUgZWxlbWVudCB0byByZXRyaWV2ZS5cbiAgICogQHBhcmFtIHtBbnl9IFtkZWZhdWx0VmFsdWVdIFRoZSBkZWZhdWx0IHZhbHVlIHRvIHVzZSBpZiBlbGVtZW50QXQgZG9lcyBub3QgZmluZCBhIHZhbHVlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHByb2R1Y2VzIHRoZSBlbGVtZW50IGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb24gaW4gdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5lbGVtZW50QXQgPSAgZnVuY3Rpb24gKGluZGV4LCBkZWZhdWx0VmFsdWUpIHtcbiAgICBpZiAoaW5kZXggPCAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgcmV0dXJuIG5ldyBFbGVtZW50QXRPYnNlcnZhYmxlKHRoaXMsIGluZGV4LCBkZWZhdWx0VmFsdWUpO1xuICB9O1xuXG4gIHZhciBTaW5nbGVPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTaW5nbGVPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTaW5nbGVPYnNlcnZlcihvLCBvYmosIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fb2JqID0gb2JqO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9pID0gMDtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl92ID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNpbmdsZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBzaG91bGRZaWVsZCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX29iai5wcmVkaWNhdGUpKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIEJvb2xlYW4ocmVzKSAmJiAoc2hvdWxkWWllbGQgPSB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgc2hvdWxkWWllbGQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHNob3VsZFlpZWxkKSB7XG4gICAgICAgIGlmICh0aGlzLl9odikge1xuICAgICAgICAgIHJldHVybiB0aGlzLl9vLm9uRXJyb3IobmV3IEVycm9yKCdTZXF1ZW5jZSBjb250YWlucyBtb3JlIHRoYW4gb25lIG1hdGNoaW5nIGVsZW1lbnQnKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5faHYgPSB0cnVlO1xuICAgICAgICB0aGlzLl92ID0geDtcbiAgICAgIH1cbiAgICB9O1xuICAgIFNpbmdsZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTaW5nbGVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2h2KSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3YpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLl9vYmouZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fby5vbkVycm9yKG5ldyBFbXB0eUVycm9yKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fb2JqLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFNpbmdsZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgb25seSBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzYXRpc2ZpZXMgdGhlIGNvbmRpdGlvbiBpbiB0aGUgb3B0aW9uYWwgcHJlZGljYXRlLCBhbmQgcmVwb3J0cyBhbiBleGNlcHRpb24gaWYgdGhlcmUgaXMgbm90IGV4YWN0bHkgb25lIGVsZW1lbnQgaW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAgICogQHJldHVybnMge09ic2VydmFibGV9IFNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIHNpbmdsZSBlbGVtZW50IGluIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZS5cbiAgICAgKi9cbiAgICBvYnNlcnZhYmxlUHJvdG8uc2luZ2xlID0gZnVuY3Rpb24gKHByZWRpY2F0ZSwgdGhpc0FyZykge1xuICAgICAgdmFyIG9iaiA9IHt9LCBzb3VyY2UgPSB0aGlzO1xuICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgIG9iaiA9IGFyZ3VtZW50c1swXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9iaiA9IHtcbiAgICAgICAgICBwcmVkaWNhdGU6IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICB0aGlzQXJnOiBhcmd1bWVudHNbMV0sXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBhcmd1bWVudHNbMl1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0Z1bmN0aW9uIChvYmoucHJlZGljYXRlKSkge1xuICAgICAgICB2YXIgZm4gPSBvYmoucHJlZGljYXRlO1xuICAgICAgICBvYmoucHJlZGljYXRlID0gYmluZENhbGxiYWNrKGZuLCBvYmoudGhpc0FyZywgMyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHNvdXJjZS5zdWJzY3JpYmUobmV3IFNpbmdsZU9ic2VydmVyKG8sIG9iaiwgc291cmNlKSk7XG4gICAgICB9LCBzb3VyY2UpO1xuICAgIH07XG5cbiAgdmFyIEZpcnN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRmlyc3RPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZpcnN0T2JzZXJ2YWJsZShzb3VyY2UsIG9iaikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9vYmogPSBvYmo7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGaXJzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRmlyc3RPYnNlcnZlcihvLCB0aGlzLl9vYmosIHRoaXMuc291cmNlKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBGaXJzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgRmlyc3RPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGaXJzdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZpcnN0T2JzZXJ2ZXIobywgb2JqLCBzKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX29iaiA9IG9iajtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9vYmoucHJlZGljYXRlKSB7XG4gICAgICAgIHZhciByZXMgPSB0cnlDYXRjaCh0aGlzLl9vYmoucHJlZGljYXRlKSh4LCB0aGlzLl9pKyssIHRoaXMuX3MpO1xuICAgICAgICBpZiAocmVzID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKHJlcy5lKTsgfVxuICAgICAgICBpZiAoQm9vbGVhbihyZXMpKSB7XG4gICAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLl9vYmoucHJlZGljYXRlKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHgpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fb2JqLmRlZmF1bHRWYWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuX28ub25FcnJvcihuZXcgRW1wdHlFcnJvcigpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX29iai5kZWZhdWx0VmFsdWUpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBGaXJzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZSBpZiBwcmVzZW50IGVsc2UgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gU2VxdWVuY2UgY29udGFpbmluZyB0aGUgZmlyc3QgZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIGluIHRoZSBwcmVkaWNhdGUgaWYgcHJvdmlkZWQsIGVsc2UgdGhlIGZpcnN0IGl0ZW0gaW4gdGhlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZpcnN0ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvYmogPSB7fSwgc291cmNlID0gdGhpcztcbiAgICBpZiAodHlwZW9mIGFyZ3VtZW50c1swXSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG9iaiA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2JqID0ge1xuICAgICAgICBwcmVkaWNhdGU6IGFyZ3VtZW50c1swXSxcbiAgICAgICAgdGhpc0FyZzogYXJndW1lbnRzWzFdLFxuICAgICAgICBkZWZhdWx0VmFsdWU6IGFyZ3VtZW50c1syXVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKGlzRnVuY3Rpb24gKG9iai5wcmVkaWNhdGUpKSB7XG4gICAgICB2YXIgZm4gPSBvYmoucHJlZGljYXRlO1xuICAgICAgb2JqLnByZWRpY2F0ZSA9IGJpbmRDYWxsYmFjayhmbiwgb2JqLnRoaXNBcmcsIDMpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEZpcnN0T2JzZXJ2YWJsZSh0aGlzLCBvYmopO1xuICB9O1xuXG4gIHZhciBMYXN0T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoTGFzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTGFzdE9ic2VydmFibGUoc291cmNlLCBvYmopIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fb2JqID0gb2JqO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTGFzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgTGFzdE9ic2VydmVyKG8sIHRoaXMuX29iaiwgdGhpcy5zb3VyY2UpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExhc3RPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIExhc3RPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhMYXN0T2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTGFzdE9ic2VydmVyKG8sIG9iaiwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9vYmogPSBvYmo7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3YgPSBudWxsO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgTGFzdE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBzaG91bGRZaWVsZCA9IGZhbHNlO1xuICAgICAgaWYgKHRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX29iai5wcmVkaWNhdGUpKHgsIHRoaXMuX2krKywgdGhpcy5fcyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG4gICAgICAgIEJvb2xlYW4ocmVzKSAmJiAoc2hvdWxkWWllbGQgPSB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX29iai5wcmVkaWNhdGUpIHtcbiAgICAgICAgc2hvdWxkWWllbGQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKHNob3VsZFlpZWxkKSB7XG4gICAgICAgIHRoaXMuX2h2ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdiA9IHg7XG4gICAgICB9XG4gICAgfTtcbiAgICBMYXN0T2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIExhc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2h2KSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3YpO1xuICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICh0aGlzLl9vYmouZGVmYXVsdFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5fby5vbkVycm9yKG5ldyBFbXB0eUVycm9yKCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fb2JqLmRlZmF1bHRWYWx1ZSk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIExhc3RPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxhc3QgZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2F0aXNmaWVzIHRoZSBjb25kaXRpb24gaW4gdGhlIHByZWRpY2F0ZSBpZiBzcGVjaWZpZWQsIGVsc2UgdGhlIGxhc3QgZWxlbWVudC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGxhc3QgZWxlbWVudCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNhdGlzZmllcyB0aGUgY29uZGl0aW9uIGluIHRoZSBwcmVkaWNhdGUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubGFzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb2JqID0ge30sIHNvdXJjZSA9IHRoaXM7XG4gICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdvYmplY3QnKSB7XG4gICAgICBvYmogPSBhcmd1bWVudHNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIG9iaiA9IHtcbiAgICAgICAgcHJlZGljYXRlOiBhcmd1bWVudHNbMF0sXG4gICAgICAgIHRoaXNBcmc6IGFyZ3VtZW50c1sxXSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBhcmd1bWVudHNbMl1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmIChpc0Z1bmN0aW9uIChvYmoucHJlZGljYXRlKSkge1xuICAgICAgdmFyIGZuID0gb2JqLnByZWRpY2F0ZTtcbiAgICAgIG9iai5wcmVkaWNhdGUgPSBiaW5kQ2FsbGJhY2soZm4sIG9iai50aGlzQXJnLCAzKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBMYXN0T2JzZXJ2YWJsZSh0aGlzLCBvYmopO1xuICB9O1xuXG4gIHZhciBGaW5kVmFsdWVPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhGaW5kVmFsdWVPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBGaW5kVmFsdWVPYnNlcnZlcihvYnNlcnZlciwgc291cmNlLCBjYWxsYmFjaywgeWllbGRJbmRleCkge1xuICAgICAgdGhpcy5fbyA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5fcyA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2NiID0gY2FsbGJhY2s7XG4gICAgICB0aGlzLl95ID0geWllbGRJbmRleDtcbiAgICAgIHRoaXMuX2kgPSAwO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRmluZFZhbHVlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIHNob3VsZFJ1biA9IHRyeUNhdGNoKHRoaXMuX2NiKSh4LCB0aGlzLl9pLCB0aGlzLl9zKTtcbiAgICAgIGlmIChzaG91bGRSdW4gPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3Ioc2hvdWxkUnVuLmUpOyB9XG4gICAgICBpZiAoc2hvdWxkUnVuKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3kgPyB0aGlzLl9pIDogeCk7XG4gICAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2krKztcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgRmluZFZhbHVlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX28ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgRmluZFZhbHVlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3kgJiYgdGhpcy5fby5vbk5leHQoLTEpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRmluZFZhbHVlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIGZ1bmN0aW9uIGZpbmRWYWx1ZSAoc291cmNlLCBwcmVkaWNhdGUsIHRoaXNBcmcsIHlpZWxkSW5kZXgpIHtcbiAgICB2YXIgY2FsbGJhY2sgPSBiaW5kQ2FsbGJhY2socHJlZGljYXRlLCB0aGlzQXJnLCAzKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKG5ldyBGaW5kVmFsdWVPYnNlcnZlcihvLCBzb3VyY2UsIGNhbGxiYWNrLCB5aWVsZEluZGV4KSk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWFyY2hlcyBmb3IgYW4gZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIGNvbmRpdGlvbnMgZGVmaW5lZCBieSB0aGUgc3BlY2lmaWVkIHByZWRpY2F0ZSwgYW5kIHJldHVybnMgdGhlIGZpcnN0IG9jY3VycmVuY2Ugd2l0aGluIHRoZSBlbnRpcmUgT2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBwcmVkaWNhdGUgdGhhdCBkZWZpbmVzIHRoZSBjb25kaXRpb25zIG9mIHRoZSBlbGVtZW50IHRvIHNlYXJjaCBmb3IuXG4gICAqIEBwYXJhbSB7QW55fSBbdGhpc0FyZ10gT2JqZWN0IHRvIHVzZSBhcyBgdGhpc2Agd2hlbiBleGVjdXRpbmcgdGhlIHByZWRpY2F0ZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IG1hdGNoZXMgdGhlIGNvbmRpdGlvbnMgZGVmaW5lZCBieSB0aGUgc3BlY2lmaWVkIHByZWRpY2F0ZSwgaWYgZm91bmQ7IG90aGVyd2lzZSwgdW5kZWZpbmVkLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZpbmQgPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGZpbmRWYWx1ZSh0aGlzLCBwcmVkaWNhdGUsIHRoaXNBcmcsIGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogU2VhcmNoZXMgZm9yIGFuIGVsZW1lbnQgdGhhdCBtYXRjaGVzIHRoZSBjb25kaXRpb25zIGRlZmluZWQgYnkgdGhlIHNwZWNpZmllZCBwcmVkaWNhdGUsIGFuZCByZXR1cm5zXG4gICAqIGFuIE9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgemVyby1iYXNlZCBpbmRleCBvZiB0aGUgZmlyc3Qgb2NjdXJyZW5jZSB3aXRoaW4gdGhlIGVudGlyZSBPYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIHByZWRpY2F0ZSB0aGF0IGRlZmluZXMgdGhlIGNvbmRpdGlvbnMgb2YgdGhlIGVsZW1lbnQgdG8gc2VhcmNoIGZvci5cbiAgICogQHBhcmFtIHtBbnl9IFt0aGlzQXJnXSBPYmplY3QgdG8gdXNlIGFzIGB0aGlzYCB3aGVuIGV4ZWN1dGluZyB0aGUgcHJlZGljYXRlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSB6ZXJvLWJhc2VkIGluZGV4IG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGVsZW1lbnQgdGhhdCBtYXRjaGVzIHRoZSBjb25kaXRpb25zIGRlZmluZWQgYnkgbWF0Y2gsIGlmIGZvdW5kOyBvdGhlcndpc2UsIOKAkzEuXG4gICovXG4gIG9ic2VydmFibGVQcm90by5maW5kSW5kZXggPSBmdW5jdGlvbiAocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGZpbmRWYWx1ZSh0aGlzLCBwcmVkaWNhdGUsIHRoaXNBcmcsIHRydWUpO1xuICB9O1xuXG4gIHZhciBUb1NldE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRvU2V0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUb1NldE9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRvU2V0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUb1NldE9ic2VydmVyKG8pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRvU2V0T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBUb1NldE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUb1NldE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRvU2V0T2JzZXJ2ZXIobykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9zID0gbmV3IHJvb3QuU2V0KCk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUb1NldE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3MuYWRkKHgpO1xuICAgIH07XG5cbiAgICBUb1NldE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFRvU2V0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3MpO1xuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVG9TZXRPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGEgU2V0IGlmIGl0IGV4aXN0cy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCBhIHNpbmdsZSB2YWx1ZSBvZiBhIFNldCBjb250YWluaW5nIHRoZSB2YWx1ZXMgZnJvbSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50b1NldCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodHlwZW9mIHJvb3QuU2V0ID09PSAndW5kZWZpbmVkJykgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCk7IH1cbiAgICByZXR1cm4gbmV3IFRvU2V0T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgVG9NYXBPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUb01hcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVG9NYXBPYnNlcnZhYmxlKHNvdXJjZSwgaywgZSkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9rID0gaztcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVG9NYXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRvTWFwT2JzZXJ2ZXIobywgdGhpcy5faywgdGhpcy5fZSkpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVG9NYXBPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRvTWFwT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRvTWFwT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVG9NYXBPYnNlcnZlcihvLCBrLCBlKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX2sgPSBrO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICB0aGlzLl9tID0gbmV3IHJvb3QuTWFwKCk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUb01hcE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBrZXkgPSB0cnlDYXRjaCh0aGlzLl9rKSh4KTtcbiAgICAgIGlmIChrZXkgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3Ioa2V5LmUpOyB9XG4gICAgICB2YXIgZWxlbSA9IHg7XG4gICAgICBpZiAodGhpcy5fZSkge1xuICAgICAgICBlbGVtID0gdHJ5Q2F0Y2godGhpcy5fZSkoeCk7XG4gICAgICAgIGlmIChlbGVtID09PSBlcnJvck9iaikgeyByZXR1cm4gdGhpcy5fby5vbkVycm9yKGVsZW0uZSk7IH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5fbS5zZXQoa2V5LCBlbGVtKTtcbiAgICB9O1xuXG4gICAgVG9NYXBPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBUb01hcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9tKTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRvTWFwT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAqIENvbnZlcnRzIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGEgTWFwIGlmIGl0IGV4aXN0cy5cbiAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBrZXlTZWxlY3RvciBBIGZ1bmN0aW9uIHdoaWNoIHByb2R1Y2VzIHRoZSBrZXkgZm9yIHRoZSBNYXAuXG4gICogQHBhcmFtIHtGdW5jdGlvbn0gW2VsZW1lbnRTZWxlY3Rvcl0gQW4gb3B0aW9uYWwgZnVuY3Rpb24gd2hpY2ggcHJvZHVjZXMgdGhlIGVsZW1lbnQgZm9yIHRoZSBNYXAuIElmIG5vdCBwcmVzZW50LCBkZWZhdWx0cyB0byB0aGUgdmFsdWUgZnJvbSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGEgc2luZ2xlIHZhbHVlIG9mIGEgTWFwIGNvbnRhaW5pbmcgdGhlIHZhbHVlcyBmcm9tIHRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udG9NYXAgPSBmdW5jdGlvbiAoa2V5U2VsZWN0b3IsIGVsZW1lbnRTZWxlY3Rvcikge1xuICAgIGlmICh0eXBlb2Ygcm9vdC5NYXAgPT09ICd1bmRlZmluZWQnKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoKTsgfVxuICAgIHJldHVybiBuZXcgVG9NYXBPYnNlcnZhYmxlKHRoaXMsIGtleVNlbGVjdG9yLCBlbGVtZW50U2VsZWN0b3IpO1xuICB9O1xuXG4gIHZhciBTbGljZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNsaWNlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTbGljZU9ic2VydmFibGUoc291cmNlLCBiLCBlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2IgPSBiO1xuICAgICAgdGhpcy5fZSA9IGU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTbGljZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2xpY2VPYnNlcnZlcihvLCB0aGlzLl9iLCB0aGlzLl9lKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTbGljZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2xpY2VPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2xpY2VPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFNsaWNlT2JzZXJ2ZXIobywgYiwgZSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9iID0gYjtcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTbGljZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9pID49IHRoaXMuX2IpIHtcbiAgICAgICAgaWYgKHRoaXMuX2UgPT09IHRoaXMuX2kpIHtcbiAgICAgICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fby5vbk5leHQoeCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX2krKztcbiAgICB9O1xuICAgIFNsaWNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFNsaWNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFNsaWNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qXG4gICogVGhlIHNsaWNlKCkgbWV0aG9kIHJldHVybnMgYSBzaGFsbG93IGNvcHkgb2YgYSBwb3J0aW9uIG9mIGFuIE9ic2VydmFibGUgaW50byBhIG5ldyBPYnNlcnZhYmxlIG9iamVjdC5cbiAgKiBVbmxpa2UgdGhlIGFycmF5IHZlcnNpb24sIHRoaXMgZG9lcyBub3Qgc3VwcG9ydCBuZWdhdGl2ZSBudW1iZXJzIGZvciBiZWluZyBvciBlbmQuXG4gICogQHBhcmFtIHtOdW1iZXJ9IFtiZWdpbl0gWmVyby1iYXNlZCBpbmRleCBhdCB3aGljaCB0byBiZWdpbiBleHRyYWN0aW9uLiBJZiBvbWl0dGVkLCB0aGlzIHdpbGwgZGVmYXVsdCB0byB6ZXJvLlxuICAqIEBwYXJhbSB7TnVtYmVyfSBbZW5kXSBaZXJvLWJhc2VkIGluZGV4IGF0IHdoaWNoIHRvIGVuZCBleHRyYWN0aW9uLiBzbGljZSBleHRyYWN0cyB1cCB0byBidXQgbm90IGluY2x1ZGluZyBlbmQuXG4gICogSWYgb21pdHRlZCwgdGhpcyB3aWxsIGVtaXQgdGhlIHJlc3Qgb2YgdGhlIE9ic2VydmFibGUgb2JqZWN0LlxuICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBIHNoYWxsb3cgY29weSBvZiBhIHBvcnRpb24gb2YgYW4gT2JzZXJ2YWJsZSBpbnRvIGEgbmV3IE9ic2VydmFibGUgb2JqZWN0LlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2xpY2UgPSBmdW5jdGlvbiAoYmVnaW4sIGVuZCkge1xuICAgIHZhciBzdGFydCA9IGJlZ2luIHx8IDA7XG4gICAgaWYgKHN0YXJ0IDwgMCkgeyB0aHJvdyBuZXcgUnguQXJndW1lbnRPdXRPZlJhbmdlRXJyb3IoKTsgfVxuICAgIGlmICh0eXBlb2YgZW5kID09PSAnbnVtYmVyJyAmJiBlbmQgPCBzdGFydCkge1xuICAgICAgdGhyb3cgbmV3IFJ4LkFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgU2xpY2VPYnNlcnZhYmxlKHRoaXMsIHN0YXJ0LCBlbmQpO1xuICB9O1xuXG4gIHZhciBMYXN0SW5kZXhPZk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKExhc3RJbmRleE9mT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBMYXN0SW5kZXhPZk9ic2VydmFibGUoc291cmNlLCBlLCBuKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2UgPSBlO1xuICAgICAgdGhpcy5fbiA9IG47XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBMYXN0SW5kZXhPZk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgaWYgKHRoaXMuX24gPCAwKSB7XG4gICAgICAgIG8ub25OZXh0KC0xKTtcbiAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBMYXN0SW5kZXhPZk9ic2VydmVyKG8sIHRoaXMuX2UsIHRoaXMuX24pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIExhc3RJbmRleE9mT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBMYXN0SW5kZXhPZk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhMYXN0SW5kZXhPZk9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIExhc3RJbmRleE9mT2JzZXJ2ZXIobywgZSwgbikge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9lID0gZTtcbiAgICAgIHRoaXMuX24gPSBuO1xuICAgICAgdGhpcy5fdiA9IDA7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faSA9IDA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBMYXN0SW5kZXhPZk9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIGlmICh0aGlzLl9pID49IHRoaXMuX24gJiYgeCA9PT0gdGhpcy5fZSkge1xuICAgICAgICB0aGlzLl9odiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3YgPSB0aGlzLl9pO1xuICAgICAgfVxuICAgICAgdGhpcy5faSsrO1xuICAgIH07XG4gICAgTGFzdEluZGV4T2ZPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgTGFzdEluZGV4T2ZPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX2h2KSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KHRoaXMuX3YpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQoLTEpO1xuICAgICAgfVxuICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTGFzdEluZGV4T2ZPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxhc3QgaW5kZXggYXQgd2hpY2ggYSBnaXZlbiBlbGVtZW50IGNhbiBiZSBmb3VuZCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuXG4gICAqIEBwYXJhbSB7QW55fSBzZWFyY2hFbGVtZW50IEVsZW1lbnQgdG8gbG9jYXRlIGluIHRoZSBhcnJheS5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IFtmcm9tSW5kZXhdIFRoZSBpbmRleCB0byBzdGFydCB0aGUgc2VhcmNoLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gMC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuZCBvYnNlcnZhYmxlIHNlcXVlbmNlIGNvbnRhaW5pbmcgdGhlIGxhc3QgaW5kZXggYXQgd2hpY2ggYSBnaXZlbiBlbGVtZW50IGNhbiBiZSBmb3VuZCBpbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgb3IgLTEgaWYgaXQgaXMgbm90IHByZXNlbnQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubGFzdEluZGV4T2YgPSBmdW5jdGlvbihzZWFyY2hFbGVtZW50LCBmcm9tSW5kZXgpIHtcbiAgICB2YXIgbiA9ICtmcm9tSW5kZXggfHwgMDtcbiAgICBNYXRoLmFicyhuKSA9PT0gSW5maW5pdHkgJiYgKG4gPSAwKTtcbiAgICByZXR1cm4gbmV3IExhc3RJbmRleE9mT2JzZXJ2YWJsZSh0aGlzLCBzZWFyY2hFbGVtZW50LCBuKTtcbiAgfTtcblxuICBPYnNlcnZhYmxlLndyYXAgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBmdW5jdGlvbiBjcmVhdGVPYnNlcnZhYmxlKCkge1xuICAgICAgcmV0dXJuIE9ic2VydmFibGUuc3Bhd24uY2FsbCh0aGlzLCBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcbiAgICB9XG5cbiAgICBjcmVhdGVPYnNlcnZhYmxlLl9fZ2VuZXJhdG9yRnVuY3Rpb25fXyA9IGZuO1xuICAgIHJldHVybiBjcmVhdGVPYnNlcnZhYmxlO1xuICB9O1xuXG4gIHZhciBzcGF3biA9IE9ic2VydmFibGUuc3Bhd24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGdlbiA9IGFyZ3VtZW50c1swXSwgc2VsZiA9IHRoaXMsIGFyZ3MgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMSwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3MucHVzaChhcmd1bWVudHNbaV0pOyB9XG5cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcblxuICAgICAgaWYgKGlzRnVuY3Rpb24oZ2VuKSkgeyBnZW4gPSBnZW4uYXBwbHkoc2VsZiwgYXJncyk7IH1cbiAgICAgIGlmICghZ2VuIHx8ICFpc0Z1bmN0aW9uKGdlbi5uZXh0KSkge1xuICAgICAgICBvLm9uTmV4dChnZW4pO1xuICAgICAgICByZXR1cm4gby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBwcm9jZXNzR2VuZXJhdG9yKHJlcykge1xuICAgICAgICB2YXIgcmV0ID0gdHJ5Q2F0Y2goZ2VuLm5leHQpLmNhbGwoZ2VuLCByZXMpO1xuICAgICAgICBpZiAocmV0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJldC5lKTsgfVxuICAgICAgICBuZXh0KHJldCk7XG4gICAgICB9XG5cbiAgICAgIHByb2Nlc3NHZW5lcmF0b3IoKTtcblxuICAgICAgZnVuY3Rpb24gb25FcnJvcihlcnIpIHtcbiAgICAgICAgdmFyIHJldCA9IHRyeUNhdGNoKGdlbi5uZXh0KS5jYWxsKGdlbiwgZXJyKTtcbiAgICAgICAgaWYgKHJldCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXQuZSk7IH1cbiAgICAgICAgbmV4dChyZXQpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBuZXh0KHJldCkge1xuICAgICAgICBpZiAocmV0LmRvbmUpIHtcbiAgICAgICAgICBvLm9uTmV4dChyZXQudmFsdWUpO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9icyA9IHRvT2JzZXJ2YWJsZS5jYWxsKHNlbGYsIHJldC52YWx1ZSk7XG4gICAgICAgIHZhciB2YWx1ZSA9IG51bGw7XG4gICAgICAgIHZhciBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICBpZiAoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUob2JzKSkge1xuICAgICAgICAgIGcuYWRkKG9icy5zdWJzY3JpYmUoZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICBoYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICB2YWx1ZSA9IHZhbDtcbiAgICAgICAgICB9LCBvbkVycm9yLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGhhc1ZhbHVlICYmIHByb2Nlc3NHZW5lcmF0b3IodmFsdWUpO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvbkVycm9yKG5ldyBUeXBlRXJyb3IoJ3R5cGUgbm90IHN1cHBvcnRlZCcpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZztcbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiB0b09ic2VydmFibGUob2JqKSB7XG4gICAgaWYgKCFvYmopIHsgcmV0dXJuIG9iajsgfVxuICAgIGlmIChPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvYmopKSB7IHJldHVybiBvYmo7IH1cbiAgICBpZiAoaXNQcm9taXNlKG9iaikpIHsgcmV0dXJuIE9ic2VydmFibGUuZnJvbVByb21pc2Uob2JqKTsgfVxuICAgIGlmIChpc0dlbmVyYXRvckZ1bmN0aW9uKG9iaikgfHwgaXNHZW5lcmF0b3Iob2JqKSkgeyByZXR1cm4gc3Bhd24uY2FsbCh0aGlzLCBvYmopOyB9XG4gICAgaWYgKGlzRnVuY3Rpb24ob2JqKSkgeyByZXR1cm4gdGh1bmtUb09ic2VydmFibGUuY2FsbCh0aGlzLCBvYmopOyB9XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikgfHwgaXNJdGVyYWJsZShvYmopKSB7IHJldHVybiBhcnJheVRvT2JzZXJ2YWJsZS5jYWxsKHRoaXMsIG9iaik7IH1cbiAgICBpZiAoaXNPYmplY3Qob2JqKSkge3JldHVybiBvYmplY3RUb09ic2VydmFibGUuY2FsbCh0aGlzLCBvYmopO31cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlUb09ic2VydmFibGUgKG9iaikge1xuICAgIHJldHVybiBPYnNlcnZhYmxlLmZyb20ob2JqKS5jb25jYXRNYXAoZnVuY3Rpb24obykge1xuICAgICAgaWYoT2JzZXJ2YWJsZS5pc09ic2VydmFibGUobykgfHwgaXNPYmplY3QobykpIHtcbiAgICAgICAgcmV0dXJuIHRvT2JzZXJ2YWJsZS5jYWxsKG51bGwsIG8pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFJ4Lk9ic2VydmFibGUuanVzdChvKTtcbiAgICAgIH1cbiAgICB9KS50b0FycmF5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBvYmplY3RUb09ic2VydmFibGUgKG9iaikge1xuICAgIHZhciByZXN1bHRzID0gbmV3IG9iai5jb25zdHJ1Y3RvcigpLCBrZXlzID0gT2JqZWN0LmtleXMob2JqKSwgb2JzZXJ2YWJsZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICB2YXIgb2JzZXJ2YWJsZSA9IHRvT2JzZXJ2YWJsZS5jYWxsKHRoaXMsIG9ialtrZXldKTtcblxuICAgICAgaWYob2JzZXJ2YWJsZSAmJiBPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvYnNlcnZhYmxlKSkge1xuICAgICAgICBkZWZlcihvYnNlcnZhYmxlLCBrZXkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0c1trZXldID0gb2JqW2tleV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE9ic2VydmFibGUuZm9ya0pvaW4uYXBwbHkoT2JzZXJ2YWJsZSwgb2JzZXJ2YWJsZXMpLm1hcChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiByZXN1bHRzO1xuICAgIH0pO1xuXG5cbiAgICBmdW5jdGlvbiBkZWZlciAob2JzZXJ2YWJsZSwga2V5KSB7XG4gICAgICByZXN1bHRzW2tleV0gPSB1bmRlZmluZWQ7XG4gICAgICBvYnNlcnZhYmxlcy5wdXNoKG9ic2VydmFibGUubWFwKGZ1bmN0aW9uIChuZXh0KSB7XG4gICAgICAgIHJlc3VsdHNba2V5XSA9IG5leHQ7XG4gICAgICB9KSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdGh1bmtUb09ic2VydmFibGUoZm4pIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICBmbi5jYWxsKHNlbGYsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVyciA9IGFyZ3VtZW50c1swXSwgcmVzID0gYXJndW1lbnRzWzFdO1xuICAgICAgICBpZiAoZXJyKSB7IHJldHVybiBvLm9uRXJyb3IoZXJyKTsgfVxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcbiAgICAgICAgICB2YXIgYXJncyA9IFtdO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHsgYXJncy5wdXNoKGFyZ3VtZW50c1tpXSk7IH1cbiAgICAgICAgICByZXMgPSBhcmdzO1xuICAgICAgICB9XG4gICAgICAgIG8ub25OZXh0KHJlcyk7XG4gICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNHZW5lcmF0b3Iob2JqKSB7XG4gICAgcmV0dXJuIGlzRnVuY3Rpb24gKG9iai5uZXh0KSAmJiBpc0Z1bmN0aW9uIChvYmpbJ3Rocm93J10pO1xuICB9XG5cbiAgZnVuY3Rpb24gaXNHZW5lcmF0b3JGdW5jdGlvbihvYmopIHtcbiAgICB2YXIgY3RvciA9IG9iai5jb25zdHJ1Y3RvcjtcbiAgICBpZiAoIWN0b3IpIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgaWYgKGN0b3IubmFtZSA9PT0gJ0dlbmVyYXRvckZ1bmN0aW9uJyB8fCBjdG9yLmRpc3BsYXlOYW1lID09PSAnR2VuZXJhdG9yRnVuY3Rpb24nKSB7IHJldHVybiB0cnVlOyB9XG4gICAgcmV0dXJuIGlzR2VuZXJhdG9yKGN0b3IucHJvdG90eXBlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGlzT2JqZWN0KHZhbCkge1xuICAgIHJldHVybiBPYmplY3QgPT0gdmFsLmNvbnN0cnVjdG9yO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZXMgdGhlIHNwZWNpZmllZCBmdW5jdGlvbiBhc3luY2hyb25vdXNseSBvbiB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciwgc3VyZmFjaW5nIHRoZSByZXN1bHQgdGhyb3VnaCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5zdGFydChmdW5jdGlvbiAoKSB7IGNvbnNvbGUubG9nKCdoZWxsbycpOyB9KTtcbiAgICogdmFyIHJlcyA9IFJ4Lk9ic2VydmFibGUuc3RhcnQoZnVuY3Rpb24gKCkgeyBjb25zb2xlLmxvZygnaGVsbG8nKTsgfSwgUnguU2NoZWR1bGVyLnRpbWVvdXQpO1xuICAgKiB2YXIgcmVzID0gUnguT2JzZXJ2YWJsZS5zdGFydChmdW5jdGlvbiAoKSB7IHRoaXMubG9nKCdoZWxsbycpOyB9LCBSeC5TY2hlZHVsZXIudGltZW91dCwgY29uc29sZSk7XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgRnVuY3Rpb24gdG8gcnVuIGFzeW5jaHJvbm91c2x5LlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIGZ1bmN0aW9uIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBTY2hlZHVsZXIudGltZW91dC5cbiAgICogQHBhcmFtIFtjb250ZXh0XSAgVGhlIGNvbnRleHQgZm9yIHRoZSBmdW5jIHBhcmFtZXRlciB0byBiZSBleGVjdXRlZC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHVuZGVmaW5lZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgZXhwb3NpbmcgdGhlIGZ1bmN0aW9uJ3MgcmVzdWx0IHZhbHVlLCBvciBhbiBleGNlcHRpb24uXG4gICAqXG4gICAqIFJlbWFya3NcbiAgICogKiBUaGUgZnVuY3Rpb24gaXMgY2FsbGVkIGltbWVkaWF0ZWx5LCBub3QgZHVyaW5nIHRoZSBzdWJzY3JpcHRpb24gb2YgdGhlIHJlc3VsdGluZyBzZXF1ZW5jZS5cbiAgICogKiBNdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSByZXN1bHRpbmcgc2VxdWVuY2UgY2FuIG9ic2VydmUgdGhlIGZ1bmN0aW9uJ3MgcmVzdWx0LlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5zdGFydCA9IGZ1bmN0aW9uIChmdW5jLCBjb250ZXh0LCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZVRvQXN5bmMoZnVuYywgY29udGV4dCwgc2NoZWR1bGVyKSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgZnVuY3Rpb24gaW50byBhbiBhc3luY2hyb25vdXMgZnVuY3Rpb24uIEVhY2ggaW52b2NhdGlvbiBvZiB0aGUgcmVzdWx0aW5nIGFzeW5jaHJvbm91cyBmdW5jdGlvbiBjYXVzZXMgYW4gaW52b2NhdGlvbiBvZiB0aGUgb3JpZ2luYWwgc3luY2hyb25vdXMgZnVuY3Rpb24gb24gdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmN0aW9uIEZ1bmN0aW9uIHRvIGNvbnZlcnQgdG8gYW4gYXN5bmNocm9ub3VzIGZ1bmN0aW9uLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gU2NoZWR1bGVyIHRvIHJ1biB0aGUgZnVuY3Rpb24gb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcGFyYW0ge01peGVkfSBbY29udGV4dF0gVGhlIGNvbnRleHQgZm9yIHRoZSBmdW5jIHBhcmFtZXRlciB0byBiZSBleGVjdXRlZC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHVuZGVmaW5lZC5cbiAgICogQHJldHVybnMge0Z1bmN0aW9ufSBBc3luY2hyb25vdXMgZnVuY3Rpb24uXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVRvQXN5bmMgPSBPYnNlcnZhYmxlLnRvQXN5bmMgPSBmdW5jdGlvbiAoZnVuYywgY29udGV4dCwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBzdWJqZWN0ID0gbmV3IEFzeW5jU3ViamVjdCgpO1xuXG4gICAgICBzY2hlZHVsZXIuc2NoZWR1bGUobnVsbCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBzdWJqZWN0Lm9uRXJyb3IoZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN1YmplY3Qub25OZXh0KHJlc3VsdCk7XG4gICAgICAgIHN1YmplY3Qub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHN1YmplY3QuYXNPYnNlcnZhYmxlKCk7XG4gICAgfTtcbiAgfTtcblxuZnVuY3Rpb24gY3JlYXRlQ2JPYnNlcnZhYmxlKGZuLCBjdHgsIHNlbGVjdG9yLCBhcmdzKSB7XG4gIHZhciBvID0gbmV3IEFzeW5jU3ViamVjdCgpO1xuXG4gIGFyZ3MucHVzaChjcmVhdGVDYkhhbmRsZXIobywgY3R4LCBzZWxlY3RvcikpO1xuICBmbi5hcHBseShjdHgsIGFyZ3MpO1xuXG4gIHJldHVybiBvLmFzT2JzZXJ2YWJsZSgpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDYkhhbmRsZXIobywgY3R4LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3VsdHMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgcmVzdWx0c1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuXG4gICAgaWYgKGlzRnVuY3Rpb24oc2VsZWN0b3IpKSB7XG4gICAgICByZXN1bHRzID0gdHJ5Q2F0Y2goc2VsZWN0b3IpLmFwcGx5KGN0eCwgcmVzdWx0cyk7XG4gICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG4gICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHJlc3VsdHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgby5vbk5leHQocmVzdWx0c1swXSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvLm9uTmV4dChyZXN1bHRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBvLm9uQ29tcGxldGVkKCk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgYSBjYWxsYmFjayBmdW5jdGlvbiB0byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIEZ1bmN0aW9uIHdpdGggYSBjYWxsYmFjayBhcyB0aGUgbGFzdCBwYXJhbWV0ZXIgdG8gY29udmVydCB0byBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlLlxuICogQHBhcmFtIHtNaXhlZH0gW2N0eF0gVGhlIGNvbnRleHQgZm9yIHRoZSBmdW5jIHBhcmFtZXRlciB0byBiZSBleGVjdXRlZC4gIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIHVuZGVmaW5lZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gQSBzZWxlY3RvciB3aGljaCB0YWtlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIGNhbGxiYWNrIHRvIHByb2R1Y2UgYSBzaW5nbGUgaXRlbSB0byB5aWVsZCBvbiBuZXh0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBIGZ1bmN0aW9uLCB3aGVuIGV4ZWN1dGVkIHdpdGggdGhlIHJlcXVpcmVkIHBhcmFtZXRlcnMgbWludXMgdGhlIGNhbGxiYWNrLCBwcm9kdWNlcyBhbiBPYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggYSBzaW5nbGUgdmFsdWUgb2YgdGhlIGFyZ3VtZW50cyB0byB0aGUgY2FsbGJhY2sgYXMgYW4gYXJyYXkuXG4gKi9cbk9ic2VydmFibGUuZnJvbUNhbGxiYWNrID0gZnVuY3Rpb24gKGZuLCBjdHgsIHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdHlwZW9mIGN0eCA9PT0gJ3VuZGVmaW5lZCcgJiYgKGN0eCA9IHRoaXMpOyBcblxuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbilcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHJldHVybiBjcmVhdGVDYk9ic2VydmFibGUoZm4sIGN0eCwgc2VsZWN0b3IsIGFyZ3MpO1xuICB9O1xufTtcblxuZnVuY3Rpb24gY3JlYXRlTm9kZU9ic2VydmFibGUoZm4sIGN0eCwgc2VsZWN0b3IsIGFyZ3MpIHtcbiAgdmFyIG8gPSBuZXcgQXN5bmNTdWJqZWN0KCk7XG5cbiAgYXJncy5wdXNoKGNyZWF0ZU5vZGVIYW5kbGVyKG8sIGN0eCwgc2VsZWN0b3IpKTtcbiAgZm4uYXBwbHkoY3R4LCBhcmdzKTtcblxuICByZXR1cm4gby5hc09ic2VydmFibGUoKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9kZUhhbmRsZXIobywgY3R4LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24gaGFuZGxlciAoKSB7XG4gICAgdmFyIGVyciA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAoZXJyKSB7IHJldHVybiBvLm9uRXJyb3IoZXJyKTsgfVxuXG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHJlc3VsdHMgPSBbXTtcbiAgICBmb3IodmFyIGkgPSAxOyBpIDwgbGVuOyBpKyspIHsgcmVzdWx0c1tpIC0gMV0gPSBhcmd1bWVudHNbaV07IH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKHNlbGVjdG9yKSkge1xuICAgICAgdmFyIHJlc3VsdHMgPSB0cnlDYXRjaChzZWxlY3RvcikuYXBwbHkoY3R4LCByZXN1bHRzKTtcbiAgICAgIGlmIChyZXN1bHRzID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlc3VsdHMuZSk7IH1cbiAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocmVzdWx0cy5sZW5ndGggPD0gMSkge1xuICAgICAgICBvLm9uTmV4dChyZXN1bHRzWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG8ub25OZXh0KHJlc3VsdHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIE5vZGUuanMgY2FsbGJhY2sgc3R5bGUgZnVuY3Rpb24gdG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS4gIFRoaXMgbXVzdCBiZSBpbiBmdW5jdGlvbiAoZXJyLCAuLi4pIGZvcm1hdC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBjYWxsXG4gKiBAcGFyYW0ge01peGVkfSBbY3R4XSBUaGUgY29udGV4dCBmb3IgdGhlIGZ1bmMgcGFyYW1ldGVyIHRvIGJlIGV4ZWN1dGVkLiAgSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gdW5kZWZpbmVkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHNlbGVjdG9yIHdoaWNoIHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgY2FsbGJhY2sgbWludXMgdGhlIGVycm9yIHRvIHByb2R1Y2UgYSBzaW5nbGUgaXRlbSB0byB5aWVsZCBvbiBuZXh0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBBbiBhc3luYyBmdW5jdGlvbiB3aGljaCB3aGVuIGFwcGxpZWQsIHJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBjYWxsYmFjayBhcmd1bWVudHMgYXMgYW4gYXJyYXkuXG4gKi9cbk9ic2VydmFibGUuZnJvbU5vZGVDYWxsYmFjayA9IGZ1bmN0aW9uIChmbiwgY3R4LCBzZWxlY3Rvcikge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHR5cGVvZiBjdHggPT09ICd1bmRlZmluZWQnICYmIChjdHggPSB0aGlzKTsgXG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHJldHVybiBjcmVhdGVOb2RlT2JzZXJ2YWJsZShmbiwgY3R4LCBzZWxlY3RvciwgYXJncyk7XG4gIH07XG59O1xuXG4gIGZ1bmN0aW9uIGlzTm9kZUxpc3QoZWwpIHtcbiAgICBpZiAocm9vdC5TdGF0aWNOb2RlTGlzdCkge1xuICAgICAgLy8gSUU4IFNwZWNpZmljXG4gICAgICAvLyBpbnN0YW5jZW9mIGlzIHNsb3dlciB0aGFuIE9iamVjdCN0b1N0cmluZywgYnV0IE9iamVjdCN0b1N0cmluZyB3aWxsIG5vdCB3b3JrIGFzIGludGVuZGVkIGluIElFOFxuICAgICAgcmV0dXJuIGVsIGluc3RhbmNlb2Ygcm9vdC5TdGF0aWNOb2RlTGlzdCB8fCBlbCBpbnN0YW5jZW9mIHJvb3QuTm9kZUxpc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZWwpID09PSAnW29iamVjdCBOb2RlTGlzdF0nO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIExpc3RlbkRpc3Bvc2FibGUoZSwgbiwgZm4pIHtcbiAgICB0aGlzLl9lID0gZTtcbiAgICB0aGlzLl9uID0gbjtcbiAgICB0aGlzLl9mbiA9IGZuO1xuICAgIHRoaXMuX2UuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLl9uLCB0aGlzLl9mbiwgZmFsc2UpO1xuICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICB9XG4gIExpc3RlbkRpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgIHRoaXMuX2UucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLl9uLCB0aGlzLl9mbiwgZmFsc2UpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gY3JlYXRlRXZlbnRMaXN0ZW5lciAoZWwsIGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgIHZhciBkaXNwb3NhYmxlcyA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG5cbiAgICAvLyBBc3VtZSBOb2RlTGlzdCBvciBIVE1MQ29sbGVjdGlvblxuICAgIHZhciBlbGVtVG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZWwpO1xuICAgIGlmIChpc05vZGVMaXN0KGVsKSB8fCBlbGVtVG9TdHJpbmcgPT09ICdbb2JqZWN0IEhUTUxDb2xsZWN0aW9uXScpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBlbC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBkaXNwb3NhYmxlcy5hZGQoY3JlYXRlRXZlbnRMaXN0ZW5lcihlbC5pdGVtKGkpLCBldmVudE5hbWUsIGhhbmRsZXIpKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGVsKSB7XG4gICAgICBkaXNwb3NhYmxlcy5hZGQobmV3IExpc3RlbkRpc3Bvc2FibGUoZWwsIGV2ZW50TmFtZSwgaGFuZGxlcikpO1xuICAgIH1cblxuICAgIHJldHVybiBkaXNwb3NhYmxlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25maWd1cmF0aW9uIG9wdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciB0byB1c2UgbmF0aXZlIGV2ZW50cyBvbmx5XG4gICAqL1xuICBSeC5jb25maWcudXNlTmF0aXZlRXZlbnRzID0gZmFsc2U7XG5cbiAgdmFyIEV2ZW50T2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhFdmVudE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRXZlbnRPYnNlcnZhYmxlKGVsLCBuYW1lLCBmbikge1xuICAgICAgdGhpcy5fZWwgPSBlbDtcbiAgICAgIHRoaXMuX24gPSBuYW1lO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUhhbmRsZXIobywgZm4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgIHJlc3VsdHMgPSB0cnlDYXRjaChmbikuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG4gICAgICAgIH1cbiAgICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIEV2ZW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gY3JlYXRlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgdGhpcy5fZWwsXG4gICAgICAgIHRoaXMuX24sXG4gICAgICAgIGNyZWF0ZUhhbmRsZXIobywgdGhpcy5fZm4pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEV2ZW50T2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYnkgYWRkaW5nIGFuIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBtYXRjaGluZyBET01FbGVtZW50IG9yIGVhY2ggaXRlbSBpbiB0aGUgTm9kZUxpc3QuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50IFRoZSBET01FbGVtZW50IG9yIE5vZGVMaXN0IHRvIGF0dGFjaCBhIGxpc3RlbmVyLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lIFRoZSBldmVudCBuYW1lIHRvIGF0dGFjaCB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHNlbGVjdG9yIHdoaWNoIHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgZXZlbnQgaGFuZGxlciB0byBwcm9kdWNlIGEgc2luZ2xlIGl0ZW0gdG8geWllbGQgb24gbmV4dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2YgZXZlbnRzIGZyb20gdGhlIHNwZWNpZmllZCBlbGVtZW50IGFuZCB0aGUgc3BlY2lmaWVkIGV2ZW50LlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5mcm9tRXZlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCwgZXZlbnROYW1lLCBzZWxlY3Rvcikge1xuICAgIC8vIE5vZGUuanMgc3BlY2lmaWNcbiAgICBpZiAoZWxlbWVudC5hZGRMaXN0ZW5lcikge1xuICAgICAgcmV0dXJuIGZyb21FdmVudFBhdHRlcm4oXG4gICAgICAgIGZ1bmN0aW9uIChoKSB7IGVsZW1lbnQuYWRkTGlzdGVuZXIoZXZlbnROYW1lLCBoKTsgfSxcbiAgICAgICAgZnVuY3Rpb24gKGgpIHsgZWxlbWVudC5yZW1vdmVMaXN0ZW5lcihldmVudE5hbWUsIGgpOyB9LFxuICAgICAgICBzZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLy8gVXNlIG9ubHkgaWYgbm9uLW5hdGl2ZSBldmVudHMgYXJlIGFsbG93ZWRcbiAgICBpZiAoIVJ4LmNvbmZpZy51c2VOYXRpdmVFdmVudHMpIHtcbiAgICAgIC8vIEhhbmRsZXMganEsIEFuZ3VsYXIuanMsIFplcHRvLCBNYXJpb25ldHRlLCBFbWJlci5qc1xuICAgICAgaWYgKHR5cGVvZiBlbGVtZW50Lm9uID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBlbGVtZW50Lm9mZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gZnJvbUV2ZW50UGF0dGVybihcbiAgICAgICAgICBmdW5jdGlvbiAoaCkgeyBlbGVtZW50Lm9uKGV2ZW50TmFtZSwgaCk7IH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGgpIHsgZWxlbWVudC5vZmYoZXZlbnROYW1lLCBoKTsgfSxcbiAgICAgICAgICBzZWxlY3Rvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBFdmVudE9ic2VydmFibGUoZWxlbWVudCwgZXZlbnROYW1lLCBzZWxlY3RvcikucHVibGlzaCgpLnJlZkNvdW50KCk7XG4gIH07XG5cbiAgdmFyIEV2ZW50UGF0dGVybk9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFdmVudFBhdHRlcm5PYnNlcnZhYmxlKGFkZCwgZGVsLCBmbikge1xuICAgICAgdGhpcy5fYWRkID0gYWRkO1xuICAgICAgdGhpcy5fZGVsID0gZGVsO1xuICAgICAgdGhpcy5fZm4gPSBmbjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUhhbmRsZXIobywgZm4pIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbiBoYW5kbGVyICgpIHtcbiAgICAgICAgdmFyIHJlc3VsdHMgPSBhcmd1bWVudHNbMF07XG4gICAgICAgIGlmIChpc0Z1bmN0aW9uKGZuKSkge1xuICAgICAgICAgIHJlc3VsdHMgPSB0cnlDYXRjaChmbikuYXBwbHkobnVsbCwgYXJndW1lbnRzKTtcbiAgICAgICAgICBpZiAocmVzdWx0cyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHRzLmUpOyB9XG4gICAgICAgIH1cbiAgICAgICAgby5vbk5leHQocmVzdWx0cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIEV2ZW50UGF0dGVybk9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGZuID0gY3JlYXRlSGFuZGxlcihvLCB0aGlzLl9mbik7XG4gICAgICB2YXIgcmV0dXJuVmFsdWUgPSB0aGlzLl9hZGQoZm4pO1xuICAgICAgcmV0dXJuIG5ldyBFdmVudFBhdHRlcm5EaXNwb3NhYmxlKHRoaXMuX2RlbCwgZm4sIHJldHVyblZhbHVlKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gRXZlbnRQYXR0ZXJuRGlzcG9zYWJsZShkZWwsIGZuLCByZXQpIHtcbiAgICAgIHRoaXMuX2RlbCA9IGRlbDtcbiAgICAgIHRoaXMuX2ZuID0gZm47XG4gICAgICB0aGlzLl9yZXQgPSByZXQ7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBFdmVudFBhdHRlcm5EaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICBpc0Z1bmN0aW9uKHRoaXMuX2RlbCkgJiYgdGhpcy5fZGVsKHRoaXMuX2ZuLCB0aGlzLl9yZXQpO1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgZnJvbSBhbiBldmVudCBlbWl0dGVyIHZpYSBhbiBhZGRIYW5kbGVyL3JlbW92ZUhhbmRsZXIgcGFpci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWRkSGFuZGxlciBUaGUgZnVuY3Rpb24gdG8gYWRkIGEgaGFuZGxlciB0byB0aGUgZW1pdHRlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3JlbW92ZUhhbmRsZXJdIFRoZSBvcHRpb25hbCBmdW5jdGlvbiB0byByZW1vdmUgYSBoYW5kbGVyIGZyb20gYW4gZW1pdHRlci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBBIHNlbGVjdG9yIHdoaWNoIHRha2VzIHRoZSBhcmd1bWVudHMgZnJvbSB0aGUgZXZlbnQgaGFuZGxlciB0byBwcm9kdWNlIGEgc2luZ2xlIGl0ZW0gdG8geWllbGQgb24gbmV4dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggd3JhcHMgYW4gZXZlbnQgZnJvbSBhbiBldmVudCBlbWl0dGVyXG4gICAqL1xuICB2YXIgZnJvbUV2ZW50UGF0dGVybiA9IE9ic2VydmFibGUuZnJvbUV2ZW50UGF0dGVybiA9IGZ1bmN0aW9uIChhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3Rvcikge1xuICAgIHJldHVybiBuZXcgRXZlbnRQYXR0ZXJuT2JzZXJ2YWJsZShhZGRIYW5kbGVyLCByZW1vdmVIYW5kbGVyLCBzZWxlY3RvcikucHVibGlzaCgpLnJlZkNvdW50KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEludm9rZXMgdGhlIGFzeW5jaHJvbm91cyBmdW5jdGlvbiwgc3VyZmFjaW5nIHRoZSByZXN1bHQgdGhyb3VnaCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jdGlvbkFzeW5jIEFzeW5jaHJvbm91cyBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGEgUHJvbWlzZSB0byBydW4uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGV4cG9zaW5nIHRoZSBmdW5jdGlvbidzIHJlc3VsdCB2YWx1ZSwgb3IgYW4gZXhjZXB0aW9uLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5zdGFydEFzeW5jID0gZnVuY3Rpb24gKGZ1bmN0aW9uQXN5bmMpIHtcbiAgICB2YXIgcHJvbWlzZSA9IHRyeUNhdGNoKGZ1bmN0aW9uQXN5bmMpKCk7XG4gICAgaWYgKHByb21pc2UgPT09IGVycm9yT2JqKSB7IHJldHVybiBvYnNlcnZhYmxlVGhyb3cocHJvbWlzZS5lKTsgfVxuICAgIHJldHVybiBvYnNlcnZhYmxlRnJvbVByb21pc2UocHJvbWlzZSk7XG4gIH07XG5cbiAgdmFyIFBhdXNhYmxlT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGF1c2FibGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFBhdXNhYmxlT2JzZXJ2YWJsZShzb3VyY2UsIHBhdXNlcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIgPSBuZXcgU3ViamVjdCgpO1xuXG4gICAgICBpZiAocGF1c2VyICYmIHBhdXNlci5zdWJzY3JpYmUpIHtcbiAgICAgICAgdGhpcy5wYXVzZXIgPSB0aGlzLmNvbnRyb2xsZXIubWVyZ2UocGF1c2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGF1c2VyID0gdGhpcy5jb250cm9sbGVyO1xuICAgICAgfVxuXG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBQYXVzYWJsZU9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNvbm4gPSB0aGlzLnNvdXJjZS5wdWJsaXNoKCksXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IGNvbm4uc3Vic2NyaWJlKG8pLFxuICAgICAgICBjb25uZWN0aW9uID0gZGlzcG9zYWJsZUVtcHR5O1xuXG4gICAgICB2YXIgcGF1c2FibGUgPSB0aGlzLnBhdXNlci5kaXN0aW5jdFVudGlsQ2hhbmdlZCgpLnN1YnNjcmliZShmdW5jdGlvbiAoYikge1xuICAgICAgICBpZiAoYikge1xuICAgICAgICAgIGNvbm5lY3Rpb24gPSBjb25uLmNvbm5lY3QoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25uZWN0aW9uLmRpc3Bvc2UoKTtcbiAgICAgICAgICBjb25uZWN0aW9uID0gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG5ldyBOQXJ5RGlzcG9zYWJsZShbc3Vic2NyaXB0aW9uLCBjb25uZWN0aW9uLCBwYXVzYWJsZV0pO1xuICAgIH07XG5cbiAgICBQYXVzYWJsZU9ic2VydmFibGUucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dChmYWxzZSk7XG4gICAgfTtcblxuICAgIFBhdXNhYmxlT2JzZXJ2YWJsZS5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5jb250cm9sbGVyLm9uTmV4dCh0cnVlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhdXNhYmxlT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgYmFzZWQgdXBvbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB5aWVsZHMgdHJ1ZS9mYWxzZS5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHBhdXNlciA9IG5ldyBSeC5TdWJqZWN0KCk7XG4gICAqIHZhciBzb3VyY2UgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMCkucGF1c2FibGUocGF1c2VyKTtcbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBwYXVzZXIgVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdXNlZCB0byBwYXVzZSB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIHBhdXNlZCBiYXNlZCB1cG9uIHRoZSBwYXVzZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGF1c2FibGUgPSBmdW5jdGlvbiAocGF1c2VyKSB7XG4gICAgcmV0dXJuIG5ldyBQYXVzYWJsZU9ic2VydmFibGUodGhpcywgcGF1c2VyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBjb21iaW5lTGF0ZXN0U291cmNlKHNvdXJjZSwgc3ViamVjdCwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBoYXNWYWx1ZSA9IFtmYWxzZSwgZmFsc2VdLFxuICAgICAgICBoYXNWYWx1ZUFsbCA9IGZhbHNlLFxuICAgICAgICBpc0RvbmUgPSBmYWxzZSxcbiAgICAgICAgdmFsdWVzID0gbmV3IEFycmF5KDIpLFxuICAgICAgICBlcnI7XG5cbiAgICAgIGZ1bmN0aW9uIG5leHQoeCwgaSkge1xuICAgICAgICB2YWx1ZXNbaV0gPSB4O1xuICAgICAgICBoYXNWYWx1ZVtpXSA9IHRydWU7XG4gICAgICAgIGlmIChoYXNWYWx1ZUFsbCB8fCAoaGFzVmFsdWVBbGwgPSBoYXNWYWx1ZS5ldmVyeShpZGVudGl0eSkpKSB7XG4gICAgICAgICAgaWYgKGVycikgeyByZXR1cm4gby5vbkVycm9yKGVycik7IH1cbiAgICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2gocmVzdWx0U2VsZWN0b3IpLmFwcGx5KG51bGwsIHZhbHVlcyk7XG4gICAgICAgICAgaWYgKHJlcyA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXMuZSk7IH1cbiAgICAgICAgICBvLm9uTmV4dChyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlzRG9uZSAmJiB2YWx1ZXNbMV0gJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgIG5leHQoeCwgMCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKHZhbHVlc1sxXSkge1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBlcnIgPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXNEb25lID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhbHVlc1sxXSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfSksXG4gICAgICAgIHN1YmplY3Quc3Vic2NyaWJlKFxuICAgICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgICBuZXh0KHgsIDEpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlzRG9uZSA9IHRydWU7XG4gICAgICAgICAgICBuZXh0KHRydWUsIDEpO1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIHZhciBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUoc291cmNlLCBwYXVzZXIpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IFN1YmplY3QoKTtcblxuICAgICAgaWYgKHBhdXNlciAmJiBwYXVzZXIuc3Vic2NyaWJlKSB7XG4gICAgICAgIHRoaXMucGF1c2VyID0gdGhpcy5jb250cm9sbGVyLm1lcmdlKHBhdXNlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBhdXNlciA9IHRoaXMuY29udHJvbGxlcjtcbiAgICAgIH1cblxuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHEgPSBbXSwgcHJldmlvdXNTaG91bGRGaXJlO1xuXG4gICAgICBmdW5jdGlvbiBkcmFpblF1ZXVlKCkgeyB3aGlsZSAocS5sZW5ndGggPiAwKSB7IG8ub25OZXh0KHEuc2hpZnQoKSk7IH0gfVxuXG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID1cbiAgICAgICAgY29tYmluZUxhdGVzdFNvdXJjZShcbiAgICAgICAgICB0aGlzLnNvdXJjZSxcbiAgICAgICAgICB0aGlzLnBhdXNlci5zdGFydFdpdGgoZmFsc2UpLmRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICAgICAgZnVuY3Rpb24gKGRhdGEsIHNob3VsZEZpcmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IGRhdGE6IGRhdGEsIHNob3VsZEZpcmU6IHNob3VsZEZpcmUgfTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgICBpZiAocHJldmlvdXNTaG91bGRGaXJlICE9PSB1bmRlZmluZWQgJiYgcmVzdWx0cy5zaG91bGRGaXJlICE9PSBwcmV2aW91c1Nob3VsZEZpcmUpIHtcbiAgICAgICAgICAgICAgICBwcmV2aW91c1Nob3VsZEZpcmUgPSByZXN1bHRzLnNob3VsZEZpcmU7XG4gICAgICAgICAgICAgICAgLy8gY2hhbmdlIGluIHNob3VsZEZpcmVcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0cy5zaG91bGRGaXJlKSB7IGRyYWluUXVldWUoKTsgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXZpb3VzU2hvdWxkRmlyZSA9IHJlc3VsdHMuc2hvdWxkRmlyZTtcbiAgICAgICAgICAgICAgICAvLyBuZXcgZGF0YVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzLnNob3VsZEZpcmUpIHtcbiAgICAgICAgICAgICAgICAgIG8ub25OZXh0KHJlc3VsdHMuZGF0YSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHEucHVzaChyZXN1bHRzLmRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGRyYWluUXVldWUoKTtcbiAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICk7XG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9uOyAgICAgIFxuICAgIH07XG5cbiAgICBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZS5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmNvbnRyb2xsZXIub25OZXh0KGZhbHNlKTtcbiAgICB9O1xuXG4gICAgUGF1c2FibGVCdWZmZXJlZE9ic2VydmFibGUucHJvdG90eXBlLnJlc3VtZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuY29udHJvbGxlci5vbk5leHQodHJ1ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBQYXVzYWJsZUJ1ZmZlcmVkT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIG9ic2VydmFibGUgc2VxdWVuY2UgYmFzZWQgdXBvbiB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCB5aWVsZHMgdHJ1ZS9mYWxzZSxcbiAgICogYW5kIHlpZWxkcyB0aGUgdmFsdWVzIHRoYXQgd2VyZSBidWZmZXJlZCB3aGlsZSBwYXVzZWQuXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciBwYXVzZXIgPSBuZXcgUnguU3ViamVjdCgpO1xuICAgKiB2YXIgc291cmNlID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDApLnBhdXNhYmxlQnVmZmVyZWQocGF1c2VyKTtcbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBwYXVzZXIgVGhlIG9ic2VydmFibGUgc2VxdWVuY2UgdXNlZCB0byBwYXVzZSB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIHBhdXNlZCBiYXNlZCB1cG9uIHRoZSBwYXVzZXIuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGF1c2FibGVCdWZmZXJlZCA9IGZ1bmN0aW9uIChwYXVzZXIpIHtcbiAgICByZXR1cm4gbmV3IFBhdXNhYmxlQnVmZmVyZWRPYnNlcnZhYmxlKHRoaXMsIHBhdXNlcik7XG4gIH07XG5cbiAgdmFyIENvbnRyb2xsZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb250cm9sbGVkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDb250cm9sbGVkT2JzZXJ2YWJsZSAoc291cmNlLCBlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc3ViamVjdCA9IG5ldyBDb250cm9sbGVkU3ViamVjdChlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlLm11bHRpY2FzdCh0aGlzLnN1YmplY3QpLnJlZkNvdW50KCk7XG4gICAgfVxuXG4gICAgQ29udHJvbGxlZE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuc291cmNlLnN1YnNjcmliZShvKTtcbiAgICB9O1xuXG4gICAgQ29udHJvbGxlZE9ic2VydmFibGUucHJvdG90eXBlLnJlcXVlc3QgPSBmdW5jdGlvbiAobnVtYmVyT2ZJdGVtcykge1xuICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5yZXF1ZXN0KG51bWJlck9mSXRlbXMgPT0gbnVsbCA/IC0xIDogbnVtYmVyT2ZJdGVtcyk7XG4gICAgfTtcblxuICAgIHJldHVybiBDb250cm9sbGVkT2JzZXJ2YWJsZTtcblxuICB9KE9ic2VydmFibGUpKTtcblxuICB2YXIgQ29udHJvbGxlZFN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbnRyb2xsZWRTdWJqZWN0LCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIENvbnRyb2xsZWRTdWJqZWN0KGVuYWJsZVF1ZXVlLCBzY2hlZHVsZXIpIHtcbiAgICAgIGVuYWJsZVF1ZXVlID09IG51bGwgJiYgKGVuYWJsZVF1ZXVlID0gdHJ1ZSk7XG5cbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zdWJqZWN0ID0gbmV3IFN1YmplY3QoKTtcbiAgICAgIHRoaXMuZW5hYmxlUXVldWUgPSBlbmFibGVRdWV1ZTtcbiAgICAgIHRoaXMucXVldWUgPSBlbmFibGVRdWV1ZSA/IFtdIDogbnVsbDtcbiAgICAgIHRoaXMucmVxdWVzdGVkQ291bnQgPSAwO1xuICAgICAgdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgdGhpcy5oYXNGYWlsZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzQ29tcGxldGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlciB8fCBjdXJyZW50VGhyZWFkU2NoZWR1bGVyO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoQ29udHJvbGxlZFN1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlciwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ViamVjdC5zdWJzY3JpYmUobyk7XG4gICAgICB9LFxuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5oYXNDb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMuZW5hYmxlUXVldWUgfHwgdGhpcy5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLnN1YmplY3Qub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucXVldWUucHVzaChOb3RpZmljYXRpb24uY3JlYXRlT25Db21wbGV0ZWQoKSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5oYXNGYWlsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICAgIGlmICghdGhpcy5lbmFibGVRdWV1ZSB8fCB0aGlzLnF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuc3ViamVjdC5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMucXVldWUucHVzaChOb3RpZmljYXRpb24uY3JlYXRlT25FcnJvcihlcnJvcikpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVxdWVzdGVkQ291bnQgPD0gMCkge1xuICAgICAgICAgIHRoaXMuZW5hYmxlUXVldWUgJiYgdGhpcy5xdWV1ZS5wdXNoKE5vdGlmaWNhdGlvbi5jcmVhdGVPbk5leHQodmFsdWUpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAodGhpcy5yZXF1ZXN0ZWRDb3VudC0tID09PSAwKSAmJiB0aGlzLmRpc3Bvc2VDdXJyZW50UmVxdWVzdCgpO1xuICAgICAgICAgIHRoaXMuc3ViamVjdC5vbk5leHQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX3Byb2Nlc3NSZXF1ZXN0OiBmdW5jdGlvbiAobnVtYmVyT2ZJdGVtcykge1xuICAgICAgICBpZiAodGhpcy5lbmFibGVRdWV1ZSkge1xuICAgICAgICAgIHdoaWxlICh0aGlzLnF1ZXVlLmxlbmd0aCA+IDAgJiYgKG51bWJlck9mSXRlbXMgPiAwIHx8IHRoaXMucXVldWVbMF0ua2luZCAhPT0gJ04nKSkge1xuICAgICAgICAgICAgdmFyIGZpcnN0ID0gdGhpcy5xdWV1ZS5zaGlmdCgpO1xuICAgICAgICAgICAgZmlyc3QuYWNjZXB0KHRoaXMuc3ViamVjdCk7XG4gICAgICAgICAgICBpZiAoZmlyc3Qua2luZCA9PT0gJ04nKSB7XG4gICAgICAgICAgICAgIG51bWJlck9mSXRlbXMtLTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVtYmVyT2ZJdGVtcztcbiAgICAgIH0sXG4gICAgICByZXF1ZXN0OiBmdW5jdGlvbiAobnVtYmVyKSB7XG4gICAgICAgIHRoaXMuZGlzcG9zZUN1cnJlbnRSZXF1ZXN0KCk7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUgPSB0aGlzLnNjaGVkdWxlci5zY2hlZHVsZShudW1iZXIsXG4gICAgICAgIGZ1bmN0aW9uKHMsIGkpIHtcbiAgICAgICAgICB2YXIgcmVtYWluaW5nID0gc2VsZi5fcHJvY2Vzc1JlcXVlc3QoaSk7XG4gICAgICAgICAgdmFyIHN0b3BwZWQgPSBzZWxmLmhhc0NvbXBsZXRlZCB8fCBzZWxmLmhhc0ZhaWxlZDtcbiAgICAgICAgICBpZiAoIXN0b3BwZWQgJiYgcmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgc2VsZi5yZXF1ZXN0ZWRDb3VudCA9IHJlbWFpbmluZztcblxuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVDcmVhdGUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBzZWxmLnJlcXVlc3RlZENvdW50ID0gMDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAvLyBTY2hlZHVsZWQgaXRlbSBpcyBzdGlsbCBpbiBwcm9ncmVzcy4gUmV0dXJuIGEgbmV3XG4gICAgICAgICAgICAgIC8vIGRpc3Bvc2FibGUgdG8gYWxsb3cgdGhlIHJlcXVlc3QgdG8gYmUgaW50ZXJydXB0ZWRcbiAgICAgICAgICAgICAgLy8gdmlhIGRpc3Bvc2UuXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlO1xuICAgICAgfSxcbiAgICAgIGRpc3Bvc2VDdXJyZW50UmVxdWVzdDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlKSB7XG4gICAgICAgICAgdGhpcy5yZXF1ZXN0ZWREaXNwb3NhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLnJlcXVlc3RlZERpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQ29udHJvbGxlZFN1YmplY3Q7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIC8qKlxuICAgKiBBdHRhY2hlcyBhIGNvbnRyb2xsZXIgdG8gdGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgYWJpbGl0eSB0byBxdWV1ZS5cbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHNvdXJjZSA9IFJ4Lk9ic2VydmFibGUuaW50ZXJ2YWwoMTAwKS5jb250cm9sbGVkKCk7XG4gICAqIHNvdXJjZS5yZXF1ZXN0KDMpOyAvLyBSZWFkcyAzIHZhbHVlc1xuICAgKiBAcGFyYW0ge2Jvb2x9IGVuYWJsZVF1ZXVlIHRydXRoeSB2YWx1ZSB0byBkZXRlcm1pbmUgaWYgdmFsdWVzIHNob3VsZCBiZSBxdWV1ZWQgcGVuZGluZyB0aGUgbmV4dCByZXF1ZXN0XG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgZGV0ZXJtaW5lcyBob3cgdGhlIHJlcXVlc3RzIHdpbGwgYmUgc2NoZWR1bGVkXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBvbmx5IHByb3BhZ2F0ZXMgdmFsdWVzIG9uIHJlcXVlc3QuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uY29udHJvbGxlZCA9IGZ1bmN0aW9uIChlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKSB7XG5cbiAgICBpZiAoZW5hYmxlUXVldWUgJiYgaXNTY2hlZHVsZXIoZW5hYmxlUXVldWUpKSB7XG4gICAgICBzY2hlZHVsZXIgPSBlbmFibGVRdWV1ZTtcbiAgICAgIGVuYWJsZVF1ZXVlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZW5hYmxlUXVldWUgPT0gbnVsbCkgeyAgZW5hYmxlUXVldWUgPSB0cnVlOyB9XG4gICAgcmV0dXJuIG5ldyBDb250cm9sbGVkT2JzZXJ2YWJsZSh0aGlzLCBlbmFibGVRdWV1ZSwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgU3RvcEFuZFdhaXRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTdG9wQW5kV2FpdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3RvcEFuZFdhaXRPYnNlcnZhYmxlIChzb3VyY2UpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgc2VsZi5zb3VyY2UucmVxdWVzdCgxKTtcbiAgICB9XG5cbiAgICBTdG9wQW5kV2FpdE9ic2VydmFibGUucHJvdG90eXBlLl9zdWJzY3JpYmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFN0b3BBbmRXYWl0T2JzZXJ2ZXIobywgdGhpcywgdGhpcy5zdWJzY3JpcHRpb24pKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRpb24sXG4gICAgICAgIGRlZmF1bHRTY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgc2NoZWR1bGVNZXRob2QpXG4gICAgICApO1xuICAgIH07XG5cbiAgICB2YXIgU3RvcEFuZFdhaXRPYnNlcnZlciA9IChmdW5jdGlvbiAoX19zdWJfXykge1xuICAgICAgaW5oZXJpdHMoU3RvcEFuZFdhaXRPYnNlcnZlciwgX19zdWJfXyk7XG4gICAgICBmdW5jdGlvbiBTdG9wQW5kV2FpdE9ic2VydmVyIChvYnNlcnZlciwgb2JzZXJ2YWJsZSwgY2FuY2VsKSB7XG4gICAgICAgIF9fc3ViX18uY2FsbCh0aGlzKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlO1xuICAgICAgICB0aGlzLmNhbmNlbCA9IGNhbmNlbDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBTdG9wQW5kV2FpdE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICB9O1xuXG4gICAgICBTdG9wQW5kV2FpdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGlubmVyU2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgICBzZWxmLm9ic2VydmFibGUuc291cmNlLnJlcXVlc3QoMSk7XG4gICAgICB9XG5cbiAgICAgIFN0b3BBbmRXYWl0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbk5leHQodmFsdWUpO1xuICAgICAgICB0aGlzLnNjaGVkdWxlRGlzcG9zYWJsZSA9IGRlZmF1bHRTY2hlZHVsZXIuc2NoZWR1bGUodGhpcywgaW5uZXJTY2hlZHVsZU1ldGhvZCk7XG4gICAgICB9O1xuXG4gICAgICBTdG9wQW5kV2FpdE9ic2VydmFibGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XG4gICAgICAgIGlmICh0aGlzLmNhbmNlbCkge1xuICAgICAgICAgIHRoaXMuY2FuY2VsLmRpc3Bvc2UoKTtcbiAgICAgICAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlKSB7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUuZGlzcG9zZSgpO1xuICAgICAgICAgIHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBfX3N1Yl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gU3RvcEFuZFdhaXRPYnNlcnZlcjtcbiAgICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAgIHJldHVybiBTdG9wQW5kV2FpdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG5cbiAgLyoqXG4gICAqIEF0dGFjaGVzIGEgc3RvcCBhbmQgd2FpdCBvYnNlcnZhYmxlIHRvIHRoZSBjdXJyZW50IG9ic2VydmFibGUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBIHN0b3AgYW5kIHdhaXQgb2JzZXJ2YWJsZS5cbiAgICovXG4gIENvbnRyb2xsZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5zdG9wQW5kV2FpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gbmV3IFN0b3BBbmRXYWl0T2JzZXJ2YWJsZSh0aGlzKTtcbiAgfTtcblxuICB2YXIgV2luZG93ZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhXaW5kb3dlZE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gV2luZG93ZWRPYnNlcnZhYmxlKHNvdXJjZSwgd2luZG93U2l6ZSkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMud2luZG93U2l6ZSA9IHdpbmRvd1NpemU7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgc2VsZi5zb3VyY2UucmVxdWVzdChzZWxmLndpbmRvd1NpemUpO1xuICAgIH1cblxuICAgIFdpbmRvd2VkT2JzZXJ2YWJsZS5wcm90b3R5cGUuX3N1YnNjcmliZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbiA9IHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgV2luZG93ZWRPYnNlcnZlcihvLCB0aGlzLCB0aGlzLnN1YnNjcmlwdGlvbikpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKFxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbixcbiAgICAgICAgZGVmYXVsdFNjaGVkdWxlci5zY2hlZHVsZSh0aGlzLCBzY2hlZHVsZU1ldGhvZClcbiAgICAgICk7XG4gICAgfTtcblxuICAgIHZhciBXaW5kb3dlZE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1Yl9fKSB7XG4gICAgICBpbmhlcml0cyhXaW5kb3dlZE9ic2VydmVyLCBfX3N1Yl9fKTtcbiAgICAgIGZ1bmN0aW9uIFdpbmRvd2VkT2JzZXJ2ZXIob2JzZXJ2ZXIsIG9ic2VydmFibGUsIGNhbmNlbCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGU7XG4gICAgICAgIHRoaXMuY2FuY2VsID0gY2FuY2VsO1xuICAgICAgICB0aGlzLnJlY2VpdmVkID0gMDtcbiAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgICBfX3N1Yl9fLmNhbGwodGhpcyk7XG4gICAgICB9XG5cbiAgICAgIFdpbmRvd2VkT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIH07XG5cbiAgICAgIFdpbmRvd2VkT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25FcnJvcihlcnJvcik7XG4gICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgfTtcblxuICAgICAgZnVuY3Rpb24gaW5uZXJTY2hlZHVsZU1ldGhvZChzLCBzZWxmKSB7XG4gICAgICAgIHNlbGYub2JzZXJ2YWJsZS5zb3VyY2UucmVxdWVzdChzZWxmLm9ic2VydmFibGUud2luZG93U2l6ZSk7XG4gICAgICB9XG5cbiAgICAgIFdpbmRvd2VkT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbk5leHQodmFsdWUpO1xuICAgICAgICB0aGlzLnJlY2VpdmVkID0gKyt0aGlzLnJlY2VpdmVkICUgdGhpcy5vYnNlcnZhYmxlLndpbmRvd1NpemU7XG4gICAgICAgIHRoaXMucmVjZWl2ZWQgPT09IDAgJiYgKHRoaXMuc2NoZWR1bGVEaXNwb3NhYmxlID0gZGVmYXVsdFNjaGVkdWxlci5zY2hlZHVsZSh0aGlzLCBpbm5lclNjaGVkdWxlTWV0aG9kKSk7XG4gICAgICB9O1xuXG4gICAgICBXaW5kb3dlZE9ic2VydmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuY2FuY2VsKSB7XG4gICAgICAgICAgdGhpcy5jYW5jZWwuZGlzcG9zZSgpO1xuICAgICAgICAgIHRoaXMuY2FuY2VsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5zY2hlZHVsZURpc3Bvc2FibGUpIHtcbiAgICAgICAgICB0aGlzLnNjaGVkdWxlRGlzcG9zYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZURpc3Bvc2FibGUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIF9fc3ViX18ucHJvdG90eXBlLmRpc3Bvc2UuY2FsbCh0aGlzKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiBXaW5kb3dlZE9ic2VydmVyO1xuICAgIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gICAgcmV0dXJuIFdpbmRvd2VkT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBzbGlkaW5nIHdpbmRvd2VkIG9ic2VydmFibGUgYmFzZWQgdXBvbiB0aGUgd2luZG93IHNpemUuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB3aW5kb3dTaXplIFRoZSBudW1iZXIgb2YgaXRlbXMgaW4gdGhlIHdpbmRvd1xuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQSB3aW5kb3dlZCBvYnNlcnZhYmxlIGJhc2VkIHVwb24gdGhlIHdpbmRvdyBzaXplLlxuICAgKi9cbiAgQ29udHJvbGxlZE9ic2VydmFibGUucHJvdG90eXBlLndpbmRvd2VkID0gZnVuY3Rpb24gKHdpbmRvd1NpemUpIHtcbiAgICByZXR1cm4gbmV3IFdpbmRvd2VkT2JzZXJ2YWJsZSh0aGlzLCB3aW5kb3dTaXplKTtcbiAgfTtcblxuICAvKipcbiAgICogUGlwZXMgdGhlIGV4aXN0aW5nIE9ic2VydmFibGUgc2VxdWVuY2UgaW50byBhIE5vZGUuanMgU3RyZWFtLlxuICAgKiBAcGFyYW0ge1N0cmVhbX0gZGVzdCBUaGUgZGVzdGluYXRpb24gTm9kZS5qcyBzdHJlYW0uXG4gICAqIEByZXR1cm5zIHtTdHJlYW19IFRoZSBkZXN0aW5hdGlvbiBzdHJlYW0uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGlwZSA9IGZ1bmN0aW9uIChkZXN0KSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXMucGF1c2FibGVCdWZmZXJlZCgpO1xuXG4gICAgZnVuY3Rpb24gb25EcmFpbigpIHtcbiAgICAgIHNvdXJjZS5yZXN1bWUoKTtcbiAgICB9XG5cbiAgICBkZXN0LmFkZExpc3RlbmVyKCdkcmFpbicsIG9uRHJhaW4pO1xuXG4gICAgc291cmNlLnN1YnNjcmliZShcbiAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICFkZXN0LndyaXRlKFN0cmluZyh4KSkgJiYgc291cmNlLnBhdXNlKCk7XG4gICAgICB9LFxuICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICBkZXN0LmVtaXQoJ2Vycm9yJywgZXJyKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIEhhY2sgY2hlY2sgYmVjYXVzZSBTVERJTyBpcyBub3QgY2xvc2FibGVcbiAgICAgICAgIWRlc3QuX2lzU3RkaW8gJiYgZGVzdC5lbmQoKTtcbiAgICAgICAgZGVzdC5yZW1vdmVMaXN0ZW5lcignZHJhaW4nLCBvbkRyYWluKTtcbiAgICAgIH0pO1xuXG4gICAgc291cmNlLnJlc3VtZSgpO1xuXG4gICAgcmV0dXJuIGRlc3Q7XG4gIH07XG5cbiAgdmFyIE11bHRpY2FzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKE11bHRpY2FzdE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gTXVsdGljYXN0T2JzZXJ2YWJsZShzb3VyY2UsIGZuMSwgZm4yKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2ZuMSA9IGZuMTtcbiAgICAgIHRoaXMuX2ZuMiA9IGZuMjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIE11bHRpY2FzdE9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGNvbm5lY3RhYmxlID0gdGhpcy5zb3VyY2UubXVsdGljYXN0KHRoaXMuX2ZuMSgpKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZSh0aGlzLl9mbjIoY29ubmVjdGFibGUpLnN1YnNjcmliZShvKSwgY29ubmVjdGFibGUuY29ubmVjdCgpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE11bHRpY2FzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogTXVsdGljYXN0cyB0aGUgc291cmNlIHNlcXVlbmNlIG5vdGlmaWNhdGlvbnMgdGhyb3VnaCBhbiBpbnN0YW50aWF0ZWQgc3ViamVjdCBpbnRvIGFsbCB1c2VzIG9mIHRoZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi4gRWFjaFxuICAgKiBzdWJzY3JpcHRpb24gdG8gdGhlIHJlc3VsdGluZyBzZXF1ZW5jZSBjYXVzZXMgYSBzZXBhcmF0ZSBtdWx0aWNhc3QgaW52b2NhdGlvbiwgZXhwb3NpbmcgdGhlIHNlcXVlbmNlIHJlc3VsdGluZyBmcm9tIHRoZSBzZWxlY3RvciBmdW5jdGlvbidzXG4gICAqIGludm9jYXRpb24uIEZvciBzcGVjaWFsaXphdGlvbnMgd2l0aCBmaXhlZCBzdWJqZWN0IHR5cGVzLCBzZWUgUHVibGlzaCwgUHVibGlzaExhc3QsIGFuZCBSZXBsYXkuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIDEgLSByZXMgPSBzb3VyY2UubXVsdGljYXN0KG9ic2VydmFibGUpO1xuICAgKiAyIC0gcmVzID0gc291cmNlLm11bHRpY2FzdChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgU3ViamVjdCgpOyB9LCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258U3ViamVjdH0gc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yXG4gICAqIEZhY3RvcnkgZnVuY3Rpb24gdG8gY3JlYXRlIGFuIGludGVybWVkaWF0ZSBzdWJqZWN0IHRocm91Z2ggd2hpY2ggdGhlIHNvdXJjZSBzZXF1ZW5jZSdzIGVsZW1lbnRzIHdpbGwgYmUgbXVsdGljYXN0IHRvIHRoZSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICogT3I6XG4gICAqIFN1YmplY3QgdG8gcHVzaCBzb3VyY2UgZWxlbWVudHMgaW50by5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3NlbGVjdG9yXSBPcHRpb25hbCBzZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2Ugc3ViamVjdCB0byB0aGUgcG9saWNpZXMgZW5mb3JjZWQgYnkgdGhlIGNyZWF0ZWQgc3ViamVjdC4gU3BlY2lmaWVkIG9ubHkgaWYgPHBhcmFtcmVmIG5hbWU9XCJzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3JcIiBpcyBhIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgY29udGFpbnMgdGhlIGVsZW1lbnRzIG9mIGEgc2VxdWVuY2UgcHJvZHVjZWQgYnkgbXVsdGljYXN0aW5nIHRoZSBzb3VyY2Ugc2VxdWVuY2Ugd2l0aGluIGEgc2VsZWN0b3IgZnVuY3Rpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubXVsdGljYXN0ID0gZnVuY3Rpb24gKHN1YmplY3RPclN1YmplY3RTZWxlY3Rvciwgc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gaXNGdW5jdGlvbihzdWJqZWN0T3JTdWJqZWN0U2VsZWN0b3IpID9cbiAgICAgIG5ldyBNdWx0aWNhc3RPYnNlcnZhYmxlKHRoaXMsIHN1YmplY3RPclN1YmplY3RTZWxlY3Rvciwgc2VsZWN0b3IpIDpcbiAgICAgIG5ldyBDb25uZWN0YWJsZU9ic2VydmFibGUodGhpcywgc3ViamVjdE9yU3ViamVjdFNlbGVjdG9yKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBpbnZva2luZyB0aGUgc2VsZWN0b3Igb24gYSBjb25uZWN0YWJsZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIE11bHRpY2FzdCB1c2luZyBhIHJlZ3VsYXIgU3ViamVjdC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlc3JlcyA9IHNvdXJjZS5wdWJsaXNoKCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaChmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtzZWxlY3Rvcl0gU2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgbXVsdGljYXN0ZWQgc291cmNlIHNlcXVlbmNlIGFzIG1hbnkgdGltZXMgYXMgbmVlZGVkLCB3aXRob3V0IGNhdXNpbmcgbXVsdGlwbGUgc3Vic2NyaXB0aW9ucyB0byB0aGUgc291cmNlIHNlcXVlbmNlLiBTdWJzY3JpYmVycyB0byB0aGUgZ2l2ZW4gc291cmNlIHdpbGwgcmVjZWl2ZSBhbGwgbm90aWZpY2F0aW9ucyBvZiB0aGUgc291cmNlIGZyb20gdGhlIHRpbWUgb2YgdGhlIHN1YnNjcmlwdGlvbiBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wdWJsaXNoID0gZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yICYmIGlzRnVuY3Rpb24oc2VsZWN0b3IpID9cbiAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBTdWJqZWN0KCk7IH0sIHNlbGVjdG9yKSA6XG4gICAgICB0aGlzLm11bHRpY2FzdChuZXcgU3ViamVjdCgpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIHB1Ymxpc2ggd2hpY2ggY3JlYXRlcyBhIHN1YnNjcmlwdGlvbiB3aGVuIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGdvZXMgZnJvbSB6ZXJvIHRvIG9uZSwgdGhlbiBzaGFyZXMgdGhhdCBzdWJzY3JpcHRpb24gd2l0aCBhbGwgc3Vic2VxdWVudCBvYnNlcnZlcnMgdW50aWwgdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgcmV0dXJucyB0byB6ZXJvLCBhdCB3aGljaCBwb2ludCB0aGUgc3Vic2NyaXB0aW9uIGlzIGRpc3Bvc2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNoYXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnB1Ymxpc2goKS5yZWZDb3VudCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBzZWxlY3RvciBvbiBhIGNvbm5lY3RhYmxlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlIGNvbnRhaW5pbmcgb25seSB0aGUgbGFzdCBub3RpZmljYXRpb24uXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBNdWx0aWNhc3QgdXNpbmcgYSBBc3luY1N1YmplY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaExhc3QoKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5wdWJsaXNoTGFzdChmdW5jdGlvbiAoeCkgeyByZXR1cm4geDsgfSk7XG4gICAqXG4gICAqIEBwYXJhbSBzZWxlY3RvciBbT3B0aW9uYWxdIFNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIG9ubHkgcmVjZWl2ZSB0aGUgbGFzdCBub3RpZmljYXRpb24gb2YgdGhlIHNvdXJjZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wdWJsaXNoTGFzdCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgIHJldHVybiBzZWxlY3RvciAmJiBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/XG4gICAgICB0aGlzLm11bHRpY2FzdChmdW5jdGlvbiAoKSB7IHJldHVybiBuZXcgQXN5bmNTdWJqZWN0KCk7IH0sIHNlbGVjdG9yKSA6XG4gICAgICB0aGlzLm11bHRpY2FzdChuZXcgQXN5bmNTdWJqZWN0KCkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBpcyB0aGUgcmVzdWx0IG9mIGludm9raW5nIHRoZSBzZWxlY3RvciBvbiBhIGNvbm5lY3RhYmxlIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBzaGFyZXMgYSBzaW5nbGUgc3Vic2NyaXB0aW9uIHRvIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlIGFuZCBzdGFydHMgd2l0aCBpbml0aWFsVmFsdWUuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiBNdWx0aWNhc3QgdXNpbmcgYSBCZWhhdmlvclN1YmplY3QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqIHZhciByZXMgPSBzb3VyY2UucHVibGlzaFZhbHVlKDQyKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5wdWJsaXNoVmFsdWUoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHguc2VsZWN0KGZ1bmN0aW9uICh5KSB7IHJldHVybiB5ICogeTsgfSkgfSwgNDIpO1xuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbc2VsZWN0b3JdIE9wdGlvbmFsIHNlbGVjdG9yIGZ1bmN0aW9uIHdoaWNoIGNhbiB1c2UgdGhlIG11bHRpY2FzdGVkIHNvdXJjZSBzZXF1ZW5jZSBhcyBtYW55IHRpbWVzIGFzIG5lZWRlZCwgd2l0aG91dCBjYXVzaW5nIG11bHRpcGxlIHN1YnNjcmlwdGlvbnMgdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZS4gU3Vic2NyaWJlcnMgdG8gdGhlIGdpdmVuIHNvdXJjZSB3aWxsIHJlY2VpdmUgaW1tZWRpYXRlbHkgcmVjZWl2ZSB0aGUgaW5pdGlhbCB2YWx1ZSwgZm9sbG93ZWQgYnkgYWxsIG5vdGlmaWNhdGlvbnMgb2YgdGhlIHNvdXJjZSBmcm9tIHRoZSB0aW1lIG9mIHRoZSBzdWJzY3JpcHRpb24gb24uXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxWYWx1ZSBJbml0aWFsIHZhbHVlIHJlY2VpdmVkIGJ5IG9ic2VydmVycyB1cG9uIHN1YnNjcmlwdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZSB3aXRoaW4gYSBzZWxlY3RvciBmdW5jdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5wdWJsaXNoVmFsdWUgPSBmdW5jdGlvbiAoaW5pdGlhbFZhbHVlT3JTZWxlY3RvciwgaW5pdGlhbFZhbHVlKSB7XG4gICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDIgP1xuICAgICAgdGhpcy5tdWx0aWNhc3QoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbmV3IEJlaGF2aW9yU3ViamVjdChpbml0aWFsVmFsdWUpO1xuICAgICAgfSwgaW5pdGlhbFZhbHVlT3JTZWxlY3RvcikgOlxuICAgICAgdGhpcy5tdWx0aWNhc3QobmV3IEJlaGF2aW9yU3ViamVjdChpbml0aWFsVmFsdWVPclNlbGVjdG9yKSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgYW5kIHN0YXJ0cyB3aXRoIGFuIGluaXRpYWxWYWx1ZS5cbiAgICogVGhpcyBvcGVyYXRvciBpcyBhIHNwZWNpYWxpemF0aW9uIG9mIHB1Ymxpc2hWYWx1ZSB3aGljaCBjcmVhdGVzIGEgc3Vic2NyaXB0aW9uIHdoZW4gdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgZ29lcyBmcm9tIHplcm8gdG8gb25lLCB0aGVuIHNoYXJlcyB0aGF0IHN1YnNjcmlwdGlvbiB3aXRoIGFsbCBzdWJzZXF1ZW50IG9ic2VydmVycyB1bnRpbCB0aGUgbnVtYmVyIG9mIG9ic2VydmVycyByZXR1cm5zIHRvIHplcm8sIGF0IHdoaWNoIHBvaW50IHRoZSBzdWJzY3JpcHRpb24gaXMgZGlzcG9zZWQuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxWYWx1ZSBJbml0aWFsIHZhbHVlIHJlY2VpdmVkIGJ5IG9ic2VydmVycyB1cG9uIHN1YnNjcmlwdGlvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zaGFyZVZhbHVlID0gZnVuY3Rpb24gKGluaXRpYWxWYWx1ZSkge1xuICAgIHJldHVybiB0aGlzLnB1Ymxpc2hWYWx1ZShpbml0aWFsVmFsdWUpLnJlZkNvdW50KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHNlbGVjdG9yIG9uIGEgY29ubmVjdGFibGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHNoYXJlcyBhIHNpbmdsZSBzdWJzY3JpcHRpb24gdG8gdGhlIHVuZGVybHlpbmcgc2VxdWVuY2UgcmVwbGF5aW5nIG5vdGlmaWNhdGlvbnMgc3ViamVjdCB0byBhIG1heGltdW0gdGltZSBsZW5ndGggZm9yIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBUaGlzIG9wZXJhdG9yIGlzIGEgc3BlY2lhbGl6YXRpb24gb2YgTXVsdGljYXN0IHVzaW5nIGEgUmVwbGF5U3ViamVjdC5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5yZXBsYXkobnVsbCwgMyk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KG51bGwsIDMsIDUwMCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2UucmVwbGF5KG51bGwsIDMsIDUwMCwgc2NoZWR1bGVyKTtcbiAgICogdmFyIHJlcyA9IHNvdXJjZS5yZXBsYXkoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHgudGFrZSg2KS5yZXBlYXQoKTsgfSwgMywgNTAwLCBzY2hlZHVsZXIpO1xuICAgKlxuICAgKiBAcGFyYW0gc2VsZWN0b3IgW09wdGlvbmFsXSBTZWxlY3RvciBmdW5jdGlvbiB3aGljaCBjYW4gdXNlIHRoZSBtdWx0aWNhc3RlZCBzb3VyY2Ugc2VxdWVuY2UgYXMgbWFueSB0aW1lcyBhcyBuZWVkZWQsIHdpdGhvdXQgY2F1c2luZyBtdWx0aXBsZSBzdWJzY3JpcHRpb25zIHRvIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIFN1YnNjcmliZXJzIHRvIHRoZSBnaXZlbiBzb3VyY2Ugd2lsbCByZWNlaXZlIGFsbCB0aGUgbm90aWZpY2F0aW9ucyBvZiB0aGUgc291cmNlIHN1YmplY3QgdG8gdGhlIHNwZWNpZmllZCByZXBsYXkgYnVmZmVyIHRyaW1taW5nIHBvbGljeS5cbiAgICogQHBhcmFtIGJ1ZmZlclNpemUgW09wdGlvbmFsXSBNYXhpbXVtIGVsZW1lbnQgY291bnQgb2YgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIEBwYXJhbSB3aW5kb3dTaXplIFtPcHRpb25hbF0gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogQHBhcmFtIHNjaGVkdWxlciBbT3B0aW9uYWxdIFNjaGVkdWxlciB3aGVyZSBjb25uZWN0ZWQgb2JzZXJ2ZXJzIHdpdGhpbiB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIG9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnJlcGxheSA9IGZ1bmN0aW9uIChzZWxlY3RvciwgYnVmZmVyU2l6ZSwgd2luZG93U2l6ZSwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yICYmIGlzRnVuY3Rpb24oc2VsZWN0b3IpID9cbiAgICAgIHRoaXMubXVsdGljYXN0KGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5ldyBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcik7IH0sIHNlbGVjdG9yKSA6XG4gICAgICB0aGlzLm11bHRpY2FzdChuZXcgUmVwbGF5U3ViamVjdChidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpKTtcbiAgfTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZSByZXBsYXlpbmcgbm90aWZpY2F0aW9ucyBzdWJqZWN0IHRvIGEgbWF4aW11bSB0aW1lIGxlbmd0aCBmb3IgdGhlIHJlcGxheSBidWZmZXIuXG4gICAqIFRoaXMgb3BlcmF0b3IgaXMgYSBzcGVjaWFsaXphdGlvbiBvZiByZXBsYXkgd2hpY2ggY3JlYXRlcyBhIHN1YnNjcmlwdGlvbiB3aGVuIHRoZSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGdvZXMgZnJvbSB6ZXJvIHRvIG9uZSwgdGhlbiBzaGFyZXMgdGhhdCBzdWJzY3JpcHRpb24gd2l0aCBhbGwgc3Vic2VxdWVudCBvYnNlcnZlcnMgdW50aWwgdGhlIG51bWJlciBvZiBvYnNlcnZlcnMgcmV0dXJucyB0byB6ZXJvLCBhdCB3aGljaCBwb2ludCB0aGUgc3Vic2NyaXB0aW9uIGlzIGRpc3Bvc2VkLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiB2YXIgcmVzID0gc291cmNlLnNoYXJlUmVwbGF5KDMpO1xuICAgKiB2YXIgcmVzID0gc291cmNlLnNoYXJlUmVwbGF5KDMsIDUwMCk7XG4gICAqIHZhciByZXMgPSBzb3VyY2Uuc2hhcmVSZXBsYXkoMywgNTAwLCBzY2hlZHVsZXIpO1xuICAgKlxuXG4gICAqIEBwYXJhbSBidWZmZXJTaXplIFtPcHRpb25hbF0gTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgKiBAcGFyYW0gd2luZG93IFtPcHRpb25hbF0gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiB0aGUgcmVwbGF5IGJ1ZmZlci5cbiAgICogQHBhcmFtIHNjaGVkdWxlciBbT3B0aW9uYWxdIFNjaGVkdWxlciB3aGVyZSBjb25uZWN0ZWQgb2JzZXJ2ZXJzIHdpdGhpbiB0aGUgc2VsZWN0b3IgZnVuY3Rpb24gd2lsbCBiZSBpbnZva2VkIG9uLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnNoYXJlUmVwbGF5ID0gZnVuY3Rpb24gKGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiB0aGlzLnJlcGxheShudWxsLCBidWZmZXJTaXplLCB3aW5kb3dTaXplLCBzY2hlZHVsZXIpLnJlZkNvdW50KCk7XG4gIH07XG5cbiAgdmFyIElubmVyU3Vic2NyaXB0aW9uID0gZnVuY3Rpb24gKHMsIG8pIHtcbiAgICB0aGlzLl9zID0gcztcbiAgICB0aGlzLl9vID0gbztcbiAgfTtcblxuICBJbm5lclN1YnNjcmlwdGlvbi5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMuX3MuaXNEaXNwb3NlZCAmJiB0aGlzLl9vICE9PSBudWxsKSB7XG4gICAgICB2YXIgaWR4ID0gdGhpcy5fcy5vYnNlcnZlcnMuaW5kZXhPZih0aGlzLl9vKTtcbiAgICAgIHRoaXMuX3Mub2JzZXJ2ZXJzLnNwbGljZShpZHgsIDEpO1xuICAgICAgdGhpcy5fbyA9IG51bGw7XG4gICAgfVxuICB9O1xuXG4gIHZhciBSZWZDb3VudE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFJlZkNvdW50T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBSZWZDb3VudE9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2NvdW50ID0gMDtcbiAgICAgIHRoaXMuX2Nvbm5lY3RhYmxlU3Vic2NyaXB0aW9uID0gbnVsbDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFJlZkNvdW50T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG8pO1xuICAgICAgKyt0aGlzLl9jb3VudCA9PT0gMSAmJiAodGhpcy5fY29ubmVjdGFibGVTdWJzY3JpcHRpb24gPSB0aGlzLnNvdXJjZS5jb25uZWN0KCkpO1xuICAgICAgcmV0dXJuIG5ldyBSZWZDb3VudERpc3Bvc2FibGUodGhpcywgc3Vic2NyaXB0aW9uKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gUmVmQ291bnREaXNwb3NhYmxlKHAsIHMpIHtcbiAgICAgIHRoaXMuX3AgPSBwO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBSZWZDb3VudERpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zLmRpc3Bvc2UoKTtcbiAgICAgICAgLS10aGlzLl9wLl9jb3VudCA9PT0gMCAmJiB0aGlzLl9wLl9jb25uZWN0YWJsZVN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBSZWZDb3VudE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gUnguQ29ubmVjdGFibGVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhDb25uZWN0YWJsZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQ29ubmVjdGFibGVPYnNlcnZhYmxlKHNvdXJjZSwgc3ViamVjdCkge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZS5hc09ic2VydmFibGUoKTtcbiAgICAgIHRoaXMuX3N1YmplY3QgPSBzdWJqZWN0O1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gQ29ubmVjdERpc3Bvc2FibGUocGFyZW50LCBzdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuX3AgPSBwYXJlbnQ7XG4gICAgICB0aGlzLl9zID0gc3Vic2NyaXB0aW9uO1xuICAgIH1cblxuICAgIENvbm5lY3REaXNwb3NhYmxlLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHRoaXMuX3MpIHtcbiAgICAgICAgdGhpcy5fcy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuX3MgPSBudWxsO1xuICAgICAgICB0aGlzLl9wLl9jb25uZWN0aW9uID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5jb25uZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLl9jb25uZWN0aW9uKSB7XG4gICAgICAgIHZhciBzdWJzY3JpcHRpb24gPSB0aGlzLl9zb3VyY2Uuc3Vic2NyaWJlKHRoaXMuX3N1YmplY3QpO1xuICAgICAgICB0aGlzLl9jb25uZWN0aW9uID0gbmV3IENvbm5lY3REaXNwb3NhYmxlKHRoaXMsIHN1YnNjcmlwdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fY29ubmVjdGlvbjtcbiAgICB9O1xuXG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdWJqZWN0LnN1YnNjcmliZShvKTtcbiAgICB9O1xuXG4gICAgQ29ubmVjdGFibGVPYnNlcnZhYmxlLnByb3RvdHlwZS5yZWZDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgUmVmQ291bnRPYnNlcnZhYmxlKHRoaXMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQ29ubmVjdGFibGVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogUmV0dXJucyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgc2hhcmVzIGEgc2luZ2xlIHN1YnNjcmlwdGlvbiB0byB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS4gVGhpcyBvYnNlcnZhYmxlIHNlcXVlbmNlXG4gICAqIGNhbiBiZSByZXN1YnNjcmliZWQgdG8sIGV2ZW4gaWYgYWxsIHByaW9yIHN1YnNjcmlwdGlvbnMgaGF2ZSBlbmRlZC4gKHVubGlrZSBgLnB1Ymxpc2goKS5yZWZDb3VudCgpYClcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyB0aGUgZWxlbWVudHMgb2YgYSBzZXF1ZW5jZSBwcm9kdWNlZCBieSBtdWx0aWNhc3RpbmcgdGhlIHNvdXJjZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5zaW5nbGVJbnN0YW5jZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzLCBoYXNPYnNlcnZhYmxlID0gZmFsc2UsIG9ic2VydmFibGU7XG5cbiAgICBmdW5jdGlvbiBnZXRPYnNlcnZhYmxlKCkge1xuICAgICAgaWYgKCFoYXNPYnNlcnZhYmxlKSB7XG4gICAgICAgIGhhc09ic2VydmFibGUgPSB0cnVlO1xuICAgICAgICBvYnNlcnZhYmxlID0gc291cmNlWydmaW5hbGx5J10oZnVuY3Rpb24oKSB7IGhhc09ic2VydmFibGUgPSBmYWxzZTsgfSkucHVibGlzaCgpLnJlZkNvdW50KCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24obykge1xuICAgICAgcmV0dXJuIGdldE9ic2VydmFibGUoKS5zdWJzY3JpYmUobyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBDb3JyZWxhdGVzIHRoZSBlbGVtZW50cyBvZiB0d28gc2VxdWVuY2VzIGJhc2VkIG9uIG92ZXJsYXBwaW5nIGR1cmF0aW9ucy5cbiAgICpcbiAgICogIEBwYXJhbSB7T2JzZXJ2YWJsZX0gcmlnaHQgVGhlIHJpZ2h0IG9ic2VydmFibGUgc2VxdWVuY2UgdG8gam9pbiBlbGVtZW50cyBmb3IuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBsZWZ0RHVyYXRpb25TZWxlY3RvciBBIGZ1bmN0aW9uIHRvIHNlbGVjdCB0aGUgZHVyYXRpb24gKGV4cHJlc3NlZCBhcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlKSBvZiBlYWNoIGVsZW1lbnQgb2YgdGhlIGxlZnQgb2JzZXJ2YWJsZSBzZXF1ZW5jZSwgdXNlZCB0byBkZXRlcm1pbmUgb3ZlcmxhcC5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IHJpZ2h0RHVyYXRpb25TZWxlY3RvciBBIGZ1bmN0aW9uIHRvIHNlbGVjdCB0aGUgZHVyYXRpb24gKGV4cHJlc3NlZCBhcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlKSBvZiBlYWNoIGVsZW1lbnQgb2YgdGhlIHJpZ2h0IG9ic2VydmFibGUgc2VxdWVuY2UsIHVzZWQgdG8gZGV0ZXJtaW5lIG92ZXJsYXAuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSByZXN1bHRTZWxlY3RvciBBIGZ1bmN0aW9uIGludm9rZWQgdG8gY29tcHV0ZSBhIHJlc3VsdCBlbGVtZW50IGZvciBhbnkgdHdvIG92ZXJsYXBwaW5nIGVsZW1lbnRzIG9mIHRoZSBsZWZ0IGFuZCByaWdodCBvYnNlcnZhYmxlIHNlcXVlbmNlcy4gVGhlIHBhcmFtZXRlcnMgcGFzc2VkIHRvIHRoZSBmdW5jdGlvbiBjb3JyZXNwb25kIHdpdGggdGhlIGVsZW1lbnRzIGZyb20gdGhlIGxlZnQgYW5kIHJpZ2h0IHNvdXJjZSBzZXF1ZW5jZXMgZm9yIHdoaWNoIG92ZXJsYXAgb2NjdXJzLlxuICAgKiAgQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyByZXN1bHQgZWxlbWVudHMgY29tcHV0ZWQgZnJvbSBzb3VyY2UgZWxlbWVudHMgdGhhdCBoYXZlIGFuIG92ZXJsYXBwaW5nIGR1cmF0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmpvaW4gPSBmdW5jdGlvbiAocmlnaHQsIGxlZnREdXJhdGlvblNlbGVjdG9yLCByaWdodER1cmF0aW9uU2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yKSB7XG4gICAgdmFyIGxlZnQgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIHZhciBsZWZ0RG9uZSA9IGZhbHNlLCByaWdodERvbmUgPSBmYWxzZTtcbiAgICAgIHZhciBsZWZ0SWQgPSAwLCByaWdodElkID0gMDtcbiAgICAgIHZhciBsZWZ0TWFwID0gbmV3IE1hcCgpLCByaWdodE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgIHZhciBoYW5kbGVFcnJvciA9IGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfTtcblxuICAgICAgZ3JvdXAuYWRkKGxlZnQuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YXIgaWQgPSBsZWZ0SWQrKywgbWQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblxuICAgICAgICAgIGxlZnRNYXAuc2V0KGlkLCB2YWx1ZSk7XG4gICAgICAgICAgZ3JvdXAuYWRkKG1kKTtcblxuICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoKGxlZnREdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7XG4gICAgICAgICAgaWYgKGR1cmF0aW9uID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKGR1cmF0aW9uLmUpOyB9XG5cbiAgICAgICAgICBtZC5zZXREaXNwb3NhYmxlKGR1cmF0aW9uLnRha2UoMSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgbm9vcCxcbiAgICAgICAgICAgIGhhbmRsZUVycm9yLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBsZWZ0TWFwWydkZWxldGUnXShpZCkgJiYgbGVmdE1hcC5zaXplID09PSAwICYmIGxlZnREb25lICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgICAgZ3JvdXAucmVtb3ZlKG1kKTtcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIHJpZ2h0TWFwLmZvckVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnlDYXRjaChyZXN1bHRTZWxlY3RvcikodmFsdWUsIHYpO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIG8ub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgICAgICAgIG8ub25OZXh0KHJlc3VsdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZUVycm9yLFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgbGVmdERvbmUgPSB0cnVlO1xuICAgICAgICAgIChyaWdodERvbmUgfHwgbGVmdE1hcC5zaXplID09PSAwKSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0pXG4gICAgICApO1xuXG4gICAgICBncm91cC5hZGQocmlnaHQuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YXIgaWQgPSByaWdodElkKyssIG1kID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG5cbiAgICAgICAgICByaWdodE1hcC5zZXQoaWQsIHZhbHVlKTtcbiAgICAgICAgICBncm91cC5hZGQobWQpO1xuXG4gICAgICAgICAgdmFyIGR1cmF0aW9uID0gdHJ5Q2F0Y2gocmlnaHREdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7XG4gICAgICAgICAgaWYgKGR1cmF0aW9uID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKGR1cmF0aW9uLmUpOyB9XG5cbiAgICAgICAgICBtZC5zZXREaXNwb3NhYmxlKGR1cmF0aW9uLnRha2UoMSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgbm9vcCxcbiAgICAgICAgICAgIGhhbmRsZUVycm9yLFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICByaWdodE1hcFsnZGVsZXRlJ10oaWQpICYmIHJpZ2h0TWFwLnNpemUgPT09IDAgJiYgcmlnaHREb25lICYmIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgICAgZ3JvdXAucmVtb3ZlKG1kKTtcbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHJlc3VsdFNlbGVjdG9yKSh2LCB2YWx1ZSk7XG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgICAgICAgby5vbk5leHQocmVzdWx0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlRXJyb3IsXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByaWdodERvbmUgPSB0cnVlO1xuICAgICAgICAgIChsZWZ0RG9uZSB8fCByaWdodE1hcC5zaXplID09PSAwKSAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgcmV0dXJuIGdyb3VwO1xuICAgIH0sIGxlZnQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgQ29ycmVsYXRlcyB0aGUgZWxlbWVudHMgb2YgdHdvIHNlcXVlbmNlcyBiYXNlZCBvbiBvdmVybGFwcGluZyBkdXJhdGlvbnMsIGFuZCBncm91cHMgdGhlIHJlc3VsdHMuXG4gICAqXG4gICAqICBAcGFyYW0ge09ic2VydmFibGV9IHJpZ2h0IFRoZSByaWdodCBvYnNlcnZhYmxlIHNlcXVlbmNlIHRvIGpvaW4gZWxlbWVudHMgZm9yLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gbGVmdER1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvbiB0byBzZWxlY3QgdGhlIGR1cmF0aW9uIChleHByZXNzZWQgYXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSkgb2YgZWFjaCBlbGVtZW50IG9mIHRoZSBsZWZ0IG9ic2VydmFibGUgc2VxdWVuY2UsIHVzZWQgdG8gZGV0ZXJtaW5lIG92ZXJsYXAuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSByaWdodER1cmF0aW9uU2VsZWN0b3IgQSBmdW5jdGlvbiB0byBzZWxlY3QgdGhlIGR1cmF0aW9uIChleHByZXNzZWQgYXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSkgb2YgZWFjaCBlbGVtZW50IG9mIHRoZSByaWdodCBvYnNlcnZhYmxlIHNlcXVlbmNlLCB1c2VkIHRvIGRldGVybWluZSBvdmVybGFwLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgQSBmdW5jdGlvbiBpbnZva2VkIHRvIGNvbXB1dGUgYSByZXN1bHQgZWxlbWVudCBmb3IgYW55IGVsZW1lbnQgb2YgdGhlIGxlZnQgc2VxdWVuY2Ugd2l0aCBvdmVybGFwcGluZyBlbGVtZW50cyBmcm9tIHRoZSByaWdodCBvYnNlcnZhYmxlIHNlcXVlbmNlLiBUaGUgZmlyc3QgcGFyYW1ldGVyIHBhc3NlZCB0byB0aGUgZnVuY3Rpb24gaXMgYW4gZWxlbWVudCBvZiB0aGUgbGVmdCBzZXF1ZW5jZS4gVGhlIHNlY29uZCBwYXJhbWV0ZXIgcGFzc2VkIHRvIHRoZSBmdW5jdGlvbiBpcyBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggZWxlbWVudHMgZnJvbSB0aGUgcmlnaHQgc2VxdWVuY2UgdGhhdCBvdmVybGFwIHdpdGggdGhlIGxlZnQgc2VxdWVuY2UncyBlbGVtZW50LlxuICAgKiAgQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjb250YWlucyByZXN1bHQgZWxlbWVudHMgY29tcHV0ZWQgZnJvbSBzb3VyY2UgZWxlbWVudHMgdGhhdCBoYXZlIGFuIG92ZXJsYXBwaW5nIGR1cmF0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmdyb3VwSm9pbiA9IGZ1bmN0aW9uIChyaWdodCwgbGVmdER1cmF0aW9uU2VsZWN0b3IsIHJpZ2h0RHVyYXRpb25TZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IpIHtcbiAgICB2YXIgbGVmdCA9IHRoaXM7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZ3JvdXAgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgdmFyIHIgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGdyb3VwKTtcbiAgICAgIHZhciBsZWZ0TWFwID0gbmV3IE1hcCgpLCByaWdodE1hcCA9IG5ldyBNYXAoKTtcbiAgICAgIHZhciBsZWZ0SWQgPSAwLCByaWdodElkID0gMDtcbiAgICAgIHZhciBoYW5kbGVFcnJvciA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyB2Lm9uRXJyb3IoZSk7IH07IH07XG5cbiAgICAgIGZ1bmN0aW9uIGhhbmRsZUVycm9yKGUpIHsgfTtcblxuICAgICAgZ3JvdXAuYWRkKGxlZnQuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICB2YXIgcyA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgICAgdmFyIGlkID0gbGVmdElkKys7XG4gICAgICAgICAgbGVmdE1hcC5zZXQoaWQsIHMpO1xuXG4gICAgICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHJlc3VsdFNlbGVjdG9yKSh2YWx1ZSwgYWRkUmVmKHMsIHIpKTtcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKHJlc3VsdC5lKSk7XG4gICAgICAgICAgICByZXR1cm4gby5vbkVycm9yKHJlc3VsdC5lKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgby5vbk5leHQocmVzdWx0KTtcblxuICAgICAgICAgIHJpZ2h0TWFwLmZvckVhY2goZnVuY3Rpb24gKHYpIHsgcy5vbk5leHQodik7IH0pO1xuXG4gICAgICAgICAgdmFyIG1kID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgICAgZ3JvdXAuYWRkKG1kKTtcblxuICAgICAgICAgIHZhciBkdXJhdGlvbiA9IHRyeUNhdGNoKGxlZnREdXJhdGlvblNlbGVjdG9yKSh2YWx1ZSk7XG4gICAgICAgICAgaWYgKGR1cmF0aW9uID09PSBlcnJvck9iaikge1xuICAgICAgICAgICAgbGVmdE1hcC5mb3JFYWNoKGhhbmRsZUVycm9yKGR1cmF0aW9uLmUpKTtcbiAgICAgICAgICAgIHJldHVybiBvLm9uRXJyb3IoZHVyYXRpb24uZSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbWQuc2V0RGlzcG9zYWJsZShkdXJhdGlvbi50YWtlKDEpLnN1YnNjcmliZShcbiAgICAgICAgICAgIG5vb3AsXG4gICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBsZWZ0TWFwWydkZWxldGUnXShpZCkgJiYgcy5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgICBncm91cC5yZW1vdmUobWQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChoYW5kbGVFcnJvcihlKSk7XG4gICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7IG8ub25Db21wbGV0ZWQoKTsgfSlcbiAgICAgICk7XG5cbiAgICAgIGdyb3VwLmFkZChyaWdodC5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHZhciBpZCA9IHJpZ2h0SWQrKztcbiAgICAgICAgICByaWdodE1hcC5zZXQoaWQsIHZhbHVlKTtcblxuICAgICAgICAgIHZhciBtZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgIGdyb3VwLmFkZChtZCk7XG5cbiAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0cnlDYXRjaChyaWdodER1cmF0aW9uU2VsZWN0b3IpKHZhbHVlKTtcbiAgICAgICAgICBpZiAoZHVyYXRpb24gPT09IGVycm9yT2JqKSB7XG4gICAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZHVyYXRpb24uZSkpO1xuICAgICAgICAgICAgcmV0dXJuIG8ub25FcnJvcihkdXJhdGlvbi5lKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBtZC5zZXREaXNwb3NhYmxlKGR1cmF0aW9uLnRha2UoMSkuc3Vic2NyaWJlKFxuICAgICAgICAgICAgbm9vcCxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgIGxlZnRNYXAuZm9yRWFjaChoYW5kbGVFcnJvcihlKSk7XG4gICAgICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJpZ2h0TWFwWydkZWxldGUnXShpZCk7XG4gICAgICAgICAgICAgIGdyb3VwLnJlbW92ZShtZCk7XG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goZnVuY3Rpb24gKHYpIHsgdi5vbk5leHQodmFsdWUpOyB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBsZWZ0TWFwLmZvckVhY2goaGFuZGxlRXJyb3IoZSkpO1xuICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiByO1xuICAgIH0sIGxlZnQpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHRvQXJyYXkoeCkgeyByZXR1cm4geC50b0FycmF5KCk7IH1cblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gemVybyBvciBtb3JlIGJ1ZmZlcnMuXG4gICAqICBAcGFyYW0ge01peGVkfSBidWZmZXJPcGVuaW5nc09yQ2xvc2luZ1NlbGVjdG9yIE9ic2VydmFibGUgc2VxdWVuY2Ugd2hvc2UgZWxlbWVudHMgZGVub3RlIHRoZSBjcmVhdGlvbiBvZiBuZXcgd2luZG93cywgb3IsIGEgZnVuY3Rpb24gaW52b2tlZCB0byBkZWZpbmUgdGhlIGJvdW5kYXJpZXMgb2YgdGhlIHByb2R1Y2VkIHdpbmRvd3MgKGEgbmV3IHdpbmRvdyBpcyBzdGFydGVkIHdoZW4gdGhlIHByZXZpb3VzIG9uZSBpcyBjbG9zZWQsIHJlc3VsdGluZyBpbiBub24tb3ZlcmxhcHBpbmcgd2luZG93cykuXG4gICAqICBAcGFyYW0ge0Z1bmN0aW9ufSBbYnVmZmVyQ2xvc2luZ1NlbGVjdG9yXSBBIGZ1bmN0aW9uIGludm9rZWQgdG8gZGVmaW5lIHRoZSBjbG9zaW5nIG9mIGVhY2ggcHJvZHVjZWQgd2luZG93LiBJZiBhIGNsb3Npbmcgc2VsZWN0b3IgZnVuY3Rpb24gaXMgc3BlY2lmaWVkIGZvciB0aGUgZmlyc3QgcGFyYW1ldGVyLCB0aGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkLlxuICAgKiAgQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugb2Ygd2luZG93cy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5idWZmZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMud2luZG93LmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbiAgICAgIC5mbGF0TWFwKHRvQXJyYXkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgUHJvamVjdHMgZWFjaCBlbGVtZW50IG9mIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgaW50byB6ZXJvIG9yIG1vcmUgd2luZG93cy5cbiAgICpcbiAgICogIEBwYXJhbSB7TWl4ZWR9IHdpbmRvd09wZW5pbmdzT3JDbG9zaW5nU2VsZWN0b3IgT2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aG9zZSBlbGVtZW50cyBkZW5vdGUgdGhlIGNyZWF0aW9uIG9mIG5ldyB3aW5kb3dzLCBvciwgYSBmdW5jdGlvbiBpbnZva2VkIHRvIGRlZmluZSB0aGUgYm91bmRhcmllcyBvZiB0aGUgcHJvZHVjZWQgd2luZG93cyAoYSBuZXcgd2luZG93IGlzIHN0YXJ0ZWQgd2hlbiB0aGUgcHJldmlvdXMgb25lIGlzIGNsb3NlZCwgcmVzdWx0aW5nIGluIG5vbi1vdmVybGFwcGluZyB3aW5kb3dzKS5cbiAgICogIEBwYXJhbSB7RnVuY3Rpb259IFt3aW5kb3dDbG9zaW5nU2VsZWN0b3JdIEEgZnVuY3Rpb24gaW52b2tlZCB0byBkZWZpbmUgdGhlIGNsb3Npbmcgb2YgZWFjaCBwcm9kdWNlZCB3aW5kb3cuIElmIGEgY2xvc2luZyBzZWxlY3RvciBmdW5jdGlvbiBpcyBzcGVjaWZpZWQgZm9yIHRoZSBmaXJzdCBwYXJhbWV0ZXIsIHRoaXMgcGFyYW1ldGVyIGlzIGlnbm9yZWQuXG4gICAqICBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvZiB3aW5kb3dzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLndpbmRvdyA9IGZ1bmN0aW9uICh3aW5kb3dPcGVuaW5nc09yQ2xvc2luZ1NlbGVjdG9yLCB3aW5kb3dDbG9zaW5nU2VsZWN0b3IpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSAmJiB0eXBlb2YgYXJndW1lbnRzWzBdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gb2JzZXJ2YWJsZVdpbmRvd1dpdGhCb3VuZGFyaWVzLmNhbGwodGhpcywgd2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3Rvcik7XG4gICAgfVxuICAgIHJldHVybiB0eXBlb2Ygd2luZG93T3BlbmluZ3NPckNsb3NpbmdTZWxlY3RvciA9PT0gJ2Z1bmN0aW9uJyA/XG4gICAgICBvYnNlcnZhYmxlV2luZG93V2l0aENsb3NpbmdTZWxlY3Rvci5jYWxsKHRoaXMsIHdpbmRvd09wZW5pbmdzT3JDbG9zaW5nU2VsZWN0b3IpIDpcbiAgICAgIG9ic2VydmFibGVXaW5kb3dXaXRoT3BlbmluZ3MuY2FsbCh0aGlzLCB3aW5kb3dPcGVuaW5nc09yQ2xvc2luZ1NlbGVjdG9yLCB3aW5kb3dDbG9zaW5nU2VsZWN0b3IpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGVXaW5kb3dXaXRoT3BlbmluZ3Mod2luZG93T3BlbmluZ3MsIHdpbmRvd0Nsb3NpbmdTZWxlY3Rvcikge1xuICAgIHJldHVybiB3aW5kb3dPcGVuaW5ncy5ncm91cEpvaW4odGhpcywgd2luZG93Q2xvc2luZ1NlbGVjdG9yLCBvYnNlcnZhYmxlRW1wdHksIGZ1bmN0aW9uIChfLCB3aW4pIHtcbiAgICAgIHJldHVybiB3aW47XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlV2luZG93V2l0aEJvdW5kYXJpZXMod2luZG93Qm91bmRhcmllcykge1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciB3aW4gPSBuZXcgU3ViamVjdCgpLFxuICAgICAgICBkID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSxcbiAgICAgICAgciA9IG5ldyBSZWZDb3VudERpc3Bvc2FibGUoZCk7XG5cbiAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYod2luLCByKSk7XG5cbiAgICAgIGQuYWRkKHNvdXJjZS5zdWJzY3JpYmUoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgd2luLm9uTmV4dCh4KTtcbiAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgd2luLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlcnIpO1xuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB3aW4ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pKTtcblxuICAgICAgaXNQcm9taXNlKHdpbmRvd0JvdW5kYXJpZXMpICYmICh3aW5kb3dCb3VuZGFyaWVzID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHdpbmRvd0JvdW5kYXJpZXMpKTtcblxuICAgICAgZC5hZGQod2luZG93Qm91bmRhcmllcy5zdWJzY3JpYmUoZnVuY3Rpb24gKHcpIHtcbiAgICAgICAgd2luLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHdpbiA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYod2luLCByKSk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHdpbi5vbkVycm9yKGVycik7XG4gICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZXJyKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgd2luLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICB9KSk7XG5cbiAgICAgIHJldHVybiByO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlV2luZG93V2l0aENsb3NpbmdTZWxlY3Rvcih3aW5kb3dDbG9zaW5nU2VsZWN0b3IpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgbSA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIGQgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZShtKSxcbiAgICAgICAgciA9IG5ldyBSZWZDb3VudERpc3Bvc2FibGUoZCksXG4gICAgICAgIHdpbiA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHdpbiwgcikpO1xuICAgICAgZC5hZGQoc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHdpbi5vbk5leHQoeCk7XG4gICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgd2luLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGVycik7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pKTtcblxuICAgICAgZnVuY3Rpb24gY3JlYXRlV2luZG93Q2xvc2UgKCkge1xuICAgICAgICB2YXIgd2luZG93Q2xvc2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgd2luZG93Q2xvc2UgPSB3aW5kb3dDbG9zaW5nU2VsZWN0b3IoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaXNQcm9taXNlKHdpbmRvd0Nsb3NlKSAmJiAod2luZG93Q2xvc2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uod2luZG93Q2xvc2UpKTtcblxuICAgICAgICB2YXIgbTEgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgbS5zZXREaXNwb3NhYmxlKG0xKTtcbiAgICAgICAgbTEuc2V0RGlzcG9zYWJsZSh3aW5kb3dDbG9zZS50YWtlKDEpLnN1YnNjcmliZShub29wLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgd2luLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGVycik7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aW4ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICB3aW4gPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChhZGRSZWYod2luLCByKSk7XG4gICAgICAgICAgY3JlYXRlV2luZG93Q2xvc2UoKTtcbiAgICAgICAgfSkpO1xuICAgICAgfVxuXG4gICAgICBjcmVhdGVXaW5kb3dDbG9zZSgpO1xuICAgICAgcmV0dXJuIHI7XG4gICAgfSwgc291cmNlKTtcbiAgfVxuXG4gIHZhciBQYWlyd2lzZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFBhaXJ3aXNlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBQYWlyd2lzZU9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFBhaXJ3aXNlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBQYWlyd2lzZU9ic2VydmVyKG8pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFBhaXJ3aXNlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBQYWlyd2lzZU9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFBhaXJ3aXNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGFpcndpc2VPYnNlcnZlcihvKSB7XG4gICAgICB0aGlzLl9vID0gbztcbiAgICAgIHRoaXMuX3AgPSBudWxsO1xuICAgICAgdGhpcy5faHAgPSBmYWxzZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFBhaXJ3aXNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKHRoaXMuX2hwKSB7XG4gICAgICAgIHRoaXMuX28ub25OZXh0KFt0aGlzLl9wLCB4XSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9ocCA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLl9wID0geDtcbiAgICB9O1xuICAgIFBhaXJ3aXNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGVycikgeyB0aGlzLl9vLm9uRXJyb3IoZXJyKTsgfTtcbiAgICBQYWlyd2lzZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBQYWlyd2lzZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBvYnNlcnZhYmxlIHRoYXQgdHJpZ2dlcnMgb24gdGhlIHNlY29uZCBhbmQgc3Vic2VxdWVudCB0cmlnZ2VyaW5ncyBvZiB0aGUgaW5wdXQgb2JzZXJ2YWJsZS5cbiAgICogVGhlIE50aCB0cmlnZ2VyaW5nIG9mIHRoZSBpbnB1dCBvYnNlcnZhYmxlIHBhc3NlcyB0aGUgYXJndW1lbnRzIGZyb20gdGhlIE4tMXRoIGFuZCBOdGggdHJpZ2dlcmluZyBhcyBhIHBhaXIuXG4gICAqIFRoZSBhcmd1bWVudCBwYXNzZWQgdG8gdGhlIE4tMXRoIHRyaWdnZXJpbmcgaXMgaGVsZCBpbiBoaWRkZW4gaW50ZXJuYWwgc3RhdGUgdW50aWwgdGhlIE50aCB0cmlnZ2VyaW5nIG9jY3Vycy5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgdGhhdCB0cmlnZ2VycyBvbiBzdWNjZXNzaXZlIHBhaXJzIG9mIG9ic2VydmF0aW9ucyBmcm9tIHRoZSBpbnB1dCBvYnNlcnZhYmxlIGFzIGFuIGFycmF5LlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnBhaXJ3aXNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBuZXcgUGFpcndpc2VPYnNlcnZhYmxlKHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHR3byBvYnNlcnZhYmxlcyB3aGljaCBwYXJ0aXRpb24gdGhlIG9ic2VydmF0aW9ucyBvZiB0aGUgc291cmNlIGJ5IHRoZSBnaXZlbiBmdW5jdGlvbi5cbiAgICogVGhlIGZpcnN0IHdpbGwgdHJpZ2dlciBvYnNlcnZhdGlvbnMgZm9yIHRob3NlIHZhbHVlcyBmb3Igd2hpY2ggdGhlIHByZWRpY2F0ZSByZXR1cm5zIHRydWUuXG4gICAqIFRoZSBzZWNvbmQgd2lsbCB0cmlnZ2VyIG9ic2VydmF0aW9ucyBmb3IgdGhvc2UgdmFsdWVzIHdoZXJlIHRoZSBwcmVkaWNhdGUgcmV0dXJucyBmYWxzZS5cbiAgICogVGhlIHByZWRpY2F0ZSBpcyBleGVjdXRlZCBvbmNlIGZvciBlYWNoIHN1YnNjcmliZWQgb2JzZXJ2ZXIuXG4gICAqIEJvdGggYWxzbyBwcm9wYWdhdGUgYWxsIGVycm9yIG9ic2VydmF0aW9ucyBhcmlzaW5nIGZyb20gdGhlIHNvdXJjZSBhbmQgZWFjaCBjb21wbGV0ZXNcbiAgICogd2hlbiB0aGUgc291cmNlIGNvbXBsZXRlcy5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlXG4gICAqICAgIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgd2hpY2ggb3V0cHV0IE9ic2VydmFibGUgd2lsbCB0cmlnZ2VyIGEgcGFydGljdWxhciBvYnNlcnZhdGlvbi5cbiAgICogQHJldHVybnMge0FycmF5fVxuICAgKiAgICBBbiBhcnJheSBvZiBvYnNlcnZhYmxlcy4gVGhlIGZpcnN0IHRyaWdnZXJzIHdoZW4gdGhlIHByZWRpY2F0ZSByZXR1cm5zIHRydWUsXG4gICAqICAgIGFuZCB0aGUgc2Vjb25kIHRyaWdnZXJzIHdoZW4gdGhlIHByZWRpY2F0ZSByZXR1cm5zIGZhbHNlLlxuICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ucGFydGl0aW9uID0gZnVuY3Rpb24ocHJlZGljYXRlLCB0aGlzQXJnKSB7XG4gICAgdmFyIGZuID0gYmluZENhbGxiYWNrKHByZWRpY2F0ZSwgdGhpc0FyZywgMyk7XG4gICAgcmV0dXJuIFtcbiAgICAgIHRoaXMuZmlsdGVyKHByZWRpY2F0ZSwgdGhpc0FyZyksXG4gICAgICB0aGlzLmZpbHRlcihmdW5jdGlvbiAoeCwgaSwgbykgeyByZXR1cm4gIWZuKHgsIGksIG8pOyB9KVxuICAgIF07XG4gIH07XG5cbiAgdmFyIFdoaWxlRW51bWVyYWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhXaGlsZUVudW1lcmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gV2hpbGVFbnVtZXJhYmxlKGMsIHMpIHtcbiAgICAgIHRoaXMuYyA9IGM7XG4gICAgICB0aGlzLnMgPSBzO1xuICAgIH1cbiAgICBXaGlsZUVudW1lcmFibGUucHJvdG90eXBlWyRpdGVyYXRvciRdID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzZWxmLmMoKSA/XG4gICAgICAgICAgIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBzZWxmLnMgfSA6XG4gICAgICAgICAgIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHZvaWQgMCB9O1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH07XG4gICAgcmV0dXJuIFdoaWxlRW51bWVyYWJsZTtcbiAgfShFbnVtZXJhYmxlKSk7XG4gIFxuICBmdW5jdGlvbiBlbnVtZXJhYmxlV2hpbGUoY29uZGl0aW9uLCBzb3VyY2UpIHtcbiAgICByZXR1cm4gbmV3IFdoaWxlRW51bWVyYWJsZShjb25kaXRpb24sIHNvdXJjZSk7XG4gIH0gIFxuXG4gICAvKipcbiAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGlzIHRoZSByZXN1bHQgb2YgaW52b2tpbmcgdGhlIHNlbGVjdG9yIG9uIHRoZSBzb3VyY2Ugc2VxdWVuY2UsIHdpdGhvdXQgc2hhcmluZyBzdWJzY3JpcHRpb25zLlxuICAgKiAgVGhpcyBvcGVyYXRvciBhbGxvd3MgZm9yIGEgZmx1ZW50IHN0eWxlIG9mIHdyaXRpbmcgcXVlcmllcyB0aGF0IHVzZSB0aGUgc2FtZSBzZXF1ZW5jZSBtdWx0aXBsZSB0aW1lcy5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgU2VsZWN0b3IgZnVuY3Rpb24gd2hpY2ggY2FuIHVzZSB0aGUgc291cmNlIHNlcXVlbmNlIGFzIG1hbnkgdGltZXMgYXMgbmVlZGVkLCB3aXRob3V0IHNoYXJpbmcgc3Vic2NyaXB0aW9ucyB0byB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNvbnRhaW5zIHRoZSBlbGVtZW50cyBvZiBhIHNlcXVlbmNlIHByb2R1Y2VkIGJ5IG11bHRpY2FzdGluZyB0aGUgc291cmNlIHNlcXVlbmNlIHdpdGhpbiBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmxldEJpbmQgPSBvYnNlcnZhYmxlUHJvdG9bJ2xldCddID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICByZXR1cm4gZnVuYyh0aGlzKTtcbiAgfTtcblxuICAgLyoqXG4gICAqICBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gb2JzZXJ2YWJsZSBjb2xsZWN0aW9uIGNvbnRhaW5zIHZhbHVlcy4gXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5pZihjb25kaXRpb24sIG9iczEpO1xuICAgKiAgMiAtIHJlcyA9IFJ4Lk9ic2VydmFibGUuaWYoY29uZGl0aW9uLCBvYnMxLCBvYnMyKTtcbiAgICogIDMgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmlmKGNvbmRpdGlvbiwgb2JzMSwgc2NoZWR1bGVyKTtcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uZGl0aW9uIFRoZSBjb25kaXRpb24gd2hpY2ggZGV0ZXJtaW5lcyBpZiB0aGUgdGhlblNvdXJjZSBvciBlbHNlU291cmNlIHdpbGwgYmUgcnVuLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHRoZW5Tb3VyY2UgVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcnVuIGlmIHRoZSBjb25kaXRpb24gZnVuY3Rpb24gcmV0dXJucyB0cnVlLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IFtlbHNlU291cmNlXSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBvciBQcm9taXNlIHRoYXQgd2lsbCBiZSBydW4gaWYgdGhlIGNvbmRpdGlvbiBmdW5jdGlvbiByZXR1cm5zIGZhbHNlLiBJZiB0aGlzIGlzIG5vdCBwcm92aWRlZCwgaXQgZGVmYXVsdHMgdG8gUnguT2JzZXJ2YWJlLkVtcHR5IHdpdGggdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIGVpdGhlciB0aGUgdGhlblNvdXJjZSBvciBlbHNlU291cmNlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZVsnaWYnXSA9IGZ1bmN0aW9uIChjb25kaXRpb24sIHRoZW5Tb3VyY2UsIGVsc2VTb3VyY2VPclNjaGVkdWxlcikge1xuICAgIHJldHVybiBvYnNlcnZhYmxlRGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgZWxzZVNvdXJjZU9yU2NoZWR1bGVyIHx8IChlbHNlU291cmNlT3JTY2hlZHVsZXIgPSBvYnNlcnZhYmxlRW1wdHkoKSk7XG5cbiAgICAgIGlzUHJvbWlzZSh0aGVuU291cmNlKSAmJiAodGhlblNvdXJjZSA9IG9ic2VydmFibGVGcm9tUHJvbWlzZSh0aGVuU291cmNlKSk7XG4gICAgICBpc1Byb21pc2UoZWxzZVNvdXJjZU9yU2NoZWR1bGVyKSAmJiAoZWxzZVNvdXJjZU9yU2NoZWR1bGVyID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKGVsc2VTb3VyY2VPclNjaGVkdWxlcikpO1xuXG4gICAgICAvLyBBc3N1bWUgYSBzY2hlZHVsZXIgZm9yIGVtcHR5IG9ubHlcbiAgICAgIHR5cGVvZiBlbHNlU291cmNlT3JTY2hlZHVsZXIubm93ID09PSAnZnVuY3Rpb24nICYmIChlbHNlU291cmNlT3JTY2hlZHVsZXIgPSBvYnNlcnZhYmxlRW1wdHkoZWxzZVNvdXJjZU9yU2NoZWR1bGVyKSk7XG4gICAgICByZXR1cm4gY29uZGl0aW9uKCkgPyB0aGVuU291cmNlIDogZWxzZVNvdXJjZU9yU2NoZWR1bGVyO1xuICAgIH0pO1xuICB9O1xuXG4gICAvKipcbiAgICogIENvbmNhdGVuYXRlcyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgb2J0YWluZWQgYnkgcnVubmluZyB0aGUgc3BlY2lmaWVkIHJlc3VsdCBzZWxlY3RvciBmb3IgZWFjaCBlbGVtZW50IGluIHNvdXJjZS5cbiAgICogVGhlcmUgaXMgYW4gYWxpYXMgZm9yIHRoaXMgbWV0aG9kIGNhbGxlZCAnZm9ySW4nIGZvciBicm93c2VycyA8SUU5XG4gICAqIEBwYXJhbSB7QXJyYXl9IHNvdXJjZXMgQW4gYXJyYXkgb2YgdmFsdWVzIHRvIHR1cm4gaW50byBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXN1bHRTZWxlY3RvciBBIGZ1bmN0aW9uIHRvIGFwcGx5IHRvIGVhY2ggaXRlbSBpbiB0aGUgc291cmNlcyBhcnJheSB0byB0dXJuIGl0IGludG8gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgZnJvbSB0aGUgY29uY2F0ZW5hdGVkIG9ic2VydmFibGUgc2VxdWVuY2VzLlxuICAgKi9cbiAgT2JzZXJ2YWJsZVsnZm9yJ10gPSBPYnNlcnZhYmxlLmZvckluID0gZnVuY3Rpb24gKHNvdXJjZXMsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIGVudW1lcmFibGVPZihzb3VyY2VzLCByZXN1bHRTZWxlY3RvciwgdGhpc0FyZykuY29uY2F0KCk7XG4gIH07XG5cbiAgIC8qKlxuICAgKiAgUmVwZWF0cyBzb3VyY2UgYXMgbG9uZyBhcyBjb25kaXRpb24gaG9sZHMgZW11bGF0aW5nIGEgd2hpbGUgbG9vcC5cbiAgICogVGhlcmUgaXMgYW4gYWxpYXMgZm9yIHRoaXMgbWV0aG9kIGNhbGxlZCAnd2hpbGVEbycgZm9yIGJyb3dzZXJzIDxJRTlcbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY29uZGl0aW9uIFRoZSBjb25kaXRpb24gd2hpY2ggZGV0ZXJtaW5lcyBpZiB0aGUgc291cmNlIHdpbGwgYmUgcmVwZWF0ZWQuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gc291cmNlIFRoZSBvYnNlcnZhYmxlIHNlcXVlbmNlIHRoYXQgd2lsbCBiZSBydW4gaWYgdGhlIGNvbmRpdGlvbiBmdW5jdGlvbiByZXR1cm5zIHRydWUuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdoaWNoIGlzIHJlcGVhdGVkIGFzIGxvbmcgYXMgdGhlIGNvbmRpdGlvbiBob2xkcy5cbiAgICovXG4gIHZhciBvYnNlcnZhYmxlV2hpbGVEbyA9IE9ic2VydmFibGVbJ3doaWxlJ10gPSBPYnNlcnZhYmxlLndoaWxlRG8gPSBmdW5jdGlvbiAoY29uZGl0aW9uLCBzb3VyY2UpIHtcbiAgICBpc1Byb21pc2Uoc291cmNlKSAmJiAoc291cmNlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHNvdXJjZSkpO1xuICAgIHJldHVybiBlbnVtZXJhYmxlV2hpbGUoY29uZGl0aW9uLCBzb3VyY2UpLmNvbmNhdCgpO1xuICB9O1xuXG4gICAvKipcbiAgICogIFJlcGVhdHMgc291cmNlIGFzIGxvbmcgYXMgY29uZGl0aW9uIGhvbGRzIGVtdWxhdGluZyBhIGRvIHdoaWxlIGxvb3AuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBUaGUgY29uZGl0aW9uIHdoaWNoIGRldGVybWluZXMgaWYgdGhlIHNvdXJjZSB3aWxsIGJlIHJlcGVhdGVkLlxuICAgKiBAcGFyYW0ge09ic2VydmFibGV9IHNvdXJjZSBUaGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHdpbGwgYmUgcnVuIGlmIHRoZSBjb25kaXRpb24gZnVuY3Rpb24gcmV0dXJucyB0cnVlLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyByZXBlYXRlZCBhcyBsb25nIGFzIHRoZSBjb25kaXRpb24gaG9sZHMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZG9XaGlsZSA9IGZ1bmN0aW9uIChjb25kaXRpb24pIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZUNvbmNhdChbdGhpcywgb2JzZXJ2YWJsZVdoaWxlRG8oY29uZGl0aW9uLCB0aGlzKV0pO1xuICB9O1xuXG4gICAvKipcbiAgICogIFVzZXMgc2VsZWN0b3IgdG8gZGV0ZXJtaW5lIHdoaWNoIHNvdXJjZSBpbiBzb3VyY2VzIHRvIHVzZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgVGhlIGZ1bmN0aW9uIHdoaWNoIGV4dHJhY3RzIHRoZSB2YWx1ZSBmb3IgdG8gdGVzdCBpbiBhIGNhc2Ugc3RhdGVtZW50LlxuICAgKiBAcGFyYW0ge0FycmF5fSBzb3VyY2VzIEEgb2JqZWN0IHdoaWNoIGhhcyBrZXlzIHdoaWNoIGNvcnJlc3BvbmQgdG8gdGhlIGNhc2Ugc3RhdGVtZW50IGxhYmVscy5cbiAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBbZWxzZVNvdXJjZV0gVGhlIG9ic2VydmFibGUgc2VxdWVuY2Ugb3IgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcnVuIGlmIHRoZSBzb3VyY2VzIGFyZSBub3QgbWF0Y2hlZC4gSWYgdGhpcyBpcyBub3QgcHJvdmlkZWQsIGl0IGRlZmF1bHRzIHRvIFJ4Lk9ic2VydmFiZS5lbXB0eSB3aXRoIHRoZSBzcGVjaWZpZWQgc2NoZWR1bGVyLlxuICAgKlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aGljaCBpcyBkZXRlcm1pbmVkIGJ5IGEgY2FzZSBzdGF0ZW1lbnQuXG4gICAqL1xuICBPYnNlcnZhYmxlWydjYXNlJ10gPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHNvdXJjZXMsIGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlcikge1xuICAgIHJldHVybiBvYnNlcnZhYmxlRGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgaXNQcm9taXNlKGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlcikgJiYgKGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlciA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIpKTtcbiAgICAgIGRlZmF1bHRTb3VyY2VPclNjaGVkdWxlciB8fCAoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyID0gb2JzZXJ2YWJsZUVtcHR5KCkpO1xuXG4gICAgICBpc1NjaGVkdWxlcihkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIpICYmIChkZWZhdWx0U291cmNlT3JTY2hlZHVsZXIgPSBvYnNlcnZhYmxlRW1wdHkoZGVmYXVsdFNvdXJjZU9yU2NoZWR1bGVyKSk7XG5cbiAgICAgIHZhciByZXN1bHQgPSBzb3VyY2VzW3NlbGVjdG9yKCldO1xuICAgICAgaXNQcm9taXNlKHJlc3VsdCkgJiYgKHJlc3VsdCA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShyZXN1bHQpKTtcblxuICAgICAgcmV0dXJuIHJlc3VsdCB8fCBkZWZhdWx0U291cmNlT3JTY2hlZHVsZXI7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIEV4cGFuZE9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRXhwYW5kT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBFeHBhbmRPYnNlcnZhYmxlKHNvdXJjZSwgZm4sIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9mbiA9IGZuO1xuICAgICAgdGhpcy5fc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVSZWN1cnNpdmUoYXJncywgcmVjdXJzZSkge1xuICAgICAgdmFyIHN0YXRlID0gYXJnc1swXSwgc2VsZiA9IGFyZ3NbMV07XG4gICAgICB2YXIgd29yaztcbiAgICAgIGlmIChzdGF0ZS5xLmxlbmd0aCA+IDApIHtcbiAgICAgICAgd29yayA9IHN0YXRlLnEuc2hpZnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLmlzQWNxdWlyZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIG0xID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICBzdGF0ZS5kLmFkZChtMSk7XG4gICAgICBtMS5zZXREaXNwb3NhYmxlKHdvcmsuc3Vic2NyaWJlKG5ldyBFeHBhbmRPYnNlcnZlcihzdGF0ZSwgc2VsZiwgbTEpKSk7XG4gICAgICByZWN1cnNlKFtzdGF0ZSwgc2VsZl0pO1xuICAgIH1cblxuICAgIEV4cGFuZE9ic2VydmFibGUucHJvdG90eXBlLl9lbnN1cmVBY3RpdmUgPSBmdW5jdGlvbiAoc3RhdGUpIHtcbiAgICAgIHZhciBpc093bmVyID0gZmFsc2U7XG4gICAgICBpZiAoc3RhdGUucS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlzT3duZXIgPSAhc3RhdGUuaXNBY3F1aXJlZDtcbiAgICAgICAgc3RhdGUuaXNBY3F1aXJlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpc093bmVyICYmIHN0YXRlLm0uc2V0RGlzcG9zYWJsZSh0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmUoW3N0YXRlLCB0aGlzXSwgc2NoZWR1bGVSZWN1cnNpdmUpKTtcbiAgICB9O1xuXG4gICAgRXhwYW5kT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbSA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIGQgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZShtKSxcbiAgICAgICAgc3RhdGUgPSB7XG4gICAgICAgICAgcTogW10sXG4gICAgICAgICAgbTogbSxcbiAgICAgICAgICBkOiBkLFxuICAgICAgICAgIGFjdGl2ZUNvdW50OiAwLFxuICAgICAgICAgIGlzQWNxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIG86IG9cbiAgICAgICAgfTtcblxuICAgICAgc3RhdGUucS5wdXNoKHRoaXMuc291cmNlKTtcbiAgICAgIHN0YXRlLmFjdGl2ZUNvdW50Kys7XG4gICAgICB0aGlzLl9lbnN1cmVBY3RpdmUoc3RhdGUpO1xuICAgICAgcmV0dXJuIGQ7XG4gICAgfTtcblxuICAgIHJldHVybiBFeHBhbmRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEV4cGFuZE9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEV4cGFuZE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEV4cGFuZE9ic2VydmVyKHN0YXRlLCBwYXJlbnQsIG0xKSB7XG4gICAgICB0aGlzLl9zID0gc3RhdGU7XG4gICAgICB0aGlzLl9wID0gcGFyZW50O1xuICAgICAgdGhpcy5fbTEgPSBtMTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIEV4cGFuZE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX3Muby5vbk5leHQoeCk7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5fcC5fZm4pKHgpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHRoaXMuX3Muby5vbkVycm9yKHJlc3VsdC5lKTsgfVxuICAgICAgdGhpcy5fcy5xLnB1c2gocmVzdWx0KTtcbiAgICAgIHRoaXMuX3MuYWN0aXZlQ291bnQrKztcbiAgICAgIHRoaXMuX3AuX2Vuc3VyZUFjdGl2ZSh0aGlzLl9zKTtcbiAgICB9O1xuXG4gICAgRXhwYW5kT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgIHRoaXMuX3Muby5vbkVycm9yKGUpO1xuICAgIH07XG5cbiAgICBFeHBhbmRPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fcy5kLnJlbW92ZSh0aGlzLl9tMSk7XG4gICAgICB0aGlzLl9zLmFjdGl2ZUNvdW50LS07XG4gICAgICB0aGlzLl9zLmFjdGl2ZUNvdW50ID09PSAwICYmIHRoaXMuX3Muby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gRXhwYW5kT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gICAvKipcbiAgICogIEV4cGFuZHMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSByZWN1cnNpdmVseSBpbnZva2luZyBzZWxlY3Rvci5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgU2VsZWN0b3IgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBlYWNoIHByb2R1Y2VkIGVsZW1lbnQsIHJlc3VsdGluZyBpbiBhbm90aGVyIHNlcXVlbmNlIHRvIHdoaWNoIHRoZSBzZWxlY3RvciB3aWxsIGJlIGludm9rZWQgcmVjdXJzaXZlbHkgYWdhaW4uXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgb24gd2hpY2ggdG8gcGVyZm9ybSB0aGUgZXhwYW5zaW9uLiBJZiBub3QgcHJvdmlkZWQsIHRoaXMgZGVmYXVsdHMgdG8gdGhlIGN1cnJlbnQgdGhyZWFkIHNjaGVkdWxlci5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhbGwgdGhlIGVsZW1lbnRzIHByb2R1Y2VkIGJ5IHRoZSByZWN1cnNpdmUgZXhwYW5zaW9uLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmV4cGFuZCA9IGZ1bmN0aW9uIChzZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gY3VycmVudFRocmVhZFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBFeHBhbmRPYnNlcnZhYmxlKHRoaXMsIHNlbGVjdG9yLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGFyZ3VtZW50c1RvQXJyYXkoKSB7XG4gICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkobGVuKTtcbiAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgdmFyIEZvcmtKb2luT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRm9ya0pvaW5PYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEZvcmtKb2luT2JzZXJ2YWJsZShzb3VyY2VzLCBjYikge1xuICAgICAgdGhpcy5fc291cmNlcyA9IHNvdXJjZXM7XG4gICAgICB0aGlzLl9jYiA9IGNiO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRm9ya0pvaW5PYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIGlmICh0aGlzLl9zb3VyY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb3VudCA9IHRoaXMuX3NvdXJjZXMubGVuZ3RoO1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBmaW5pc2hlZDogZmFsc2UsXG4gICAgICAgIGhhc1Jlc3VsdHM6IG5ldyBBcnJheShjb3VudCksXG4gICAgICAgIGhhc0NvbXBsZXRlZDogbmV3IEFycmF5KGNvdW50KSxcbiAgICAgICAgcmVzdWx0czogbmV3IEFycmF5KGNvdW50KVxuICAgICAgfTtcblxuICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMuX3NvdXJjZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IHRoaXMuX3NvdXJjZXNbaV07XG4gICAgICAgIGlzUHJvbWlzZShzb3VyY2UpICYmIChzb3VyY2UgPSBvYnNlcnZhYmxlRnJvbVByb21pc2Uoc291cmNlKSk7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMuYWRkKHNvdXJjZS5zdWJzY3JpYmUobmV3IEZvcmtKb2luT2JzZXJ2ZXIobywgc3RhdGUsIGksIHRoaXMuX2NiLCBzdWJzY3JpcHRpb25zKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc3Vic2NyaXB0aW9ucztcbiAgICB9O1xuXG4gICAgcmV0dXJuIEZvcmtKb2luT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBGb3JrSm9pbk9ic2VydmVyID0gKGZ1bmN0aW9uKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEZvcmtKb2luT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRm9ya0pvaW5PYnNlcnZlcihvLCBzLCBpLCBjYiwgc3Vicykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIHRoaXMuX2kgPSBpO1xuICAgICAgdGhpcy5fY2IgPSBjYjtcbiAgICAgIHRoaXMuX3N1YnMgPSBzdWJzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgRm9ya0pvaW5PYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICBpZiAoIXRoaXMuX3MuZmluaXNoZWQpIHtcbiAgICAgICAgdGhpcy5fcy5oYXNSZXN1bHRzW3RoaXMuX2ldID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fcy5yZXN1bHRzW3RoaXMuX2ldID0geDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgRm9ya0pvaW5PYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fcy5maW5pc2hlZCA9IHRydWU7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgICB0aGlzLl9zdWJzLmRpc3Bvc2UoKTtcbiAgICB9O1xuXG4gICAgRm9ya0pvaW5PYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLl9zLmZpbmlzaGVkKSB7XG4gICAgICAgIGlmICghdGhpcy5fcy5oYXNSZXN1bHRzW3RoaXMuX2ldKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zLmhhc0NvbXBsZXRlZFt0aGlzLl9pXSA9IHRydWU7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fcy5yZXN1bHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLl9zLmhhc0NvbXBsZXRlZFtpXSkgeyByZXR1cm47IH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zLmZpbmlzaGVkID0gdHJ1ZTtcblxuICAgICAgICB2YXIgcmVzID0gdHJ5Q2F0Y2godGhpcy5fY2IpLmFwcGx5KG51bGwsIHRoaXMuX3MucmVzdWx0cyk7XG4gICAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHJldHVybiB0aGlzLl9vLm9uRXJyb3IocmVzLmUpOyB9XG5cbiAgICAgICAgdGhpcy5fby5vbk5leHQocmVzKTtcbiAgICAgICAgdGhpcy5fby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gRm9ya0pvaW5PYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgIC8qKlxuICAgKiAgUnVucyBhbGwgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW4gcGFyYWxsZWwgYW5kIGNvbGxlY3QgdGhlaXIgbGFzdCBlbGVtZW50cy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmZvcmtKb2luKFtvYnMxLCBvYnMyXSk7XG4gICAqICAxIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5mb3JrSm9pbihvYnMxLCBvYnMyLCAuLi4pO1xuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIGFuIGFycmF5IGNvbGxlY3RpbmcgdGhlIGxhc3QgZWxlbWVudHMgb2YgYWxsIHRoZSBpbnB1dCBzZXF1ZW5jZXMuXG4gICAqL1xuICBPYnNlcnZhYmxlLmZvcmtKb2luID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICB2YXIgcmVzdWx0U2VsZWN0b3IgPSBpc0Z1bmN0aW9uKGFyZ3NbbGVuIC0gMV0pID8gYXJncy5wb3AoKSA6IGFyZ3VtZW50c1RvQXJyYXk7XG4gICAgQXJyYXkuaXNBcnJheShhcmdzWzBdKSAmJiAoYXJncyA9IGFyZ3NbMF0pO1xuICAgIHJldHVybiBuZXcgRm9ya0pvaW5PYnNlcnZhYmxlKGFyZ3MsIHJlc3VsdFNlbGVjdG9yKTtcbiAgfTtcblxuICAgLyoqXG4gICAqICBSdW5zIHR3byBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbiBwYXJhbGxlbCBhbmQgY29tYmluZXMgdGhlaXIgbGFzdCBlbGVtZW5ldHMuXG4gICAqIEBwYXJhbSB7T2JzZXJ2YWJsZX0gc2Vjb25kIFNlY29uZCBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXN1bHRTZWxlY3RvciBSZXN1bHQgc2VsZWN0b3IgZnVuY3Rpb24gdG8gaW52b2tlIHdpdGggdGhlIGxhc3QgZWxlbWVudHMgb2YgYm90aCBzZXF1ZW5jZXMuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBzZWxlY3RvciBmdW5jdGlvbiB3aXRoIHRoZSBsYXN0IGVsZW1lbnRzIG9mIGJvdGggaW5wdXQgc2VxdWVuY2VzLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmZvcmtKb2luID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgZm9yKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzWzBdKSkge1xuICAgICAgYXJnc1swXS51bnNoaWZ0KHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgfVxuICAgIHJldHVybiBPYnNlcnZhYmxlLmZvcmtKb2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDb21vbmFkaWMgYmluZCBvcGVyYXRvci5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgQSB0cmFuc2Zvcm0gZnVuY3Rpb24gdG8gYXBwbHkgdG8gZWFjaCBlbGVtZW50LlxuICAgKiBAcGFyYW0ge09iamVjdH0gc2NoZWR1bGVyIFNjaGVkdWxlciB1c2VkIHRvIGV4ZWN1dGUgdGhlIG9wZXJhdGlvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gdGhlIEltbWVkaWF0ZVNjaGVkdWxlci5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2hpY2ggcmVzdWx0cyBmcm9tIHRoZSBjb21vbmFkaWMgYmluZCBvcGVyYXRpb24uXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ubWFueVNlbGVjdCA9IG9ic2VydmFibGVQcm90by5leHRlbmQgPSBmdW5jdGlvbiAoc2VsZWN0b3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IFJ4LlNjaGVkdWxlci5pbW1lZGlhdGUpO1xuICAgIHZhciBzb3VyY2UgPSB0aGlzO1xuICAgIHJldHVybiBvYnNlcnZhYmxlRGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNoYWluO1xuXG4gICAgICByZXR1cm4gc291cmNlXG4gICAgICAgIC5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICB2YXIgY3VyciA9IG5ldyBDaGFpbk9ic2VydmFibGUoeCk7XG5cbiAgICAgICAgICBjaGFpbiAmJiBjaGFpbi5vbk5leHQoeCk7XG4gICAgICAgICAgY2hhaW4gPSBjdXJyO1xuXG4gICAgICAgICAgcmV0dXJuIGN1cnI7XG4gICAgICAgIH0pXG4gICAgICAgIC50YXAoXG4gICAgICAgICAgbm9vcCxcbiAgICAgICAgICBmdW5jdGlvbiAoZSkgeyBjaGFpbiAmJiBjaGFpbi5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHsgY2hhaW4gJiYgY2hhaW4ub25Db21wbGV0ZWQoKTsgfVxuICAgICAgICApXG4gICAgICAgIC5vYnNlcnZlT24oc2NoZWR1bGVyKVxuICAgICAgICAubWFwKHNlbGVjdG9yKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBDaGFpbk9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENoYWluT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBDaGFpbk9ic2VydmFibGUoaGVhZCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLmhlYWQgPSBoZWFkO1xuICAgICAgdGhpcy50YWlsID0gbmV3IEFzeW5jU3ViamVjdCgpO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoQ2hhaW5PYnNlcnZhYmxlLnByb3RvdHlwZSwgT2JzZXJ2ZXIsIHtcbiAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIHZhciBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgICAgZy5hZGQoY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZSh0aGlzLCBmdW5jdGlvbiAoXywgc2VsZikge1xuICAgICAgICAgIG8ub25OZXh0KHNlbGYuaGVhZCk7XG4gICAgICAgICAgZy5hZGQoc2VsZi50YWlsLm1lcmdlQWxsKCkuc3Vic2NyaWJlKG8pKTtcbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHJldHVybiBnO1xuICAgICAgfSxcbiAgICAgIG9uQ29tcGxldGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMub25OZXh0KE9ic2VydmFibGUuZW1wdHkoKSk7XG4gICAgICB9LFxuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhpcy5vbk5leHQoT2JzZXJ2YWJsZVsndGhyb3cnXShlKSk7XG4gICAgICB9LFxuICAgICAgb25OZXh0OiBmdW5jdGlvbiAodikge1xuICAgICAgICB0aGlzLnRhaWwub25OZXh0KHYpO1xuICAgICAgICB0aGlzLnRhaWwub25Db21wbGV0ZWQoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBDaGFpbk9ic2VydmFibGU7XG5cbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgdmFyIE1hcCA9IHJvb3QuTWFwIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTWFwKCkge1xuICAgICAgdGhpcy5zaXplID0gMDtcbiAgICAgIHRoaXMuX3ZhbHVlcyA9IFtdO1xuICAgICAgdGhpcy5fa2V5cyA9IFtdO1xuICAgIH1cblxuICAgIE1hcC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcbiAgICAgIGlmIChpID09PSAtMSkgeyByZXR1cm4gZmFsc2U7IH1cbiAgICAgIHRoaXMuX3ZhbHVlcy5zcGxpY2UoaSwgMSk7XG4gICAgICB0aGlzLl9rZXlzLnNwbGljZShpLCAxKTtcbiAgICAgIHRoaXMuc2l6ZS0tO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcbiAgICAgIHJldHVybiBpID09PSAtMSA/IHVuZGVmaW5lZCA6IHRoaXMuX3ZhbHVlc1tpXTtcbiAgICB9O1xuXG4gICAgTWFwLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgdmFyIGkgPSB0aGlzLl9rZXlzLmluZGV4T2Yoa2V5KTtcbiAgICAgIGlmIChpID09PSAtMSkge1xuICAgICAgICB0aGlzLl9rZXlzLnB1c2goa2V5KTtcbiAgICAgICAgdGhpcy5fdmFsdWVzLnB1c2godmFsdWUpO1xuICAgICAgICB0aGlzLnNpemUrKztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3ZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIE1hcC5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uIChjYiwgdGhpc0FyZykge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnNpemU7IGkrKykge1xuICAgICAgICBjYi5jYWxsKHRoaXNBcmcsIHRoaXMuX3ZhbHVlc1tpXSwgdGhpcy5fa2V5c1tpXSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBNYXA7XG4gIH0oKSk7XG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBSZXByZXNlbnRzIGEgam9pbiBwYXR0ZXJuIG92ZXIgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMuXG4gICAqL1xuICBmdW5jdGlvbiBQYXR0ZXJuKHBhdHRlcm5zKSB7XG4gICAgdGhpcy5wYXR0ZXJucyA9IHBhdHRlcm5zO1xuICB9XG5cbiAgLyoqXG4gICAqICBDcmVhdGVzIGEgcGF0dGVybiB0aGF0IG1hdGNoZXMgdGhlIGN1cnJlbnQgcGxhbiBtYXRjaGVzIGFuZCB3aGVuIHRoZSBzcGVjaWZpZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaGFzIGFuIGF2YWlsYWJsZSB2YWx1ZS5cbiAgICogIEBwYXJhbSBvdGhlciBPYnNlcnZhYmxlIHNlcXVlbmNlIHRvIG1hdGNoIGluIGFkZGl0aW9uIHRvIHRoZSBjdXJyZW50IHBhdHRlcm4uXG4gICAqICBAcmV0dXJuIHtQYXR0ZXJufSBQYXR0ZXJuIG9iamVjdCB0aGF0IG1hdGNoZXMgd2hlbiBhbGwgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW4gdGhlIHBhdHRlcm4gaGF2ZSBhbiBhdmFpbGFibGUgdmFsdWUuXG4gICAqL1xuICBQYXR0ZXJuLnByb3RvdHlwZS5hbmQgPSBmdW5jdGlvbiAob3RoZXIpIHtcbiAgICByZXR1cm4gbmV3IFBhdHRlcm4odGhpcy5wYXR0ZXJucy5jb25jYXQob3RoZXIpKTtcbiAgfTtcblxuICAvKipcbiAgICogIE1hdGNoZXMgd2hlbiBhbGwgb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaW4gdGhlIHBhdHRlcm4gKHNwZWNpZmllZCB1c2luZyBhIGNoYWluIG9mIGFuZCBvcGVyYXRvcnMpIGhhdmUgYW4gYXZhaWxhYmxlIHZhbHVlIGFuZCBwcm9qZWN0cyB0aGUgdmFsdWVzLlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgU2VsZWN0b3IgdGhhdCB3aWxsIGJlIGludm9rZWQgd2l0aCBhdmFpbGFibGUgdmFsdWVzIGZyb20gdGhlIHNvdXJjZSBzZXF1ZW5jZXMsIGluIHRoZSBzYW1lIG9yZGVyIG9mIHRoZSBzZXF1ZW5jZXMgaW4gdGhlIHBhdHRlcm4uXG4gICAqICBAcmV0dXJuIHtQbGFufSBQbGFuIHRoYXQgcHJvZHVjZXMgdGhlIHByb2plY3RlZCB2YWx1ZXMsIHRvIGJlIGZlZCAod2l0aCBvdGhlciBwbGFucykgdG8gdGhlIHdoZW4gb3BlcmF0b3IuXG4gICAqL1xuICBQYXR0ZXJuLnByb3RvdHlwZS50aGVuRG8gPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IFBsYW4odGhpcywgc2VsZWN0b3IpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIFBsYW4oZXhwcmVzc2lvbiwgc2VsZWN0b3IpIHtcbiAgICB0aGlzLmV4cHJlc3Npb24gPSBleHByZXNzaW9uO1xuICAgIHRoaXMuc2VsZWN0b3IgPSBzZWxlY3RvcjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZU9uRXJyb3IobykgeyByZXR1cm4gZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9OyB9XG4gIGZ1bmN0aW9uIGhhbmRsZU9uTmV4dChzZWxmLCBvYnNlcnZlcikge1xuICAgIHJldHVybiBmdW5jdGlvbiBvbk5leHQgKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHNlbGYuc2VsZWN0b3IpLmFwcGx5KHNlbGYsIGFyZ3VtZW50cyk7XG4gICAgICBpZiAocmVzdWx0ID09PSBlcnJvck9iaikgeyByZXR1cm4gb2JzZXJ2ZXIub25FcnJvcihyZXN1bHQuZSk7IH1cbiAgICAgIG9ic2VydmVyLm9uTmV4dChyZXN1bHQpO1xuICAgIH07XG4gIH1cblxuICBQbGFuLnByb3RvdHlwZS5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChleHRlcm5hbFN1YnNjcmlwdGlvbnMsIG9ic2VydmVyLCBkZWFjdGl2YXRlKSB7XG4gICAgdmFyIGpvaW5PYnNlcnZlcnMgPSBbXSwgZXJySGFuZGxlciA9IGhhbmRsZU9uRXJyb3Iob2JzZXJ2ZXIpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0aGlzLmV4cHJlc3Npb24ucGF0dGVybnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGpvaW5PYnNlcnZlcnMucHVzaChwbGFuQ3JlYXRlT2JzZXJ2ZXIoZXh0ZXJuYWxTdWJzY3JpcHRpb25zLCB0aGlzLmV4cHJlc3Npb24ucGF0dGVybnNbaV0sIGVyckhhbmRsZXIpKTtcbiAgICB9XG4gICAgdmFyIGFjdGl2ZVBsYW4gPSBuZXcgQWN0aXZlUGxhbihqb2luT2JzZXJ2ZXJzLCBoYW5kbGVPbk5leHQodGhpcywgb2JzZXJ2ZXIpLCBmdW5jdGlvbiAoKSB7XG4gICAgICBmb3IgKHZhciBqID0gMCwgamxlbiA9IGpvaW5PYnNlcnZlcnMubGVuZ3RoOyBqIDwgamxlbjsgaisrKSB7XG4gICAgICAgIGpvaW5PYnNlcnZlcnNbal0ucmVtb3ZlQWN0aXZlUGxhbihhY3RpdmVQbGFuKTtcbiAgICAgIH1cbiAgICAgIGRlYWN0aXZhdGUoYWN0aXZlUGxhbik7XG4gICAgfSk7XG4gICAgZm9yIChpID0gMCwgbGVuID0gam9pbk9ic2VydmVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgam9pbk9ic2VydmVyc1tpXS5hZGRBY3RpdmVQbGFuKGFjdGl2ZVBsYW4pO1xuICAgIH1cbiAgICByZXR1cm4gYWN0aXZlUGxhbjtcbiAgfTtcblxuICBmdW5jdGlvbiBwbGFuQ3JlYXRlT2JzZXJ2ZXIoZXh0ZXJuYWxTdWJzY3JpcHRpb25zLCBvYnNlcnZhYmxlLCBvbkVycm9yKSB7XG4gICAgdmFyIGVudHJ5ID0gZXh0ZXJuYWxTdWJzY3JpcHRpb25zLmdldChvYnNlcnZhYmxlKTtcbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgSm9pbk9ic2VydmVyKG9ic2VydmFibGUsIG9uRXJyb3IpO1xuICAgICAgZXh0ZXJuYWxTdWJzY3JpcHRpb25zLnNldChvYnNlcnZhYmxlLCBvYnNlcnZlcik7XG4gICAgICByZXR1cm4gb2JzZXJ2ZXI7XG4gICAgfVxuICAgIHJldHVybiBlbnRyeTtcbiAgfVxuXG4gIGZ1bmN0aW9uIEFjdGl2ZVBsYW4oam9pbk9ic2VydmVyQXJyYXksIG9uTmV4dCwgb25Db21wbGV0ZWQpIHtcbiAgICB0aGlzLmpvaW5PYnNlcnZlckFycmF5ID0gam9pbk9ic2VydmVyQXJyYXk7XG4gICAgdGhpcy5vbk5leHQgPSBvbk5leHQ7XG4gICAgdGhpcy5vbkNvbXBsZXRlZCA9IG9uQ29tcGxldGVkO1xuICAgIHRoaXMuam9pbk9ic2VydmVycyA9IG5ldyBNYXAoKTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5qb2luT2JzZXJ2ZXJBcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgdmFyIGpvaW5PYnNlcnZlciA9IHRoaXMuam9pbk9ic2VydmVyQXJyYXlbaV07XG4gICAgICB0aGlzLmpvaW5PYnNlcnZlcnMuc2V0KGpvaW5PYnNlcnZlciwgam9pbk9ic2VydmVyKTtcbiAgICB9XG4gIH1cblxuICBBY3RpdmVQbGFuLnByb3RvdHlwZS5kZXF1ZXVlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuam9pbk9ic2VydmVycy5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7IHYucXVldWUuc2hpZnQoKTsgfSk7XG4gIH07XG5cbiAgQWN0aXZlUGxhbi5wcm90b3R5cGUubWF0Y2ggPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGksIGxlbiwgaGFzVmFsdWVzID0gdHJ1ZTtcbiAgICBmb3IgKGkgPSAwLCBsZW4gPSB0aGlzLmpvaW5PYnNlcnZlckFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5qb2luT2JzZXJ2ZXJBcnJheVtpXS5xdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgaGFzVmFsdWVzID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGFzVmFsdWVzKSB7XG4gICAgICB2YXIgZmlyc3RWYWx1ZXMgPSBbXSxcbiAgICAgICAgICBpc0NvbXBsZXRlZCA9IGZhbHNlO1xuICAgICAgZm9yIChpID0gMCwgbGVuID0gdGhpcy5qb2luT2JzZXJ2ZXJBcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBmaXJzdFZhbHVlcy5wdXNoKHRoaXMuam9pbk9ic2VydmVyQXJyYXlbaV0ucXVldWVbMF0pO1xuICAgICAgICB0aGlzLmpvaW5PYnNlcnZlckFycmF5W2ldLnF1ZXVlWzBdLmtpbmQgPT09ICdDJyAmJiAoaXNDb21wbGV0ZWQgPSB0cnVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChpc0NvbXBsZXRlZCkge1xuICAgICAgICB0aGlzLm9uQ29tcGxldGVkKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRlcXVldWUoKTtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICBmb3IgKGkgPSAwLCBsZW4gPSBmaXJzdFZhbHVlcy5sZW5ndGg7IGkgPCBmaXJzdFZhbHVlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhbHVlcy5wdXNoKGZpcnN0VmFsdWVzW2ldLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9uTmV4dC5hcHBseSh0aGlzLCB2YWx1ZXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgSm9pbk9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhKb2luT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBKb2luT2JzZXJ2ZXIoc291cmNlLCBvbkVycm9yKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5vbkVycm9yID0gb25FcnJvcjtcbiAgICAgIHRoaXMucXVldWUgPSBbXTtcbiAgICAgIHRoaXMuYWN0aXZlUGxhbnMgPSBbXTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgSm9pbk9ic2VydmVyUHJvdG90eXBlID0gSm9pbk9ic2VydmVyLnByb3RvdHlwZTtcblxuICAgIEpvaW5PYnNlcnZlclByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKG5vdGlmaWNhdGlvbikge1xuICAgICAgaWYgKCF0aGlzLmlzRGlzcG9zZWQpIHtcbiAgICAgICAgaWYgKG5vdGlmaWNhdGlvbi5raW5kID09PSAnRScpIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5vbkVycm9yKG5vdGlmaWNhdGlvbi5lcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5xdWV1ZS5wdXNoKG5vdGlmaWNhdGlvbik7XG4gICAgICAgIHZhciBhY3RpdmVQbGFucyA9IHRoaXMuYWN0aXZlUGxhbnMuc2xpY2UoMCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhY3RpdmVQbGFucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIGFjdGl2ZVBsYW5zW2ldLm1hdGNoKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSm9pbk9ic2VydmVyUHJvdG90eXBlLmVycm9yID0gbm9vcDtcbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUuY29tcGxldGVkID0gbm9vcDtcblxuICAgIEpvaW5PYnNlcnZlclByb3RvdHlwZS5hZGRBY3RpdmVQbGFuID0gZnVuY3Rpb24gKGFjdGl2ZVBsYW4pIHtcbiAgICAgIHRoaXMuYWN0aXZlUGxhbnMucHVzaChhY3RpdmVQbGFuKTtcbiAgICB9O1xuXG4gICAgSm9pbk9ic2VydmVyUHJvdG90eXBlLnN1YnNjcmliZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2UubWF0ZXJpYWxpemUoKS5zdWJzY3JpYmUodGhpcykpO1xuICAgIH07XG5cbiAgICBKb2luT2JzZXJ2ZXJQcm90b3R5cGUucmVtb3ZlQWN0aXZlUGxhbiA9IGZ1bmN0aW9uIChhY3RpdmVQbGFuKSB7XG4gICAgICB0aGlzLmFjdGl2ZVBsYW5zLnNwbGljZSh0aGlzLmFjdGl2ZVBsYW5zLmluZGV4T2YoYWN0aXZlUGxhbiksIDEpO1xuICAgICAgdGhpcy5hY3RpdmVQbGFucy5sZW5ndGggPT09IDAgJiYgdGhpcy5kaXNwb3NlKCk7XG4gICAgfTtcblxuICAgIEpvaW5PYnNlcnZlclByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICBpZiAoIXRoaXMuaXNEaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmlzRGlzcG9zZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBKb2luT2JzZXJ2ZXI7XG4gIH0gKEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIENyZWF0ZXMgYSBwYXR0ZXJuIHRoYXQgbWF0Y2hlcyB3aGVuIGJvdGggb2JzZXJ2YWJsZSBzZXF1ZW5jZXMgaGF2ZSBhbiBhdmFpbGFibGUgdmFsdWUuXG4gICAqXG4gICAqICBAcGFyYW0gcmlnaHQgT2JzZXJ2YWJsZSBzZXF1ZW5jZSB0byBtYXRjaCB3aXRoIHRoZSBjdXJyZW50IHNlcXVlbmNlLlxuICAgKiAgQHJldHVybiB7UGF0dGVybn0gUGF0dGVybiBvYmplY3QgdGhhdCBtYXRjaGVzIHdoZW4gYm90aCBvYnNlcnZhYmxlIHNlcXVlbmNlcyBoYXZlIGFuIGF2YWlsYWJsZSB2YWx1ZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5hbmQgPSBmdW5jdGlvbiAocmlnaHQpIHtcbiAgICByZXR1cm4gbmV3IFBhdHRlcm4oW3RoaXMsIHJpZ2h0XSk7XG4gIH07XG5cbiAgLyoqXG4gICAqICBNYXRjaGVzIHdoZW4gdGhlIG9ic2VydmFibGUgc2VxdWVuY2UgaGFzIGFuIGF2YWlsYWJsZSB2YWx1ZSBhbmQgcHJvamVjdHMgdGhlIHZhbHVlLlxuICAgKlxuICAgKiAgQHBhcmFtIHtGdW5jdGlvbn0gc2VsZWN0b3IgU2VsZWN0b3IgdGhhdCB3aWxsIGJlIGludm9rZWQgZm9yIHZhbHVlcyBpbiB0aGUgc291cmNlIHNlcXVlbmNlLlxuICAgKiAgQHJldHVybnMge1BsYW59IFBsYW4gdGhhdCBwcm9kdWNlcyB0aGUgcHJvamVjdGVkIHZhbHVlcywgdG8gYmUgZmVkICh3aXRoIG90aGVyIHBsYW5zKSB0byB0aGUgd2hlbiBvcGVyYXRvci5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50aGVuRG8gPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IFBhdHRlcm4oW3RoaXNdKS50aGVuRG8oc2VsZWN0b3IpO1xuICB9O1xuXG4gIC8qKlxuICAgKiAgSm9pbnMgdG9nZXRoZXIgdGhlIHJlc3VsdHMgZnJvbSBzZXZlcmFsIHBhdHRlcm5zLlxuICAgKlxuICAgKiAgQHBhcmFtIHBsYW5zIEEgc2VyaWVzIG9mIHBsYW5zIChzcGVjaWZpZWQgYXMgYW4gQXJyYXkgb2YgYXMgYSBzZXJpZXMgb2YgYXJndW1lbnRzKSBjcmVhdGVkIGJ5IHVzZSBvZiB0aGUgVGhlbiBvcGVyYXRvciBvbiBwYXR0ZXJucy5cbiAgICogIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBPYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGhlIHJlc3VsdHMgZm9ybSBtYXRjaGluZyBzZXZlcmFsIHBhdHRlcm5zLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS53aGVuID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBwbGFucztcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICBwbGFucyA9IGFyZ3VtZW50c1swXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGxhbnMgPSBuZXcgQXJyYXkobGVuKTtcbiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykgeyBwbGFuc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBhY3RpdmVQbGFucyA9IFtdLFxuICAgICAgICAgIGV4dGVybmFsU3Vic2NyaXB0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICAgIHZhciBvdXRPYnNlcnZlciA9IG9ic2VydmVyQ3JlYXRlKFxuICAgICAgICBmdW5jdGlvbiAoeCkgeyBvLm9uTmV4dCh4KTsgfSxcbiAgICAgICAgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgIGV4dGVybmFsU3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7IHYub25FcnJvcihlcnIpOyB9KTtcbiAgICAgICAgICBvLm9uRXJyb3IoZXJyKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKHgpIHsgby5vbkNvbXBsZXRlZCgpOyB9XG4gICAgICApO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHBsYW5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgYWN0aXZlUGxhbnMucHVzaChwbGFuc1tpXS5hY3RpdmF0ZShleHRlcm5hbFN1YnNjcmlwdGlvbnMsIG91dE9ic2VydmVyLCBmdW5jdGlvbiAoYWN0aXZlUGxhbikge1xuICAgICAgICAgICAgdmFyIGlkeCA9IGFjdGl2ZVBsYW5zLmluZGV4T2YoYWN0aXZlUGxhbik7XG4gICAgICAgICAgICBhY3RpdmVQbGFucy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIGFjdGl2ZVBsYW5zLmxlbmd0aCA9PT0gMCAmJiBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBvYnNlcnZhYmxlVGhyb3coZSkuc3Vic2NyaWJlKG8pO1xuICAgICAgfVxuICAgICAgdmFyIGdyb3VwID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKTtcbiAgICAgIGV4dGVybmFsU3Vic2NyaXB0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChqb2luT2JzZXJ2ZXIpIHtcbiAgICAgICAgam9pbk9ic2VydmVyLnN1YnNjcmliZSgpO1xuICAgICAgICBncm91cC5hZGQoam9pbk9ic2VydmVyKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gZ3JvdXA7XG4gICAgfSk7XG4gIH07XG5cbiAgdmFyIFRpbWVyT2JzZXJ2YWJsZSA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaW1lck9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGltZXJPYnNlcnZhYmxlKGR0LCBzKSB7XG4gICAgICB0aGlzLl9kdCA9IGR0O1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaW1lck9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgcmV0dXJuIHRoaXMuX3Muc2NoZWR1bGVGdXR1cmUobywgdGhpcy5fZHQsIHNjaGVkdWxlTWV0aG9kKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgbykge1xuICAgICAgby5vbk5leHQoMCk7XG4gICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFRpbWVyT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIGZ1bmN0aW9uIF9vYnNlcnZhYmxlVGltZXIoZHVlVGltZSwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIG5ldyBUaW1lck9ic2VydmFibGUoZHVlVGltZSwgc2NoZWR1bGVyKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9ic2VydmFibGVUaW1lckRhdGVBbmRQZXJpb2QoZHVlVGltZSwgcGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICB2YXIgZCA9IGR1ZVRpbWUsIHAgPSBub3JtYWxpemVUaW1lKHBlcmlvZCk7XG4gICAgICByZXR1cm4gc2NoZWR1bGVyLnNjaGVkdWxlUmVjdXJzaXZlRnV0dXJlKDAsIGQsIGZ1bmN0aW9uIChjb3VudCwgc2VsZikge1xuICAgICAgICBpZiAocCA+IDApIHtcbiAgICAgICAgICB2YXIgbm93ID0gc2NoZWR1bGVyLm5vdygpO1xuICAgICAgICAgIGQgPSBuZXcgRGF0ZShkLmdldFRpbWUoKSArIHApO1xuICAgICAgICAgIGQuZ2V0VGltZSgpIDw9IG5vdyAmJiAoZCA9IG5ldyBEYXRlKG5vdyArIHApKTtcbiAgICAgICAgfVxuICAgICAgICBvYnNlcnZlci5vbk5leHQoY291bnQpO1xuICAgICAgICBzZWxmKGNvdW50ICsgMSwgbmV3IERhdGUoZCkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlVGltZXJUaW1lU3BhbkFuZFBlcmlvZChkdWVUaW1lLCBwZXJpb2QsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBkdWVUaW1lID09PSBwZXJpb2QgP1xuICAgICAgbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG9ic2VydmVyKSB7XG4gICAgICAgIHJldHVybiBzY2hlZHVsZXIuc2NoZWR1bGVQZXJpb2RpYygwLCBwZXJpb2QsIGZ1bmN0aW9uIChjb3VudCkge1xuICAgICAgICAgIG9ic2VydmVyLm9uTmV4dChjb3VudCk7XG4gICAgICAgICAgcmV0dXJuIGNvdW50ICsgMTtcbiAgICAgICAgfSk7XG4gICAgICB9KSA6XG4gICAgICBvYnNlcnZhYmxlRGVmZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZVRpbWVyRGF0ZUFuZFBlcmlvZChuZXcgRGF0ZShzY2hlZHVsZXIubm93KCkgKyBkdWVUaW1lKSwgcGVyaW9kLCBzY2hlZHVsZXIpO1xuICAgICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHByb2R1Y2VzIGEgdmFsdWUgYWZ0ZXIgZWFjaCBwZXJpb2QuXG4gICAqXG4gICAqIEBleGFtcGxlXG4gICAqICAxIC0gcmVzID0gUnguT2JzZXJ2YWJsZS5pbnRlcnZhbCgxMDAwKTtcbiAgICogIDIgLSByZXMgPSBSeC5PYnNlcnZhYmxlLmludGVydmFsKDEwMDAsIFJ4LlNjaGVkdWxlci50aW1lb3V0KTtcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHBlcmlvZCBQZXJpb2QgZm9yIHByb2R1Y2luZyB0aGUgdmFsdWVzIGluIHRoZSByZXN1bHRpbmcgc2VxdWVuY2UgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcykuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgUnguU2NoZWR1bGVyLnRpbWVvdXQgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBwcm9kdWNlcyBhIHZhbHVlIGFmdGVyIGVhY2ggcGVyaW9kLlxuICAgKi9cbiAgdmFyIG9ic2VydmFibGVpbnRlcnZhbCA9IE9ic2VydmFibGUuaW50ZXJ2YWwgPSBmdW5jdGlvbiAocGVyaW9kLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZVRpbWVyVGltZVNwYW5BbmRQZXJpb2QocGVyaW9kLCBwZXJpb2QsIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgPyBzY2hlZHVsZXIgOiBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHByb2R1Y2VzIGEgdmFsdWUgYWZ0ZXIgZHVlVGltZSBoYXMgZWxhcHNlZCBhbmQgdGhlbiBhZnRlciBlYWNoIHBlcmlvZC5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgQWJzb2x1dGUgKHNwZWNpZmllZCBhcyBhIERhdGUgb2JqZWN0KSBvciByZWxhdGl2ZSB0aW1lIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpIGF0IHdoaWNoIHRvIHByb2R1Y2UgdGhlIGZpcnN0IHZhbHVlLlxuICAgKiBAcGFyYW0ge01peGVkfSBbcGVyaW9kT3JTY2hlZHVsZXJdICBQZXJpb2QgdG8gcHJvZHVjZSBzdWJzZXF1ZW50IHZhbHVlcyAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKSwgb3IgdGhlIHNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgcmVzdWx0aW5nIHRpbWVyIGlzIG5vdCByZWN1cnJpbmcuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSAgU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IHByb2R1Y2VzIGEgdmFsdWUgYWZ0ZXIgZHVlIHRpbWUgaGFzIGVsYXBzZWQgYW5kIHRoZW4gZWFjaCBwZXJpb2QuXG4gICAqL1xuICB2YXIgb2JzZXJ2YWJsZVRpbWVyID0gT2JzZXJ2YWJsZS50aW1lciA9IGZ1bmN0aW9uIChkdWVUaW1lLCBwZXJpb2RPclNjaGVkdWxlciwgc2NoZWR1bGVyKSB7XG4gICAgdmFyIHBlcmlvZDtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICBpZiAocGVyaW9kT3JTY2hlZHVsZXIgIT0gbnVsbCAmJiB0eXBlb2YgcGVyaW9kT3JTY2hlZHVsZXIgPT09ICdudW1iZXInKSB7XG4gICAgICBwZXJpb2QgPSBwZXJpb2RPclNjaGVkdWxlcjtcbiAgICB9IGVsc2UgaWYgKGlzU2NoZWR1bGVyKHBlcmlvZE9yU2NoZWR1bGVyKSkge1xuICAgICAgc2NoZWR1bGVyID0gcGVyaW9kT3JTY2hlZHVsZXI7XG4gICAgfVxuICAgIGlmICgoZHVlVGltZSBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGR1ZVRpbWUgPT09ICdudW1iZXInKSAmJiBwZXJpb2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIF9vYnNlcnZhYmxlVGltZXIoZHVlVGltZSwgc2NoZWR1bGVyKTtcbiAgICB9XG4gICAgaWYgKGR1ZVRpbWUgaW5zdGFuY2VvZiBEYXRlICYmIHBlcmlvZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gb2JzZXJ2YWJsZVRpbWVyRGF0ZUFuZFBlcmlvZChkdWVUaW1lLCBwZXJpb2RPclNjaGVkdWxlciwgc2NoZWR1bGVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG9ic2VydmFibGVUaW1lclRpbWVTcGFuQW5kUGVyaW9kKGR1ZVRpbWUsIHBlcmlvZCwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICBmdW5jdGlvbiBvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZShzb3VyY2UsIGR1ZVRpbWUsIHNjaGVkdWxlcikge1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIGFjdGl2ZSA9IGZhbHNlLFxuICAgICAgICBjYW5jZWxhYmxlID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgZXhjZXB0aW9uID0gbnVsbCxcbiAgICAgICAgcSA9IFtdLFxuICAgICAgICBydW5uaW5nID0gZmFsc2UsXG4gICAgICAgIHN1YnNjcmlwdGlvbjtcbiAgICAgIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5tYXRlcmlhbGl6ZSgpLnRpbWVzdGFtcChzY2hlZHVsZXIpLnN1YnNjcmliZShmdW5jdGlvbiAobm90aWZpY2F0aW9uKSB7XG4gICAgICAgIHZhciBkLCBzaG91bGRSdW47XG4gICAgICAgIGlmIChub3RpZmljYXRpb24udmFsdWUua2luZCA9PT0gJ0UnKSB7XG4gICAgICAgICAgcSA9IFtdO1xuICAgICAgICAgIHEucHVzaChub3RpZmljYXRpb24pO1xuICAgICAgICAgIGV4Y2VwdGlvbiA9IG5vdGlmaWNhdGlvbi52YWx1ZS5lcnJvcjtcbiAgICAgICAgICBzaG91bGRSdW4gPSAhcnVubmluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxLnB1c2goeyB2YWx1ZTogbm90aWZpY2F0aW9uLnZhbHVlLCB0aW1lc3RhbXA6IG5vdGlmaWNhdGlvbi50aW1lc3RhbXAgKyBkdWVUaW1lIH0pO1xuICAgICAgICAgIHNob3VsZFJ1biA9ICFhY3RpdmU7XG4gICAgICAgICAgYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2hvdWxkUnVuKSB7XG4gICAgICAgICAgaWYgKGV4Y2VwdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICAgICAgby5vbkVycm9yKGV4Y2VwdGlvbik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgICAgICAgIGNhbmNlbGFibGUuc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgICAgICAgIGQuc2V0RGlzcG9zYWJsZShzY2hlZHVsZXIuc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUobnVsbCwgZHVlVGltZSwgZnVuY3Rpb24gKF8sIHNlbGYpIHtcbiAgICAgICAgICAgICAgdmFyIGUsIHJlY3Vyc2VEdWVUaW1lLCByZXN1bHQsIHNob3VsZFJlY3Vyc2U7XG4gICAgICAgICAgICAgIGlmIChleGNlcHRpb24gIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcnVubmluZyA9IHRydWU7XG4gICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aCA+IDAgJiYgcVswXS50aW1lc3RhbXAgLSBzY2hlZHVsZXIubm93KCkgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gcS5zaGlmdCgpLnZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICByZXN1bHQuYWNjZXB0KG8pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSB3aGlsZSAocmVzdWx0ICE9PSBudWxsKTtcbiAgICAgICAgICAgICAgc2hvdWxkUmVjdXJzZSA9IGZhbHNlO1xuICAgICAgICAgICAgICByZWN1cnNlRHVlVGltZSA9IDA7XG4gICAgICAgICAgICAgIGlmIChxLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBzaG91bGRSZWN1cnNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZWN1cnNlRHVlVGltZSA9IE1hdGgubWF4KDAsIHFbMF0udGltZXN0YW1wIC0gc2NoZWR1bGVyLm5vdygpKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlID0gZXhjZXB0aW9uO1xuICAgICAgICAgICAgICBydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgIGlmIChlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgby5vbkVycm9yKGUpO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNob3VsZFJlY3Vyc2UpIHtcbiAgICAgICAgICAgICAgICBzZWxmKG51bGwsIHJlY3Vyc2VEdWVUaW1lKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gb2JzZXJ2YWJsZURlbGF5QWJzb2x1dGUoc291cmNlLCBkdWVUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gb2JzZXJ2YWJsZURlZmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBvYnNlcnZhYmxlRGVsYXlSZWxhdGl2ZShzb3VyY2UsIGR1ZVRpbWUgLSBzY2hlZHVsZXIubm93KCksIHNjaGVkdWxlcik7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWxheVdpdGhTZWxlY3Rvcihzb3VyY2UsIHN1YnNjcmlwdGlvbkRlbGF5LCBkZWxheUR1cmF0aW9uU2VsZWN0b3IpIHtcbiAgICB2YXIgc3ViRGVsYXksIHNlbGVjdG9yO1xuICAgIGlmIChpc0Z1bmN0aW9uKHN1YnNjcmlwdGlvbkRlbGF5KSkge1xuICAgICAgc2VsZWN0b3IgPSBzdWJzY3JpcHRpb25EZWxheTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViRGVsYXkgPSBzdWJzY3JpcHRpb25EZWxheTtcbiAgICAgIHNlbGVjdG9yID0gZGVsYXlEdXJhdGlvblNlbGVjdG9yO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBkZWxheXMgPSBuZXcgQ29tcG9zaXRlRGlzcG9zYWJsZSgpLCBhdEVuZCA9IGZhbHNlLCBzdWJzY3JpcHRpb24gPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpO1xuXG4gICAgICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShcbiAgICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgdmFyIGRlbGF5ID0gdHJ5Q2F0Y2goc2VsZWN0b3IpKHgpO1xuICAgICAgICAgICAgaWYgKGRlbGF5ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKGRlbGF5LmUpOyB9XG4gICAgICAgICAgICB2YXIgZCA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICAgICAgZGVsYXlzLmFkZChkKTtcbiAgICAgICAgICAgIGQuc2V0RGlzcG9zYWJsZShkZWxheS5zdWJzY3JpYmUoXG4gICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBvLm9uTmV4dCh4KTtcbiAgICAgICAgICAgICAgICBkZWxheXMucmVtb3ZlKGQpO1xuICAgICAgICAgICAgICAgIGRvbmUoKTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgby5vbk5leHQoeCk7XG4gICAgICAgICAgICAgICAgZGVsYXlzLnJlbW92ZShkKTtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICkpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZnVuY3Rpb24gKGUpIHsgby5vbkVycm9yKGUpOyB9LFxuICAgICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGF0RW5kID0gdHJ1ZTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbi5kaXNwb3NlKCk7XG4gICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgfVxuICAgICAgICApKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gZG9uZSAoKSB7XG4gICAgICAgIGF0RW5kICYmIGRlbGF5cy5sZW5ndGggPT09IDAgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXN1YkRlbGF5KSB7XG4gICAgICAgIHN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShzdWJEZWxheS5zdWJzY3JpYmUoc3RhcnQsIGZ1bmN0aW9uIChlKSB7IG8ub25FcnJvcihlKTsgfSwgc3RhcnQpKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgZGVsYXlzKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqICBUaW1lIHNoaWZ0cyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSBkdWVUaW1lLlxuICAgKiAgVGhlIHJlbGF0aXZlIHRpbWUgaW50ZXJ2YWxzIGJldHdlZW4gdGhlIHZhbHVlcyBhcmUgcHJlc2VydmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVlVGltZSBBYnNvbHV0ZSAoc3BlY2lmaWVkIGFzIGEgRGF0ZSBvYmplY3QpIG9yIHJlbGF0aXZlIHRpbWUgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcykgYnkgd2hpY2ggdG8gc2hpZnQgdGhlIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSBkZWxheSB0aW1lcnMgb24uIElmIG5vdCBzcGVjaWZpZWQsIHRoZSB0aW1lb3V0IHNjaGVkdWxlciBpcyB1c2VkLlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gVGltZS1zaGlmdGVkIHNlcXVlbmNlLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLmRlbGF5ID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmaXJzdEFyZyA9IGFyZ3VtZW50c1swXTtcbiAgICBpZiAodHlwZW9mIGZpcnN0QXJnID09PSAnbnVtYmVyJyB8fCBmaXJzdEFyZyBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgIHZhciBkdWVUaW1lID0gZmlyc3RBcmcsIHNjaGVkdWxlciA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgICAgcmV0dXJuIGR1ZVRpbWUgaW5zdGFuY2VvZiBEYXRlID9cbiAgICAgICAgb2JzZXJ2YWJsZURlbGF5QWJzb2x1dGUodGhpcywgZHVlVGltZSwgc2NoZWR1bGVyKSA6XG4gICAgICAgIG9ic2VydmFibGVEZWxheVJlbGF0aXZlKHRoaXMsIGR1ZVRpbWUsIHNjaGVkdWxlcik7XG4gICAgfSBlbHNlIGlmIChPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShmaXJzdEFyZykgfHwgaXNGdW5jdGlvbihmaXJzdEFyZykpIHtcbiAgICAgIHJldHVybiBkZWxheVdpdGhTZWxlY3Rvcih0aGlzLCBmaXJzdEFyZywgYXJndW1lbnRzWzFdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cycpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgRGVib3VuY2VPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZWJvdW5jZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVib3VuY2VPYnNlcnZhYmxlKHNvdXJjZSwgZHQsIHMpIHtcbiAgICAgIGlzU2NoZWR1bGVyKHMpIHx8IChzID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2R0ID0gZHQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIERlYm91bmNlT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgY2FuY2VsYWJsZSA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgRGVib3VuY2VPYnNlcnZlcihvLCB0aGlzLl9kdCwgdGhpcy5fcywgY2FuY2VsYWJsZSkpLFxuICAgICAgICBjYW5jZWxhYmxlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIERlYm91bmNlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBEZWJvdW5jZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhEZWJvdW5jZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIERlYm91bmNlT2JzZXJ2ZXIob2JzZXJ2ZXIsIGR1ZVRpbWUsIHNjaGVkdWxlciwgY2FuY2VsYWJsZSkge1xuICAgICAgdGhpcy5fbyA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5fZCA9IGR1ZVRpbWU7XG4gICAgICB0aGlzLl9zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgICB0aGlzLl9jID0gY2FuY2VsYWJsZTtcbiAgICAgIHRoaXMuX3YgPSBudWxsO1xuICAgICAgdGhpcy5faHYgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lkID0gMDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlRnV0dXJlKHMsIHN0YXRlKSB7XG4gICAgICBzdGF0ZS5zZWxmLl9odiAmJiBzdGF0ZS5zZWxmLl9pZCA9PT0gc3RhdGUuY3VycmVudElkICYmIHN0YXRlLnNlbGYuX28ub25OZXh0KHN0YXRlLngpO1xuICAgICAgc3RhdGUuc2VsZi5faHYgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBEZWJvdW5jZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHRoaXMuX2h2ID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3YgPSB4O1xuICAgICAgdmFyIGN1cnJlbnRJZCA9ICsrdGhpcy5faWQsIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICAgIHRoaXMuX2Muc2V0RGlzcG9zYWJsZShkKTtcbiAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aGlzLl9zY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUodGhpcywgdGhpcy5fZCwgZnVuY3Rpb24gKF8sIHNlbGYpIHtcbiAgICAgICAgc2VsZi5faHYgJiYgc2VsZi5faWQgPT09IGN1cnJlbnRJZCAmJiBzZWxmLl9vLm9uTmV4dCh4KTtcbiAgICAgICAgc2VsZi5faHYgPSBmYWxzZTtcbiAgICAgIH0pKTtcbiAgICB9O1xuXG4gICAgRGVib3VuY2VPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5fYy5kaXNwb3NlKCk7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgICB0aGlzLl9odiA9IGZhbHNlO1xuICAgICAgdGhpcy5faWQrKztcbiAgICB9O1xuXG4gICAgRGVib3VuY2VPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fYy5kaXNwb3NlKCk7XG4gICAgICB0aGlzLl9odiAmJiB0aGlzLl9vLm9uTmV4dCh0aGlzLl92KTtcbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICAgIHRoaXMuX2h2ID0gZmFsc2U7XG4gICAgICB0aGlzLl9pZCsrO1xuICAgIH07XG5cbiAgICByZXR1cm4gRGVib3VuY2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VXaXRoU2VsZWN0b3Ioc291cmNlLCBkdXJhdGlvblNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgdmFsdWUsIGhhc1ZhbHVlID0gZmFsc2UsIGNhbmNlbGFibGUgPSBuZXcgU2VyaWFsRGlzcG9zYWJsZSgpLCBpZCA9IDA7XG4gICAgICB2YXIgc3Vic2NyaXB0aW9uID0gc291cmNlLnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICB2YXIgdGhyb3R0bGUgPSB0cnlDYXRjaChkdXJhdGlvblNlbGVjdG9yKSh4KTtcbiAgICAgICAgICBpZiAodGhyb3R0bGUgPT09IGVycm9yT2JqKSB7IHJldHVybiBvLm9uRXJyb3IodGhyb3R0bGUuZSk7IH1cblxuICAgICAgICAgIGlzUHJvbWlzZSh0aHJvdHRsZSkgJiYgKHRocm90dGxlID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHRocm90dGxlKSk7XG5cbiAgICAgICAgICBoYXNWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgdmFsdWUgPSB4O1xuICAgICAgICAgIGlkKys7XG4gICAgICAgICAgdmFyIGN1cnJlbnRpZCA9IGlkLCBkID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgICAgY2FuY2VsYWJsZS5zZXREaXNwb3NhYmxlKGQpO1xuICAgICAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aHJvdHRsZS5zdWJzY3JpYmUoXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGhhc1ZhbHVlICYmIGlkID09PSBjdXJyZW50aWQgJiYgby5vbk5leHQodmFsdWUpO1xuICAgICAgICAgICAgICBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICBkLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGhhc1ZhbHVlICYmIGlkID09PSBjdXJyZW50aWQgJiYgby5vbk5leHQodmFsdWUpO1xuICAgICAgICAgICAgICBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICBkLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBjYW5jZWxhYmxlLmRpc3Bvc2UoKTtcbiAgICAgICAgICBvLm9uRXJyb3IoZSk7XG4gICAgICAgICAgaGFzVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY2FuY2VsYWJsZS5kaXNwb3NlKCk7XG4gICAgICAgICAgaGFzVmFsdWUgJiYgby5vbk5leHQodmFsdWUpO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgIGlkKys7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoc3Vic2NyaXB0aW9uLCBjYW5jZWxhYmxlKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgb2JzZXJ2YWJsZVByb3RvLmRlYm91bmNlID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChpc0Z1bmN0aW9uIChhcmd1bWVudHNbMF0pKSB7XG4gICAgICByZXR1cm4gZGVib3VuY2VXaXRoU2VsZWN0b3IodGhpcywgYXJndW1lbnRzWzBdKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gbmV3IERlYm91bmNlT2JzZXJ2YWJsZSh0aGlzLCBhcmd1bWVudHNbMF0sIGFyZ3VtZW50c1sxXSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBhcmd1bWVudHMnKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIHplcm8gb3IgbW9yZSB3aW5kb3dzIHdoaWNoIGFyZSBwcm9kdWNlZCBiYXNlZCBvbiB0aW1pbmcgaW5mb3JtYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBMZW5ndGggb2YgZWFjaCB3aW5kb3cgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcykuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IFt0aW1lU2hpZnRPclNjaGVkdWxlcl0gIEludGVydmFsIGJldHdlZW4gY3JlYXRpb24gb2YgY29uc2VjdXRpdmUgd2luZG93cyAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKSwgb3IgYW4gb3B0aW9uYWwgc2NoZWR1bGVyIHBhcmFtZXRlci4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWUgc2hpZnQgY29ycmVzcG9uZHMgdG8gdGhlIHRpbWVTcGFuIHBhcmFtZXRlciwgcmVzdWx0aW5nIGluIG5vbi1vdmVybGFwcGluZyBhZGphY2VudCB3aW5kb3dzLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gd2luZG93aW5nIHRpbWVycyBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHdpbmRvd3MuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ud2luZG93V2l0aFRpbWUgPSBmdW5jdGlvbiAodGltZVNwYW4sIHRpbWVTaGlmdE9yU2NoZWR1bGVyLCBzY2hlZHVsZXIpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcywgdGltZVNoaWZ0O1xuICAgIHRpbWVTaGlmdE9yU2NoZWR1bGVyID09IG51bGwgJiYgKHRpbWVTaGlmdCA9IHRpbWVTcGFuKTtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICBpZiAodHlwZW9mIHRpbWVTaGlmdE9yU2NoZWR1bGVyID09PSAnbnVtYmVyJykge1xuICAgICAgdGltZVNoaWZ0ID0gdGltZVNoaWZ0T3JTY2hlZHVsZXI7XG4gICAgfSBlbHNlIGlmIChpc1NjaGVkdWxlcih0aW1lU2hpZnRPclNjaGVkdWxlcikpIHtcbiAgICAgIHRpbWVTaGlmdCA9IHRpbWVTcGFuO1xuICAgICAgc2NoZWR1bGVyID0gdGltZVNoaWZ0T3JTY2hlZHVsZXI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgIHZhciBncm91cERpc3Bvc2FibGUsXG4gICAgICAgIG5leHRTaGlmdCA9IHRpbWVTaGlmdCxcbiAgICAgICAgbmV4dFNwYW4gPSB0aW1lU3BhbixcbiAgICAgICAgcSA9IFtdLFxuICAgICAgICByZWZDb3VudERpc3Bvc2FibGUsXG4gICAgICAgIHRpbWVyRCA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIHRvdGFsVGltZSA9IDA7XG4gICAgICAgIGdyb3VwRGlzcG9zYWJsZSA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKHRpbWVyRCksXG4gICAgICAgIHJlZkNvdW50RGlzcG9zYWJsZSA9IG5ldyBSZWZDb3VudERpc3Bvc2FibGUoZ3JvdXBEaXNwb3NhYmxlKTtcblxuICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVRpbWVyICgpIHtcbiAgICAgICAgdmFyIG0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKSxcbiAgICAgICAgICBpc1NwYW4gPSBmYWxzZSxcbiAgICAgICAgICBpc1NoaWZ0ID0gZmFsc2U7XG4gICAgICAgIHRpbWVyRC5zZXREaXNwb3NhYmxlKG0pO1xuICAgICAgICBpZiAobmV4dFNwYW4gPT09IG5leHRTaGlmdCkge1xuICAgICAgICAgIGlzU3BhbiA9IHRydWU7XG4gICAgICAgICAgaXNTaGlmdCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAobmV4dFNwYW4gPCBuZXh0U2hpZnQpIHtcbiAgICAgICAgICAgIGlzU3BhbiA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXNTaGlmdCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld1RvdGFsVGltZSA9IGlzU3BhbiA/IG5leHRTcGFuIDogbmV4dFNoaWZ0LFxuICAgICAgICAgIHRzID0gbmV3VG90YWxUaW1lIC0gdG90YWxUaW1lO1xuICAgICAgICB0b3RhbFRpbWUgPSBuZXdUb3RhbFRpbWU7XG4gICAgICAgIGlmIChpc1NwYW4pIHtcbiAgICAgICAgICBuZXh0U3BhbiArPSB0aW1lU2hpZnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzU2hpZnQpIHtcbiAgICAgICAgICBuZXh0U2hpZnQgKz0gdGltZVNoaWZ0O1xuICAgICAgICB9XG4gICAgICAgIG0uc2V0RGlzcG9zYWJsZShzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUobnVsbCwgdHMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoaXNTaGlmdCkge1xuICAgICAgICAgICAgdmFyIHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgICAgcS5wdXNoKHMpO1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaXNTcGFuICYmIHEuc2hpZnQoKS5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgIGNyZWF0ZVRpbWVyKCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH07XG4gICAgICBxLnB1c2gobmV3IFN1YmplY3QoKSk7XG4gICAgICBvYnNlcnZlci5vbk5leHQoYWRkUmVmKHFbMF0sIHJlZkNvdW50RGlzcG9zYWJsZSkpO1xuICAgICAgY3JlYXRlVGltZXIoKTtcbiAgICAgIGdyb3VwRGlzcG9zYWJsZS5hZGQoc291cmNlLnN1YnNjcmliZShcbiAgICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcS5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBxW2ldLm9uTmV4dCh4KTsgfVxuICAgICAgICB9LFxuICAgICAgICBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBxLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7IHFbaV0ub25FcnJvcihlKTsgfVxuICAgICAgICAgIG9ic2VydmVyLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gcS5sZW5ndGg7IGkgPCBsZW47IGkrKykgeyBxW2ldLm9uQ29tcGxldGVkKCk7IH1cbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICApKTtcbiAgICAgIHJldHVybiByZWZDb3VudERpc3Bvc2FibGU7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICAvKipcbiAgICogIFByb2plY3RzIGVhY2ggZWxlbWVudCBvZiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGludG8gYSB3aW5kb3cgdGhhdCBpcyBjb21wbGV0ZWQgd2hlbiBlaXRoZXIgaXQncyBmdWxsIG9yIGEgZ2l2ZW4gYW1vdW50IG9mIHRpbWUgaGFzIGVsYXBzZWQuXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBNYXhpbXVtIHRpbWUgbGVuZ3RoIG9mIGEgd2luZG93LlxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnQgTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIGEgd2luZG93LlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gd2luZG93aW5nIHRpbWVycyBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIHdpbmRvd3MuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8ud2luZG93V2l0aFRpbWVPckNvdW50ID0gZnVuY3Rpb24gKHRpbWVTcGFuLCBjb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgdmFyIHNvdXJjZSA9IHRoaXM7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBBbm9ueW1vdXNPYnNlcnZhYmxlKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgdmFyIHRpbWVyRCA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgICAgZ3JvdXBEaXNwb3NhYmxlID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUodGltZXJEKSxcbiAgICAgICAgICByZWZDb3VudERpc3Bvc2FibGUgPSBuZXcgUmVmQ291bnREaXNwb3NhYmxlKGdyb3VwRGlzcG9zYWJsZSksXG4gICAgICAgICAgbiA9IDAsXG4gICAgICAgICAgd2luZG93SWQgPSAwLFxuICAgICAgICAgIHMgPSBuZXcgU3ViamVjdCgpO1xuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVUaW1lcihpZCkge1xuICAgICAgICB2YXIgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpO1xuICAgICAgICB0aW1lckQuc2V0RGlzcG9zYWJsZShtKTtcbiAgICAgICAgbS5zZXREaXNwb3NhYmxlKHNjaGVkdWxlci5zY2hlZHVsZUZ1dHVyZShudWxsLCB0aW1lU3BhbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChpZCAhPT0gd2luZG93SWQpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgbiA9IDA7XG4gICAgICAgICAgdmFyIG5ld0lkID0gKyt3aW5kb3dJZDtcbiAgICAgICAgICBzLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgcyA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgICAgICBjcmVhdGVUaW1lcihuZXdJZCk7XG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgIGNyZWF0ZVRpbWVyKDApO1xuXG4gICAgICBncm91cERpc3Bvc2FibGUuYWRkKHNvdXJjZS5zdWJzY3JpYmUoXG4gICAgICAgIGZ1bmN0aW9uICh4KSB7XG4gICAgICAgICAgdmFyIG5ld0lkID0gMCwgbmV3V2luZG93ID0gZmFsc2U7XG4gICAgICAgICAgcy5vbk5leHQoeCk7XG4gICAgICAgICAgaWYgKCsrbiA9PT0gY291bnQpIHtcbiAgICAgICAgICAgIG5ld1dpbmRvdyA9IHRydWU7XG4gICAgICAgICAgICBuID0gMDtcbiAgICAgICAgICAgIG5ld0lkID0gKyt3aW5kb3dJZDtcbiAgICAgICAgICAgIHMub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIHMgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgICAgb2JzZXJ2ZXIub25OZXh0KGFkZFJlZihzLCByZWZDb3VudERpc3Bvc2FibGUpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbmV3V2luZG93ICYmIGNyZWF0ZVRpbWVyKG5ld0lkKTtcbiAgICAgICAgfSxcbiAgICAgICAgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBzLm9uRXJyb3IoZSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub25FcnJvcihlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHMub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICBvYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgICB9XG4gICAgICApKTtcbiAgICAgIHJldHVybiByZWZDb3VudERpc3Bvc2FibGU7XG4gICAgfSwgc291cmNlKTtcbiAgfTtcblxuICBmdW5jdGlvbiB0b0FycmF5KHgpIHsgcmV0dXJuIHgudG9BcnJheSgpOyB9XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIHplcm8gb3IgbW9yZSBidWZmZXJzIHdoaWNoIGFyZSBwcm9kdWNlZCBiYXNlZCBvbiB0aW1pbmcgaW5mb3JtYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBMZW5ndGggb2YgZWFjaCBidWZmZXIgKHNwZWNpZmllZCBhcyBhbiBpbnRlZ2VyIGRlbm90aW5nIG1pbGxpc2Vjb25kcykuXG4gICAqIEBwYXJhbSB7TWl4ZWR9IFt0aW1lU2hpZnRPclNjaGVkdWxlcl0gIEludGVydmFsIGJldHdlZW4gY3JlYXRpb24gb2YgY29uc2VjdXRpdmUgYnVmZmVycyAoc3BlY2lmaWVkIGFzIGFuIGludGVnZXIgZGVub3RpbmcgbWlsbGlzZWNvbmRzKSwgb3IgYW4gb3B0aW9uYWwgc2NoZWR1bGVyIHBhcmFtZXRlci4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWUgc2hpZnQgY29ycmVzcG9uZHMgdG8gdGhlIHRpbWVTcGFuIHBhcmFtZXRlciwgcmVzdWx0aW5nIGluIG5vbi1vdmVybGFwcGluZyBhZGphY2VudCBidWZmZXJzLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gYnVmZmVyIHRpbWVycyBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGJ1ZmZlcnMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyV2l0aFRpbWUgPSBmdW5jdGlvbiAodGltZVNwYW4sIHRpbWVTaGlmdE9yU2NoZWR1bGVyLCBzY2hlZHVsZXIpIHtcbiAgICByZXR1cm4gdGhpcy53aW5kb3dXaXRoVGltZSh0aW1lU3BhbiwgdGltZVNoaWZ0T3JTY2hlZHVsZXIsIHNjaGVkdWxlcikuZmxhdE1hcCh0b0FycmF5KTtcbiAgfTtcblxuICBmdW5jdGlvbiB0b0FycmF5KHgpIHsgcmV0dXJuIHgudG9BcnJheSgpOyB9XG5cbiAgLyoqXG4gICAqICBQcm9qZWN0cyBlYWNoIGVsZW1lbnQgb2YgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBpbnRvIGEgYnVmZmVyIHRoYXQgaXMgY29tcGxldGVkIHdoZW4gZWl0aGVyIGl0J3MgZnVsbCBvciBhIGdpdmVuIGFtb3VudCBvZiB0aW1lIGhhcyBlbGFwc2VkLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZVNwYW4gTWF4aW11bSB0aW1lIGxlbmd0aCBvZiBhIGJ1ZmZlci5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50IE1heGltdW0gZWxlbWVudCBjb3VudCBvZiBhIGJ1ZmZlci5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIGJ1ZmZlcmluIHRpbWVycyBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIG9mIGJ1ZmZlcnMuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uYnVmZmVyV2l0aFRpbWVPckNvdW50ID0gZnVuY3Rpb24gKHRpbWVTcGFuLCBjb3VudCwgc2NoZWR1bGVyKSB7XG4gICAgcmV0dXJuIHRoaXMud2luZG93V2l0aFRpbWVPckNvdW50KHRpbWVTcGFuLCBjb3VudCwgc2NoZWR1bGVyKS5mbGF0TWFwKHRvQXJyYXkpO1xuICB9O1xuXG4gIHZhciBUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRpbWVJbnRlcnZhbE9ic2VydmFibGUoc291cmNlLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGltZUludGVydmFsT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUaW1lSW50ZXJ2YWxPYnNlcnZlcihvLCB0aGlzLl9zKSk7XG4gICAgfTtcblxuICAgIHJldHVybiBUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFRpbWVJbnRlcnZhbE9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUaW1lSW50ZXJ2YWxPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIFRpbWVJbnRlcnZhbE9ic2VydmVyKG8sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICB0aGlzLl9sID0gcy5ub3coKTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFRpbWVJbnRlcnZhbE9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBub3cgPSB0aGlzLl9zLm5vdygpLCBzcGFuID0gbm93IC0gdGhpcy5fbDtcbiAgICAgIHRoaXMuX2wgPSBub3c7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh7IHZhbHVlOiB4LCBpbnRlcnZhbDogc3BhbiB9KTtcbiAgICB9O1xuICAgIFRpbWVJbnRlcnZhbE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBUaW1lSW50ZXJ2YWxPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9vLm9uQ29tcGxldGVkKCk7IH07XG5cbiAgICByZXR1cm4gVGltZUludGVydmFsT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmVjb3JkcyB0aGUgdGltZSBpbnRlcnZhbCBiZXR3ZWVuIGNvbnNlY3V0aXZlIHZhbHVlcyBpbiBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS50aW1lSW50ZXJ2YWwoKTtcbiAgICogIDIgLSByZXMgPSBzb3VyY2UudGltZUludGVydmFsKFJ4LlNjaGVkdWxlci50aW1lb3V0KTtcbiAgICpcbiAgICogQHBhcmFtIFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdXNlZCB0byBjb21wdXRlIHRpbWUgaW50ZXJ2YWxzLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aW1lIGludGVydmFsIGluZm9ybWF0aW9uIG9uIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50aW1lSW50ZXJ2YWwgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBUaW1lSW50ZXJ2YWxPYnNlcnZhYmxlKHRoaXMsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFRpbWVzdGFtcE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRpbWVzdGFtcE9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGltZXN0YW1wT2JzZXJ2YWJsZShzb3VyY2UsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaW1lc3RhbXBPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFRpbWVzdGFtcE9ic2VydmVyKG8sIHRoaXMuX3MpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRpbWVzdGFtcE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgVGltZXN0YW1wT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRpbWVzdGFtcE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFRpbWVzdGFtcE9ic2VydmVyKG8sIHMpIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUaW1lc3RhbXBPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9vLm9uTmV4dCh7IHZhbHVlOiB4LCB0aW1lc3RhbXA6IHRoaXMuX3Mubm93KCkgfSk7XG4gICAgfTtcblxuICAgIFRpbWVzdGFtcE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9vLm9uRXJyb3IoZSk7XG4gICAgfTtcblxuICAgIFRpbWVzdGFtcE9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUaW1lc3RhbXBPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBSZWNvcmRzIHRoZSB0aW1lc3RhbXAgZm9yIGVhY2ggdmFsdWUgaW4gYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBzb3VyY2UudGltZXN0YW1wKCk7IC8vIHByb2R1Y2VzIHsgdmFsdWU6IHgsIHRpbWVzdGFtcDogdHMgfVxuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS50aW1lc3RhbXAoUnguU2NoZWR1bGVyLmRlZmF1bHQpO1xuICAgKlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB1c2VkIHRvIGNvbXB1dGUgdGltZXN0YW1wcy4gSWYgbm90IHNwZWNpZmllZCwgdGhlIGRlZmF1bHQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBvYnNlcnZhYmxlIHNlcXVlbmNlIHdpdGggdGltZXN0YW1wIGluZm9ybWF0aW9uIG9uIHZhbHVlcy5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50aW1lc3RhbXAgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBUaW1lc3RhbXBPYnNlcnZhYmxlKHRoaXMsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFNhbXBsZU9ic2VydmFibGUgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2FtcGxlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTYW1wbGVPYnNlcnZhYmxlKHNvdXJjZSwgc2FtcGxlcikge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9zYW1wbGVyID0gc2FtcGxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNhbXBsZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBhdEVuZDogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICBoYXNWYWx1ZTogZmFsc2UsXG4gICAgICAgIHNvdXJjZVN1YnNjcmlwdGlvbjogbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKClcbiAgICAgIH07XG5cbiAgICAgIHN0YXRlLnNvdXJjZVN1YnNjcmlwdGlvbi5zZXREaXNwb3NhYmxlKHRoaXMuc291cmNlLnN1YnNjcmliZShuZXcgU2FtcGxlU291cmNlT2JzZXJ2ZXIoc3RhdGUpKSk7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHN0YXRlLnNvdXJjZVN1YnNjcmlwdGlvbixcbiAgICAgICAgdGhpcy5fc2FtcGxlci5zdWJzY3JpYmUobmV3IFNhbXBsZXJPYnNlcnZlcihzdGF0ZSkpXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2FtcGxlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIHZhciBTYW1wbGVyT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2FtcGxlck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNhbXBsZXJPYnNlcnZlcihzKSB7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNhbXBsZXJPYnNlcnZlci5wcm90b3R5cGUuX2hhbmRsZU1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy5fcy5oYXNWYWx1ZSkge1xuICAgICAgICB0aGlzLl9zLmhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3Muby5vbk5leHQodGhpcy5fcy52YWx1ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zLmF0RW5kICYmIHRoaXMuX3Muby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBTYW1wbGVyT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX2hhbmRsZU1lc3NhZ2UoKTsgfTtcbiAgICBTYW1wbGVyT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vbkVycm9yKGUpOyB9O1xuICAgIFNhbXBsZXJPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkgeyB0aGlzLl9oYW5kbGVNZXNzYWdlKCk7IH07XG5cbiAgICByZXR1cm4gU2FtcGxlck9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgU2FtcGxlU291cmNlT2JzZXJ2ZXIgPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2FtcGxlU291cmNlT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2FtcGxlU291cmNlT2JzZXJ2ZXIocykge1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTYW1wbGVTb3VyY2VPYnNlcnZlci5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICB0aGlzLl9zLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3MudmFsdWUgPSB4O1xuICAgIH07XG4gICAgU2FtcGxlU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fcy5vLm9uRXJyb3IoZSk7IH07XG4gICAgU2FtcGxlU291cmNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3MuYXRFbmQgPSB0cnVlO1xuICAgICAgdGhpcy5fcy5zb3VyY2VTdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2FtcGxlU291cmNlT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgU2FtcGxlcyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBhdCBlYWNoIGludGVydmFsLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoc2FtcGxlT2JzZXJ2YWJsZSk7IC8vIFNhbXBsZXIgdGljayBzZXF1ZW5jZVxuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoNTAwMCk7IC8vIDUgc2Vjb25kc1xuICAgKiAgMiAtIHJlcyA9IHNvdXJjZS5zYW1wbGUoNTAwMCwgUnguU2NoZWR1bGVyLnRpbWVvdXQpOyAvLyA1IHNlY29uZHNcbiAgICpcbiAgICogQHBhcmFtIHtNaXhlZH0gaW50ZXJ2YWxPclNhbXBsZXIgSW50ZXJ2YWwgYXQgd2hpY2ggdG8gc2FtcGxlIChzcGVjaWZpZWQgYXMgYW4gaW50ZWdlciBkZW5vdGluZyBtaWxsaXNlY29uZHMpIG9yIFNhbXBsZXIgT2JzZXJ2YWJsZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSBzYW1wbGluZyB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBTYW1wbGVkIG9ic2VydmFibGUgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2FtcGxlID0gZnVuY3Rpb24gKGludGVydmFsT3JTYW1wbGVyLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gdHlwZW9mIGludGVydmFsT3JTYW1wbGVyID09PSAnbnVtYmVyJyA/XG4gICAgICBuZXcgU2FtcGxlT2JzZXJ2YWJsZSh0aGlzLCBvYnNlcnZhYmxlaW50ZXJ2YWwoaW50ZXJ2YWxPclNhbXBsZXIsIHNjaGVkdWxlcikpIDpcbiAgICAgIG5ldyBTYW1wbGVPYnNlcnZhYmxlKHRoaXMsIGludGVydmFsT3JTYW1wbGVyKTtcbiAgfTtcblxuICB2YXIgVGltZW91dEVycm9yID0gUnguVGltZW91dEVycm9yID0gZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ1RpbWVvdXQgaGFzIG9jY3VycmVkJztcbiAgICB0aGlzLm5hbWUgPSAnVGltZW91dEVycm9yJztcbiAgICBFcnJvci5jYWxsKHRoaXMpO1xuICB9O1xuICBUaW1lb3V0RXJyb3IucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuXG4gIGZ1bmN0aW9uIHRpbWVvdXRXaXRoU2VsZWN0b3Ioc291cmNlLCBmaXJzdFRpbWVvdXQsIHRpbWVvdXREdXJhdGlvblNlbGVjdG9yLCBvdGhlcikge1xuICAgIGlmIChpc0Z1bmN0aW9uKGZpcnN0VGltZW91dCkpIHtcbiAgICAgIG90aGVyID0gdGltZW91dER1cmF0aW9uU2VsZWN0b3I7XG4gICAgICB0aW1lb3V0RHVyYXRpb25TZWxlY3RvciA9IGZpcnN0VGltZW91dDtcbiAgICAgIGZpcnN0VGltZW91dCA9IG9ic2VydmFibGVOZXZlcigpO1xuICAgIH1cbiAgICBPYnNlcnZhYmxlLmlzT2JzZXJ2YWJsZShvdGhlcikgfHwgKG90aGVyID0gb2JzZXJ2YWJsZVRocm93KG5ldyBUaW1lb3V0RXJyb3IoKSkpO1xuICAgIHJldHVybiBuZXcgQW5vbnltb3VzT2JzZXJ2YWJsZShmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIHRpbWVyID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKSxcbiAgICAgICAgb3JpZ2luYWwgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblxuICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3JpZ2luYWwpO1xuXG4gICAgICB2YXIgaWQgPSAwLCBzd2l0Y2hlZCA9IGZhbHNlO1xuXG4gICAgICBmdW5jdGlvbiBzZXRUaW1lcih0aW1lb3V0KSB7XG4gICAgICAgIHZhciBteUlkID0gaWQsIGQgPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcblxuICAgICAgICBmdW5jdGlvbiB0aW1lcldpbnMoKSB7XG4gICAgICAgICAgc3dpdGNoZWQgPSAobXlJZCA9PT0gaWQpO1xuICAgICAgICAgIHJldHVybiBzd2l0Y2hlZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRpbWVyLnNldERpc3Bvc2FibGUoZCk7XG4gICAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aW1lb3V0LnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGltZXJXaW5zKCkgJiYgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3RoZXIuc3Vic2NyaWJlKG8pKTtcbiAgICAgICAgICBkLmRpc3Bvc2UoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB0aW1lcldpbnMoKSAmJiBvLm9uRXJyb3IoZSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aW1lcldpbnMoKSAmJiBzdWJzY3JpcHRpb24uc2V0RGlzcG9zYWJsZShvdGhlci5zdWJzY3JpYmUobykpO1xuICAgICAgICB9KSk7XG4gICAgICB9O1xuXG4gICAgICBzZXRUaW1lcihmaXJzdFRpbWVvdXQpO1xuXG4gICAgICBmdW5jdGlvbiBvV2lucygpIHtcbiAgICAgICAgdmFyIHJlcyA9ICFzd2l0Y2hlZDtcbiAgICAgICAgaWYgKHJlcykgeyBpZCsrOyB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9XG5cbiAgICAgIG9yaWdpbmFsLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICBpZiAob1dpbnMoKSkge1xuICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgIHZhciB0aW1lb3V0ID0gdHJ5Q2F0Y2godGltZW91dER1cmF0aW9uU2VsZWN0b3IpKHgpO1xuICAgICAgICAgIGlmICh0aW1lb3V0ID09PSBlcnJvck9iaikgeyByZXR1cm4gby5vbkVycm9yKHRpbWVvdXQuZSk7IH1cbiAgICAgICAgICBzZXRUaW1lcihpc1Byb21pc2UodGltZW91dCkgPyBvYnNlcnZhYmxlRnJvbVByb21pc2UodGltZW91dCkgOiB0aW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgb1dpbnMoKSAmJiBvLm9uRXJyb3IoZSk7XG4gICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9XaW5zKCkgJiYgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIG5ldyBCaW5hcnlEaXNwb3NhYmxlKHN1YnNjcmlwdGlvbiwgdGltZXIpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lb3V0KHNvdXJjZSwgZHVlVGltZSwgb3RoZXIsIHNjaGVkdWxlcikge1xuICAgIGlmIChpc1NjaGVkdWxlcihvdGhlcikpIHtcbiAgICAgIHNjaGVkdWxlciA9IG90aGVyO1xuICAgICAgb3RoZXIgPSBvYnNlcnZhYmxlVGhyb3cobmV3IFRpbWVvdXRFcnJvcigpKTtcbiAgICB9XG4gICAgaWYgKG90aGVyIGluc3RhbmNlb2YgRXJyb3IpIHsgb3RoZXIgPSBvYnNlcnZhYmxlVGhyb3cob3RoZXIpOyB9XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgT2JzZXJ2YWJsZS5pc09ic2VydmFibGUob3RoZXIpIHx8IChvdGhlciA9IG9ic2VydmFibGVUaHJvdyhuZXcgVGltZW91dEVycm9yKCkpKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBpZCA9IDAsXG4gICAgICAgIG9yaWdpbmFsID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCksXG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCksXG4gICAgICAgIHN3aXRjaGVkID0gZmFsc2UsXG4gICAgICAgIHRpbWVyID0gbmV3IFNlcmlhbERpc3Bvc2FibGUoKTtcblxuICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3JpZ2luYWwpO1xuXG4gICAgICBmdW5jdGlvbiBjcmVhdGVUaW1lcigpIHtcbiAgICAgICAgdmFyIG15SWQgPSBpZDtcbiAgICAgICAgdGltZXIuc2V0RGlzcG9zYWJsZShzY2hlZHVsZXIuc2NoZWR1bGVGdXR1cmUobnVsbCwgZHVlVGltZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHN3aXRjaGVkID0gaWQgPT09IG15SWQ7XG4gICAgICAgICAgaWYgKHN3aXRjaGVkKSB7XG4gICAgICAgICAgICBpc1Byb21pc2Uob3RoZXIpICYmIChvdGhlciA9IG9ic2VydmFibGVGcm9tUHJvbWlzZShvdGhlcikpO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnNldERpc3Bvc2FibGUob3RoZXIuc3Vic2NyaWJlKG8pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgIH1cblxuICAgICAgY3JlYXRlVGltZXIoKTtcblxuICAgICAgb3JpZ2luYWwuc2V0RGlzcG9zYWJsZShzb3VyY2Uuc3Vic2NyaWJlKGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIGlmICghc3dpdGNoZWQpIHtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgIGNyZWF0ZVRpbWVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0sIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICghc3dpdGNoZWQpIHtcbiAgICAgICAgICBpZCsrO1xuICAgICAgICAgIG8ub25FcnJvcihlKTtcbiAgICAgICAgfVxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXN3aXRjaGVkKSB7XG4gICAgICAgICAgaWQrKztcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShzdWJzY3JpcHRpb24sIHRpbWVyKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9XG5cbiAgb2JzZXJ2YWJsZVByb3RvLnRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZpcnN0QXJnID0gYXJndW1lbnRzWzBdO1xuICAgIGlmIChmaXJzdEFyZyBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGZpcnN0QXJnID09PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuIHRpbWVvdXQodGhpcywgZmlyc3RBcmcsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICB9IGVsc2UgaWYgKE9ic2VydmFibGUuaXNPYnNlcnZhYmxlKGZpcnN0QXJnKSB8fCBpc0Z1bmN0aW9uKGZpcnN0QXJnKSkge1xuICAgICAgcmV0dXJuIHRpbWVvdXRXaXRoU2VsZWN0b3IodGhpcywgZmlyc3RBcmcsIGFyZ3VtZW50c1sxXSwgYXJndW1lbnRzWzJdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50cycpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEdlbmVyYXRlQWJzb2x1dGVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEdlbmVyYXRlQWJzb2x1dGVPYnNlcnZhYmxlKHN0YXRlLCBjbmRGbiwgaXRyRm4sIHJlc0ZuLCB0aW1lRm4sIHMpIHtcbiAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLl9jbmRGbiA9IGNuZEZuO1xuICAgICAgdGhpcy5faXRyRm4gPSBpdHJGbjtcbiAgICAgIHRoaXMuX3Jlc0ZuID0gcmVzRm47XG4gICAgICB0aGlzLl90aW1lRm4gPSB0aW1lRm47XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlUmVjdXJzaXZlKHN0YXRlLCByZWN1cnNlKSB7XG4gICAgICBzdGF0ZS5oYXNSZXN1bHQgJiYgc3RhdGUuby5vbk5leHQoc3RhdGUucmVzdWx0KTtcblxuICAgICAgaWYgKHN0YXRlLmZpcnN0KSB7XG4gICAgICAgIHN0YXRlLmZpcnN0ID0gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5uZXdTdGF0ZSA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX2l0ckZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5uZXdTdGF0ZSA9PT0gZXJyb3JPYmopIHsgcmV0dXJuIHN0YXRlLm8ub25FcnJvcihzdGF0ZS5uZXdTdGF0ZS5lKTsgfVxuICAgICAgfVxuICAgICAgc3RhdGUuaGFzUmVzdWx0ID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fY25kRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgIGlmIChzdGF0ZS5oYXNSZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUuaGFzUmVzdWx0LmUpOyB9XG4gICAgICBpZiAoc3RhdGUuaGFzUmVzdWx0KSB7XG4gICAgICAgIHN0YXRlLnJlc3VsdCA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX3Jlc0ZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5yZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUucmVzdWx0LmUpOyB9XG4gICAgICAgIHZhciB0aW1lID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fdGltZUZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmICh0aW1lID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHRpbWUuZSk7IH1cbiAgICAgICAgcmVjdXJzZShzdGF0ZSwgdGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBzZWxmOiB0aGlzLFxuICAgICAgICBuZXdTdGF0ZTogdGhpcy5fc3RhdGUsXG4gICAgICAgIGZpcnN0OiB0cnVlLFxuICAgICAgICBoYXNSZXN1bHQ6IGZhbHNlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuX3Muc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUoc3RhdGUsIG5ldyBEYXRlKHRoaXMuX3Mubm93KCkpLCBzY2hlZHVsZVJlY3Vyc2l2ZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBHZW5lcmF0ZUFic29sdXRlT2JzZXJ2YWJsZTtcbiAgfShPYnNlcnZhYmxlQmFzZSkpO1xuXG4gIC8qKlxuICAgKiAgR2VuZXJhdGVBYnNvbHV0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSBpdGVyYXRpbmcgYSBzdGF0ZSBmcm9tIGFuIGluaXRpYWwgc3RhdGUgdW50aWwgdGhlIGNvbmRpdGlvbiBmYWlscy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHJlcyA9IHNvdXJjZS5nZW5lcmF0ZVdpdGhBYnNvbHV0ZVRpbWUoMCxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcmV0dXJuIHRydWU7IH0sXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggKyAxOyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiBuZXcgRGF0ZSgpOyB9XG4gICAqICB9KTtcbiAgICpcbiAgICogQHBhcmFtIHtNaXhlZH0gaW5pdGlhbFN0YXRlIEluaXRpYWwgc3RhdGUuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbmRpdGlvbiBDb25kaXRpb24gdG8gdGVybWluYXRlIGdlbmVyYXRpb24gKHVwb24gcmV0dXJuaW5nIGZhbHNlKS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZSBJdGVyYXRpb24gc3RlcCBmdW5jdGlvbi5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gcmVzdWx0U2VsZWN0b3IgU2VsZWN0b3IgZnVuY3Rpb24gZm9yIHJlc3VsdHMgcHJvZHVjZWQgaW4gdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0aW1lU2VsZWN0b3IgVGltZSBzZWxlY3RvciBmdW5jdGlvbiB0byBjb250cm9sIHRoZSBzcGVlZCBvZiB2YWx1ZXMgYmVpbmcgcHJvZHVjZWQgZWFjaCBpdGVyYXRpb24sIHJldHVybmluZyBEYXRlIHZhbHVlcy5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgb24gd2hpY2ggdG8gcnVuIHRoZSBnZW5lcmF0b3IgbG9vcC4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaGUgZ2VuZXJhdGVkIHNlcXVlbmNlLlxuICAgKi9cbiAgT2JzZXJ2YWJsZS5nZW5lcmF0ZVdpdGhBYnNvbHV0ZVRpbWUgPSBmdW5jdGlvbiAoaW5pdGlhbFN0YXRlLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yLCB0aW1lU2VsZWN0b3IsIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgR2VuZXJhdGVBYnNvbHV0ZU9ic2VydmFibGUoaW5pdGlhbFN0YXRlLCBjb25kaXRpb24sIGl0ZXJhdGUsIHJlc3VsdFNlbGVjdG9yLCB0aW1lU2VsZWN0b3IsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIEdlbmVyYXRlUmVsYXRpdmVPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhHZW5lcmF0ZVJlbGF0aXZlT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBHZW5lcmF0ZVJlbGF0aXZlT2JzZXJ2YWJsZShzdGF0ZSwgY25kRm4sIGl0ckZuLCByZXNGbiwgdGltZUZuLCBzKSB7XG4gICAgICB0aGlzLl9zdGF0ZSA9IHN0YXRlO1xuICAgICAgdGhpcy5fY25kRm4gPSBjbmRGbjtcbiAgICAgIHRoaXMuX2l0ckZuID0gaXRyRm47XG4gICAgICB0aGlzLl9yZXNGbiA9IHJlc0ZuO1xuICAgICAgdGhpcy5fdGltZUZuID0gdGltZUZuO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzY2hlZHVsZVJlY3Vyc2l2ZShzdGF0ZSwgcmVjdXJzZSkge1xuICAgICAgc3RhdGUuaGFzUmVzdWx0ICYmIHN0YXRlLm8ub25OZXh0KHN0YXRlLnJlc3VsdCk7XG5cbiAgICAgIGlmIChzdGF0ZS5maXJzdCkge1xuICAgICAgICBzdGF0ZS5maXJzdCA9IGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhdGUubmV3U3RhdGUgPSB0cnlDYXRjaChzdGF0ZS5zZWxmLl9pdHJGbikoc3RhdGUubmV3U3RhdGUpO1xuICAgICAgICBpZiAoc3RhdGUubmV3U3RhdGUgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUubmV3U3RhdGUuZSk7IH1cbiAgICAgIH1cblxuICAgICAgc3RhdGUuaGFzUmVzdWx0ID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fY25kRm4pKHN0YXRlLm5ld1N0YXRlKTtcbiAgICAgIGlmIChzdGF0ZS5oYXNSZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUuaGFzUmVzdWx0LmUpOyB9XG4gICAgICBpZiAoc3RhdGUuaGFzUmVzdWx0KSB7XG4gICAgICAgIHN0YXRlLnJlc3VsdCA9IHRyeUNhdGNoKHN0YXRlLnNlbGYuX3Jlc0ZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5yZXN1bHQgPT09IGVycm9yT2JqKSB7IHJldHVybiBzdGF0ZS5vLm9uRXJyb3Ioc3RhdGUucmVzdWx0LmUpOyB9XG4gICAgICAgIHZhciB0aW1lID0gdHJ5Q2F0Y2goc3RhdGUuc2VsZi5fdGltZUZuKShzdGF0ZS5uZXdTdGF0ZSk7XG4gICAgICAgIGlmICh0aW1lID09PSBlcnJvck9iaikgeyByZXR1cm4gc3RhdGUuby5vbkVycm9yKHRpbWUuZSk7IH1cbiAgICAgICAgcmVjdXJzZShzdGF0ZSwgdGltZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5vLm9uQ29tcGxldGVkKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgR2VuZXJhdGVSZWxhdGl2ZU9ic2VydmFibGUucHJvdG90eXBlLnN1YnNjcmliZUNvcmUgPSBmdW5jdGlvbiAobykge1xuICAgICAgdmFyIHN0YXRlID0ge1xuICAgICAgICBvOiBvLFxuICAgICAgICBzZWxmOiB0aGlzLFxuICAgICAgICBuZXdTdGF0ZTogdGhpcy5fc3RhdGUsXG4gICAgICAgIGZpcnN0OiB0cnVlLFxuICAgICAgICBoYXNSZXN1bHQ6IGZhbHNlXG4gICAgICB9O1xuICAgICAgcmV0dXJuIHRoaXMuX3Muc2NoZWR1bGVSZWN1cnNpdmVGdXR1cmUoc3RhdGUsIDAsIHNjaGVkdWxlUmVjdXJzaXZlKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEdlbmVyYXRlUmVsYXRpdmVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBHZW5lcmF0ZXMgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSBpdGVyYXRpbmcgYSBzdGF0ZSBmcm9tIGFuIGluaXRpYWwgc3RhdGUgdW50aWwgdGhlIGNvbmRpdGlvbiBmYWlscy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIHJlcyA9IHNvdXJjZS5nZW5lcmF0ZVdpdGhSZWxhdGl2ZVRpbWUoMCxcbiAgICogICAgICBmdW5jdGlvbiAoeCkgeyByZXR1cm4gcmV0dXJuIHRydWU7IH0sXG4gICAqICAgICAgZnVuY3Rpb24gKHgpIHsgcmV0dXJuIHggKyAxOyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4OyB9LFxuICAgKiAgICAgIGZ1bmN0aW9uICh4KSB7IHJldHVybiA1MDA7IH1cbiAgICogICk7XG4gICAqXG4gICAqIEBwYXJhbSB7TWl4ZWR9IGluaXRpYWxTdGF0ZSBJbml0aWFsIHN0YXRlLlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25kaXRpb24gQ29uZGl0aW9uIHRvIHRlcm1pbmF0ZSBnZW5lcmF0aW9uICh1cG9uIHJldHVybmluZyBmYWxzZSkuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGUgSXRlcmF0aW9uIHN0ZXAgZnVuY3Rpb24uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IHJlc3VsdFNlbGVjdG9yIFNlbGVjdG9yIGZ1bmN0aW9uIGZvciByZXN1bHRzIHByb2R1Y2VkIGluIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gdGltZVNlbGVjdG9yIFRpbWUgc2VsZWN0b3IgZnVuY3Rpb24gdG8gY29udHJvbCB0aGUgc3BlZWQgb2YgdmFsdWVzIGJlaW5nIHByb2R1Y2VkIGVhY2ggaXRlcmF0aW9uLCByZXR1cm5pbmcgaW50ZWdlciB2YWx1ZXMgZGVub3RpbmcgbWlsbGlzZWNvbmRzLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciBvbiB3aGljaCB0byBydW4gdGhlIGdlbmVyYXRvciBsb29wLiBJZiBub3Qgc3BlY2lmaWVkLCB0aGUgdGltZW91dCBzY2hlZHVsZXIgaXMgdXNlZC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IFRoZSBnZW5lcmF0ZWQgc2VxdWVuY2UuXG4gICAqL1xuICBPYnNlcnZhYmxlLmdlbmVyYXRlV2l0aFJlbGF0aXZlVGltZSA9IGZ1bmN0aW9uIChpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHRpbWVTZWxlY3Rvciwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBHZW5lcmF0ZVJlbGF0aXZlT2JzZXJ2YWJsZShpbml0aWFsU3RhdGUsIGNvbmRpdGlvbiwgaXRlcmF0ZSwgcmVzdWx0U2VsZWN0b3IsIHRpbWVTZWxlY3Rvciwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgRGVsYXlTdWJzY3JpcHRpb24gPSAoZnVuY3Rpb24oX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoRGVsYXlTdWJzY3JpcHRpb24sIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gRGVsYXlTdWJzY3JpcHRpb24oc291cmNlLCBkdCwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kdCA9IGR0O1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBEZWxheVN1YnNjcmlwdGlvbi5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgZCA9IG5ldyBTZXJpYWxEaXNwb3NhYmxlKCk7XG5cbiAgICAgIGQuc2V0RGlzcG9zYWJsZSh0aGlzLl9zLnNjaGVkdWxlRnV0dXJlKFt0aGlzLnNvdXJjZSwgbywgZF0sIHRoaXMuX2R0LCBzY2hlZHVsZU1ldGhvZCkpO1xuXG4gICAgICByZXR1cm4gZDtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgc3RhdGUpIHtcbiAgICAgIHZhciBzb3VyY2UgPSBzdGF0ZVswXSwgbyA9IHN0YXRlWzFdLCBkID0gc3RhdGVbMl07XG4gICAgICBkLnNldERpc3Bvc2FibGUoc291cmNlLnN1YnNjcmliZShvKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIERlbGF5U3Vic2NyaXB0aW9uO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgLyoqXG4gICAqICBUaW1lIHNoaWZ0cyB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZSBieSBkZWxheWluZyB0aGUgc3Vic2NyaXB0aW9uIHdpdGggdGhlIHNwZWNpZmllZCByZWxhdGl2ZSB0aW1lIGR1cmF0aW9uLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiAgMSAtIHJlcyA9IHNvdXJjZS5kZWxheVN1YnNjcmlwdGlvbig1MDAwKTsgLy8gNXNcbiAgICogIDIgLSByZXMgPSBzb3VyY2UuZGVsYXlTdWJzY3JpcHRpb24oNTAwMCwgUnguU2NoZWR1bGVyLmRlZmF1bHQpOyAvLyA1IHNlY29uZHNcbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgUmVsYXRpdmUgb3IgYWJzb2x1dGUgdGltZSBzaGlmdCBvZiB0aGUgc3Vic2NyaXB0aW9uLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIHN1YnNjcmlwdGlvbiBkZWxheSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgdGhlIHRpbWVvdXQgc2NoZWR1bGVyIGlzIHVzZWQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBUaW1lLXNoaWZ0ZWQgc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uZGVsYXlTdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoZHVlVGltZSwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBEZWxheVN1YnNjcmlwdGlvbih0aGlzLCBkdWVUaW1lLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGUoc291cmNlLCBkLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIobywgdGhpcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcExhc3RXaXRoVGltZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2tpcExhc3RXaXRoVGltZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9zID0gcC5fcztcbiAgICAgIHRoaXMuX2QgPSBwLl9kO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgU2tpcExhc3RXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBub3cgPSB0aGlzLl9zLm5vdygpO1xuICAgICAgdGhpcy5fcS5wdXNoKHsgaW50ZXJ2YWw6IG5vdywgdmFsdWU6IHggfSk7XG4gICAgICB3aGlsZSAodGhpcy5fcS5sZW5ndGggPiAwICYmIG5vdyAtIHRoaXMuX3FbMF0uaW50ZXJ2YWwgPj0gdGhpcy5fZCkge1xuICAgICAgICB0aGlzLl9vLm9uTmV4dCh0aGlzLl9xLnNoaWZ0KCkudmFsdWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgU2tpcExhc3RXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTa2lwTGFzdFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBub3cgPSB0aGlzLl9zLm5vdygpO1xuICAgICAgd2hpbGUgKHRoaXMuX3EubGVuZ3RoID4gMCAmJiBub3cgLSB0aGlzLl9xWzBdLmludGVydmFsID49IHRoaXMuX2QpIHtcbiAgICAgICAgdGhpcy5fby5vbk5leHQodGhpcy5fcS5zaGlmdCgpLnZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuX28ub25Db21wbGV0ZWQoKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBMYXN0V2l0aFRpbWVPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgLyoqXG4gICAqICBTa2lwcyBlbGVtZW50cyBmb3IgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIG9ic2VydmFibGUgc291cmNlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICogIFRoaXMgb3BlcmF0b3IgYWNjdW11bGF0ZXMgYSBxdWV1ZSB3aXRoIGEgbGVuZ3RoIGVub3VnaCB0byBzdG9yZSBlbGVtZW50cyByZWNlaXZlZCBkdXJpbmcgdGhlIGluaXRpYWwgZHVyYXRpb24gd2luZG93LlxuICAgKiAgQXMgbW9yZSBlbGVtZW50cyBhcmUgcmVjZWl2ZWQsIGVsZW1lbnRzIG9sZGVyIHRoYW4gdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBhcmUgdGFrZW4gZnJvbSB0aGUgcXVldWUgYW5kIHByb2R1Y2VkIG9uIHRoZVxuICAgKiAgcmVzdWx0IHNlcXVlbmNlLiBUaGlzIGNhdXNlcyBlbGVtZW50cyB0byBiZSBkZWxheWVkIHdpdGggZHVyYXRpb24uXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkdXJhdGlvbiBEdXJhdGlvbiBmb3Igc2tpcHBpbmcgZWxlbWVudHMgZnJvbSB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdICBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi4gSWYgbm90IHNwZWNpZmllZCwgZGVmYXVsdHMgdG8gUnguU2NoZWR1bGVyLnRpbWVvdXRcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgc2tpcHBlZCBkdXJpbmcgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by5za2lwTGFzdFdpdGhUaW1lID0gZnVuY3Rpb24gKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFNraXBMYXN0V2l0aFRpbWVPYnNlcnZhYmxlKHRoaXMsIGR1cmF0aW9uLCBzY2hlZHVsZXIpO1xuICB9O1xuXG4gIHZhciBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGUoc291cmNlLCBkLCBzKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX2QgPSBkO1xuICAgICAgdGhpcy5fcyA9IHM7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gdGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIobywgdGhpcy5fZCwgdGhpcy5fcykpO1xuICAgIH07XG5cbiAgICByZXR1cm4gVGFrZUxhc3RXaXRoVGltZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIobywgZCwgcykge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fcSA9IFtdO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVGFrZUxhc3RXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHtcbiAgICAgIHZhciBub3cgPSB0aGlzLl9zLm5vdygpO1xuICAgICAgdGhpcy5fcS5wdXNoKHsgaW50ZXJ2YWw6IG5vdywgdmFsdWU6IHggfSk7XG4gICAgICB3aGlsZSAodGhpcy5fcS5sZW5ndGggPiAwICYmIG5vdyAtIHRoaXMuX3FbMF0uaW50ZXJ2YWwgPj0gdGhpcy5fZCkge1xuICAgICAgICB0aGlzLl9xLnNoaWZ0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuICAgIFRha2VMYXN0V2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG5vdyA9IHRoaXMuX3Mubm93KCk7XG4gICAgICB3aGlsZSAodGhpcy5fcS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBuZXh0ID0gdGhpcy5fcS5zaGlmdCgpO1xuICAgICAgICBpZiAobm93IC0gbmV4dC5pbnRlcnZhbCA8PSB0aGlzLl9kKSB7IHRoaXMuX28ub25OZXh0KG5leHQudmFsdWUpOyB9XG4gICAgICB9XG4gICAgICB0aGlzLl9vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2ZXI7XG4gIH0oQWJzdHJhY3RPYnNlcnZlcikpO1xuXG4gIC8qKlxuICAgKiAgUmV0dXJucyBlbGVtZW50cyB3aXRoaW4gdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIG9ic2VydmFibGUgc291cmNlIHNlcXVlbmNlLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlcnMgdG8gcnVuIHRpbWVycyBhbmQgdG8gZHJhaW4gdGhlIGNvbGxlY3RlZCBlbGVtZW50cy5cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBUaGlzIG9wZXJhdG9yIGFjY3VtdWxhdGVzIGEgcXVldWUgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgZWxlbWVudHMgcmVjZWl2ZWQgZHVyaW5nIHRoZSBpbml0aWFsIGR1cmF0aW9uIHdpbmRvdy5cbiAgICogIEFzIG1vcmUgZWxlbWVudHMgYXJlIHJlY2VpdmVkLCBlbGVtZW50cyBvbGRlciB0aGFuIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gYXJlIHRha2VuIGZyb20gdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGVcbiAgICogIHJlc3VsdCBzZXF1ZW5jZS4gVGhpcyBjYXVzZXMgZWxlbWVudHMgdG8gYmUgZGVsYXllZCB3aXRoIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gRHVyYXRpb24gZm9yIHRha2luZyBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgdGFrZW4gZHVyaW5nIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8udGFrZUxhc3RXaXRoVGltZSA9IGZ1bmN0aW9uIChkdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgcmV0dXJuIG5ldyBUYWtlTGFzdFdpdGhUaW1lT2JzZXJ2YWJsZSh0aGlzLCBkdXJhdGlvbiwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICAvKipcbiAgICogIFJldHVybnMgYW4gYXJyYXkgd2l0aCB0aGUgZWxlbWVudHMgd2l0aGluIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBvYnNlcnZhYmxlIHNvdXJjZSBzZXF1ZW5jZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBUaGlzIG9wZXJhdG9yIGFjY3VtdWxhdGVzIGEgcXVldWUgd2l0aCBhIGxlbmd0aCBlbm91Z2ggdG8gc3RvcmUgZWxlbWVudHMgcmVjZWl2ZWQgZHVyaW5nIHRoZSBpbml0aWFsIGR1cmF0aW9uIHdpbmRvdy5cbiAgICogIEFzIG1vcmUgZWxlbWVudHMgYXJlIHJlY2VpdmVkLCBlbGVtZW50cyBvbGRlciB0aGFuIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gYXJlIHRha2VuIGZyb20gdGhlIHF1ZXVlIGFuZCBwcm9kdWNlZCBvbiB0aGVcbiAgICogIHJlc3VsdCBzZXF1ZW5jZS4gVGhpcyBjYXVzZXMgZWxlbWVudHMgdG8gYmUgZGVsYXllZCB3aXRoIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb24gRHVyYXRpb24gZm9yIHRha2luZyBlbGVtZW50cyBmcm9tIHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyBhIHNpbmdsZSBhcnJheSB3aXRoIHRoZSBlbGVtZW50cyB0YWtlbiBkdXJpbmcgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiBmcm9tIHRoZSBlbmQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlTGFzdEJ1ZmZlcldpdGhUaW1lID0gZnVuY3Rpb24gKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBxID0gW107XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShmdW5jdGlvbiAoeCkge1xuICAgICAgICB2YXIgbm93ID0gc2NoZWR1bGVyLm5vdygpO1xuICAgICAgICBxLnB1c2goeyBpbnRlcnZhbDogbm93LCB2YWx1ZTogeCB9KTtcbiAgICAgICAgd2hpbGUgKHEubGVuZ3RoID4gMCAmJiBub3cgLSBxWzBdLmludGVydmFsID49IGR1cmF0aW9uKSB7XG4gICAgICAgICAgcS5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgICB9LCBmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vdyA9IHNjaGVkdWxlci5ub3coKSwgcmVzID0gW107XG4gICAgICAgIHdoaWxlIChxLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB2YXIgbmV4dCA9IHEuc2hpZnQoKTtcbiAgICAgICAgICBub3cgLSBuZXh0LmludGVydmFsIDw9IGR1cmF0aW9uICYmIHJlcy5wdXNoKG5leHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIG8ub25OZXh0KHJlcyk7XG4gICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgIH0pO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgdmFyIFRha2VXaXRoVGltZU9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRha2VXaXRoVGltZU9ic2VydmFibGUsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gVGFrZVdpdGhUaW1lT2JzZXJ2YWJsZShzb3VyY2UsIGQsIHMpIHtcbiAgICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgICAgdGhpcy5fZCA9IGQ7XG4gICAgICB0aGlzLl9zID0gcztcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIG8pIHtcbiAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICB9XG5cbiAgICBUYWtlV2l0aFRpbWVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5fcy5zY2hlZHVsZUZ1dHVyZShvLCB0aGlzLl9kLCBzY2hlZHVsZU1ldGhvZCksXG4gICAgICAgIHRoaXMuc291cmNlLnN1YnNjcmliZShvKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRha2VXaXRoVGltZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICAvKipcbiAgICogIFRha2VzIGVsZW1lbnRzIGZvciB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBvYnNlcnZhYmxlIHNvdXJjZSBzZXF1ZW5jZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICpcbiAgICogQGV4YW1wbGVcbiAgICogIDEgLSByZXMgPSBzb3VyY2UudGFrZVdpdGhUaW1lKDUwMDAsICBbb3B0aW9uYWwgc2NoZWR1bGVyXSk7XG4gICAqIEBkZXNjcmlwdGlvblxuICAgKiAgVGhpcyBvcGVyYXRvciBhY2N1bXVsYXRlcyBhIHF1ZXVlIHdpdGggYSBsZW5ndGggZW5vdWdoIHRvIHN0b3JlIGVsZW1lbnRzIHJlY2VpdmVkIGR1cmluZyB0aGUgaW5pdGlhbCBkdXJhdGlvbiB3aW5kb3cuXG4gICAqICBBcyBtb3JlIGVsZW1lbnRzIGFyZSByZWNlaXZlZCwgZWxlbWVudHMgb2xkZXIgdGhhbiB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGFyZSB0YWtlbiBmcm9tIHRoZSBxdWV1ZSBhbmQgcHJvZHVjZWQgb24gdGhlXG4gICAqICByZXN1bHQgc2VxdWVuY2UuIFRoaXMgY2F1c2VzIGVsZW1lbnRzIHRvIGJlIGRlbGF5ZWQgd2l0aCBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uIGZvciB0YWtpbmcgZWxlbWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIHNlcXVlbmNlLlxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gc2NoZWR1bGVyIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgdGFrZW4gZHVyaW5nIHRoZSBzcGVjaWZpZWQgZHVyYXRpb24gZnJvbSB0aGUgc3RhcnQgb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlV2l0aFRpbWUgPSBmdW5jdGlvbiAoZHVyYXRpb24sIHNjaGVkdWxlcikge1xuICAgIGlzU2NoZWR1bGVyKHNjaGVkdWxlcikgfHwgKHNjaGVkdWxlciA9IGRlZmF1bHRTY2hlZHVsZXIpO1xuICAgIHJldHVybiBuZXcgVGFrZVdpdGhUaW1lT2JzZXJ2YWJsZSh0aGlzLCBkdXJhdGlvbiwgc2NoZWR1bGVyKTtcbiAgfTtcblxuICB2YXIgU2tpcFdpdGhUaW1lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFdpdGhUaW1lT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTa2lwV2l0aFRpbWVPYnNlcnZhYmxlKHNvdXJjZSwgZCwgcykge1xuICAgICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgICB0aGlzLl9kID0gZDtcbiAgICAgIHRoaXMuX3MgPSBzO1xuICAgICAgdGhpcy5fb3BlbiA9IGZhbHNlO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2NoZWR1bGVNZXRob2Qocywgc2VsZikge1xuICAgICAgc2VsZi5fb3BlbiA9IHRydWU7XG4gICAgfVxuXG4gICAgU2tpcFdpdGhUaW1lT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUoXG4gICAgICAgIHRoaXMuX3Muc2NoZWR1bGVGdXR1cmUodGhpcywgdGhpcy5fZCwgc2NoZWR1bGVNZXRob2QpLFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBXaXRoVGltZU9ic2VydmVyKG8sIHRoaXMpKVxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFNraXBXaXRoVGltZU9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU2tpcFdpdGhUaW1lT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBXaXRoVGltZU9ic2VydmVyLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gU2tpcFdpdGhUaW1lT2JzZXJ2ZXIobywgcCkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl9wID0gcDtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFNraXBXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fcC5fb3BlbiAmJiB0aGlzLl9vLm9uTmV4dCh4KTsgfTtcbiAgICBTa2lwV2l0aFRpbWVPYnNlcnZlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZSkgeyB0aGlzLl9vLm9uRXJyb3IoZSk7IH07XG4gICAgU2tpcFdpdGhUaW1lT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgdGhpcy5fby5vbkNvbXBsZXRlZCgpOyB9O1xuXG4gICAgcmV0dXJuIFNraXBXaXRoVGltZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogIFNraXBzIGVsZW1lbnRzIGZvciB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBvYnNlcnZhYmxlIHNvdXJjZSBzZXF1ZW5jZSwgdXNpbmcgdGhlIHNwZWNpZmllZCBzY2hlZHVsZXIgdG8gcnVuIHRpbWVycy5cbiAgICogQGRlc2NyaXB0aW9uXG4gICAqICBTcGVjaWZ5aW5nIGEgemVybyB2YWx1ZSBmb3IgZHVyYXRpb24gZG9lc24ndCBndWFyYW50ZWUgbm8gZWxlbWVudHMgd2lsbCBiZSBkcm9wcGVkIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqICBUaGlzIGlzIGEgc2lkZS1lZmZlY3Qgb2YgdGhlIGFzeW5jaHJvbnkgaW50cm9kdWNlZCBieSB0aGUgc2NoZWR1bGVyLCB3aGVyZSB0aGUgYWN0aW9uIHRoYXQgY2F1c2VzIGNhbGxiYWNrcyBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UgdG8gYmUgZm9yd2FyZGVkXG4gICAqICBtYXkgbm90IGV4ZWN1dGUgaW1tZWRpYXRlbHksIGRlc3BpdGUgdGhlIHplcm8gZHVlIHRpbWUuXG4gICAqXG4gICAqICBFcnJvcnMgcHJvZHVjZWQgYnkgdGhlIHNvdXJjZSBzZXF1ZW5jZSBhcmUgYWx3YXlzIGZvcndhcmRlZCB0byB0aGUgcmVzdWx0IHNlcXVlbmNlLCBldmVuIGlmIHRoZSBlcnJvciBvY2N1cnMgYmVmb3JlIHRoZSBkdXJhdGlvbi5cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uIER1cmF0aW9uIGZvciBza2lwcGluZyBlbGVtZW50cyBmcm9tIHRoZSBzdGFydCBvZiB0aGUgc2VxdWVuY2UuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBzY2hlZHVsZXIgU2NoZWR1bGVyIHRvIHJ1biB0aGUgdGltZXIgb24uIElmIG5vdCBzcGVjaWZpZWQsIGRlZmF1bHRzIHRvIFJ4LlNjaGVkdWxlci50aW1lb3V0LlxuICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZX0gQW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZSB3aXRoIHRoZSBlbGVtZW50cyBza2lwcGVkIGR1cmluZyB0aGUgc3BlY2lmaWVkIGR1cmF0aW9uIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBzb3VyY2Ugc2VxdWVuY2UuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcFdpdGhUaW1lID0gZnVuY3Rpb24gKGR1cmF0aW9uLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFNraXBXaXRoVGltZU9ic2VydmFibGUodGhpcywgZHVyYXRpb24sIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgdmFyIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2YWJsZShzb3VyY2UsIHN0YXJ0VGltZSwgc2NoZWR1bGVyKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRoaXMuX3N0ID0gc3RhcnRUaW1lO1xuICAgICAgdGhpcy5fcyA9IHNjaGVkdWxlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNjaGVkdWxlTWV0aG9kKHMsIHN0YXRlKSB7XG4gICAgICBzdGF0ZS5fb3BlbiA9IHRydWU7XG4gICAgfVxuXG4gICAgU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZhYmxlLnByb3RvdHlwZS5zdWJzY3JpYmVDb3JlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHRoaXMuX29wZW4gPSBmYWxzZTtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgdGhpcy5fcy5zY2hlZHVsZUZ1dHVyZSh0aGlzLCB0aGlzLl9zdCwgc2NoZWR1bGVNZXRob2QpLFxuICAgICAgICB0aGlzLnNvdXJjZS5zdWJzY3JpYmUobmV3IFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIobywgdGhpcykpXG4gICAgICApO1xuICAgIH07XG5cbiAgICByZXR1cm4gU2tpcFVudGlsV2l0aFRpbWVPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyKG8sIHApIHtcbiAgICAgIHRoaXMuX28gPSBvO1xuICAgICAgdGhpcy5fcCA9IHA7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fcC5fb3BlbiAmJiB0aGlzLl9vLm9uTmV4dCh4KTsgfTtcbiAgICBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX28ub25FcnJvcihlKTsgfTtcbiAgICBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyLnByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7IHRoaXMuX28ub25Db21wbGV0ZWQoKTsgfTtcblxuICAgIHJldHVybiBTa2lwVW50aWxXaXRoVGltZU9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuXG4gIC8qKlxuICAgKiAgU2tpcHMgZWxlbWVudHMgZnJvbSB0aGUgb2JzZXJ2YWJsZSBzb3VyY2Ugc2VxdWVuY2UgdW50aWwgdGhlIHNwZWNpZmllZCBzdGFydCB0aW1lLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKiAgRXJyb3JzIHByb2R1Y2VkIGJ5IHRoZSBzb3VyY2Ugc2VxdWVuY2UgYXJlIGFsd2F5cyBmb3J3YXJkZWQgdG8gdGhlIHJlc3VsdCBzZXF1ZW5jZSwgZXZlbiBpZiB0aGUgZXJyb3Igb2NjdXJzIGJlZm9yZSB0aGUgc3RhcnQgdGltZS5cbiAgICpcbiAgICogQGV4YW1wbGVzXG4gICAqICAxIC0gcmVzID0gc291cmNlLnNraXBVbnRpbFdpdGhUaW1lKG5ldyBEYXRlKCksIFtzY2hlZHVsZXJdKTtcbiAgICogIDIgLSByZXMgPSBzb3VyY2Uuc2tpcFVudGlsV2l0aFRpbWUoNTAwMCwgW3NjaGVkdWxlcl0pO1xuICAgKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBzdGFydFRpbWUgVGltZSB0byBzdGFydCB0YWtpbmcgZWxlbWVudHMgZnJvbSB0aGUgc291cmNlIHNlcXVlbmNlLiBJZiB0aGlzIHZhbHVlIGlzIGxlc3MgdGhhbiBvciBlcXVhbCB0byBEYXRlKCksIG5vIGVsZW1lbnRzIHdpbGwgYmUgc2tpcHBlZC5cbiAgICogQHBhcmFtIHtTY2hlZHVsZXJ9IFtzY2hlZHVsZXJdIFNjaGVkdWxlciB0byBydW4gdGhlIHRpbWVyIG9uLiBJZiBub3Qgc3BlY2lmaWVkLCBkZWZhdWx0cyB0byBSeC5TY2hlZHVsZXIudGltZW91dC5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgc2tpcHBlZCB1bnRpbCB0aGUgc3BlY2lmaWVkIHN0YXJ0IHRpbWUuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc2tpcFVudGlsV2l0aFRpbWUgPSBmdW5jdGlvbiAoc3RhcnRUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICByZXR1cm4gbmV3IFNraXBVbnRpbFdpdGhUaW1lT2JzZXJ2YWJsZSh0aGlzLCBzdGFydFRpbWUsIHNjaGVkdWxlcik7XG4gIH07XG5cbiAgLyoqXG4gICAqICBUYWtlcyBlbGVtZW50cyBmb3IgdGhlIHNwZWNpZmllZCBkdXJhdGlvbiB1bnRpbCB0aGUgc3BlY2lmaWVkIGVuZCB0aW1lLCB1c2luZyB0aGUgc3BlY2lmaWVkIHNjaGVkdWxlciB0byBydW4gdGltZXJzLlxuICAgKiBAcGFyYW0ge051bWJlciB8IERhdGV9IGVuZFRpbWUgVGltZSB0byBzdG9wIHRha2luZyBlbGVtZW50cyBmcm9tIHRoZSBzb3VyY2Ugc2VxdWVuY2UuIElmIHRoaXMgdmFsdWUgaXMgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIG5ldyBEYXRlKCksIHRoZSByZXN1bHQgc3RyZWFtIHdpbGwgY29tcGxldGUgaW1tZWRpYXRlbHkuXG4gICAqIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdG8gcnVuIHRoZSB0aW1lciBvbi5cbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIG9ic2VydmFibGUgc2VxdWVuY2Ugd2l0aCB0aGUgZWxlbWVudHMgdGFrZW4gdW50aWwgdGhlIHNwZWNpZmllZCBlbmQgdGltZS5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50YWtlVW50aWxXaXRoVGltZSA9IGZ1bmN0aW9uIChlbmRUaW1lLCBzY2hlZHVsZXIpIHtcbiAgICBpc1NjaGVkdWxlcihzY2hlZHVsZXIpIHx8IChzY2hlZHVsZXIgPSBkZWZhdWx0U2NoZWR1bGVyKTtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiBuZXcgQmluYXJ5RGlzcG9zYWJsZShcbiAgICAgICAgc2NoZWR1bGVyLnNjaGVkdWxlRnV0dXJlKG8sIGVuZFRpbWUsIGZ1bmN0aW9uIChfLCBvKSB7IG8ub25Db21wbGV0ZWQoKTsgfSksXG4gICAgICAgIHNvdXJjZS5zdWJzY3JpYmUobykpO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gT2JzZXJ2YWJsZSB0aGF0IGVtaXRzIG9ubHkgdGhlIGZpcnN0IGl0ZW0gZW1pdHRlZCBieSB0aGUgc291cmNlIE9ic2VydmFibGUgZHVyaW5nIHNlcXVlbnRpYWwgdGltZSB3aW5kb3dzIG9mIGEgc3BlY2lmaWVkIGR1cmF0aW9uLlxuICAgKiBAcGFyYW0ge051bWJlcn0gd2luZG93RHVyYXRpb24gdGltZSB0byB3YWl0IGJlZm9yZSBlbWl0dGluZyBhbm90aGVyIGl0ZW0gYWZ0ZXIgZW1pdHRpbmcgdGhlIGxhc3QgaXRlbVxuICAgKiBAcGFyYW0ge1NjaGVkdWxlcn0gW3NjaGVkdWxlcl0gdGhlIFNjaGVkdWxlciB0byB1c2UgaW50ZXJuYWxseSB0byBtYW5hZ2UgdGhlIHRpbWVycyB0aGF0IGhhbmRsZSB0aW1lb3V0IGZvciBlYWNoIGl0ZW0uIElmIG5vdCBwcm92aWRlZCwgZGVmYXVsdHMgdG8gU2NoZWR1bGVyLnRpbWVvdXQuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBbiBPYnNlcnZhYmxlIHRoYXQgcGVyZm9ybXMgdGhlIHRocm90dGxlIG9wZXJhdGlvbi5cbiAgICovXG4gIG9ic2VydmFibGVQcm90by50aHJvdHRsZSA9IGZ1bmN0aW9uICh3aW5kb3dEdXJhdGlvbiwgc2NoZWR1bGVyKSB7XG4gICAgaXNTY2hlZHVsZXIoc2NoZWR1bGVyKSB8fCAoc2NoZWR1bGVyID0gZGVmYXVsdFNjaGVkdWxlcik7XG4gICAgdmFyIGR1cmF0aW9uID0gK3dpbmRvd0R1cmF0aW9uIHx8IDA7XG4gICAgaWYgKGR1cmF0aW9uIDw9IDApIHsgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3dpbmRvd0R1cmF0aW9uIGNhbm5vdCBiZSBsZXNzIG9yIGVxdWFsIHplcm8uJyk7IH1cbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBsYXN0T25OZXh0ID0gMDtcbiAgICAgIHJldHVybiBzb3VyY2Uuc3Vic2NyaWJlKFxuICAgICAgICBmdW5jdGlvbiAoeCkge1xuICAgICAgICAgIHZhciBub3cgPSBzY2hlZHVsZXIubm93KCk7XG4gICAgICAgICAgaWYgKGxhc3RPbk5leHQgPT09IDAgfHwgbm93IC0gbGFzdE9uTmV4dCA+PSBkdXJhdGlvbikge1xuICAgICAgICAgICAgbGFzdE9uTmV4dCA9IG5vdztcbiAgICAgICAgICAgIG8ub25OZXh0KHgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxmdW5jdGlvbiAoZSkgeyBvLm9uRXJyb3IoZSk7IH0sIGZ1bmN0aW9uICgpIHsgby5vbkNvbXBsZXRlZCgpOyB9XG4gICAgICApO1xuICAgIH0sIHNvdXJjZSk7XG4gIH07XG5cbiAgdmFyIFRyYW5zZHVjZU9ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhUcmFuc2R1Y2VPYnNlcnZlciwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBUcmFuc2R1Y2VPYnNlcnZlcihvLCB4Zm9ybSkge1xuICAgICAgdGhpcy5fbyA9IG87XG4gICAgICB0aGlzLl94Zm9ybSA9IHhmb3JtO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgdmFyIHJlcyA9IHRyeUNhdGNoKHRoaXMuX3hmb3JtWydAQHRyYW5zZHVjZXIvc3RlcCddKS5jYWxsKHRoaXMuX3hmb3JtLCB0aGlzLl9vLCB4KTtcbiAgICAgIGlmIChyZXMgPT09IGVycm9yT2JqKSB7IHRoaXMuX28ub25FcnJvcihyZXMuZSk7IH1cbiAgICB9O1xuXG4gICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmVycm9yID0gZnVuY3Rpb24gKGUpIHsgdGhpcy5fby5vbkVycm9yKGUpOyB9O1xuXG4gICAgVHJhbnNkdWNlT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3hmb3JtWydAQHRyYW5zZHVjZXIvcmVzdWx0J10odGhpcy5fbyk7XG4gICAgfTtcblxuICAgIHJldHVybiBUcmFuc2R1Y2VPYnNlcnZlcjtcbiAgfShBYnN0cmFjdE9ic2VydmVyKSk7XG5cbiAgZnVuY3Rpb24gdHJhbnNmb3JtRm9yT2JzZXJ2ZXIobykge1xuICAgIHJldHVybiB7XG4gICAgICAnQEB0cmFuc2R1Y2VyL2luaXQnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG87XG4gICAgICB9LFxuICAgICAgJ0BAdHJhbnNkdWNlci9zdGVwJzogZnVuY3Rpb24ob2JzLCBpbnB1dCkge1xuICAgICAgICByZXR1cm4gb2JzLm9uTmV4dChpbnB1dCk7XG4gICAgICB9LFxuICAgICAgJ0BAdHJhbnNkdWNlci9yZXN1bHQnOiBmdW5jdGlvbihvYnMpIHtcbiAgICAgICAgcmV0dXJuIG9icy5vbkNvbXBsZXRlZCgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXhlY3V0ZXMgYSB0cmFuc2R1Y2VyIHRvIHRyYW5zZm9ybSB0aGUgb2JzZXJ2YWJsZSBzZXF1ZW5jZVxuICAgKiBAcGFyYW0ge1RyYW5zZHVjZXJ9IHRyYW5zZHVjZXIgQSB0cmFuc2R1Y2VyIHRvIGV4ZWN1dGVcbiAgICogQHJldHVybnMge09ic2VydmFibGV9IEFuIE9ic2VydmFibGUgc2VxdWVuY2UgY29udGFpbmluZyB0aGUgcmVzdWx0cyBmcm9tIHRoZSB0cmFuc2R1Y2VyLlxuICAgKi9cbiAgb2JzZXJ2YWJsZVByb3RvLnRyYW5zZHVjZSA9IGZ1bmN0aW9uKHRyYW5zZHVjZXIpIHtcbiAgICB2YXIgc291cmNlID0gdGhpcztcbiAgICByZXR1cm4gbmV3IEFub255bW91c09ic2VydmFibGUoZnVuY3Rpb24obykge1xuICAgICAgdmFyIHhmb3JtID0gdHJhbnNkdWNlcih0cmFuc2Zvcm1Gb3JPYnNlcnZlcihvKSk7XG4gICAgICByZXR1cm4gc291cmNlLnN1YnNjcmliZShuZXcgVHJhbnNkdWNlT2JzZXJ2ZXIobywgeGZvcm0pKTtcbiAgICB9LCBzb3VyY2UpO1xuICB9O1xuXG4gIHZhciBTd2l0Y2hGaXJzdE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN3aXRjaEZpcnN0T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBTd2l0Y2hGaXJzdE9ic2VydmFibGUoc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN3aXRjaEZpcnN0T2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICB2YXIgbSA9IG5ldyBTaW5nbGVBc3NpZ25tZW50RGlzcG9zYWJsZSgpLFxuICAgICAgICBnID0gbmV3IENvbXBvc2l0ZURpc3Bvc2FibGUoKSxcbiAgICAgICAgc3RhdGUgPSB7XG4gICAgICAgICAgaGFzQ3VycmVudDogZmFsc2UsXG4gICAgICAgICAgaXNTdG9wcGVkOiBmYWxzZSxcbiAgICAgICAgICBvOiBvLFxuICAgICAgICAgIGc6IGdcbiAgICAgICAgfTtcblxuICAgICAgZy5hZGQobSk7XG4gICAgICBtLnNldERpc3Bvc2FibGUodGhpcy5zb3VyY2Uuc3Vic2NyaWJlKG5ldyBTd2l0Y2hGaXJzdE9ic2VydmVyKHN0YXRlKSkpO1xuICAgICAgcmV0dXJuIGc7XG4gICAgfTtcblxuICAgIHJldHVybiBTd2l0Y2hGaXJzdE9ic2VydmFibGU7XG4gIH0oT2JzZXJ2YWJsZUJhc2UpKTtcblxuICB2YXIgU3dpdGNoRmlyc3RPYnNlcnZlciA9IChmdW5jdGlvbihfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhTd2l0Y2hGaXJzdE9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFN3aXRjaEZpcnN0T2JzZXJ2ZXIoc3RhdGUpIHtcbiAgICAgIHRoaXMuX3MgPSBzdGF0ZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIFN3aXRjaEZpcnN0T2JzZXJ2ZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgaWYgKCF0aGlzLl9zLmhhc0N1cnJlbnQpIHtcbiAgICAgICAgdGhpcy5fcy5oYXNDdXJyZW50ID0gdHJ1ZTtcbiAgICAgICAgaXNQcm9taXNlKHgpICYmICh4ID0gb2JzZXJ2YWJsZUZyb21Qcm9taXNlKHgpKTtcbiAgICAgICAgdmFyIGlubmVyID0gbmV3IFNpbmdsZUFzc2lnbm1lbnREaXNwb3NhYmxlKCk7XG4gICAgICAgIHRoaXMuX3MuZy5hZGQoaW5uZXIpO1xuICAgICAgICBpbm5lci5zZXREaXNwb3NhYmxlKHguc3Vic2NyaWJlKG5ldyBJbm5lck9ic2VydmVyKHRoaXMuX3MsIGlubmVyKSkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBTd2l0Y2hGaXJzdE9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICB0aGlzLl9zLm8ub25FcnJvcihlKTtcbiAgICB9O1xuXG4gICAgU3dpdGNoRmlyc3RPYnNlcnZlci5wcm90b3R5cGUuY29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fcy5pc1N0b3BwZWQgPSB0cnVlO1xuICAgICAgIXRoaXMuX3MuaGFzQ3VycmVudCAmJiB0aGlzLl9zLmcubGVuZ3RoID09PSAxICYmIHRoaXMuX3Muby5vbkNvbXBsZXRlZCgpO1xuICAgIH07XG5cbiAgICBpbmhlcml0cyhJbm5lck9ic2VydmVyLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIElubmVyT2JzZXJ2ZXIoc3RhdGUsIGlubmVyKSB7XG4gICAgICB0aGlzLl9zID0gc3RhdGU7XG4gICAgICB0aGlzLl9pID0gaW5uZXI7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHgpIHsgdGhpcy5fcy5vLm9uTmV4dCh4KTsgfTtcbiAgICBJbm5lck9ic2VydmVyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIChlKSB7IHRoaXMuX3Muby5vbkVycm9yKGUpOyB9O1xuICAgIElubmVyT2JzZXJ2ZXIucHJvdG90eXBlLmNvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuX3MuZy5yZW1vdmUodGhpcy5faSk7XG4gICAgICB0aGlzLl9zLmhhc0N1cnJlbnQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3MuaXNTdG9wcGVkICYmIHRoaXMuX3MuZy5sZW5ndGggPT09IDEgJiYgdGhpcy5fcy5vLm9uQ29tcGxldGVkKCk7XG4gICAgfTtcblxuICAgIHJldHVybiBTd2l0Y2hGaXJzdE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICAvKipcbiAgICogUGVyZm9ybXMgYSBleGNsdXNpdmUgd2FpdGluZyBmb3IgdGhlIGZpcnN0IHRvIGZpbmlzaCBiZWZvcmUgc3Vic2NyaWJpbmcgdG8gYW5vdGhlciBvYnNlcnZhYmxlLlxuICAgKiBPYnNlcnZhYmxlcyB0aGF0IGNvbWUgaW4gYmV0d2VlbiBzdWJzY3JpcHRpb25zIHdpbGwgYmUgZHJvcHBlZCBvbiB0aGUgZmxvb3IuXG4gICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlfSBBIGV4Y2x1c2l2ZSBvYnNlcnZhYmxlIHdpdGggb25seSB0aGUgcmVzdWx0cyB0aGF0IGhhcHBlbiB3aGVuIHN1YnNjcmliZWQuXG4gICAqL1xuICBvYnNlcnZhYmxlUHJvdG8uc3dpdGNoRmlyc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBTd2l0Y2hGaXJzdE9ic2VydmFibGUodGhpcyk7XG4gIH07XG5cbm9ic2VydmFibGVQcm90by5mbGF0TWFwRmlyc3QgPSBvYnNlcnZhYmxlUHJvdG8uc2VsZWN0TWFueUZpcnN0ID0gZnVuY3Rpb24oc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLnN3aXRjaEZpcnN0KCk7XG59O1xuXG5SeC5PYnNlcnZhYmxlLnByb3RvdHlwZS5mbGF0TWFwV2l0aE1heENvbmN1cnJlbnQgPSBmdW5jdGlvbihsaW1pdCwgc2VsZWN0b3IsIHJlc3VsdFNlbGVjdG9yLCB0aGlzQXJnKSB7XG4gICAgcmV0dXJuIG5ldyBGbGF0TWFwT2JzZXJ2YWJsZSh0aGlzLCBzZWxlY3RvciwgcmVzdWx0U2VsZWN0b3IsIHRoaXNBcmcpLm1lcmdlKGxpbWl0KTtcbn07XG4gIC8qKiBQcm92aWRlcyBhIHNldCBvZiBleHRlbnNpb24gbWV0aG9kcyBmb3IgdmlydHVhbCB0aW1lIHNjaGVkdWxpbmcuICovXG4gIHZhciBWaXJ0dWFsVGltZVNjaGVkdWxlciA9IFJ4LlZpcnR1YWxUaW1lU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhWaXJ0dWFsVGltZVNjaGVkdWxlciwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdmlydHVhbCB0aW1lIHNjaGVkdWxlciB3aXRoIHRoZSBzcGVjaWZpZWQgaW5pdGlhbCBjbG9jayB2YWx1ZSBhbmQgYWJzb2x1dGUgdGltZSBjb21wYXJlci5cbiAgICAgKlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbml0aWFsQ2xvY2sgSW5pdGlhbCB2YWx1ZSBmb3IgdGhlIGNsb2NrLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmVyIENvbXBhcmVyIHRvIGRldGVybWluZSBjYXVzYWxpdHkgb2YgZXZlbnRzIGJhc2VkIG9uIGFic29sdXRlIHRpbWUuXG4gICAgICovXG4gICAgZnVuY3Rpb24gVmlydHVhbFRpbWVTY2hlZHVsZXIoaW5pdGlhbENsb2NrLCBjb21wYXJlcikge1xuICAgICAgdGhpcy5jbG9jayA9IGluaXRpYWxDbG9jaztcbiAgICAgIHRoaXMuY29tcGFyZXIgPSBjb21wYXJlcjtcbiAgICAgIHRoaXMuaXNFbmFibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLnF1ZXVlID0gbmV3IFByaW9yaXR5UXVldWUoMTAyNCk7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICB2YXIgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUgPSBWaXJ0dWFsVGltZVNjaGVkdWxlci5wcm90b3R5cGU7XG5cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5ub3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy50b0Fic29sdXRlVGltZSh0aGlzLmNsb2NrKTtcbiAgICB9O1xuXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGUgPSBmdW5jdGlvbiAoc3RhdGUsIGFjdGlvbikge1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVBYnNvbHV0ZShzdGF0ZSwgdGhpcy5jbG9jaywgYWN0aW9uKTtcbiAgICB9O1xuXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGVGdXR1cmUgPSBmdW5jdGlvbiAoc3RhdGUsIGR1ZVRpbWUsIGFjdGlvbikge1xuICAgICAgdmFyIGR0ID0gZHVlVGltZSBpbnN0YW5jZW9mIERhdGUgP1xuICAgICAgICB0aGlzLnRvUmVsYXRpdmVUaW1lKGR1ZVRpbWUgLSB0aGlzLm5vdygpKSA6XG4gICAgICAgIHRoaXMudG9SZWxhdGl2ZVRpbWUoZHVlVGltZSk7XG5cbiAgICAgIHJldHVybiB0aGlzLnNjaGVkdWxlUmVsYXRpdmUoc3RhdGUsIGR0LCBhY3Rpb24pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcmVsYXRpdmUgdGltZSB2YWx1ZSB0byBhbiBhYnNvbHV0ZSB0aW1lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBhYnNvbHV0ZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHJlbGF0aXZlIFJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBhZGQuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBSZXN1bHRpbmcgYWJzb2x1dGUgdmlydHVhbCB0aW1lIHN1bSB2YWx1ZS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5hZGQgPSBub3RJbXBsZW1lbnRlZDtcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGFuIGFic29sdXRlIHRpbWUgdG8gYSBudW1iZXJcbiAgICAgKiBAcGFyYW0ge0FueX0gVGhlIGFic29sdXRlIHRpbWUuXG4gICAgICogQHJldHVybnMge051bWJlcn0gVGhlIGFic29sdXRlIHRpbWUgaW4gbXNcbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS50b0Fic29sdXRlVGltZSA9IG5vdEltcGxlbWVudGVkO1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIFRpbWVTcGFuIHZhbHVlIHRvIGEgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lU3BhbiBUaW1lU3BhbiB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm4ge051bWJlcn0gQ29ycmVzcG9uZGluZyByZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUudG9SZWxhdGl2ZVRpbWUgPSBub3RJbXBsZW1lbnRlZDtcblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHBlcmlvZGljIHBpZWNlIG9mIHdvcmsgYnkgZHluYW1pY2FsbHkgZGlzY292ZXJpbmcgdGhlIHNjaGVkdWxlcidzIGNhcGFiaWxpdGllcy4gVGhlIHBlcmlvZGljIHRhc2sgd2lsbCBiZSBlbXVsYXRlZCB1c2luZyByZWN1cnNpdmUgc2NoZWR1bGluZy5cbiAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBJbml0aWFsIHN0YXRlIHBhc3NlZCB0byB0aGUgYWN0aW9uIHVwb24gdGhlIGZpcnN0IGl0ZXJhdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcGVyaW9kIFBlcmlvZCBmb3IgcnVubmluZyB0aGUgd29yayBwZXJpb2RpY2FsbHkuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZCwgcG90ZW50aWFsbHkgdXBkYXRpbmcgdGhlIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCByZWN1cnJpbmcgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGVQZXJpb2RpYyA9IGZ1bmN0aW9uIChzdGF0ZSwgcGVyaW9kLCBhY3Rpb24pIHtcbiAgICAgIHZhciBzID0gbmV3IFNjaGVkdWxlUGVyaW9kaWNSZWN1cnNpdmUodGhpcywgc3RhdGUsIHBlcmlvZCwgYWN0aW9uKTtcbiAgICAgIHJldHVybiBzLnN0YXJ0KCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhbiBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQgYWZ0ZXIgZHVlVGltZS5cbiAgICAgKiBAcGFyYW0ge01peGVkfSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gZHVlVGltZSBSZWxhdGl2ZSB0aW1lIGFmdGVyIHdoaWNoIHRvIGV4ZWN1dGUgdGhlIGFjdGlvbi5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEByZXR1cm5zIHtEaXNwb3NhYmxlfSBUaGUgZGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5zY2hlZHVsZVJlbGF0aXZlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIHZhciBydW5BdCA9IHRoaXMuYWRkKHRoaXMuY2xvY2ssIGR1ZVRpbWUpO1xuICAgICAgcmV0dXJuIHRoaXMuc2NoZWR1bGVBYnNvbHV0ZShzdGF0ZSwgcnVuQXQsIGFjdGlvbik7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgdmlydHVhbCB0aW1lIHNjaGVkdWxlci5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5pc0VuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgdmFyIG5leHQgPSB0aGlzLmdldE5leHQoKTtcbiAgICAgICAgICBpZiAobmV4dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5jb21wYXJlcihuZXh0LmR1ZVRpbWUsIHRoaXMuY2xvY2spID4gMCAmJiAodGhpcy5jbG9jayA9IG5leHQuZHVlVGltZSk7XG4gICAgICAgICAgICBuZXh0Lmludm9rZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAodGhpcy5pc0VuYWJsZWQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgdmlydHVhbCB0aW1lIHNjaGVkdWxlci5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5pc0VuYWJsZWQgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWR2YW5jZXMgdGhlIHNjaGVkdWxlcidzIGNsb2NrIHRvIHRoZSBzcGVjaWZpZWQgdGltZSwgcnVubmluZyBhbGwgd29yayB0aWxsIHRoYXQgcG9pbnQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgQWJzb2x1dGUgdGltZSB0byBhZHZhbmNlIHRoZSBzY2hlZHVsZXIncyBjbG9jayB0by5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5hZHZhbmNlVG8gPSBmdW5jdGlvbiAodGltZSkge1xuICAgICAgdmFyIGR1ZVRvQ2xvY2sgPSB0aGlzLmNvbXBhcmVyKHRoaXMuY2xvY2ssIHRpbWUpO1xuICAgICAgaWYgKHRoaXMuY29tcGFyZXIodGhpcy5jbG9jaywgdGltZSkgPiAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgICBpZiAoZHVlVG9DbG9jayA9PT0gMCkgeyByZXR1cm47IH1cbiAgICAgIGlmICghdGhpcy5pc0VuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5pc0VuYWJsZWQgPSB0cnVlO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgdmFyIG5leHQgPSB0aGlzLmdldE5leHQoKTtcbiAgICAgICAgICBpZiAobmV4dCAhPT0gbnVsbCAmJiB0aGlzLmNvbXBhcmVyKG5leHQuZHVlVGltZSwgdGltZSkgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy5jb21wYXJlcihuZXh0LmR1ZVRpbWUsIHRoaXMuY2xvY2spID4gMCAmJiAodGhpcy5jbG9jayA9IG5leHQuZHVlVGltZSk7XG4gICAgICAgICAgICBuZXh0Lmludm9rZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAodGhpcy5pc0VuYWJsZWQpO1xuICAgICAgICB0aGlzLmNsb2NrID0gdGltZTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWR2YW5jZXMgdGhlIHNjaGVkdWxlcidzIGNsb2NrIGJ5IHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgdGltZSwgcnVubmluZyBhbGwgd29yayBzY2hlZHVsZWQgZm9yIHRoYXQgdGltZXNwYW4uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWUgUmVsYXRpdmUgdGltZSB0byBhZHZhbmNlIHRoZSBzY2hlZHVsZXIncyBjbG9jayBieS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5hZHZhbmNlQnkgPSBmdW5jdGlvbiAodGltZSkge1xuICAgICAgdmFyIGR0ID0gdGhpcy5hZGQodGhpcy5jbG9jaywgdGltZSksXG4gICAgICAgICAgZHVlVG9DbG9jayA9IHRoaXMuY29tcGFyZXIodGhpcy5jbG9jaywgZHQpO1xuICAgICAgaWYgKGR1ZVRvQ2xvY2sgPiAwKSB7IHRocm93IG5ldyBBcmd1bWVudE91dE9mUmFuZ2VFcnJvcigpOyB9XG4gICAgICBpZiAoZHVlVG9DbG9jayA9PT0gMCkgeyAgcmV0dXJuOyB9XG5cbiAgICAgIHRoaXMuYWR2YW5jZVRvKGR0KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWR2YW5jZXMgdGhlIHNjaGVkdWxlcidzIGNsb2NrIGJ5IHRoZSBzcGVjaWZpZWQgcmVsYXRpdmUgdGltZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdGltZSBSZWxhdGl2ZSB0aW1lIHRvIGFkdmFuY2UgdGhlIHNjaGVkdWxlcidzIGNsb2NrIGJ5LlxuICAgICAqL1xuICAgIFZpcnR1YWxUaW1lU2NoZWR1bGVyUHJvdG90eXBlLnNsZWVwID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICAgIHZhciBkdCA9IHRoaXMuYWRkKHRoaXMuY2xvY2ssIHRpbWUpO1xuICAgICAgaWYgKHRoaXMuY29tcGFyZXIodGhpcy5jbG9jaywgZHQpID49IDApIHsgdGhyb3cgbmV3IEFyZ3VtZW50T3V0T2ZSYW5nZUVycm9yKCk7IH1cblxuICAgICAgdGhpcy5jbG9jayA9IGR0O1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBuZXh0IHNjaGVkdWxlZCBpdGVtIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEByZXR1cm5zIHtTY2hlZHVsZWRJdGVtfSBUaGUgbmV4dCBzY2hlZHVsZWQgaXRlbS5cbiAgICAgKi9cbiAgICBWaXJ0dWFsVGltZVNjaGVkdWxlclByb3RvdHlwZS5nZXROZXh0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgd2hpbGUgKHRoaXMucXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIgbmV4dCA9IHRoaXMucXVldWUucGVlaygpO1xuICAgICAgICBpZiAobmV4dC5pc0NhbmNlbGxlZCgpKSB7XG4gICAgICAgICAgdGhpcy5xdWV1ZS5kZXF1ZXVlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIG5leHQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYW4gYWN0aW9uIHRvIGJlIGV4ZWN1dGVkIGF0IGR1ZVRpbWUuXG4gICAgICogQHBhcmFtIHtNaXhlZH0gc3RhdGUgU3RhdGUgcGFzc2VkIHRvIHRoZSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGR1ZVRpbWUgQWJzb2x1dGUgdGltZSBhdCB3aGljaCB0byBleGVjdXRlIHRoZSBhY3Rpb24uXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gYWN0aW9uIEFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcmV0dXJucyB7RGlzcG9zYWJsZX0gVGhlIGRpc3Bvc2FibGUgb2JqZWN0IHVzZWQgdG8gY2FuY2VsIHRoZSBzY2hlZHVsZWQgYWN0aW9uIChiZXN0IGVmZm9ydCkuXG4gICAgICovXG4gICAgVmlydHVhbFRpbWVTY2hlZHVsZXJQcm90b3R5cGUuc2NoZWR1bGVBYnNvbHV0ZSA9IGZ1bmN0aW9uIChzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgIGZ1bmN0aW9uIHJ1bihzY2hlZHVsZXIsIHN0YXRlMSkge1xuICAgICAgICBzZWxmLnF1ZXVlLnJlbW92ZShzaSk7XG4gICAgICAgIHJldHVybiBhY3Rpb24oc2NoZWR1bGVyLCBzdGF0ZTEpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2kgPSBuZXcgU2NoZWR1bGVkSXRlbSh0aGlzLCBzdGF0ZSwgcnVuLCBkdWVUaW1lLCB0aGlzLmNvbXBhcmVyKTtcbiAgICAgIHRoaXMucXVldWUuZW5xdWV1ZShzaSk7XG5cbiAgICAgIHJldHVybiBzaS5kaXNwb3NhYmxlO1xuICAgIH07XG5cbiAgICByZXR1cm4gVmlydHVhbFRpbWVTY2hlZHVsZXI7XG4gIH0oU2NoZWR1bGVyKSk7XG5cbiAgLyoqIFByb3ZpZGVzIGEgdmlydHVhbCB0aW1lIHNjaGVkdWxlciB0aGF0IHVzZXMgRGF0ZSBmb3IgYWJzb2x1dGUgdGltZSBhbmQgbnVtYmVyIGZvciByZWxhdGl2ZSB0aW1lLiAqL1xuICBSeC5IaXN0b3JpY2FsU2NoZWR1bGVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhIaXN0b3JpY2FsU2NoZWR1bGVyLCBfX3N1cGVyX18pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBoaXN0b3JpY2FsIHNjaGVkdWxlciB3aXRoIHRoZSBzcGVjaWZpZWQgaW5pdGlhbCBjbG9jayB2YWx1ZS5cbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5pdGlhbENsb2NrIEluaXRpYWwgdmFsdWUgZm9yIHRoZSBjbG9jay5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb21wYXJlciBDb21wYXJlciB0byBkZXRlcm1pbmUgY2F1c2FsaXR5IG9mIGV2ZW50cyBiYXNlZCBvbiBhYnNvbHV0ZSB0aW1lLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEhpc3RvcmljYWxTY2hlZHVsZXIoaW5pdGlhbENsb2NrLCBjb21wYXJlcikge1xuICAgICAgdmFyIGNsb2NrID0gaW5pdGlhbENsb2NrID09IG51bGwgPyAwIDogaW5pdGlhbENsb2NrO1xuICAgICAgdmFyIGNtcCA9IGNvbXBhcmVyIHx8IGRlZmF1bHRTdWJDb21wYXJlcjtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMsIGNsb2NrLCBjbXApO1xuICAgIH1cblxuICAgIHZhciBIaXN0b3JpY2FsU2NoZWR1bGVyUHJvdG8gPSBIaXN0b3JpY2FsU2NoZWR1bGVyLnByb3RvdHlwZTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSByZWxhdGl2ZSB0aW1lIHZhbHVlIHRvIGFuIGFic29sdXRlIHRpbWUgdmFsdWUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGFic29sdXRlIEFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gcmVsYXRpdmUgUmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlIHRvIGFkZC5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IFJlc3VsdGluZyBhYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgc3VtIHZhbHVlLlxuICAgICAqL1xuICAgIEhpc3RvcmljYWxTY2hlZHVsZXJQcm90by5hZGQgPSBmdW5jdGlvbiAoYWJzb2x1dGUsIHJlbGF0aXZlKSB7XG4gICAgICByZXR1cm4gYWJzb2x1dGUgKyByZWxhdGl2ZTtcbiAgICB9O1xuXG4gICAgSGlzdG9yaWNhbFNjaGVkdWxlclByb3RvLnRvQWJzb2x1dGVUaW1lID0gZnVuY3Rpb24gKGFic29sdXRlKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoYWJzb2x1dGUpLmdldFRpbWUoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIFRpbWVTcGFuIHZhbHVlIHRvIGEgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqIEBtZW1iZXJPZiBIaXN0b3JpY2FsU2NoZWR1bGVyXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpbWVTcGFuIFRpbWVTcGFuIHZhbHVlIHRvIGNvbnZlcnQuXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBDb3JyZXNwb25kaW5nIHJlbGF0aXZlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKi9cbiAgICBIaXN0b3JpY2FsU2NoZWR1bGVyUHJvdG8udG9SZWxhdGl2ZVRpbWUgPSBmdW5jdGlvbiAodGltZVNwYW4pIHtcbiAgICAgIHJldHVybiB0aW1lU3BhbjtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEhpc3RvcmljYWxTY2hlZHVsZXI7XG4gIH0oUnguVmlydHVhbFRpbWVTY2hlZHVsZXIpKTtcblxuZnVuY3Rpb24gT25OZXh0UHJlZGljYXRlKHByZWRpY2F0ZSkge1xuICAgIHRoaXMucHJlZGljYXRlID0gcHJlZGljYXRlO1xufVxuXG5Pbk5leHRQcmVkaWNhdGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICBpZiAob3RoZXIgPT09IHRoaXMpIHsgcmV0dXJuIHRydWU7IH1cbiAgaWYgKG90aGVyID09IG51bGwpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIGlmIChvdGhlci5raW5kICE9PSAnTicpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIHJldHVybiB0aGlzLnByZWRpY2F0ZShvdGhlci52YWx1ZSk7XG59O1xuXG5mdW5jdGlvbiBPbkVycm9yUHJlZGljYXRlKHByZWRpY2F0ZSkge1xuICB0aGlzLnByZWRpY2F0ZSA9IHByZWRpY2F0ZTtcbn1cblxuT25FcnJvclByZWRpY2F0ZS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gIGlmIChvdGhlciA9PT0gdGhpcykgeyByZXR1cm4gdHJ1ZTsgfVxuICBpZiAob3RoZXIgPT0gbnVsbCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgaWYgKG90aGVyLmtpbmQgIT09ICdFJykgeyByZXR1cm4gZmFsc2U7IH1cbiAgcmV0dXJuIHRoaXMucHJlZGljYXRlKG90aGVyLmVycm9yKTtcbn07XG5cbnZhciBSZWFjdGl2ZVRlc3QgPSBSeC5SZWFjdGl2ZVRlc3QgPSB7XG4gIC8qKiBEZWZhdWx0IHZpcnR1YWwgdGltZSB1c2VkIGZvciBjcmVhdGlvbiBvZiBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbiB1bml0IHRlc3RzLiAqL1xuICBjcmVhdGVkOiAxMDAsXG4gIC8qKiBEZWZhdWx0IHZpcnR1YWwgdGltZSB1c2VkIHRvIHN1YnNjcmliZSB0byBvYnNlcnZhYmxlIHNlcXVlbmNlcyBpbiB1bml0IHRlc3RzLiAqL1xuICBzdWJzY3JpYmVkOiAyMDAsXG4gIC8qKiBEZWZhdWx0IHZpcnR1YWwgdGltZSB1c2VkIHRvIGRpc3Bvc2Ugc3Vic2NyaXB0aW9ucyBpbiB1bml0IHRlc3RzLiAqL1xuICBkaXNwb3NlZDogMTAwMCxcblxuICAvKipcbiAgICogRmFjdG9yeSBtZXRob2QgZm9yIGFuIE9uTmV4dCBub3RpZmljYXRpb24gcmVjb3JkIGF0IGEgZ2l2ZW4gdGltZSB3aXRoIGEgZ2l2ZW4gdmFsdWUgb3IgYSBwcmVkaWNhdGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIDEgLSBSZWFjdGl2ZVRlc3Qub25OZXh0KDIwMCwgNDIpO1xuICAgKiAyIC0gUmVhY3RpdmVUZXN0Lm9uTmV4dCgyMDAsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4Lmxlbmd0aCA9PSAyOyB9KTtcbiAgICpcbiAgICogQHBhcmFtIHRpY2tzIFJlY29yZGVkIHZpcnR1YWwgdGltZSB0aGUgT25OZXh0IG5vdGlmaWNhdGlvbiBvY2N1cnMuXG4gICAqIEBwYXJhbSB2YWx1ZSBSZWNvcmRlZCB2YWx1ZSBzdG9yZWQgaW4gdGhlIE9uTmV4dCBub3RpZmljYXRpb24gb3IgYSBwcmVkaWNhdGUuXG4gICAqIEByZXR1cm4gUmVjb3JkZWQgT25OZXh0IG5vdGlmaWNhdGlvbi5cbiAgICovXG4gIG9uTmV4dDogZnVuY3Rpb24gKHRpY2tzLCB2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgP1xuICAgICAgbmV3IFJlY29yZGVkKHRpY2tzLCBuZXcgT25OZXh0UHJlZGljYXRlKHZhbHVlKSkgOlxuICAgICAgbmV3IFJlY29yZGVkKHRpY2tzLCBOb3RpZmljYXRpb24uY3JlYXRlT25OZXh0KHZhbHVlKSk7XG4gIH0sXG4gIC8qKlxuICAgKiBGYWN0b3J5IG1ldGhvZCBmb3IgYW4gT25FcnJvciBub3RpZmljYXRpb24gcmVjb3JkIGF0IGEgZ2l2ZW4gdGltZSB3aXRoIGEgZ2l2ZW4gZXJyb3IuXG4gICAqXG4gICAqIDEgLSBSZWFjdGl2ZVRlc3Qub25OZXh0KDIwMCwgbmV3IEVycm9yKCdlcnJvcicpKTtcbiAgICogMiAtIFJlYWN0aXZlVGVzdC5vbk5leHQoMjAwLCBmdW5jdGlvbiAoZSkgeyByZXR1cm4gZS5tZXNzYWdlID09PSAnZXJyb3InOyB9KTtcbiAgICpcbiAgICogQHBhcmFtIHRpY2tzIFJlY29yZGVkIHZpcnR1YWwgdGltZSB0aGUgT25FcnJvciBub3RpZmljYXRpb24gb2NjdXJzLlxuICAgKiBAcGFyYW0gZXhjZXB0aW9uIFJlY29yZGVkIGV4Y2VwdGlvbiBzdG9yZWQgaW4gdGhlIE9uRXJyb3Igbm90aWZpY2F0aW9uLlxuICAgKiBAcmV0dXJuIFJlY29yZGVkIE9uRXJyb3Igbm90aWZpY2F0aW9uLlxuICAgKi9cbiAgb25FcnJvcjogZnVuY3Rpb24gKHRpY2tzLCBlcnJvcikge1xuICAgIHJldHVybiB0eXBlb2YgZXJyb3IgPT09ICdmdW5jdGlvbicgP1xuICAgICAgbmV3IFJlY29yZGVkKHRpY2tzLCBuZXcgT25FcnJvclByZWRpY2F0ZShlcnJvcikpIDpcbiAgICAgIG5ldyBSZWNvcmRlZCh0aWNrcywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uRXJyb3IoZXJyb3IpKTtcbiAgfSxcbiAgLyoqXG4gICAqIEZhY3RvcnkgbWV0aG9kIGZvciBhbiBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24gcmVjb3JkIGF0IGEgZ2l2ZW4gdGltZS5cbiAgICpcbiAgICogQHBhcmFtIHRpY2tzIFJlY29yZGVkIHZpcnR1YWwgdGltZSB0aGUgT25Db21wbGV0ZWQgbm90aWZpY2F0aW9uIG9jY3Vycy5cbiAgICogQHJldHVybiBSZWNvcmRlZCBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24uXG4gICAqL1xuICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKHRpY2tzKSB7XG4gICAgcmV0dXJuIG5ldyBSZWNvcmRlZCh0aWNrcywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uQ29tcGxldGVkKCkpO1xuICB9LFxuICAvKipcbiAgICogRmFjdG9yeSBtZXRob2QgZm9yIGEgc3Vic2NyaXB0aW9uIHJlY29yZCBiYXNlZCBvbiBhIGdpdmVuIHN1YnNjcmlwdGlvbiBhbmQgZGlzcG9zYWwgdGltZS5cbiAgICpcbiAgICogQHBhcmFtIHN0YXJ0IFZpcnR1YWwgdGltZSBpbmRpY2F0aW5nIHdoZW4gdGhlIHN1YnNjcmlwdGlvbiB3YXMgY3JlYXRlZC5cbiAgICogQHBhcmFtIGVuZCBWaXJ0dWFsIHRpbWUgaW5kaWNhdGluZyB3aGVuIHRoZSBzdWJzY3JpcHRpb24gd2FzIGRpc3Bvc2VkLlxuICAgKiBAcmV0dXJuIFN1YnNjcmlwdGlvbiBvYmplY3QuXG4gICAqL1xuICBzdWJzY3JpYmU6IGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gICAgcmV0dXJuIG5ldyBTdWJzY3JpcHRpb24oc3RhcnQsIGVuZCk7XG4gIH1cbn07XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgb2JqZWN0IHJlY29yZGluZyB0aGUgcHJvZHVjdGlvbiBvZiB0aGUgc3BlY2lmaWVkIHZhbHVlIGF0IHRoZSBnaXZlbiB2aXJ0dWFsIHRpbWUuXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge051bWJlcn0gdGltZSBWaXJ0dWFsIHRpbWUgdGhlIHZhbHVlIHdhcyBwcm9kdWNlZCBvbi5cbiAgICogQHBhcmFtIHtNaXhlZH0gdmFsdWUgVmFsdWUgdGhhdCB3YXMgcHJvZHVjZWQuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNvbXBhcmVyIEFuIG9wdGlvbmFsIGNvbXBhcmVyLlxuICAgKi9cbiAgdmFyIFJlY29yZGVkID0gUnguUmVjb3JkZWQgPSBmdW5jdGlvbiAodGltZSwgdmFsdWUsIGNvbXBhcmVyKSB7XG4gICAgdGhpcy50aW1lID0gdGltZTtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5jb21wYXJlciA9IGNvbXBhcmVyIHx8IGRlZmF1bHRDb21wYXJlcjtcbiAgfTtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIGdpdmVuIHJlY29yZGVkIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgY3VycmVudCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWNvcmRlZH0gb3RoZXIgUmVjb3JkZWQgb2JqZWN0IHRvIGNoZWNrIGZvciBlcXVhbGl0eS5cbiAgICogQHJldHVybnMge0Jvb2xlYW59IHRydWUgaWYgYm90aCBvYmplY3RzIGFyZSBlcXVhbDsgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKi9cbiAgUmVjb3JkZWQucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvdGhlcikge1xuICAgIHJldHVybiB0aGlzLnRpbWUgPT09IG90aGVyLnRpbWUgJiYgdGhpcy5jb21wYXJlcih0aGlzLnZhbHVlLCBvdGhlci52YWx1ZSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgUmVjb3JkZWQgdmFsdWUuXG4gICAqXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9IFN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgY3VycmVudCBSZWNvcmRlZCB2YWx1ZS5cbiAgICovXG4gIFJlY29yZGVkLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy52YWx1ZS50b1N0cmluZygpICsgJ0AnICsgdGhpcy50aW1lO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHN1YnNjcmlwdGlvbiBvYmplY3Qgd2l0aCB0aGUgZ2l2ZW4gdmlydHVhbCBzdWJzY3JpcHRpb24gYW5kIHVuc3Vic2NyaXB0aW9uIHRpbWUuXG4gICAqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcGFyYW0ge051bWJlcn0gc3Vic2NyaWJlIFZpcnR1YWwgdGltZSBhdCB3aGljaCB0aGUgc3Vic2NyaXB0aW9uIG9jY3VycmVkLlxuICAgKiBAcGFyYW0ge051bWJlcn0gdW5zdWJzY3JpYmUgVmlydHVhbCB0aW1lIGF0IHdoaWNoIHRoZSB1bnN1YnNjcmlwdGlvbiBvY2N1cnJlZC5cbiAgICovXG4gIHZhciBTdWJzY3JpcHRpb24gPSBSeC5TdWJzY3JpcHRpb24gPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuICAgIHRoaXMuc3Vic2NyaWJlID0gc3RhcnQ7XG4gICAgdGhpcy51bnN1YnNjcmliZSA9IGVuZCB8fCBOdW1iZXIuTUFYX1ZBTFVFO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciB0aGUgZ2l2ZW4gc3Vic2NyaXB0aW9uIGlzIGVxdWFsIHRvIHRoZSBjdXJyZW50IGluc3RhbmNlLlxuICAgKiBAcGFyYW0gb3RoZXIgU3Vic2NyaXB0aW9uIG9iamVjdCB0byBjaGVjayBmb3IgZXF1YWxpdHkuXG4gICAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIGJvdGggb2JqZWN0cyBhcmUgZXF1YWw7IGZhbHNlIG90aGVyd2lzZS5cbiAgICovXG4gIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG90aGVyKSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vic2NyaWJlID09PSBvdGhlci5zdWJzY3JpYmUgJiYgdGhpcy51bnN1YnNjcmliZSA9PT0gb3RoZXIudW5zdWJzY3JpYmU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgU3Vic2NyaXB0aW9uIHZhbHVlLlxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSBTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGN1cnJlbnQgU3Vic2NyaXB0aW9uIHZhbHVlLlxuICAgKi9cbiAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJygnICsgdGhpcy5zdWJzY3JpYmUgKyAnLCAnICsgKHRoaXMudW5zdWJzY3JpYmUgPT09IE51bWJlci5NQVhfVkFMVUUgPyAnSW5maW5pdGUnIDogdGhpcy51bnN1YnNjcmliZSkgKyAnKSc7XG4gIH07XG5cbiAgdmFyIE1vY2tEaXNwb3NhYmxlID0gUnguTW9ja0Rpc3Bvc2FibGUgPSBmdW5jdGlvbiAoc2NoZWR1bGVyKSB7XG4gICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgdGhpcy5kaXNwb3NlcyA9IFtdO1xuICAgIHRoaXMuZGlzcG9zZXMucHVzaCh0aGlzLnNjaGVkdWxlci5jbG9jayk7XG4gIH07XG5cbiAgTW9ja0Rpc3Bvc2FibGUucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5kaXNwb3Nlcy5wdXNoKHRoaXMuc2NoZWR1bGVyLmNsb2NrKTtcbiAgfTtcblxuICB2YXIgTW9ja09ic2VydmVyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhNb2NrT2JzZXJ2ZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBNb2NrT2JzZXJ2ZXIoc2NoZWR1bGVyKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5tZXNzYWdlcyA9IFtdO1xuICAgIH1cblxuICAgIHZhciBNb2NrT2JzZXJ2ZXJQcm90b3R5cGUgPSBNb2NrT2JzZXJ2ZXIucHJvdG90eXBlO1xuXG4gICAgTW9ja09ic2VydmVyUHJvdG90eXBlLm9uTmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKG5ldyBSZWNvcmRlZCh0aGlzLnNjaGVkdWxlci5jbG9jaywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uTmV4dCh2YWx1ZSkpKTtcbiAgICB9O1xuXG4gICAgTW9ja09ic2VydmVyUHJvdG90eXBlLm9uRXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKG5ldyBSZWNvcmRlZCh0aGlzLnNjaGVkdWxlci5jbG9jaywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uRXJyb3IoZSkpKTtcbiAgICB9O1xuXG4gICAgTW9ja09ic2VydmVyUHJvdG90eXBlLm9uQ29tcGxldGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKG5ldyBSZWNvcmRlZCh0aGlzLnNjaGVkdWxlci5jbG9jaywgTm90aWZpY2F0aW9uLmNyZWF0ZU9uQ29tcGxldGVkKCkpKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIE1vY2tPYnNlcnZlcjtcbiAgfSkoT2JzZXJ2ZXIpO1xuXG4gIGZ1bmN0aW9uIE1vY2tQcm9taXNlKHNjaGVkdWxlciwgbWVzc2FnZXMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXI7XG4gICAgdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMubWVzc2FnZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIHZhciBtZXNzYWdlID0gdGhpcy5tZXNzYWdlc1tpXSxcbiAgICAgICAgICBub3RpZmljYXRpb24gPSBtZXNzYWdlLnZhbHVlO1xuICAgICAgKGZ1bmN0aW9uIChpbm5lck5vdGlmaWNhdGlvbikge1xuICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVBYnNvbHV0ZShudWxsLCBtZXNzYWdlLnRpbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgb2JzID0gc2VsZi5vYnNlcnZlcnMuc2xpY2UoMCk7XG5cbiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgakxlbiA9IG9icy5sZW5ndGg7IGogPCBqTGVuOyBqKyspIHtcbiAgICAgICAgICAgIGlubmVyTm90aWZpY2F0aW9uLmFjY2VwdChvYnNbal0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICB9KTtcbiAgICAgIH0pKG5vdGlmaWNhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgTW9ja1Byb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAob25SZXNvbHZlZCwgb25SZWplY3RlZCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5wdXNoKG5ldyBTdWJzY3JpcHRpb24odGhpcy5zY2hlZHVsZXIuY2xvY2spKTtcbiAgICB2YXIgaW5kZXggPSB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoIC0gMTtcblxuICAgIHZhciBuZXdQcm9taXNlO1xuXG4gICAgdmFyIG9ic2VydmVyID0gUnguT2JzZXJ2ZXIuY3JlYXRlKFxuICAgICAgZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgdmFyIHJldFZhbHVlID0gb25SZXNvbHZlZCh4KTtcbiAgICAgICAgaWYgKHJldFZhbHVlICYmIHR5cGVvZiByZXRWYWx1ZS50aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgbmV3UHJvbWlzZSA9IHJldFZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB0aWNrcyA9IHNlbGYuc2NoZWR1bGVyLmNsb2NrO1xuICAgICAgICAgIG5ld1Byb21pc2UgPSBuZXcgTW9ja1Byb21pc2Uoc2VsZi5zY2hlZHVsZXIsIFtSeC5SZWFjdGl2ZVRlc3Qub25OZXh0KHRpY2tzLCB1bmRlZmluZWQpLCBSeC5SZWFjdGl2ZVRlc3Qub25Db21wbGV0ZWQodGlja3MpXSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlkeCA9IHNlbGYub2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpO1xuICAgICAgICBzZWxmLm9ic2VydmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgc2VsZi5zdWJzY3JpcHRpb25zW2luZGV4XSA9IG5ldyBTdWJzY3JpcHRpb24oc2VsZi5zdWJzY3JpcHRpb25zW2luZGV4XS5zdWJzY3JpYmUsIHNlbGYuc2NoZWR1bGVyLmNsb2NrKTtcbiAgICAgIH0sXG4gICAgICBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIG9uUmVqZWN0ZWQoZXJyKTtcbiAgICAgICAgdmFyIGlkeCA9IHNlbGYub2JzZXJ2ZXJzLmluZGV4T2Yob2JzZXJ2ZXIpO1xuICAgICAgICBzZWxmLm9ic2VydmVycy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgc2VsZi5zdWJzY3JpcHRpb25zW2luZGV4XSA9IG5ldyBTdWJzY3JpcHRpb24oc2VsZi5zdWJzY3JpcHRpb25zW2luZGV4XS5zdWJzY3JpYmUsIHNlbGYuc2NoZWR1bGVyLmNsb2NrKTtcbiAgICAgIH1cbiAgICApO1xuICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xuXG4gICAgcmV0dXJuIG5ld1Byb21pc2UgfHwgbmV3IE1vY2tQcm9taXNlKHRoaXMuc2NoZWR1bGVyLCB0aGlzLm1lc3NhZ2VzKTtcbiAgfTtcblxuICB2YXIgSG90T2JzZXJ2YWJsZSA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoSG90T2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEhvdE9ic2VydmFibGUoc2NoZWR1bGVyLCBtZXNzYWdlcykge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB2YXIgbWVzc2FnZSwgbm90aWZpY2F0aW9uLCBvYnNlcnZhYmxlID0gdGhpcztcbiAgICAgIHRoaXMuc2NoZWR1bGVyID0gc2NoZWR1bGVyO1xuICAgICAgdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zID0gW107XG4gICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMubWVzc2FnZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgbWVzc2FnZSA9IHRoaXMubWVzc2FnZXNbaV07XG4gICAgICAgIG5vdGlmaWNhdGlvbiA9IG1lc3NhZ2UudmFsdWU7XG4gICAgICAgIChmdW5jdGlvbiAoaW5uZXJOb3RpZmljYXRpb24pIHtcbiAgICAgICAgICBzY2hlZHVsZXIuc2NoZWR1bGVBYnNvbHV0ZShudWxsLCBtZXNzYWdlLnRpbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvYnMgPSBvYnNlcnZhYmxlLm9ic2VydmVycy5zbGljZSgwKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGpMZW4gPSBvYnMubGVuZ3RoOyBqIDwgakxlbjsgaisrKSB7XG4gICAgICAgICAgICAgIGlubmVyTm90aWZpY2F0aW9uLmFjY2VwdChvYnNbal0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkobm90aWZpY2F0aW9uKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBIb3RPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBvYnNlcnZhYmxlID0gdGhpcztcbiAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gobyk7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbnMucHVzaChuZXcgU3Vic2NyaXB0aW9uKHRoaXMuc2NoZWR1bGVyLmNsb2NrKSk7XG4gICAgICB2YXIgaW5kZXggPSB0aGlzLnN1YnNjcmlwdGlvbnMubGVuZ3RoIC0gMTtcbiAgICAgIHJldHVybiBkaXNwb3NhYmxlQ3JlYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlkeCA9IG9ic2VydmFibGUub2JzZXJ2ZXJzLmluZGV4T2Yobyk7XG4gICAgICAgIG9ic2VydmFibGUub2JzZXJ2ZXJzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICBvYnNlcnZhYmxlLnN1YnNjcmlwdGlvbnNbaW5kZXhdID0gbmV3IFN1YnNjcmlwdGlvbihvYnNlcnZhYmxlLnN1YnNjcmlwdGlvbnNbaW5kZXhdLnN1YnNjcmliZSwgb2JzZXJ2YWJsZS5zY2hlZHVsZXIuY2xvY2spO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHJldHVybiBIb3RPYnNlcnZhYmxlO1xuICB9KShPYnNlcnZhYmxlKTtcblxuICB2YXIgQ29sZE9ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKENvbGRPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuXG4gICAgZnVuY3Rpb24gQ29sZE9ic2VydmFibGUoc2NoZWR1bGVyLCBtZXNzYWdlcykge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnNjaGVkdWxlciA9IHNjaGVkdWxlcjtcbiAgICAgIHRoaXMubWVzc2FnZXMgPSBtZXNzYWdlcztcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgIH1cblxuICAgIENvbGRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBtZXNzYWdlLCBub3RpZmljYXRpb24sIG9ic2VydmFibGUgPSB0aGlzO1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb25zLnB1c2gobmV3IFN1YnNjcmlwdGlvbih0aGlzLnNjaGVkdWxlci5jbG9jaykpO1xuICAgICAgdmFyIGluZGV4ID0gdGhpcy5zdWJzY3JpcHRpb25zLmxlbmd0aCAtIDE7XG4gICAgICB2YXIgZCA9IG5ldyBDb21wb3NpdGVEaXNwb3NhYmxlKCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGhpcy5tZXNzYWdlcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBtZXNzYWdlID0gdGhpcy5tZXNzYWdlc1tpXTtcbiAgICAgICAgbm90aWZpY2F0aW9uID0gbWVzc2FnZS52YWx1ZTtcbiAgICAgICAgKGZ1bmN0aW9uIChpbm5lck5vdGlmaWNhdGlvbikge1xuICAgICAgICAgIGQuYWRkKG9ic2VydmFibGUuc2NoZWR1bGVyLnNjaGVkdWxlUmVsYXRpdmUobnVsbCwgbWVzc2FnZS50aW1lLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpbm5lck5vdGlmaWNhdGlvbi5hY2NlcHQobyk7XG4gICAgICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkobm90aWZpY2F0aW9uKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBkaXNwb3NhYmxlQ3JlYXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb2JzZXJ2YWJsZS5zdWJzY3JpcHRpb25zW2luZGV4XSA9IG5ldyBTdWJzY3JpcHRpb24ob2JzZXJ2YWJsZS5zdWJzY3JpcHRpb25zW2luZGV4XS5zdWJzY3JpYmUsIG9ic2VydmFibGUuc2NoZWR1bGVyLmNsb2NrKTtcbiAgICAgICAgZC5kaXNwb3NlKCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIENvbGRPYnNlcnZhYmxlO1xuICB9KShPYnNlcnZhYmxlKTtcblxuICAvKiogVmlydHVhbCB0aW1lIHNjaGVkdWxlciB1c2VkIGZvciB0ZXN0aW5nIGFwcGxpY2F0aW9ucyBhbmQgbGlicmFyaWVzIGJ1aWx0IHVzaW5nIFJlYWN0aXZlIEV4dGVuc2lvbnMuICovXG4gIFJ4LlRlc3RTY2hlZHVsZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFRlc3RTY2hlZHVsZXIsIF9fc3VwZXJfXyk7XG5cbiAgICBmdW5jdGlvbiBiYXNlQ29tcGFyZXIoeCwgeSkge1xuICAgICAgcmV0dXJuIHggPiB5ID8gMSA6ICh4IDwgeSA/IC0xIDogMCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gVGVzdFNjaGVkdWxlcigpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMsIDAsIGJhc2VDb21wYXJlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGFuIGFjdGlvbiB0byBiZSBleGVjdXRlZCBhdCB0aGUgc3BlY2lmaWVkIHZpcnR1YWwgdGltZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzdGF0ZSBTdGF0ZSBwYXNzZWQgdG8gdGhlIGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAgICAgKiBAcGFyYW0gZHVlVGltZSBBYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgYXQgd2hpY2ggdG8gZXhlY3V0ZSB0aGUgYWN0aW9uLlxuICAgICAqIEBwYXJhbSBhY3Rpb24gQWN0aW9uIHRvIGJlIGV4ZWN1dGVkLlxuICAgICAqIEByZXR1cm4gRGlzcG9zYWJsZSBvYmplY3QgdXNlZCB0byBjYW5jZWwgdGhlIHNjaGVkdWxlZCBhY3Rpb24gKGJlc3QgZWZmb3J0KS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5zY2hlZHVsZUFic29sdXRlID0gZnVuY3Rpb24gKHN0YXRlLCBkdWVUaW1lLCBhY3Rpb24pIHtcbiAgICAgIGR1ZVRpbWUgPD0gdGhpcy5jbG9jayAmJiAoZHVlVGltZSA9IHRoaXMuY2xvY2sgKyAxKTtcbiAgICAgIHJldHVybiBfX3N1cGVyX18ucHJvdG90eXBlLnNjaGVkdWxlQWJzb2x1dGUuY2FsbCh0aGlzLCBzdGF0ZSwgZHVlVGltZSwgYWN0aW9uKTtcbiAgICB9O1xuICAgIC8qKlxuICAgICAqIEFkZHMgYSByZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdG8gYW4gYWJzb2x1dGUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFic29sdXRlIEFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZS5cbiAgICAgKiBAcGFyYW0gcmVsYXRpdmUgUmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlIHRvIGFkZC5cbiAgICAgKiBAcmV0dXJuIFJlc3VsdGluZyBhYnNvbHV0ZSB2aXJ0dWFsIHRpbWUgc3VtIHZhbHVlLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChhYnNvbHV0ZSwgcmVsYXRpdmUpIHtcbiAgICAgIHJldHVybiBhYnNvbHV0ZSArIHJlbGF0aXZlO1xuICAgIH07XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBhIERhdGVUaW1lT2Zmc2V0IHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFic29sdXRlIEFic29sdXRlIHZpcnR1YWwgdGltZSB2YWx1ZSB0byBjb252ZXJ0LlxuICAgICAqIEByZXR1cm4gQ29ycmVzcG9uZGluZyBEYXRlVGltZU9mZnNldCB2YWx1ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS50b0Fic29sdXRlVGltZSA9IGZ1bmN0aW9uIChhYnNvbHV0ZSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKGFic29sdXRlKS5nZXRUaW1lKCk7XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgVGltZVNwYW4gdmFsdWUgdG8gYSByZWxhdGl2ZSB2aXJ0dWFsIHRpbWUgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdGltZVNwYW4gVGltZVNwYW4gdmFsdWUgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJuIENvcnJlc3BvbmRpbmcgcmVsYXRpdmUgdmlydHVhbCB0aW1lIHZhbHVlLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLnRvUmVsYXRpdmVUaW1lID0gZnVuY3Rpb24gKHRpbWVTcGFuKSB7XG4gICAgICByZXR1cm4gdGltZVNwYW47XG4gICAgfTtcbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHRlc3Qgc2NoZWR1bGVyIGFuZCB1c2VzIHRoZSBzcGVjaWZpZWQgdmlydHVhbCB0aW1lcyB0byBpbnZva2UgdGhlIGZhY3RvcnkgZnVuY3Rpb24sIHN1YnNjcmliZSB0byB0aGUgcmVzdWx0aW5nIHNlcXVlbmNlLCBhbmQgZGlzcG9zZSB0aGUgc3Vic2NyaXB0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNyZWF0ZSBGYWN0b3J5IG1ldGhvZCB0byBjcmVhdGUgYW4gb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gY3JlYXRlZCBWaXJ0dWFsIHRpbWUgYXQgd2hpY2ggdG8gaW52b2tlIHRoZSBmYWN0b3J5IHRvIGNyZWF0ZSBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlLlxuICAgICAqIEBwYXJhbSBzdWJzY3JpYmVkIFZpcnR1YWwgdGltZSBhdCB3aGljaCB0byBzdWJzY3JpYmUgdG8gdGhlIGNyZWF0ZWQgb2JzZXJ2YWJsZSBzZXF1ZW5jZS5cbiAgICAgKiBAcGFyYW0gZGlzcG9zZWQgVmlydHVhbCB0aW1lIGF0IHdoaWNoIHRvIGRpc3Bvc2UgdGhlIHN1YnNjcmlwdGlvbi5cbiAgICAgKiBAcmV0dXJuIE9ic2VydmVyIHdpdGggdGltZXN0YW1wZWQgcmVjb3JkaW5ncyBvZiBub3RpZmljYXRpb24gbWVzc2FnZXMgdGhhdCB3ZXJlIHJlY2VpdmVkIGR1cmluZyB0aGUgdmlydHVhbCB0aW1lIHdpbmRvdyB3aGVuIHRoZSBzdWJzY3JpcHRpb24gdG8gdGhlIHNvdXJjZSBzZXF1ZW5jZSB3YXMgYWN0aXZlLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLnN0YXJ0U2NoZWR1bGVyID0gZnVuY3Rpb24gKGNyZWF0ZUZuLCBzZXR0aW5ncykge1xuICAgICAgc2V0dGluZ3MgfHwgKHNldHRpbmdzID0ge30pO1xuICAgICAgc2V0dGluZ3MuY3JlYXRlZCA9PSBudWxsICYmIChzZXR0aW5ncy5jcmVhdGVkID0gUmVhY3RpdmVUZXN0LmNyZWF0ZWQpO1xuICAgICAgc2V0dGluZ3Muc3Vic2NyaWJlZCA9PSBudWxsICYmIChzZXR0aW5ncy5zdWJzY3JpYmVkID0gUmVhY3RpdmVUZXN0LnN1YnNjcmliZWQpO1xuICAgICAgc2V0dGluZ3MuZGlzcG9zZWQgPT0gbnVsbCAmJiAoc2V0dGluZ3MuZGlzcG9zZWQgPSBSZWFjdGl2ZVRlc3QuZGlzcG9zZWQpO1xuXG4gICAgICB2YXIgb2JzZXJ2ZXIgPSB0aGlzLmNyZWF0ZU9ic2VydmVyKCksIHNvdXJjZSwgc3Vic2NyaXB0aW9uO1xuXG4gICAgICB0aGlzLnNjaGVkdWxlQWJzb2x1dGUobnVsbCwgc2V0dGluZ3MuY3JlYXRlZCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzb3VyY2UgPSBjcmVhdGVGbigpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2NoZWR1bGVBYnNvbHV0ZShudWxsLCBzZXR0aW5ncy5zdWJzY3JpYmVkLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbiA9IHNvdXJjZS5zdWJzY3JpYmUob2JzZXJ2ZXIpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc2NoZWR1bGVBYnNvbHV0ZShudWxsLCBzZXR0aW5ncy5kaXNwb3NlZCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzdWJzY3JpcHRpb24uZGlzcG9zZSgpO1xuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuc3RhcnQoKTtcblxuICAgICAgcmV0dXJuIG9ic2VydmVyO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgaG90IG9ic2VydmFibGUgdXNpbmcgdGhlIHNwZWNpZmllZCB0aW1lc3RhbXBlZCBub3RpZmljYXRpb24gbWVzc2FnZXMgZWl0aGVyIGFzIGFuIGFycmF5IG9yIGFyZ3VtZW50cy5cbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgTm90aWZpY2F0aW9ucyB0byBzdXJmYWNlIHRocm91Z2ggdGhlIGNyZWF0ZWQgc2VxdWVuY2UgYXQgdGhlaXIgc3BlY2lmaWVkIGFic29sdXRlIHZpcnR1YWwgdGltZXMuXG4gICAgICogQHJldHVybiBIb3Qgb2JzZXJ2YWJsZSBzZXF1ZW5jZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGFzc2VydCB0aGUgdGltaW5nIG9mIHN1YnNjcmlwdGlvbnMgYW5kIG5vdGlmaWNhdGlvbnMuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUuY3JlYXRlSG90T2JzZXJ2YWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBsZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzO1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSkge1xuICAgICAgICBhcmdzID0gYXJndW1lbnRzWzBdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXJncyA9IG5ldyBBcnJheShsZW4pO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7IGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07IH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBuZXcgSG90T2JzZXJ2YWJsZSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNvbGQgb2JzZXJ2YWJsZSB1c2luZyB0aGUgc3BlY2lmaWVkIHRpbWVzdGFtcGVkIG5vdGlmaWNhdGlvbiBtZXNzYWdlcyBlaXRoZXIgYXMgYW4gYXJyYXkgb3IgYXJndW1lbnRzLlxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyBOb3RpZmljYXRpb25zIHRvIHN1cmZhY2UgdGhyb3VnaCB0aGUgY3JlYXRlZCBzZXF1ZW5jZSBhdCB0aGVpciBzcGVjaWZpZWQgdmlydHVhbCB0aW1lIG9mZnNldHMgZnJvbSB0aGUgc2VxdWVuY2Ugc3Vic2NyaXB0aW9uIHRpbWUuXG4gICAgICogQHJldHVybiBDb2xkIG9ic2VydmFibGUgc2VxdWVuY2UgdGhhdCBjYW4gYmUgdXNlZCB0byBhc3NlcnQgdGhlIHRpbWluZyBvZiBzdWJzY3JpcHRpb25zIGFuZCBub3RpZmljYXRpb25zLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmNyZWF0ZUNvbGRPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3M7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmd1bWVudHNbMF0pKSB7XG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHNbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhcmdzID0gbmV3IEFycmF5KGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHsgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTsgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBDb2xkT2JzZXJ2YWJsZSh0aGlzLCBhcmdzKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc29sdmVkIHByb21pc2Ugd2l0aCB0aGUgZ2l2ZW4gdmFsdWUgYW5kIHRpY2tzXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHRpY2tzIFRoZSBhYnNvbHV0ZSB0aW1lIG9mIHRoZSByZXNvbHV0aW9uLlxuICAgICAqIEBwYXJhbSB7QW55fSB2YWx1ZSBUaGUgdmFsdWUgdG8geWllbGQgYXQgdGhlIGdpdmVuIHRpY2suXG4gICAgICogQHJldHVybnMge01vY2tQcm9taXNlfSBBIG1vY2sgUHJvbWlzZSB3aGljaCBmdWxmaWxscyB3aXRoIHRoZSBnaXZlbiB2YWx1ZS5cbiAgICAgKi9cbiAgICBUZXN0U2NoZWR1bGVyLnByb3RvdHlwZS5jcmVhdGVSZXNvbHZlZFByb21pc2UgPSBmdW5jdGlvbiAodGlja3MsIHZhbHVlKSB7XG4gICAgICByZXR1cm4gbmV3IE1vY2tQcm9taXNlKHRoaXMsIFtSeC5SZWFjdGl2ZVRlc3Qub25OZXh0KHRpY2tzLCB2YWx1ZSksIFJ4LlJlYWN0aXZlVGVzdC5vbkNvbXBsZXRlZCh0aWNrcyldKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlamVjdGVkIHByb21pc2Ugd2l0aCB0aGUgZ2l2ZW4gcmVhc29uIGFuZCB0aWNrc1xuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aWNrcyBUaGUgYWJzb2x1dGUgdGltZSBvZiB0aGUgcmVzb2x1dGlvbi5cbiAgICAgKiBAcGFyYW0ge0FueX0gcmVhc29uIFRoZSByZWFzb24gZm9yIHJlamVjdGlvbiB0byB5aWVsZCBhdCB0aGUgZ2l2ZW4gdGljay5cbiAgICAgKiBAcmV0dXJucyB7TW9ja1Byb21pc2V9IEEgbW9jayBQcm9taXNlIHdoaWNoIHJlamVjdHMgd2l0aCB0aGUgZ2l2ZW4gcmVhc29uLlxuICAgICAqL1xuICAgIFRlc3RTY2hlZHVsZXIucHJvdG90eXBlLmNyZWF0ZVJlamVjdGVkUHJvbWlzZSA9IGZ1bmN0aW9uICh0aWNrcywgcmVhc29uKSB7XG4gICAgICByZXR1cm4gbmV3IE1vY2tQcm9taXNlKHRoaXMsIFtSeC5SZWFjdGl2ZVRlc3Qub25FcnJvcih0aWNrcywgcmVhc29uKV0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIG9ic2VydmVyIHRoYXQgcmVjb3JkcyByZWNlaXZlZCBub3RpZmljYXRpb24gbWVzc2FnZXMgYW5kIHRpbWVzdGFtcHMgdGhvc2UuXG4gICAgICogQHJldHVybiBPYnNlcnZlciB0aGF0IGNhbiBiZSB1c2VkIHRvIGFzc2VydCB0aGUgdGltaW5nIG9mIHJlY2VpdmVkIG5vdGlmaWNhdGlvbnMuXG4gICAgICovXG4gICAgVGVzdFNjaGVkdWxlci5wcm90b3R5cGUuY3JlYXRlT2JzZXJ2ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IE1vY2tPYnNlcnZlcih0aGlzKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFRlc3RTY2hlZHVsZXI7XG4gIH0pKFZpcnR1YWxUaW1lU2NoZWR1bGVyKTtcblxuICB2YXIgQW5vbnltb3VzT2JzZXJ2YWJsZSA9IFJ4LkFub255bW91c09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEFub255bW91c09ic2VydmFibGUsIF9fc3VwZXJfXyk7XG5cbiAgICAvLyBGaXggc3Vic2NyaWJlciB0byBjaGVjayBmb3IgdW5kZWZpbmVkIG9yIGZ1bmN0aW9uIHJldHVybmVkIHRvIGRlY29yYXRlIGFzIERpc3Bvc2FibGVcbiAgICBmdW5jdGlvbiBmaXhTdWJzY3JpYmVyKHN1YnNjcmliZXIpIHtcbiAgICAgIHJldHVybiBzdWJzY3JpYmVyICYmIGlzRnVuY3Rpb24oc3Vic2NyaWJlci5kaXNwb3NlKSA/IHN1YnNjcmliZXIgOlxuICAgICAgICBpc0Z1bmN0aW9uKHN1YnNjcmliZXIpID8gZGlzcG9zYWJsZUNyZWF0ZShzdWJzY3JpYmVyKSA6IGRpc3Bvc2FibGVFbXB0eTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZXREaXNwb3NhYmxlKHMsIHN0YXRlKSB7XG4gICAgICB2YXIgYWRvID0gc3RhdGVbMF0sIHNlbGYgPSBzdGF0ZVsxXTtcbiAgICAgIHZhciBzdWIgPSB0cnlDYXRjaChzZWxmLl9fc3Vic2NyaWJlKS5jYWxsKHNlbGYsIGFkbyk7XG4gICAgICBpZiAoc3ViID09PSBlcnJvck9iaiAmJiAhYWRvLmZhaWwoZXJyb3JPYmouZSkpIHsgdGhyb3dlcihlcnJvck9iai5lKTsgfVxuICAgICAgYWRvLnNldERpc3Bvc2FibGUoZml4U3Vic2NyaWJlcihzdWIpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBBbm9ueW1vdXNPYnNlcnZhYmxlKHN1YnNjcmliZSwgcGFyZW50KSB7XG4gICAgICB0aGlzLnNvdXJjZSA9IHBhcmVudDtcbiAgICAgIHRoaXMuX19zdWJzY3JpYmUgPSBzdWJzY3JpYmU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBBbm9ueW1vdXNPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHZhciBhZG8gPSBuZXcgQXV0b0RldGFjaE9ic2VydmVyKG8pLCBzdGF0ZSA9IFthZG8sIHRoaXNdO1xuXG4gICAgICBpZiAoY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZVJlcXVpcmVkKCkpIHtcbiAgICAgICAgY3VycmVudFRocmVhZFNjaGVkdWxlci5zY2hlZHVsZShzdGF0ZSwgc2V0RGlzcG9zYWJsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZXREaXNwb3NhYmxlKG51bGwsIHN0YXRlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhZG87XG4gICAgfTtcblxuICAgIHJldHVybiBBbm9ueW1vdXNPYnNlcnZhYmxlO1xuXG4gIH0oT2JzZXJ2YWJsZSkpO1xuXG4gIHZhciBBdXRvRGV0YWNoT2JzZXJ2ZXIgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEF1dG9EZXRhY2hPYnNlcnZlciwgX19zdXBlcl9fKTtcblxuICAgIGZ1bmN0aW9uIEF1dG9EZXRhY2hPYnNlcnZlcihvYnNlcnZlcikge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgICB0aGlzLm0gPSBuZXcgU2luZ2xlQXNzaWdubWVudERpc3Bvc2FibGUoKTtcbiAgICB9XG5cbiAgICB2YXIgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlID0gQXV0b0RldGFjaE9ic2VydmVyLnByb3RvdHlwZTtcblxuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5uZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5vYnNlcnZlci5vbk5leHQpLmNhbGwodGhpcy5vYnNlcnZlciwgdmFsdWUpO1xuICAgICAgaWYgKHJlc3VsdCA9PT0gZXJyb3JPYmopIHtcbiAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIHRocm93ZXIocmVzdWx0LmUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBBdXRvRGV0YWNoT2JzZXJ2ZXJQcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5vYnNlcnZlci5vbkVycm9yKS5jYWxsKHRoaXMub2JzZXJ2ZXIsIGVycik7XG4gICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgIHJlc3VsdCA9PT0gZXJyb3JPYmogJiYgdGhyb3dlcihyZXN1bHQuZSk7XG4gICAgfTtcblxuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5jb21wbGV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godGhpcy5vYnNlcnZlci5vbkNvbXBsZXRlZCkuY2FsbCh0aGlzLm9ic2VydmVyKTtcbiAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgcmVzdWx0ID09PSBlcnJvck9iaiAmJiB0aHJvd2VyKHJlc3VsdC5lKTtcbiAgICB9O1xuXG4gICAgQXV0b0RldGFjaE9ic2VydmVyUHJvdG90eXBlLnNldERpc3Bvc2FibGUgPSBmdW5jdGlvbiAodmFsdWUpIHsgdGhpcy5tLnNldERpc3Bvc2FibGUodmFsdWUpOyB9O1xuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5nZXREaXNwb3NhYmxlID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpcy5tLmdldERpc3Bvc2FibGUoKTsgfTtcblxuICAgIEF1dG9EZXRhY2hPYnNlcnZlclByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgICAgX19zdXBlcl9fLnByb3RvdHlwZS5kaXNwb3NlLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLm0uZGlzcG9zZSgpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQXV0b0RldGFjaE9ic2VydmVyO1xuICB9KEFic3RyYWN0T2JzZXJ2ZXIpKTtcblxuICB2YXIgVW5kZXJseWluZ09ic2VydmFibGUgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFVuZGVybHlpbmdPYnNlcnZhYmxlLCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIFVuZGVybHlpbmdPYnNlcnZhYmxlKG0sIHUpIHtcbiAgICAgIHRoaXMuX20gPSBtO1xuICAgICAgdGhpcy5fdSA9IHU7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICB9XG5cbiAgICBVbmRlcmx5aW5nT2JzZXJ2YWJsZS5wcm90b3R5cGUuc3Vic2NyaWJlQ29yZSA9IGZ1bmN0aW9uIChvKSB7XG4gICAgICByZXR1cm4gbmV3IEJpbmFyeURpc3Bvc2FibGUodGhpcy5fbS5nZXREaXNwb3NhYmxlKCksIHRoaXMuX3Uuc3Vic2NyaWJlKG8pKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIFVuZGVybHlpbmdPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGVCYXNlKSk7XG5cbiAgdmFyIEdyb3VwZWRPYnNlcnZhYmxlID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhHcm91cGVkT2JzZXJ2YWJsZSwgX19zdXBlcl9fKTtcbiAgICBmdW5jdGlvbiBHcm91cGVkT2JzZXJ2YWJsZShrZXksIHVuZGVybHlpbmdPYnNlcnZhYmxlLCBtZXJnZWREaXNwb3NhYmxlKSB7XG4gICAgICBfX3N1cGVyX18uY2FsbCh0aGlzKTtcbiAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgdGhpcy51bmRlcmx5aW5nT2JzZXJ2YWJsZSA9ICFtZXJnZWREaXNwb3NhYmxlID9cbiAgICAgICAgdW5kZXJseWluZ09ic2VydmFibGUgOlxuICAgICAgICBuZXcgVW5kZXJseWluZ09ic2VydmFibGUobWVyZ2VkRGlzcG9zYWJsZSwgdW5kZXJseWluZ09ic2VydmFibGUpO1xuICAgIH1cblxuICAgIEdyb3VwZWRPYnNlcnZhYmxlLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24gKG8pIHtcbiAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmdPYnNlcnZhYmxlLnN1YnNjcmliZShvKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEdyb3VwZWRPYnNlcnZhYmxlO1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogIFJlcHJlc2VudHMgYW4gb2JqZWN0IHRoYXQgaXMgYm90aCBhbiBvYnNlcnZhYmxlIHNlcXVlbmNlIGFzIHdlbGwgYXMgYW4gb2JzZXJ2ZXIuXG4gICAqICBFYWNoIG5vdGlmaWNhdGlvbiBpcyBicm9hZGNhc3RlZCB0byBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMuXG4gICAqL1xuICB2YXIgU3ViamVjdCA9IFJ4LlN1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKFN1YmplY3QsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gU3ViamVjdCgpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKFN1YmplY3QucHJvdG90eXBlLCBPYnNlcnZlci5wcm90b3R5cGUsIHtcbiAgICAgIF9zdWJzY3JpYmU6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG8pO1xuICAgICAgICAgIHJldHVybiBuZXcgSW5uZXJTdWJzY3JpcHRpb24odGhpcywgbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICBvLm9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgICAgICAgcmV0dXJuIGRpc3Bvc2FibGVFbXB0eTtcbiAgICAgICAgfVxuICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIHJldHVybiBkaXNwb3NhYmxlRW1wdHk7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKiBAcmV0dXJucyB7Qm9vbGVhbn0gSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICovXG4gICAgICBoYXNPYnNlcnZlcnM6IGZ1bmN0aW9uICgpIHsgY2hlY2tEaXNwb3NlZCh0aGlzKTsgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA+IDA7IH0sXG4gICAgICAvKipcbiAgICAgICAqIE5vdGlmaWVzIGFsbCBzdWJzY3JpYmVkIG9ic2VydmVycyBhYm91dCB0aGUgZW5kIG9mIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIG9zW2ldLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBleGNlcHRpb24uXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSBlcnJvciBUaGUgZXhjZXB0aW9uIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3NbaV0ub25FcnJvcihlcnJvcik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBhcnJpdmFsIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvc1tpXS5vbk5leHQodmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogVW5zdWJzY3JpYmUgYWxsIG9ic2VydmVycyBhbmQgcmVsZWFzZSByZXNvdXJjZXMuXG4gICAgICAgKi9cbiAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHN1YmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIG9ic2VydmVyIGFuZCBvYnNlcnZhYmxlLlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2ZXJ9IG9ic2VydmVyIFRoZSBvYnNlcnZlciB1c2VkIHRvIHNlbmQgbWVzc2FnZXMgdG8gdGhlIHN1YmplY3QuXG4gICAgICogQHBhcmFtIHtPYnNlcnZhYmxlfSBvYnNlcnZhYmxlIFRoZSBvYnNlcnZhYmxlIHVzZWQgdG8gc3Vic2NyaWJlIHRvIG1lc3NhZ2VzIHNlbnQgZnJvbSB0aGUgc3ViamVjdC5cbiAgICAgKiBAcmV0dXJucyB7U3ViamVjdH0gU3ViamVjdCBpbXBsZW1lbnRlZCB1c2luZyB0aGUgZ2l2ZW4gb2JzZXJ2ZXIgYW5kIG9ic2VydmFibGUuXG4gICAgICovXG4gICAgU3ViamVjdC5jcmVhdGUgPSBmdW5jdGlvbiAob2JzZXJ2ZXIsIG9ic2VydmFibGUpIHtcbiAgICAgIHJldHVybiBuZXcgQW5vbnltb3VzU3ViamVjdChvYnNlcnZlciwgb2JzZXJ2YWJsZSk7XG4gICAgfTtcblxuICAgIHJldHVybiBTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogIFJlcHJlc2VudHMgdGhlIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLlxuICAgKiAgVGhlIGxhc3QgdmFsdWUgYmVmb3JlIHRoZSBPbkNvbXBsZXRlZCBub3RpZmljYXRpb24sIG9yIHRoZSBlcnJvciByZWNlaXZlZCB0aHJvdWdoIE9uRXJyb3IsIGlzIHNlbnQgdG8gYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzLlxuICAgKi9cbiAgdmFyIEFzeW5jU3ViamVjdCA9IFJ4LkFzeW5jU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQXN5bmNTdWJqZWN0LCBfX3N1cGVyX18pO1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHN1YmplY3QgdGhhdCBjYW4gb25seSByZWNlaXZlIG9uZSB2YWx1ZSBhbmQgdGhhdCB2YWx1ZSBpcyBjYWNoZWQgZm9yIGFsbCBmdXR1cmUgb2JzZXJ2YXRpb25zLlxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGZ1bmN0aW9uIEFzeW5jU3ViamVjdCgpIHtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5oYXNWYWx1ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBhZGRQcm9wZXJ0aWVzKEFzeW5jU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcblxuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvKTtcbiAgICAgICAgICByZXR1cm4gbmV3IElubmVyU3Vic2NyaXB0aW9uKHRoaXMsIG8pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICBvLm9uRXJyb3IodGhpcy5lcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNWYWx1ZSkge1xuICAgICAgICAgIG8ub25OZXh0KHRoaXMudmFsdWUpO1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvLm9uQ29tcGxldGVkKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqL1xuICAgICAgaGFzT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7IGNoZWNrRGlzcG9zZWQodGhpcyk7IHJldHVybiB0aGlzLm9ic2VydmVycy5sZW5ndGggPiAwOyB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGVuZCBvZiB0aGUgc2VxdWVuY2UsIGFsc28gY2F1c2luZyB0aGUgbGFzdCByZWNlaXZlZCB2YWx1ZSB0byBiZSBzZW50IG91dCAoaWYgYW55KS5cbiAgICAgICAqL1xuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGksIGxlbjtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKCF0aGlzLmlzU3RvcHBlZCkge1xuICAgICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgICB2YXIgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoO1xuXG4gICAgICAgICAgaWYgKHRoaXMuaGFzVmFsdWUpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICB2YXIgbyA9IG9zW2ldO1xuICAgICAgICAgICAgICBvLm9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgby5vbkNvbXBsZXRlZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgb3NbaV0ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGVycm9yLlxuICAgICAgICogQHBhcmFtIHtNaXhlZH0gZXJyb3IgVGhlIEVycm9yIHRvIHNlbmQgdG8gYWxsIG9ic2VydmVycy5cbiAgICAgICAqL1xuICAgICAgb25FcnJvcjogZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICghdGhpcy5pc1N0b3BwZWQpIHtcbiAgICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBvc1tpXS5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBTZW5kcyBhIHZhbHVlIHRvIHRoZSBzdWJqZWN0LiBUaGUgbGFzdCB2YWx1ZSByZWNlaXZlZCBiZWZvcmUgc3VjY2Vzc2Z1bCB0ZXJtaW5hdGlvbiB3aWxsIGJlIHNlbnQgdG8gYWxsIHN1YnNjcmliZWQgYW5kIGZ1dHVyZSBvYnNlcnZlcnMuXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc3RvcmUgaW4gdGhlIHN1YmplY3QuXG4gICAgICAgKi9cbiAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNoZWNrRGlzcG9zZWQodGhpcyk7XG4gICAgICAgIGlmICh0aGlzLmlzU3RvcHBlZCkgeyByZXR1cm47IH1cbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLmhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuICAgICAgICovXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICAgIHRoaXMudmFsdWUgPSBudWxsO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFzeW5jU3ViamVjdDtcbiAgfShPYnNlcnZhYmxlKSk7XG5cbiAgLyoqXG4gICAqICBSZXByZXNlbnRzIGEgdmFsdWUgdGhhdCBjaGFuZ2VzIG92ZXIgdGltZS5cbiAgICogIE9ic2VydmVycyBjYW4gc3Vic2NyaWJlIHRvIHRoZSBzdWJqZWN0IHRvIHJlY2VpdmUgdGhlIGxhc3QgKG9yIGluaXRpYWwpIHZhbHVlIGFuZCBhbGwgc3Vic2VxdWVudCBub3RpZmljYXRpb25zLlxuICAgKi9cbiAgdmFyIEJlaGF2aW9yU3ViamVjdCA9IFJ4LkJlaGF2aW9yU3ViamVjdCA9IChmdW5jdGlvbiAoX19zdXBlcl9fKSB7XG4gICAgaW5oZXJpdHMoQmVoYXZpb3JTdWJqZWN0LCBfX3N1cGVyX18pO1xuICAgIGZ1bmN0aW9uIEJlaGF2aW9yU3ViamVjdCh2YWx1ZSkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzU3RvcHBlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5oYXNFcnJvciA9IGZhbHNlO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIucHJvdG90eXBlLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAoIXRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvKTtcbiAgICAgICAgICBvLm9uTmV4dCh0aGlzLnZhbHVlKTtcbiAgICAgICAgICByZXR1cm4gbmV3IElubmVyU3Vic2NyaXB0aW9uKHRoaXMsIG8pO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmhhc0Vycm9yKSB7XG4gICAgICAgICAgby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG8ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlzcG9zYWJsZUVtcHR5O1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogR2V0cyB0aGUgY3VycmVudCB2YWx1ZSBvciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICogVmFsdWUgaXMgZnJvemVuIGFmdGVyIG9uQ29tcGxldGVkIGlzIGNhbGxlZC5cbiAgICAgICAqIEFmdGVyIG9uRXJyb3IgaXMgY2FsbGVkIGFsd2F5cyB0aHJvd3MgdGhlIHNwZWNpZmllZCBleGNlcHRpb24uXG4gICAgICAgKiBBbiBleGNlcHRpb24gaXMgYWx3YXlzIHRocm93biBhZnRlciBkaXNwb3NlIGlzIGNhbGxlZC5cbiAgICAgICAqIEByZXR1cm5zIHtNaXhlZH0gVGhlIGluaXRpYWwgdmFsdWUgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3RvciB1bnRpbCBvbk5leHQgaXMgY2FsbGVkOyBhZnRlciB3aGljaCwgdGhlIGxhc3QgdmFsdWUgcGFzc2VkIHRvIG9uTmV4dC5cbiAgICAgICAqL1xuICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHsgdGhyb3dlcih0aGlzLmVycm9yKTsgfVxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqIEByZXR1cm5zIHtCb29sZWFufSBJbmRpY2F0ZXMgd2hldGhlciB0aGUgc3ViamVjdCBoYXMgb2JzZXJ2ZXJzIHN1YnNjcmliZWQgdG8gaXQuXG4gICAgICAgKi9cbiAgICAgIGhhc09ic2VydmVyczogZnVuY3Rpb24gKCkgeyBjaGVja0Rpc3Bvc2VkKHRoaXMpOyByZXR1cm4gdGhpcy5vYnNlcnZlcnMubGVuZ3RoID4gMDsgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgICAgICovXG4gICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb3NbaV0ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCA9IDA7XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIFRoZSBleGNlcHRpb24gdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb3NbaV0ub25FcnJvcihlcnJvcik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBhcnJpdmFsIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIG9zID0gY2xvbmVBcnJheSh0aGlzLm9ic2VydmVycyksIGxlbiA9IG9zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgb3NbaV0ub25OZXh0KHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogVW5zdWJzY3JpYmUgYWxsIG9ic2VydmVycyBhbmQgcmVsZWFzZSByZXNvdXJjZXMuXG4gICAgICAgKi9cbiAgICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBudWxsO1xuICAgICAgICB0aGlzLnZhbHVlID0gbnVsbDtcbiAgICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQmVoYXZpb3JTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgICogUmVwcmVzZW50cyBhbiBvYmplY3QgdGhhdCBpcyBib3RoIGFuIG9ic2VydmFibGUgc2VxdWVuY2UgYXMgd2VsbCBhcyBhbiBvYnNlcnZlci5cbiAgICogRWFjaCBub3RpZmljYXRpb24gaXMgYnJvYWRjYXN0ZWQgdG8gYWxsIHN1YnNjcmliZWQgYW5kIGZ1dHVyZSBvYnNlcnZlcnMsIHN1YmplY3QgdG8gYnVmZmVyIHRyaW1taW5nIHBvbGljaWVzLlxuICAgKi9cbiAgdmFyIFJlcGxheVN1YmplY3QgPSBSeC5SZXBsYXlTdWJqZWN0ID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcblxuICAgIHZhciBtYXhTYWZlSW50ZWdlciA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVSZW1vdmFibGVEaXNwb3NhYmxlKHN1YmplY3QsIG9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gZGlzcG9zYWJsZUNyZWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9ic2VydmVyLmRpc3Bvc2UoKTtcbiAgICAgICAgIXN1YmplY3QuaXNEaXNwb3NlZCAmJiBzdWJqZWN0Lm9ic2VydmVycy5zcGxpY2Uoc3ViamVjdC5vYnNlcnZlcnMuaW5kZXhPZihvYnNlcnZlciksIDEpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaW5oZXJpdHMoUmVwbGF5U3ViamVjdCwgX19zdXBlcl9fKTtcblxuICAgIC8qKlxuICAgICAqICBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgUmVwbGF5U3ViamVjdCBjbGFzcyB3aXRoIHRoZSBzcGVjaWZpZWQgYnVmZmVyIHNpemUsIHdpbmRvdyBzaXplIGFuZCBzY2hlZHVsZXIuXG4gICAgICogIEBwYXJhbSB7TnVtYmVyfSBbYnVmZmVyU2l6ZV0gTWF4aW11bSBlbGVtZW50IGNvdW50IG9mIHRoZSByZXBsYXkgYnVmZmVyLlxuICAgICAqICBAcGFyYW0ge051bWJlcn0gW3dpbmRvd1NpemVdIE1heGltdW0gdGltZSBsZW5ndGggb2YgdGhlIHJlcGxheSBidWZmZXIuXG4gICAgICogIEBwYXJhbSB7U2NoZWR1bGVyfSBbc2NoZWR1bGVyXSBTY2hlZHVsZXIgdGhlIG9ic2VydmVycyBhcmUgaW52b2tlZCBvbi5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSZXBsYXlTdWJqZWN0KGJ1ZmZlclNpemUsIHdpbmRvd1NpemUsIHNjaGVkdWxlcikge1xuICAgICAgdGhpcy5idWZmZXJTaXplID0gYnVmZmVyU2l6ZSA9PSBudWxsID8gbWF4U2FmZUludGVnZXIgOiBidWZmZXJTaXplO1xuICAgICAgdGhpcy53aW5kb3dTaXplID0gd2luZG93U2l6ZSA9PSBudWxsID8gbWF4U2FmZUludGVnZXIgOiB3aW5kb3dTaXplO1xuICAgICAgdGhpcy5zY2hlZHVsZXIgPSBzY2hlZHVsZXIgfHwgY3VycmVudFRocmVhZFNjaGVkdWxlcjtcbiAgICAgIHRoaXMucSA9IFtdO1xuICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcbiAgICAgIHRoaXMuaXNTdG9wcGVkID0gZmFsc2U7XG4gICAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuaGFzRXJyb3IgPSBmYWxzZTtcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgYWRkUHJvcGVydGllcyhSZXBsYXlTdWJqZWN0LnByb3RvdHlwZSwgT2JzZXJ2ZXIucHJvdG90eXBlLCB7XG4gICAgICBfc3Vic2NyaWJlOiBmdW5jdGlvbiAobykge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICB2YXIgc28gPSBuZXcgU2NoZWR1bGVkT2JzZXJ2ZXIodGhpcy5zY2hlZHVsZXIsIG8pLCBzdWJzY3JpcHRpb24gPSBjcmVhdGVSZW1vdmFibGVEaXNwb3NhYmxlKHRoaXMsIHNvKTtcblxuICAgICAgICB0aGlzLl90cmltKHRoaXMuc2NoZWR1bGVyLm5vdygpKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChzbyk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHRoaXMucS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHNvLm9uTmV4dCh0aGlzLnFbaV0udmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzRXJyb3IpIHtcbiAgICAgICAgICBzby5vbkVycm9yKHRoaXMuZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNTdG9wcGVkKSB7XG4gICAgICAgICAgc28ub25Db21wbGV0ZWQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNvLmVuc3VyZUFjdGl2ZSgpO1xuICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHN1YmplY3QgaGFzIG9ic2VydmVycyBzdWJzY3JpYmVkIHRvIGl0LlxuICAgICAgICogQHJldHVybnMge0Jvb2xlYW59IEluZGljYXRlcyB3aGV0aGVyIHRoZSBzdWJqZWN0IGhhcyBvYnNlcnZlcnMgc3Vic2NyaWJlZCB0byBpdC5cbiAgICAgICAqL1xuICAgICAgaGFzT2JzZXJ2ZXJzOiBmdW5jdGlvbiAoKSB7IGNoZWNrRGlzcG9zZWQodGhpcyk7IHJldHVybiB0aGlzLm9ic2VydmVycy5sZW5ndGggPiAwOyB9LFxuICAgICAgX3RyaW06IGZ1bmN0aW9uIChub3cpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMucS5sZW5ndGggPiB0aGlzLmJ1ZmZlclNpemUpIHtcbiAgICAgICAgICB0aGlzLnEuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5xLmxlbmd0aCA+IDAgJiYgKG5vdyAtIHRoaXMucVswXS5pbnRlcnZhbCkgPiB0aGlzLndpbmRvd1NpemUpIHtcbiAgICAgICAgICB0aGlzLnEuc2hpZnQoKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBhcnJpdmFsIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBpbiB0aGUgc2VxdWVuY2UuXG4gICAgICAgKiBAcGFyYW0ge01peGVkfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbk5leHQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHZhciBub3cgPSB0aGlzLnNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgdGhpcy5xLnB1c2goeyBpbnRlcnZhbDogbm93LCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgICAgIHRoaXMuX3RyaW0obm93KTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBvc1tpXTtcbiAgICAgICAgICBvYnNlcnZlci5vbk5leHQodmFsdWUpO1xuICAgICAgICAgIG9ic2VydmVyLmVuc3VyZUFjdGl2ZSgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLyoqXG4gICAgICAgKiBOb3RpZmllcyBhbGwgc3Vic2NyaWJlZCBvYnNlcnZlcnMgYWJvdXQgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7TWl4ZWR9IGVycm9yIFRoZSBleGNlcHRpb24gdG8gc2VuZCB0byBhbGwgb2JzZXJ2ZXJzLlxuICAgICAgICovXG4gICAgICBvbkVycm9yOiBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgY2hlY2tEaXNwb3NlZCh0aGlzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNTdG9wcGVkKSB7IHJldHVybjsgfVxuICAgICAgICB0aGlzLmlzU3RvcHBlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgdGhpcy5oYXNFcnJvciA9IHRydWU7XG4gICAgICAgIHZhciBub3cgPSB0aGlzLnNjaGVkdWxlci5ub3coKTtcbiAgICAgICAgdGhpcy5fdHJpbShub3cpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgb3MgPSBjbG9uZUFycmF5KHRoaXMub2JzZXJ2ZXJzKSwgbGVuID0gb3MubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBvc1tpXTtcbiAgICAgICAgICBvYnNlcnZlci5vbkVycm9yKGVycm9yKTtcbiAgICAgICAgICBvYnNlcnZlci5lbnN1cmVBY3RpdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9ic2VydmVycy5sZW5ndGggPSAwO1xuICAgICAgfSxcbiAgICAgIC8qKlxuICAgICAgICogTm90aWZpZXMgYWxsIHN1YnNjcmliZWQgb2JzZXJ2ZXJzIGFib3V0IHRoZSBlbmQgb2YgdGhlIHNlcXVlbmNlLlxuICAgICAgICovXG4gICAgICBvbkNvbXBsZXRlZDogZnVuY3Rpb24gKCkge1xuICAgICAgICBjaGVja0Rpc3Bvc2VkKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5pc1N0b3BwZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgIHRoaXMuaXNTdG9wcGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIG5vdyA9IHRoaXMuc2NoZWR1bGVyLm5vdygpO1xuICAgICAgICB0aGlzLl90cmltKG5vdyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBvcyA9IGNsb25lQXJyYXkodGhpcy5vYnNlcnZlcnMpLCBsZW4gPSBvcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgIHZhciBvYnNlcnZlciA9IG9zW2ldO1xuICAgICAgICAgIG9ic2VydmVyLm9uQ29tcGxldGVkKCk7XG4gICAgICAgICAgb2JzZXJ2ZXIuZW5zdXJlQWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vYnNlcnZlcnMubGVuZ3RoID0gMDtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIFVuc3Vic2NyaWJlIGFsbCBvYnNlcnZlcnMgYW5kIHJlbGVhc2UgcmVzb3VyY2VzLlxuICAgICAgICovXG4gICAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBSZXBsYXlTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICB2YXIgQW5vbnltb3VzU3ViamVjdCA9IFJ4LkFub255bW91c1N1YmplY3QgPSAoZnVuY3Rpb24gKF9fc3VwZXJfXykge1xuICAgIGluaGVyaXRzKEFub255bW91c1N1YmplY3QsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gQW5vbnltb3VzU3ViamVjdChvYnNlcnZlciwgb2JzZXJ2YWJsZSkge1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgICAgdGhpcy5vYnNlcnZhYmxlID0gb2JzZXJ2YWJsZTtcbiAgICAgIF9fc3VwZXJfXy5jYWxsKHRoaXMpO1xuICAgIH1cblxuICAgIGFkZFByb3BlcnRpZXMoQW5vbnltb3VzU3ViamVjdC5wcm90b3R5cGUsIE9ic2VydmVyLnByb3RvdHlwZSwge1xuICAgICAgX3N1YnNjcmliZTogZnVuY3Rpb24gKG8pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2YWJsZS5zdWJzY3JpYmUobyk7XG4gICAgICB9LFxuICAgICAgb25Db21wbGV0ZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbkNvbXBsZXRlZCgpO1xuICAgICAgfSxcbiAgICAgIG9uRXJyb3I6IGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyLm9uRXJyb3IoZXJyb3IpO1xuICAgICAgfSxcbiAgICAgIG9uTmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub25OZXh0KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBBbm9ueW1vdXNTdWJqZWN0O1xuICB9KE9ic2VydmFibGUpKTtcblxuICAvKipcbiAgKiBVc2VkIHRvIHBhdXNlIGFuZCByZXN1bWUgc3RyZWFtcy5cbiAgKi9cbiAgUnguUGF1c2VyID0gKGZ1bmN0aW9uIChfX3N1cGVyX18pIHtcbiAgICBpbmhlcml0cyhQYXVzZXIsIF9fc3VwZXJfXyk7XG4gICAgZnVuY3Rpb24gUGF1c2VyKCkge1xuICAgICAgX19zdXBlcl9fLmNhbGwodGhpcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGF1c2VzIHRoZSB1bmRlcmx5aW5nIHNlcXVlbmNlLlxuICAgICAqL1xuICAgIFBhdXNlci5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7IHRoaXMub25OZXh0KGZhbHNlKTsgfTtcblxuICAgIC8qKlxuICAgICogUmVzdW1lcyB0aGUgdW5kZXJseWluZyBzZXF1ZW5jZS5cbiAgICAqL1xuICAgIFBhdXNlci5wcm90b3R5cGUucmVzdW1lID0gZnVuY3Rpb24gKCkgeyB0aGlzLm9uTmV4dCh0cnVlKTsgfTtcblxuICAgIHJldHVybiBQYXVzZXI7XG4gIH0oU3ViamVjdCkpO1xuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT0gJ29iamVjdCcgJiYgZGVmaW5lLmFtZCkge1xuICAgIHJvb3QuUnggPSBSeDtcblxuICAgIGRlZmluZShmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBSeDtcbiAgICB9KTtcbiAgfSBlbHNlIGlmIChmcmVlRXhwb3J0cyAmJiBmcmVlTW9kdWxlKSB7XG4gICAgLy8gaW4gTm9kZS5qcyBvciBSaW5nb0pTXG4gICAgaWYgKG1vZHVsZUV4cG9ydHMpIHtcbiAgICAgIChmcmVlTW9kdWxlLmV4cG9ydHMgPSBSeCkuUnggPSBSeDtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJlZUV4cG9ydHMuUnggPSBSeDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gaW4gYSBicm93c2VyIG9yIFJoaW5vXG4gICAgcm9vdC5SeCA9IFJ4O1xuICB9XG5cbiAgLy8gQWxsIGNvZGUgYmVmb3JlIHRoaXMgcG9pbnQgd2lsbCBiZSBmaWx0ZXJlZCBmcm9tIHN0YWNrIHRyYWNlcy5cbiAgdmFyIHJFbmRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKTtcblxufS5jYWxsKHRoaXMpKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3J4L2Rpc3QvcnguYWxsLmpzXG4gKiogbW9kdWxlIGlkID0gNDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcclxuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcclxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0fVxyXG5cdHJldHVybiBtb2R1bGU7XHJcbn1cclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9wcm9jZXNzL2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIGhlYWRlckNvbHVtbl8xID0gcmVxdWlyZSgnLi9oZWFkZXJDb2x1bW4nKTtcclxudmFyIHNpemVGb3JCcmVha3BvaW50c18xID0gcmVxdWlyZSgnLi9zaXplRm9yQnJlYWtwb2ludHMnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5jYXJkLmhlYWRlckNvbHVtbic7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW1xyXG4gICAgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnN0cmluZy5tb2R1bGVOYW1lLFxyXG5dKVxyXG4gICAgLmRpcmVjdGl2ZShzaXplRm9yQnJlYWtwb2ludHNfMS5zaXplRm9yQnJlYWtwb2ludHNOYW1lLCBzaXplRm9yQnJlYWtwb2ludHNfMS5zaXplRm9yQnJlYWtwb2ludHMpXHJcbiAgICAuZGlyZWN0aXZlKGhlYWRlckNvbHVtbl8xLmRpcmVjdGl2ZU5hbWUsIGhlYWRlckNvbHVtbl8xLmhlYWRlckNvbHVtbilcclxuICAgIC5jb250cm9sbGVyKGhlYWRlckNvbHVtbl8xLmNvbnRyb2xsZXJOYW1lLCBoZWFkZXJDb2x1bW5fMS5IZWFkZXJDb2x1bW5Db250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYUdWaFpHVnlRMjlzZFcxdUxtMXZaSFZzWlM1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJbWhsWVdSbGNrTnZiSFZ0Ymk1dGIyUjFiR1V1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNXVUZCV1N4RFFVRkRPMEZCUldJc1NVRkJXU3hQUVVGUExGZEJRVTBzVTBGQlV5eERRVUZETEVOQlFVRTdRVUZGYmtNc05rTkJRWGxDTERoQ1FVRTRRaXhEUVVGRExFTkJRVUU3UVVGRmVFUXNOa0pCUVc5R0xHZENRVUZuUWl4RFFVRkRMRU5CUVVFN1FVRkRja2NzYlVOQlFUSkVMSE5DUVVGelFpeERRVUZETEVOQlFVRTdRVUZGZGtVc2EwSkJRVlVzUjBGQlZ5eHJSRUZCYTBRc1EwRkJRenRCUVVWdVJpeFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMR3RDUVVGVkxFVkJRVVU3U1VGRE1VSXNkVU5CUVZFc1EwRkJReXhOUVVGTkxFTkJRVU1zVlVGQlZUdERRVU14UWl4RFFVRkRPMHRCUTBFc1UwRkJVeXhEUVVGRExESkRRVUZ6UWl4RlFVRkZMSFZEUVVGclFpeERRVUZETzB0QlEzSkVMRk5CUVZNc1EwRkJReXcwUWtGQllTeEZRVUZGTERKQ1FVRlpMRU5CUVVNN1MwRkRkRU1zVlVGQlZTeERRVUZETERaQ1FVRmpMRVZCUVVVc2NVTkJRWE5DTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2NhcmQvaGVhZGVyQ29sdW1uL2hlYWRlckNvbHVtbi5tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSA0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vdHlwaW5ncy9qcXVlcnkvanF1ZXJ5LmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fdHJhbnNmb3JtID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnRyYW5zZm9ybS50cmFuc2Zvcm07XHJcbnZhciBjYXJkXzEgPSByZXF1aXJlKCcuLi9jYXJkJyk7XHJcbmV4cG9ydHMuZGlyZWN0aXZlTmFtZSA9ICdybENhcmRIZWFkZXJDb2x1bW4nO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ0NhcmRIZWFkZXJDb2x1bW5Db250cm9sbGVyJztcclxudmFyIEhlYWRlckNvbHVtbkNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gSGVhZGVyQ29sdW1uQ29udHJvbGxlcigpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy52YWx1ZSA9IF9fdHJhbnNmb3JtLmdldFZhbHVlKF90aGlzLml0ZW0sIF90aGlzLmNvbHVtbi5nZXRWYWx1ZSk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIEhlYWRlckNvbHVtbkNvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICB0aGlzLmNhcmRDb250cm9sbGVyLnJlZnJlc2guc3Vic2NyaWJlKHRoaXMudXBkYXRlKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gSGVhZGVyQ29sdW1uQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5IZWFkZXJDb2x1bW5Db250cm9sbGVyID0gSGVhZGVyQ29sdW1uQ29udHJvbGxlcjtcclxuaGVhZGVyQ29sdW1uLiRpbmplY3QgPSBbJyRjb21waWxlJ107XHJcbmZ1bmN0aW9uIGhlYWRlckNvbHVtbigkY29tcGlsZSkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIHJlcXVpcmU6IHsgY2FyZENvbnRyb2xsZXI6ICdeJyArIGNhcmRfMS5jb21wb25lbnROYW1lIH0sXHJcbiAgICAgICAgdGVtcGxhdGU6IFwiXFxuXFx0XFx0XFx0PGRpdiBybC1zaXplLWZvci1icmVha3BvaW50cz1cXFwiaGVhZGVyLmNvbHVtbi5zaXplXFxcIiBzdHlsaW5nPVxcXCI6OmhlYWRlci5jb2x1bW4uc3R5bGluZ1xcXCIgdGl0bGU9XFxcInt7OjpoZWFkZXIuY29sdW1uLmRlc2NyaXB0aW9ufX1cXFwiPlxcblxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcInRlbXBsYXRlLWNvbnRhaW5lclxcXCI+PC9kaXY+XFxuXFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0XCIsXHJcbiAgICAgICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICdoZWFkZXInLFxyXG4gICAgICAgIHNjb3BlOiB7fSxcclxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiB7XHJcbiAgICAgICAgICAgIGNvbHVtbjogJzwnLFxyXG4gICAgICAgICAgICBpdGVtOiAnPCcsXHJcbiAgICAgICAgICAgIGFsaWFzOiAnPCcsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb21waWxlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBwcmU6IGZ1bmN0aW9uIChzY29wZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWFkZXIgPSBzY29wZS5oZWFkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlci5hbGlhcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlW2hlYWRlci5hbGlhc10gPSBoZWFkZXIuaXRlbTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbHVtbiA9IGhlYWRlci5jb2x1bW47XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbHVtbi50ZW1wbGF0ZVVybCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlci5yZW5kZXJlZFRlbXBsYXRlID0gJGNvbXBpbGUoJzxkaXYgbmctaW5jbHVkZT1cIlxcJycgKyBjb2x1bW4udGVtcGxhdGVVcmwgKyAnXFwnXCI+PC9kaXY+Jykoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4udGVtcGxhdGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXIucmVuZGVyZWRUZW1wbGF0ZSA9ICRjb21waWxlKGNvbHVtbi50ZW1wbGF0ZSkoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnJlbmRlcmVkVGVtcGxhdGUgPSAkY29tcGlsZSgnPHNwYW4+e3toZWFkZXIudmFsdWV9fTwvc3Bhbj4nKShzY29wZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBvc3Q6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50LmZpbmQoJy50ZW1wbGF0ZS1jb250YWluZXInKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKHNjb3BlLmhlYWRlci5yZW5kZXJlZFRlbXBsYXRlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5oZWFkZXJDb2x1bW4gPSBoZWFkZXJDb2x1bW47XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWFHVmhaR1Z5UTI5c2RXMXVMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWFHVmhaR1Z5UTI5c2RXMXVMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxIRkZRVUZ4UlR0QlFVVnlSU3haUVVGWkxFTkJRVU03UVVGSllpdzJRMEZCZVVJc09FSkJRVGhDTEVOQlFVTXNRMEZCUVR0QlFVTjRSQ3hKUVVGUExGZEJRVmNzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRk5CUVZNc1EwRkJReXhUUVVGVExFTkJRVU03UVVGSmJFUXNjVUpCUVN0RUxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlJUbEVMSEZDUVVGaExFZEJRVmNzYjBKQlFXOUNMRU5CUVVNN1FVRkROME1zYzBKQlFXTXNSMEZCVnl3MFFrRkJORUlzUTBGQlF6dEJRVmxxUlR0SlFVRkJPMUZCUVVFc2FVSkJhMEpETzFGQlNGRXNWMEZCVFN4SFFVRnBRanRaUVVNNVFpeExRVUZKTEVOQlFVTXNTMEZCU3l4SFFVRkhMRmRCUVZjc1EwRkJReXhSUVVGUkxFTkJRVU1zUzBGQlNTeERRVUZETEVsQlFVa3NSVUZCUlN4TFFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFGQlEzQkZMRU5CUVVNc1EwRkJRVHRKUVVOR0xFTkJRVU03U1VGU1FTeDNRMEZCVHl4SFFVRlFPMUZCUTBNc1NVRkJTU3hEUVVGRExFMUJRVTBzUlVGQlJTeERRVUZETzFGQlEyUXNTVUZCU1N4RFFVRkRMR05CUVdNc1EwRkJReXhQUVVGUExFTkJRVU1zVTBGQlV5eERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRenRKUVVOd1JDeERRVUZETzBsQlMwWXNOa0pCUVVNN1FVRkJSQ3hEUVVGRExFRkJiRUpFTEVsQmEwSkRPMEZCYkVKWkxEaENRVUZ6UWl4NVFrRnJRbXhETEVOQlFVRTdRVUZGUkN4WlFVRlpMRU5CUVVNc1QwRkJUeXhIUVVGSExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTTdRVUZEY0VNc2MwSkJRVFpDTEZGQlFXbERPMGxCUXpkRUxGbEJRVmtzUTBGQlF6dEpRVU5pTEUxQlFVMHNRMEZCUXp0UlFVTk9MRkZCUVZFc1JVRkJSU3hIUVVGSE8xRkJRMklzVDBGQlR5eEZRVUZGTEVWQlFVVXNZMEZCWXl4RlFVRkZMRWRCUVVjc1IwRkJSeXh2UWtGQllTeEZRVUZGTzFGQlEyaEVMRkZCUVZFc1JVRkJSU3hyVGtGSlZEdFJRVU5FTEZWQlFWVXNSVUZCUlN4elFrRkJZenRSUVVNeFFpeFpRVUZaTEVWQlFVVXNVVUZCVVR0UlFVTjBRaXhMUVVGTExFVkJRVVVzUlVGQlJUdFJRVU5VTEdkQ1FVRm5RaXhGUVVGRk8xbEJRMnBDTEUxQlFVMHNSVUZCUlN4SFFVRkhPMWxCUTFnc1NVRkJTU3hGUVVGRkxFZEJRVWM3V1VGRFZDeExRVUZMTEVWQlFVVXNSMEZCUnp0VFFVTldPMUZCUTBRc1QwRkJUenRaUVVOT0xFMUJRVTBzUTBGQlF6dG5Ra0ZEVGl4SFFVRkhMRmxCUVVNc1MwRkJiVUk3YjBKQlEzUkNMRWxCUVVrc1RVRkJUU3hIUVVFeVFpeExRVUZMTEVOQlFVTXNUVUZCVFN4RFFVRkRPMjlDUVVOc1JDeEZRVUZGTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTeXhKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdkMEpCUXpGQ0xFdEJRVXNzUTBGQlF5eE5RVUZOTEVOQlFVTXNTMEZCU3l4RFFVRkRMRWRCUVVjc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF6dHZRa0ZEYmtNc1EwRkJRenR2UWtGRlJDeEpRVUZKTEUxQlFVMHNSMEZCYVVJc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF6dHZRa0ZEZWtNc1JVRkJSU3hEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETEZkQlFWY3NTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8zZENRVU5vUXl4TlFVRk5MRU5CUVVNc1owSkJRV2RDTEVkQlFVY3NVVUZCVVN4RFFVRkRMSEZDUVVGeFFpeEhRVUZITEUxQlFVMHNRMEZCUXl4WFFVRlhMRWRCUVVjc1dVRkJXU3hEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTTdiMEpCUTNSSExFTkJRVU03YjBKQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eFJRVUZSTEVsQlFVa3NTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenQzUWtGRGNFTXNUVUZCVFN4RFFVRkRMR2RDUVVGblFpeEhRVUZITEZGQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTTdiMEpCUXpWRUxFTkJRVU03YjBKQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN2QwSkJRMUFzVFVGQlRTeERRVUZETEdkQ1FVRm5RaXhIUVVGSExGRkJRVkVzUTBGQlF5d3JRa0ZCSzBJc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETzI5Q1FVTTFSU3hEUVVGRE8yZENRVU5HTEVOQlFVTTdaMEpCUTBRc1NVRkJTU3haUVVGRExFdEJRVzFDTEVWQlEzSkNMRTlCUVdsRE8yOUNRVU51UXl4SlFVRkpMRk5CUVZNc1IwRkJWeXhQUVVGUExFTkJRVU1zU1VGQlNTeERRVUZETEhGQ1FVRnhRaXhEUVVGRExFTkJRVU03YjBKQlF6VkVMRk5CUVZNc1EwRkJReXhOUVVGTkxFTkJRVU1zUzBGQlN5eERRVUZETEUxQlFVMHNRMEZCUXl4blFrRkJaMElzUTBGQlF5eERRVUZETzJkQ1FVTnFSQ3hEUVVGRE8yRkJRMFFzUTBGQlF6dFJRVU5JTEVOQlFVTTdTMEZEUkN4RFFVRkRPMEZCUTBnc1EwRkJRenRCUVRORFpTeHZRa0ZCV1N4bFFUSkRNMElzUTBGQlFTSjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jYXJkL2hlYWRlckNvbHVtbi9oZWFkZXJDb2x1bW4uanNcbiAqKiBtb2R1bGUgaWQgPSA0N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19zdHJpbmcgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMuc3RyaW5nO1xyXG52YXIgYnJlYWtwb2ludF8xID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vc2VydmljZXMvYnJlYWtwb2ludHMvYnJlYWtwb2ludCcpO1xyXG5leHBvcnRzLnNpemVGb3JCcmVha3BvaW50c05hbWUgPSAncmxTaXplRm9yQnJlYWtwb2ludHMnO1xyXG5zaXplRm9yQnJlYWtwb2ludHMuJGluamVjdCA9IFsnJHBhcnNlJywgX19zdHJpbmcuc2VydmljZU5hbWVdO1xyXG5mdW5jdGlvbiBzaXplRm9yQnJlYWtwb2ludHMoJHBhcnNlLCBzdHJpbmdVdGlsaXR5KSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnQScsXHJcbiAgICAgICAgbGluazogbGlua0RpcmVjdGl2ZVxyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIGxpbmtEaXJlY3RpdmUoc2NvcGUsIGVsZW1lbnQsIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICB2YXIgc2l6ZXMgPSAkcGFyc2UoYXR0cmlidXRlcy5ybFNpemVGb3JCcmVha3BvaW50cykoc2NvcGUpO1xyXG4gICAgICAgIHZhciBzdHlsaW5nID0gJHBhcnNlKGF0dHJpYnV0ZXMuc3R5bGluZykoc2NvcGUpO1xyXG4gICAgICAgIHZhciBjbGFzc2VzID0gW107XHJcbiAgICAgICAgY2xhc3Nlcy5wdXNoKGdldENvbHVtbkNsYXNzKHNpemVzLCBicmVha3BvaW50XzEueHMpKTtcclxuICAgICAgICBjbGFzc2VzLnB1c2goZ2V0Q29sdW1uQ2xhc3Moc2l6ZXMsIGJyZWFrcG9pbnRfMS5zbSkpO1xyXG4gICAgICAgIGNsYXNzZXMucHVzaChnZXRDb2x1bW5DbGFzcyhzaXplcywgYnJlYWtwb2ludF8xLm1kKSk7XHJcbiAgICAgICAgY2xhc3Nlcy5wdXNoKGdldENvbHVtbkNsYXNzKHNpemVzLCBicmVha3BvaW50XzEubGcpKTtcclxuICAgICAgICBlbGVtZW50LmFkZENsYXNzKGNsYXNzZXMuam9pbignICcpKTtcclxuICAgICAgICBpZiAoc3R5bGluZyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3Moc3R5bGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZ2V0Q29sdW1uQ2xhc3MoY29sdW1uU2l6ZXMsIGF0dHJpYnV0ZSkge1xyXG4gICAgICAgIHZhciB2YWx1ZSA9IGNvbHVtblNpemVzW2F0dHJpYnV0ZV07XHJcbiAgICAgICAgaWYgKHZhbHVlID4gMCAmJiB2YWx1ZSAhPT0gJ2hpZGRlbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0cmluZ1V0aWxpdHkuc3Vic3RpdHV0ZSgnY29sLXswfS17MX0nLCBhdHRyaWJ1dGUsIHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnaGlkZGVuLScgKyBhdHRyaWJ1dGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmV4cG9ydHMuc2l6ZUZvckJyZWFrcG9pbnRzID0gc2l6ZUZvckJyZWFrcG9pbnRzO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljMmw2WlVadmNrSnlaV0ZyY0c5cGJuUnpMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWMybDZaVVp2Y2tKeVpXRnJjRzlwYm5SekxuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEZsQlFWa3NRMEZCUXp0QlFVbGlMRFpEUVVGNVFpdzRRa0ZCT0VJc1EwRkJReXhEUVVGQk8wRkJRM2hFTEVsQlFVOHNVVUZCVVN4SFFVRkhMSFZEUVVGUkxFTkJRVU1zVFVGQlRTeERRVUZETzBGQlJXeERMREpDUVVFclFpdzJRMEZCTmtNc1EwRkJReXhEUVVGQk8wRkJSMnhGTERoQ1FVRnpRaXhIUVVGWExITkNRVUZ6UWl4RFFVRkRPMEZCVDI1RkxHdENRVUZyUWl4RFFVRkRMRTlCUVU4c1IwRkJSeXhEUVVGRExGRkJRVkVzUlVGQlJTeFJRVUZSTEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNN1FVRkRPVVFzTkVKQlFXMURMRTFCUVRaQ0xFVkJRVVVzWVVGQk5rTTdTVUZET1Vjc1dVRkJXU3hEUVVGRE8wbEJRMklzVFVGQlRTeERRVUZETzFGQlEwNHNVVUZCVVN4RlFVRkZMRWRCUVVjN1VVRkRZaXhKUVVGSkxFVkJRVVVzWVVGQllUdExRVU51UWl4RFFVRkRPMGxCUlVZc2RVSkJRWFZDTEV0QlFYRkNMRVZCUTNwRExFOUJRV2xETEVWQlEycERMRlZCUVcxRE8xRkJRM0pETEVsQlFVa3NTMEZCU3l4SFFVRnZRaXhOUVVGTkxFTkJRVU1zVlVGQlZTeERRVUZETEc5Q1FVRnZRaXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTTdVVUZETlVVc1NVRkJTU3hQUVVGUExFZEJRVmNzVFVGQlRTeERRVUZETEZWQlFWVXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF6dFJRVU40UkN4SlFVRkpMRTlCUVU4c1IwRkJWU3hGUVVGRkxFTkJRVU03VVVGRGVFSXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJReXhqUVVGakxFTkJRVU1zUzBGQlN5eEZRVUZGTEdWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkRlRU1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4alFVRmpMRU5CUVVNc1MwRkJTeXhGUVVGRkxHVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTTdVVUZEZUVNc1QwRkJUeXhEUVVGRExFbEJRVWtzUTBGQlF5eGpRVUZqTEVOQlFVTXNTMEZCU3l4RlFVRkZMR1ZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRGVFTXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJReXhqUVVGakxFTkJRVU1zUzBGQlN5eEZRVUZGTEdWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkZlRU1zVDBGQlR5eERRVUZETEZGQlFWRXNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVTTdVVUZEY0VNc1JVRkJSU3hEUVVGRExFTkJRVU1zVDBGQlR5eEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRja0lzVDBGQlR5eERRVUZETEZGQlFWRXNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJRenRSUVVNelFpeERRVUZETzBsQlJVWXNRMEZCUXp0SlFVVkVMSGRDUVVGM1FpeFhRVUUwUWl4RlFVRkZMRk5CUVdsQ08xRkJRM1JGTEVsQlFVa3NTMEZCU3l4SFFVRnZRaXhYUVVGWExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTTdVVUZEY0VRc1JVRkJSU3hEUVVGRExFTkJRVU1zUzBGQlN5eEhRVUZITEVOQlFVTXNTVUZCU1N4TFFVRkxMRXRCUVVzc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU55UXl4TlFVRk5MRU5CUVVNc1lVRkJZU3hEUVVGRExGVkJRVlVzUTBGQlF5eGhRVUZoTEVWQlFVVXNVMEZCVXl4RlFVRlZMRXRCUVVzc1EwRkJReXhEUVVGRE8xRkJRekZGTEVOQlFVTTdVVUZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRaUVVOUUxFMUJRVTBzUTBGQlF5eFRRVUZUTEVkQlFVY3NVMEZCVXl4RFFVRkRPMUZCUXpsQ0xFTkJRVU03U1VGRFJpeERRVUZETzBGQlEwWXNRMEZCUXp0QlFXcERaU3d3UWtGQmEwSXNjVUpCYVVOcVF5eERRVUZCSW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2NhcmQvaGVhZGVyQ29sdW1uL3NpemVGb3JCcmVha3BvaW50cy5qc1xuICoqIG1vZHVsZSBpZCA9IDQ4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbmV4cG9ydHMubGcgPSAnbGcnO1xyXG5leHBvcnRzLm1kID0gJ21kJztcclxuZXhwb3J0cy5zbSA9ICdzbSc7XHJcbmV4cG9ydHMueHMgPSAneHMnO1xyXG5leHBvcnRzLmFsbCA9IFtleHBvcnRzLnhzLCBleHBvcnRzLnNtLCBleHBvcnRzLm1kLCBleHBvcnRzLmxnXTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWW5KbFlXdHdiMmx1ZEM1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJbUp5WldGcmNHOXBiblF1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNXVUZCV1N4RFFVRkRPMEZCUlVZc1ZVRkJSU3hIUVVGWExFbEJRVWtzUTBGQlF6dEJRVU5zUWl4VlFVRkZMRWRCUVZjc1NVRkJTU3hEUVVGRE8wRkJRMnhDTEZWQlFVVXNSMEZCVnl4SlFVRkpMRU5CUVVNN1FVRkRiRUlzVlVGQlJTeEhRVUZYTEVsQlFVa3NRMEZCUXp0QlFVVnNRaXhYUVVGSExFZEJRV0VzUTBGQlF5eFZRVUZGTEVWQlFVVXNWVUZCUlN4RlFVRkZMRlZCUVVVc1JVRkJSU3hWUVVGRkxFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL3NlcnZpY2VzL2JyZWFrcG9pbnRzL2JyZWFrcG9pbnQuanNcbiAqKiBtb2R1bGUgaWQgPSA0OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxybC1nZW5lcmljLWNvbnRhaW5lciBzZWxlY3Rvcj1cXFwiX19jYXJkLnNlbGVjdGFibGVcXFwiPlxcclxcblxcdDx0ZW1wbGF0ZSB3aGVuLXNlbGVjdG9yPVxcXCJmYWxzZVxcXCIgZGVmYXVsdD5cXHJcXG5cXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjYXJkXFxcIiBuZy1jbGFzcz1cXFwieyAnc2VsZWN0ZWQnOiBfX2NhcmQuaXRlbS52aWV3RGF0YS5zZWxlY3RlZCB9XFxcIj5cXHJcXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJoZWFkZXJcXFwiIG5nLWNsaWNrPVxcXCJfX2NhcmQudG9nZ2xlQ29udGVudCgpXFxcIiBuZy1jbGFzcz1cXFwieyAnYWN0aXZlJzogX19jYXJkLmhhc0JvZHkgfHwgIV9fY2FyZC5wZXJtYW5lbnRGb290ZXIgfVxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwicm93XFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHQ8ZGl2IG5nLXJlcGVhdD1cXFwiY29sdW1uIGluIF9fY2FyZC5jb2x1bW5zXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8cmwtY2FyZC1oZWFkZXItY29sdW1uIGNvbHVtbj1cXFwiY29sdW1uXFxcIiBpdGVtPVxcXCJfX2NhcmQuaXRlbVxcXCIgYWxpYXM9XFxcIl9fY2FyZC5jYXJkQXNcXFwiPjwvcmwtY2FyZC1oZWFkZXItY29sdW1uPlxcclxcblxcdFxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdDwvZGl2PlxcclxcblxcclxcblxcdFxcdFxcdDxkaXYgbmctc2hvdz1cXFwiX19jYXJkLnNob3dDb250ZW50XFxcIj5cXHJcXG5cXHRcXHRcXHRcXHQ8bmctZm9ybSBybC1hdXRvc2F2ZT1cXFwiX19jYXJkLmF1dG9zYXZlTGlua1xcXCIgc2F2ZT1cXFwiX19jYXJkLnNhdmVDYXJkKClcXFwiIHNhdmUtd2hlbi1pbnZhbGlkPVxcXCJfX2NhcmQuc2F2ZVdoZW5JbnZhbGlkXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJib2R5XFxcIiBuZy1jbGFzcz1cXFwieyAnYWN0aXZlJzogX19jYXJkLmNsaWNrYWJsZSB9XFxcIiBuZy1jbGljaz1cXFwiX19jYXJkLmNsaWNrQ2FyZCgpXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjb250ZW50LXRlbXBsYXRlXFxcIj48L2Rpdj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjbGVhcmZpeFxcXCI+PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0PC9uZy1mb3JtPlxcclxcblxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdDxkaXYgbmctc2hvdz1cXFwiX19jYXJkLmhhc0Zvb3RlciAmJiAoX19jYXJkLnNob3dDb250ZW50IHx8IF9fY2FyZC5wZXJtYW5lbnRGb290ZXIpXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJmb290ZXJcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImZvb3Rlci10ZW1wbGF0ZVxcXCI+PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiY2xlYXJmaXhcXFwiPjwvZGl2PlxcclxcblxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdDwvZGl2PlxcclxcblxcdDwvdGVtcGxhdGU+XFxyXFxuXFx0PHRlbXBsYXRlIHdoZW4tc2VsZWN0b3I9XFxcInRydWVcXFwiPlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcInNlbGVjdC1ncm91cFxcXCI+XFxyXFxuXFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwic2VsZWN0LWNvbHVtblxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0PGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIiBjbGFzcz1cXFwic3RhbmQtYWxvbmUtY2hlY2tib3hcXFwiIG5nLW1vZGVsPVxcXCJfX2NhcmQuaXRlbS52aWV3RGF0YS5zZWxlY3RlZFxcXCIgbmctY2hhbmdlPVxcXCJfX2NhcmQuc2VsZWN0aW9uQ2hhbmdlZCgpXFxcIlxcclxcblxcdFxcdFxcdFxcdFxcdCAgIG5nLWRpc2FibGVkPVxcXCJfX2NhcmQuaXRlbS52aWV3RGF0YS5kaXNhYmxlZFNlbGVjdGlvblxcXCIgdGl0bGU9XFxcInt7X19jYXJkLml0ZW0udmlld0RhdGEuc2VsZWN0aW9uVGl0bGV9fVxcXCIgLz5cXHJcXG5cXHRcXHRcXHQ8L2Rpdj5cXHJcXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJzZWxlY3QtY29udGVudFxcXCI+XFxyXFxuXFxyXFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiY2FyZCBzZWxlY3RhYmxlXFxcIiBuZy1jbGFzcz1cXFwieyAnc2VsZWN0ZWQnOiBfX2NhcmQuaXRlbS52aWV3RGF0YS5zZWxlY3RlZCB9XFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJoZWFkZXIgYWN0aXZlXFxcIiBuZy1jbGljaz1cXFwiX19jYXJkLnRvZ2dsZUNvbnRlbnQoKVxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwicm93XFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQ8ZGl2IG5nLXJlcGVhdD1cXFwiY29sdW1uIGluIF9fY2FyZC5jb2x1bW5zXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQ8cmwtY2FyZC1oZWFkZXItY29sdW1uIGNvbHVtbj1cXFwiY29sdW1uXFxcIiBpdGVtPVxcXCJfX2NhcmQuaXRlbVxcXCI+PC9ybC1jYXJkLWhlYWRlci1jb2x1bW4+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFxyXFxuXFx0XFx0XFx0XFx0XFx0PGRpdiBuZy1zaG93PVxcXCJfX2NhcmQuc2hvd0NvbnRlbnRcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdDxuZy1mb3JtIHJsLWF1dG9zYXZlPVxcXCJfX2NhcmQuYXV0b3NhdmVMaW5rXFxcIiBzYXZlPVxcXCJfX2NhcmQuc2F2ZUNhcmQoKVxcXCIgc2F2ZS13aGVuLWludmFsaWQ9XFxcIl9fY2FyZC5zYXZlV2hlbkludmFsaWRcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImJvZHlcXFwiIG5nLWNsYXNzPVxcXCJ7ICdhY3RpdmUnOiBfX2NhcmQuY2xpY2thYmxlIH1cXFwiIG5nLWNsaWNrPVxcXCJfX2NhcmQuY2xpY2tDYXJkKClcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtdGVtcGxhdGVcXFwiPjwvZGl2PlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImNsZWFyZml4XFxcIj48L2Rpdj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQ8L2Rpdj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8L25nLWZvcm0+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PGRpdiBuZy1zaG93PVxcXCJfX2NhcmQuaGFzRm9vdGVyICYmIChfX2NhcmQuc2hvd0NvbnRlbnQgfHwgX19jYXJkLnBlcm1hbmVudEZvb3RlcilcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImZvb3RlclxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiZm9vdGVyLXRlbXBsYXRlXFxcIj48L2Rpdj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjbGVhcmZpeFxcXCI+PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0PC9kaXY+XFxyXFxuXFx0PC90ZW1wbGF0ZT5cXHJcXG48L3JsLWdlbmVyaWMtY29udGFpbmVyPlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvY2FyZC9jYXJkLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5jYXJkU2VhcmNoJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsQ2FyZFNlYXJjaCc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnQ2FyZFNlYXJjaENvbnRyb2xsZXInO1xyXG5leHBvcnRzLmRlZmF1bHRTZWFyY2hQbGFjZWhvbGRlciA9ICdTZWFyY2gnO1xyXG5leHBvcnRzLmRlZmF1bHRTZWFyY2hEZWxheSA9IDEwMDA7XHJcbnZhciBDYXJkU2VhcmNoQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDYXJkU2VhcmNoQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0KSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy4kdGltZW91dCA9ICR0aW1lb3V0O1xyXG4gICAgICAgIHRoaXMuc2VhcmNoTGVuZ3RoRXJyb3IgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmhhc1NlYXJjaEZpbHRlciA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBDYXJkU2VhcmNoQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmNhcmRDb250YWluZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWluU2VhcmNoRXJyb3IgPSAnWW91IG11c3QgZW50ZXIgYXQgbGVhc3Qge3tjYXJkU2VhcmNoLm1pblNlYXJjaExlbmd0aH19IGNoYXJhY3RlcnMgdG8gcGVyZm9ybSBhIHNlYXJjaCc7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoRmlsdGVyID09IG51bGwpIHtcclxuICAgICAgICAgICAgdmFyIGZpbHRlciA9IHRoaXMuY2FyZENvbnRhaW5lci5zZWFyY2hGaWx0ZXI7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoRmlsdGVyID0gZmlsdGVyO1xyXG4gICAgICAgICAgICBpZiAoZmlsdGVyID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFzU2VhcmNoRmlsdGVyID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzU2VhcmNoRmlsdGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoUGxhY2Vob2xkZXIgPSBleHBvcnRzLmRlZmF1bHRTZWFyY2hQbGFjZWhvbGRlcjtcclxuICAgICAgICAgICAgdmFyIGRhdGFTb3VyY2VfMSA9IHRoaXMuY2FyZENvbnRhaW5lci5kYXRhU291cmNlO1xyXG4gICAgICAgICAgICB2YXIgZGVsYXlfMSA9IHRoaXMuZGVsYXkgIT0gbnVsbFxyXG4gICAgICAgICAgICAgICAgPyB0aGlzLmRlbGF5XHJcbiAgICAgICAgICAgICAgICA6IGV4cG9ydHMuZGVmYXVsdFNlYXJjaERlbGF5O1xyXG4gICAgICAgICAgICB2YXIgdGltZXJfMTtcclxuICAgICAgICAgICAgdGhpcy4kc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnNlYXJjaFRleHQ7IH0sIGZ1bmN0aW9uIChzZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNlYXJjaEZpbHRlci5zZWFyY2hUZXh0ID0gc2VhcmNoO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubWluU2VhcmNoTGVuZ3RoID0gX3RoaXMuc2VhcmNoRmlsdGVyLm1pblNlYXJjaExlbmd0aDtcclxuICAgICAgICAgICAgICAgIF90aGlzLnZhbGlkYXRlU2VhcmNoTGVuZ3RoKHNlYXJjaCwgX3RoaXMubWluU2VhcmNoTGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aW1lcl8xICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy4kdGltZW91dC5jYW5jZWwodGltZXJfMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aW1lcl8xID0gX3RoaXMuJHRpbWVvdXQoZGF0YVNvdXJjZV8xLnJlZnJlc2guYmluZChkYXRhU291cmNlXzEpLCBkZWxheV8xKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuc2VhcmNoRmlsdGVyLnNlYXJjaFRleHQ7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNlYXJjaFRleHQgPSBfdGhpcy5zZWFyY2hGaWx0ZXIuc2VhcmNoVGV4dDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhcmRTZWFyY2hDb250cm9sbGVyLnByb3RvdHlwZS52YWxpZGF0ZVNlYXJjaExlbmd0aCA9IGZ1bmN0aW9uIChzZWFyY2gsIG1pbkxlbmd0aCkge1xyXG4gICAgICAgIC8vIHNob3cgZXJyb3IgaWYgc2VhcmNoIHN0cmluZyBleGlzdHMgYnV0IGlzIGJlbG93IG1pbmltdW0gc2l6ZVxyXG4gICAgICAgIHRoaXMuc2VhcmNoTGVuZ3RoRXJyb3IgPSBzZWFyY2ggIT0gbnVsbFxyXG4gICAgICAgICAgICAmJiBzZWFyY2gubGVuZ3RoID4gMFxyXG4gICAgICAgICAgICAmJiBzZWFyY2gubGVuZ3RoIDwgbWluTGVuZ3RoO1xyXG4gICAgfTtcclxuICAgIENhcmRTZWFyY2hDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckdGltZW91dCddO1xyXG4gICAgcmV0dXJuIENhcmRTZWFyY2hDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkNhcmRTZWFyY2hDb250cm9sbGVyID0gQ2FyZFNlYXJjaENvbnRyb2xsZXI7XHJcbnZhciBjYXJkU2VhcmNoID0ge1xyXG4gICAgcmVxdWlyZTogeyBjYXJkQ29udGFpbmVyOiAnP15ecmxDYXJkQ29udGFpbmVyJyB9LFxyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vY2FyZFNlYXJjaC5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnY2FyZFNlYXJjaCcsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIGRlbGF5OiAnPD9zZWFyY2hEZWxheScsXHJcbiAgICAgICAgc2VhcmNoRmlsdGVyOiAnPD8nLFxyXG4gICAgfSxcclxufTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBjYXJkU2VhcmNoKVxyXG4gICAgLmNvbnRyb2xsZXIoZXhwb3J0cy5jb250cm9sbGVyTmFtZSwgQ2FyZFNlYXJjaENvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lZMkZ5WkZObFlYSmphQzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkltTmhjbVJUWldGeVkyZ3VkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeFBRVUZQTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRlJlRUlzYTBKQlFWVXNSMEZCVnl3eVEwRkJNa01zUTBGQlF6dEJRVU5xUlN4eFFrRkJZU3hIUVVGWExHTkJRV01zUTBGQlF6dEJRVU4yUXl4elFrRkJZeXhIUVVGWExITkNRVUZ6UWl4RFFVRkRPMEZCUldoRUxHZERRVUYzUWl4SFFVRlhMRkZCUVZFc1EwRkJRenRCUVVNMVF5d3dRa0ZCYTBJc1IwRkJWeXhKUVVGSkxFTkJRVU03UVVGTk4wTTdTVUZqUXl3NFFrRkJiMElzVFVGQmMwSXNSVUZET1VJc1VVRkJhVU03VVVGRWVrSXNWMEZCVFN4SFFVRk9MRTFCUVUwc1EwRkJaMEk3VVVGRE9VSXNZVUZCVVN4SFFVRlNMRkZCUVZFc1EwRkJlVUk3VVVGVU4wTXNjMEpCUVdsQ0xFZEJRVmtzUzBGQlN5eERRVUZETzFGQlJXNURMRzlDUVVGbExFZEJRVmtzU1VGQlNTeERRVUZETzBsQlQyZENMRU5CUVVNN1NVRkZha1FzYzBOQlFVOHNSMEZCVUR0UlFVRkJMR2xDUVRaRFF6dFJRVFZEUVN4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zWVVGQllTeEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRhRU1zVFVGQlRTeERRVUZETzFGQlExSXNRMEZCUXp0UlFVVkVMRWxCUVVrc1EwRkJReXhqUVVGakxFZEJRVWNzZFVaQlFYVkdMRU5CUVVNN1VVRkZPVWNzUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRmxCUVZrc1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF5OUNMRWxCUVVrc1RVRkJUU3hIUVVFclF5eEpRVUZKTEVOQlFVTXNZVUZCWVN4RFFVRkRMRmxCUVZrc1EwRkJRenRaUVVONlJpeEpRVUZKTEVOQlFVTXNXVUZCV1N4SFFVRkhMRTFCUVUwc1EwRkJRenRaUVVVelFpeEZRVUZGTEVOQlFVTXNRMEZCUXl4TlFVRk5MRWxCUVVrc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF6dG5Ra0ZEY0VJc1NVRkJTU3hEUVVGRExHVkJRV1VzUjBGQlJ5eExRVUZMTEVOQlFVTTdXVUZET1VJc1EwRkJRenRSUVVOR0xFTkJRVU03VVVGRlJDeEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1pVRkJaU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU14UWl4SlFVRkpMRU5CUVVNc2FVSkJRV2xDTEVkQlFVY3NaME5CUVhkQ0xFTkJRVU03V1VGRmJFUXNTVUZCU1N4WlFVRlZMRWRCUVhGQ0xFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNWVUZCVlN4RFFVRkRPMWxCUldwRkxFbEJRVWtzVDBGQlN5eEhRVUZYTEVsQlFVa3NRMEZCUXl4TFFVRkxMRWxCUVVrc1NVRkJTVHRyUWtGRGJrTXNTVUZCU1N4RFFVRkRMRXRCUVVzN2EwSkJRMVlzTUVKQlFXdENMRU5CUVVNN1dVRkZkRUlzU1VGQlNTeFBRVUUyUWl4RFFVRkRPMWxCUld4RExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMR05CUVdkQ0xFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxGVkJRVU1zVFVGQll6dG5Ra0ZETlVVc1MwRkJTU3hEUVVGRExGbEJRVmtzUTBGQlF5eFZRVUZWTEVkQlFVY3NUVUZCVFN4RFFVRkRPMmRDUVVOMFF5eExRVUZKTEVOQlFVTXNaVUZCWlN4SFFVRkhMRXRCUVVrc1EwRkJReXhaUVVGWkxFTkJRVU1zWlVGQlpTeERRVUZETzJkQ1FVVjZSQ3hMUVVGSkxFTkJRVU1zYjBKQlFXOUNMRU5CUVVNc1RVRkJUU3hGUVVGRkxFdEJRVWtzUTBGQlF5eGxRVUZsTEVOQlFVTXNRMEZCUXp0blFrRkZlRVFzUlVGQlJTeERRVUZETEVOQlFVTXNUMEZCU3l4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03YjBKQlEyNUNMRXRCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zVFVGQlRTeERRVUZETEU5QlFVc3NRMEZCUXl4RFFVRkRPMmRDUVVNM1FpeERRVUZETzJkQ1FVVkVMRTlCUVVzc1IwRkJSeXhMUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZQTEZsQlFWVXNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExGbEJRVlVzUTBGQlF5eEZRVUZGTEU5QlFVc3NRMEZCUXl4RFFVRkRPMWxCUTNwRkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEwZ3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU03WjBKQlEyeENMRTFCUVUwc1EwRkJReXhMUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEZWQlFWVXNRMEZCUXp0WlFVTnlReXhEUVVGRExFVkJRVU03WjBKQlEwUXNTMEZCU1N4RFFVRkRMRlZCUVZVc1IwRkJSeXhMUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEZWQlFWVXNRMEZCUXp0WlFVTm9SQ3hEUVVGRExFTkJRVU1zUTBGQlF6dFJRVU5LTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCUlU4c2JVUkJRVzlDTEVkQlFUVkNMRlZCUVRaQ0xFMUJRV01zUlVGQlJTeFRRVUZwUWp0UlFVTTNSQ3dyUkVGQkswUTdVVUZETDBRc1NVRkJTU3hEUVVGRExHbENRVUZwUWl4SFFVRkhMRTFCUVUwc1NVRkJTU3hKUVVGSk8yVkJRemxDTEUxQlFVMHNRMEZCUXl4TlFVRk5MRWRCUVVjc1EwRkJRenRsUVVOcVFpeE5RVUZOTEVOQlFVTXNUVUZCVFN4SFFVRkhMRk5CUVZNc1EwRkJRenRKUVVOd1F5eERRVUZETzBsQmVFUk5MRFJDUVVGUExFZEJRV0VzUTBGQlF5eFJRVUZSTEVWQlFVVXNWVUZCVlN4RFFVRkRMRU5CUVVNN1NVRjVSRzVFTERKQ1FVRkRPMEZCUVVRc1EwRkJReXhCUVhSRlJDeEpRWE5GUXp0QlFYUkZXU3cwUWtGQmIwSXNkVUpCYzBWb1F5eERRVUZCTzBGQlJVUXNTVUZCU1N4VlFVRlZMRWRCUVRoQ08wbEJRek5ETEU5QlFVOHNSVUZCUlN4RlFVRkZMR0ZCUVdFc1JVRkJSU3h2UWtGQmIwSXNSVUZCUlR0SlFVTm9SQ3hSUVVGUkxFVkJRVVVzVDBGQlR5eERRVUZETEcxQ1FVRnRRaXhEUVVGRE8wbEJRM1JETEZWQlFWVXNSVUZCUlN4elFrRkJZenRKUVVNeFFpeFpRVUZaTEVWQlFVVXNXVUZCV1R0SlFVTXhRaXhSUVVGUkxFVkJRVVU3VVVGRFZDeExRVUZMTEVWQlFVVXNaVUZCWlR0UlFVTjBRaXhaUVVGWkxFVkJRVVVzU1VGQlNUdExRVU5zUWp0RFFVTkVMRU5CUVVNN1FVRkZSaXhQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVc1JVRkJSU3hEUVVGRE8wdEJRelZDTEZOQlFWTXNRMEZCUXl4eFFrRkJZU3hGUVVGRkxGVkJRVlVzUTBGQlF6dExRVU53UXl4VlFVRlZMRU5CUVVNc2MwSkJRV01zUlVGQlJTeHZRa0ZCYjBJc1EwRkJReXhEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jYXJkU2VhcmNoL2NhcmRTZWFyY2guanNcbiAqKiBtb2R1bGUgaWQgPSA1MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImlucHV0LWdyb3VwXFxcIiBuZy1zaG93PVxcXCJjYXJkU2VhcmNoLmhhc1NlYXJjaEZpbHRlclxcXCIgbmctY2xhc3M9XFxcInsgJ2hhcy1lcnJvcic6IGNhcmRTZWFyY2guc2VhcmNoTGVuZ3RoRXJyb3IgfVxcXCI+XFxyXFxuXFx0PGlucHV0IGNsYXNzPVxcXCJmb3JtLWNvbnRyb2xcXFwiIHR5cGU9XFxcInRleHRcXFwiIHBsYWNlaG9sZGVyPVxcXCJ7e2NhcmRTZWFyY2guc2VhcmNoUGxhY2Vob2xkZXJ9fVxcXCIgbmctbW9kZWw9XFxcImNhcmRTZWFyY2guc2VhcmNoVGV4dFxcXCJcXHJcXG5cXHRcXHQgICBybC1wb3BvdmVyPVxcXCJjYXJkU2VhcmNoLm1pblNlYXJjaEVycm9yXFxcIiBwb3BvdmVyLXRyaWdnZXI9XFxcIm1vdXNlZW50ZXJcXFwiIHBvcG92ZXItZW5hYmxlPVxcXCJjYXJkU2VhcmNoLnNlYXJjaExlbmd0aEVycm9yXFxcIiAvPlxcclxcblxcdDxkaXYgY2xhc3M9XFxcImlucHV0LWdyb3VwLWJ0blxcXCI+XFxyXFxuXFx0XFx0PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHRcXFwiIG5nLWRpc2FibGVkPVxcXCJjYXJkU2VhcmNoLnNlYXJjaFRleHQgfCBpc0VtcHR5XFxcIiBuZy1jbGljaz1cXFwiY2FyZFNlYXJjaC5zZWFyY2hUZXh0ID0gbnVsbFxcXCI+XFxyXFxuXFx0XFx0XFx0PGkgY2xhc3M9XFxcImZhIGZhLXRpbWVzXFxcIj48L2k+XFxyXFxuXFx0XFx0PC9idXR0b24+XFxyXFxuXFx0PC9kaXY+XFxyXFxuPC9kaXY+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jYXJkU2VhcmNoL2NhcmRTZWFyY2guaHRtbFxuICoqIG1vZHVsZSBpZCA9IDUyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi90eXBpbmdzL2pxdWVyeS9qcXVlcnkuZC50cycgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIHNvcnREaXJlY3Rpb25fMSA9IHJlcXVpcmUoJy4uL3NvcnRzL3NvcnREaXJlY3Rpb24nKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5jb2x1bW5IZWFkZXInO1xyXG5leHBvcnRzLmRpcmVjdGl2ZU5hbWUgPSAncmxDb2x1bW5IZWFkZXInO1xyXG5jYXJkQ29sdW1uSGVhZGVyLiRpbmplY3QgPSBbJyRjb21waWxlJ107XHJcbmZ1bmN0aW9uIGNhcmRDb2x1bW5IZWFkZXIoJGNvbXBpbGUpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICB0ZW1wbGF0ZTogXCJcXG5cXHRcXHRcXHQ8ZGl2IHJsLXNpemUtZm9yLWJyZWFrcG9pbnRzPVxcXCJjb2x1bW4uc2l6ZVxcXCIgbmctY2xpY2s9XFxcInNvcnQoKVxcXCIgdGl0bGU9XFxcInt7Ojpjb2x1bW4uZGVzY3JpcHRpb259fVxcXCJcXG5cXHRcXHRcXHRcXHRcXHRjbGFzcz1cXFwiY29sdW1uLWhlYWRlclxcXCI+XFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwidGVtcGxhdGUtY29udGFpbmVyXFxcIj48L2Rpdj5cXG5cXHRcXHRcXHRcXHQ8aSBuZy1zaG93PVxcXCJzb3J0aW5nID09PSBzb3J0RGlyZWN0aW9uLmFzY2VuZGluZ1xcXCIgY2xhc3M9XFxcImZhIGZhLXNvcnQtYXNjXFxcIj48L2k+XFxuXFx0XFx0XFx0XFx0PGkgbmctc2hvdz1cXFwic29ydGluZyA9PT0gc29ydERpcmVjdGlvbi5kZXNjZW5kaW5nXFxcIiBjbGFzcz1cXFwiZmEgZmEtc29ydC1kZXNjXFxcIj48L2k+XFxuXFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0XCIsXHJcbiAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgY29sdW1uOiAnPScsXHJcbiAgICAgICAgICAgIHNvcnRpbmc6ICc9JyxcclxuICAgICAgICAgICAgc29ydDogJyYnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY29tcGlsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcHJlOiBmdW5jdGlvbiAoc2NvcGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29sdW1uID0gc2NvcGUuY29sdW1uO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb2x1bW4uaGVhZGVyVGVtcGxhdGVVcmwgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5yZW5kZXJlZFRlbXBsYXRlID0gJGNvbXBpbGUoJzxkaXYgbmctaW5jbHVkZT1cIlxcJycgKyBjb2x1bW4uaGVhZGVyVGVtcGxhdGVVcmwgKyAnXFwnXCI+PC9kaXY+Jykoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChjb2x1bW4uaGVhZGVyVGVtcGxhdGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5yZW5kZXJlZFRlbXBsYXRlID0gJGNvbXBpbGUoY29sdW1uLmhlYWRlclRlbXBsYXRlKShzY29wZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5yZW5kZXJlZFRlbXBsYXRlID0gKCc8aDU+JyArIGNvbHVtbi5sYWJlbCArICc8L2g1Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHBvc3Q6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY29wZS5jb2x1bW4uZGlzcGxheUNvbHVtbkhlYWRlciAhPSBudWxsICYmIHNjb3BlLmNvbHVtbi5kaXNwbGF5Q29sdW1uSGVhZGVyID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBlbGVtZW50LmZpbmQoJy50ZW1wbGF0ZS1jb250YWluZXInKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kKHNjb3BlLnJlbmRlcmVkVGVtcGxhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLnNvcnREaXJlY3Rpb24gPSBzb3J0RGlyZWN0aW9uXzEuU29ydERpcmVjdGlvbjtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmNhcmRDb2x1bW5IZWFkZXIgPSBjYXJkQ29sdW1uSGVhZGVyO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmRpcmVjdGl2ZShleHBvcnRzLmRpcmVjdGl2ZU5hbWUsIGNhcmRDb2x1bW5IZWFkZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lZMjlzZFcxdVNHVmhaR1Z5TG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lZMjlzZFcxdVNHVmhaR1Z5TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMR3RGUVVGclJUdEJRVVZzUlN4WlFVRlpMRU5CUVVNN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVVnVReXc0UWtGQkswTXNkMEpCUVhkQ0xFTkJRVU1zUTBGQlFUdEJRVWMzUkN4clFrRkJWU3hIUVVGWExEWkRRVUUyUXl4RFFVRkRPMEZCUTI1RkxIRkNRVUZoTEVkQlFWY3NaMEpCUVdkQ0xFTkJRVU03UVVGWGNFUXNaMEpCUVdkQ0xFTkJRVU1zVDBGQlR5eEhRVUZITEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNN1FVRkRlRU1zTUVKQlFXbERMRkZCUVdsRE8wbEJRMnBGTEZsQlFWa3NRMEZCUXp0SlFVTmlMRTFCUVUwc1EwRkJRenRSUVVOT0xGRkJRVkVzUlVGQlJTeEhRVUZITzFGQlEySXNVVUZCVVN4RlFVRkZMRFpaUVU5VU8xRkJRMFFzUzBGQlN5eEZRVUZGTzFsQlEwNHNUVUZCVFN4RlFVRkZMRWRCUVVjN1dVRkRXQ3hQUVVGUExFVkJRVVVzUjBGQlJ6dFpRVU5hTEVsQlFVa3NSVUZCUlN4SFFVRkhPMU5CUTFRN1VVRkRSQ3hQUVVGUE8xbEJRMDRzVFVGQlRTeERRVUZETzJkQ1FVTk9MRWRCUVVjc1dVRkJReXhMUVVFMlFqdHZRa0ZEYUVNc1NVRkJTU3hOUVVGTkxFZEJRV2xDTEV0QlFVc3NRMEZCUXl4TlFVRk5MRU5CUVVNN2IwSkJRM2hETEVWQlFVVXNRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhwUWtGQmFVSXNTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8zZENRVU4wUXl4TFFVRkxMRU5CUVVNc1owSkJRV2RDTEVkQlFVY3NVVUZCVVN4RFFVRkRMSEZDUVVGeFFpeEhRVUZITEUxQlFVMHNRMEZCUXl4cFFrRkJhVUlzUjBGQlJ5eFpRVUZaTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenR2UWtGRE0wY3NRMEZCUXp0dlFrRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMR05CUVdNc1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzNkQ1FVTXhReXhMUVVGTExFTkJRVU1zWjBKQlFXZENMRWRCUVVjc1VVRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF5eGpRVUZqTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenR2UWtGRGFrVXNRMEZCUXp0dlFrRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dDNRa0ZEVUN4TFFVRkxMRU5CUVVNc1owSkJRV2RDTEVkQlFWRXNRMEZCUXl4TlFVRk5MRWRCUVVjc1RVRkJUU3hEUVVGRExFdEJRVXNzUjBGQlJ5eE5RVUZOTEVOQlFVTXNRMEZCUXp0dlFrRkRhRVVzUTBGQlF6dG5Ra0ZEUml4RFFVRkRPMmRDUVVORUxFbEJRVWtzV1VGQlF5eExRVUUyUWl4RlFVRkZMRTlCUVdsRE8yOUNRVU53UlN4RlFVRkZMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zVFVGQlRTeERRVUZETEcxQ1FVRnRRaXhKUVVGSkxFbEJRVWtzU1VGQlNTeExRVUZMTEVOQlFVTXNUVUZCVFN4RFFVRkRMRzFDUVVGdFFpeExRVUZMTEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNN2QwSkJRelZHTEU5QlFVOHNRMEZCUXl4TlFVRk5MRVZCUVVVc1EwRkJRenQzUWtGRGFrSXNUVUZCVFN4RFFVRkRPMjlDUVVOU0xFTkJRVU03YjBKQlEwUXNTVUZCU1N4VFFVRlRMRWRCUVZjc1QwRkJUeXhEUVVGRExFbEJRVWtzUTBGQlF5eHhRa0ZCY1VJc1EwRkJReXhEUVVGRE8yOUNRVU0xUkN4VFFVRlRMRU5CUVVNc1RVRkJUU3hEUVVGRExFdEJRVXNzUTBGQlF5eG5Ra0ZCWjBJc1EwRkJReXhEUVVGRE8yOUNRVVY2UXl4TFFVRkxMRU5CUVVNc1lVRkJZU3hIUVVGSExEWkNRVUZoTEVOQlFVTTdaMEpCUlhKRExFTkJRVU03WVVGRFJDeERRVUZETzFGQlEwZ3NRMEZCUXp0TFFVTkVMRU5CUVVNN1FVRkRTQ3hEUVVGRE8wRkJNME5sTEhkQ1FVRm5RaXh0UWtFeVF5OUNMRU5CUVVFN1FVRkZSQ3hQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVc1JVRkJSU3hEUVVGRE8wdEJRelZDTEZOQlFWTXNRMEZCUXl4eFFrRkJZU3hGUVVGRkxHZENRVUZuUWl4RFFVRkRMRU5CUVVNaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9jb2x1bW5IZWFkZXIvY29sdW1uSGVhZGVyLmpzXG4gKiogbW9kdWxlIGlkID0gNTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIFNvcnREaXJlY3Rpb24gPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU29ydERpcmVjdGlvbih2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIFNvcnREaXJlY3Rpb24udG9nZ2xlID0gZnVuY3Rpb24gKGRpcmVjdGlvbikge1xyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09IFNvcnREaXJlY3Rpb24uYXNjZW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTb3J0RGlyZWN0aW9uLmRlc2NlbmRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGRpcmVjdGlvbiA9PT0gU29ydERpcmVjdGlvbi5kZXNjZW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTb3J0RGlyZWN0aW9uLm5vbmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gU29ydERpcmVjdGlvbi5hc2NlbmRpbmc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNvcnREaXJlY3Rpb24uZ2V0RnVsbE5hbWUgPSBmdW5jdGlvbiAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgICAgIGlmIChkaXJlY3Rpb24gPT09IFNvcnREaXJlY3Rpb24uYXNjZW5kaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnYXNjZW5kaW5nJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSBTb3J0RGlyZWN0aW9uLmRlc2NlbmRpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuICdkZXNjZW5kaW5nJztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnbm9uZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNvcnREaXJlY3Rpb24ubm9uZSA9IG5ldyBTb3J0RGlyZWN0aW9uKDApO1xyXG4gICAgU29ydERpcmVjdGlvbi5hc2NlbmRpbmcgPSBuZXcgU29ydERpcmVjdGlvbigxKTtcclxuICAgIFNvcnREaXJlY3Rpb24uZGVzY2VuZGluZyA9IG5ldyBTb3J0RGlyZWN0aW9uKDIpO1xyXG4gICAgcmV0dXJuIFNvcnREaXJlY3Rpb247XHJcbn0oKSk7XHJcbmV4cG9ydHMuU29ydERpcmVjdGlvbiA9IFNvcnREaXJlY3Rpb247XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWMyOXlkRVJwY21WamRHbHZiaTVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkluTnZjblJFYVhKbFkzUnBiMjR1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNXVUZCV1N4RFFVRkRPMEZCVVdJN1NVRkxReXgxUWtGQmIwSXNTMEZCWVR0UlFVRmlMRlZCUVVzc1IwRkJUQ3hMUVVGTExFTkJRVkU3U1VGQlNTeERRVUZETzBsQlJYaENMRzlDUVVGTkxFZEJRWEJDTEZWQlFYRkNMRk5CUVhkQ08xRkJRelZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRk5CUVZNc1MwRkJTeXhoUVVGaExFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTXpReXhOUVVGTkxFTkJRVU1zWVVGQllTeERRVUZETEZWQlFWVXNRMEZCUXp0UlFVTnFReXhEUVVGRE8xRkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRk5CUVZNc1MwRkJTeXhoUVVGaExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTnVSQ3hOUVVGTkxFTkJRVU1zWVVGQllTeERRVUZETEVsQlFVa3NRMEZCUXp0UlFVTXpRaXhEUVVGRE8xRkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdXVUZEVUN4TlFVRk5MRU5CUVVNc1lVRkJZU3hEUVVGRExGTkJRVk1zUTBGQlF6dFJRVU5vUXl4RFFVRkRPMGxCUTBZc1EwRkJRenRKUVVWaExIbENRVUZYTEVkQlFYcENMRlZCUVRCQ0xGTkJRWGRDTzFGQlEycEVMRmxCUVZrc1EwRkJRenRSUVVOaUxFVkJRVVVzUTBGQlF5eERRVUZETEZOQlFWTXNTMEZCU3l4aFFVRmhMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU16UXl4TlFVRk5MRU5CUVVNc1YwRkJWeXhEUVVGRE8xRkJRM0JDTEVOQlFVTTdVVUZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zVTBGQlV5eExRVUZMTEdGQlFXRXNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRMjVFTEUxQlFVMHNRMEZCUXl4WlFVRlpMRU5CUVVNN1VVRkRja0lzUTBGQlF6dFJRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTFBc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF6dFJRVU5tTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCZWtKaExHdENRVUZKTEVkQlFXdENMRWxCUVVrc1lVRkJZU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzBsQlF6TkRMSFZDUVVGVExFZEJRV3RDTEVsQlFVa3NZVUZCWVN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wbEJRMmhFTEhkQ1FVRlZMRWRCUVd0Q0xFbEJRVWtzWVVGQllTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMGxCZDBKb1JTeHZRa0ZCUXp0QlFVRkVMRU5CUVVNc1FVRXpRa1FzU1VFeVFrTTdRVUV6UWxrc2NVSkJRV0VzWjBKQk1rSjZRaXhEUVVGQkluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9zb3J0cy9zb3J0RGlyZWN0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gNTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBzb3J0c19tb2R1bGVfMSA9IHJlcXVpcmUoJy4uL3NvcnRzL3NvcnRzLm1vZHVsZScpO1xyXG52YXIgY2xpZW50U2VydmVyRGF0YVNvdXJjZSA9IHJlcXVpcmUoJy4vY2xpZW50U2VydmVyRGF0YVNvdXJjZS9jbGllbnRTZXJ2ZXJEYXRhU291cmNlLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5jbGllbnRTZXJ2ZXJEYXRhU291cmNlID0gY2xpZW50U2VydmVyRGF0YVNvdXJjZTtcclxudmFyIGRhdGFQYWdlciA9IHJlcXVpcmUoJy4vZGF0YVBhZ2VyL2RhdGFQYWdlci5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMuZGF0YVBhZ2VyID0gZGF0YVBhZ2VyO1xyXG52YXIgZGF0YVNlcnZpY2VEYXRhU291cmNlID0gcmVxdWlyZSgnLi9kYXRhU2VydmljZURhdGFTb3VyY2UvZGF0YVNlcnZpY2VEYXRhU291cmNlLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5kYXRhU2VydmljZURhdGFTb3VyY2UgPSBkYXRhU2VydmljZURhdGFTb3VyY2U7XHJcbnZhciBzZXJ2ZXJTaWRlRGF0YVNvdXJjZSA9IHJlcXVpcmUoJy4vc2VydmVyU2lkZURhdGFTb3VyY2Uvc2VydmVyU2lkZURhdGFTb3VyY2Uuc2VydmljZScpO1xyXG5leHBvcnRzLnNlcnZlclNpZGVEYXRhU291cmNlID0gc2VydmVyU2lkZURhdGFTb3VyY2U7XHJcbnZhciBzaW1wbGVEYXRhU291cmNlID0gcmVxdWlyZSgnLi9zaW1wbGVEYXRhU291cmNlL3NpbXBsZURhdGFTb3VyY2Uuc2VydmljZScpO1xyXG5leHBvcnRzLnNpbXBsZURhdGFTb3VyY2UgPSBzaW1wbGVEYXRhU291cmNlO1xyXG52YXIgc21hcnREYXRhU291cmNlID0gcmVxdWlyZSgnLi9zbWFydERhdGFTb3VyY2Uvc21hcnREYXRhU291cmNlLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5zbWFydERhdGFTb3VyY2UgPSBzbWFydERhdGFTb3VyY2U7XHJcbnZhciBldmVudHMgPSByZXF1aXJlKCcuL2RhdGFTb3VyY2VFdmVudHMnKTtcclxuZXhwb3J0cy5ldmVudHMgPSBldmVudHM7XHJcbnZhciBkYXRhU291cmNlUHJvY2Vzc29yID0gcmVxdWlyZSgnLi9kYXRhU291cmNlUHJvY2Vzc29yLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5kYXRhU291cmNlUHJvY2Vzc29yID0gZGF0YVNvdXJjZVByb2Nlc3NvcjtcclxudmFyIGRhdGFTb3VyY2VCYXNlID0gcmVxdWlyZSgnLi9kYXRhU291cmNlQmFzZS5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMuZGF0YVNvdXJjZUJhc2UgPSBkYXRhU291cmNlQmFzZTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5kYXRhU291cmNlcyc7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW1xyXG4gICAgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdC5tb2R1bGVOYW1lLFxyXG4gICAgc29ydHNfbW9kdWxlXzEubW9kdWxlTmFtZSxcclxuICAgIGNsaWVudFNlcnZlckRhdGFTb3VyY2UubW9kdWxlTmFtZSxcclxuICAgIGRhdGFQYWdlci5tb2R1bGVOYW1lLFxyXG4gICAgZGF0YVNlcnZpY2VEYXRhU291cmNlLm1vZHVsZU5hbWUsXHJcbiAgICBzZXJ2ZXJTaWRlRGF0YVNvdXJjZS5tb2R1bGVOYW1lLFxyXG4gICAgc2ltcGxlRGF0YVNvdXJjZS5tb2R1bGVOYW1lLFxyXG4gICAgc21hcnREYXRhU291cmNlLm1vZHVsZU5hbWUsXHJcbl0pXHJcbiAgICAuc2VydmljZShkYXRhU291cmNlUHJvY2Vzc29yLnByb2Nlc3NvclNlcnZpY2VOYW1lLCBkYXRhU291cmNlUHJvY2Vzc29yLkRhdGFTb3VyY2VQcm9jZXNzb3IpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laR0YwWVZOdmRYSmpaWE11Ylc5a2RXeGxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaVpHRjBZVk52ZFhKalpYTXViVzlrZFd4bExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEZsQlFWa3NRMEZCUXp0QlFVVmlMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlEyNURMRFpEUVVGNVFpdzRRa0ZCT0VJc1EwRkJReXhEUVVGQk8wRkJSWGhFTERaQ1FVRTRReXgxUWtGQmRVSXNRMEZCUXl4RFFVRkJPMEZCUTNSRkxFbEJRVmtzYzBKQlFYTkNMRmRCUVUwc2VVUkJRWGxFTEVOQlFVTXNRMEZCUVR0QlFWZHFSeXc0UWtGQmMwSTdRVUZXZGtJc1NVRkJXU3hUUVVGVExGZEJRVTBzSzBKQlFTdENMRU5CUVVNc1EwRkJRVHRCUVZjeFJDeHBRa0ZCVXp0QlFWWldMRWxCUVZrc2NVSkJRWEZDTEZkQlFVMHNkVVJCUVhWRUxFTkJRVU1zUTBGQlFUdEJRVmM1Uml3MlFrRkJjVUk3UVVGV2RFSXNTVUZCV1N4dlFrRkJiMElzVjBGQlRTeHhSRUZCY1VRc1EwRkJReXhEUVVGQk8wRkJWek5HTERSQ1FVRnZRanRCUVZaeVFpeEpRVUZaTEdkQ1FVRm5RaXhYUVVGTkxEWkRRVUUyUXl4RFFVRkRMRU5CUVVFN1FVRlhMMFVzZDBKQlFXZENPMEZCVm1wQ0xFbEJRVmtzWlVGQlpTeFhRVUZOTERKRFFVRXlReXhEUVVGRExFTkJRVUU3UVVGWE5VVXNkVUpCUVdVN1FVRldhRUlzU1VGQldTeE5RVUZOTEZkQlFVMHNiMEpCUVc5Q0xFTkJRVU1zUTBGQlFUdEJRVmMxUXl4alFVRk5PMEZCVmxBc1NVRkJXU3h0UWtGQmJVSXNWMEZCVFN3clFrRkJLMElzUTBGQlF5eERRVUZCTzBGQlYzQkZMREpDUVVGdFFqdEJRVlp3UWl4SlFVRlpMR05CUVdNc1YwRkJUU3d3UWtGQk1FSXNRMEZCUXl4RFFVRkJPMEZCVnpGRUxITkNRVUZqTzBGQlRVb3NhMEpCUVZVc1IwRkJWeXcwUTBGQk5FTXNRMEZCUXp0QlFVVTNSU3hQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVN1NVRkRNVUlzZFVOQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1ZVRkJWVHRKUVVNeFFpeDVRa0ZCWlR0SlFVVm1MSE5DUVVGelFpeERRVUZETEZWQlFWVTdTVUZEYWtNc1UwRkJVeXhEUVVGRExGVkJRVlU3U1VGRGNFSXNjVUpCUVhGQ0xFTkJRVU1zVlVGQlZUdEpRVU5vUXl4dlFrRkJiMElzUTBGQlF5eFZRVUZWTzBsQlF5OUNMR2RDUVVGblFpeERRVUZETEZWQlFWVTdTVUZETTBJc1pVRkJaU3hEUVVGRExGVkJRVlU3UTBGRE1VSXNRMEZCUXp0TFFVTkJMRTlCUVU4c1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4dlFrRkJiMElzUlVGQlJTeHRRa0ZCYlVJc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZGF0YVNvdXJjZXMvZGF0YVNvdXJjZXMubW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gNTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgbWVyZ2VTb3J0ID0gcmVxdWlyZSgnLi9tZXJnZVNvcnQvbWVyZ2VTb3J0LnNlcnZpY2UnKTtcclxuZXhwb3J0cy5tZXJnZVNvcnQgPSBtZXJnZVNvcnQ7XHJcbnZhciBzb3J0ZXIgPSByZXF1aXJlKCcuL3NvcnRlci9zb3J0ZXIuc2VydmljZScpO1xyXG5leHBvcnRzLnNvcnRlciA9IHNvcnRlcjtcclxuX19leHBvcnQocmVxdWlyZSgnLi9zb3J0JykpO1xyXG5fX2V4cG9ydChyZXF1aXJlKCcuL3NvcnREaXJlY3Rpb24nKSk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuc29ydHMnO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgIG1lcmdlU29ydC5tb2R1bGVOYW1lLFxyXG4gICAgc29ydGVyLm1vZHVsZU5hbWUsXHJcbl0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljMjl5ZEhNdWJXOWtkV3hsTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2ljMjl5ZEhNdWJXOWtkV3hsTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenM3T3p0QlFVVmlMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlJXNURMRWxCUVZrc1UwRkJVeXhYUVVGTkxDdENRVUVyUWl4RFFVRkRMRU5CUVVFN1FVRlBNVVFzYVVKQlFWTTdRVUZPVml4SlFVRlpMRTFCUVUwc1YwRkJUU3g1UWtGQmVVSXNRMEZCUXl4RFFVRkJPMEZCVDJwRUxHTkJRVTA3UVVGTVVDeHBRa0ZCWXl4UlFVRlJMRU5CUVVNc1JVRkJRVHRCUVVOMlFpeHBRa0ZCWXl4cFFrRkJhVUlzUTBGQlF5eEZRVUZCTzBGQlQzSkNMR3RDUVVGVkxFZEJRVmNzYzBOQlFYTkRMRU5CUVVNN1FVRkZka1VzVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4clFrRkJWU3hGUVVGRk8wbEJRekZDTEZOQlFWTXNRMEZCUXl4VlFVRlZPMGxCUTNCQ0xFMUJRVTBzUTBGQlF5eFZRVUZWTzBOQlEycENMRU5CUVVNc1EwRkJReUo5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc29ydHMvc29ydHMubW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gNTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuc29ydHMubWVyZ2VTb3J0JztcclxuZXhwb3J0cy5zZXJ2aWNlTmFtZSA9ICdtZXJnZVNvcnQnO1xyXG52YXIgTWVyZ2VTb3J0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIE1lcmdlU29ydCgpIHtcclxuICAgIH1cclxuICAgIE1lcmdlU29ydC5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIChkYXRhLCBjb21wYXJlKSB7XHJcbiAgICAgICAgaWYgKGRhdGEubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbXBhcmUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjb21wYXJlID0gdGhpcy5kZWZhdWx0Q29tcGFyZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1pZDtcclxuICAgICAgICB2YXIgbGVmdDtcclxuICAgICAgICB2YXIgcmlnaHQ7XHJcbiAgICAgICAgbWlkID0gZGF0YS5sZW5ndGggLyAyO1xyXG4gICAgICAgIGxlZnQgPSB0aGlzLnNvcnQoZGF0YS5zbGljZSgwLCBtaWQpLCBjb21wYXJlKTtcclxuICAgICAgICByaWdodCA9IHRoaXMuc29ydChkYXRhLnNsaWNlKG1pZCwgZGF0YS5sZW5ndGgpLCBjb21wYXJlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXJnZShsZWZ0LCByaWdodCwgY29tcGFyZSk7XHJcbiAgICB9O1xyXG4gICAgTWVyZ2VTb3J0LnByb3RvdHlwZS5kZWZhdWx0Q29tcGFyZSA9IGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgcmV0dXJuIGEgPCBiXHJcbiAgICAgICAgICAgID8gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnR5cGVzLkNvbXBhcmVSZXN1bHQubGVzc1xyXG4gICAgICAgICAgICA6IChhID4gYiA/IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS50eXBlcy5Db21wYXJlUmVzdWx0LmdyZWF0ZXIgOiB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEudHlwZXMuQ29tcGFyZVJlc3VsdC5lcXVhbCk7XHJcbiAgICB9O1xyXG4gICAgTWVyZ2VTb3J0LnByb3RvdHlwZS5tZXJnZSA9IGZ1bmN0aW9uIChsZWZ0LCByaWdodCwgY29tcGFyZSkge1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcclxuICAgICAgICB3aGlsZSAobGVmdC5sZW5ndGggJiYgcmlnaHQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGlmIChjb21wYXJlKGxlZnRbMF0sIHJpZ2h0WzBdKSA9PT0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnR5cGVzLkNvbXBhcmVSZXN1bHQuZ3JlYXRlcikge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gocmlnaHQuc2hpZnQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBpZiBlcXVhbCBpdCBzaG91bGQgcHJlc2VydmUgc2FtZSBvcmRlciAoc3RhYmxlKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gobGVmdC5zaGlmdCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVmdC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2guYXBwbHkocmVzdWx0LCBsZWZ0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJpZ2h0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaC5hcHBseShyZXN1bHQsIHJpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTWVyZ2VTb3J0O1xyXG59KCkpO1xyXG5leHBvcnRzLk1lcmdlU29ydCA9IE1lcmdlU29ydDtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5zZXJ2aWNlKGV4cG9ydHMuc2VydmljZU5hbWUsIE1lcmdlU29ydCk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWJXVnlaMlZUYjNKMExuTmxjblpwWTJVdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUp0WlhKblpWTnZjblF1YzJWeWRtbGpaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdRVUZGWWl4SlFVRlpMRTlCUVU4c1YwRkJUU3hUUVVGVExFTkJRVU1zUTBGQlFUdEJRVVZ1UXl3MlEwRkJaME1zT0VKQlFUaENMRU5CUVVNc1EwRkJRVHRCUVVsd1JDeHJRa0ZCVlN4SFFVRlhMR2RFUVVGblJDeERRVUZETzBGQlEzUkZMRzFDUVVGWExFZEJRVmNzVjBGQlZ5eERRVUZETzBGQlRUZERPMGxCUVVFN1NVRnBSRUVzUTBGQlF6dEpRV2hFUVN4M1FrRkJTU3hIUVVGS0xGVkJRV2RDTEVsQlFXbENMRVZCUVVVc1QwRkJjVU03VVVGRGRrVXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNKQ0xFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTTdVVUZEWWl4RFFVRkRPMUZCUlVRc1JVRkJSU3hEUVVGRExFTkJRVU1zVDBGQlR5eEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRja0lzVDBGQlR5eEhRVUZITEVsQlFVa3NRMEZCUXl4alFVRmpMRU5CUVVNN1VVRkRMMElzUTBGQlF6dFJRVVZFTEVsQlFVa3NSMEZCVnl4RFFVRkRPMUZCUTJoQ0xFbEJRVWtzU1VGQlZ5eERRVUZETzFGQlEyaENMRWxCUVVrc1MwRkJXU3hEUVVGRE8xRkJSV3BDTEVkQlFVY3NSMEZCUnl4SlFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSExFTkJRVU1zUTBGQlF6dFJRVU4wUWl4SlFVRkpMRWRCUVVjc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1JVRkJSU3hIUVVGSExFTkJRVU1zUlVGQlJTeFBRVUZQTEVOQlFVTXNRMEZCUXp0UlFVTTVReXhMUVVGTExFZEJRVWNzU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFZEJRVWNzUlVGQlJTeEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRVZCUVVVc1QwRkJUeXhEUVVGRExFTkJRVU03VVVGRmVrUXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVmtzU1VGQlNTeEZRVUZGTEV0QlFVc3NSVUZCUlN4UFFVRlBMRU5CUVVNc1EwRkJRenRKUVVOd1JDeERRVUZETzBsQlJVOHNhME5CUVdNc1IwRkJkRUlzVlVGQmEwTXNRMEZCV1N4RlFVRkZMRU5CUVZrN1VVRkRNMFFzVFVGQlRTeERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRPMk5CUTFRc2IwTkJRVXNzUTBGQlF5eGhRVUZoTEVOQlFVTXNTVUZCU1R0alFVTjRRaXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVkQlFVY3NiME5CUVVzc1EwRkJReXhoUVVGaExFTkJRVU1zVDBGQlR5eEhRVUZITEc5RFFVRkxMRU5CUVVNc1lVRkJZU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETzBsQlEzUkZMRU5CUVVNN1NVRkZUeXg1UWtGQlN5eEhRVUZpTEZWQlFYbENMRWxCUVdsQ0xFVkJRVVVzUzBGQmEwSXNSVUZCUlN4UFFVRnZRenRSUVVOdVJ5eEpRVUZKTEUxQlFVMHNSMEZCWjBJc1JVRkJSU3hEUVVGRE8xRkJSVGRDTEU5QlFVOHNTVUZCU1N4RFFVRkRMRTFCUVUwc1NVRkJTU3hMUVVGTExFTkJRVU1zVFVGQlRTeEZRVUZGTEVOQlFVTTdXVUZEY0VNc1JVRkJSU3hEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4dlEwRkJTeXhEUVVGRExHRkJRV0VzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRPMmRDUVVOb1JTeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhMUVVGTExFVkJRVVVzUTBGQlF5eERRVUZETzFsQlF6VkNMRU5CUVVNN1dVRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dG5Ra0ZEVUN4clJFRkJhMFE3WjBKQlEyeEVMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NSVUZCUlN4RFFVRkRMRU5CUVVNN1dVRkRNMElzUTBGQlF6dFJRVU5HTEVOQlFVTTdVVUZGUkN4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTnFRaXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4TlFVRk5MRVZCUVVVc1NVRkJTU3hEUVVGRExFTkJRVU03VVVGRGFrTXNRMEZCUXp0UlFVVkVMRVZCUVVVc1EwRkJReXhEUVVGRExFdEJRVXNzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTJ4Q0xFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTFCUVUwc1JVRkJSU3hMUVVGTExFTkJRVU1zUTBGQlF6dFJRVU5zUXl4RFFVRkRPMUZCUlVRc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF6dEpRVU5tTEVOQlFVTTdTVUZEUml4blFrRkJRenRCUVVGRUxFTkJRVU1zUVVGcVJFUXNTVUZwUkVNN1FVRnFSRmtzYVVKQlFWTXNXVUZwUkhKQ0xFTkJRVUU3UVVGRlJDeFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMR3RDUVVGVkxFVkJRVVVzUlVGQlJTeERRVUZETzB0QlF6VkNMRTlCUVU4c1EwRkJReXh0UWtGQlZ5eEZRVUZGTEZOQlFWTXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc29ydHMvbWVyZ2VTb3J0L21lcmdlU29ydC5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX3RyYW5zZm9ybSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy50cmFuc2Zvcm0udHJhbnNmb3JtO1xyXG52YXIgc29ydERpcmVjdGlvbl8xID0gcmVxdWlyZSgnLi4vc29ydERpcmVjdGlvbicpO1xyXG52YXIgbWVyZ2VTb3J0X3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL21lcmdlU29ydC9tZXJnZVNvcnQuc2VydmljZScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5jYXJkQ29udGFpbmVyLnNvcnRzLnNvcnRlcic7XHJcbmV4cG9ydHMuc2VydmljZU5hbWUgPSAnc29ydGVyJztcclxudmFyIFNvcnRlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTb3J0ZXIobWVyZ2VTb3J0KSB7XHJcbiAgICAgICAgdGhpcy5tZXJnZVNvcnQgPSBtZXJnZVNvcnQ7XHJcbiAgICB9XHJcbiAgICBTb3J0ZXIucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbiAoZGF0YSwgc29ydCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHNvcnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfLmlzQXJyYXkoc29ydCkpIHtcclxuICAgICAgICAgICAgdmFyIHJldmVyc2VTb3J0cyA9IF8uY2xvbmUoc29ydCk7XHJcbiAgICAgICAgICAgIHJldmVyc2VTb3J0cy5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBfLnJlZHVjZShyZXZlcnNlU29ydHMsIGZ1bmN0aW9uIChzb3J0ZWREYXRhLCBuZXh0U29ydCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLnNpbmdsZVNvcnQoc29ydGVkRGF0YSwgbmV4dFNvcnQpO1xyXG4gICAgICAgICAgICB9LCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2luZ2xlU29ydChkYXRhLCBzb3J0KTtcclxuICAgIH07XHJcbiAgICBTb3J0ZXIucHJvdG90eXBlLnNpbmdsZVNvcnQgPSBmdW5jdGlvbiAoZGF0YSwgc29ydCkge1xyXG4gICAgICAgIHZhciBjb21wYXJlRnVuY3Rpb24gPSB0aGlzLmJ1aWxkU29ydEZ1bmN0aW9uKHNvcnQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1lcmdlU29ydC5zb3J0KGRhdGEsIGNvbXBhcmVGdW5jdGlvbik7XHJcbiAgICB9O1xyXG4gICAgU29ydGVyLnByb3RvdHlwZS5idWlsZFNvcnRGdW5jdGlvbiA9IGZ1bmN0aW9uIChzb3J0KSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgIGlmIChzb3J0LmRpcmVjdGlvbiA9PT0gc29ydERpcmVjdGlvbl8xLlNvcnREaXJlY3Rpb24ubm9uZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS50eXBlcy5Db21wYXJlUmVzdWx0LmVxdWFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZU9mQSA9IF9fdHJhbnNmb3JtLmdldFZhbHVlKGEsIHNvcnQuY29sdW1uLmdldFZhbHVlKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlT2ZCID0gX190cmFuc2Zvcm0uZ2V0VmFsdWUoYiwgc29ydC5jb2x1bW4uZ2V0VmFsdWUpO1xyXG4gICAgICAgICAgICB2YXIgZ3JlYXRlclJlc3VsdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS50eXBlcy5Db21wYXJlUmVzdWx0LmdyZWF0ZXI7XHJcbiAgICAgICAgICAgIHZhciBsZXNzUmVzdWx0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnR5cGVzLkNvbXBhcmVSZXN1bHQubGVzcztcclxuICAgICAgICAgICAgdmFyIGRlc2NlbmRpbmdTb3J0ID0gKHNvcnQuZGlyZWN0aW9uID09PSBzb3J0RGlyZWN0aW9uXzEuU29ydERpcmVjdGlvbi5kZXNjZW5kaW5nKTtcclxuICAgICAgICAgICAgdmFyIGZsaXAgPSBzb3J0LmNvbHVtbi5mbGlwU29ydDtcclxuICAgICAgICAgICAgLy8gRXhjbHVzaXZlIE9SLi4uIGlmIGZsaXBwaW5nIGEgZGVzY2VuZGluZyBzb3J0LCB5b3UgZ2V0IGFuIGFzY2VuZGluZyBzb3J0XHJcbiAgICAgICAgICAgIGlmICgoZGVzY2VuZGluZ1NvcnQgfHwgZmxpcCkgJiYgIShkZXNjZW5kaW5nU29ydCAmJiBmbGlwKSkge1xyXG4gICAgICAgICAgICAgICAgZ3JlYXRlclJlc3VsdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS50eXBlcy5Db21wYXJlUmVzdWx0Lmxlc3M7XHJcbiAgICAgICAgICAgICAgICBsZXNzUmVzdWx0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnR5cGVzLkNvbXBhcmVSZXN1bHQuZ3JlYXRlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVPZkEgPiB2YWx1ZU9mQlxyXG4gICAgICAgICAgICAgICAgPyBncmVhdGVyUmVzdWx0XHJcbiAgICAgICAgICAgICAgICA6ICh2YWx1ZU9mQSA8IHZhbHVlT2ZCID8gbGVzc1Jlc3VsdCA6IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS50eXBlcy5Db21wYXJlUmVzdWx0LmVxdWFsKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIFNvcnRlci4kaW5qZWN0ID0gW21lcmdlU29ydF9zZXJ2aWNlXzEuc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIFNvcnRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Tb3J0ZXIgPSBTb3J0ZXI7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuc2VydmljZShleHBvcnRzLnNlcnZpY2VOYW1lLCBTb3J0ZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljMjl5ZEdWeUxuTmxjblpwWTJVdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUp6YjNKMFpYSXVjMlZ5ZG1salpTNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4WlFVRlpMRU5CUVVNN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVTnVReXhKUVVGWkxFTkJRVU1zVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVVTFRaXcyUTBGQlowTXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlFUdEJRVU12UkN4SlFVRlBMRmRCUVZjc1IwRkJSeXgxUTBGQlVTeERRVUZETEZOQlFWTXNRMEZCUXl4VFFVRlRMRU5CUVVNN1FVRkhiRVFzT0VKQlFUaENMR3RDUVVGclFpeERRVUZETEVOQlFVRTdRVUZEYWtRc2EwTkJRV2RGTEdkRFFVRm5ReXhEUVVGRExFTkJRVUU3UVVGRmRFWXNhMEpCUVZVc1IwRkJWeXcyUTBGQk5rTXNRMEZCUXp0QlFVTnVSU3h0UWtGQlZ5eEhRVUZYTEZGQlFWRXNRMEZCUXp0QlFVOHhRenRKUVVWRExHZENRVUZ2UWl4VFFVRnhRanRSUVVGeVFpeGpRVUZUTEVkQlFWUXNVMEZCVXl4RFFVRlpPMGxCUVVrc1EwRkJRenRKUVVVNVF5eHhRa0ZCU1N4SFFVRktMRlZCUVdkQ0xFbEJRV2xDTEVWQlFVVXNTVUZCY1VJN1VVRkJlRVFzYVVKQlpVTTdVVUZrUVN4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFdEJRVXNzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTnVRaXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETzFGQlEySXNRMEZCUXp0UlFVVkVMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRM0pDTEVsQlFVa3NXVUZCV1N4SFFVRnhRaXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTI1RUxGbEJRVmtzUTBGQlF5eFBRVUZQTEVWQlFVVXNRMEZCUXp0WlFVVjJRaXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4WlFVRlpMRVZCUVVVc1ZVRkJReXhWUVVGcFFpeEZRVUZGTEZGQlFXVTdaMEpCUTJoRkxFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRlZCUVZVc1JVRkJSU3hSUVVGUkxFTkJRVU1zUTBGQlF6dFpRVU01UXl4RFFVRkRMRVZCUVVVc1NVRkJTU3hEUVVGRExFTkJRVU03VVVGRFZpeERRVUZETzFGQlJVUXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zU1VGQlNTeEZRVUZUTEVsQlFVa3NRMEZCUXl4RFFVRkRPMGxCUXpORExFTkJRVU03U1VGRlR5d3lRa0ZCVlN4SFFVRnNRaXhWUVVFNFFpeEpRVUZwUWl4RlFVRkZMRWxCUVZjN1VVRkRNMFFzU1VGQlNTeGxRVUZsTEVkQlFXZERMRWxCUVVrc1EwRkJReXhwUWtGQmFVSXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRSUVVOb1JpeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeEZRVUZGTEdWQlFXVXNRMEZCUXl4RFFVRkRPMGxCUTI1RUxFTkJRVU03U1VGRlR5eHJRMEZCYVVJc1IwRkJla0lzVlVGQmNVTXNTVUZCVnp0UlFVTXZReXhOUVVGTkxFTkJRVU1zVlVGQlF5eERRVUZaTEVWQlFVVXNRMEZCV1R0WlFVTnFReXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4TFFVRkxMRFpDUVVGaExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0blFrRkRNME1zVFVGQlRTeERRVUZETEc5RFFVRkxMRU5CUVVNc1lVRkJZU3hEUVVGRExFdEJRVXNzUTBGQlF6dFpRVU5zUXl4RFFVRkRPMWxCUlVRc1NVRkJTU3hSUVVGUkxFZEJRVkVzVjBGQlZ5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRVZCUVVVc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXp0WlFVTnNSU3hKUVVGSkxGRkJRVkVzUjBGQlVTeFhRVUZYTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1JVRkJSU3hKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRPMWxCUld4RkxFbEJRVWtzWVVGQllTeEhRVUYzUWl4dlEwRkJTeXhEUVVGRExHRkJRV0VzUTBGQlF5eFBRVUZQTEVOQlFVTTdXVUZEY2tVc1NVRkJTU3hWUVVGVkxFZEJRWGRDTEc5RFFVRkxMRU5CUVVNc1lVRkJZU3hEUVVGRExFbEJRVWtzUTBGQlF6dFpRVWN2UkN4SlFVRkpMR05CUVdNc1IwRkJXU3hEUVVGRExFbEJRVWtzUTBGQlF5eFRRVUZUTEV0QlFVc3NOa0pCUVdFc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dFpRVU0xUlN4SlFVRkpMRWxCUVVrc1IwRkJXU3hKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEZGQlFWRXNRMEZCUXp0WlFVVjZReXd5UlVGQk1rVTdXVUZETTBVc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eGpRVUZqTEVsQlFVa3NTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExHTkJRV01zU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1owSkJRek5FTEdGQlFXRXNSMEZCUnl4dlEwRkJTeXhEUVVGRExHRkJRV0VzUTBGQlF5eEpRVUZKTEVOQlFVTTdaMEpCUTNwRExGVkJRVlVzUjBGQlJ5eHZRMEZCU3l4RFFVRkRMR0ZCUVdFc1EwRkJReXhQUVVGUExFTkJRVU03V1VGRE1VTXNRMEZCUXp0WlFVVkVMRTFCUVUwc1EwRkJReXhSUVVGUkxFZEJRVWNzVVVGQlVUdHJRa0ZEZGtJc1lVRkJZVHRyUWtGRFlpeERRVUZETEZGQlFWRXNSMEZCUnl4UlFVRlJMRWRCUVVjc1ZVRkJWU3hIUVVGSExHOURRVUZMTEVOQlFVTXNZVUZCWVN4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRE8xRkJRMjVGTEVOQlFVTXNRMEZCUXp0SlFVTklMRU5CUVVNN1NVRnVSRTBzWTBGQlR5eEhRVUZoTEVOQlFVTXNLMEpCUVc5Q0xFTkJRVU1zUTBGQlF6dEpRVzlFYmtRc1lVRkJRenRCUVVGRUxFTkJRVU1zUVVGeVJFUXNTVUZ4UkVNN1FVRnlSRmtzWTBGQlRTeFRRWEZFYkVJc1EwRkJRVHRCUVVWRUxFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNhMEpCUVZVc1JVRkJSU3hGUVVGRkxFTkJRVU03UzBGRE5VSXNUMEZCVHl4RFFVRkRMRzFDUVVGWExFVkJRVVVzVFVGQlRTeERRVUZETEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc29ydHMvc29ydGVyL3NvcnRlci5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbl9fZXhwb3J0KHJlcXVpcmUoJy4vc29ydERpcmVjdGlvbicpKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYzI5eWRDNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW5OdmNuUXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE96czdPMEZCVDJJc2FVSkJRV01zYVVKQlFXbENMRU5CUVVNc1JVRkJRU0o5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc29ydHMvc29ydC5qc1xuICoqIG1vZHVsZSBpZCA9IDU5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19vYnNlcnZhYmxlID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9ic2VydmFibGU7XHJcbnZhciBfX2FycmF5ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLmFycmF5O1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG52YXIgX19zeW5jaHJvbml6ZWRSZXF1ZXN0cyA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5zeW5jaHJvbml6ZWRSZXF1ZXN0cztcclxudmFyIGFzeW5jRGF0YVNvdXJjZV9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi9hc3luY0RhdGFTb3VyY2Uuc2VydmljZScpO1xyXG52YXIgZGF0YVNvdXJjZVByb2Nlc3Nvcl9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi9kYXRhU291cmNlUHJvY2Vzc29yLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5kYXRhU291cmNlcy5jbGllbnRTZXJ2ZXJEYXRhU291cmNlJztcclxuZXhwb3J0cy5mYWN0b3J5TmFtZSA9ICdjbGllbnRTZXJ2ZXJEYXRhU291cmNlJztcclxudmFyIENsaWVudFNlcnZlckRhdGFTb3VyY2UgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKENsaWVudFNlcnZlckRhdGFTb3VyY2UsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDbGllbnRTZXJ2ZXJEYXRhU291cmNlKGdldERhdGFTZXQsIHNlYXJjaEZpbHRlciwgZ2V0RmlsdGVyTW9kZWwsIHZhbGlkYXRlTW9kZWwsIG9ic2VydmFibGVGYWN0b3J5LCBkYXRhU291cmNlUHJvY2Vzc29yLCBhcnJheSwgb2JqZWN0LCBzeW5jaHJvbml6ZWRSZXF1ZXN0c0ZhY3RvcnkpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBnZXREYXRhU2V0LCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIHN5bmNocm9uaXplZFJlcXVlc3RzRmFjdG9yeSk7XHJcbiAgICAgICAgdGhpcy5zZWFyY2hGaWx0ZXIgPSBzZWFyY2hGaWx0ZXI7XHJcbiAgICAgICAgdGhpcy5nZXRGaWx0ZXJNb2RlbCA9IGdldEZpbHRlck1vZGVsO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVNb2RlbCA9IHZhbGlkYXRlTW9kZWw7XHJcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgdGhpcy5taW5TZWFyY2hMZW5ndGggPSA0O1xyXG4gICAgICAgIHRoaXMuZ2V0RmlsdGVyTW9kZWwgPSB0aGlzLmdldEZpbHRlck1vZGVsIHx8IGZ1bmN0aW9uICgpIHsgcmV0dXJuIG51bGw7IH07XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZU1vZGVsID0gdGhpcy52YWxpZGF0ZU1vZGVsIHx8IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH07XHJcbiAgICAgICAgdGhpcy5jb3VudEZpbHRlckdyb3VwcyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zZWFyY2ggPSBzZWFyY2hGaWx0ZXIuc2VhcmNoVGV4dDtcclxuICAgICAgICB0aGlzLmZpbHRlck1vZGVsID0gXy5jbG9uZSh0aGlzLmdldEZpbHRlck1vZGVsKCkpO1xyXG4gICAgICAgIHNlYXJjaEZpbHRlci5taW5TZWFyY2hMZW5ndGggPSB0aGlzLm1pblNlYXJjaExlbmd0aDtcclxuICAgIH1cclxuICAgIENsaWVudFNlcnZlckRhdGFTb3VyY2UucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoRmlsdGVyLnNlYXJjaFRleHQgIT09IHRoaXMuc2VhcmNoXHJcbiAgICAgICAgICAgIHx8IHRoaXMuZmlsdGVyTW9kZWxDaGFuZ2VkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF9zdXBlci5wcm90b3R5cGUucmVmcmVzaC5jYWxsKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBDbGllbnRTZXJ2ZXJEYXRhU291cmNlLnByb3RvdHlwZS5yZWxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zZWFyY2ggPSB0aGlzLnNlYXJjaEZpbHRlci5zZWFyY2hUZXh0O1xyXG4gICAgICAgIHRoaXMuZmlsdGVyTW9kZWwgPSBfLmNsb25lKHRoaXMuZ2V0RmlsdGVyTW9kZWwoKSk7XHJcbiAgICAgICAgdmFyIGhhc1ZhbGlkU2VhcmNoID0gIXRoaXMub2JqZWN0LmlzTnVsbE9yRW1wdHkodGhpcy5zZWFyY2gpICYmIHRoaXMuc2VhcmNoLmxlbmd0aCA+PSB0aGlzLm1pblNlYXJjaExlbmd0aDtcclxuICAgICAgICB2YXIgaGFzVmFsaWRGaWx0ZXJNb2RlbCA9IHRoaXMuZmlsdGVyTW9kZWwgIT0gbnVsbCAmJiB0aGlzLnZhbGlkYXRlTW9kZWwodGhpcy5maWx0ZXJNb2RlbCk7XHJcbiAgICAgICAgaWYgKCFoYXNWYWxpZFNlYXJjaCAmJiAhaGFzVmFsaWRGaWx0ZXJNb2RlbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmVSZWxvYWQobnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWxvYWQuY2FsbCh0aGlzKTtcclxuICAgIH07XHJcbiAgICBDbGllbnRTZXJ2ZXJEYXRhU291cmNlLnByb3RvdHlwZS5maWx0ZXJNb2RlbENoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuICF0aGlzLm9iamVjdC5hcmVFcXVhbCh0aGlzLmdldEZpbHRlck1vZGVsKCksIHRoaXMuZmlsdGVyTW9kZWwpO1xyXG4gICAgfTtcclxuICAgIENsaWVudFNlcnZlckRhdGFTb3VyY2UucHJvdG90eXBlLmdldFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VhcmNoTW9kZWwgPSB0aGlzLmdldEZpbHRlck1vZGVsKCk7XHJcbiAgICAgICAgaWYgKHNlYXJjaE1vZGVsICE9IG51bGwpIHtcclxuICAgICAgICAgICAgc2VhcmNoTW9kZWwuc2VhcmNoID0gdGhpcy5zZWFyY2g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzZWFyY2hNb2RlbCA9IHRoaXMuc2VhcmNoO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2VhcmNoTW9kZWw7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENsaWVudFNlcnZlckRhdGFTb3VyY2U7XHJcbn0oYXN5bmNEYXRhU291cmNlX3NlcnZpY2VfMS5Bc3luY0RhdGFTb3VyY2UpKTtcclxuZXhwb3J0cy5DbGllbnRTZXJ2ZXJEYXRhU291cmNlID0gQ2xpZW50U2VydmVyRGF0YVNvdXJjZTtcclxuY2xpZW50U2VydmVyRGF0YVNvdXJjZUZhY3RvcnkuJGluamVjdCA9IFtfX29ic2VydmFibGUuZmFjdG9yeU5hbWUsIGRhdGFTb3VyY2VQcm9jZXNzb3Jfc2VydmljZV8xLnByb2Nlc3NvclNlcnZpY2VOYW1lLCBfX2FycmF5LnNlcnZpY2VOYW1lLCBfX29iamVjdC5zZXJ2aWNlTmFtZSwgX19zeW5jaHJvbml6ZWRSZXF1ZXN0cy5mYWN0b3J5TmFtZV07XHJcbmZ1bmN0aW9uIGNsaWVudFNlcnZlckRhdGFTb3VyY2VGYWN0b3J5KG9ic2VydmFibGVGYWN0b3J5LCBkYXRhU291cmNlUHJvY2Vzc29yLCBhcnJheSwgb2JqZWN0LCBzeW5jaHJvbml6ZWRSZXF1ZXN0c0ZhY3RvcnkpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uIChnZXREYXRhU2V0LCBzZWFyY2hGaWx0ZXIsIGdldEZpbHRlck1vZGVsLCB2YWxpZGF0ZU1vZGVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2xpZW50U2VydmVyRGF0YVNvdXJjZShnZXREYXRhU2V0LCBzZWFyY2hGaWx0ZXIsIGdldEZpbHRlck1vZGVsLCB2YWxpZGF0ZU1vZGVsLCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIG9iamVjdCwgc3luY2hyb25pemVkUmVxdWVzdHNGYWN0b3J5KTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmNsaWVudFNlcnZlckRhdGFTb3VyY2VGYWN0b3J5ID0gY2xpZW50U2VydmVyRGF0YVNvdXJjZUZhY3Rvcnk7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW19fb2JzZXJ2YWJsZS5tb2R1bGVOYW1lLCBfX2FycmF5Lm1vZHVsZU5hbWUsIF9fb2JqZWN0Lm1vZHVsZU5hbWUsIF9fc3luY2hyb25pemVkUmVxdWVzdHMubW9kdWxlTmFtZV0pXHJcbiAgICAuZmFjdG9yeShleHBvcnRzLmZhY3RvcnlOYW1lLCBjbGllbnRTZXJ2ZXJEYXRhU291cmNlRmFjdG9yeSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVkyeHBaVzUwVTJWeWRtVnlSR0YwWVZOdmRYSmpaUzV6WlhKMmFXTmxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaVkyeHBaVzUwVTJWeWRtVnlSR0YwWVZOdmRYSmpaUzV6WlhKMmFXTmxMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxGbEJRVmtzUTBGQlF6czdPenM3TzBGQlJXSXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGRmJrTXNOa05CUVhsQ0xEaENRVUU0UWl4RFFVRkRMRU5CUVVFN1FVRkRlRVFzU1VGQlR5eFpRVUZaTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhWUVVGVkxFTkJRVU03UVVGRE1VTXNTVUZCVHl4UFFVRlBMRWRCUVVjc2RVTkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTTdRVUZEYUVNc1NVRkJUeXhSUVVGUkxFZEJRVWNzZFVOQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkZiRU1zU1VGQlR5eHpRa0ZCYzBJc1IwRkJSeXgxUTBGQlVTeERRVUZETEc5Q1FVRnZRaXhEUVVGRE8wRkJSVGxFTEhkRFFVRnZSU3cwUWtGQk5FSXNRMEZCUXl4RFFVRkJPMEZCUTJwSExEUkRRVUV5UkN4blEwRkJaME1zUTBGQlF5eERRVUZCTzBGQlJXcEdMR3RDUVVGVkxFZEJRVmNzYlVWQlFXMUZMRU5CUVVNN1FVRkRla1lzYlVKQlFWY3NSMEZCVnl4M1FrRkJkMElzUTBGQlF6dEJRVzFDTVVRN1NVRkJkVVFzTUVOQlFUQkNPMGxCUzJoR0xHZERRVUZaTEZWQlFXbEVMRVZCUTJwRUxGbEJRWGRFTEVWQlEzcEVMR05CUVc5RExFVkJRM0JETEdGQlFYZERMRVZCUXk5RExHbENRVUY1UkN4RlFVTjZSQ3h0UWtGQmVVTXNSVUZEZWtNc1MwRkJORUlzUlVGRGNFSXNUVUZCSzBJc1JVRkRka01zTWtKQlFXZEdPMUZCUTI1R0xHdENRVUZOTEZWQlFWVXNSVUZCUlN4cFFrRkJhVUlzUlVGQlJTeHRRa0ZCYlVJc1JVRkJSU3hMUVVGTExFVkJRVVVzTWtKQlFUSkNMRU5CUVVNc1EwRkJRenRSUVZKdVJpeHBRa0ZCV1N4SFFVRmFMRmxCUVZrc1EwRkJORU03VVVGRGVrUXNiVUpCUVdNc1IwRkJaQ3hqUVVGakxFTkJRWE5DTzFGQlEzQkRMR3RDUVVGaExFZEJRV0lzWVVGQllTeERRVUV5UWp0UlFVbDJReXhYUVVGTkxFZEJRVTRzVFVGQlRTeERRVUY1UWp0UlFWaHVReXh2UWtGQlpTeEhRVUZYTEVOQlFVTXNRMEZCUXp0UlFXVnVReXhKUVVGSkxFTkJRVU1zWTBGQll5eEhRVUZITEVsQlFVa3NRMEZCUXl4alFVRmpMRWxCUVVrc1kwRkJiVUlzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRSUVVNdlJTeEpRVUZKTEVOQlFVTXNZVUZCWVN4SFFVRkhMRWxCUVVrc1EwRkJReXhoUVVGaExFbEJRVWtzWTBGQmMwSXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dFJRVVZvUml4SlFVRkpMRU5CUVVNc2FVSkJRV2xDTEVkQlFVY3NTVUZCU1N4RFFVRkRPMUZCUXpsQ0xFbEJRVWtzUTBGQlF5eE5RVUZOTEVkQlFVY3NXVUZCV1N4RFFVRkRMRlZCUVZVc1EwRkJRenRSUVVOMFF5eEpRVUZKTEVOQlFVTXNWMEZCVnl4SFFVRkhMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zU1VGQlNTeERRVUZETEdOQlFXTXNSVUZCUlN4RFFVRkRMRU5CUVVNN1VVRkRiRVFzV1VGQldTeERRVUZETEdWQlFXVXNSMEZCUnl4SlFVRkpMRU5CUVVNc1pVRkJaU3hEUVVGRE8wbEJRM0pFTEVOQlFVTTdTVUZGUkN4M1EwRkJUeXhIUVVGUU8xRkJRME1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJReXhWUVVGVkxFdEJRVXNzU1VGQlNTeERRVUZETEUxQlFVMDdaVUZETlVNc1NVRkJTU3hEUVVGRExHdENRVUZyUWl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJReTlDTEVsQlFVa3NRMEZCUXl4TlFVRk5MRVZCUVVVc1EwRkJRenRSUVVObUxFTkJRVU03VVVGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0WlFVTlFMR2RDUVVGTExFTkJRVU1zVDBGQlR5eFhRVUZGTEVOQlFVTTdVVUZEYWtJc1EwRkJRenRKUVVOR0xFTkJRVU03U1VGRlJDeDFRMEZCVFN4SFFVRk9PMUZCUTBNc1NVRkJTU3hEUVVGRExFMUJRVTBzUjBGQlJ5eEpRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRMRlZCUVZVc1EwRkJRenRSUVVNelF5eEpRVUZKTEVOQlFVTXNWMEZCVnl4SFFVRkhMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zU1VGQlNTeERRVUZETEdOQlFXTXNSVUZCUlN4RFFVRkRMRU5CUVVNN1VVRkZiRVFzU1VGQlNTeGpRVUZqTEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExHRkJRV0VzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eE5RVUZOTEVsQlFVa3NTVUZCU1N4RFFVRkRMR1ZCUVdVc1EwRkJRenRSUVVNelJ5eEpRVUZKTEcxQ1FVRnRRaXhIUVVGSExFbEJRVWtzUTBGQlF5eFhRVUZYTEVsQlFVa3NTVUZCU1N4SlFVRkpMRWxCUVVrc1EwRkJReXhoUVVGaExFTkJRVU1zU1VGQlNTeERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRPMUZCUlROR0xFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNZMEZCWXl4SlFVRkpMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUXpkRExFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1dVRkRla0lzVFVGQlRTeERRVUZETzFGQlExSXNRMEZCUXp0UlFVVkVMR2RDUVVGTExFTkJRVU1zVFVGQlRTeFhRVUZGTEVOQlFVTTdTVUZEYUVJc1EwRkJRenRKUVVWUExHMUVRVUZyUWl4SFFVRXhRanRSUVVORExFMUJRVTBzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eGpRVUZqTEVWQlFVVXNSVUZCUlN4SlFVRkpMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU03U1VGRGRrVXNRMEZCUXp0SlFVVlRMREJEUVVGVExFZEJRVzVDTzFGQlEwTXNTVUZCU1N4WFFVRlhMRWRCUVZFc1NVRkJTU3hEUVVGRExHTkJRV01zUlVGQlJTeERRVUZETzFGQlJUZERMRVZCUVVVc1EwRkJReXhEUVVGRExGZEJRVmNzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNwQ0xGZEJRVmNzUTBGQlF5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJRenRSUVVOc1F5eERRVUZETzFGQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1dVRkRVQ3hYUVVGWExFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXp0UlFVTXpRaXhEUVVGRE8xRkJSVVFzVFVGQlRTeERRVUZETEZkQlFWY3NRMEZCUXp0SlFVTndRaXhEUVVGRE8wbEJRMFlzTmtKQlFVTTdRVUZCUkN4RFFVRkRMRUZCYUVWRUxFTkJRWFZFTEhsRFFVRmxMRWRCWjBWeVJUdEJRV2hGV1N3NFFrRkJjMElzZVVKQlowVnNReXhEUVVGQk8wRkJVMFFzTmtKQlFUWkNMRU5CUVVNc1QwRkJUeXhIUVVGSExFTkJRVU1zV1VGQldTeERRVUZETEZkQlFWY3NSVUZCUlN4clJFRkJiMElzUlVGQlJTeFBRVUZQTEVOQlFVTXNWMEZCVnl4RlFVRkZMRkZCUVZFc1EwRkJReXhYUVVGWExFVkJRVVVzYzBKQlFYTkNMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU03UVVGRGVFc3NkVU5CUVRoRExHbENRVUY1UkN4RlFVTjZSaXh0UWtGQmVVTXNSVUZEZWtNc1MwRkJORUlzUlVGRE5VSXNUVUZCSzBJc1JVRkRMMElzTWtKQlFXZEdPMGxCUXpkR0xGbEJRVmtzUTBGQlF6dEpRVU5pTEUxQlFVMHNRMEZCUXp0UlFVTk9MRmRCUVZjc1dVRkJXU3hWUVVGcFJDeEZRVU5xUlN4WlFVRjNSQ3hGUVVONFJDeGpRVUZ4UXl4RlFVTnlReXhoUVVGNVF6dFpRVU12UXl4TlFVRk5MRU5CUVVNc1NVRkJTU3h6UWtGQmMwSXNRMEZCV1N4VlFVRlZMRVZCUVVVc1dVRkJXU3hGUVVGRkxHTkJRV01zUlVGQlJTeGhRVUZoTEVWQlFVVXNhVUpCUVdsQ0xFVkJRVVVzYlVKQlFXMUNMRVZCUVVVc1MwRkJTeXhGUVVGRkxFMUJRVTBzUlVGQlJTd3lRa0ZCTWtJc1EwRkJReXhEUVVGRE8xRkJRek5NTEVOQlFVTTdTMEZEUkN4RFFVRkRPMEZCUTBnc1EwRkJRenRCUVdSbExIRkRRVUUyUWl4blEwRmpOVU1zUTBGQlFUdEJRVVZFTEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc2EwSkJRVlVzUlVGQlJTeERRVUZETEZsQlFWa3NRMEZCUXl4VlFVRlZMRVZCUVVVc1QwRkJUeXhEUVVGRExGVkJRVlVzUlVGQlJTeFJRVUZSTEVOQlFVTXNWVUZCVlN4RlFVRkZMSE5DUVVGelFpeERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRPMHRCUXk5SUxFOUJRVThzUTBGQlF5eHRRa0ZCVnl4RlFVRkZMRFpDUVVFMlFpeERRVUZETEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZGF0YVNvdXJjZXMvY2xpZW50U2VydmVyRGF0YVNvdXJjZS9jbGllbnRTZXJ2ZXJEYXRhU291cmNlLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59O1xyXG52YXIgZGF0YVNvdXJjZUJhc2Vfc2VydmljZV8xID0gcmVxdWlyZSgnLi9kYXRhU291cmNlQmFzZS5zZXJ2aWNlJyk7XHJcbnZhciBldmVudHMgPSByZXF1aXJlKCcuL2RhdGFTb3VyY2VFdmVudHMnKTtcclxudmFyIEFzeW5jRGF0YVNvdXJjZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQXN5bmNEYXRhU291cmNlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gQXN5bmNEYXRhU291cmNlKGdldERhdGFTZXQsIG9ic2VydmFibGVGYWN0b3J5LCBkYXRhU291cmNlUHJvY2Vzc29yLCBhcnJheSwgc3luY2hyb25pemVkUmVxdWVzdHNGYWN0b3J5KSB7XHJcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgb2JzZXJ2YWJsZUZhY3RvcnksIGRhdGFTb3VyY2VQcm9jZXNzb3IsIGFycmF5KTtcclxuICAgICAgICB0aGlzLm9ic2VydmFibGUuYWxsb3dhYmxlRXZlbnRzID0gZXZlbnRzLmFzeW5jLmFsbDtcclxuICAgICAgICB0aGlzLnN5bmNocm9uaXplZFJlcXVlc3RzID0gc3luY2hyb25pemVkUmVxdWVzdHNGYWN0b3J5LmdldEluc3RhbmNlKGdldERhdGFTZXQsIHRoaXMucmVzb2x2ZVJlbG9hZC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShBc3luY0RhdGFTb3VyY2UucHJvdG90eXBlLCBcImdldERhdGFTZXRcIiwge1xyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3luY2hyb25pemVkUmVxdWVzdHMuZGF0YVByb3ZpZGVyID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBBc3luY0RhdGFTb3VyY2UucHJvdG90eXBlLnJlbG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmRhdGFTZXQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmF3RGF0YVNldCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nRGF0YVNldCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZWRSZXF1ZXN0cy5nZXREYXRhKHRoaXMuZ2V0UGFyYW1zKCkpO1xyXG4gICAgfTtcclxuICAgIEFzeW5jRGF0YVNvdXJjZS5wcm90b3R5cGUucmVzb2x2ZVJlbG9hZCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nRGF0YVNldCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmF3RGF0YVNldCA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5wcm9jZXNzRGF0YSgpO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZS5maXJlKGV2ZW50cy5hc3luYy5yZWxvYWRlZCk7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlLmZpcmUoZXZlbnRzLnJlZHJhd2luZyk7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlLmZpcmUoZXZlbnRzLmNoYW5nZWQpO1xyXG4gICAgfTtcclxuICAgIC8vIG92ZXJyaWRlIHdpdGggcGFyYW1zIGZvciBnZXREYXRhU2V0XHJcbiAgICBBc3luY0RhdGFTb3VyY2UucHJvdG90eXBlLmdldFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQXN5bmNEYXRhU291cmNlO1xyXG59KGRhdGFTb3VyY2VCYXNlX3NlcnZpY2VfMS5EYXRhU291cmNlQmFzZSkpO1xyXG5leHBvcnRzLkFzeW5jRGF0YVNvdXJjZSA9IEFzeW5jRGF0YVNvdXJjZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWVhONWJtTkVZWFJoVTI5MWNtTmxMbk5sY25acFkyVXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKaGMzbHVZMFJoZEdGVGIzVnlZMlV1YzJWeWRtbGpaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdPenM3T3p0QlFWVmlMSFZEUVVFclFpd3dRa0ZCTUVJc1EwRkJReXhEUVVGQk8wRkJSVEZFTEVsQlFWa3NUVUZCVFN4WFFVRk5MRzlDUVVGdlFpeERRVUZETEVOQlFVRTdRVUZYTjBNN1NVRkJaMFFzYlVOQlFYbENPMGxCUjNoRkxIbENRVUZaTEZWQlFYVkRMRVZCUXk5RExHbENRVUY1UkN4RlFVTjZSQ3h0UWtGQmVVTXNSVUZEZWtNc1MwRkJORUlzUlVGRE5VSXNNa0pCUVdkR08xRkJRMjVHTEd0Q1FVRk5MR2xDUVVGcFFpeEZRVUZGTEcxQ1FVRnRRaXhGUVVGRkxFdEJRVXNzUTBGQlF5eERRVUZETzFGQlEzSkVMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zWlVGQlpTeEhRVUZITEUxQlFVMHNRMEZCUXl4TFFVRkxMRU5CUVVNc1IwRkJSeXhEUVVGRE8xRkJRMjVFTEVsQlFVa3NRMEZCUXl4dlFrRkJiMElzUjBGQlJ5d3lRa0ZCTWtJc1EwRkJReXhYUVVGWExFTkJRVU1zVlVGQlZTeEZRVUZGTEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdTVUZEYUVnc1EwRkJRenRKUVVWRUxITkNRVUZKTEhWRFFVRlZPMkZCUVdRc1ZVRkJaU3hMUVVGclF6dFpRVU5vUkN4SlFVRkpMRU5CUVVNc2IwSkJRVzlDTEVOQlFVTXNXVUZCV1N4SFFVRkhMRXRCUVVzc1EwRkJRenRSUVVOb1JDeERRVUZET3pzN1QwRkJRVHRKUVVWRUxHZERRVUZOTEVkQlFVNDdVVUZEUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhIUVVGSExFbEJRVWtzUTBGQlF6dFJRVU53UWl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hIUVVGSExFbEJRVWtzUTBGQlF6dFJRVU4yUWl4SlFVRkpMRU5CUVVNc1kwRkJZeXhIUVVGSExFbEJRVWtzUTBGQlF6dFJRVVV6UWl4SlFVRkpMRU5CUVVNc2IwSkJRVzlDTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFVkJRVVVzUTBGQlF5eERRVUZETzBsQlEzSkVMRU5CUVVNN1NVRkZVeXgxUTBGQllTeEhRVUYyUWl4VlFVRjNRaXhKUVVGcFFqdFJRVU40UXl4SlFVRkpMRU5CUVVNc1kwRkJZeXhIUVVGSExFdEJRVXNzUTBGQlF6dFJRVU0xUWl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hIUVVGSExFbEJRVWtzUTBGQlF6dFJRVVYyUWl4SlFVRkpMRU5CUVVNc1YwRkJWeXhGUVVGRkxFTkJRVU03VVVGRGJrSXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJRenRSUVVNMVF5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTTdVVUZEZGtNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRE8wbEJRM1JETEVOQlFVTTdTVUZGUkN4elEwRkJjME03U1VGRE5VSXNiVU5CUVZNc1IwRkJia0k3VVVGRFF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRPMGxCUTJJc1EwRkJRenRKUVVOR0xITkNRVUZETzBGQlFVUXNRMEZCUXl4QlFYWkRSQ3hEUVVGblJDeDFRMEZCWXl4SFFYVkROMFE3UVVGMlExa3NkVUpCUVdVc2EwSkJkVU16UWl4RFFVRkJJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZGF0YVNvdXJjZXMvYXN5bmNEYXRhU291cmNlLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG52YXIgZXZlbnRzID0gcmVxdWlyZSgnLi9kYXRhU291cmNlRXZlbnRzJyk7XHJcbnZhciBEYXRhU291cmNlQmFzZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYXRhU291cmNlQmFzZShvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXkpIHtcclxuICAgICAgICB0aGlzLmRhdGFTb3VyY2VQcm9jZXNzb3IgPSBkYXRhU291cmNlUHJvY2Vzc29yO1xyXG4gICAgICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcclxuICAgICAgICB0aGlzLnNvcnRzID0gW107XHJcbiAgICAgICAgdGhpcy5maWx0ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgdGhpcy5jb3VudEZpbHRlckdyb3VwcyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMubG9hZGluZ0RhdGFTZXQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9ic2VydmFibGUgPSBvYnNlcnZhYmxlRmFjdG9yeS5nZXRJbnN0YW5jZSgpO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZS5hbGxvd2FibGVFdmVudHMgPSBldmVudHMuYWxsO1xyXG4gICAgfVxyXG4gICAgRGF0YVNvdXJjZUJhc2UucHJvdG90eXBlLndhdGNoID0gZnVuY3Rpb24gKGFjdGlvbiwgZXZlbnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZhYmxlLnJlZ2lzdGVyKGFjdGlvbiwgZXZlbnQpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEYXRhU291cmNlQmFzZS5wcm90b3R5cGUsIFwibmVlZHNSZWZpbmVkU2VhcmNoXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG5vSXRlbXNEaXNwbGF5ZWQgPSBfX29iamVjdC5vYmplY3RVdGlsaXR5LmlzTnVsbE9yRW1wdHkodGhpcy5kYXRhU2V0KTtcclxuICAgICAgICAgICAgdmFyIG1vcmVJdGVtc09uU2VydmVyID0gdGhpcy5faXNFbXB0eSA9PT0gZmFsc2UgfHwgKHRoaXMucmF3RGF0YVNldCAhPSBudWxsICYmIHRoaXMucmF3RGF0YVNldC5sZW5ndGggPCB0aGlzLmNvdW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vSXRlbXNEaXNwbGF5ZWQgJiYgbW9yZUl0ZW1zT25TZXJ2ZXI7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YVNvdXJjZUJhc2UucHJvdG90eXBlLCBcImlzRW1wdHlcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX19vYmplY3Qub2JqZWN0VXRpbGl0eS5pc051bGxPckVtcHR5KHRoaXMucmF3RGF0YVNldClcclxuICAgICAgICAgICAgICAgICYmICh0aGlzLl9pc0VtcHR5ICE9IG51bGwgPyB0aGlzLl9pc0VtcHR5IDogdHJ1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pc0VtcHR5ID0gdmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBEYXRhU291cmNlQmFzZS5wcm90b3R5cGUucHJvY2Vzc0RhdGEgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHByb2Nlc3NlZERhdGE7XHJcbiAgICAgICAgaWYgKHRoaXMuY291bnRGaWx0ZXJHcm91cHMpIHtcclxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YSA9IHRoaXMuZGF0YVNvdXJjZVByb2Nlc3Nvci5wcm9jZXNzQW5kQ291bnQodGhpcy5zb3J0cywgdGhpcy5maWx0ZXJzLCB0aGlzLnBhZ2VyLCB0aGlzLnJhd0RhdGFTZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcHJvY2Vzc2VkRGF0YSA9IHRoaXMuZGF0YVNvdXJjZVByb2Nlc3Nvci5wcm9jZXNzKHRoaXMuc29ydHMsIHRoaXMuZmlsdGVycywgdGhpcy5wYWdlciwgdGhpcy5yYXdEYXRhU2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRQcm9jZXNzZWREYXRhKHByb2Nlc3NlZERhdGEpO1xyXG4gICAgfTtcclxuICAgIC8vdXNlZCB3aGVuIHdlIG5lZWQgdG8gcHJvY2VzcyBkYXRhIGJ1dCB3aXRob3V0IGNsaWVudCBmaWx0ZXJzLlxyXG4gICAgRGF0YVNvdXJjZUJhc2UucHJvdG90eXBlLnByb2Nlc3NEYXRhTm9DbGllbnRGaWx0ZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwcm9jZXNzZWREYXRhO1xyXG4gICAgICAgIGlmICh0aGlzLmNvdW50RmlsdGVyR3JvdXBzKSB7XHJcbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGEgPSB0aGlzLmRhdGFTb3VyY2VQcm9jZXNzb3IucHJvY2Vzc0FuZENvdW50KHRoaXMuc29ydHMsIG51bGwsIHRoaXMucGFnZXIsIHRoaXMucmF3RGF0YVNldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhID0gdGhpcy5kYXRhU291cmNlUHJvY2Vzc29yLnByb2Nlc3ModGhpcy5zb3J0cywgbnVsbCwgdGhpcy5wYWdlciwgdGhpcy5yYXdEYXRhU2V0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXRQcm9jZXNzZWREYXRhKHByb2Nlc3NlZERhdGEpO1xyXG4gICAgfTtcclxuICAgIERhdGFTb3VyY2VCYXNlLnByb3RvdHlwZS5zZXRQcm9jZXNzZWREYXRhID0gZnVuY3Rpb24gKHByb2Nlc3NlZERhdGEpIHtcclxuICAgICAgICB0aGlzLmNvdW50ID0gcHJvY2Vzc2VkRGF0YS5jb3VudDtcclxuICAgICAgICB0aGlzLmRhdGFTZXQgPSBwcm9jZXNzZWREYXRhLmRhdGFTZXQ7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJlZERhdGFTZXQgPSBwcm9jZXNzZWREYXRhLmZpbHRlcmVkRGF0YVNldDtcclxuICAgIH07XHJcbiAgICBEYXRhU291cmNlQmFzZS5wcm90b3R5cGUub25Tb3J0Q2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5sb2FkaW5nRGF0YVNldCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlcmVkRGF0YVNldCA9IHRoaXMuZGF0YVNvdXJjZVByb2Nlc3Nvci5zb3J0KHRoaXMuZmlsdGVyZWREYXRhU2V0LCB0aGlzLnNvcnRzKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU2V0ID0gdGhpcy5kYXRhU291cmNlUHJvY2Vzc29yLnBhZ2UodGhpcy5maWx0ZXJlZERhdGFTZXQsIHRoaXMucGFnZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmFibGUuZmlyZShldmVudHMucmVkcmF3aW5nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGF0YVNvdXJjZUJhc2UucHJvdG90eXBlLm9uUGFnaW5nQ2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5sb2FkaW5nRGF0YVNldCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTZXQgPSB0aGlzLmRhdGFTb3VyY2VQcm9jZXNzb3IucGFnZSh0aGlzLmZpbHRlcmVkRGF0YVNldCwgdGhpcy5wYWdlcik7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2YWJsZS5maXJlKGV2ZW50cy5yZWRyYXdpbmcpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEYXRhU291cmNlQmFzZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMubG9hZGluZ0RhdGFTZXQpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRGF0YSgpO1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmFibGUuZmlyZShldmVudHMucmVkcmF3aW5nKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGF0YVNvdXJjZUJhc2UucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLmFycmF5LnJlbW92ZSh0aGlzLnJhd0RhdGFTZXQsIGRhdGEpO1xyXG4gICAgICAgIGlmIChpdGVtICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZhYmxlLmZpcmUoZXZlbnRzLnJlbW92ZWQpO1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmFibGUuZmlyZShldmVudHMuY2hhbmdlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEYXRhU291cmNlQmFzZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5yYXdEYXRhU2V0LnB1c2goZGF0YSk7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlLmZpcmUoZXZlbnRzLmFkZGVkKTtcclxuICAgICAgICB0aGlzLm9ic2VydmFibGUuZmlyZShldmVudHMuY2hhbmdlZCk7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICB9O1xyXG4gICAgRGF0YVNvdXJjZUJhc2UucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiAob2xkRGF0YSwgbmV3RGF0YSkge1xyXG4gICAgICAgIHZhciBsb2NhdGlvbk9mT2xkRGF0YSA9IHRoaXMucmF3RGF0YVNldC5pbmRleE9mKG9sZERhdGEpO1xyXG4gICAgICAgIGlmIChsb2NhdGlvbk9mT2xkRGF0YSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXJyYXkucmVwbGFjZSh0aGlzLnJhd0RhdGFTZXQsIG9sZERhdGEsIG5ld0RhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmFibGUuZmlyZShldmVudHMucmVwbGFjZWQpO1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmFibGUuZmlyZShldmVudHMuY2hhbmdlZCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gRGF0YVNvdXJjZUJhc2U7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRGF0YVNvdXJjZUJhc2UgPSBEYXRhU291cmNlQmFzZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWkdGMFlWTnZkWEpqWlVKaGMyVXVjMlZ5ZG1salpTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW1SaGRHRlRiM1Z5WTJWQ1lYTmxMbk5sY25acFkyVXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE8wRkJSV0lzTmtOQlFXdERMRGhDUVVFNFFpeERRVUZETEVOQlFVRTdRVUZIYWtVc1NVRkJUeXhSUVVGUkxFZEJRVWNzZFVOQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRk5iRU1zU1VGQldTeE5RVUZOTEZkQlFVMHNiMEpCUVc5Q0xFTkJRVU1zUTBGQlFUdEJRVVUzUXp0SlFXZENReXgzUWtGQldTeHBRa0ZCZVVRc1JVRkRla1FzYlVKQlFYbERMRVZCUTNaRExFdEJRVFJDTzFGQlJEbENMSGRDUVVGdFFpeEhRVUZ1UWl4dFFrRkJiVUlzUTBGQmMwSTdVVUZEZGtNc1ZVRkJTeXhIUVVGTUxFdEJRVXNzUTBGQmRVSTdVVUZrTVVNc1ZVRkJTeXhIUVVGWkxFVkJRVVVzUTBGQlF6dFJRVU53UWl4WlFVRlBMRWRCUVhOQ0xFVkJRVVVzUTBGQlF6dFJRVVZvUXl4VlFVRkxMRWRCUVZjc1EwRkJReXhEUVVGRE8xRkJSV3hDTEhOQ1FVRnBRaXhIUVVGWkxFdEJRVXNzUTBGQlF6dFJRVVZ1UXl4dFFrRkJZeXhIUVVGWkxFdEJRVXNzUTBGQlF6dFJRVkV2UWl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hIUVVGSExHbENRVUZwUWl4RFFVRkRMRmRCUVZjc1JVRkJSU3hEUVVGRE8xRkJRMnhFTEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1pVRkJaU3hIUVVGSExFMUJRVTBzUTBGQlF5eEhRVUZITEVOQlFVTTdTVUZET1VNc1EwRkJRenRKUVVWRUxEaENRVUZMTEVkQlFVd3NWVUZCYlVJc1RVRkJlVU1zUlVGQlJTeExRVUZqTzFGQlF6TkZMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEZGQlFWRXNRMEZCUXl4TlFVRk5MRVZCUVVVc1MwRkJTeXhEUVVGRExFTkJRVU03U1VGRGFFUXNRMEZCUXp0SlFVVkVMSE5DUVVGSkxEaERRVUZyUWp0aFFVRjBRanRaUVVORExFbEJRVWtzWjBKQlFXZENMRWRCUVVjc1VVRkJVU3hEUVVGRExHRkJRV0VzUTBGQlF5eGhRVUZoTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRE8xbEJRekZGTEVsQlFVa3NhVUpCUVdsQ0xFZEJRVWNzU1VGQlNTeERRVUZETEZGQlFWRXNTMEZCU3l4TFFVRkxMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlZTeEpRVUZKTEVsQlFVa3NTVUZCU1N4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFMUJRVTBzUjBGQlJ5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNN1dVRkRjRWdzVFVGQlRTeERRVUZETEdkQ1FVRm5RaXhKUVVGSkxHbENRVUZwUWl4RFFVRkRPMUZCUXpsRExFTkJRVU03T3p0UFFVRkJPMGxCUlVRc2MwSkJRVWtzYlVOQlFVODdZVUZCV0R0WlFVTkRMRTFCUVUwc1EwRkJReXhSUVVGUkxFTkJRVU1zWVVGQllTeERRVUZETEdGQlFXRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRE8yMUNRVU40UkN4RFFVRkRMRWxCUVVrc1EwRkJReXhSUVVGUkxFbEJRVWtzU1VGQlNTeEhRVUZITEVsQlFVa3NRMEZCUXl4UlFVRlJMRWRCUVVjc1NVRkJTU3hEUVVGRExFTkJRVU03VVVGRGNFUXNRMEZCUXp0aFFVVkVMRlZCUVZrc1MwRkJZenRaUVVONlFpeEpRVUZKTEVOQlFVTXNVVUZCVVN4SFFVRkhMRXRCUVVzc1EwRkJRenRSUVVOMlFpeERRVUZET3pzN1QwRktRVHRKUVUxRUxHOURRVUZYTEVkQlFWZzdVVUZEUXl4SlFVRkpMR0ZCUVhkRExFTkJRVU03VVVGRk4wTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExHbENRVUZwUWl4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVNMVFpeGhRVUZoTEVkQlFVY3NTVUZCU1N4RFFVRkRMRzFDUVVGdFFpeERRVUZETEdWQlFXVXNRMEZCV1N4SlFVRkpMRU5CUVVNc1MwRkJTeXhGUVVNdlFpeEpRVUZKTEVOQlFVTXNUMEZCVHl4RlFVTjZReXhKUVVGSkxFTkJRVU1zUzBGQlN5eEZRVU5XTEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJRenRSUVVOd1F5eERRVUZETzFGQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1dVRkRVQ3hoUVVGaExFZEJRVWNzU1VGQlNTeERRVUZETEcxQ1FVRnRRaXhEUVVGRExFOUJRVThzUTBGQldTeEpRVUZKTEVOQlFVTXNTMEZCU3l4RlFVRkZMRWxCUVVrc1EwRkJReXhQUVVGUExFVkJRVVVzU1VGQlNTeERRVUZETEV0QlFVc3NSVUZCUlN4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU03VVVGRGNFZ3NRMEZCUXp0UlFVTkVMRWxCUVVrc1EwRkJReXhuUWtGQlowSXNRMEZCUXl4aFFVRmhMRU5CUVVNc1EwRkJRenRKUVVOMFF5eERRVUZETzBsQlEwUXNLMFJCUVN0RU8wbEJReTlFTEcxRVFVRXdRaXhIUVVFeFFqdFJRVU5ETEVsQlFVa3NZVUZCZDBNc1EwRkJRenRSUVVVM1F5eEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc2FVSkJRV2xDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUXpWQ0xHRkJRV0VzUjBGQlJ5eEpRVUZKTEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU1zWlVGQlpTeERRVUZaTEVsQlFVa3NRMEZCUXl4TFFVRkxMRVZCUXpWRUxFbEJRVWtzUlVGRFNpeEpRVUZKTEVOQlFVTXNTMEZCU3l4RlFVTldMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dFJRVU53UXl4RFFVRkRPMUZCUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03V1VGRFVDeGhRVUZoTEVkQlFVY3NTVUZCU1N4RFFVRkRMRzFDUVVGdFFpeERRVUZETEU5QlFVOHNRMEZCV1N4SlFVRkpMRU5CUVVNc1MwRkJTeXhGUVVGRkxFbEJRVWtzUlVGQlJTeEpRVUZKTEVOQlFVTXNTMEZCU3l4RlFVRkZMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dFJRVU0xUnl4RFFVRkRPMUZCUTBRc1NVRkJTU3hEUVVGRExHZENRVUZuUWl4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRE8wbEJRM1JETEVOQlFVTTdTVUZGUkN4NVEwRkJaMElzUjBGQmFFSXNWVUZCYTBJc1lVRkJkME03VVVGRGVrUXNTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhoUVVGaExFTkJRVU1zUzBGQlN5eERRVUZETzFGQlEycERMRWxCUVVrc1EwRkJReXhQUVVGUExFZEJRVWNzWVVGQllTeERRVUZETEU5QlFVOHNRMEZCUXp0UlFVTnlReXhKUVVGSkxFTkJRVU1zWlVGQlpTeEhRVUZITEdGQlFXRXNRMEZCUXl4bFFVRmxMRU5CUVVNN1NVRkRkRVFzUTBGQlF6dEpRVVZFTEhGRFFVRlpMRWRCUVZvN1VVRkRReXhGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4alFVRmpMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRekZDTEVsQlFVa3NRMEZCUXl4bFFVRmxMRWRCUVVjc1NVRkJTU3hEUVVGRExHMUNRVUZ0UWl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zWlVGQlpTeEZRVUZGTEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRaUVVOMlJpeEpRVUZKTEVOQlFVTXNUMEZCVHl4SFFVRkhMRWxCUVVrc1EwRkJReXh0UWtGQmJVSXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExHVkJRV1VzUlVGQlJTeEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNN1dVRkRMMFVzU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETzFGQlEzaERMRU5CUVVNN1NVRkRSaXhEUVVGRE8wbEJSVVFzZFVOQlFXTXNSMEZCWkR0UlFVTkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEdOQlFXTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRNVUlzU1VGQlNTeERRVUZETEU5QlFVOHNSMEZCUnl4SlFVRkpMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhsUVVGbExFVkJRVVVzU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRPMWxCUXk5RkxFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF6dFJRVU40UXl4RFFVRkRPMGxCUTBZc1EwRkJRenRKUVVWRUxHZERRVUZQTEVkQlFWQTdVVUZEUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eGpRVUZqTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUXpGQ0xFbEJRVWtzUTBGQlF5eFhRVUZYTEVWQlFVVXNRMEZCUXp0WlFVTnVRaXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU03VVVGRGVFTXNRMEZCUXp0SlFVTkdMRU5CUVVNN1NVRkZSQ3dyUWtGQlRTeEhRVUZPTEZWQlFVOHNTVUZCWlR0UlFVTnlRaXhKUVVGSkxFbEJRVWtzUjBGQll5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlZTeEZRVUZGTEVsQlFVa3NRMEZCUXl4RFFVRkRPMUZCUlM5RUxFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRMnhDTEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXp0WlFVTnlReXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU03V1VGRmNrTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTTdaMEpCUTJoQ0xFbEJRVWtzUTBGQlF5eFBRVUZQTEVWQlFVVXNRMEZCUXp0WlFVTm9RaXhEUVVGRE8xRkJRMFlzUTBGQlF6dEpRVU5HTEVOQlFVTTdTVUZGUkN3MlFrRkJTU3hIUVVGS0xGVkJRVXNzU1VGQlpUdFJRVU51UWl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0UlFVTXpRaXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU03VVVGRGJrTXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRPMUZCUTNKRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVWQlFVVXNRMEZCUXp0SlFVTm9RaXhEUVVGRE8wbEJSVVFzWjBOQlFVOHNSMEZCVUN4VlFVRlJMRTlCUVd0Q0xFVkJRVVVzVDBGQmEwSTdVVUZETjBNc1NVRkJTU3hwUWtGQmFVSXNSMEZCVnl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFOUJRVThzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXp0UlFVVnFSU3hGUVVGRkxFTkJRVU1zUTBGQlF5eHBRa0ZCYVVJc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6VkNMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4VlFVRlZMRVZCUVVVc1QwRkJUeXhGUVVGRkxFOUJRVThzUTBGQlF5eERRVUZETzFsQlEzUkVMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJRenRaUVVOMFF5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTTdXVUZEY2tNc1NVRkJTU3hEUVVGRExFOUJRVThzUlVGQlJTeERRVUZETzFGQlEyaENMRU5CUVVNN1NVRkRSaXhEUVVGRE8wbEJRMFlzY1VKQlFVTTdRVUZCUkN4RFFVRkRMRUZCYUVsRUxFbEJaMGxETzBGQmFFbFpMSE5DUVVGakxHbENRV2RKTVVJc1EwRkJRU0o5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZGF0YVNvdXJjZXMvZGF0YVNvdXJjZUJhc2Uuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDYyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmV4cG9ydHMucmVkcmF3aW5nID0gJ3JlZHJhd2luZyc7XHJcbmV4cG9ydHMuY2hhbmdlZCA9ICdjaGFuZ2VkJztcclxuZXhwb3J0cy5hZGRlZCA9ICdhZGRlZCc7XHJcbmV4cG9ydHMucmVtb3ZlZCA9ICdyZW1vdmVkJztcclxuZXhwb3J0cy5yZXBsYWNlZCA9ICdyZXBsYWNlZCc7XHJcbmV4cG9ydHMuYWxsID0gW2V4cG9ydHMucmVkcmF3aW5nLCBleHBvcnRzLmNoYW5nZWQsIGV4cG9ydHMuYWRkZWQsIGV4cG9ydHMucmVtb3ZlZCwgZXhwb3J0cy5yZXBsYWNlZF07XHJcbmV4cG9ydHMuYXN5bmMgPSB7XHJcbiAgICByZWxvYWRlZDogJ3JlbG9hZGVkJyxcclxuICAgIGFsbDogW10sXHJcbn07XHJcbmV4cG9ydHMuYXN5bmMuYWxsID0gXy5jbG9uZShleHBvcnRzLmFsbCk7XHJcbmV4cG9ydHMuYXN5bmMuYWxsLnB1c2goZXhwb3J0cy5hc3luYy5yZWxvYWRlZCk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVpHRjBZVk52ZFhKalpVVjJaVzUwY3k1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJbVJoZEdGVGIzVnlZMlZGZG1WdWRITXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeERRVUZETEZkQlFVMHNVVUZCVVN4RFFVRkRMRU5CUVVFN1FVRkZha0lzYVVKQlFWTXNSMEZCVnl4WFFVRlhMRU5CUVVNN1FVRkRhRU1zWlVGQlR5eEhRVUZYTEZOQlFWTXNRMEZCUXp0QlFVTTFRaXhoUVVGTExFZEJRVmNzVDBGQlR5eERRVUZETzBGQlEzaENMR1ZCUVU4c1IwRkJWeXhUUVVGVExFTkJRVU03UVVGRE5VSXNaMEpCUVZFc1IwRkJWeXhWUVVGVkxFTkJRVU03UVVGRk9VSXNWMEZCUnl4SFFVRmhMRU5CUVVNc2FVSkJRVk1zUlVGQlJTeGxRVUZQTEVWQlFVVXNZVUZCU3l4RlFVRkZMR1ZCUVU4c1JVRkJSU3huUWtGQlVTeERRVUZETEVOQlFVTTdRVUZSTDBRc1lVRkJTeXhIUVVGcFFqdEpRVU5vUXl4UlFVRlJMRVZCUVVVc1ZVRkJWVHRKUVVWd1FpeEhRVUZITEVWQlFVVXNSVUZCUlR0RFFVTlFMRU5CUVVNN1FVRkZSaXhoUVVGTExFTkJRVU1zUjBGQlJ5eEhRVUZITEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1YwRkJSeXhEUVVGRExFTkJRVU03UVVGRGVrSXNZVUZCU3l4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zWVVGQlN5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZGF0YVNvdXJjZXMvZGF0YVNvdXJjZUV2ZW50cy5qc1xuICoqIG1vZHVsZSBpZCA9IDYzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbnZhciBzb3J0ZXJfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vc29ydHMvc29ydGVyL3NvcnRlci5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMucHJvY2Vzc29yU2VydmljZU5hbWUgPSAnZGF0YVNvdXJjZVByb2Nlc3Nvcic7XHJcbnZhciBEYXRhU291cmNlUHJvY2Vzc29yID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERhdGFTb3VyY2VQcm9jZXNzb3Iob2JqZWN0LCBzb3J0ZXIpIHtcclxuICAgICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcclxuICAgICAgICB0aGlzLnNvcnRlciA9IHNvcnRlcjtcclxuICAgIH1cclxuICAgIERhdGFTb3VyY2VQcm9jZXNzb3IucHJvdG90eXBlLnByb2Nlc3MgPSBmdW5jdGlvbiAoc29ydHMsIGZpbHRlcnMsIHBhZ2VyLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIHByb2Nlc3NlZERhdGEgPSBkYXRhO1xyXG4gICAgICAgIHByb2Nlc3NlZERhdGEgPSB0aGlzLnNvcnQocHJvY2Vzc2VkRGF0YSwgc29ydHMpO1xyXG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5pc051bGxPckVtcHR5KGZpbHRlcnMpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICBwcm9jZXNzZWREYXRhID0gXy5yZWR1Y2UoZmlsdGVycywgZnVuY3Rpb24gKGZpbHRlcmVkRGF0YSwgZmlsdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGaWx0ZXIgdGhlIGRhdGEgc2V0IHVzaW5nIHRoZSBmaWx0ZXIgZnVuY3Rpb24gb24gdGhlIGZpbHRlclxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uZmlsdGVyKGZpbHRlcmVkRGF0YSwgZmlsdGVyLmZpbHRlci5iaW5kKGZpbHRlcikpO1xyXG4gICAgICAgICAgICB9LCBwcm9jZXNzZWREYXRhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHtcclxuICAgICAgICAgICAgY291bnQ6IChwcm9jZXNzZWREYXRhICE9IG51bGwgPyBwcm9jZXNzZWREYXRhLmxlbmd0aCA6IDApLFxyXG4gICAgICAgICAgICBmaWx0ZXJlZERhdGFTZXQ6IHByb2Nlc3NlZERhdGEsXHJcbiAgICAgICAgICAgIGRhdGFTZXQ6IHByb2Nlc3NlZERhdGEsXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXN1bHQuZGF0YVNldCA9IHRoaXMucGFnZShwcm9jZXNzZWREYXRhLCBwYWdlcik7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcbiAgICBEYXRhU291cmNlUHJvY2Vzc29yLnByb3RvdHlwZS5wcm9jZXNzQW5kQ291bnQgPSBmdW5jdGlvbiAoc29ydHMsIGZpbHRlcnMsIHBhZ2VyLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gZmlsdGVycyB0aGF0IG5lZWQgdG8gdXBkYXRlZCBvcHRpb24gY291bnRzLCB1c2UgdGhlIG5vcm1hbCBwcm9jZXNzb3JcclxuICAgICAgICBpZiAodGhpcy5vYmplY3QuaXNOdWxsT3JFbXB0eShmaWx0ZXJzKVxyXG4gICAgICAgICAgICB8fCBfLnNvbWUoZmlsdGVycywgZnVuY3Rpb24gKGZpbHRlcikgeyByZXR1cm4gXy5pc0Z1bmN0aW9uKGZpbHRlci51cGRhdGVPcHRpb25Db3VudHMpOyB9KSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvY2Vzcyhzb3J0cywgZmlsdGVycywgcGFnZXIsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcHJvY2Vzc2VkRGF0YSA9IGRhdGE7XHJcbiAgICAgICAgcHJvY2Vzc2VkRGF0YSA9IHRoaXMuc29ydChwcm9jZXNzZWREYXRhLCBzb3J0cyk7XHJcbiAgICAgICAgdmFyIHdyYXBwZWREYXRhID0gdGhpcy53cmFwRGF0YShwcm9jZXNzZWREYXRhKTtcclxuICAgICAgICAvLyBSdW4gZmlsdHJhdGlvbiBsb2dpYyBhbmQgY29tcHV0ZSB2aXNpYmxlIGl0ZW1zXHJcbiAgICAgICAgXy5lYWNoKGZpbHRlcnMsIGZ1bmN0aW9uIChmaWx0ZXIgLyogZmlsdGVycy5JRmlsdGVyV2l0aENvdW50cyAqLykge1xyXG4gICAgICAgICAgICBfLmVhY2god3JhcHBlZERhdGEsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmZpbHRlckRhdGFbZmlsdGVyLnR5cGVdID0gZmlsdGVyLmZpbHRlcihpdGVtLmRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBHaXZlIGVhY2ggZmlsdGVyIGEgY2hhbmNlIHRvIHVwZGF0ZSBvcHRpb24gY291bnRzXHJcbiAgICAgICAgXy5lYWNoKGZpbHRlcnMsIGZ1bmN0aW9uIChmaWx0ZXIgLyogZmlsdGVycy5JRmlsdGVyV2l0aENvdW50cyAqLykge1xyXG4gICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKGZpbHRlci51cGRhdGVPcHRpb25Db3VudHMpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb3RoZXJGaWx0ZXJzQXBwbGllZCA9IF8uZmlsdGVyKHdyYXBwZWREYXRhLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9taXQgdGhlIHRydWUgb3IgZmFsc2Ugb2YgdGhlIGN1cnJlbnQgZmlsdGVyIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gIG9ubHkgZmlsdGVyIG91dCBpdGVtcyByZW1vdmVkIGJ5IG90aGVyIGZpbHRlcnNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmlsdGVyRGF0YSA9IF8ub21pdChpdGVtLmZpbHRlckRhdGEsIGZpbHRlci50eXBlKTsgLy8qZmlsdGVyRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLmV2ZXJ5KF8udmFsdWVzKGZpbHRlckRhdGEpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZmlsdGVyLnVwZGF0ZU9wdGlvbkNvdW50cyhfdGhpcy51bndyYXBEYXRhKG90aGVyRmlsdGVyc0FwcGxpZWQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEZpbHRlciBkb3duIHRvIGZpbmFsIGRhdGEgc2V0IGJ5IHJlbW92aW5nIGl0ZW1zIHRoYXQgZG9uJ3QgbWF0Y2ggYWxsIGZpbHRlcnNcclxuICAgICAgICB3cmFwcGVkRGF0YSA9IF8uZmlsdGVyKHdyYXBwZWREYXRhLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICByZXR1cm4gXy5ldmVyeShfLnZhbHVlcyhpdGVtLmZpbHRlckRhdGEpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBwcm9jZXNzZWREYXRhID0gdGhpcy51bndyYXBEYXRhKHdyYXBwZWREYXRhKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0ge1xyXG4gICAgICAgICAgICBjb3VudDogcHJvY2Vzc2VkRGF0YS5sZW5ndGgsXHJcbiAgICAgICAgICAgIGZpbHRlcmVkRGF0YVNldDogcHJvY2Vzc2VkRGF0YSxcclxuICAgICAgICAgICAgZGF0YVNldDogcHJvY2Vzc2VkRGF0YSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJlc3VsdC5kYXRhU2V0ID0gdGhpcy5wYWdlKHByb2Nlc3NlZERhdGEsIHBhZ2VyKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuICAgIERhdGFTb3VyY2VQcm9jZXNzb3IucHJvdG90eXBlLnNvcnQgPSBmdW5jdGlvbiAoZGF0YSwgc29ydHMpIHtcclxuICAgICAgICBpZiAodGhpcy5vYmplY3QuaXNOdWxsT3JFbXB0eShzb3J0cykgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNvcnRlci5zb3J0KGRhdGEsIHNvcnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9O1xyXG4gICAgRGF0YVNvdXJjZVByb2Nlc3Nvci5wcm90b3R5cGUucGFnZSA9IGZ1bmN0aW9uIChkYXRhLCBwYWdlcikge1xyXG4gICAgICAgIGlmIChwYWdlciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwYWdlci5maWx0ZXIoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfTtcclxuICAgIERhdGFTb3VyY2VQcm9jZXNzb3IucHJvdG90eXBlLndyYXBEYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gXy5tYXAoZGF0YSwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IGl0ZW0sXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJEYXRhOiB7fSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEYXRhU291cmNlUHJvY2Vzc29yLnByb3RvdHlwZS51bndyYXBEYXRhID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gXy5tYXAoZGF0YSwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGl0ZW0uZGF0YTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEYXRhU291cmNlUHJvY2Vzc29yLiRpbmplY3QgPSBbX19vYmplY3Quc2VydmljZU5hbWUsIHNvcnRlcl9zZXJ2aWNlXzEuc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIERhdGFTb3VyY2VQcm9jZXNzb3I7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRGF0YVNvdXJjZVByb2Nlc3NvciA9IERhdGFTb3VyY2VQcm9jZXNzb3I7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVpHRjBZVk52ZFhKalpWQnliMk5sYzNOdmNpNXpaWEoyYVdObExtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpWkdGMFlWTnZkWEpqWlZCeWIyTmxjM052Y2k1elpYSjJhV05sTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenRCUVVWaUxFbEJRVmtzUTBGQlF5eFhRVUZOTEZGQlFWRXNRMEZCUXl4RFFVRkJPMEZCUlRWQ0xEWkRRVUZyUXl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlEycEZMRWxCUVU4c1VVRkJVU3hIUVVGSExIVkRRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCU1d4RExDdENRVWRQTEdkRFFVRm5ReXhEUVVGRExFTkJRVUU3UVVGRk4wSXNORUpCUVc5Q0xFZEJRVmNzY1VKQlFYRkNMRU5CUVVNN1FVRXdRbWhGTzBsQlJVTXNOa0pCUVc5Q0xFMUJRU3RDTEVWQlEzWkRMRTFCUVdVN1VVRkVVQ3hYUVVGTkxFZEJRVTRzVFVGQlRTeERRVUY1UWp0UlFVTjJReXhYUVVGTkxFZEJRVTRzVFVGQlRTeERRVUZUTzBsQlFVa3NRMEZCUXp0SlFVVm9ReXh4UTBGQlR5eEhRVUZRTEZWQlFXMUNMRXRCUVdNc1JVRkRNMElzVDBGQk1FSXNSVUZETVVJc1MwRkJhVUlzUlVGRGFrSXNTVUZCYVVJN1VVRkRkRUlzU1VGQlNTeGhRVUZoTEVkQlFXZENMRWxCUVVrc1EwRkJRenRSUVVWMFF5eGhRVUZoTEVkQlFVY3NTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhoUVVGaExFVkJRVVVzUzBGQlN5eERRVUZETEVOQlFVTTdVVUZGYUVRc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4aFFVRmhMRU5CUVVNc1QwRkJUeXhEUVVGRExFdEJRVXNzUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTnNSQ3hoUVVGaExFZEJRVWNzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4UFFVRlBMRVZCUVVVc1ZVRkJReXhaUVVGNVFpeEZRVUZGTEUxQlFYVkNPMmRDUVVOd1JpdzRSRUZCT0VRN1owSkJRemxFTEUxQlFVMHNRMEZCUXl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExGbEJRVmtzUlVGQlJTeE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6TkVMRU5CUVVNc1JVRkJSU3hoUVVGaExFTkJRVU1zUTBGQlF6dFJRVU51UWl4RFFVRkRPMUZCUlVRc1NVRkJTU3hOUVVGTkxFZEJRVGhDTzFsQlEzWkRMRXRCUVVzc1JVRkJSU3hEUVVGRExHRkJRV0VzU1VGQlNTeEpRVUZKTEVkQlFVY3NZVUZCWVN4RFFVRkRMRTFCUVUwc1IwRkJSeXhEUVVGRExFTkJRVU03V1VGRGVrUXNaVUZCWlN4RlFVRkZMR0ZCUVdFN1dVRkRPVUlzVDBGQlR5eEZRVUZGTEdGQlFXRTdVMEZEZEVJc1EwRkJRenRSUVVWR0xFMUJRVTBzUTBGQlF5eFBRVUZQTEVkQlFVY3NTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhoUVVGaExFVkJRVVVzUzBGQlN5eERRVUZETEVOQlFVTTdVVUZEYWtRc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF6dEpRVU5tTEVOQlFVTTdTVUZGUkN3MlEwRkJaU3hIUVVGbUxGVkJRVEpDTEV0QlFXTXNSVUZEYWtNc1QwRkJiME1zUlVGRGNFTXNTMEZCYVVJc1JVRkRha0lzU1VGQmFVSTdVVUZJZWtJc2FVSkJiMFJETzFGQmFFUkJMSFZHUVVGMVJqdFJRVU4yUml4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEdGQlFXRXNRMEZCUXl4UFFVRlBMRU5CUVVNN1pVRkRiRU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRVZCUVVVc1ZVRkJReXhOUVVGcFF5eEpRVUZuUWl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eE5RVUZOTEVOQlFVTXNhMEpCUVd0Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGNFa3NUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUzBGQlN5eEZRVUZGTEU5QlFVOHNSVUZCUlN4TFFVRkxMRVZCUVVVc1NVRkJTU3hEUVVGRExFTkJRVU03VVVGRGJFUXNRMEZCUXp0UlFVVkVMRWxCUVVrc1lVRkJZU3hIUVVGblFpeEpRVUZKTEVOQlFVTTdVVUZGZEVNc1lVRkJZU3hIUVVGSExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNZVUZCWVN4RlFVRkZMRXRCUVVzc1EwRkJReXhEUVVGRE8xRkJSV2hFTEVsQlFVa3NWMEZCVnl4SFFVRTRRaXhKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEdGQlFXRXNRMEZCUXl4RFFVRkRPMUZCUlRGRkxHbEVRVUZwUkR0UlFVTnFSQ3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNSVUZCUlN4VlFVRkRMRTFCUVZjc1EwRkJReXdyUWtGQkswSTdXVUZETTBRc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVWQlFVVXNWVUZCUXl4SlFVRTJRanRuUWtGRGFrUXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdXVUZEZWtRc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRFNpeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVVklMRzlFUVVGdlJEdFJRVU53UkN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUlVGQlJTeFZRVUZETEUxQlFWY3NRMEZCUXl3clFrRkJLMEk3V1VGRE0wUXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eE5RVUZOTEVOQlFVTXNhMEpCUVd0Q0xFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdaMEpCUXpkRExFbEJRVWtzYlVKQlFXMUNMRWRCUVRoQ0xFTkJRVU1zUTBGQlF5eE5RVUZOTEVOQlFVTXNWMEZCVnl4RlFVRkZMRlZCUVVNc1NVRkJOa0k3YjBKQlEzaEhMR3RFUVVGclJEdHZRa0ZEYkVRc2EwUkJRV3RFTzI5Q1FVTnNSQ3hKUVVGSkxGVkJRVlVzUjBGQlVTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGVkxFVkJRVVVzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1lVRkJZVHR2UWtGRGVrVXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU4wUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRlNDeE5RVUZOTEVOQlFVTXNhMEpCUVd0Q0xFTkJRVU1zUzBGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4dFFrRkJiVUlzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEYWtVc1EwRkJRenRSUVVOR0xFTkJRVU1zUTBGQlF5eERRVUZETzFGQlJVZ3NLMFZCUVN0Rk8xRkJReTlGTEZkQlFWY3NSMEZCUnl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExGZEJRVmNzUlVGQlJTeFZRVUZETEVsQlFUWkNPMWxCUTJwRkxFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkRNME1zUTBGQlF5eERRVUZETEVOQlFVTTdVVUZGU0N4aFFVRmhMRWRCUVVjc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXp0UlFVVTNReXhKUVVGSkxFMUJRVTBzUjBGQk9FSTdXVUZEZGtNc1MwRkJTeXhGUVVGRkxHRkJRV0VzUTBGQlF5eE5RVUZOTzFsQlF6TkNMR1ZCUVdVc1JVRkJSU3hoUVVGaE8xbEJRemxDTEU5QlFVOHNSVUZCUlN4aFFVRmhPMU5CUTNSQ0xFTkJRVU03VVVGRlJpeE5RVUZOTEVOQlFVTXNUMEZCVHl4SFFVRkhMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zWVVGQllTeEZRVUZGTEV0QlFVc3NRMEZCUXl4RFFVRkRPMUZCUTJwRUxFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTTdTVUZEWml4RFFVRkRPMGxCUlVRc2EwTkJRVWtzUjBGQlNpeFZRVUZuUWl4SlFVRnBRaXhGUVVGRkxFdEJRV003VVVGRGFFUXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eGhRVUZoTEVOQlFVTXNTMEZCU3l4RFFVRkRMRXRCUVVzc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU5vUkN4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RlFVRkZMRXRCUVVzc1EwRkJReXhEUVVGRE8xRkJRM1JETEVOQlFVTTdVVUZEUkN4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRE8wbEJRMklzUTBGQlF6dEpRVVZFTEd0RFFVRkpMRWRCUVVvc1ZVRkJaMElzU1VGQmFVSXNSVUZCUlN4TFFVRnBRanRSUVVOdVJDeEZRVUZGTEVOQlFVTXNRMEZCUXl4TFFVRkxMRWxCUVVrc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU51UWl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0UlFVTXpRaXhEUVVGRE8xRkJRMFFzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXp0SlFVTmlMRU5CUVVNN1NVRkZUeXh6UTBGQlVTeEhRVUZvUWl4VlFVRTBRaXhKUVVGcFFqdFJRVU0xUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVWQlFVVXNWVUZCUXl4SlFVRmxPMWxCUTJ4RExFMUJRVTBzUTBGQlF6dG5Ra0ZEVGl4SlFVRkpMRVZCUVVVc1NVRkJTVHRuUWtGRFZpeFZRVUZWTEVWQlFVVXNSVUZCUlR0aFFVTmtMRU5CUVVNN1VVRkRTQ3hEUVVGRExFTkJRVU1zUTBGQlF6dEpRVU5LTEVOQlFVTTdTVUZGVHl4M1EwRkJWU3hIUVVGc1FpeFZRVUU0UWl4SlFVRXJRanRSUVVNMVJDeE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFVkJRVVVzVlVGQlF5eEpRVUUyUWp0WlFVTm9SQ3hOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXp0UlFVTnNRaXhEUVVGRExFTkJRVU1zUTBGQlF6dEpRVU5LTEVOQlFVTTdTVUU1UjAwc01rSkJRVThzUjBGQllTeERRVUZETEZGQlFWRXNRMEZCUXl4WFFVRlhMRVZCUVVVc05FSkJRV2xDTEVOQlFVTXNRMEZCUXp0SlFTdEhkRVVzTUVKQlFVTTdRVUZCUkN4RFFVRkRMRUZCYUVoRUxFbEJaMGhETzBGQmFFaFpMREpDUVVGdFFpeHpRa0ZuU0M5Q0xFTkJRVUVpZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RhdGFTb3VyY2VzL2RhdGFTb3VyY2VQcm9jZXNzb3Iuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDY0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi90eXBpbmdzL2xvZGFzaFR5cGVFeHRlbnNpb25zLmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuZGF0YVNvdXJjZXMuZGF0YVBhZ2VyJztcclxuZXhwb3J0cy5mYWN0b3J5TmFtZSA9ICdkYXRhUGFnZXInO1xyXG5leHBvcnRzLmRlZmF1bHRQYWdlU2l6ZSA9IDEwO1xyXG52YXIgRGF0YVBhZ2VyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERhdGFQYWdlcigpIHtcclxuICAgICAgICB0aGlzLnBhZ2VOdW1iZXIgPSAxO1xyXG4gICAgICAgIHRoaXMucGFnZVNpemUgPSBleHBvcnRzLmRlZmF1bHRQYWdlU2l6ZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShEYXRhUGFnZXIucHJvdG90eXBlLCBcInN0YXJ0SXRlbVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAodGhpcy5wYWdlTnVtYmVyIC0gMSkgKiB0aGlzLnBhZ2VTaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRGF0YVBhZ2VyLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAoZGF0YVNldCkge1xyXG4gICAgICAgIHJldHVybiBfKGRhdGFTZXQpXHJcbiAgICAgICAgICAgIC5kcm9wKHRoaXMuc3RhcnRJdGVtKVxyXG4gICAgICAgICAgICAudGFrZSh0aGlzLnBhZ2VTaXplKVxyXG4gICAgICAgICAgICAudmFsdWUoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGF0YVBhZ2VyO1xyXG59KCkpO1xyXG5leHBvcnRzLkRhdGFQYWdlciA9IERhdGFQYWdlcjtcclxuZnVuY3Rpb24gZGF0YVBhZ2VyRmFjdG9yeSgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRhUGFnZXIoKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmRhdGFQYWdlckZhY3RvcnkgPSBkYXRhUGFnZXJGYWN0b3J5O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmZhY3RvcnkoZXhwb3J0cy5mYWN0b3J5TmFtZSwgZGF0YVBhZ2VyRmFjdG9yeSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVpHRjBZVkJoWjJWeUxuTmxjblpwWTJVdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUprWVhSaFVHRm5aWEl1YzJWeWRtbGpaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTdzBSVUZCTkVVN1FVRkZOVVVzV1VGQldTeERRVUZETzBGQlJXSXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGRGJrTXNTVUZCV1N4RFFVRkRMRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGRmFrSXNhMEpCUVZVc1IwRkJWeXh6UkVGQmMwUXNRMEZCUXp0QlFVTTFSU3h0UWtGQlZ5eEhRVUZYTEZkQlFWY3NRMEZCUXp0QlFVVnNReXgxUWtGQlpTeEhRVUZYTEVWQlFVVXNRMEZCUXp0QlFWTjRRenRKUVVGQk8xRkJRME1zWlVGQlZTeEhRVUZYTEVOQlFVTXNRMEZCUXp0UlFVTjJRaXhoUVVGUkxFZEJRVmNzZFVKQlFXVXNRMEZCUXp0SlFWbHdReXhEUVVGRE8wbEJWa0VzYzBKQlFVa3NaME5CUVZNN1lVRkJZanRaUVVORExFMUJRVTBzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VlFVRlZMRWRCUVVjc1EwRkJReXhEUVVGRExFZEJRVWNzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXp0UlFVTTVReXhEUVVGRE96czdUMEZCUVR0SlFVVkVMREJDUVVGTkxFZEJRVTRzVlVGQlR5eFBRVUZqTzFGQlEzQkNMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETzJGQlEyWXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU03WVVGRGNFSXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU03WVVGRGJrSXNTMEZCU3l4RlFVRkZMRU5CUVVNN1NVRkRXQ3hEUVVGRE8wbEJRMFlzWjBKQlFVTTdRVUZCUkN4RFFVRkRMRUZCWkVRc1NVRmpRenRCUVdSWkxHbENRVUZUTEZsQlkzSkNMRU5CUVVFN1FVRk5SRHRKUVVORExGbEJRVmtzUTBGQlF6dEpRVU5pTEUxQlFVMHNRMEZCUXp0UlFVTk9MRmRCUVZjN1dVRkRWaXhOUVVGTkxFTkJRVU1zU1VGQlNTeFRRVUZUTEVWQlFVVXNRMEZCUXp0UlFVTjRRaXhEUVVGRE8wdEJRMFFzUTBGQlF6dEJRVU5JTEVOQlFVTTdRVUZRWlN4M1FrRkJaMElzYlVKQlR5OUNMRU5CUVVFN1FVRkZSQ3hQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVc1JVRkJSU3hEUVVGRE8wdEJRelZDTEU5QlFVOHNRMEZCUXl4dFFrRkJWeXhGUVVGRkxHZENRVUZuUWl4RFFVRkRMRU5CUVVNaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9kYXRhU291cmNlcy9kYXRhUGFnZXIvZGF0YVBhZ2VyLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA2NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59O1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fb2JzZXJ2YWJsZSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYnNlcnZhYmxlO1xyXG52YXIgX19hcnJheSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5hcnJheTtcclxudmFyIF9fc3luY2hyb25pemVkUmVxdWVzdHMgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMuc3luY2hyb25pemVkUmVxdWVzdHM7XHJcbnZhciBhc3luY0RhdGFTb3VyY2Vfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vYXN5bmNEYXRhU291cmNlLnNlcnZpY2UnKTtcclxudmFyIGRhdGFTb3VyY2VQcm9jZXNzb3Jfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vZGF0YVNvdXJjZVByb2Nlc3Nvci5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuZGF0YVNvdXJjZXMuZGF0YVNlcnZpY2VEYXRhU291cmNlJztcclxuZXhwb3J0cy5mYWN0b3J5TmFtZSA9ICdkYXRhU2VydmljZURhdGFTb3VyY2UnO1xyXG52YXIgRGF0YVNlcnZpY2VEYXRhU291cmNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhEYXRhU2VydmljZURhdGFTb3VyY2UsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEYXRhU2VydmljZURhdGFTb3VyY2UoZ2V0RGF0YVNldCwgb2JzZXJ2YWJsZUZhY3RvcnksIGRhdGFTb3VyY2VQcm9jZXNzb3IsIGFycmF5LCBzeW5jaHJvbml6ZWRSZXF1ZXN0c0ZhY3RvcnkpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBnZXREYXRhU2V0LCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIHN5bmNocm9uaXplZFJlcXVlc3RzRmFjdG9yeSk7XHJcbiAgICAgICAgdGhpcy5jb3VudEZpbHRlckdyb3VwcyA9IHRydWU7XHJcbiAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihnZXREYXRhU2V0KSkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBEYXRhU2VydmljZURhdGFTb3VyY2U7XHJcbn0oYXN5bmNEYXRhU291cmNlX3NlcnZpY2VfMS5Bc3luY0RhdGFTb3VyY2UpKTtcclxuZXhwb3J0cy5EYXRhU2VydmljZURhdGFTb3VyY2UgPSBEYXRhU2VydmljZURhdGFTb3VyY2U7XHJcbmRhdGFTZXJ2aWNlRGF0YVNvdXJjZUZhY3RvcnkuJGluamVjdCA9IFtfX29ic2VydmFibGUuZmFjdG9yeU5hbWUsIGRhdGFTb3VyY2VQcm9jZXNzb3Jfc2VydmljZV8xLnByb2Nlc3NvclNlcnZpY2VOYW1lLCBfX2FycmF5LnNlcnZpY2VOYW1lLCBfX3N5bmNocm9uaXplZFJlcXVlc3RzLmZhY3RvcnlOYW1lXTtcclxuZnVuY3Rpb24gZGF0YVNlcnZpY2VEYXRhU291cmNlRmFjdG9yeShvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIHN5bmNocm9uaXplZFJlcXVlc3RzKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldEluc3RhbmNlOiBmdW5jdGlvbiAoZ2V0RGF0YVNldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGFTZXJ2aWNlRGF0YVNvdXJjZShnZXREYXRhU2V0LCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIHN5bmNocm9uaXplZFJlcXVlc3RzKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmRhdGFTZXJ2aWNlRGF0YVNvdXJjZUZhY3RvcnkgPSBkYXRhU2VydmljZURhdGFTb3VyY2VGYWN0b3J5O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtfX29ic2VydmFibGUubW9kdWxlTmFtZSwgX19hcnJheS5tb2R1bGVOYW1lXSlcclxuICAgIC5mYWN0b3J5KGV4cG9ydHMuZmFjdG9yeU5hbWUsIGRhdGFTZXJ2aWNlRGF0YVNvdXJjZUZhY3RvcnkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laR0YwWVZObGNuWnBZMlZFWVhSaFUyOTFjbU5sTG5ObGNuWnBZMlV1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SmtZWFJoVTJWeWRtbGpaVVJoZEdGVGIzVnlZMlV1YzJWeWRtbGpaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdPenM3T3p0QlFVVmlMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlEyNURMRWxCUVZrc1EwRkJReXhYUVVGTkxGRkJRVkVzUTBGQlF5eERRVUZCTzBGQlJUVkNMRFpEUVVGNVFpdzRRa0ZCT0VJc1EwRkJReXhEUVVGQk8wRkJRM2hFTEVsQlFVOHNXVUZCV1N4SFFVRkhMSFZEUVVGUkxFTkJRVU1zVlVGQlZTeERRVUZETzBGQlF6RkRMRWxCUVU4c1QwRkJUeXhIUVVGSExIVkRRVUZSTEVOQlFVTXNTMEZCU3l4RFFVRkRPMEZCUTJoRExFbEJRVThzYzBKQlFYTkNMRWRCUVVjc2RVTkJRVkVzUTBGQlF5eHZRa0ZCYjBJc1EwRkJRenRCUVVVNVJDeDNRMEZCYjBVc05FSkJRVFJDTEVOQlFVTXNRMEZCUVR0QlFVTnFSeXcwUTBGQk1rUXNaME5CUVdkRExFTkJRVU1zUTBGQlFUdEJRVVZxUml4clFrRkJWU3hIUVVGWExHdEZRVUZyUlN4RFFVRkRPMEZCUTNoR0xHMUNRVUZYTEVkQlFWY3NkVUpCUVhWQ0xFTkJRVU03UVVGUmVrUTdTVUZCYzBRc2VVTkJRVEJDTzBsQlF5OUZMQ3RDUVVGWkxGVkJRVEpETEVWQlEyNUVMR2xDUVVGNVJDeEZRVU42UkN4dFFrRkJlVU1zUlVGRGVrTXNTMEZCTkVJc1JVRkROVUlzTWtKQlFXZEdPMUZCUTI1R0xHdENRVUZOTEZWQlFWVXNSVUZCUlN4cFFrRkJhVUlzUlVGQlJTeHRRa0ZCYlVJc1JVRkJSU3hMUVVGTExFVkJRVVVzTWtKQlFUSkNMRU5CUVVNc1EwRkJRenRSUVVNNVJpeEpRVUZKTEVOQlFVTXNhVUpCUVdsQ0xFZEJRVWNzU1VGQlNTeERRVUZETzFGQlJUbENMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRemxDTEVsQlFVa3NRMEZCUXl4TlFVRk5MRVZCUVVVc1EwRkJRenRSUVVObUxFTkJRVU03U1VGRFJpeERRVUZETzBsQlEwWXNORUpCUVVNN1FVRkJSQ3hEUVVGRExFRkJZa1FzUTBGQmMwUXNlVU5CUVdVc1IwRmhjRVU3UVVGaVdTdzJRa0ZCY1VJc2QwSkJZV3BETEVOQlFVRTdRVUZOUkN3MFFrRkJORUlzUTBGQlF5eFBRVUZQTEVkQlFVY3NRMEZCUXl4WlFVRlpMRU5CUVVNc1YwRkJWeXhGUVVGRkxHdEVRVUZ2UWl4RlFVRkZMRTlCUVU4c1EwRkJReXhYUVVGWExFVkJRVVVzYzBKQlFYTkNMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU03UVVGRGFrb3NjME5CUVRaRExHbENRVUY1UkN4RlFVTXhSaXh0UWtGQmVVTXNSVUZEZWtNc1MwRkJORUlzUlVGRE5VSXNiMEpCUVhsRk8wbEJRM0JHTEZsQlFWa3NRMEZCUXp0SlFVTmlMRTFCUVUwc1EwRkJRenRSUVVOT0xGZEJRVmNzV1VGQldTeFZRVUV5UXp0WlFVTnFSU3hOUVVGTkxFTkJRVU1zU1VGQlNTeHhRa0ZCY1VJc1EwRkJhVUlzVlVGQlZTeEZRVUZGTEdsQ1FVRnBRaXhGUVVGRkxHMUNRVUZ0UWl4RlFVRkZMRXRCUVVzc1JVRkJSU3h2UWtGQmIwSXNRMEZCUXl4RFFVRkRPMUZCUTI1SkxFTkJRVU03UzBGRFJDeERRVUZETzBGQlEwZ3NRMEZCUXp0QlFWWmxMRzlEUVVFMFFpd3JRa0ZWTTBNc1EwRkJRVHRCUVVWRUxFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNhMEpCUVZVc1JVRkJSU3hEUVVGRExGbEJRVmtzUTBGQlF5eFZRVUZWTEVWQlFVVXNUMEZCVHl4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRE8wdEJRM1pGTEU5QlFVOHNRMEZCUXl4dFFrRkJWeXhGUVVGRkxEUkNRVUUwUWl4RFFVRkRMRU5CUVVNaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9kYXRhU291cmNlcy9kYXRhU2VydmljZURhdGFTb3VyY2UvZGF0YVNlcnZpY2VEYXRhU291cmNlLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA2NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59O1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fb2JzZXJ2YWJsZSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYnNlcnZhYmxlO1xyXG52YXIgX19hcnJheSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5hcnJheTtcclxudmFyIF9fb2JqZWN0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxudmFyIF9fc3luY2hyb25pemVkUmVxdWVzdHMgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMuc3luY2hyb25pemVkUmVxdWVzdHM7XHJcbnZhciBhc3luY0RhdGFTb3VyY2Vfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vYXN5bmNEYXRhU291cmNlLnNlcnZpY2UnKTtcclxudmFyIGRhdGFTb3VyY2VQcm9jZXNzb3Jfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vZGF0YVNvdXJjZVByb2Nlc3Nvci5zZXJ2aWNlJyk7XHJcbnZhciBzb3J0XzEgPSByZXF1aXJlKCcuLi8uLi9zb3J0cy9zb3J0Jyk7XHJcbnZhciBldmVudHMgPSByZXF1aXJlKCcuLi9kYXRhU291cmNlRXZlbnRzJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuZGF0YVNvdXJjZXMuc2VydmVyU2lkZURhdGFTb3VyY2UnO1xyXG5leHBvcnRzLmZhY3RvcnlOYW1lID0gJ3NlcnZlclNpZGVEYXRhU291cmNlJztcclxudmFyIFNlcnZlclNpZGVEYXRhU291cmNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTZXJ2ZXJTaWRlRGF0YVNvdXJjZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNlcnZlclNpZGVEYXRhU291cmNlKGdldERhdGFTZXQsIG9ic2VydmFibGVGYWN0b3J5LCBkYXRhU291cmNlUHJvY2Vzc29yLCBhcnJheSwgb2JqZWN0LCBzeW5jaHJvbml6ZWRSZXF1ZXN0c0ZhY3RvcnkpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBnZXREYXRhU2V0LCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIHN5bmNocm9uaXplZFJlcXVlc3RzRmFjdG9yeSk7XHJcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICB9XHJcbiAgICBTZXJ2ZXJTaWRlRGF0YVNvdXJjZS5wcm90b3R5cGUucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJlbG9hZCgpO1xyXG4gICAgfTtcclxuICAgIFNlcnZlclNpZGVEYXRhU291cmNlLnByb3RvdHlwZS5nZXRQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZpbHRlckRpY3Rpb25hcnkgPSB0aGlzLmFycmF5LnRvRGljdGlvbmFyeSh0aGlzLmZpbHRlcnMsIGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlci50eXBlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGZpbHRlcnM6IF8ubWFwVmFsdWVzKGZpbHRlckRpY3Rpb25hcnksIGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24oZmlsdGVyLnNlcmlhbGl6ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBzb3J0czogXy5tYXAodGhpcy5zb3J0cywgZnVuY3Rpb24gKHNvcnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBzb3J0LmNvbHVtbi5sYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHNvcnRfMS5Tb3J0RGlyZWN0aW9uLmdldEZ1bGxOYW1lKHNvcnQuZGlyZWN0aW9uKSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBwYWdpbmc6IHtcclxuICAgICAgICAgICAgICAgIHBhZ2VOdW1iZXI6IHRoaXMucGFnZXIucGFnZU51bWJlcixcclxuICAgICAgICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VyLnBhZ2VTaXplLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgU2VydmVyU2lkZURhdGFTb3VyY2UucHJvdG90eXBlLnJlc29sdmVSZWxvYWQgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgdmFyIGRhdGEgPSByZXN1bHQ7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZXNvbHZlUmVsb2FkLmNhbGwodGhpcywgZGF0YS5kYXRhU2V0KTtcclxuICAgICAgICB0aGlzLnNldFByb2Nlc3NlZERhdGEoe1xyXG4gICAgICAgICAgICBjb3VudDogZGF0YS5jb3VudCxcclxuICAgICAgICAgICAgZmlsdGVyZWREYXRhU2V0OiBkYXRhLmRhdGFTZXQsXHJcbiAgICAgICAgICAgIGRhdGFTZXQ6IGRhdGEuZGF0YVNldCxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLm9ic2VydmFibGUuZmlyZShldmVudHMucmVkcmF3aW5nKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2VydmVyU2lkZURhdGFTb3VyY2U7XHJcbn0oYXN5bmNEYXRhU291cmNlX3NlcnZpY2VfMS5Bc3luY0RhdGFTb3VyY2UpKTtcclxuZXhwb3J0cy5TZXJ2ZXJTaWRlRGF0YVNvdXJjZSA9IFNlcnZlclNpZGVEYXRhU291cmNlO1xyXG5zZXJ2ZXJTaWRlRGF0YVNvdXJjZUZhY3RvcnkuJGluamVjdCA9IFtfX29ic2VydmFibGUuZmFjdG9yeU5hbWUsIGRhdGFTb3VyY2VQcm9jZXNzb3Jfc2VydmljZV8xLnByb2Nlc3NvclNlcnZpY2VOYW1lLCBfX2FycmF5LnNlcnZpY2VOYW1lLCBfX29iamVjdC5zZXJ2aWNlTmFtZSwgX19zeW5jaHJvbml6ZWRSZXF1ZXN0cy5mYWN0b3J5TmFtZV07XHJcbmZ1bmN0aW9uIHNlcnZlclNpZGVEYXRhU291cmNlRmFjdG9yeShvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIG9iamVjdCwgc3luY2hyb25pemVkUmVxdWVzdHNGYWN0b3J5KSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldEluc3RhbmNlOiBmdW5jdGlvbiAoZ2V0RGF0YVNldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNlcnZlclNpZGVEYXRhU291cmNlKGdldERhdGFTZXQsIG9ic2VydmFibGVGYWN0b3J5LCBkYXRhU291cmNlUHJvY2Vzc29yLCBhcnJheSwgb2JqZWN0LCBzeW5jaHJvbml6ZWRSZXF1ZXN0c0ZhY3RvcnkpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuc2VydmVyU2lkZURhdGFTb3VyY2VGYWN0b3J5ID0gc2VydmVyU2lkZURhdGFTb3VyY2VGYWN0b3J5O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmZhY3RvcnkoZXhwb3J0cy5mYWN0b3J5TmFtZSwgc2VydmVyU2lkZURhdGFTb3VyY2VGYWN0b3J5KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYzJWeWRtVnlVMmxrWlVSaGRHRlRiM1Z5WTJVdWMyVnlkbWxqWlM1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJbk5sY25abGNsTnBaR1ZFWVhSaFUyOTFjbU5sTG5ObGNuWnBZMlV1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNXVUZCV1N4RFFVRkRPenM3T3pzN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVTnVReXhKUVVGWkxFTkJRVU1zVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVVTFRaXcyUTBGQmEwTXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlFUdEJRVU5xUlN4SlFVRlBMRmxCUVZrc1IwRkJSeXgxUTBGQlVTeERRVUZETEZWQlFWVXNRMEZCUXp0QlFVTXhReXhKUVVGUExFOUJRVThzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRXRCUVVzc1EwRkJRenRCUVVOb1F5eEpRVUZQTEZGQlFWRXNSMEZCUnl4MVEwRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU5zUXl4SlFVRlBMSE5DUVVGelFpeEhRVUZITEhWRFFVRlJMRU5CUVVNc2IwSkJRVzlDTEVOQlFVTTdRVUZGT1VRc2QwTkJRVzlGTERSQ1FVRTBRaXhEUVVGRExFTkJRVUU3UVVGRGFrY3NORU5CUVRKRUxHZERRVUZuUXl4RFFVRkRMRU5CUVVFN1FVRkROVVlzY1VKQlFYRkRMR3RDUVVGclFpeERRVUZETEVOQlFVRTdRVUZEZUVRc1NVRkJXU3hOUVVGTkxGZEJRVTBzY1VKQlFYRkNMRU5CUVVNc1EwRkJRVHRCUVVWdVF5eHJRa0ZCVlN4SFFVRlhMR2xGUVVGcFJTeERRVUZETzBGQlEzWkdMRzFDUVVGWExFZEJRVmNzYzBKQlFYTkNMRU5CUVVNN1FVRXJRbmhFTzBsQlFYRkVMSGREUVVFd1FqdEpRVU01UlN3NFFrRkJXU3hWUVVFMFF5eEZRVU53UkN4cFFrRkJlVVFzUlVGRGVrUXNiVUpCUVhsRExFVkJRM3BETEV0QlFUUkNMRVZCUTNCQ0xFMUJRU3RDTEVWQlEzWkRMREpDUVVGblJqdFJRVU51Uml4clFrRkJWeXhWUVVGVkxFVkJRVVVzYVVKQlFXbENMRVZCUVVVc2JVSkJRVzFDTEVWQlFVVXNTMEZCU3l4RlFVRkZMREpDUVVFeVFpeERRVUZETEVOQlFVTTdVVUZHZUVZc1YwRkJUU3hIUVVGT0xFMUJRVTBzUTBGQmVVSTdTVUZITTBNc1EwRkJRenRKUVVWRUxITkRRVUZQTEVkQlFWQTdVVUZEUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hGUVVGRkxFTkJRVU03U1VGRFppeERRVUZETzBsQlJWTXNkME5CUVZNc1IwRkJia0k3VVVGRFF5eEpRVUZKTEdkQ1FVRm5RaXhIUVVGNVF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRmxCUVZrc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eEZRVUZGTEZWQlFVTXNUVUZCZDBNN1dVRkRNMGtzVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNN1VVRkRjRUlzUTBGQlF5eERRVUZETEVOQlFVTTdVVUZEU0N4TlFVRk5MRU5CUVVNN1dVRkRUaXhQUVVGUExFVkJRVVVzUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXl4blFrRkJaMElzUlVGQlJTeFZRVUZETEUxQlFYZERPMmRDUVVNdlJTeEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1ZVRkJWU3hEUVVGRExFMUJRVTBzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN2IwSkJRM0JETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1UwRkJVeXhGUVVGRkxFTkJRVU03WjBKQlF6TkNMRU5CUVVNN1owSkJRMFFzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXp0WlFVTmlMRU5CUVVNc1EwRkJRenRaUVVOR0xFdEJRVXNzUlVGQlJTeERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFVkJRVVVzVlVGQlF5eEpRVUZYTzJkQ1FVTndReXhOUVVGTkxFTkJRVU03YjBKQlEwNHNUVUZCVFN4RlFVRkZMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUzBGQlN6dHZRa0ZEZWtJc1UwRkJVeXhGUVVGRkxHOUNRVUZoTEVOQlFVTXNWMEZCVnl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU03YVVKQlEzQkVMRU5CUVVNN1dVRkRTQ3hEUVVGRExFTkJRVU03V1VGRFJpeE5RVUZOTEVWQlFVVTdaMEpCUTFBc1ZVRkJWU3hGUVVGRkxFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNWVUZCVlR0blFrRkRha01zVVVGQlVTeEZRVUZGTEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1VVRkJVVHRoUVVNM1FqdFRRVU5FTEVOQlFVTTdTVUZEU0N4RFFVRkRPMGxCUlZNc05FTkJRV0VzUjBGQmRrSXNWVUZCZDBJc1RVRkJWenRSUVVOc1F5eEpRVUZKTEVsQlFVa3NSMEZCYlVRc1RVRkJUU3hEUVVGRE8xRkJRMnhGTEdkQ1FVRkxMRU5CUVVNc1lVRkJZU3haUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXp0UlFVTnNReXhKUVVGSkxFTkJRVU1zWjBKQlFXZENMRU5CUVVNN1dVRkRja0lzUzBGQlN5eEZRVUZGTEVsQlFVa3NRMEZCUXl4TFFVRkxPMWxCUTJwQ0xHVkJRV1VzUlVGQlJTeEpRVUZKTEVOQlFVTXNUMEZCVHp0WlFVTTNRaXhQUVVGUExFVkJRVVVzU1VGQlNTeERRVUZETEU5QlFVODdVMEZEY2tJc1EwRkJReXhEUVVGRE8xRkJRMGdzU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETzBsQlEzaERMRU5CUVVNN1NVRkRSaXd5UWtGQlF6dEJRVUZFTEVOQlFVTXNRVUZvUkVRc1EwRkJjVVFzZVVOQlFXVXNSMEZuUkc1Rk8wRkJhRVJaTERSQ1FVRnZRaXgxUWtGblJHaERMRU5CUVVFN1FVRk5SQ3d5UWtGQk1rSXNRMEZCUXl4UFFVRlBMRWRCUVVjc1EwRkJReXhaUVVGWkxFTkJRVU1zVjBGQlZ5eEZRVUZGTEd0RVFVRnZRaXhGUVVGRkxFOUJRVThzUTBGQlF5eFhRVUZYTEVWQlFVVXNVVUZCVVN4RFFVRkRMRmRCUVZjc1JVRkJSeXh6UWtGQmMwSXNRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJRenRCUVVOMlN5eHhRMEZCTkVNc2FVSkJRWGxFTEVWQlEzWkdMRzFDUVVGNVF5eEZRVU42UXl4TFFVRTBRaXhGUVVNMVFpeE5RVUVyUWl4RlFVTXZRaXd5UWtGQlowWTdTVUZETjBZc1dVRkJXU3hEUVVGRE8wbEJRMklzVFVGQlRTeERRVUZETzFGQlEwNHNWMEZCVnl4WlFVRlpMRlZCUVRSRE8xbEJRMnhGTEUxQlFVMHNRMEZCUXl4SlFVRkpMRzlDUVVGdlFpeERRVUZaTEZWQlFWVXNSVUZCUlN4cFFrRkJhVUlzUlVGQlJTeHRRa0ZCYlVJc1JVRkJSU3hMUVVGTExFVkJRVVVzVFVGQlRTeEZRVUZGTERKQ1FVRXlRaXhEUVVGRExFTkJRVU03VVVGRE5Va3NRMEZCUXp0TFFVTkVMRU5CUVVNN1FVRkRTQ3hEUVVGRE8wRkJXR1VzYlVOQlFUSkNMRGhDUVZjeFF5eERRVUZCTzBGQlJVUXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVWQlFVVXNRMEZCUXp0TFFVTTFRaXhQUVVGUExFTkJRVU1zYlVKQlFWY3NSVUZCUlN3eVFrRkJNa0lzUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RhdGFTb3VyY2VzL3NlcnZlclNpZGVEYXRhU291cmNlL3NlcnZlclNpZGVEYXRhU291cmNlLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59O1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fb2JzZXJ2YWJsZSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYnNlcnZhYmxlO1xyXG52YXIgX19hcnJheSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5hcnJheTtcclxudmFyIGRhdGFTb3VyY2VCYXNlX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL2RhdGFTb3VyY2VCYXNlLnNlcnZpY2UnKTtcclxudmFyIGRhdGFTb3VyY2VQcm9jZXNzb3Jfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vZGF0YVNvdXJjZVByb2Nlc3Nvci5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuZGF0YVNvdXJjZXMuc2ltcGxlRGF0YVNvdXJjZSc7XHJcbmV4cG9ydHMuZmFjdG9yeU5hbWUgPSAnc2ltcGxlRGF0YVNvdXJjZSc7XHJcbnZhciBTaW1wbGVEYXRhU291cmNlID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhTaW1wbGVEYXRhU291cmNlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU2ltcGxlRGF0YVNvdXJjZShkYXRhLCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXkpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXkpO1xyXG4gICAgICAgIHRoaXMuY291bnRGaWx0ZXJHcm91cHMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnJhd0RhdGFTZXQgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMucHJvY2Vzc0RhdGEoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBTaW1wbGVEYXRhU291cmNlO1xyXG59KGRhdGFTb3VyY2VCYXNlX3NlcnZpY2VfMS5EYXRhU291cmNlQmFzZSkpO1xyXG5leHBvcnRzLlNpbXBsZURhdGFTb3VyY2UgPSBTaW1wbGVEYXRhU291cmNlO1xyXG5zaW1wbGVEYXRhU291cmNlRmFjdG9yeS4kaW5qZWN0ID0gW19fb2JzZXJ2YWJsZS5mYWN0b3J5TmFtZSwgZGF0YVNvdXJjZVByb2Nlc3Nvcl9zZXJ2aWNlXzEucHJvY2Vzc29yU2VydmljZU5hbWUsIF9fYXJyYXkuc2VydmljZU5hbWVdO1xyXG5mdW5jdGlvbiBzaW1wbGVEYXRhU291cmNlRmFjdG9yeShvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXkpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2ltcGxlRGF0YVNvdXJjZShkYXRhLCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXkpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuc2ltcGxlRGF0YVNvdXJjZUZhY3RvcnkgPSBzaW1wbGVEYXRhU291cmNlRmFjdG9yeTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbX19vYnNlcnZhYmxlLm1vZHVsZU5hbWUsIF9fYXJyYXkubW9kdWxlTmFtZV0pXHJcbiAgICAuZmFjdG9yeShleHBvcnRzLmZhY3RvcnlOYW1lLCBzaW1wbGVEYXRhU291cmNlRmFjdG9yeSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWMybHRjR3hsUkdGMFlWTnZkWEpqWlM1elpYSjJhV05sTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2ljMmx0Y0d4bFJHRjBZVk52ZFhKalpTNXpaWEoyYVdObExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEZsQlFWa3NRMEZCUXpzN096czdPMEZCUldJc1NVRkJXU3hQUVVGUExGZEJRVTBzVTBGQlV5eERRVUZETEVOQlFVRTdRVUZGYmtNc05rTkJRWGxDTERoQ1FVRTRRaXhEUVVGRExFTkJRVUU3UVVGRGVFUXNTVUZCVHl4WlFVRlpMRWRCUVVjc2RVTkJRVkVzUTBGQlF5eFZRVUZWTEVOQlFVTTdRVUZETVVNc1NVRkJUeXhQUVVGUExFZEJRVWNzZFVOQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNN1FVRkhhRU1zZFVOQlFTdENMREpDUVVFeVFpeERRVUZETEVOQlFVRTdRVUZETTBRc05FTkJRVEpFTEdkRFFVRm5ReXhEUVVGRExFTkJRVUU3UVVGRmFrWXNhMEpCUVZVc1IwRkJWeXcyUkVGQk5rUXNRMEZCUXp0QlFVTnVSaXh0UWtGQlZ5eEhRVUZYTEd0Q1FVRnJRaXhEUVVGRE8wRkJSWEJFTzBsQlFXbEVMRzlEUVVGNVFqdEpRVU42UlN3d1FrRkJXU3hKUVVGcFFpeEZRVU42UWl4cFFrRkJlVVFzUlVGRGVrUXNiVUpCUVhsRExFVkJRM3BETEV0QlFUUkNPMUZCUXk5Q0xHdENRVUZOTEdsQ1FVRnBRaXhGUVVGRkxHMUNRVUZ0UWl4RlFVRkZMRXRCUVVzc1EwRkJReXhEUVVGRE8xRkJRM0pFTEVsQlFVa3NRMEZCUXl4cFFrRkJhVUlzUjBGQlJ5eExRVUZMTEVOQlFVTTdVVUZETDBJc1NVRkJTU3hEUVVGRExGVkJRVlVzUjBGQlJ5eEpRVUZKTEVOQlFVTTdVVUZEZGtJc1NVRkJTU3hEUVVGRExGZEJRVmNzUlVGQlJTeERRVUZETzBsQlEzQkNMRU5CUVVNN1NVRkRSaXgxUWtGQlF6dEJRVUZFTEVOQlFVTXNRVUZXUkN4RFFVRnBSQ3gxUTBGQll5eEhRVlU1UkR0QlFWWlpMSGRDUVVGblFpeHRRa0ZWTlVJc1EwRkJRVHRCUVUxRUxIVkNRVUYxUWl4RFFVRkRMRTlCUVU4c1IwRkJSeXhEUVVGRExGbEJRVmtzUTBGQlF5eFhRVUZYTEVWQlFVVXNhMFJCUVc5Q0xFVkJRVVVzVDBGQlR5eERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRPMEZCUTNoSExHbERRVUYzUXl4cFFrRkJlVVFzUlVGRGJrWXNiVUpCUVhsRExFVkJRM3BETEV0QlFUUkNPMGxCUTNwRExGbEJRVmtzUTBGQlF6dEpRVU5pTEUxQlFVMHNRMEZCUXp0UlFVTk9MRmRCUVZjc1dVRkJXU3hKUVVGcFFqdFpRVU4yUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3huUWtGQlowSXNRMEZCV1N4SlFVRkpMRVZCUVVVc2FVSkJRV2xDTEVWQlFVVXNiVUpCUVcxQ0xFVkJRVVVzUzBGQlN5eERRVUZETEVOQlFVTTdVVUZETjBZc1EwRkJRenRMUVVORUxFTkJRVU03UVVGRFNDeERRVUZETzBGQlZHVXNLMEpCUVhWQ0xEQkNRVk4wUXl4RFFVRkJPMEZCUlVRc1QwRkJUeXhEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZMRU5CUVVNc1dVRkJXU3hEUVVGRExGVkJRVlVzUlVGQlJTeFBRVUZQTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNN1MwRkRka1VzVDBGQlR5eERRVUZETEcxQ1FVRlhMRVZCUVVVc2RVSkJRWFZDTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RhdGFTb3VyY2VzL3NpbXBsZURhdGFTb3VyY2Uvc2ltcGxlRGF0YVNvdXJjZS5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufTtcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29ic2VydmFibGUgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JzZXJ2YWJsZTtcclxudmFyIF9fYXJyYXkgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMuYXJyYXk7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbnZhciBfX3N5bmNocm9uaXplZFJlcXVlc3RzID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnN5bmNocm9uaXplZFJlcXVlc3RzO1xyXG52YXIgYXN5bmNEYXRhU291cmNlX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL2FzeW5jRGF0YVNvdXJjZS5zZXJ2aWNlJyk7XHJcbnZhciBkYXRhU291cmNlUHJvY2Vzc29yX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL2RhdGFTb3VyY2VQcm9jZXNzb3Iuc2VydmljZScpO1xyXG52YXIgc29ydF8xID0gcmVxdWlyZSgnLi4vLi4vc29ydHMvc29ydCcpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5jYXJkQ29udGFpbmVyLmRhdGFTb3VyY2VzLnNtYXJ0RGF0YVNvdXJjZSc7XHJcbmV4cG9ydHMuZmFjdG9yeU5hbWUgPSAnc21hcnREYXRhU291cmNlJztcclxudmFyIFNtYXJ0RGF0YVNvdXJjZSA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU21hcnREYXRhU291cmNlLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU21hcnREYXRhU291cmNlKGdldERhdGFTZXQsIG9ic2VydmFibGVGYWN0b3J5LCBkYXRhU291cmNlUHJvY2Vzc29yLCBhcnJheSwgb2JqZWN0LCBzeW5jaHJvbml6ZWRSZXF1ZXN0c0ZhY3RvcnkpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBnZXREYXRhU2V0LCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIHN5bmNocm9uaXplZFJlcXVlc3RzRmFjdG9yeSk7XHJcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgdGhpcy50aHJvdHRsZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMudGhyb3R0bGVMaW1pdCA9IDIwMDtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTbWFydERhdGFTb3VyY2UucHJvdG90eXBlLCBcImZpbHRlcnNcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZmlsdGVycztcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRlcnMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5zZXR1cFN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFNtYXJ0RGF0YVNvdXJjZS5wcm90b3R5cGUub25Tb3J0Q2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRocm90dGxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5vblNvcnRDaGFuZ2UuY2FsbCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgU21hcnREYXRhU291cmNlLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnRocm90dGxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZWZyZXNoLmNhbGwodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNtYXJ0RGF0YVNvdXJjZS5wcm90b3R5cGUuZ2V0UGFyYW1zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMudXBkYXRlQXBwbGllZEZpbHRlcnMoKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBmaWx0ZXJzOiB0aGlzLmFwcGxpZWRGaWx0ZXJzLFxyXG4gICAgICAgICAgICBzb3J0czogXy5tYXAodGhpcy5zb3J0cywgZnVuY3Rpb24gKHNvcnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sdW1uOiBzb3J0LmNvbHVtbi5sYWJlbCxcclxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHNvcnRfMS5Tb3J0RGlyZWN0aW9uLmdldEZ1bGxOYW1lKHNvcnQuZGlyZWN0aW9uKSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBwYWdpbmc6IHtcclxuICAgICAgICAgICAgICAgIHBhZ2VOdW1iZXI6IDEsXHJcbiAgICAgICAgICAgICAgICBwYWdlU2l6ZTogdGhpcy50aHJvdHRsZUxpbWl0LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgU21hcnREYXRhU291cmNlLnByb3RvdHlwZS51cGRhdGVBcHBsaWVkRmlsdGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsdGVyRGljdGlvbmFyeSA9IHRoaXMuYXJyYXkudG9EaWN0aW9uYXJ5KHRoaXMuZmlsdGVycywgZnVuY3Rpb24gKGZpbHRlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyLnR5cGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hcHBsaWVkRmlsdGVycyA9IF8ubWFwVmFsdWVzKGZpbHRlckRpY3Rpb25hcnksIGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihmaWx0ZXIuc2VyaWFsaXplKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbHRlci5zZXJpYWxpemUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmFwcGxpZWRGaWx0ZXJzID0gXy5vbWl0QnkodGhpcy5hcHBsaWVkRmlsdGVycywgZnVuY3Rpb24gKHZhbHVlKSB7IHJldHVybiB2YWx1ZSA9PSBudWxsOyB9KTtcclxuICAgIH07XHJcbiAgICBTbWFydERhdGFTb3VyY2UucHJvdG90eXBlLnNldHVwU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF8uZWFjaCh0aGlzLnN1YnNjcmlwdGlvbnMsIGZ1bmN0aW9uIChzdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgc3Vic2NyaXB0aW9uLmRpc3Bvc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnN1YnNjcmlwdGlvbnMgPSBbXTtcclxuICAgICAgICBfLmVhY2godGhpcy5maWx0ZXJzLCBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmlzRnVuY3Rpb24oZmlsdGVyLnN1YnNjcmliZSkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnN1YnNjcmlwdGlvbnMucHVzaChmaWx0ZXIuc3Vic2NyaWJlKGZ1bmN0aW9uICgpIHsgX3RoaXMub25GaWx0ZXJDaGFuZ2UoZmlsdGVyKTsgfSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU21hcnREYXRhU291cmNlLnByb3RvdHlwZS5vbkZpbHRlckNoYW5nZSA9IGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICBpZiAoXy5oYXModGhpcy5hcHBsaWVkRmlsdGVycywgZmlsdGVyLnR5cGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNtYXJ0RGF0YVNvdXJjZS5wcm90b3R5cGUucmVzb2x2ZVJlbG9hZCA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHJlc3VsdDtcclxuICAgICAgICB0aGlzLnRocm90dGxlZCA9IChkYXRhLmNvdW50ID4gZGF0YS5kYXRhU2V0Lmxlbmd0aCk7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS5yZXNvbHZlUmVsb2FkLmNhbGwodGhpcywgZGF0YS5kYXRhU2V0KTtcclxuICAgICAgICB0aGlzLmNvdW50ID0gZGF0YS5jb3VudDtcclxuICAgICAgICB0aGlzLmlzRW1wdHkgPSBkYXRhLmlzRW1wdHk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFNtYXJ0RGF0YVNvdXJjZTtcclxufShhc3luY0RhdGFTb3VyY2Vfc2VydmljZV8xLkFzeW5jRGF0YVNvdXJjZSkpO1xyXG5leHBvcnRzLlNtYXJ0RGF0YVNvdXJjZSA9IFNtYXJ0RGF0YVNvdXJjZTtcclxuc21hcnREYXRhU291cmNlRmFjdG9yeS4kaW5qZWN0ID0gW19fb2JzZXJ2YWJsZS5mYWN0b3J5TmFtZSwgZGF0YVNvdXJjZVByb2Nlc3Nvcl9zZXJ2aWNlXzEucHJvY2Vzc29yU2VydmljZU5hbWUsIF9fYXJyYXkuc2VydmljZU5hbWUsIF9fb2JqZWN0LnNlcnZpY2VOYW1lLCBfX3N5bmNocm9uaXplZFJlcXVlc3RzLmZhY3RvcnlOYW1lXTtcclxuZnVuY3Rpb24gc21hcnREYXRhU291cmNlRmFjdG9yeShvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIG9iamVjdCwgc3luY2hyb25pemVkUmVxdWVzdHNGYWN0b3J5KSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldEluc3RhbmNlOiBmdW5jdGlvbiAoZ2V0RGF0YVNldCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFNtYXJ0RGF0YVNvdXJjZShnZXREYXRhU2V0LCBvYnNlcnZhYmxlRmFjdG9yeSwgZGF0YVNvdXJjZVByb2Nlc3NvciwgYXJyYXksIG9iamVjdCwgc3luY2hyb25pemVkUmVxdWVzdHNGYWN0b3J5KTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLnNtYXJ0RGF0YVNvdXJjZUZhY3RvcnkgPSBzbWFydERhdGFTb3VyY2VGYWN0b3J5O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmZhY3RvcnkoZXhwb3J0cy5mYWN0b3J5TmFtZSwgc21hcnREYXRhU291cmNlRmFjdG9yeSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWMyMWhjblJFWVhSaFUyOTFjbU5sTG5ObGNuWnBZMlV1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SnpiV0Z5ZEVSaGRHRlRiM1Z5WTJVdWMyVnlkbWxqWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3haUVVGWkxFTkJRVU03T3pzN096dEJRVVZpTEVsQlFWa3NUMEZCVHl4WFFVRk5MRk5CUVZNc1EwRkJReXhEUVVGQk8wRkJRMjVETEVsQlFWa3NRMEZCUXl4WFFVRk5MRkZCUVZFc1EwRkJReXhEUVVGQk8wRkJSelZDTERaRFFVRnJReXc0UWtGQk9FSXNRMEZCUXl4RFFVRkJPMEZCUTJwRkxFbEJRVThzV1VGQldTeEhRVUZITEhWRFFVRlJMRU5CUVVNc1ZVRkJWU3hEUVVGRE8wRkJRekZETEVsQlFVOHNUMEZCVHl4SFFVRkhMSFZEUVVGUkxFTkJRVU1zUzBGQlN5eERRVUZETzBGQlEyaERMRWxCUVU4c1VVRkJVU3hIUVVGSExIVkRRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUTJ4RExFbEJRVThzYzBKQlFYTkNMRWRCUVVjc2RVTkJRVkVzUTBGQlF5eHZRa0ZCYjBJc1EwRkJRenRCUVVVNVJDeDNRMEZCYjBVc05FSkJRVFJDTEVOQlFVTXNRMEZCUVR0QlFVTnFSeXcwUTBGQk1rUXNaME5CUVdkRExFTkJRVU1zUTBGQlFUdEJRVU0xUml4eFFrRkJjVU1zYTBKQlFXdENMRU5CUVVNc1EwRkJRVHRCUVVVM1F5eHJRa0ZCVlN4SFFVRlhMRFJFUVVFMFJDeERRVUZETzBGQlEyeEdMRzFDUVVGWExFZEJRVmNzYVVKQlFXbENMRU5CUVVNN1FVRm5RMjVFTzBsQlFXZEVMRzFEUVVFd1FqdEpRVTk2UlN4NVFrRkJXU3hWUVVFMFF5eEZRVU53UkN4cFFrRkJlVVFzUlVGRGVrUXNiVUpCUVhsRExFVkJRM3BETEV0QlFUUkNMRVZCUTNCQ0xFMUJRU3RDTEVWQlEzWkRMREpDUVVGblJqdFJRVU51Uml4clFrRkJWeXhWUVVGVkxFVkJRVVVzYVVKQlFXbENMRVZCUVVVc2JVSkJRVzFDTEVWQlFVVXNTMEZCU3l4RlFVRkZMREpDUVVFeVFpeERRVUZETEVOQlFVTTdVVUZHZUVZc1YwRkJUU3hIUVVGT0xFMUJRVTBzUTBGQmVVSTdVVUZXTTBNc1kwRkJVeXhIUVVGWkxFbEJRVWtzUTBGQlF6dFJRVWxzUWl4clFrRkJZU3hIUVVGWExFZEJRVWNzUTBGQlF6dEpRVk53UXl4RFFVRkRPMGxCUlVRc2MwSkJRVWtzYjBOQlFVODdZVUZCV0R0WlFVTkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETzFGQlEzUkNMRU5CUVVNN1lVRkZSQ3hWUVVGWkxFdEJRWGRDTzFsQlEyNURMRWxCUVVrc1EwRkJReXhSUVVGUkxFZEJRVWNzUzBGQlN5eERRVUZETzFsQlEzUkNMRWxCUVVrc1EwRkJReXhyUWtGQmEwSXNSVUZCUlN4RFFVRkRPMUZCUXpOQ0xFTkJRVU03T3p0UFFVeEJPMGxCVDBRc2MwTkJRVmtzUjBGQldqdFJRVU5ETEVWQlFVVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEzQkNMRWxCUVVrc1EwRkJReXhOUVVGTkxFVkJRVVVzUTBGQlF6dFJRVU5tTEVOQlFVTTdVVUZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRaUVVOUUxHZENRVUZMTEVOQlFVTXNXVUZCV1N4WFFVRkZMRU5CUVVNN1VVRkRkRUlzUTBGQlF6dEpRVU5HTEVOQlFVTTdTVUZGUkN4cFEwRkJUeXhIUVVGUU8xRkJRME1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGNFSXNTVUZCU1N4RFFVRkRMRTFCUVUwc1JVRkJSU3hEUVVGRE8xRkJRMllzUTBGQlF6dFJRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTFBc1owSkJRVXNzUTBGQlF5eFBRVUZQTEZkQlFVVXNRMEZCUXp0UlFVTnFRaXhEUVVGRE8wbEJRMFlzUTBGQlF6dEpRVVZUTEcxRFFVRlRMRWRCUVc1Q08xRkJRME1zU1VGQlNTeERRVUZETEc5Q1FVRnZRaXhGUVVGRkxFTkJRVU03VVVGRE5VSXNUVUZCVFN4RFFVRkRPMWxCUTA0c1QwRkJUeXhGUVVGRkxFbEJRVWtzUTBGQlF5eGpRVUZqTzFsQlF6VkNMRXRCUVVzc1JVRkJSU3hEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRVZCUVVVc1ZVRkJReXhKUVVGWE8yZENRVU53UXl4TlFVRk5MRU5CUVVNN2IwSkJRMDRzVFVGQlRTeEZRVUZGTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTenR2UWtGRGVrSXNVMEZCVXl4RlFVRkZMRzlDUVVGaExFTkJRVU1zVjBGQlZ5eERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNN2FVSkJRM0JFTEVOQlFVTTdXVUZEU0N4RFFVRkRMRU5CUVVNN1dVRkRSaXhOUVVGTkxFVkJRVVU3WjBKQlExQXNWVUZCVlN4RlFVRkZMRU5CUVVNN1owSkJRMklzVVVGQlVTeEZRVUZGTEVsQlFVa3NRMEZCUXl4aFFVRmhPMkZCUXpWQ08xTkJRMFFzUTBGQlF6dEpRVU5JTEVOQlFVTTdTVUZGVHl3NFEwRkJiMElzUjBGQk5VSTdVVUZEUXl4SlFVRkpMR2RDUVVGblFpeEhRVUY1UXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExGbEJRVmtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RlFVRkZMRlZCUVVNc1RVRkJkME03V1VGRE0wa3NUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU03VVVGRGNFSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkRTQ3hKUVVGSkxFTkJRVU1zWTBGQll5eEhRVUZITEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1owSkJRV2RDTEVWQlFVVXNWVUZCUXl4TlFVRjNRenRaUVVNMVJpeEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1ZVRkJWU3hEUVVGRExFMUJRVTBzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1owSkJRM0JETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1UwRkJVeXhGUVVGRkxFTkJRVU03V1VGRE0wSXNRMEZCUXp0WlFVTkVMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU03VVVGRFlpeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTklMRWxCUVVrc1EwRkJReXhqUVVGakxFZEJRVWNzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1kwRkJZeXhGUVVGRkxGVkJRVU1zUzBGQlZTeEpRVUZuUWl4TlFVRk5MRU5CUVVNc1MwRkJTeXhKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMGxCUTNwSExFTkJRVU03U1VGRlR5dzBRMEZCYTBJc1IwRkJNVUk3VVVGQlFTeHBRa0ZWUXp0UlFWUkJMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEdGQlFXRXNSVUZCUlN4VlFVRkRMRmxCUVRKQ08xbEJRM1JFTEZsQlFWa3NRMEZCUXl4UFFVRlBMRVZCUVVVc1EwRkJRenRSUVVONFFpeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTklMRWxCUVVrc1EwRkJReXhoUVVGaExFZEJRVWNzUlVGQlJTeERRVUZETzFGQlEzaENMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNSVUZCUlN4VlFVRkRMRTFCUVhkRE8xbEJRemRFTEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRGNFTXNTMEZCU1N4RFFVRkRMR0ZCUVdFc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTXNRMEZCUXl4alFVRmpMRXRCUVVrc1EwRkJReXhqUVVGakxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRM3BHTEVOQlFVTTdVVUZEUml4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGRlR5eDNRMEZCWXl4SFFVRjBRaXhWUVVGMVFpeE5RVUYzUXp0UlFVTTVSQ3hGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhqUVVGakxFVkJRVVVzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVNM1F5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RlFVRkZMRU5CUVVNN1VVRkRaaXhEUVVGRE8wbEJRMFlzUTBGQlF6dEpRVVZUTEhWRFFVRmhMRWRCUVhaQ0xGVkJRWGRDTEUxQlFWYzdVVUZEYkVNc1NVRkJTU3hKUVVGSkxFZEJRVzFFTEUxQlFVMHNRMEZCUXp0UlFVTnNSU3hKUVVGSkxFTkJRVU1zVTBGQlV5eEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRPMUZCUTNCRUxHZENRVUZMTEVOQlFVTXNZVUZCWVN4WlFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF6dFJRVU5zUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTTdVVUZEZUVJc1NVRkJTU3hEUVVGRExFOUJRVThzUjBGQlJ5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRPMGxCUXpkQ0xFTkJRVU03U1VGRFJpeHpRa0ZCUXp0QlFVRkVMRU5CUVVNc1FVRm9SMFFzUTBGQlowUXNlVU5CUVdVc1IwRm5SemxFTzBGQmFFZFpMSFZDUVVGbExHdENRV2RITTBJc1EwRkJRVHRCUVUxRUxITkNRVUZ6UWl4RFFVRkRMRTlCUVU4c1IwRkJSeXhEUVVGRExGbEJRVmtzUTBGQlF5eFhRVUZYTEVWQlFVVXNhMFJCUVc5Q0xFVkJRVVVzVDBGQlR5eERRVUZETEZkQlFWY3NSVUZCUlN4UlFVRlJMRU5CUVVNc1YwRkJWeXhGUVVGSExITkNRVUZ6UWl4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRE8wRkJRMnhMTEdkRFFVRjFReXhwUWtGQmVVUXNSVUZEYkVZc2JVSkJRWGxETEVWQlEzcERMRXRCUVRSQ0xFVkJRelZDTEUxQlFTdENMRVZCUXk5Q0xESkNRVUZuUmp0SlFVTTNSaXhaUVVGWkxFTkJRVU03U1VGRFlpeE5RVUZOTEVOQlFVTTdVVUZEVGl4WFFVRlhMRmxCUVZrc1ZVRkJORU03V1VGRGJFVXNUVUZCVFN4RFFVRkRMRWxCUVVrc1pVRkJaU3hEUVVGWkxGVkJRVlVzUlVGQlJTeHBRa0ZCYVVJc1JVRkJSU3h0UWtGQmJVSXNSVUZCUlN4TFFVRkxMRVZCUVVVc1RVRkJUU3hGUVVGRkxESkNRVUV5UWl4RFFVRkRMRU5CUVVNN1VVRkRka2tzUTBGQlF6dExRVU5FTEVOQlFVTTdRVUZEU0N4RFFVRkRPMEZCV0dVc09FSkJRWE5DTEhsQ1FWZHlReXhEUVVGQk8wRkJSVVFzVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4clFrRkJWU3hGUVVGRkxFVkJRVVVzUTBGQlF6dExRVU0xUWl4UFFVRlBMRU5CUVVNc2JVSkJRVmNzUlVGQlJTeHpRa0ZCYzBJc1EwRkJReXhEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9kYXRhU291cmNlcy9zbWFydERhdGFTb3VyY2Uvc21hcnREYXRhU291cmNlLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBjb2x1bW5TZWFyY2hGaWx0ZXIgPSByZXF1aXJlKCcuL2NvbHVtblNlYXJjaEZpbHRlci9jb2x1bW5TZWFyY2hGaWx0ZXIuc2VydmljZScpO1xyXG5leHBvcnRzLmNvbHVtblNlYXJjaEZpbHRlciA9IGNvbHVtblNlYXJjaEZpbHRlcjtcclxudmFyIGRhdGVGaWx0ZXIgPSByZXF1aXJlKCcuL2RhdGVGaWx0ZXIvZGF0ZUZpbHRlci5tb2R1bGUnKTtcclxudmFyIGZpbHRlckdyb3VwID0gcmVxdWlyZSgnLi9maWx0ZXJHcm91cC9maWx0ZXJHcm91cC5tb2R1bGUnKTtcclxuZXhwb3J0cy5maWx0ZXJHcm91cCA9IGZpbHRlckdyb3VwO1xyXG52YXIgc2VsZWN0RmlsdGVyID0gcmVxdWlyZSgnLi9zZWxlY3RGaWx0ZXIvc2VsZWN0RmlsdGVyLm1vZHVsZScpO1xyXG5leHBvcnRzLnNlbGVjdEZpbHRlciA9IHNlbGVjdEZpbHRlcjtcclxudmFyIGNhcmRDb250YWluZXJGaWx0ZXJzID0gcmVxdWlyZSgnLi9jYXJkQ29udGFpbmVyRmlsdGVycycpO1xyXG5fX2V4cG9ydChyZXF1aXJlKCcuL2NhcmRDb250YWluZXJGaWx0ZXJzJykpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5jYXJkQ29udGFpbmVyLmZpbHRlcnMnO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgIGNvbHVtblNlYXJjaEZpbHRlci5tb2R1bGVOYW1lLFxyXG4gICAgZGF0ZUZpbHRlci5tb2R1bGVOYW1lLFxyXG4gICAgZmlsdGVyR3JvdXAubW9kdWxlTmFtZSxcclxuICAgIHNlbGVjdEZpbHRlci5tb2R1bGVOYW1lLFxyXG4gICAgY2FyZENvbnRhaW5lckZpbHRlcnMubW9kdWxlTmFtZVxyXG5dKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWm1sc2RHVnljeTV0YjJSMWJHVXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKbWFXeDBaWEp6TG0xdlpIVnNaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdPenM3UVVGRllpeEpRVUZaTEU5QlFVOHNWMEZCVFN4VFFVRlRMRU5CUVVNc1EwRkJRVHRCUVVWdVF5eEpRVUZaTEd0Q1FVRnJRaXhYUVVGTkxHbEVRVUZwUkN4RFFVRkRMRU5CUVVFN1FVRlROMFVzTUVKQlFXdENPMEZCVWpOQ0xFbEJRVmtzVlVGQlZTeFhRVUZOTEdkRFFVRm5ReXhEUVVGRExFTkJRVUU3UVVGRE4wUXNTVUZCV1N4WFFVRlhMRmRCUVUwc2EwTkJRV3RETEVOQlFVTXNRMEZCUVR0QlFVOXVReXh0UWtGQlZ6dEJRVTU0UXl4SlFVRlpMRmxCUVZrc1YwRkJUU3h2UTBGQmIwTXNRMEZCUXl4RFFVRkJPMEZCVFhwQ0xHOUNRVUZaTzBGQlNuUkVMRWxCUVZrc2IwSkJRVzlDTEZkQlFVMHNkMEpCUVhkQ0xFTkJRVU1zUTBGQlFUdEJRVVV2UkN4cFFrRkJZeXgzUWtGQmQwSXNRMEZCUXl4RlFVRkJPMEZCU1RWQ0xHdENRVUZWTEVkQlFWY3NkME5CUVhkRExFTkJRVU03UVVGRmVrVXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTzBsQlF6RkNMR3RDUVVGclFpeERRVUZETEZWQlFWVTdTVUZETjBJc1ZVRkJWU3hEUVVGRExGVkJRVlU3U1VGRGNrSXNWMEZCVnl4RFFVRkRMRlZCUVZVN1NVRkRkRUlzV1VGQldTeERRVUZETEZWQlFWVTdTVUZGZGtJc2IwSkJRVzlDTEVOQlFVTXNWVUZCVlR0RFFVTXZRaXhEUVVGRExFTkJRVU1pZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZmlsdGVycy5tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSA3MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fb2JqZWN0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxudmFyIF9fc3RyaW5nID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnN0cmluZztcclxudmFyIF9fdHJhbnNmb3JtID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnRyYW5zZm9ybS50cmFuc2Zvcm07XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuZmlsdGVycy5jb2x1bW5TZWFyY2hGaWx0ZXInO1xyXG5leHBvcnRzLmZhY3RvcnlOYW1lID0gJ2NvbHVtblNlYXJjaEZpbHRlcic7XHJcbmV4cG9ydHMuZmlsdGVyTmFtZSA9ICdjb2x1bW4tc2VhcmNoJztcclxudmFyIENvbHVtblNlYXJjaEZpbHRlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb2x1bW5TZWFyY2hGaWx0ZXIob2JqZWN0LCBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcclxuICAgICAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcclxuICAgICAgICB0aGlzLnR5cGUgPSBleHBvcnRzLmZpbHRlck5hbWU7XHJcbiAgICB9XHJcbiAgICBDb2x1bW5TZWFyY2hGaWx0ZXIucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29sdW1uID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMub2JqZWN0LnRvU3RyaW5nKF9fdHJhbnNmb3JtLmdldFZhbHVlKGl0ZW0sIHRoaXMuY29sdW1uLmdldFZhbHVlKSk7XHJcbiAgICAgICAgdmFyIHNlYXJjaCA9IHRoaXMuc2VhcmNoVGV4dDtcclxuICAgICAgICBpZiAoIXRoaXMuY2FzZVNlbnNpdGl2ZSkge1xyXG4gICAgICAgICAgICBzZWFyY2ggPSBzZWFyY2gudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmcuY29udGFpbnModmFsdWUsIHNlYXJjaCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbHVtblNlYXJjaEZpbHRlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Db2x1bW5TZWFyY2hGaWx0ZXIgPSBDb2x1bW5TZWFyY2hGaWx0ZXI7XHJcbmNvbHVtblNlYXJjaEZpbHRlckZhY3RvcnkuJGluamVjdCA9IFtfX29iamVjdC5zZXJ2aWNlTmFtZSwgX19zdHJpbmcuc2VydmljZU5hbWVdO1xyXG5mdW5jdGlvbiBjb2x1bW5TZWFyY2hGaWx0ZXJGYWN0b3J5KG9iamVjdCwgc3RyaW5nKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldEluc3RhbmNlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sdW1uU2VhcmNoRmlsdGVyKG9iamVjdCwgc3RyaW5nKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmNvbHVtblNlYXJjaEZpbHRlckZhY3RvcnkgPSBjb2x1bW5TZWFyY2hGaWx0ZXJGYWN0b3J5O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtfX29iamVjdC5tb2R1bGVOYW1lLCBfX3N0cmluZy5tb2R1bGVOYW1lXSlcclxuICAgIC5mYWN0b3J5KGV4cG9ydHMuZmFjdG9yeU5hbWUsIGNvbHVtblNlYXJjaEZpbHRlckZhY3RvcnkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lZMjlzZFcxdVUyVmhjbU5vUm1sc2RHVnlMbk5sY25acFkyVXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKamIyeDFiVzVUWldGeVkyaEdhV3gwWlhJdWMyVnlkbWxqWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3haUVVGWkxFTkJRVU03UVVGRllpeEpRVUZaTEU5QlFVOHNWMEZCVFN4VFFVRlRMRU5CUVVNc1EwRkJRVHRCUVVWdVF5dzJRMEZCYTBNc09FSkJRVGhDTEVOQlFVTXNRMEZCUVR0QlFVTnFSU3hKUVVGUExGRkJRVkVzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVOc1F5eEpRVUZQTEZGQlFWRXNSMEZCUnl4MVEwRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU5zUXl4SlFVRlBMRmRCUVZjc1IwRkJSeXgxUTBGQlVTeERRVUZETEZOQlFWTXNRMEZCUXl4VFFVRlRMRU5CUVVNN1FVRkpka01zYTBKQlFWVXNSMEZCVnl3eVJFRkJNa1FzUTBGQlF6dEJRVU5xUml4dFFrRkJWeXhIUVVGWExHOUNRVUZ2UWl4RFFVRkRPMEZCUXpORExHdENRVUZWTEVkQlFWY3NaVUZCWlN4RFFVRkRPMEZCVVdoRU8wbEJUVU1zTkVKQlFXOUNMRTFCUVN0Q0xFVkJRM1pETEUxQlFYTkRPMUZCUkRsQ0xGZEJRVTBzUjBGQlRpeE5RVUZOTEVOQlFYbENPMUZCUTNaRExGZEJRVTBzUjBGQlRpeE5RVUZOTEVOQlFXZERPMUZCVG14RUxGTkJRVWtzUjBGQlZ5eHJRa0ZCVlN4RFFVRkRPMGxCVFRSQ0xFTkJRVU03U1VGRmRrUXNiVU5CUVUwc1IwRkJUaXhWUVVGclFpeEpRVUZsTzFGQlEyaERMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVsQlFVa3NTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVONlFpeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRPMUZCUTJJc1EwRkJRenRSUVVWRUxFbEJRVWtzUzBGQlN5eEhRVUZYTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRExGZEJRVmNzUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RlFVRkZMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVVXpSaXhKUVVGSkxFMUJRVTBzUjBGQlZ5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRPMUZCUlhKRExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGVrSXNUVUZCVFN4SFFVRkhMRTFCUVUwc1EwRkJReXhYUVVGWExFVkJRVVVzUTBGQlF6dFpRVU01UWl4TFFVRkxMRWRCUVVjc1MwRkJTeXhEUVVGRExGZEJRVmNzUlVGQlJTeERRVUZETzFGQlF6ZENMRU5CUVVNN1VVRkZSQ3hOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4UlFVRlJMRU5CUVVNc1MwRkJTeXhGUVVGRkxFMUJRVTBzUTBGQlF5eERRVUZETzBsQlF6VkRMRU5CUVVNN1NVRkRSaXg1UWtGQlF6dEJRVUZFTEVOQlFVTXNRVUY2UWtRc1NVRjVRa003UVVGNlFsa3NNRUpCUVd0Q0xIRkNRWGxDT1VJc1EwRkJRVHRCUVUxRUxIbENRVUY1UWl4RFFVRkRMRTlCUVU4c1IwRkJSeXhEUVVGRExGRkJRVkVzUTBGQlF5eFhRVUZYTEVWQlFVVXNVVUZCVVN4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRE8wRkJRMnBHTEcxRFFVRXdReXhOUVVFclFpeEZRVUZGTEUxQlFYTkRPMGxCUTJoSUxGbEJRVmtzUTBGQlF6dEpRVU5pTEUxQlFVMHNRMEZCUXp0UlFVTk9MRmRCUVZjN1dVRkRWaXhOUVVGTkxFTkJRVU1zU1VGQlNTeHJRa0ZCYTBJc1EwRkJReXhOUVVGTkxFVkJRVVVzVFVGQlRTeERRVUZETEVOQlFVTTdVVUZETDBNc1EwRkJRenRMUVVORUxFTkJRVU03UVVGRFNDeERRVUZETzBGQlVHVXNhVU5CUVhsQ0xEUkNRVTk0UXl4RFFVRkJPMEZCUlVRc1QwRkJUeXhEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZMRU5CUVVNc1VVRkJVU3hEUVVGRExGVkJRVlVzUlVGQlJTeFJRVUZSTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNN1MwRkRjRVVzVDBGQlR5eERRVUZETEcxQ1FVRlhMRVZCUVVVc2VVSkJRWGxDTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvY29sdW1uU2VhcmNoRmlsdGVyL2NvbHVtblNlYXJjaEZpbHRlci5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19kYXRlID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLmRhdGU7XHJcbnZhciBkYXRlRmlsdGVyX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4vZGF0ZUZpbHRlci5zZXJ2aWNlJyk7XHJcbnZhciBkYXRlRmlsdGVyX2NvbXBvbmVudF8xID0gcmVxdWlyZSgnLi9kYXRlRmlsdGVyLmNvbXBvbmVudCcpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5jYXJkQ29udGFpbmVyLmZpbHRlcnMuZGF0ZUZpbHRlcic7XHJcbl9fZXhwb3J0KHJlcXVpcmUoJy4vZGF0ZUZpbHRlci5zZXJ2aWNlJykpO1xyXG5fX2V4cG9ydChyZXF1aXJlKCcuL2RhdGVGaWx0ZXIuY29tcG9uZW50JykpO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtfX2RhdGUubW9kdWxlTmFtZV0pXHJcbiAgICAuZmFjdG9yeShkYXRlRmlsdGVyX3NlcnZpY2VfMS5mYWN0b3J5TmFtZSwgZGF0ZUZpbHRlcl9zZXJ2aWNlXzEuZGF0ZUZpbHRlckZhY3RvcnkpXHJcbiAgICAuY29tcG9uZW50KGRhdGVGaWx0ZXJfY29tcG9uZW50XzEuY29tcG9uZW50TmFtZSwgZGF0ZUZpbHRlcl9jb21wb25lbnRfMS5kYXRlRmlsdGVyKVxyXG4gICAgLmNvbnRyb2xsZXIoZGF0ZUZpbHRlcl9jb21wb25lbnRfMS5jb250cm9sbGVyTmFtZSwgZGF0ZUZpbHRlcl9jb21wb25lbnRfMS5EYXRlRmlsdGVyQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVpHRjBaVVpwYkhSbGNpNXRiMlIxYkdVdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUprWVhSbFJtbHNkR1Z5TG0xdlpIVnNaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdPenM3UVVGRllpeEpRVUZaTEU5QlFVOHNWMEZCVFN4VFFVRlRMRU5CUVVNc1EwRkJRVHRCUVVWdVF5dzJRMEZCZFVJc09FSkJRVGhDTEVOQlFVTXNRMEZCUVR0QlFVTjBSQ3hKUVVGUExFMUJRVTBzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRWxCUVVrc1EwRkJRenRCUVVVNVFpeHRRMEZCTmtNc2MwSkJRWE5DTEVOQlFVTXNRMEZCUVR0QlFVTndSU3h4UTBGQk9FVXNkMEpCUVhkQ0xFTkJRVU1zUTBGQlFUdEJRVVUxUml4clFrRkJWU3hIUVVGWExHMUVRVUZ0UkN4RFFVRkRPMEZCUTNCR0xHbENRVUZsTEhOQ1FVRnpRaXhEUVVGRExFVkJRVUU3UVVGRGRFTXNhVUpCUVdNc2QwSkJRWGRDTEVOQlFVTXNSVUZCUVR0QlFVVjJReXhQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVc1EwRkJReXhOUVVGTkxFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTTdTMEZETjBNc1QwRkJUeXhEUVVGRExHZERRVUZYTEVWQlFVVXNjME5CUVdsQ0xFTkJRVU03UzBGRGRrTXNVMEZCVXl4RFFVRkRMRzlEUVVGaExFVkJRVVVzYVVOQlFWVXNRMEZCUXp0TFFVTndReXhWUVVGVkxFTkJRVU1zY1VOQlFXTXNSVUZCUlN3eVEwRkJiMElzUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZGF0ZUZpbHRlci9kYXRlRmlsdGVyLm1vZHVsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fZGF0ZSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5kYXRlO1xyXG52YXIgX190cmFuc2Zvcm0gPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMudHJhbnNmb3JtLnRyYW5zZm9ybTtcclxuZXhwb3J0cy5mYWN0b3J5TmFtZSA9ICdybERhdGVGaWx0ZXJGYWN0b3J5JztcclxudmFyIERhdGVGaWx0ZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gRGF0ZUZpbHRlcihzZXR0aW5ncywgZGF0ZVV0aWxpdHkpIHtcclxuICAgICAgICB0aGlzLmRhdGVVdGlsaXR5ID0gZGF0ZVV0aWxpdHk7XHJcbiAgICAgICAgdGhpcy52YWx1ZVNlbGVjdG9yID0gc2V0dGluZ3MudmFsdWVTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLnR5cGUgPSBzZXR0aW5ncy50eXBlO1xyXG4gICAgICAgIHRoaXMuY2xlYXJCdXR0b24gPSBzZXR0aW5ncy5jbGVhckJ1dHRvbjtcclxuICAgICAgICB0aGlzLmluY2x1ZGVEYXRlUmFuZ2UgPSBzZXR0aW5ncy5pbmNsdWRlRGF0ZVJhbmdlO1xyXG4gICAgICAgIHRoaXMuaW5jbHVkZVRpbWUgPSBzZXR0aW5ncy5pbmNsdWRlVGltZSAhPSBudWxsID8gc2V0dGluZ3MuaW5jbHVkZVRpbWUgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhYmVsID0gc2V0dGluZ3MubGFiZWw7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IFwiPHJsLWRhdGUtZmlsdGVyIGZpbHRlcj1cXFwiZmlsdGVyXFxcIiBzb3VyY2U9XFxcImRhdGFTb3VyY2VcXFwiIGxhYmVsPVxcXCJ7e2ZpbHRlci5sYWJlbH19XFxcIiBpbmNsdWRlLXRpbWU9XFxcImZpbHRlci5pbmNsdWRlVGltZVxcXCJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQgICAgIGluY2x1ZGUtZGF0ZS1yYW5nZT1cXFwiZmlsdGVyLmluY2x1ZGVEYXRlUmFuZ2VcXFwiIGNsZWFyLWJ1dHRvbj1cXFwiZmlsdGVyLmNsZWFyQnV0dG9uXFxcIj48L3JsLWRhdGUtZmlsdGVyPlwiO1xyXG4gICAgfVxyXG4gICAgRGF0ZUZpbHRlci5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAoIXRoaXMuZGF0ZVV0aWxpdHkuaXNEYXRlKHRoaXMuc2VsZWN0ZWREYXRlMSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRhdGVSYW5nZSkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbURhdGUgPSB0aGlzLmdldFZhbHVlKGl0ZW0pO1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWREYXRlMSA9IHZvaWQgMDtcclxuICAgICAgICAgICAgLy9oYXZlIHRvIHNldCB0aGUgc2VsZWN0ZWREYXRlMSB0byBhIHZhbGlkIERhdGUgb2JqZWN0IGZvciBjb21wYXJpc29ucy5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0ZTEgPSBtb21lbnQodGhpcy5zZWxlY3RlZERhdGUxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vaW5jcmVhc2UgaXQgYnkgMSBkYXlzLiB0byBpbmxjdWRlIHRoZSBzZWxlY3RlYyBkYXRlIGluIHRoZSByYW5nZS5cclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRGF0ZTEgPSBtb21lbnQodGhpcy5zZWxlY3RlZERhdGUxKS5hZGQoMSwgJ2RheXMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlVXRpbGl0eS5kYXRlSW5SYW5nZShpdGVtRGF0ZSwgdGhpcy5zZWxlY3RlZERhdGUyLCB0aGlzLnNlbGVjdGVkRGF0ZTEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW5jbHVkZVRpbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVVdGlsaXR5LnNhbWVEYXRlVGltZSh0aGlzLmdldFZhbHVlKGl0ZW0pLCB0aGlzLnNlbGVjdGVkRGF0ZTEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVV0aWxpdHkuc2FtZURhdGUodGhpcy5nZXRWYWx1ZShpdGVtKSwgdGhpcy5zZWxlY3RlZERhdGUxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEYXRlRmlsdGVyLnByb3RvdHlwZS5nZXRWYWx1ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIF9fdHJhbnNmb3JtLmdldFZhbHVlKGl0ZW0sIHRoaXMudmFsdWVTZWxlY3Rvcik7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERhdGVGaWx0ZXI7XHJcbn0oKSk7XHJcbmRhdGVGaWx0ZXJGYWN0b3J5LiRpbmplY3QgPSBbX19kYXRlLnNlcnZpY2VOYW1lXTtcclxuZnVuY3Rpb24gZGF0ZUZpbHRlckZhY3RvcnkoZGF0ZVV0aWxpdHkpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uIChzZXR0aW5ncykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGVGaWx0ZXIoc2V0dGluZ3MsIGRhdGVVdGlsaXR5KTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmRhdGVGaWx0ZXJGYWN0b3J5ID0gZGF0ZUZpbHRlckZhY3Rvcnk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVpHRjBaVVpwYkhSbGNpNXpaWEoyYVdObExtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpWkdGMFpVWnBiSFJsY2k1elpYSjJhV05sTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenRCUVVkaUxFbEJRVmtzVFVGQlRTeFhRVUZOTEZGQlFWRXNRMEZCUXl4RFFVRkJPMEZCUldwRExEWkRRVUZuUXl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlF5OUVMRWxCUVU4c1RVRkJUU3hIUVVGSExIVkRRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRPMEZCUXpsQ0xFbEJRVThzVjBGQlZ5eEhRVUZITEhWRFFVRlJMRU5CUVVNc1UwRkJVeXhEUVVGRExGTkJRVk1zUTBGQlF6dEJRVVYyUXl4dFFrRkJWeXhIUVVGWExIRkNRVUZ4UWl4RFFVRkRPMEZCZFVKMlJEdEpRV1ZETEc5Q1FVRlpMRkZCUVRaQ0xFVkJRVlVzVjBGQlowTTdVVUZCYUVNc1owSkJRVmNzUjBGQldDeFhRVUZYTEVOQlFYRkNPMUZCUTJ4R0xFbEJRVWtzUTBGQlF5eGhRVUZoTEVkQlFVY3NVVUZCVVN4RFFVRkRMR0ZCUVdFc1EwRkJRenRSUVVNMVF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4SFFVRkhMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU03VVVGRE1VSXNTVUZCU1N4RFFVRkRMRmRCUVZjc1IwRkJSeXhSUVVGUkxFTkJRVU1zVjBGQlZ5eERRVUZETzFGQlEzaERMRWxCUVVrc1EwRkJReXhuUWtGQlowSXNSMEZCUnl4UlFVRlJMRU5CUVVNc1owSkJRV2RDTEVOQlFVTTdVVUZEYkVRc1NVRkJTU3hEUVVGRExGZEJRVmNzUjBGQlJ5eFJRVUZSTEVOQlFVTXNWMEZCVnl4SlFVRkpMRWxCUVVrc1IwRkJSeXhSUVVGUkxFTkJRVU1zVjBGQlZ5eEhRVUZITEV0QlFVc3NRMEZCUXp0UlFVTXZSU3hKUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNN1VVRkROVUlzU1VGQlNTeERRVUZETEZGQlFWRXNSMEZCUnl4eFVFRkROa1lzUTBGQlF6dEpRVU12Unl4RFFVRkRPMGxCUlVRc01rSkJRVTBzUjBGQlRpeFZRVUZQTEVsQlFWTTdVVUZEWml4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhoUVVGaExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEYkVRc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF6dFJRVU5pTEVOQlFVTTdVVUZGUkN4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTndRaXhKUVVGSkxGRkJRVkVzUjBGQmEwSXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlFUdFpRVU5xUkN4SlFVRkpMR0ZCUVdFc1UwRkJaU3hEUVVGRE8xbEJSV3BETEhWRlFVRjFSVHRaUVVOMlJTeEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU1zUTBGQlF6dG5Ra0ZEZEVJc1lVRkJZU3hIUVVGSExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNZVUZCWVN4RFFVRkRMRU5CUVVNN1dVRkROVU1zUTBGQlF6dFpRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMmRDUVVOUUxHMUZRVUZ0UlR0blFrRkRia1VzWVVGQllTeEhRVUZITEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNSVUZCUlN4TlFVRk5MRU5CUVVNc1EwRkJRenRaUVVNelJDeERRVUZETzFsQlEwUXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhYUVVGWExFTkJRVU1zVjBGQlZ5eERRVUZETEZGQlFWRXNSVUZCUlN4SlFVRkpMRU5CUVVNc1lVRkJZU3hGUVVGRkxFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNRMEZCUXp0UlFVVjJSaXhEUVVGRE8xRkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdXVUZEVUN4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTXNRMEZCUXp0blFrRkRkRUlzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1dVRkJXU3hEUVVGRExFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1NVRkJTU3hEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETzFsQlF5OUZMRU5CUVVNN1dVRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dG5Ra0ZEVUN4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExGZEJRVmNzUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeEpRVUZKTEVOQlFVTXNZVUZCWVN4RFFVRkRMRU5CUVVNN1dVRkRNMFVzUTBGQlF6dFJRVU5HTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCUlU4c05rSkJRVkVzUjBGQmFFSXNWVUZCYVVJc1NVRkJVenRSUVVONlFpeE5RVUZOTEVOQlFVTXNWMEZCVnl4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSkxFVkJRVVVzU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUXl4RFFVRkRPMGxCUTNaRUxFTkJRVU03U1VGRlJpeHBRa0ZCUXp0QlFVRkVMRU5CUVVNc1FVRjZSRVFzU1VGNVJFTTdRVUZOUkN4cFFrRkJhVUlzUTBGQlF5eFBRVUZQTEVkQlFVY3NRMEZCUXl4TlFVRk5MRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU03UVVGRGFrUXNNa0pCUVd0RExGZEJRV2RETzBsQlEycEZMRTFCUVUwc1EwRkJRenRSUVVOT0xGZEJRVmNzV1VGQlF5eFJRVUUwUWp0WlFVTjJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeFZRVUZWTEVOQlFVTXNVVUZCVVN4RlFVRkZMRmRCUVZjc1EwRkJReXhEUVVGRE8xRkJRemxETEVOQlFVTTdTMEZEUkN4RFFVRkRPMEZCUTBnc1EwRkJRenRCUVU1bExIbENRVUZwUWl4dlFrRk5hRU1zUTBGQlFTSjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2RhdGVGaWx0ZXIvZGF0ZUZpbHRlci5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gNzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIihmdW5jdGlvbigpIHsgbW9kdWxlLmV4cG9ydHMgPSB0aGlzW1wibW9tZW50XCJdOyB9KCkpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogZXh0ZXJuYWwgXCJtb21lbnRcIlxuICoqIG1vZHVsZSBpZCA9IDc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi90eXBpbmdzL25vZGUvbm9kZS5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fZGF0ZSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5kYXRlO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxEYXRlRmlsdGVyJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdybERhdGVGaWx0ZXJDb250cm9sbGVyJztcclxuLy8gT3B0aW9uYWwgaW50ZXJmYWNlIGZvciBib3VuZCBhdHRyaWJ1dGVzXHJcbnZhciBEYXRlT3B0aW9ucztcclxuKGZ1bmN0aW9uIChEYXRlT3B0aW9ucykge1xyXG4gICAgRGF0ZU9wdGlvbnNbRGF0ZU9wdGlvbnNbXCJEYXlcIl0gPSAwXSA9IFwiRGF5XCI7XHJcbiAgICBEYXRlT3B0aW9uc1tEYXRlT3B0aW9uc1tcIldlZWtcIl0gPSAxXSA9IFwiV2Vla1wiO1xyXG4gICAgRGF0ZU9wdGlvbnNbRGF0ZU9wdGlvbnNbXCJNb250aFwiXSA9IDJdID0gXCJNb250aFwiO1xyXG59KShEYXRlT3B0aW9ucyB8fCAoRGF0ZU9wdGlvbnMgPSB7fSkpO1xyXG47XHJcbnZhciBEYXRlRmlsdGVyQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEYXRlRmlsdGVyQ29udHJvbGxlcigkc2NvcGUsIGRhdGVVdGlsaXR5LCAkZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy5kYXRlVXRpbGl0eSA9IGRhdGVVdGlsaXR5O1xyXG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcclxuICAgICAgICB0aGlzLmNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLnR5cGUgPSBcImRheXNcIjtcclxuICAgICAgICB0aGlzLmZpbHRlci5pbmNsdWRlVGltZSA9IHRoaXMuaW5jbHVkZVRpbWU7XHJcbiAgICAgICAgLy90aGlzIGlzIGFkZGVkIHRvIGFkZHJlc3MgYW4gYWd1bGFyIHF1aXJrIG9uIHRoZSBzZXJ2aWNlIGV2ZW50IGxpc3QgcGFnZS5cclxuICAgICAgICAvL3RoZSBpbnB1dCBmaWVsZCB3YXMgbm90IGNsZWFyaW5nIGNvcnJlY2x0eSB3aGVuIHRoZSBzZWxlY3RlZERhdGUxIHZhbHVlIGlzIG51bGwuXHJcbiAgICAgICAgdGhpcy5pbnB1dEZpZWxkID0gdGhpcy4kZWxlbWVudC5maW5kKCdybC1kYXRlLXRpbWUgaW5wdXQnKTtcclxuICAgICAgICB0aGlzLmZpbHRlci5kYXRlUmFuZ2UgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5jbGVhckJ1dHRvbiA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLmNsZWFyQnV0dG9uID0gdHJ1ZTtcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKCdmaWx0ZXIuc2VsZWN0ZWREYXRlMScsIGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmlucHV0RmllbGQudmFsKCcnKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNsZWFyQ291bnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5maWx0ZXIuc2VsZWN0ZWREYXRlMSA9IGRhdGU7XHJcbiAgICAgICAgICAgIF90aGlzLnJlZnJlc2hEYXRhU291cmNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0ZUZpbHRlckNvbnRyb2xsZXIucHJvdG90eXBlLCBcInNlbGVjdGVkRGF0ZTJcIiwge1xyXG4gICAgICAgIC8vIHB1YmxpYyBnZXQgc2VsZWN0ZWREYXRlMSgpOiBtb21lbnQuTW9tZW50IHtcclxuICAgICAgICAvLyBcdGlmICh0aGlzLmZpbHRlci5zZWxlY3RlZERhdGUxICE9IG51bGwpIHtcclxuICAgICAgICAvLyBcdFx0cmV0dXJuIG1vbWVudCh0aGlzLmZpbHRlci5zZWxlY3RlZERhdGUxKTtcclxuICAgICAgICAvLyBcdH0gZWxzZSB7XHJcbiAgICAgICAgLy8gXHRcdHJldHVybiBudWxsO1xyXG4gICAgICAgIC8vIFx0fVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICAvLyBwdWJsaWMgc2V0IHNlbGVjdGVkRGF0ZTEoZGF0ZVN0cmluZzogbW9tZW50Lk1vbWVudCkge1xyXG4gICAgICAgIC8vIFx0aWYgKHRoaXMuZGF0ZVV0aWxpdHkuaXNEYXRlKGRhdGVTdHJpbmcpKSB7XHJcbiAgICAgICAgLy8gXHRcdHRoaXMuZmlsdGVyLnNlbGVjdGVkRGF0ZTEgPSBtb21lbnQoZGF0ZVN0cmluZyk7XHJcbiAgICAgICAgLy8gXHR9IGVsc2Uge1xyXG4gICAgICAgIC8vIFx0XHQvL2NsZWFyIGlucHV0IGZpZWxkIG9mIGRhdGUgdmFsdWUuIGFuZCByZXN0IHBhc3QgZGF5L3dlZWsgY291bnRcclxuICAgICAgICAvLyBcdFx0dGhpcy5pbnB1dEZpZWxkLnZhbCgnJyk7XHJcbiAgICAgICAgLy8gXHRcdHRoaXMuY2xlYXJDb3VudCgpO1xyXG4gICAgICAgIC8vIFx0XHR0aGlzLmZpbHRlci5zZWxlY3RlZERhdGUxID0gbnVsbDtcclxuICAgICAgICAvLyBcdH1cclxuICAgICAgICAvLyBcdHRoaXMucmVmcmVzaERhdGFTb3VyY2UoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlci5zZWxlY3RlZERhdGUyO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlci5zZWxlY3RlZERhdGUyID0gZGF0ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YVNvdXJjZSgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRGF0ZUZpbHRlckNvbnRyb2xsZXIucHJvdG90eXBlLnJlZnJlc2hEYXRhU291cmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnNvdXJjZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc291cmNlLnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRlbWl0KCdkYXRhU291cmNlLnJlcXVlc3RSZWZyZXNoJyk7IC8vKmV2ZW50P1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEYXRlRmlsdGVyQ29udHJvbGxlci5wcm90b3R5cGUuY2xlYXJDb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvdW50ID0gMDtcclxuICAgICAgICB0aGlzLmNvdW50Q2hhbmdlKCk7XHJcbiAgICB9O1xyXG4gICAgRGF0ZUZpbHRlckNvbnRyb2xsZXIucHJvdG90eXBlLmRlY3JlYXNlQ291bnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudCAtPSAxO1xyXG4gICAgICAgIHRoaXMuc2V0RGF0ZVRpbWVOb3dJZk51bGwoKTtcclxuICAgICAgICAvL2RvIG5vdCBhbGxvdyBjb3VudCBiZWxvdyAwXHJcbiAgICAgICAgaWYgKHRoaXMuY291bnQgPCAwIHx8IHRoaXMuY291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jb3VudCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY291bnRDaGFuZ2UoKTtcclxuICAgIH07XHJcbiAgICBEYXRlRmlsdGVyQ29udHJvbGxlci5wcm90b3R5cGUuY291bnRDaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY291bnQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvdW50ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuY291bnQgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmlsdGVyLmRhdGVSYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgIC8vIGFkZCBkYXlzIGhhcyB0byBiZSBhIG5lZ2F0aXZlIG51bWJlciB0byBnbyBiYWNrd29yZHMuXHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlMiA9IG1vbWVudCh0aGlzLnNlbGVjdGVkRGF0ZTEpLmFkZCgodGhpcy5jb3VudCAqIC0xKSwgdGhpcy50eXBlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5jb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgIC8vb25seSBjaGFuZ2UgdGhpcyB2YWx1ZXMgdGhlIGZpcnN0IHRpbWUuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZpbHRlci5kYXRlUmFuZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmlsdGVyLmRhdGVSYW5nZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZERhdGUyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEYXRlRmlsdGVyQ29udHJvbGxlci5wcm90b3R5cGUuaW5jcmVhc2VDb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvdW50ICs9IDE7XHJcbiAgICAgICAgdGhpcy5zZXREYXRlVGltZU5vd0lmTnVsbCgpO1xyXG4gICAgICAgIHRoaXMuY291bnRDaGFuZ2UoKTtcclxuICAgIH07XHJcbiAgICBEYXRlRmlsdGVyQ29udHJvbGxlci5wcm90b3R5cGUuc2V0RGF0ZVRpbWVOb3dJZk51bGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWREYXRlMSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWREYXRlMSA9IHRoaXMuZGF0ZVV0aWxpdHkuZ2V0Tm93KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIERhdGVGaWx0ZXJDb250cm9sbGVyLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudHlwZSA9PT0gJ2RheXMnKSB7XHJcbiAgICAgICAgICAgIHRoaXMudHlwZSA9ICd3ZWVrcyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSAnZGF5cyc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY291bnRDaGFuZ2UoKTtcclxuICAgIH07XHJcbiAgICBEYXRlRmlsdGVyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCBfX2RhdGUuc2VydmljZU5hbWUsICckZWxlbWVudCddO1xyXG4gICAgcmV0dXJuIERhdGVGaWx0ZXJDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkRhdGVGaWx0ZXJDb250cm9sbGVyID0gRGF0ZUZpbHRlckNvbnRyb2xsZXI7XHJcbmV4cG9ydHMuZGF0ZUZpbHRlciA9IHtcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL2RhdGVGaWx0ZXIuaHRtbCcpLFxyXG4gICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgIGNvbnRyb2xsZXJBczogJ2ZpbHRlcicsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIGZpbHRlcjogJzwnLFxyXG4gICAgICAgIHNvdXJjZTogJzw/JyxcclxuICAgICAgICBsYWJlbDogJ0AnLFxyXG4gICAgICAgIGluY2x1ZGVUaW1lOiAnPD8nLFxyXG4gICAgICAgIGluY2x1ZGVEYXRlUmFuZ2U6ICc8PycsXHJcbiAgICAgICAgY2xlYXJCdXR0b246ICc8PydcclxuICAgIH0sXHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVpHRjBaVVpwYkhSbGNpNWpiMjF3YjI1bGJuUXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKa1lYUmxSbWxzZEdWeUxtTnZiWEJ2Ym1WdWRDNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN3eVJFRkJNa1E3UVVGRk0wUXNXVUZCV1N4RFFVRkRPMEZCUjJJc1NVRkJXU3hOUVVGTkxGZEJRVTBzVVVGQlVTeERRVUZETEVOQlFVRTdRVUZGYWtNc05rTkJRWFZDTERoQ1FVRTRRaXhEUVVGRExFTkJRVUU3UVVGRGRFUXNTVUZCVHl4TlFVRk5MRWRCUVVjc2RVTkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTTdRVUZOYmtJc2NVSkJRV0VzUjBGQlZ5eGpRVUZqTEVOQlFVTTdRVUZEZGtNc2MwSkJRV01zUjBGQlZ5eDNRa0ZCZDBJc1EwRkJRenRCUVVVM1JDd3dRMEZCTUVNN1FVRkRNVU1zU1VGQlN5eFhRVUZuUXp0QlFVRnlReXhYUVVGTExGZEJRVmM3U1VGQlJ5d3lRMEZCUnl4RFFVRkJPMGxCUVVVc05rTkJRVWtzUTBGQlFUdEpRVUZGTEN0RFFVRkxMRU5CUVVFN1FVRkJReXhEUVVGRExFVkJRV2hETEZkQlFWY3NTMEZCV0N4WFFVRlhMRkZCUVhGQ08wRkJRVUVzUTBGQlF6dEJRV04wUXp0SlFXTkRMRGhDUVVGdlFpeE5RVUZ6UWl4RlFVRlZMRmRCUVdkRExFVkJRVlVzVVVGQmEwTTdVVUZrYWtrc2FVSkJNRWhETzFGQk5VZHZRaXhYUVVGTkxFZEJRVTRzVFVGQlRTeERRVUZuUWp0UlFVRlZMR2RDUVVGWExFZEJRVmdzVjBGQlZ5eERRVUZ4UWp0UlFVRlZMR0ZCUVZFc1IwRkJVaXhSUVVGUkxFTkJRVEJDTzFGQldtaEpMRlZCUVVzc1IwRkJWeXhEUVVGRExFTkJRVU03VVVGTmJFSXNVMEZCU1N4SFFVRlhMRTFCUVUwc1EwRkJRenRSUVU5eVFpeEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRmRCUVZjc1IwRkJSeXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZCTzFGQlF6RkRMREJGUVVFd1JUdFJRVU14UlN4clJrRkJhMFk3VVVGRGJFWXNTVUZCU1N4RFFVRkRMRlZCUVZVc1IwRkJSeXhKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEVsQlFVa3NRMEZCUXl4dlFrRkJiMElzUTBGQlF5eERRVUZETzFGQlF6TkVMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVTBGQlV5eEhRVUZITEV0QlFVc3NRMEZCUXp0UlFVTTVRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNWMEZCVnl4SlFVRkpMRWxCUVVrc1EwRkJRenRaUVVNMVFpeEpRVUZKTEVOQlFVTXNWMEZCVnl4SFFVRkhMRWxCUVVrc1EwRkJRenRSUVVWNlFpeE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMSE5DUVVGelFpeEZRVUZGTEZWQlFVTXNTVUZCYlVJN1dVRkRla1FzUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEyeENMRXRCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUjBGQlJ5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRPMmRDUVVONFFpeExRVUZKTEVOQlFVTXNWVUZCVlN4RlFVRkZMRU5CUVVNN1dVRkRia0lzUTBGQlF6dFpRVU5FTEV0QlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1lVRkJZU3hIUVVGSExFbEJRVWtzUTBGQlF6dFpRVU5xUXl4TFFVRkpMRU5CUVVNc2FVSkJRV2xDTEVWQlFVVXNRMEZCUXp0UlFVTXhRaXhEUVVGRExFTkJRVU1zUTBGQlF6dEpRVU5LTEVOQlFVTTdTVUZ6UWtRc2MwSkJRVmNzSzBOQlFXRTdVVUZ3UW5oQ0xEaERRVUU0UXp0UlFVTTVReXcwUTBGQk5FTTdVVUZETlVNc09FTkJRVGhETzFGQlF6bERMRmxCUVZrN1VVRkRXaXhwUWtGQmFVSTdVVUZEYWtJc1MwRkJTenRSUVVOTUxFbEJRVWs3VVVGRlNpeDNSRUZCZDBRN1VVRkRlRVFzT0VOQlFUaERPMUZCUXpsRExHOUVRVUZ2UkR0UlFVTndSQ3haUVVGWk8xRkJRMW9zYjBWQlFXOUZPMUZCUTNCRkxEWkNRVUUyUWp0UlFVTTNRaXgxUWtGQmRVSTdVVUZEZGtJc2MwTkJRWE5ETzFGQlEzUkRMRXRCUVVzN1VVRkRUQ3cyUWtGQk5rSTdVVUZETjBJc1NVRkJTVHRoUVVWS08xbEJRME1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1lVRkJZU3hEUVVGRE8xRkJRMnhETEVOQlFVTTdZVUZGUkN4VlFVRjVRaXhKUVVGdFFqdFpRVU16UXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExHRkJRV0VzUjBGQlJ5eEpRVUZKTEVOQlFVTTdXVUZEYWtNc1NVRkJTU3hEUVVGRExHbENRVUZwUWl4RlFVRkZMRU5CUVVNN1VVRkRNVUlzUTBGQlF6czdPMDlCVEVFN1NVRlBSQ3huUkVGQmFVSXNSMEZCYWtJN1VVRkRReXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGVrSXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhQUVVGUExFVkJRVVVzUTBGQlF6dFJRVU4yUWl4RFFVRkRPMUZCUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03V1VGRFVDeEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRXRCUVVzc1EwRkJReXd5UWtGQk1rSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVenRSUVVNeFJDeERRVUZETzBsQlEwWXNRMEZCUXp0SlFVTkVMSGxEUVVGVkxFZEJRVlk3VVVGRFF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4SFFVRkhMRU5CUVVNc1EwRkJRenRSUVVObUxFbEJRVWtzUTBGQlF5eFhRVUZYTEVWQlFVVXNRMEZCUXp0SlFVTndRaXhEUVVGRE8wbEJSVVFzTkVOQlFXRXNSMEZCWWp0UlFVTkRMRWxCUVVrc1EwRkJReXhMUVVGTExFbEJRVWtzUTBGQlF5eERRVUZETzFGQlEyaENMRWxCUVVrc1EwRkJReXh2UWtGQmIwSXNSVUZCUlN4RFFVRkRPMUZCUXpWQ0xEUkNRVUUwUWp0UlFVTTFRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4SFFVRkhMRU5CUVVNc1NVRkJTU3hKUVVGSkxFTkJRVU1zUzBGQlN5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRlRU1zU1VGQlNTeERRVUZETEV0QlFVc3NSMEZCUnl4RFFVRkRMRU5CUVVNN1VVRkRhRUlzUTBGQlF6dFJRVU5FTEVsQlFVa3NRMEZCUXl4WFFVRlhMRVZCUVVVc1EwRkJRenRKUVVOd1FpeERRVUZETzBsQlJVUXNNRU5CUVZjc1IwRkJXRHRSUVVORExFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRWxCUVVrc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU40UWl4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExFTkJRVU1zUTBGQlF6dFJRVU5vUWl4RFFVRkRPMUZCUTBRc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRM0JDTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1UwRkJVeXhIUVVGSExFbEJRVWtzUTBGQlF6dFpRVU0zUWl4M1JFRkJkMFE3V1VGRGVFUXNTVUZCU1N4RFFVRkRMR0ZCUVdFc1IwRkJSeXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZMTEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdVVUZEYmtZc1EwRkJRenRSUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdXVUZETlVJc2VVTkJRWGxETzFsQlEzcERMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRE0wSXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhUUVVGVExFZEJRVWNzUzBGQlN5eERRVUZETzJkQ1FVTTVRaXhKUVVGSkxFTkJRVU1zWVVGQllTeEhRVUZITEVsQlFVa3NRMEZCUXp0WlFVTXpRaXhEUVVGRE8xRkJRMFlzUTBGQlF6dEpRVU5HTEVOQlFVTTdTVUZGUkN3MFEwRkJZU3hIUVVGaU8xRkJRME1zU1VGQlNTeERRVUZETEV0QlFVc3NTVUZCU1N4RFFVRkRMRU5CUVVNN1VVRkRhRUlzU1VGQlNTeERRVUZETEc5Q1FVRnZRaXhGUVVGRkxFTkJRVU03VVVGRE5VSXNTVUZCU1N4RFFVRkRMRmRCUVZjc1JVRkJSU3hEUVVGRE8wbEJRM0JDTEVOQlFVTTdTVUZGUkN4dFJFRkJiMElzUjBGQmNFSTdVVUZEUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zWVVGQllTeEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRhRU1zU1VGQlNTeERRVUZETEdGQlFXRXNSMEZCUnl4SlFVRkpMRU5CUVVNc1YwRkJWeXhEUVVGRExFMUJRVTBzUlVGQlJTeERRVUZETzFGQlEyaEVMRU5CUVVNN1NVRkRSaXhEUVVGRE8wbEJSVVFzY1VOQlFVMHNSMEZCVGp0UlFVTkRMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEV0QlFVc3NUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVNeFFpeEpRVUZKTEVOQlFVTXNTVUZCU1N4SFFVRkhMRTlCUVU4c1EwRkJRenRSUVVOeVFpeERRVUZETzFGQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1dVRkRVQ3hKUVVGSkxFTkJRVU1zU1VGQlNTeEhRVUZITEUxQlFVMHNRMEZCUXp0UlFVTndRaXhEUVVGRE8xRkJRMFFzU1VGQlNTeERRVUZETEZkQlFWY3NSVUZCUlN4RFFVRkRPMGxCUTNCQ0xFTkJRVU03U1VFelIwMHNORUpCUVU4c1IwRkJSeXhEUVVGRExGRkJRVkVzUlVGQlJTeE5RVUZOTEVOQlFVTXNWMEZCVnl4RlFVRkZMRlZCUVZVc1EwRkJReXhEUVVGRE8wbEJOa2MzUkN3eVFrRkJRenRCUVVGRUxFTkJRVU1zUVVFeFNFUXNTVUV3U0VNN1FVRXhTRmtzTkVKQlFXOUNMSFZDUVRCSWFFTXNRMEZCUVR0QlFVVlZMR3RDUVVGVkxFZEJRVGhDTzBsQlEyeEVMRkZCUVZFc1JVRkJSU3hQUVVGUExFTkJRVU1zYlVKQlFXMUNMRU5CUVVNN1NVRkRkRU1zVlVGQlZTeEZRVUZGTEhOQ1FVRmpPMGxCUXpGQ0xGbEJRVmtzUlVGQlJTeFJRVUZSTzBsQlEzUkNMRkZCUVZFc1JVRkJSVHRSUVVOVUxFMUJRVTBzUlVGQlJTeEhRVUZITzFGQlExZ3NUVUZCVFN4RlFVRkZMRWxCUVVrN1VVRkRXaXhMUVVGTExFVkJRVVVzUjBGQlJ6dFJRVU5XTEZkQlFWY3NSVUZCUlN4SlFVRkpPMUZCUTJwQ0xHZENRVUZuUWl4RlFVRkZMRWxCUVVrN1VVRkRkRUlzVjBGQlZ5eEZRVUZGTEVsQlFVazdTMEZEYWtJN1EwRkRSQ3hEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2RhdGVGaWx0ZXIvZGF0ZUZpbHRlci5jb21wb25lbnQuanNcbiAqKiBtb2R1bGUgaWQgPSA3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcImZpbHRlci1ncm91cCBzcGlubmVyLWNvbnRhaW5lclxcXCI+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiY29udGVudC1ncm91cFxcXCI+XFxyXFxuXFx0XFx0PGxhYmVsPnt7OjpmaWx0ZXIubGFiZWx9fTwvbGFiZWw+XFxyXFxuXFx0XFx0PHJsLWRhdGUtdGltZSBuZy1tb2RlbD1cXFwiZmlsdGVyLnNlbGVjdGVkRGF0ZTFcXFwiIHVzZS10aW1lPVxcXCJmaWx0ZXIuaW5jbHVkZVRpbWVcXFwiIGNsZWFyLWJ1dHRvbj1cXFwiZmlsdGVyLmNsZWFyQnV0dG9uXFxcIiBvbi1jbGVhci1ldmVudD1cXFwiZmlsdGVyLmNsZWFyQ291bnQoKVxcXCJcXHJcXG5cXHRcXHRjbGFzcz1cXFwicHVsbC1sZWZ0XFxcIj48L3JsLWRhdGUtdGltZT5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG5cXHQ8ZGl2IG5nLWlmPVxcXCJmaWx0ZXIuaW5jbHVkZURhdGVSYW5nZVxcXCIgY2xhc3M9XFxcImNvbnRlbnQtZ3JvdXBcXFwiPlxcclxcblxcdFxcdDxsYWJlbD5BZGQgcHJldmlvdXM8L2xhYmVsPlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcImlucHV0LWdyb3VwXFxcIj5cXHJcXG5cXHRcXHQ8c3BhbiBjbGFzcz1cXFwiaW5wdXQtZ3JvdXAtYnRuXFxcIj5cXHJcXG5cXHRcXHRcXHQ8YnV0dG9uICBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGljaz1cXFwiZmlsdGVyLmRlY3JlYXNlQ291bnQoKTtcXFwiPlxcclxcblxcdFxcdFxcdFxcdDxpIGNsYXNzPVxcXCJmYSBmYS1taW51c1xcXCI+PC9pPlxcclxcblxcdFxcdFxcdDwvYnV0dG9uPlxcclxcblxcdFxcdDwvc3Bhbj5cXHJcXG5cXHRcXHQ8aW5wdXQgdHlwZT1cXFwibnVtYmVyXFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIiBuZy1tb2RlbD1cXFwiZmlsdGVyLmNvdW50XFxcIiBuZy1jaGFuZ2U9XFxcImZpbHRlci5jb3VudENoYW5nZSgpO1xcXCIgLz5cXHJcXG5cXHRcXHQ8c3BhbiBjbGFzcz1cXFwiaW5wdXQtZ3JvdXAtYnRuXFxcIj5cXHJcXG5cXHRcXHRcXHQ8YnV0dG9uIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHRcXFwiIG5nLWNsaWNrPVxcXCJmaWx0ZXIudG9nZ2xlKCk7XFxcIj5cXHJcXG5cXHRcXHRcXHR7e2ZpbHRlci50eXBlfX1cXHJcXG5cXHRcXHRcXHQ8L2J1dHRvbj5cXHJcXG5cXHRcXHQ8L3NwYW4+XFxyXFxuXFx0XFx0PHNwYW4gY2xhc3M9XFxcImlucHV0LWdyb3VwLWJ0blxcXCI+XFxyXFxuXFx0XFx0XFx0PGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGljaz1cXFwiZmlsdGVyLmluY3JlYXNlQ291bnQoKTtcXFwiPlxcclxcblxcdFxcdFxcdFxcdDxpIGNsYXNzPVxcXCJmYSBmYS1wbHVzXFxcIj48L2k+XFxyXFxuXFx0XFx0XFx0PC9idXR0b24+XFxyXFxuXFx0XFx0PC9zcGFuPlxcclxcblxcdFxcdDwvZGl2PlxcclxcblxcdDwvZGl2PlxcclxcbjwvZGl2PlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9kYXRlRmlsdGVyL2RhdGVGaWx0ZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDc2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIGZpbHRlck9wdGlvbiA9IHJlcXVpcmUoJy4vZmlsdGVyT3B0aW9uL2ZpbHRlck9wdGlvbicpO1xyXG5leHBvcnRzLmZpbHRlck9wdGlvbiA9IGZpbHRlck9wdGlvbjtcclxudmFyIG1vZGVGaWx0ZXJHcm91cCA9IHJlcXVpcmUoJy4vbW9kZUZpbHRlckdyb3VwL21vZGVGaWx0ZXJHcm91cC5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMubW9kZUZpbHRlckdyb3VwID0gbW9kZUZpbHRlckdyb3VwO1xyXG52YXIgcmFuZ2VGaWx0ZXJHcm91cCA9IHJlcXVpcmUoJy4vcmFuZ2VGaWx0ZXJHcm91cC9yYW5nZUZpbHRlckdyb3VwLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5yYW5nZUZpbHRlckdyb3VwID0gcmFuZ2VGaWx0ZXJHcm91cDtcclxudmFyIGZpbHRlckdyb3VwX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4vZmlsdGVyR3JvdXAuc2VydmljZScpO1xyXG52YXIgZmlsdGVyR3JvdXBfZGlyZWN0aXZlXzEgPSByZXF1aXJlKCcuL2ZpbHRlckdyb3VwLmRpcmVjdGl2ZScpO1xyXG5fX2V4cG9ydChyZXF1aXJlKCcuL2ZpbHRlckdyb3VwLmRpcmVjdGl2ZScpKTtcclxuX19leHBvcnQocmVxdWlyZSgnLi9maWx0ZXJHcm91cC5zZXJ2aWNlJykpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5jYXJkQ29udGFpbmVyLmZpbHRlcnMuZmlsdGVyR3JvdXAnO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3QubW9kdWxlTmFtZSxcclxuICAgIGZpbHRlck9wdGlvbi5tb2R1bGVOYW1lLFxyXG4gICAgbW9kZUZpbHRlckdyb3VwLm1vZHVsZU5hbWUsXHJcbiAgICByYW5nZUZpbHRlckdyb3VwLm1vZHVsZU5hbWUsXHJcbl0pXHJcbiAgICAuZmFjdG9yeShmaWx0ZXJHcm91cF9zZXJ2aWNlXzEuZmFjdG9yeU5hbWUsIGZpbHRlckdyb3VwX3NlcnZpY2VfMS5maWx0ZXJHcm91cEZhY3RvcnkpXHJcbiAgICAuY29tcG9uZW50KGZpbHRlckdyb3VwX2RpcmVjdGl2ZV8xLmNvbXBvbmVudE5hbWUsIGZpbHRlckdyb3VwX2RpcmVjdGl2ZV8xLmZpbHRlckdyb3VwKVxyXG4gICAgLmNvbnRyb2xsZXIoZmlsdGVyR3JvdXBfZGlyZWN0aXZlXzEuY29udHJvbGxlck5hbWUsIGZpbHRlckdyb3VwX2RpcmVjdGl2ZV8xLkZpbHRlckdyb3VwQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVptbHNkR1Z5UjNKdmRYQXViVzlrZFd4bExtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpWm1sc2RHVnlSM0p2ZFhBdWJXOWtkV3hsTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenM3T3p0QlFVVmlMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlEyNURMRFpEUVVGNVFpdzRRa0ZCT0VJc1EwRkJReXhEUVVGQk8wRkJSWGhFTEVsQlFWa3NXVUZCV1N4WFFVRk5MRFpDUVVFMlFpeERRVUZETEVOQlFVRTdRVUZMTTBRc2IwSkJRVms3UVVGS1lpeEpRVUZaTEdWQlFXVXNWMEZCVFN3eVEwRkJNa01zUTBGQlF5eERRVUZCTzBGQlN6VkZMSFZDUVVGbE8wRkJTbWhDTEVsQlFWa3NaMEpCUVdkQ0xGZEJRVTBzTmtOQlFUWkRMRU5CUVVNc1EwRkJRVHRCUVVzdlJTeDNRa0ZCWjBJN1FVRkhha0lzYjBOQlFXZEVMSFZDUVVGMVFpeERRVUZETEVOQlFVRTdRVUZEZUVVc2MwTkJRV3RHTEhsQ1FVRjVRaXhEUVVGRExFTkJRVUU3UVVGRk5VY3NhVUpCUVdNc2VVSkJRWGxDTEVOQlFVTXNSVUZCUVR0QlFVTjRReXhwUWtGQll5eDFRa0ZCZFVJc1EwRkJReXhGUVVGQk8wRkJSVE5DTEd0Q1FVRlZMRWRCUVZjc2IwUkJRVzlFTEVOQlFVTTdRVUZGY2tZc1QwRkJUeXhEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZPMGxCUXpGQ0xIVkRRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRMRlZCUVZVN1NVRkZNVUlzV1VGQldTeERRVUZETEZWQlFWVTdTVUZEZGtJc1pVRkJaU3hEUVVGRExGVkJRVlU3U1VGRE1VSXNaMEpCUVdkQ0xFTkJRVU1zVlVGQlZUdERRVU16UWl4RFFVRkRPMHRCUTBFc1QwRkJUeXhEUVVGRExHbERRVUZYTEVWQlFVVXNkME5CUVd0Q0xFTkJRVU03UzBGRGVFTXNVMEZCVXl4RFFVRkRMSEZEUVVGaExFVkJRVVVzYlVOQlFWY3NRMEZCUXp0TFFVTnlReXhWUVVGVkxFTkJRVU1zYzBOQlFXTXNSVUZCUlN3MlEwRkJjVUlzUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZmlsdGVyR3JvdXAvZmlsdGVyR3JvdXAubW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gNzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uLy4uL3R5cGluZ3MvY29tbW9uanMuZC50cycgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5maWx0ZXJzLmZpbHRlckdyb3VwLmZpbHRlck9wdGlvbic7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybEZpbHRlck9wdGlvbic7XHJcbnZhciBmaWx0ZXJPcHRpb24gPSB7XHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9maWx0ZXJPcHRpb24uaHRtbCcpLFxyXG4gICAgY29udHJvbGxlckFzOiAnZmlsdGVyJyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgYWN0aXZhdGU6ICcmJyxcclxuICAgICAgICBpc0FjdGl2ZTogJz1hY3RpdmUnLFxyXG4gICAgICAgIG9wdGlvbjogJz0nLFxyXG4gICAgfSxcclxufTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBmaWx0ZXJPcHRpb24pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2labWxzZEdWeVQzQjBhVzl1TG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2labWxzZEdWeVQzQjBhVzl1TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRzFGUVVGdFJUdEJRVVZ1UlN4WlFVRlpMRU5CUVVNN1FVRkRZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVVjRRaXhyUWtGQlZTeEhRVUZYTEdsRlFVRnBSU3hEUVVGRE8wRkJRM1pHTEhGQ1FVRmhMRWRCUVZjc1owSkJRV2RDTEVOQlFVTTdRVUZGY0VRc1NVRkJTU3haUVVGWkxFZEJRVGhDTzBsQlF6ZERMRkZCUVZFc1JVRkJSU3hQUVVGUExFTkJRVU1zY1VKQlFYRkNMRU5CUVVNN1NVRkRlRU1zV1VGQldTeEZRVUZGTEZGQlFWRTdTVUZEZEVJc1VVRkJVU3hGUVVGRk8xRkJRMVFzVVVGQlVTeEZRVUZGTEVkQlFVYzdVVUZEWWl4UlFVRlJMRVZCUVVVc1UwRkJVenRSUVVOdVFpeE5RVUZOTEVWQlFVVXNSMEZCUnp0TFFVTllPME5CUTBRc1EwRkJRenRCUVVWR0xFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNhMEpCUVZVc1JVRkJSU3hGUVVGRkxFTkJRVU03UzBGRE5VSXNVMEZCVXl4RFFVRkRMSEZDUVVGaExFVkJRVVVzV1VGQldTeERRVUZETEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9maWx0ZXJHcm91cC9maWx0ZXJPcHRpb24vZmlsdGVyT3B0aW9uLmpzXG4gKiogbW9kdWxlIGlkID0gNzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJyb3cgZmlsdGVyLW9wdGlvblxcXCIgbmctY2xhc3M9XFxcInsgJ2FjdGl2ZSc6IGZpbHRlci5pc0FjdGl2ZSB9XFxcIiBuZy1jbGljaz1cXFwiZmlsdGVyLmFjdGl2YXRlKClcXFwiPlxcclxcblxcdDxkaXYgY2xhc3M9XFxcImNvbC14cy0xXFxcIj5cXHJcXG5cXHRcXHQ8aSBjbGFzcz0nZmEgZmEtYXJyb3ctcmlnaHQnIG5nLXNob3c9XFxcImZpbHRlci5pc0FjdGl2ZSA9PSB0cnVlXFxcIj48L2k+XFxyXFxuXFx0PC9kaXY+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiY29sLXhzLTFcXFwiIG5nLWlmPVxcXCJmaWx0ZXIuaGFzSWNvblxcXCIgbmctYmluZC1odG1sPVxcXCJmaWx0ZXIub3B0aW9uLmljb25cXFwiPjwvZGl2PlxcclxcblxcdDxkaXYgbmctY2xhc3M9XFxcInsgJ2NvbC14cy02JzogZmlsdGVyLmhhc0ljb24sICdjb2wteHMtNyc6ICFmaWx0ZXIuaGFzSWNvbiB9XFxcIj5cXHJcXG5cXHRcXHR7e2ZpbHRlci5vcHRpb24ubGFiZWx9fVxcclxcblxcdDwvZGl2PlxcclxcblxcdDxkaXYgY2xhc3M9XFxcImNvbC14cy0zIHRleHQtcmlnaHRcXFwiIG5nLXNob3c9XFxcImZpbHRlci5vcHRpb24uY291bnQgIT0gbnVsbFxcXCI+XFxyXFxuXFx0XFx0KHt7ZmlsdGVyLm9wdGlvbi5jb3VudH19KVxcclxcblxcdDwvZGl2PlxcclxcbjwvZGl2PlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9maWx0ZXJHcm91cC9maWx0ZXJPcHRpb24vZmlsdGVyT3B0aW9uLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTtcclxuICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG59O1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fb2JqZWN0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxudmFyIF9fdHJhbnNmb3JtID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnRyYW5zZm9ybS50cmFuc2Zvcm07XHJcbnZhciBmaWx0ZXJHcm91cF9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi9maWx0ZXJHcm91cC5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuZmlsdGVycy5maWx0ZXJHcm91cC5tb2RlRmlsdGVyR3JvdXAnO1xyXG5leHBvcnRzLmZhY3RvcnlOYW1lID0gJ21vZGVGaWx0ZXJHcm91cCc7XHJcbnZhciBNb2RlRmlsdGVyR3JvdXAgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKE1vZGVGaWx0ZXJHcm91cCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIE1vZGVGaWx0ZXJHcm91cChzZXR0aW5ncywgb2JqZWN0KSB7XHJcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgc2V0dGluZ3MsIG9iamVjdCk7XHJcbiAgICAgICAgdGhpcy5nZXRWYWx1ZSA9IHNldHRpbmdzLmdldFZhbHVlO1xyXG4gICAgICAgIHNldHRpbmdzLm9wdGlvbnMgPSBfLm1hcChzZXR0aW5ncy5vcHRpb25zLCB0aGlzLmJ1aWxkTW9kZU9wdGlvbi5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLmluaXRPcHRpb25zKCk7XHJcbiAgICB9XHJcbiAgICBNb2RlRmlsdGVyR3JvdXAucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYWN0aXZlT3B0aW9uID0gdGhpcy5hY3RpdmVPcHRpb247XHJcbiAgICAgICAgaWYgKGFjdGl2ZU9wdGlvbi5kaXNwbGF5QWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWN0aXZlT3B0aW9uLnZhbHVlO1xyXG4gICAgfTtcclxuICAgIE1vZGVGaWx0ZXJHcm91cC5wcm90b3R5cGUuYnVpbGRNb2RlT3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG1vZGVPcHRpb24gPSBvcHRpb247XHJcbiAgICAgICAgbW9kZU9wdGlvbi5maWx0ZXIgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICBpZiAobW9kZU9wdGlvbi5kaXNwbGF5QWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX190cmFuc2Zvcm0uZ2V0VmFsdWUoaXRlbSwgX3RoaXMuZ2V0VmFsdWUpID09PSBtb2RlT3B0aW9uLnZhbHVlO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG1vZGVPcHRpb247XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIE1vZGVGaWx0ZXJHcm91cDtcclxufShmaWx0ZXJHcm91cF9zZXJ2aWNlXzEuRmlsdGVyR3JvdXApKTtcclxuZXhwb3J0cy5Nb2RlRmlsdGVyR3JvdXAgPSBNb2RlRmlsdGVyR3JvdXA7XHJcbm1vZGVGaWx0ZXJHcm91cEZhY3RvcnkuJGluamVjdCA9IFtfX29iamVjdC5zZXJ2aWNlTmFtZV07XHJcbmZ1bmN0aW9uIG1vZGVGaWx0ZXJHcm91cEZhY3Rvcnkob2JqZWN0KSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldEluc3RhbmNlOiBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNb2RlRmlsdGVyR3JvdXAoc2V0dGluZ3MsIG9iamVjdCk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5tb2RlRmlsdGVyR3JvdXBGYWN0b3J5ID0gbW9kZUZpbHRlckdyb3VwRmFjdG9yeTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbX19vYmplY3QubW9kdWxlTmFtZV0pXHJcbiAgICAuZmFjdG9yeShleHBvcnRzLmZhY3RvcnlOYW1lLCBtb2RlRmlsdGVyR3JvdXBGYWN0b3J5KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYlc5a1pVWnBiSFJsY2tkeWIzVndMbk5sY25acFkyVXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKdGIyUmxSbWxzZEdWeVIzSnZkWEF1YzJWeWRtbGpaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdPenM3T3p0QlFVVmlMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlEyNURMRWxCUVZrc1EwRkJReXhYUVVGTkxGRkJRVkVzUTBGQlF5eERRVUZCTzBGQlJUVkNMRFpEUVVGNVFpdzRRa0ZCT0VJc1EwRkJReXhEUVVGQk8wRkJRM2hFTEVsQlFVOHNVVUZCVVN4SFFVRkhMSFZEUVVGUkxFTkJRVU1zVFVGQlRTeERRVUZETzBGQlEyeERMRWxCUVU4c1YwRkJWeXhIUVVGSExIVkRRVUZSTEVOQlFVTXNVMEZCVXl4RFFVRkRMRk5CUVZNc1EwRkJRenRCUVVWc1JDeHZRMEZCZVVRc2QwSkJRWGRDTEVOQlFVTXNRMEZCUVR0QlFVVjJSU3hyUWtGQlZTeEhRVUZYTEc5RlFVRnZSU3hEUVVGRE8wRkJRekZHTEcxQ1FVRlhMRWRCUVZjc2FVSkJRV2xDTEVOQlFVTTdRVUY1UW01RU8wbEJRWEZETEcxRFFVRlhPMGxCUnk5RExIbENRVUZaTEZGQlFYVkRMRVZCUVVVc1RVRkJLMEk3VVVGRGJrWXNhMEpCUVZjc1VVRkJVU3hGUVVGRkxFMUJRVTBzUTBGQlF5eERRVUZETzFGQlF6ZENMRWxCUVVrc1EwRkJReXhSUVVGUkxFZEJRVWNzVVVGQlVTeERRVUZETEZGQlFWRXNRMEZCUXp0UlFVTnNReXhSUVVGUkxFTkJRVU1zVDBGQlR5eEhRVUZITEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVN0RExGRkJRVkVzUTBGQlF5eFBRVUZQTEVWQlFVVXNTVUZCU1N4RFFVRkRMR1ZCUVdVc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTXhTQ3hKUVVGSkxFTkJRVU1zVjBGQlZ5eEZRVUZGTEVOQlFVTTdTVUZEY0VJc1EwRkJRenRKUVVWRUxHMURRVUZUTEVkQlFWUTdVVUZEUXl4SlFVRkpMRmxCUVZrc1IwRkJNa0lzU1VGQlNTeERRVUZETEZsQlFWa3NRMEZCUXp0UlFVTTNSQ3hGUVVGRkxFTkJRVU1zUTBGQlF5eFpRVUZaTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVNM1FpeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRPMUZCUTJJc1EwRkJRenRSUVVORUxFMUJRVTBzUTBGQlF5eFpRVUZaTEVOQlFVTXNTMEZCU3l4RFFVRkRPMGxCUXpOQ0xFTkJRVU03U1VGRlR5eDVRMEZCWlN4SFFVRjJRaXhWUVVGM1FpeE5RVUZwUXp0UlFVRjZSQ3hwUWtGWFF6dFJRVlpCTEVsQlFVa3NWVUZCVlN4SFFVRXlRaXhOUVVGTkxFTkJRVU03VVVGRGFFUXNWVUZCVlN4RFFVRkRMRTFCUVUwc1IwRkJSeXhWUVVGRExFbEJRU3RDTzFsQlEyNUVMRVZCUVVVc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4RFFVRkRPMmRDUVVNelFpeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRPMWxCUTJJc1EwRkJRenRaUVVWRUxFMUJRVTBzUTBGQlF5eFhRVUZYTEVOQlFVTXNVVUZCVVN4RFFVRkRMRWxCUVVrc1JVRkJSU3hMUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEV0QlFVc3NWVUZCVlN4RFFVRkRMRXRCUVVzc1EwRkJRenRSUVVOMlJTeERRVUZETEVOQlFVTTdVVUZGUml4TlFVRk5MRU5CUVVNc1ZVRkJWU3hEUVVGRE8wbEJRMjVDTEVOQlFVTTdTVUZEUml4elFrRkJRenRCUVVGRUxFTkJRVU1zUVVFNVFrUXNRMEZCY1VNc2FVTkJRVmNzUjBFNFFpOURPMEZCT1VKWkxIVkNRVUZsTEd0Q1FUaENNMElzUTBGQlFUdEJRVTFFTEhOQ1FVRnpRaXhEUVVGRExFOUJRVThzUjBGQlJ5eERRVUZETEZGQlFWRXNRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJRenRCUVVONFJDeG5RMEZCZFVNc1RVRkJLMEk3U1VGRGNrVXNXVUZCV1N4RFFVRkRPMGxCUTJJc1RVRkJUU3hEUVVGRE8xRkJRMDRzVjBGQlZ5eFpRVUZETEZGQlFYVkRPMWxCUTJ4RUxFMUJRVTBzUTBGQlF5eEpRVUZKTEdWQlFXVXNRMEZCUXl4UlFVRlJMRVZCUVVVc1RVRkJUU3hEUVVGRExFTkJRVU03VVVGRE9VTXNRMEZCUXp0TFFVTkVMRU5CUVVNN1FVRkRTQ3hEUVVGRE8wRkJVR1VzT0VKQlFYTkNMSGxDUVU5eVF5eERRVUZCTzBGQlJVUXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVOQlFVTXNVVUZCVVN4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRE8wdEJReTlETEU5QlFVOHNRMEZCUXl4dFFrRkJWeXhGUVVGRkxITkNRVUZ6UWl4RFFVRkRMRU5CUVVNaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2ZpbHRlckdyb3VwL21vZGVGaWx0ZXJHcm91cC9tb2RlRmlsdGVyR3JvdXAuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbmV4cG9ydHMuZmFjdG9yeU5hbWUgPSAnZmlsdGVyR3JvdXAnO1xyXG52YXIgRmlsdGVyR3JvdXAgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKEZpbHRlckdyb3VwLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gRmlsdGVyR3JvdXAoc2V0dGluZ3MsIG9iamVjdCkge1xyXG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlID0gJzxybC1maWx0ZXItZ3JvdXAgZmlsdGVyLWdyb3VwPVwiZmlsdGVyXCIgc291cmNlPVwiZGF0YVNvdXJjZVwiPjwvcmwtZmlsdGVyLWdyb3VwPic7XHJcbiAgICAgICAgdGhpcy5sYWJlbCA9IHNldHRpbmdzLmxhYmVsO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHNldHRpbmdzLnR5cGUgIT0gbnVsbCA/IHNldHRpbmdzLnR5cGUgOiBzZXR0aW5ncy5sYWJlbDtcclxuICAgICAgICB0aGlzLmluaXRPcHRpb25zKCk7XHJcbiAgICB9XHJcbiAgICBGaWx0ZXJHcm91cC5wcm90b3R5cGUuaW5pdE9wdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSB0aGlzLnNldHRpbmdzLm9wdGlvbnM7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVPcHRpb24gPSB0aGlzLnNldERlZmF1bHRPcHRpb24oKTtcclxuICAgICAgICBfLmVhY2godGhpcy5vcHRpb25zLCBmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKG9wdGlvbi50eXBlKSkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uLnR5cGUgPSBvcHRpb24ubGFiZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3B0aW9uLnR5cGUgPSBfdGhpcy5vYmplY3QudG9TdHJpbmcob3B0aW9uLnR5cGUpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbHRlckdyb3VwLnByb3RvdHlwZSwgXCJhY3RpdmVPcHRpb25cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlT3B0aW9uO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aXZlT3B0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoZmFsc2UpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgRmlsdGVyR3JvdXAucHJvdG90eXBlLnNldERlZmF1bHRPcHRpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGRlZmF1bHRPcHRpb24gPSB0aGlzLm9wdGlvbnNbMF07XHJcbiAgICAgICAgXy5lYWNoKHRoaXMub3B0aW9ucywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0uYWN0aXZlICE9IG51bGwgJiYgaXRlbS5hY3RpdmUgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRPcHRpb24gPSBpdGVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRPcHRpb247XHJcbiAgICB9O1xyXG4gICAgRmlsdGVyR3JvdXAucHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlT3B0aW9uLmZpbHRlcihpdGVtKTtcclxuICAgIH07XHJcbiAgICBGaWx0ZXJHcm91cC5wcm90b3R5cGUuc2VyaWFsaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChfLmlzRnVuY3Rpb24odGhpcy5zZXR0aW5ncy5zZXJpYWxpemUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXMuYWN0aXZlT3B0aW9uLnNlcmlhbGl6ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlT3B0aW9uLnNlcmlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVPcHRpb24udmFsdWU7XHJcbiAgICB9O1xyXG4gICAgRmlsdGVyR3JvdXAucHJvdG90eXBlLnNldEFjdGl2ZU9wdGlvbiA9IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIGlmIChpbmRleCA+PSAwICYmIGluZGV4IDwgdGhpcy5vcHRpb25zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZU9wdGlvbiA9IHRoaXMub3B0aW9uc1tpbmRleF07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEZpbHRlckdyb3VwLnByb3RvdHlwZS5zZXRPcHRpb25Db3VudHMgPSBmdW5jdGlvbiAoY291bnRzKSB7XHJcbiAgICAgICAgXy5lYWNoKHRoaXMub3B0aW9ucywgZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoXy5oYXMoY291bnRzLCBvcHRpb24udHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbi5jb3VudCA9IGNvdW50c1tvcHRpb24udHlwZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBGaWx0ZXJHcm91cC5wcm90b3R5cGUudXBkYXRlT3B0aW9uQ291bnRzID0gZnVuY3Rpb24gKGZpbHRlcmVkRGF0YVNldCkge1xyXG4gICAgICAgIF8uZWFjaCh0aGlzLm9wdGlvbnMsIGZ1bmN0aW9uIChvcHRpb24pIHtcclxuICAgICAgICAgICAgb3B0aW9uLmNvdW50ID0gXy5maWx0ZXIoZmlsdGVyZWREYXRhU2V0LCBvcHRpb24uZmlsdGVyLmJpbmQob3B0aW9uKSkubGVuZ3RoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWx0ZXJHcm91cDtcclxufSh0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuZmlsdGVycy5TZXJpYWxpemFibGVGaWx0ZXIpKTtcclxuZXhwb3J0cy5GaWx0ZXJHcm91cCA9IEZpbHRlckdyb3VwO1xyXG5maWx0ZXJHcm91cEZhY3RvcnkuJGluamVjdCA9IFtfX29iamVjdC5zZXJ2aWNlTmFtZV07XHJcbmZ1bmN0aW9uIGZpbHRlckdyb3VwRmFjdG9yeShvYmplY3QpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uIChzZXR0aW5ncykge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZpbHRlckdyb3VwKHNldHRpbmdzLCBvYmplY3QpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuZmlsdGVyR3JvdXBGYWN0b3J5ID0gZmlsdGVyR3JvdXBGYWN0b3J5O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2labWxzZEdWeVIzSnZkWEF1YzJWeWRtbGpaUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkltWnBiSFJsY2tkeWIzVndMbk5sY25acFkyVXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE96czdPenM3UVVGSFlpeEpRVUZaTEVOQlFVTXNWMEZCVFN4UlFVRlJMRU5CUVVNc1EwRkJRVHRCUVVVMVFpdzJRMEZCYTBNc09FSkJRVGhDTEVOQlFVTXNRMEZCUVR0QlFVTnFSU3hKUVVGUExGRkJRVkVzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVWMlFpeHRRa0ZCVnl4SFFVRlhMR0ZCUVdFc1EwRkJRenRCUVN0Q0wwTTdTVUZCYVVNc0swSkJRU3RDTzBsQlR5OUVMSEZDUVVGdlFpeFJRVUU0UWl4RlFVRlZMRTFCUVN0Q08xRkJRekZHTEdsQ1FVRlBMRU5CUVVNN1VVRkVWeXhoUVVGUkxFZEJRVklzVVVGQlVTeERRVUZ6UWp0UlFVRlZMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRWGxDTzFGQlNETkdMR0ZCUVZFc1IwRkJWeXdyUlVGQkswVXNRMEZCUXp0UlFVdHNSeXhKUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEZGQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNN1VVRkROVUlzU1VGQlNTeERRVUZETEVsQlFVa3NSMEZCUnl4UlFVRlJMRU5CUVVNc1NVRkJTU3hKUVVGSkxFbEJRVWtzUjBGQlJ5eFJRVUZSTEVOQlFVTXNTVUZCU1N4SFFVRkhMRkZCUVZFc1EwRkJReXhMUVVGTExFTkJRVU03VVVGRGJrVXNTVUZCU1N4RFFVRkRMRmRCUVZjc1JVRkJSU3hEUVVGRE8wbEJRM0JDTEVOQlFVTTdTVUZGUkN4cFEwRkJWeXhIUVVGWU8xRkJRVUVzYVVKQlYwTTdVVUZXUVN4SlFVRkpMRU5CUVVNc1QwRkJUeXhIUVVGSExFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNUMEZCVHl4RFFVRkRPMUZCUTNKRExFbEJRVWtzUTBGQlF5eFpRVUZaTEVkQlFVY3NTVUZCU1N4RFFVRkRMR2RDUVVGblFpeEZRVUZGTEVOQlFVTTdVVUZGTlVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RlFVRkZMRlZCUVVNc1RVRkJjVUk3V1VGRE1VTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU5vUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hIUVVGSExFMUJRVTBzUTBGQlF5eExRVUZMTEVOQlFVTTdXVUZETlVJc1EwRkJRenRaUVVWRUxFMUJRVTBzUTBGQlF5eEpRVUZKTEVkQlFVY3NTMEZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhSUVVGUkxFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRmRCUVZjc1JVRkJSU3hEUVVGRE8xRkJReTlFTEVOQlFVTXNRMEZCUXl4RFFVRkRPMGxCUTBvc1EwRkJRenRKUVVWRUxITkNRVUZKTEhGRFFVRlpPMkZCUVdoQ08xbEJRME1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNN1VVRkRNMElzUTBGQlF6dGhRVVZFTEZWQlFXbENMRXRCUVc5Q08xbEJRM0JETEVsQlFVa3NRMEZCUXl4aFFVRmhMRWRCUVVjc1MwRkJTeXhEUVVGRE8xbEJRek5DTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU03VVVGRGRFSXNRMEZCUXpzN08wOUJURUU3U1VGUFR5eHpRMEZCWjBJc1IwRkJlRUk3VVVGRFF5eEpRVUZKTEdGQlFXRXNSMEZCYTBJc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTnVSQ3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRVZCUVVVc1ZVRkJReXhKUVVGdFFqdFpRVU40UXl4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeEpRVUZKTEVsQlFVa3NTVUZCU1N4SlFVRkpMRU5CUVVNc1RVRkJUU3hMUVVGTExFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdaMEpCUTJwRUxHRkJRV0VzUjBGQlJ5eEpRVUZKTEVOQlFVTTdXVUZEZEVJc1EwRkJRenRSUVVOR0xFTkJRVU1zUTBGQlF5eERRVUZETzFGQlEwZ3NUVUZCVFN4RFFVRkRMR0ZCUVdFc1EwRkJRenRKUVVOMFFpeERRVUZETzBsQlJVUXNORUpCUVUwc1IwRkJUaXhWUVVGclFpeEpRVUZsTzFGQlEyaERMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRKUVVOMlF5eERRVUZETzBsQlJVUXNLMEpCUVZNc1IwRkJWRHRSUVVORExFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRNME1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1UwRkJVeXhGUVVGRkxFTkJRVU03VVVGRGJFTXNRMEZCUXp0UlFVVkVMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eFZRVUZWTEVOQlFVTXNTVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdXVUZETDBNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eFpRVUZaTEVOQlFVTXNVMEZCVXl4RlFVRkZMRU5CUVVNN1VVRkRkRU1zUTBGQlF6dFJRVU5FTEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1dVRkJXU3hEUVVGRExFdEJRVXNzUTBGQlF6dEpRVU5vUXl4RFFVRkRPMGxCUlVRc2NVTkJRV1VzUjBGQlppeFZRVUZuUWl4TFFVRmhPMUZCUXpWQ0xFVkJRVVVzUTBGQlF5eERRVUZETEV0QlFVc3NTVUZCU1N4RFFVRkRMRWxCUVVrc1MwRkJTeXhIUVVGSExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVNdlF5eEpRVUZKTEVOQlFVTXNXVUZCV1N4SFFVRkhMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTTdVVUZEZWtNc1EwRkJRenRKUVVOR0xFTkJRVU03U1VGRlJDeHhRMEZCWlN4SFFVRm1MRlZCUVdkQ0xFMUJRV2RDTzFGQlF5OUNMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNSVUZCUlN4VlFVRkRMRTFCUVN0Q08xbEJRM0JFTEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhIUVVGSExFTkJRVU1zVFVGQlRTeEZRVUZGTEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEyaERMRTFCUVUwc1EwRkJReXhMUVVGTExFZEJRVWNzVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRaUVVOd1F5eERRVUZETzFGQlEwWXNRMEZCUXl4RFFVRkRMRU5CUVVNN1NVRkRTaXhEUVVGRE8wbEJSVVFzZDBOQlFXdENMRWRCUVd4Q0xGVkJRVGhDTEdWQlFUUkNPMUZCUTNwRUxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1JVRkJSU3hWUVVGRExFMUJRU3RDTzFsQlEzQkVMRTFCUVUwc1EwRkJReXhMUVVGTExFZEJRVWNzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4bFFVRmxMRVZCUVVVc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU03VVVGRE4wVXNRMEZCUXl4RFFVRkRMRU5CUVVNN1NVRkRTaXhEUVVGRE8wbEJRMFlzYTBKQlFVTTdRVUZCUkN4RFFVRkRMRUZCYUVaRUxFTkJRV2xETEhORFFVRlBMRU5CUVVNc2EwSkJRV3RDTEVkQlowWXhSRHRCUVdoR1dTeHRRa0ZCVnl4alFXZEdka0lzUTBGQlFUdEJRVTFFTEd0Q1FVRnJRaXhEUVVGRExFOUJRVThzUjBGQlJ5eERRVUZETEZGQlFWRXNRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJRenRCUVVOd1JDdzBRa0ZCYlVNc1RVRkJLMEk3U1VGRGFrVXNXVUZCV1N4RFFVRkRPMGxCUTJJc1RVRkJUU3hEUVVGRE8xRkJRMDRzVjBGQlZ5eFpRVUZETEZGQlFUaENPMWxCUTNwRExFMUJRVTBzUTBGQlF5eEpRVUZKTEZkQlFWY3NRMEZCUXl4UlFVRlJMRVZCUVVVc1RVRkJUU3hEUVVGRExFTkJRVU03VVVGRE1VTXNRMEZCUXp0TFFVTkVMRU5CUVVNN1FVRkRTQ3hEUVVGRE8wRkJVR1VzTUVKQlFXdENMSEZDUVU5cVF5eERRVUZCSW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZmlsdGVyR3JvdXAvZmlsdGVyR3JvdXAuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG52YXIgX190cmFuc2Zvcm0gPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMudHJhbnNmb3JtLnRyYW5zZm9ybTtcclxudmFyIGZpbHRlckdyb3VwX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL2ZpbHRlckdyb3VwLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5maWx0ZXJzLmZpbHRlckdyb3VwLnJhbmdlRmlsdGVyR3JvdXAnO1xyXG5leHBvcnRzLmZhY3RvcnlOYW1lID0gJ3JhbmdlRmlsdGVyR3JvdXAnO1xyXG52YXIgUmFuZ2VGaWx0ZXJHcm91cCA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoUmFuZ2VGaWx0ZXJHcm91cCwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFJhbmdlRmlsdGVyR3JvdXAoc2V0dGluZ3MsIG9iamVjdCkge1xyXG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsIHNldHRpbmdzLCBvYmplY3QpO1xyXG4gICAgICAgIHRoaXMuZ2V0VmFsdWUgPSBzZXR0aW5ncy5nZXRWYWx1ZTtcclxuICAgICAgICBzZXR0aW5ncy5vcHRpb25zID0gXy5tYXAoc2V0dGluZ3Mub3B0aW9ucywgdGhpcy5idWlsZFJhbmdlT3B0aW9uLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuaW5pdE9wdGlvbnMoKTtcclxuICAgIH1cclxuICAgIFJhbmdlRmlsdGVyR3JvdXAucHJvdG90eXBlLnNlcmlhbGl6ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgYWN0aXZlT3B0aW9uID0gdGhpcy5hY3RpdmVPcHRpb247XHJcbiAgICAgICAgaWYgKHRoaXMuaXNOdWxsT3B0aW9uKGFjdGl2ZU9wdGlvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGhpZ2hJbmNsdXNpdmU6IGFjdGl2ZU9wdGlvbi5oaWdoSW5jbHVzaXZlLFxyXG4gICAgICAgICAgICBoaWdoRXhjbHVzaXZlOiBhY3RpdmVPcHRpb24uaGlnaEV4Y2x1c2l2ZSxcclxuICAgICAgICAgICAgbG93SW5jbHVzaXZlOiBhY3RpdmVPcHRpb24ubG93SW5jbHVzaXZlLFxyXG4gICAgICAgICAgICBsb3dFeGNsdXNpdmU6IGFjdGl2ZU9wdGlvbi5sb3dFeGNsdXNpdmUsXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBSYW5nZUZpbHRlckdyb3VwLnByb3RvdHlwZS5idWlsZFJhbmdlT3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIG1vZGVPcHRpb24gPSBvcHRpb247XHJcbiAgICAgICAgbW9kZU9wdGlvbi5maWx0ZXIgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBfX3RyYW5zZm9ybS5nZXRWYWx1ZShpdGVtLCBfdGhpcy5nZXRWYWx1ZSk7XHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZChvcHRpb24uaGlnaEV4Y2x1c2l2ZSkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSB2YWx1ZSA8IG9wdGlvbi5oaWdoRXhjbHVzaXZlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKF8uaXNVbmRlZmluZWQob3B0aW9uLmhpZ2hJbmNsdXNpdmUpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdmFsdWUgPD0gb3B0aW9uLmhpZ2hJbmNsdXNpdmU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQob3B0aW9uLmxvd0V4Y2x1c2l2ZSkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgJiYgdmFsdWUgPiBvcHRpb24ubG93RXhjbHVzaXZlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKF8uaXNVbmRlZmluZWQob3B0aW9uLmxvd0luY2x1c2l2ZSkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQgJiYgdmFsdWUgPj0gb3B0aW9uLmxvd0luY2x1c2l2ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG1vZGVPcHRpb247XHJcbiAgICB9O1xyXG4gICAgUmFuZ2VGaWx0ZXJHcm91cC5wcm90b3R5cGUuaXNOdWxsT3B0aW9uID0gZnVuY3Rpb24gKG9wdGlvbikge1xyXG4gICAgICAgIHJldHVybiBvcHRpb24uaGlnaEluY2x1c2l2ZSA9PSBudWxsXHJcbiAgICAgICAgICAgICYmIG9wdGlvbi5oaWdoRXhjbHVzaXZlID09IG51bGxcclxuICAgICAgICAgICAgJiYgb3B0aW9uLmxvd0luY2x1c2l2ZSA9PSBudWxsXHJcbiAgICAgICAgICAgICYmIG9wdGlvbi5sb3dFeGNsdXNpdmUgPT0gbnVsbDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gUmFuZ2VGaWx0ZXJHcm91cDtcclxufShmaWx0ZXJHcm91cF9zZXJ2aWNlXzEuRmlsdGVyR3JvdXApKTtcclxucmFuZ2VGaWx0ZXJHcm91cEZhY3RvcnkuJGluamVjdCA9IFtfX29iamVjdC5zZXJ2aWNlTmFtZV07XHJcbmZ1bmN0aW9uIHJhbmdlRmlsdGVyR3JvdXBGYWN0b3J5KG9iamVjdCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRJbnN0YW5jZTogZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUmFuZ2VGaWx0ZXJHcm91cChzZXR0aW5ncywgb2JqZWN0KTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLnJhbmdlRmlsdGVyR3JvdXBGYWN0b3J5ID0gcmFuZ2VGaWx0ZXJHcm91cEZhY3Rvcnk7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW19fb2JqZWN0Lm1vZHVsZU5hbWVdKVxyXG4gICAgLmZhY3RvcnkoZXhwb3J0cy5mYWN0b3J5TmFtZSwgcmFuZ2VGaWx0ZXJHcm91cEZhY3RvcnkpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljbUZ1WjJWR2FXeDBaWEpIY205MWNDNXpaWEoyYVdObExtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpY21GdVoyVkdhV3gwWlhKSGNtOTFjQzV6WlhKMmFXTmxMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxGbEJRVmtzUTBGQlF6czdPenM3TzBGQlJXSXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGRGJrTXNTVUZCV1N4RFFVRkRMRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGRk5VSXNOa05CUVhsQ0xEaENRVUU0UWl4RFFVRkRMRU5CUVVFN1FVRkRlRVFzU1VGQlR5eFJRVUZSTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRGJFTXNTVUZCVHl4WFFVRlhMRWRCUVVjc2RVTkJRVkVzUTBGQlF5eFRRVUZUTEVOQlFVTXNVMEZCVXl4RFFVRkRPMEZCUld4RUxHOURRVUY1UkN4M1FrRkJkMElzUTBGQlF5eERRVUZCTzBGQlJYWkZMR3RDUVVGVkxFZEJRVmNzY1VWQlFYRkZMRU5CUVVNN1FVRkRNMFlzYlVKQlFWY3NSMEZCVnl4clFrRkJhMElzUTBGQlF6dEJRVzlEY0VRN1NVRkJLMElzYjBOQlFWYzdTVUZIZWtNc01FSkJRVmtzVVVGQmQwTXNSVUZCUlN4TlFVRXJRanRSUVVOd1JpeHJRa0ZCVnl4UlFVRlJMRVZCUVVVc1RVRkJUU3hEUVVGRExFTkJRVU03VVVGRE4wSXNTVUZCU1N4RFFVRkRMRkZCUVZFc1IwRkJSeXhSUVVGUkxFTkJRVU1zVVVGQlVTeERRVUZETzFGQlEyeERMRkZCUVZFc1EwRkJReXhQUVVGUExFZEJRVWNzUTBGQlF5eERRVUZETEVkQlFVY3NRMEZCYVVRc1VVRkJVU3hEUVVGRExFOUJRVThzUlVGQlJTeEpRVUZKTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkROMGdzU1VGQlNTeERRVUZETEZkQlFWY3NSVUZCUlN4RFFVRkRPMGxCUTNCQ0xFTkJRVU03U1VGRlJDeHZRMEZCVXl4SFFVRlVPMUZCUTBNc1NVRkJTU3haUVVGWkxFZEJRVFJDTEVsQlFVa3NRMEZCUXl4WlFVRlpMRU5CUVVNN1VVRkRPVVFzUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJReXhaUVVGWkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEY2tNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF6dFJRVU5pTEVOQlFVTTdVVUZEUkN4TlFVRk5MRU5CUVVNN1dVRkRUaXhoUVVGaExFVkJRVVVzV1VGQldTeERRVUZETEdGQlFXRTdXVUZEZWtNc1lVRkJZU3hGUVVGRkxGbEJRVmtzUTBGQlF5eGhRVUZoTzFsQlEzcERMRmxCUVZrc1JVRkJSU3haUVVGWkxFTkJRVU1zV1VGQldUdFpRVU4yUXl4WlFVRlpMRVZCUVVVc1dVRkJXU3hEUVVGRExGbEJRVms3VTBGRGRrTXNRMEZCUXp0SlFVTklMRU5CUVVNN1NVRkZUeXd5UTBGQlowSXNSMEZCZUVJc1ZVRkJlVUlzVFVGQmEwTTdVVUZCTTBRc2FVSkJkVUpETzFGQmRFSkJMRWxCUVVrc1ZVRkJWU3hIUVVFMFFpeE5RVUZOTEVOQlFVTTdVVUZEYWtRc1ZVRkJWU3hEUVVGRExFMUJRVTBzUjBGQlJ5eFZRVUZETEVsQlFWTTdXVUZETjBJc1NVRkJTU3hMUVVGTExFZEJRVmNzVjBGQlZ5eERRVUZETEZGQlFWRXNRMEZCUXl4SlFVRkpMRVZCUVVVc1MwRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFsQlJUbEVMRWxCUVVrc1RVRkJUU3hIUVVGWkxFbEJRVWtzUTBGQlF6dFpRVVV6UWl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEUxQlFVMHNRMEZCUXl4aFFVRmhMRU5CUVVNc1MwRkJTeXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTnVSQ3hOUVVGTkxFZEJRVWNzUzBGQlN5eEhRVUZITEUxQlFVMHNRMEZCUXl4aFFVRmhMRU5CUVVNN1dVRkRka01zUTBGQlF6dFpRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEUxQlFVMHNRMEZCUXl4aFFVRmhMRU5CUVVNc1MwRkJTeXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTXhSQ3hOUVVGTkxFZEJRVWNzUzBGQlN5eEpRVUZKTEUxQlFVMHNRMEZCUXl4aFFVRmhMRU5CUVVNN1dVRkRlRU1zUTBGQlF6dFpRVVZFTEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhYUVVGWExFTkJRVU1zVFVGQlRTeERRVUZETEZsQlFWa3NRMEZCUXl4TFFVRkxMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEyeEVMRTFCUVUwc1IwRkJSeXhOUVVGTkxFbEJRVWtzUzBGQlN5eEhRVUZITEUxQlFVMHNRMEZCUXl4WlFVRlpMRU5CUVVNN1dVRkRhRVFzUTBGQlF6dFpRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEUxQlFVMHNRMEZCUXl4WlFVRlpMRU5CUVVNc1MwRkJTeXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTjZSQ3hOUVVGTkxFZEJRVWNzVFVGQlRTeEpRVUZKTEV0QlFVc3NTVUZCU1N4TlFVRk5MRU5CUVVNc1dVRkJXU3hEUVVGRE8xbEJRMnBFTEVOQlFVTTdXVUZGUkN4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRE8xRkJRMllzUTBGQlF5eERRVUZETzFGQlJVWXNUVUZCVFN4RFFVRkRMRlZCUVZVc1EwRkJRenRKUVVOdVFpeERRVUZETzBsQlJVOHNkVU5CUVZrc1IwRkJjRUlzVlVGQmNVSXNUVUZCTUVJN1VVRkRPVU1zVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4aFFVRmhMRWxCUVVrc1NVRkJTVHRsUVVNdlFpeE5RVUZOTEVOQlFVTXNZVUZCWVN4SlFVRkpMRWxCUVVrN1pVRkROVUlzVFVGQlRTeERRVUZETEZsQlFWa3NTVUZCU1N4SlFVRkpPMlZCUXpOQ0xFMUJRVTBzUTBGQlF5eFpRVUZaTEVsQlFVa3NTVUZCU1N4RFFVRkRPMGxCUTJwRExFTkJRVU03U1VGRFJpeDFRa0ZCUXp0QlFVRkVMRU5CUVVNc1FVRjBSRVFzUTBGQkswSXNhVU5CUVZjc1IwRnpSSHBETzBGQlRVUXNkVUpCUVhWQ0xFTkJRVU1zVDBGQlR5eEhRVUZITEVOQlFVTXNVVUZCVVN4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRE8wRkJRM3BFTEdsRFFVRjNReXhOUVVFclFqdEpRVU4wUlN4WlFVRlpMRU5CUVVNN1NVRkRZaXhOUVVGTkxFTkJRVU03VVVGRFRpeFhRVUZYTEZsQlFVTXNVVUZCZDBNN1dVRkRia1FzVFVGQlRTeERRVUZETEVsQlFVa3NaMEpCUVdkQ0xFTkJRVU1zVVVGQlVTeEZRVUZGTEUxQlFVMHNRMEZCUXl4RFFVRkRPMUZCUXk5RExFTkJRVU03UzBGRFJDeERRVUZETzBGQlEwZ3NRMEZCUXp0QlFWQmxMQ3RDUVVGMVFpd3dRa0ZQZEVNc1EwRkJRVHRCUVVWRUxFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNhMEpCUVZVc1JVRkJSU3hEUVVGRExGRkJRVkVzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXp0TFFVTXZReXhQUVVGUExFTkJRVU1zYlVKQlFWY3NSVUZCUlN4MVFrRkJkVUlzUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZmlsdGVyR3JvdXAvcmFuZ2VGaWx0ZXJHcm91cC9yYW5nZUZpbHRlckdyb3VwLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybEZpbHRlckdyb3VwJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdGaWx0ZXJHcm91cENvbnRyb2xsZXInO1xyXG52YXIgRmlsdGVyR3JvdXBDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpbHRlckdyb3VwQ29udHJvbGxlcigkc2NvcGUpIHtcclxuICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcclxuICAgICAgICB0aGlzLmhhc0ljb24gPSB0aGlzLmljb24gIT0gbnVsbCAmJiB0aGlzLmljb24gIT09ICcnO1xyXG4gICAgICAgIHRoaXMuc2hvd0NoaWxkcmVuID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIEZpbHRlckdyb3VwQ29udHJvbGxlci5wcm90b3R5cGUudG9nZ2xlQ2hpbGRyZW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5zaG93Q2hpbGRyZW4gPSAhdGhpcy5zaG93Q2hpbGRyZW47XHJcbiAgICB9O1xyXG4gICAgRmlsdGVyR3JvdXBDb250cm9sbGVyLnByb3RvdHlwZS5zZWxlY3RPcHRpb24gPSBmdW5jdGlvbiAob3B0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5maWx0ZXJHcm91cC5hY3RpdmVPcHRpb24gPSBvcHRpb247XHJcbiAgICAgICAgdGhpcy5zaG93Q2hpbGRyZW4gPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5zb3VyY2UgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnNvdXJjZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS4kZW1pdCgnZGF0YVNvdXJjZS5yZXF1ZXN0UmVmcmVzaCcpOyAvLypldmVudD9cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRmlsdGVyR3JvdXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG4gICAgcmV0dXJuIEZpbHRlckdyb3VwQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5GaWx0ZXJHcm91cENvbnRyb2xsZXIgPSBGaWx0ZXJHcm91cENvbnRyb2xsZXI7XHJcbmV4cG9ydHMuZmlsdGVyR3JvdXAgPSB7XHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9maWx0ZXJHcm91cC5kaXJlY3RpdmUuaHRtbCcpLFxyXG4gICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgIGNvbnRyb2xsZXJBczogJ2NvbnRyb2xsZXInLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBpY29uOiAnPScsXHJcbiAgICAgICAgZmlsdGVyR3JvdXA6ICc9JyxcclxuICAgICAgICBzb3VyY2U6ICc9JyxcclxuICAgIH0sXHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVptbHNkR1Z5UjNKdmRYQXVaR2x5WldOMGFYWmxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaVptbHNkR1Z5UjNKdmRYQXVaR2x5WldOMGFYWmxMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxHZEZRVUZuUlR0QlFVVm9SU3haUVVGWkxFTkJRVU03UVVGVlJpeHhRa0ZCWVN4SFFVRlhMR1ZCUVdVc1EwRkJRenRCUVVONFF5eHpRa0ZCWXl4SFFVRlhMSFZDUVVGMVFpeERRVUZETzBGQlVUVkVPMGxCVlVNc0swSkJRVzlDTEUxQlFYTkNPMUZCUVhSQ0xGZEJRVTBzUjBGQlRpeE5RVUZOTEVOQlFXZENPMUZCUTNwRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NTVUZCU1N4RFFVRkRMRWxCUVVrc1NVRkJTU3hKUVVGSkxFbEJRVWtzU1VGQlNTeERRVUZETEVsQlFVa3NTMEZCU3l4RlFVRkZMRU5CUVVNN1VVRkRja1FzU1VGQlNTeERRVUZETEZsQlFWa3NSMEZCUnl4SlFVRkpMRU5CUVVNN1NVRkRNVUlzUTBGQlF6dEpRVVZFTERoRFFVRmpMRWRCUVdRN1VVRkRReXhKUVVGSkxFTkJRVU1zV1VGQldTeEhRVUZITEVOQlFVTXNTVUZCU1N4RFFVRkRMRmxCUVZrc1EwRkJRenRKUVVONFF5eERRVUZETzBsQlJVUXNORU5CUVZrc1IwRkJXaXhWUVVGaExFMUJRWEZDTzFGQlEycERMRWxCUVVrc1EwRkJReXhYUVVGWExFTkJRVU1zV1VGQldTeEhRVUZITEUxQlFVMHNRMEZCUXp0UlFVTjJReXhKUVVGSkxFTkJRVU1zV1VGQldTeEhRVUZITEV0QlFVc3NRMEZCUXp0UlFVVXhRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGVrSXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhQUVVGUExFVkJRVVVzUTBGQlF6dFJRVU4yUWl4RFFVRkRPMUZCUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03V1VGRFVDeEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRXRCUVVzc1EwRkJReXd5UWtGQk1rSXNRMEZCUXl4RFFVRkRMRU5CUVVNc1UwRkJVenRSUVVNeFJDeERRVUZETzBsQlEwWXNRMEZCUXp0SlFXNUNUU3cyUWtGQlR5eEhRVUZoTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNN1NVRnZRblpETERSQ1FVRkRPMEZCUVVRc1EwRkJReXhCUVRkQ1JDeEpRVFpDUXp0QlFUZENXU3cyUWtGQmNVSXNkMEpCTmtKcVF5eERRVUZCTzBGQlJWVXNiVUpCUVZjc1IwRkJPRUk3U1VGRGJrUXNVVUZCVVN4RlFVRkZMRTlCUVU4c1EwRkJReXc0UWtGQk9FSXNRMEZCUXp0SlFVTnFSQ3hWUVVGVkxFVkJRVVVzYzBKQlFXTTdTVUZETVVJc1dVRkJXU3hGUVVGRkxGbEJRVms3U1VGRE1VSXNVVUZCVVN4RlFVRkZPMUZCUTFRc1NVRkJTU3hGUVVGRkxFZEJRVWM3VVVGRFZDeFhRVUZYTEVWQlFVVXNSMEZCUnp0UlFVTm9RaXhOUVVGTkxFVkJRVVVzUjBGQlJ6dExRVU5ZTzBOQlEwUXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvZmlsdGVyR3JvdXAvZmlsdGVyR3JvdXAuZGlyZWN0aXZlLmpzXG4gKiogbW9kdWxlIGlkID0gODNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJmaWx0ZXItZ3JvdXBcXFwiPlxcclxcblxcdDxkaXYgY2xhc3M9XFxcInJvdyBmaWx0ZXItaGVhZGVyXFxcIiBuZy1jbGljaz1cXFwiY29udHJvbGxlci50b2dnbGVDaGlsZHJlbigpXFxcIj5cXHJcXG5cXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjb2wtc20tMTJcXFwiPlxcclxcblxcdFxcdFxcdDxpIGNsYXNzPVxcXCJjb2xsYXBzZS1pY29uIGZhIGZhLWNhcmV0LWRvd24gZmEtMnhcXFwiIG5nLXNob3c9XFxcImNvbnRyb2xsZXIuc2hvd0NoaWxkcmVuXFxcIiB0aXRsZT1cXFwiSGlkZSBmaWx0ZXIgbGlzdFxcXCI+PC9pPlxcclxcblxcdFxcdFxcdDxpIGNsYXNzPVxcXCJjb2xsYXBzZS1pY29uIGZhIGZhLWNhcmV0LXJpZ2h0IGZhLTJ4XFxcIiBuZy1oaWRlPVxcXCJjb250cm9sbGVyLnNob3dDaGlsZHJlblxcXCIgdGl0bGU9XFxcIlNob3cgZmlsdGVyIGxpc3RcXFwiPjwvaT5cXHJcXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJmaWx0ZXItb3B0aW9uXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHQ8ZGl2IHN0eWxlPVxcXCJkaXNwbGF5OmlubGluZS1ibG9ja1xcXCIgbmctc2hvdz1cXFwiY29udHJvbGxlci5oYXNJY29uXFxcIiBuZy1iaW5kLWh0bWw9XFxcImNvbnRyb2xsZXIuaWNvblxcXCI+PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0PGg0IHN0eWxlPVxcXCJkaXNwbGF5OiBpbmxpbmUtYmxvY2tcXFwiPnt7Y29udHJvbGxlci5maWx0ZXJHcm91cC5sYWJlbH19OiB7e2NvbnRyb2xsZXIuZmlsdGVyR3JvdXAuYWN0aXZlT3B0aW9uLmxhYmVsfX08L2g0PlxcclxcblxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdDwvZGl2PlxcclxcblxcdDwvZGl2PlxcclxcblxcdDxkaXYgbmctc2hvdz1cXFwiY29udHJvbGxlci5zaG93Q2hpbGRyZW5cXFwiIG5nLXJlcGVhdD1cXFwiZmlsdGVyT3B0aW9uIGluIGNvbnRyb2xsZXIuZmlsdGVyR3JvdXAub3B0aW9uc1xcXCI+XFxyXFxuXFx0XFx0PHJsLWZpbHRlci1vcHRpb24gb3B0aW9uPVxcXCJmaWx0ZXJPcHRpb25cXFwiIGFjdGl2ZT1cXFwiZmlsdGVyR3JvdXAuYWN0aXZlT3B0aW9uID09PSBmaWx0ZXJPcHRpb25cXFwiIGFjdGl2YXRlPVxcXCJjb250cm9sbGVyLnNlbGVjdE9wdGlvbihmaWx0ZXJPcHRpb24pXFxcIj48L3JsLWZpbHRlci1vcHRpb24+XFxyXFxuXFx0PC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuXCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2ZpbHRlckdyb3VwL2ZpbHRlckdyb3VwLmRpcmVjdGl2ZS5odG1sXG4gKiogbW9kdWxlIGlkID0gODRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgc2VsZWN0RmlsdGVyX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4vc2VsZWN0RmlsdGVyLnNlcnZpY2UnKTtcclxudmFyIHNlbGVjdEZpbHRlcl9jb21wb25lbnRfMSA9IHJlcXVpcmUoJy4vc2VsZWN0RmlsdGVyLmNvbXBvbmVudCcpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5jYXJkQ29udGFpbmVyLmZpbHRlcnMuc2VsZWN0RmlsdGVyJztcclxuX19leHBvcnQocmVxdWlyZSgnLi9zZWxlY3RGaWx0ZXIuc2VydmljZScpKTtcclxuX19leHBvcnQocmVxdWlyZSgnLi9zZWxlY3RGaWx0ZXIuY29tcG9uZW50JykpO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmZhY3Rvcnkoc2VsZWN0RmlsdGVyX3NlcnZpY2VfMS5mYWN0b3J5TmFtZSwgc2VsZWN0RmlsdGVyX3NlcnZpY2VfMS5zZWxlY3RGaWx0ZXJGYWN0b3J5KVxyXG4gICAgLmNvbXBvbmVudChzZWxlY3RGaWx0ZXJfY29tcG9uZW50XzEuY29tcG9uZW50TmFtZSwgc2VsZWN0RmlsdGVyX2NvbXBvbmVudF8xLnNlbGVjdEZpbHRlcilcclxuICAgIC5jb250cm9sbGVyKHNlbGVjdEZpbHRlcl9jb21wb25lbnRfMS5jb250cm9sbGVyTmFtZSwgc2VsZWN0RmlsdGVyX2NvbXBvbmVudF8xLlNlbGVjdEZpbHRlckNvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljMlZzWldOMFJtbHNkR1Z5TG0xdlpIVnNaUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkluTmxiR1ZqZEVacGJIUmxjaTV0YjJSMWJHVXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE96czdPMEZCUldJc1NVRkJXU3hQUVVGUExGZEJRVTBzVTBGQlV5eERRVUZETEVOQlFVRTdRVUZGYmtNc2NVTkJRU3RETEhkQ1FVRjNRaXhEUVVGRExFTkJRVUU3UVVGRGVFVXNkVU5CUVd0R0xEQkNRVVZzUml4RFFVRkRMRU5CUmpKSE8wRkJSV3BITEd0Q1FVRlZMRWRCUVZjc2NVUkJRWEZFTEVOQlFVTTdRVUZEZEVZc2FVSkJRV1VzZDBKQlFYZENMRU5CUVVNc1JVRkJRVHRCUVVONFF5eHBRa0ZCWXl3d1FrRkZaQ3hEUVVGRExFVkJSblZETzBGQlJYaERMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFWVXNSVUZCUlN4RlFVVXhRaXhEUVVGRE8wdEJRMEVzVDBGQlR5eERRVUZETEd0RFFVRlhMRVZCUVVVc01FTkJRVzFDTEVOQlFVTTdTMEZEZWtNc1UwRkJVeXhEUVVGRExITkRRVUZoTEVWQlFVVXNjVU5CUVZrc1EwRkJRenRMUVVOMFF5eFZRVUZWTEVOQlFVTXNkVU5CUVdNc1JVRkJSU3dyUTBGQmMwSXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9zZWxlY3RGaWx0ZXIvc2VsZWN0RmlsdGVyLm1vZHVsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbnZhciBfX3RyYW5zZm9ybSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy50cmFuc2Zvcm0udHJhbnNmb3JtO1xyXG5leHBvcnRzLmZhY3RvcnlOYW1lID0gJ3JsU2VsZWN0RmlsdGVyRmFjdG9yeSc7XHJcbnZhciBTZWxlY3RGaWx0ZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU2VsZWN0RmlsdGVyKHNldHRpbmdzKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gJ3NlbGVjdEZpbHRlcic7XHJcbiAgICAgICAgdGhpcy52YWx1ZVNlbGVjdG9yID0gc2V0dGluZ3MudmFsdWVTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLmNvbXBhcmVyID0gc2V0dGluZ3MuY29tcGFyZXI7XHJcbiAgICAgICAgdGhpcy5vcHRpb25zID0gc2V0dGluZ3Mub3B0aW9ucztcclxuICAgICAgICB0aGlzLmdldE9wdGlvbnMgPSBzZXR0aW5ncy5nZXRPcHRpb25zO1xyXG4gICAgICAgIHRoaXMubGFiZWwgPSBzZXR0aW5ncy5sYWJlbDtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lU2VsZWN0b3IgPSBzZXR0aW5ncy5kaXNwbGF5TmFtZVNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMubnVsbE9wdGlvbiA9IHNldHRpbmdzLm51bGxPcHRpb247XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IFwiPHJsLXNlbGVjdC1maWx0ZXIgZmlsdGVyPVxcXCJmaWx0ZXJcXFwiIHNvdXJjZT1cXFwiZGF0YVNvdXJjZVxcXCIgb3B0aW9ucz1cXFwiZmlsdGVyLm9wdGlvbnNcXFwiIGdldC1vcHRpb25zPVxcXCJmaWx0ZXIuZ2V0T3B0aW9ucygpXFxcIlxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdCAgIGxhYmVsPVxcXCJ7e2ZpbHRlci5sYWJlbH19XFxcIiBzZWxlY3Rvcj1cXFwiZmlsdGVyLmRpc3BsYXlOYW1lU2VsZWN0b3JcXFwiIG51bGwtb3B0aW9uPVxcXCJ7e2ZpbHRlci5udWxsT3B0aW9ufX1cXFwiPjwvcmwtc2VsZWN0LWZpbHRlcj5cIjtcclxuICAgIH1cclxuICAgIFNlbGVjdEZpbHRlci5wcm90b3R5cGUuZmlsdGVyID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZFZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBhcmVyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZXIodGhpcy5nZXRWYWx1ZShpdGVtKSwgdGhpcy5zZWxlY3RlZFZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9fb2JqZWN0Lm9iamVjdFV0aWxpdHkuYXJlRXF1YWwodGhpcy5nZXRWYWx1ZShpdGVtKSwgdGhpcy5zZWxlY3RlZFZhbHVlKTtcclxuICAgIH07XHJcbiAgICBTZWxlY3RGaWx0ZXIucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICByZXR1cm4gX190cmFuc2Zvcm0uZ2V0VmFsdWUoaXRlbSwgdGhpcy52YWx1ZVNlbGVjdG9yKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gU2VsZWN0RmlsdGVyO1xyXG59KCkpO1xyXG5mdW5jdGlvbiBzZWxlY3RGaWx0ZXJGYWN0b3J5KCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRJbnN0YW5jZTogZnVuY3Rpb24gKHNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2VsZWN0RmlsdGVyKHNldHRpbmdzKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLnNlbGVjdEZpbHRlckZhY3RvcnkgPSBzZWxlY3RGaWx0ZXJGYWN0b3J5O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljMlZzWldOMFJtbHNkR1Z5TG5ObGNuWnBZMlV1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SnpaV3hsWTNSR2FXeDBaWEl1YzJWeWRtbGpaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdRVUZIWWl3MlEwRkJaME1zT0VKQlFUaENMRU5CUVVNc1EwRkJRVHRCUVVNdlJDeEpRVUZQTEZGQlFWRXNSMEZCUnl4MVEwRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU5zUXl4SlFVRlBMRmRCUVZjc1IwRkJSeXgxUTBGQlVTeERRVUZETEZOQlFWTXNRMEZCUXl4VFFVRlRMRU5CUVVNN1FVRkZka01zYlVKQlFWY3NSMEZCVnl4MVFrRkJkVUlzUTBGQlF6dEJRWE5DZWtRN1NVRmxReXh6UWtGQldTeFJRVUYxUkR0UlFXSnVSU3hUUVVGSkxFZEJRVmNzWTBGQll5eERRVUZETzFGQll6ZENMRWxCUVVrc1EwRkJReXhoUVVGaExFZEJRVWNzVVVGQlVTeERRVUZETEdGQlFXRXNRMEZCUXp0UlFVTTFReXhKUVVGSkxFTkJRVU1zVVVGQlVTeEhRVUZITEZGQlFWRXNRMEZCUXl4UlFVRlJMRU5CUVVNN1VVRkRiRU1zU1VGQlNTeERRVUZETEU5QlFVOHNSMEZCUnl4UlFVRlJMRU5CUVVNc1QwRkJUeXhEUVVGRE8xRkJRMmhETEVsQlFVa3NRMEZCUXl4VlFVRlZMRWRCUVVjc1VVRkJVU3hEUVVGRExGVkJRVlVzUTBGQlF6dFJRVU4wUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTTdVVUZETlVJc1NVRkJTU3hEUVVGRExHMUNRVUZ0UWl4SFFVRkhMRkZCUVZFc1EwRkJReXh0UWtGQmJVSXNRMEZCUXp0UlFVTjRSQ3hKUVVGSkxFTkJRVU1zVlVGQlZTeEhRVUZITEZGQlFWRXNRMEZCUXl4VlFVRlZMRU5CUVVNN1VVRkRkRU1zU1VGQlNTeERRVUZETEZGQlFWRXNSMEZCUnl3clVVRkRhMGdzUTBGQlF6dEpRVU53U1N4RFFVRkRPMGxCUlVRc05rSkJRVTBzUjBGQlRpeFZRVUZQTEVsQlFXVTdVVUZEY2tJc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEdGQlFXRXNTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRMmhETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNN1VVRkRZaXhEUVVGRE8xRkJSVVFzUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6TkNMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1NVRkJTU3hEUVVGRExFVkJRVVVzU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUXl4RFFVRkRPMUZCUXk5RUxFTkJRVU03VVVGRlJDeE5RVUZOTEVOQlFVTXNVVUZCVVN4RFFVRkRMR0ZCUVdFc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hKUVVGSkxFTkJRVU1zWVVGQllTeERRVUZETEVOQlFVTTdTVUZEYWtZc1EwRkJRenRKUVVWUExDdENRVUZSTEVkQlFXaENMRlZCUVdsQ0xFbEJRV1U3VVVGREwwSXNUVUZCVFN4RFFVRkRMRmRCUVZjc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeEZRVUZGTEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1EwRkJRenRKUVVOMlJDeERRVUZETzBsQlJVWXNiVUpCUVVNN1FVRkJSQ3hEUVVGRExFRkJNME5FTEVsQk1rTkRPMEZCVFVRN1NVRkRReXhOUVVGTkxFTkJRVU03VVVGRFRpeFhRVUZYTEZsQlFYbENMRkZCUVhWRU8xbEJRekZHTEUxQlFVMHNRMEZCUXl4SlFVRkpMRmxCUVZrc1EwRkJlVUlzVVVGQlVTeERRVUZETEVOQlFVTTdVVUZETTBRc1EwRkJRenRMUVVORUxFTkJRVU03UVVGRFNDeERRVUZETzBGQlRtVXNNa0pCUVcxQ0xITkNRVTFzUXl4RFFVRkJJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9zZWxlY3RGaWx0ZXIvc2VsZWN0RmlsdGVyLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSA4NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybFNlbGVjdEZpbHRlcic7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnU2VsZWN0RmlsdGVyQ29udHJvbGxlcic7XHJcbnZhciBTZWxlY3RGaWx0ZXJDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNlbGVjdEZpbHRlckNvbnRyb2xsZXIoJHNjb3BlKSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2VsZWN0RmlsdGVyQ29udHJvbGxlci5wcm90b3R5cGUsIFwic2VsZWN0ZWRWYWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpbHRlci5zZWxlY3RlZFZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICB0aGlzLmZpbHRlci5zZWxlY3RlZFZhbHVlID0gdjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc291cmNlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuJHNjb3BlLiRlbWl0KCdkYXRhU291cmNlLnJlcXVlc3RSZWZyZXNoJyk7IC8vKmV2ZW50P1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBTZWxlY3RGaWx0ZXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG4gICAgcmV0dXJuIFNlbGVjdEZpbHRlckNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuU2VsZWN0RmlsdGVyQ29udHJvbGxlciA9IFNlbGVjdEZpbHRlckNvbnRyb2xsZXI7XHJcbmV4cG9ydHMuc2VsZWN0RmlsdGVyID0ge1xyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vc2VsZWN0RmlsdGVyLmh0bWwnKSxcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdmaWx0ZXInLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBmaWx0ZXI6ICc8JyxcclxuICAgICAgICBvcHRpb25zOiAnPD8nLFxyXG4gICAgICAgIGdldE9wdGlvbnM6ICcmJyxcclxuICAgICAgICBzb3VyY2U6ICc8PycsXHJcbiAgICAgICAgbGFiZWw6ICdAJyxcclxuICAgICAgICBzZWxlY3RvcjogJzw/JyxcclxuICAgICAgICBudWxsT3B0aW9uOiAnQCdcclxuICAgIH0sXHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWMyVnNaV04wUm1sc2RHVnlMbU52YlhCdmJtVnVkQzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkluTmxiR1ZqZEVacGJIUmxjaTVqYjIxd2IyNWxiblF1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNaMFZCUVdkRk8wRkJSV2hGTEZsQlFWa3NRMEZCUXp0QlFVMUdMSEZDUVVGaExFZEJRVmNzWjBKQlFXZENMRU5CUVVNN1FVRkRla01zYzBKQlFXTXNSMEZCVnl4M1FrRkJkMElzUTBGQlF6dEJRV3RDTjBRN1NVRlZReXhuUTBGQmIwSXNUVUZCYzBJN1VVRkJkRUlzVjBGQlRTeEhRVUZPTEUxQlFVMHNRMEZCWjBJN1NVRkJTU3hEUVVGRE8wbEJSUzlETEhOQ1FVRlhMR2xFUVVGaE8yRkJRWGhDTzFsQlEwTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zWVVGQllTeERRVUZETzFGQlEyeERMRU5CUVVNN1lVRkRSQ3hWUVVGNVFpeERRVUZOTzFsQlF6bENMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zWVVGQllTeEhRVUZITEVOQlFVTXNRMEZCUXp0WlFVTTVRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEzcENMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVDBGQlR5eEZRVUZGTEVOQlFVTTdXVUZEZGtJc1EwRkJRenRaUVVGQkxFbEJRVWtzUTBGQlF5eERRVUZETzJkQ1FVTkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUzBGQlN5eERRVUZETERKQ1FVRXlRaXhEUVVGRExFTkJRVU1zUTBGQlF5eFRRVUZUTzFsQlF6ZEVMRU5CUVVNN1VVRkRVaXhEUVVGRE96czdUMEZTUVR0SlFVeE5MRGhDUVVGUExFZEJRVWNzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXp0SlFXTTNRaXcyUWtGQlF6dEJRVUZFTEVOQlFVTXNRVUYyUWtRc1NVRjFRa003UVVGMlFsa3NPRUpCUVhOQ0xIbENRWFZDYkVNc1EwRkJRVHRCUVVWVkxHOUNRVUZaTEVkQlFUaENPMGxCUTNCRUxGRkJRVkVzUlVGQlJTeFBRVUZQTEVOQlFVTXNjVUpCUVhGQ0xFTkJRVU03U1VGRGVFTXNWVUZCVlN4RlFVRkZMSE5DUVVGak8wbEJRekZDTEZsQlFWa3NSVUZCUlN4UlFVRlJPMGxCUTNSQ0xGRkJRVkVzUlVGQlJUdFJRVU5VTEUxQlFVMHNSVUZCUlN4SFFVRkhPMUZCUTFnc1QwRkJUeXhGUVVGRkxFbEJRVWs3VVVGRFlpeFZRVUZWTEVWQlFVVXNSMEZCUnp0UlFVTm1MRTFCUVUwc1JVRkJSU3hKUVVGSk8xRkJRMW9zUzBGQlN5eEZRVUZGTEVkQlFVYzdVVUZEVml4UlFVRlJMRVZCUVVVc1NVRkJTVHRSUVVOa0xGVkJRVlVzUlVGQlJTeEhRVUZITzB0QlEyWTdRMEZEUkN4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvZmlsdGVycy9zZWxlY3RGaWx0ZXIvc2VsZWN0RmlsdGVyLmNvbXBvbmVudC5qc1xuICoqIG1vZHVsZSBpZCA9IDg3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZmlsdGVyLWdyb3VwXFxcIj5cXHJcXG5cXHQ8cmwtc2VsZWN0IG5nLW1vZGVsPVxcXCJmaWx0ZXIuc2VsZWN0ZWRWYWx1ZVxcXCIgb3B0aW9ucz1cXFwiZmlsdGVyLm9wdGlvbnNcXFwiIGxhYmVsPVxcXCJ7e2ZpbHRlci5sYWJlbH19XFxcIlxcclxcblxcdFxcdFxcdCAgIHNlbGVjdG9yPVxcXCJmaWx0ZXIuc2VsZWN0b3JcXFwiIGdldC1vcHRpb25zPVxcXCJmaWx0ZXIuZ2V0T3B0aW9ucygpXFxcIiBudWxsLW9wdGlvbj1cXFwie3tmaWx0ZXIubnVsbE9wdGlvbn19XFxcIj48L3JsLXNlbGVjdD5cXHJcXG48L2Rpdj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvc2VsZWN0RmlsdGVyL3NlbGVjdEZpbHRlci5odG1sXG4gKiogbW9kdWxlIGlkID0gODhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3Mvbm9kZS9ub2RlLmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuZmlsdGVycy5jYXJkQ29udGFpbmVyRmlsdGVycyc7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybENhcmRDb250YWluZXJGaWx0ZXJzJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdDYXJkQ29udGFpbmVyRmlsdGVyc0NvbnRyb2xsZXInO1xyXG52YXIgQ2FyZENvbnRhaW5lckZpbHRlcnNDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENhcmRDb250YWluZXJGaWx0ZXJzQ29udHJvbGxlcigkcm9vdFNjb3BlKSB7XHJcbiAgICAgICAgdGhpcy4kcm9vdFNjb3BlID0gJHJvb3RTY29wZTtcclxuICAgIH1cclxuICAgIENhcmRDb250YWluZXJGaWx0ZXJzQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMucmVuZGVyYWJsZUZpbHRlcnMgPSBfKHRoaXMuZmlsdGVycykuZmlsdGVyKGZ1bmN0aW9uIChmaWx0ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZpbHRlci50ZW1wbGF0ZSAhPSBudWxsO1xyXG4gICAgICAgIH0pLm1hcChmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBzY29wZSA9IF90aGlzLiRyb290U2NvcGUuJG5ldygpO1xyXG4gICAgICAgICAgICBzY29wZS5maWx0ZXIgPSBmaWx0ZXI7XHJcbiAgICAgICAgICAgIHNjb3BlLmRhdGFTb3VyY2UgPSBfdGhpcy5zb3VyY2U7XHJcbiAgICAgICAgICAgIGZpbHRlci50ZW1wbGF0ZSA9IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBmaWx0ZXIudGVtcGxhdGUsXHJcbiAgICAgICAgICAgICAgICBzY29wZTogc2NvcGUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBmaWx0ZXI7XHJcbiAgICAgICAgfSkudmFsdWUoKTtcclxuICAgIH07XHJcbiAgICBDYXJkQ29udGFpbmVyRmlsdGVyc0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHJvb3RTY29wZSddO1xyXG4gICAgcmV0dXJuIENhcmRDb250YWluZXJGaWx0ZXJzQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5DYXJkQ29udGFpbmVyRmlsdGVyc0NvbnRyb2xsZXIgPSBDYXJkQ29udGFpbmVyRmlsdGVyc0NvbnRyb2xsZXI7XHJcbnZhciBjYXJkQ29udGFpbmVyRmlsdGVycyA9IHtcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL2NhcmRDb250YWluZXJGaWx0ZXJzLmh0bWwnKSxcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdjb250cm9sbGVyJyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgZmlsdGVyczogJzwnLFxyXG4gICAgICAgIHNvdXJjZTogJzwnLFxyXG4gICAgfSxcclxufTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBjYXJkQ29udGFpbmVyRmlsdGVycylcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIENhcmRDb250YWluZXJGaWx0ZXJzQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVkyRnlaRU52Ym5SaGFXNWxja1pwYkhSbGNuTXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKallYSmtRMjl1ZEdGcGJtVnlSbWxzZEdWeWN5NTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN3eVJFRkJNa1E3UVVGRk0wUXNXVUZCV1N4RFFVRkRPMEZCUldJc1NVRkJXU3hQUVVGUExGZEJRVTBzVTBGQlV5eERRVUZETEVOQlFVRTdRVUZEYmtNc1NVRkJXU3hEUVVGRExGZEJRVTBzVVVGQlVTeERRVUZETEVOQlFVRTdRVUZOYWtJc2EwSkJRVlVzUjBGQlZ5dzJSRUZCTmtRc1EwRkJRenRCUVVOdVJpeHhRa0ZCWVN4SFFVRlhMSGRDUVVGM1FpeERRVUZETzBGQlEycEVMSE5DUVVGakxFZEJRVmNzWjBOQlFXZERMRU5CUVVNN1FVRm5RbkpGTzBsQlRVTXNkME5CUVc5Q0xGVkJRWEZETzFGQlFYSkRMR1ZCUVZVc1IwRkJWaXhWUVVGVkxFTkJRVEpDTzBsQlFVa3NRMEZCUXp0SlFVVTVSQ3huUkVGQlR5eEhRVUZRTzFGQlFVRXNhVUpCWVVNN1VVRmFRU3hKUVVGSkxFTkJRVU1zYVVKQlFXbENMRWRCUVVjc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1ZVRkJReXhOUVVGNVFqdFpRVU42UlN4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExGRkJRVkVzU1VGQlNTeEpRVUZKTEVOQlFVTTdVVUZEYUVNc1EwRkJReXhEUVVGRExFTkJRVU1zUjBGQlJ5eERRVUZETEZWQlFVTXNUVUZCZVVJN1dVRkRhRU1zU1VGQlNTeExRVUZMTEVkQlFTdENMRXRCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zU1VGQlNTeEZRVUZGTEVOQlFVTTdXVUZETDBRc1MwRkJTeXhEUVVGRExFMUJRVTBzUjBGQlJ5eE5RVUZOTEVOQlFVTTdXVUZEZEVJc1MwRkJTeXhEUVVGRExGVkJRVlVzUjBGQlJ5eExRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRPMWxCUXk5Q0xFMUJRVTBzUTBGQlF5eFJRVUZSTEVkQlFVYzdaMEpCUTJwQ0xGRkJRVkVzUlVGQlZTeE5RVUZOTEVOQlFVTXNVVUZCVVR0blFrRkRha01zUzBGQlN5eEZRVUZGTEV0QlFVczdZVUZEV2l4RFFVRkRPMWxCUTBZc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF6dFJRVU5tTEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1JVRkJSU3hEUVVGRE8wbEJRMW9zUTBGQlF6dEpRV2hDVFN4elEwRkJUeXhIUVVGaExFTkJRVU1zV1VGQldTeERRVUZETEVOQlFVTTdTVUZwUWpORExIRkRRVUZETzBGQlFVUXNRMEZCUXl4QlFYUkNSQ3hKUVhOQ1F6dEJRWFJDV1N4elEwRkJPRUlzYVVOQmMwSXhReXhEUVVGQk8wRkJSVVFzU1VGQlNTeHZRa0ZCYjBJc1IwRkJPRUk3U1VGRGNrUXNVVUZCVVN4RlFVRkZMRTlCUVU4c1EwRkJReXcyUWtGQk5rSXNRMEZCUXp0SlFVTm9SQ3hWUVVGVkxFVkJRVVVzYzBKQlFXTTdTVUZETVVJc1dVRkJXU3hGUVVGRkxGbEJRVms3U1VGRE1VSXNVVUZCVVN4RlFVRkZPMUZCUTFRc1QwRkJUeXhGUVVGRkxFZEJRVWM3VVVGRFdpeE5RVUZOTEVWQlFVVXNSMEZCUnp0TFFVTllPME5CUTBRc1EwRkJRenRCUVVWR0xFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNhMEpCUVZVc1JVRkJSU3hGUVVGRkxFTkJRVU03UzBGRE5VSXNVMEZCVXl4RFFVRkRMSEZDUVVGaExFVkJRVVVzYjBKQlFXOUNMRU5CUVVNN1MwRkRPVU1zVlVGQlZTeERRVUZETEhOQ1FVRmpMRVZCUVVVc09FSkJRVGhDTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2ZpbHRlcnMvY2FyZENvbnRhaW5lckZpbHRlcnMuanNcbiAqKiBtb2R1bGUgaWQgPSA4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgbmctcmVwZWF0PVxcXCJmaWx0ZXIgaW4gY29udHJvbGxlci5yZW5kZXJhYmxlRmlsdGVyc1xcXCI+XFxyXFxuXFx0PHJsLXRlbXBsYXRlLXJlbmRlcmVyIHRlbXBsYXRlPVxcXCJmaWx0ZXIudGVtcGxhdGVcXFwiPjwvcmwtdGVtcGxhdGUtcmVuZGVyZXI+XFxyXFxuPC9kaXY+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9maWx0ZXJzL2NhcmRDb250YWluZXJGaWx0ZXJzLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA5MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5pdGVtQ291bnQnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxJdGVtQ291bnQnO1xyXG52YXIgaXRlbUNvdW50ID0ge1xyXG4gICAgcmVxdWlyZTogeyBjYXJkQ29udGFpbmVyOiAnP15ecmxDYXJkQ29udGFpbmVyJyB9LFxyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vaXRlbUNvdW50Lmh0bWwnKSxcclxuICAgIGNvbnRyb2xsZXJBczogJ2l0ZW1Db3VudCcsXHJcbn07XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgaXRlbUNvdW50KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYVhSbGJVTnZkVzUwTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lhWFJsYlVOdmRXNTBMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxGbEJRVmtzUTBGQlF6dEJRVVZpTEVsQlFWa3NUMEZCVHl4WFFVRk5MRk5CUVZNc1EwRkJReXhEUVVGQk8wRkJSWGhDTEd0Q1FVRlZMRWRCUVZjc01FTkJRVEJETEVOQlFVTTdRVUZEYUVVc2NVSkJRV0VzUjBGQlZ5eGhRVUZoTEVOQlFVTTdRVUZGYWtRc1NVRkJTU3hUUVVGVExFZEJRVGhDTzBsQlF6RkRMRTlCUVU4c1JVRkJSU3hGUVVGRkxHRkJRV0VzUlVGQlJTeHZRa0ZCYjBJc1JVRkJSVHRKUVVOb1JDeFJRVUZSTEVWQlFVVXNUMEZCVHl4RFFVRkRMR3RDUVVGclFpeERRVUZETzBsQlEzSkRMRmxCUVZrc1JVRkJSU3hYUVVGWE8wTkJRM3BDTEVOQlFVTTdRVUZGUml4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVXNSVUZCUlN4RFFVRkRPMHRCUXpWQ0xGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMRk5CUVZNc1EwRkJReXhEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9pdGVtQ291bnQvaXRlbUNvdW50LmpzXG4gKiogbW9kdWxlIGlkID0gOTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8cCBuZy1zaG93PVxcXCIhaXRlbUNvdW50LmNhcmRDb250YWluZXIuZGF0YVNvdXJjZS5sb2FkaW5nRGF0YVNldFxcXCI+XFxyXFxuXFx0U2hvd2luZyA8c3Ryb25nPnt7aXRlbUNvdW50LmNhcmRDb250YWluZXIuZGF0YVNvdXJjZS5kYXRhU2V0Lmxlbmd0aH19IG9mIHt7aXRlbUNvdW50LmNhcmRDb250YWluZXIuZGF0YVNvdXJjZS5jb3VudH19PC9zdHJvbmc+IHRvdGFsIGl0ZW1zXFxyXFxuPC9wPlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvaXRlbUNvdW50L2l0ZW1Db3VudC5odG1sXG4gKiogbW9kdWxlIGlkID0gOTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL3R5cGluZ3MvY29tbW9uanMuZC50cycgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5wYWdlcic7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybFBhZ2VyJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdQYWdlckNvbnRyb2xsZXInO1xyXG5leHBvcnRzLmRlZmF1bHRWaXNpYmxlUGFnZUNvdW50ID0gNTtcclxudmFyIFBhZ2VyQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQYWdlckNvbnRyb2xsZXIoJHNjb3BlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcclxuICAgICAgICB0aGlzLmNhbkdvQmFjayA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY2FuR29Gb3J3YXJkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oYXNQYWdlRmlsdGVyID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVBhZ2VDb3VudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsSXRlbXMgPSBfdGhpcy5kYXRhU291cmNlLmNvdW50O1xyXG4gICAgICAgICAgICB2YXIgbmV3TGFzdFBhZ2UgPSBNYXRoLmNlaWwodG90YWxJdGVtcyAvIF90aGlzLnBhZ2VyLnBhZ2VTaXplKTtcclxuICAgICAgICAgICAgaWYgKG5ld0xhc3RQYWdlICE9PSBfdGhpcy5sYXN0UGFnZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubGFzdFBhZ2UgPSBuZXdMYXN0UGFnZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRQYWdlID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy51cGRhdGVQYWdpbmcoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgUGFnZXJDb250cm9sbGVyLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FyZENvbnRhaW5lciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5wYWdlciA9IHRoaXMuY2FyZENvbnRhaW5lci5kYXRhU291cmNlLnBhZ2VyO1xyXG4gICAgICAgIGlmICh0aGlzLnBhZ2VyID09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5oYXNQYWdlRmlsdGVyID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZpc2libGVQYWdlQ291bnQgPSB0aGlzLnBhZ2VDb3VudCAhPSBudWxsID8gdGhpcy5wYWdlQ291bnQgOiBleHBvcnRzLmRlZmF1bHRWaXNpYmxlUGFnZUNvdW50O1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RQYWdlID0gMTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlID0gdGhpcy5jYXJkQ29udGFpbmVyLmRhdGFTb3VyY2U7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5kYXRhU291cmNlLmNvdW50OyB9LCB0aGlzLnVwZGF0ZVBhZ2VDb3VudCk7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5wYWdlci5wYWdlU2l6ZTsgfSwgdGhpcy51cGRhdGVQYWdlQ291bnQpO1xyXG4gICAgICAgICAgICB0aGlzLiRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY3VycmVudFBhZ2U7IH0sIGZ1bmN0aW9uIChwYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy51cGRhdGVQYWdpbmcoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnBhZ2VyLnBhZ2VOdW1iZXIgPSBwYWdlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuZGF0YVNvdXJjZS5vblBhZ2luZ0NoYW5nZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGFnZXJDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVQYWdpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHBhZ2UgPSB0aGlzLmN1cnJlbnRQYWdlO1xyXG4gICAgICAgIHRoaXMuY2FuR29CYWNrID0gcGFnZSA+IDE7XHJcbiAgICAgICAgdGhpcy5jYW5Hb0ZvcndhcmQgPSBwYWdlIDwgdGhpcy5sYXN0UGFnZTtcclxuICAgICAgICB2YXIgbm9uQ3VycmVudFZpc2libGVQYWdlcyA9IHRoaXMudmlzaWJsZVBhZ2VDb3VudCAtIDE7XHJcbiAgICAgICAgdmFyIGJlZm9yZSA9IE1hdGguZmxvb3Iobm9uQ3VycmVudFZpc2libGVQYWdlcyAvIDIpO1xyXG4gICAgICAgIHZhciBhZnRlciA9IE1hdGguY2VpbChub25DdXJyZW50VmlzaWJsZVBhZ2VzIC8gMik7XHJcbiAgICAgICAgdmFyIHN0YXJ0UGFnZSA9IHBhZ2UgLSBiZWZvcmU7XHJcbiAgICAgICAgdmFyIGVuZFBhZ2UgPSBwYWdlICsgYWZ0ZXI7XHJcbiAgICAgICAgaWYgKHN0YXJ0UGFnZSA8IDEpIHtcclxuICAgICAgICAgICAgc3RhcnRQYWdlID0gMTtcclxuICAgICAgICAgICAgZW5kUGFnZSA9IE1hdGgubWluKHRoaXMudmlzaWJsZVBhZ2VDb3VudCwgdGhpcy5sYXN0UGFnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGVuZFBhZ2UgPiB0aGlzLmxhc3RQYWdlKSB7XHJcbiAgICAgICAgICAgIGVuZFBhZ2UgPSB0aGlzLmxhc3RQYWdlO1xyXG4gICAgICAgICAgICBzdGFydFBhZ2UgPSBNYXRoLm1heCh0aGlzLmxhc3RQYWdlIC0gbm9uQ3VycmVudFZpc2libGVQYWdlcywgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGFnZXMgPSBfLnJhbmdlKHN0YXJ0UGFnZSwgZW5kUGFnZSArIDEpO1xyXG4gICAgfTtcclxuICAgIFBhZ2VyQ29udHJvbGxlci5wcm90b3R5cGUuZmlyc3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7XHJcbiAgICB9O1xyXG4gICAgUGFnZXJDb250cm9sbGVyLnByb3RvdHlwZS5wcmV2aW91cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50UGFnZSA+IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZS0tO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQYWdlckNvbnRyb2xsZXIucHJvdG90eXBlLmdvdG8gPSBmdW5jdGlvbiAocGFnZSkge1xyXG4gICAgICAgIGlmIChwYWdlID49IDEgJiYgcGFnZSA8PSB0aGlzLmxhc3RQYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBQYWdlckNvbnRyb2xsZXIucHJvdG90eXBlLm5leHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFBhZ2UgPCB0aGlzLmxhc3RQYWdlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFBhZ2UrKztcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUGFnZXJDb250cm9sbGVyLnByb3RvdHlwZS5sYXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSB0aGlzLmxhc3RQYWdlO1xyXG4gICAgfTtcclxuICAgIFBhZ2VyQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuICAgIHJldHVybiBQYWdlckNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuUGFnZXJDb250cm9sbGVyID0gUGFnZXJDb250cm9sbGVyO1xyXG52YXIgcGFnZXIgPSB7XHJcbiAgICByZXF1aXJlOiB7IGNhcmRDb250YWluZXI6ICc/Xl5ybENhcmRDb250YWluZXInIH0sXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9wYWdlci5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAncGFnZXInLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBwYWdlQ291bnQ6ICc8P3Zpc2libGVQYWdlcycsXHJcbiAgICB9LFxyXG59O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIHBhZ2VyKVxyXG4gICAgLmNvbnRyb2xsZXIoZXhwb3J0cy5jb250cm9sbGVyTmFtZSwgUGFnZXJDb250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pY0dGblpYSXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKd1lXZGxjaTUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTdzJSRUZCTmtRN1FVRkZOMFFzV1VGQldTeERRVUZETzBGQlJXSXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGRGJrTXNTVUZCV1N4RFFVRkRMRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGTGFrSXNhMEpCUVZVc1IwRkJWeXh6UTBGQmMwTXNRMEZCUXp0QlFVTTFSQ3h4UWtGQllTeEhRVUZYTEZOQlFWTXNRMEZCUXp0QlFVTnNReXh6UWtGQll5eEhRVUZYTEdsQ1FVRnBRaXhEUVVGRE8wRkJSVE5ETEN0Q1FVRjFRaXhIUVVGWExFTkJRVU1zUTBGQlF6dEJRVTB2UXp0SlFXZENReXg1UWtGQmIwSXNUVUZCYzBJN1VVRm9Rak5ETEdsQ1FUQkhRenRSUVRGR2IwSXNWMEZCVFN4SFFVRk9MRTFCUVUwc1EwRkJaMEk3VVVGYU1VTXNZMEZCVXl4SFFVRlpMRXRCUVVzc1EwRkJRenRSUVVNelFpeHBRa0ZCV1N4SFFVRlpMRXRCUVVzc1EwRkJRenRSUVVjNVFpeHJRa0ZCWVN4SFFVRlpMRWxCUVVrc1EwRkJRenRSUVc5RGRFSXNiMEpCUVdVc1IwRkJaVHRaUVVOeVF5eEpRVUZKTEZWQlFWVXNSMEZCVnl4TFFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFdEJRVXNzUTBGQlF6dFpRVVV2UXl4SlFVRkpMRmRCUVZjc1IwRkJWeXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVXNSMEZCUnl4TFFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFsQlJYUkZMRVZCUVVVc1EwRkJReXhEUVVGRExGZEJRVmNzUzBGQlN5eExRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRGJrTXNTMEZCU1N4RFFVRkRMRkZCUVZFc1IwRkJSeXhYUVVGWExFTkJRVU03WjBKQlF6VkNMRXRCUVVrc1EwRkJReXhYUVVGWExFZEJRVWNzUTBGQlF5eERRVUZETzFsQlEzUkNMRU5CUVVNN1dVRkZSQ3hMUVVGSkxFTkJRVU1zV1VGQldTeEZRVUZGTEVOQlFVTTdVVUZEY2tJc1EwRkJReXhEUVVGQk8wbEJka00wUXl4RFFVRkRPMGxCUlRsRExHbERRVUZQTEVkQlFWQTdVVUZCUVN4cFFrRjNRa003VVVGMlFrRXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExHRkJRV0VzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTJoRExFMUJRVTBzUTBGQlF6dFJRVU5TTEVOQlFVTTdVVUZGUkN4SlFVRkpMRU5CUVVNc1MwRkJTeXhIUVVGSExFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNWVUZCVlN4RFFVRkRMRXRCUVVzc1EwRkJRenRSUVVWcVJDeEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEZUVJc1NVRkJTU3hEUVVGRExHRkJRV0VzUjBGQlJ5eExRVUZMTEVOQlFVTTdVVUZETlVJc1EwRkJRenRSUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzFsQlExQXNTVUZCU1N4RFFVRkRMR2RDUVVGblFpeEhRVUZITEVsQlFVa3NRMEZCUXl4VFFVRlRMRWxCUVVrc1NVRkJTU3hIUVVGSExFbEJRVWtzUTBGQlF5eFRRVUZUTEVkQlFVY3NLMEpCUVhWQ0xFTkJRVU03V1VGRE1VWXNTVUZCU1N4RFFVRkRMRkZCUVZFc1IwRkJSeXhEUVVGRExFTkJRVU03V1VGRGJFSXNTVUZCU1N4RFFVRkRMRlZCUVZVc1IwRkJSeXhKUVVGSkxFTkJRVU1zWVVGQllTeERRVUZETEZWQlFWVXNRMEZCUXp0WlFVVm9SQ3hKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4alFVRm5RaXhOUVVGTkxFTkJRVU1zUzBGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzU1VGQlNTeERRVUZETEdWQlFXVXNRMEZCUXl4RFFVRkRPMWxCUXpGR0xFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMR05CUVdkQ0xFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeEpRVUZKTEVOQlFVTXNaVUZCWlN4RFFVRkRMRU5CUVVNN1dVRkZlRVlzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1kwRkJaMElzVFVGQlRTeERRVUZETEV0QlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJReXhEUVVGRExFVkJRVVVzVlVGQlF5eEpRVUZaTzJkQ1FVTXpSU3hMUVVGSkxFTkJRVU1zV1VGQldTeEZRVUZGTEVOQlFVTTdaMEpCUlhCQ0xFdEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNWVUZCVlN4SFFVRkhMRWxCUVVrc1EwRkJRenRuUWtGRE4wSXNTMEZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhqUVVGakxFVkJRVVVzUTBGQlF6dFpRVU5zUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRSUVVOS0xFTkJRVU03U1VGRFJpeERRVUZETzBsQlpVOHNjME5CUVZrc1IwRkJjRUk3VVVGRFF5eEpRVUZKTEVsQlFVa3NSMEZCVnl4SlFVRkpMRU5CUVVNc1YwRkJWeXhEUVVGRE8xRkJRM0JETEVsQlFVa3NRMEZCUXl4VFFVRlRMRWRCUVVjc1NVRkJTU3hIUVVGSExFTkJRVU1zUTBGQlF6dFJRVU14UWl4SlFVRkpMRU5CUVVNc1dVRkJXU3hIUVVGSExFbEJRVWtzUjBGQlJ5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRPMUZCUlhwRExFbEJRVWtzYzBKQlFYTkNMRWRCUVZjc1NVRkJTU3hEUVVGRExHZENRVUZuUWl4SFFVRkhMRU5CUVVNc1EwRkJRenRSUVVVdlJDeEpRVUZKTEUxQlFVMHNSMEZCVnl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExITkNRVUZ6UWl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRE8xRkJRelZFTEVsQlFVa3NTMEZCU3l4SFFVRlhMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zYzBKQlFYTkNMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRk1VUXNTVUZCU1N4VFFVRlRMRWRCUVZjc1NVRkJTU3hIUVVGSExFMUJRVTBzUTBGQlF6dFJRVU4wUXl4SlFVRkpMRTlCUVU4c1IwRkJWeXhKUVVGSkxFZEJRVWNzUzBGQlN5eERRVUZETzFGQlJXNURMRVZCUVVVc1EwRkJReXhEUVVGRExGTkJRVk1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTI1Q0xGTkJRVk1zUjBGQlJ5eERRVUZETEVOQlFVTTdXVUZEWkN4UFFVRlBMRWRCUVVjc1NVRkJTU3hEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNaMEpCUVdkQ0xFVkJRVVVzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRPMUZCUXpGRUxFTkJRVU03VVVGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1QwRkJUeXhIUVVGSExFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNCRExFOUJRVThzUjBGQlJ5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRPMWxCUTNoQ0xGTkJRVk1zUjBGQlJ5eEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRWxCUVVrc1EwRkJReXhSUVVGUkxFZEJRVWNzYzBKQlFYTkNMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRGFrVXNRMEZCUXp0UlFVVkVMRWxCUVVrc1EwRkJReXhMUVVGTExFZEJRVWNzUTBGQlF5eERRVUZETEV0QlFVc3NRMEZCUXl4VFFVRlRMRVZCUVVVc1QwRkJUeXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETzBsQlF6bERMRU5CUVVNN1NVRkZSQ3dyUWtGQlN5eEhRVUZNTzFGQlEwTXNTVUZCU1N4RFFVRkRMRmRCUVZjc1IwRkJSeXhEUVVGRExFTkJRVU03U1VGRGRFSXNRMEZCUXp0SlFVVkVMR3REUVVGUkxFZEJRVkk3VVVGRFF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1YwRkJWeXhIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdXVUZETVVJc1NVRkJTU3hEUVVGRExGZEJRVmNzUlVGQlJTeERRVUZETzFGQlEzQkNMRU5CUVVNN1NVRkRSaXhEUVVGRE8wbEJSVVFzT0VKQlFVa3NSMEZCU2l4VlFVRkxMRWxCUVZrN1VVRkRhRUlzUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4SlFVRkpMRU5CUVVNc1NVRkJTU3hKUVVGSkxFbEJRVWtzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRlRU1zU1VGQlNTeERRVUZETEZkQlFWY3NSMEZCUnl4SlFVRkpMRU5CUVVNN1VVRkRla0lzUTBGQlF6dEpRVU5HTEVOQlFVTTdTVUZGUkN3NFFrRkJTU3hIUVVGS08xRkJRME1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRmRCUVZjc1IwRkJSeXhKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTjBReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eEZRVUZGTEVOQlFVTTdVVUZEY0VJc1EwRkJRenRKUVVOR0xFTkJRVU03U1VGRlJDdzRRa0ZCU1N4SFFVRktPMUZCUTBNc1NVRkJTU3hEUVVGRExGZEJRVmNzUjBGQlJ5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRPMGxCUTJ4RExFTkJRVU03U1VFeFJrMHNkVUpCUVU4c1IwRkJZU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzBsQk1rWjJReXh6UWtGQlF6dEJRVUZFTEVOQlFVTXNRVUV4UjBRc1NVRXdSME03UVVFeFIxa3NkVUpCUVdVc2EwSkJNRWN6UWl4RFFVRkJPMEZCUlVRc1NVRkJTU3hMUVVGTExFZEJRVGhDTzBsQlEzUkRMRTlCUVU4c1JVRkJSU3hGUVVGRkxHRkJRV0VzUlVGQlJTeHZRa0ZCYjBJc1JVRkJSVHRKUVVOb1JDeFJRVUZSTEVWQlFVVXNUMEZCVHl4RFFVRkRMR05CUVdNc1EwRkJRenRKUVVOcVF5eFZRVUZWTEVWQlFVVXNjMEpCUVdNN1NVRkRNVUlzV1VGQldTeEZRVUZGTEU5QlFVODdTVUZEY2tJc1VVRkJVU3hGUVVGRk8xRkJRMVFzVTBGQlV5eEZRVUZGTEdkQ1FVRm5RanRMUVVNelFqdERRVU5FTEVOQlFVTTdRVUZGUml4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVXNSVUZCUlN4RFFVRkRPMHRCUXpWQ0xGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMRXRCUVVzc1EwRkJRenRMUVVNdlFpeFZRVUZWTEVOQlFVTXNjMEpCUVdNc1JVRkJSU3hsUVVGbExFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9wYWdlci9wYWdlci5qc1xuICoqIG1vZHVsZSBpZCA9IDkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPG5hdiBuZy1pZj1cXFwicGFnZXIuaGFzUGFnZUZpbHRlclxcXCI+XFxyXFxuXFx0PHVsIGNsYXNzPVxcXCJwYWdpbmF0aW9uXFxcIj5cXHJcXG5cXHRcXHQ8bGkgdGl0bGU9XFxcIkdvIHRvIGZpcnN0IHBhZ2VcXFwiIG5nLWNsaWNrPVxcXCJwYWdlci5maXJzdCgpXFxcIlxcclxcblxcdFxcdFxcdG5nLWNsYXNzPVxcXCJ7ICdkaXNhYmxlZCc6ICFwYWdlci5jYW5Hb0JhY2sgfVxcXCI+XFxyXFxuXFx0XFx0XFx0PGE+PGkgY2xhc3M9XFxcImZhIGZhLWFuZ2xlLWRvdWJsZS1sZWZ0XFxcIj48L2k+PC9hPlxcclxcblxcdFxcdDwvbGk+XFxyXFxuXFx0XFx0PGxpIHRpdGxlPVxcXCJHbyB0byBwcmV2aW91cyBwYWdlXFxcIiBuZy1jbGljaz1cXFwicGFnZXIucHJldmlvdXMoKVxcXCJcXHJcXG5cXHRcXHRcXHRuZy1jbGFzcz1cXFwieyAnZGlzYWJsZWQnOiAhcGFnZXIuY2FuR29CYWNrIH1cXFwiPlxcclxcblxcdFxcdFxcdDxhPjxpIGNsYXNzPVxcXCJmYSBmYS1hbmdsZS1sZWZ0XFxcIj48L2k+PC9hPlxcclxcblxcdFxcdDwvbGk+XFxyXFxuXFx0XFx0PGxpIHRpdGxlPVxcXCJHbyB0byBwYWdlIHt7cGFnZXIucGFnZX19XFxcIiBuZy1jbGljaz1cXFwicGFnZXIuZ290byhwYWdlKVxcXCJcXHJcXG5cXHRcXHRcXHRuZy1yZXBlYXQ9XFxcInBhZ2UgaW4gcGFnZXIucGFnZXNcXFwiXFxyXFxuXFx0XFx0XFx0bmctY2xhc3M9XFxcInsgJ2FjdGl2ZSc6IHBhZ2VyLmN1cnJlbnRQYWdlID09IHBhZ2UgfVxcXCI+XFxyXFxuXFx0XFx0XFx0PGE+e3twYWdlfX08L2E+XFxyXFxuXFx0XFx0PC9saT5cXHJcXG5cXHRcXHQ8bGkgdGl0bGU9XFxcIkdvIHRvIG5leHQgcGFnZVxcXCIgbmctY2xpY2s9XFxcInBhZ2VyLm5leHQoKVxcXCJcXHJcXG5cXHRcXHRcXHRuZy1jbGFzcz1cXFwieyAnZGlzYWJsZWQnOiAhcGFnZXIuY2FuR29Gb3J3YXJkIH1cXFwiPlxcclxcblxcdFxcdFxcdDxhPjxpIGNsYXNzPVxcXCJmYSBmYS1hbmdsZS1yaWdodFxcXCI+PC9pPjwvYT5cXHJcXG5cXHRcXHQ8L2xpPlxcclxcblxcdFxcdDxsaSB0aXRsZT1cXFwiR28gdG8gbGFzdCBwYWdlXFxcIiBuZy1jbGljaz1cXFwicGFnZXIubGFzdCgpXFxcIlxcclxcblxcdFxcdFxcdG5nLWNsYXNzPVxcXCJ7ICdkaXNhYmxlZCc6ICFwYWdlci5jYW5Hb0ZvcndhcmQgfVxcXCI+XFxyXFxuXFx0XFx0XFx0PGE+PGkgY2xhc3M9XFxcImZhIGZhLWFuZ2xlLWRvdWJsZS1yaWdodFxcXCI+PC9pPjwvYT5cXHJcXG5cXHRcXHQ8L2xpPlxcclxcblxcdDwvdWw+XFxyXFxuPC9uYXY+XFxyXFxuXCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2FyZENvbnRhaW5lci9wYWdlci9wYWdlci5odG1sXG4gKiogbW9kdWxlIGlkID0gOTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL3R5cGluZ3MvY29tbW9uanMuZC50cycgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2FyZENvbnRhaW5lci5wYWdlU2l6ZSc7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybFBhZ2VTaXplJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdQYWdlU2l6ZUNvbnRyb2xsZXInO1xyXG5leHBvcnRzLmF2YWlsYWJsZVBhZ2VTaXplcyA9IFsxMCwgMjUsIDUwLCAxMDBdO1xyXG5leHBvcnRzLmRlZmF1bHRQYWdlU2l6ZSA9IDEwO1xyXG52YXIgUGFnZVNpemVDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFBhZ2VTaXplQ29udHJvbGxlcigkc2NvcGUpIHtcclxuICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcclxuICAgIH1cclxuICAgIFBhZ2VTaXplQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmNhcmRDb250YWluZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRQYWdlU2l6ZSA9IGV4cG9ydHMuZGVmYXVsdFBhZ2VTaXplO1xyXG4gICAgICAgIHRoaXMucGFnZVNpemVzID0gZXhwb3J0cy5hdmFpbGFibGVQYWdlU2l6ZXM7XHJcbiAgICAgICAgdGhpcy5oYXNQYWdlRmlsdGVyID0gdHJ1ZTtcclxuICAgICAgICB2YXIgcGFnZXIgPSB0aGlzLmNhcmRDb250YWluZXIuZGF0YVNvdXJjZS5wYWdlcjtcclxuICAgICAgICBpZiAocGFnZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmhhc1BhZ2VGaWx0ZXIgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zZWxlY3RlZFBhZ2VTaXplOyB9LCBmdW5jdGlvbiAobmV3UGFnZVNpemUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYWdlciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZXIucGFnZVNpemUgPSBuZXdQYWdlU2l6ZTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jYXJkQ29udGFpbmVyLmRhdGFTb3VyY2Uub25QYWdpbmdDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFBhZ2VTaXplQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnXTtcclxuICAgIHJldHVybiBQYWdlU2l6ZUNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuUGFnZVNpemVDb250cm9sbGVyID0gUGFnZVNpemVDb250cm9sbGVyO1xyXG52YXIgcGFnZVNpemUgPSB7XHJcbiAgICByZXF1aXJlOiB7IGNhcmRDb250YWluZXI6ICc/Xl5ybENhcmRDb250YWluZXInIH0sXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9wYWdlU2l6ZS5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnY29udHJvbGxlcicsXHJcbn07XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgcGFnZVNpemUpXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBQYWdlU2l6ZUNvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljR0ZuWlZOcGVtVXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKd1lXZGxVMmw2WlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3cyUkVGQk5rUTdRVUZGTjBRc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeFBRVUZQTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkxlRUlzYTBKQlFWVXNSMEZCVnl4NVEwRkJlVU1zUTBGQlF6dEJRVU12UkN4eFFrRkJZU3hIUVVGWExGbEJRVmtzUTBGQlF6dEJRVU55UXl4elFrRkJZeXhIUVVGWExHOUNRVUZ2UWl4RFFVRkRPMEZCUlRsRExEQkNRVUZyUWl4SFFVRmhMRU5CUVVNc1JVRkJSU3hGUVVGRkxFVkJRVVVzUlVGQlJTeEZRVUZGTEVWQlFVVXNSMEZCUnl4RFFVRkRMRU5CUVVNN1FVRkRha1FzZFVKQlFXVXNSMEZCVnl4RlFVRkZMRU5CUVVNN1FVRkZlRU03U1VGUFF5dzBRa0ZCYjBJc1RVRkJjMEk3VVVGQmRFSXNWMEZCVFN4SFFVRk9MRTFCUVUwc1EwRkJaMEk3U1VGQlJ5eERRVUZETzBsQlJUbERMRzlEUVVGUExFZEJRVkE3VVVGQlFTeHBRa0Z4UWtNN1VVRndRa0VzUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMR0ZCUVdFc1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEyaERMRTFCUVUwc1EwRkJRenRSUVVOU0xFTkJRVU03VVVGRlJDeEpRVUZKTEVOQlFVTXNaMEpCUVdkQ0xFZEJRVWNzZFVKQlFXVXNRMEZCUXp0UlFVTjRReXhKUVVGSkxFTkJRVU1zVTBGQlV5eEhRVUZITERCQ1FVRnJRaXhEUVVGRE8xRkJRM0JETEVsQlFVa3NRMEZCUXl4aFFVRmhMRWRCUVVjc1NVRkJTU3hEUVVGRE8xRkJSVEZDTEVsQlFVa3NTMEZCU3l4SFFVRjVRaXhKUVVGSkxFTkJRVU1zWVVGQllTeERRVUZETEZWQlFWVXNRMEZCUXl4TFFVRkxMRU5CUVVNN1VVRkZkRVVzUlVGQlJTeERRVUZETEVOQlFVTXNTMEZCU3l4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGJrSXNTVUZCU1N4RFFVRkRMR0ZCUVdFc1IwRkJSeXhMUVVGTExFTkJRVU03VVVGRE5VSXNRMEZCUXp0UlFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRE8xbEJRMUFzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1kwRkJaMElzVFVGQlRTeERRVUZETEV0QlFVa3NRMEZCUXl4blFrRkJaMElzUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlN4VlFVRkRMRmRCUVcxQ08yZENRVU4yUml4RlFVRkZMRU5CUVVNc1EwRkJReXhMUVVGTExFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0dlFrRkRia0lzUzBGQlN5eERRVUZETEZGQlFWRXNSMEZCUnl4WFFVRlhMRU5CUVVNN2IwSkJRemRDTEV0QlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1ZVRkJWU3hEUVVGRExHTkJRV01zUlVGQlJTeERRVUZETzJkQ1FVTm9SQ3hEUVVGRE8xbEJRMFlzUTBGQlF5eERRVUZETEVOQlFVTTdVVUZEU2l4RFFVRkRPMGxCUTBZc1EwRkJRenRKUVhoQ1RTd3dRa0ZCVHl4SFFVRmhMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU03U1VGNVFuWkRMSGxDUVVGRE8wRkJRVVFzUTBGQlF5eEJRUzlDUkN4SlFTdENRenRCUVM5Q1dTd3dRa0ZCYTBJc2NVSkJLMEk1UWl4RFFVRkJPMEZCUlVRc1NVRkJTU3hSUVVGUkxFZEJRVGhDTzBsQlEzcERMRTlCUVU4c1JVRkJSU3hGUVVGRkxHRkJRV0VzUlVGQlJTeHZRa0ZCYjBJc1JVRkJSVHRKUVVOb1JDeFJRVUZSTEVWQlFVVXNUMEZCVHl4RFFVRkRMR2xDUVVGcFFpeERRVUZETzBsQlEzQkRMRlZCUVZVc1JVRkJSU3h6UWtGQll6dEpRVU14UWl4WlFVRlpMRVZCUVVVc1dVRkJXVHREUVVNeFFpeERRVUZETzBGQlJVWXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVWQlFVVXNRMEZCUXp0TFFVTTFRaXhUUVVGVExFTkJRVU1zY1VKQlFXRXNSVUZCUlN4UlFVRlJMRU5CUVVNN1MwRkRiRU1zVlVGQlZTeERRVUZETEhOQ1FVRmpMRVZCUVVVc2EwSkJRV3RDTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL3BhZ2VTaXplL3BhZ2VTaXplLmpzXG4gKiogbW9kdWxlIGlkID0gOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IG5nLXNob3c9XFxcImNvbnRyb2xsZXIuaGFzUGFnZUZpbHRlclxcXCI+XFxyXFxuXFx0PHNlbGVjdCBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIiB0aXRsZT1cXFwiQ2FyZHMgcGVyIHBhZ2VcXFwiIG5nLW1vZGVsPVxcXCJjb250cm9sbGVyLnNlbGVjdGVkUGFnZVNpemVcXFwiXFxyXFxuXFx0XFx0XFx0bmctb3B0aW9ucz1cXFwicGFnZVNpemUgZm9yIHBhZ2VTaXplIGluIGNvbnRyb2xsZXIucGFnZVNpemVzXFxcIj48L3NlbGVjdD5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL3BhZ2VTaXplL3BhZ2VTaXplLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSA5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19ib29sZWFuID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLmJvb2xlYW47XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmNhcmRDb250YWluZXIuc2VsZWN0aW9uQ29udHJvbCc7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybFNlbGVjdGlvbkNvbnRyb2wnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ1NlbGVjdGlvbkNvbnRyb2xDb250cm9sbGVyJztcclxudmFyIFNlbGVjdGlvbkNvbnRyb2xDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNlbGVjdGlvbkNvbnRyb2xDb250cm9sbGVyKCRzY29wZSwgYm9vbCkge1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMuYm9vbCA9IGJvb2w7XHJcbiAgICB9XHJcbiAgICBTZWxlY3Rpb25Db250cm9sQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmNhcmRDb250YWluZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJdGVtcyA9IHRoaXMuY2FyZENvbnRhaW5lci5udW1iZXJTZWxlY3RlZDtcclxuICAgICAgICB0aGlzLnBhZ2luZ0VuYWJsZWQgPSB0aGlzLmJvb2wudG9Cb29sKHRoaXMuY2FyZENvbnRhaW5lci5kYXRhU291cmNlLnBhZ2VyKTtcclxuICAgICAgICB0aGlzLmRhdGFTb3VyY2UgPSB0aGlzLmNhcmRDb250YWluZXIuZGF0YVNvdXJjZTtcclxuICAgICAgICB0aGlzLiRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuY2FyZENvbnRhaW5lci5udW1iZXJTZWxlY3RlZDsgfSwgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnNlbGVjdGVkSXRlbXMgPSB2YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTZWxlY3Rpb25Db250cm9sQ29udHJvbGxlci5wcm90b3R5cGUuc2VsZWN0UGFnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfLmVhY2godGhpcy5kYXRhU291cmNlLmRhdGFTZXQsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIGl0ZW0udmlld0RhdGEuc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5zZWxlY3Rpb25DaGFuZ2VkKCk7XHJcbiAgICB9O1xyXG4gICAgU2VsZWN0aW9uQ29udHJvbENvbnRyb2xsZXIucHJvdG90eXBlLnNlbGVjdEFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBfLmVhY2godGhpcy5kYXRhU291cmNlLmZpbHRlcmVkRGF0YVNldCwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaXRlbS52aWV3RGF0YS5zZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLnNlbGVjdGlvbkNoYW5nZWQoKTtcclxuICAgIH07XHJcbiAgICBTZWxlY3Rpb25Db250cm9sQ29udHJvbGxlci5wcm90b3R5cGUuY2xlYXJQYWdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF8uZWFjaCh0aGlzLmRhdGFTb3VyY2UuZGF0YVNldCwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaXRlbS52aWV3RGF0YS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2FyZENvbnRhaW5lci5zZWxlY3Rpb25DaGFuZ2VkKCk7XHJcbiAgICB9O1xyXG4gICAgU2VsZWN0aW9uQ29udHJvbENvbnRyb2xsZXIucHJvdG90eXBlLmNsZWFyQWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIF8uZWFjaCh0aGlzLmRhdGFTb3VyY2UuZmlsdGVyZWREYXRhU2V0LCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICBpdGVtLnZpZXdEYXRhLnNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jYXJkQ29udGFpbmVyLnNlbGVjdGlvbkNoYW5nZWQoKTtcclxuICAgIH07XHJcbiAgICBTZWxlY3Rpb25Db250cm9sQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCBfX2Jvb2xlYW4uc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIFNlbGVjdGlvbkNvbnRyb2xDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLlNlbGVjdGlvbkNvbnRyb2xDb250cm9sbGVyID0gU2VsZWN0aW9uQ29udHJvbENvbnRyb2xsZXI7XHJcbnZhciBzZWxlY3Rpb25Db250cm9sID0ge1xyXG4gICAgcmVxdWlyZTogeyBjYXJkQ29udGFpbmVyOiAnP15ecmxDYXJkQ29udGFpbmVyJyB9LFxyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vc2VsZWN0aW9uQ29udHJvbC5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnc2VsZWN0aW9uJyxcclxufTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbX19ib29sZWFuLm1vZHVsZU5hbWVdKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIHNlbGVjdGlvbkNvbnRyb2wpXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBTZWxlY3Rpb25Db250cm9sQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWMyVnNaV04wYVc5dVEyOXVkSEp2YkM1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJbk5sYkdWamRHbHZia052Ym5SeWIyd3VkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc05rUkJRVFpFTzBGQlJUZEVMRmxCUVZrc1EwRkJRenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUTI1RExFbEJRVmtzUTBGQlF5eFhRVUZOTEZGQlFWRXNRMEZCUXl4RFFVRkJPMEZCUlRWQ0xEWkRRVUY1UWl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlEzaEVMRWxCUVU4c1UwRkJVeXhIUVVGSExIVkRRVUZSTEVOQlFVTXNUMEZCVHl4RFFVRkRPMEZCUzNwQ0xHdENRVUZWTEVkQlFWY3NhVVJCUVdsRUxFTkJRVU03UVVGRGRrVXNjVUpCUVdFc1IwRkJWeXh2UWtGQmIwSXNRMEZCUXp0QlFVTTNReXh6UWtGQll5eEhRVUZYTERSQ1FVRTBRaXhEUVVGRE8wRkJSV3BGTzBsQlQwTXNiME5CUVc5Q0xFMUJRWE5DTEVWQlF6bENMRWxCUVN0Q08xRkJSSFpDTEZkQlFVMHNSMEZCVGl4TlFVRk5MRU5CUVdkQ08xRkJRemxDTEZOQlFVa3NSMEZCU2l4SlFVRkpMRU5CUVRKQ08wbEJRVWNzUTBGQlF6dEpRVVV2UXl3MFEwRkJUeXhIUVVGUU8xRkJRVUVzYVVKQldVTTdVVUZZUVN4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zWVVGQllTeEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRhRU1zVFVGQlRTeERRVUZETzFGQlExSXNRMEZCUXp0UlFVVkVMRWxCUVVrc1EwRkJReXhoUVVGaExFZEJRVWNzU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUXl4alFVRmpMRU5CUVVNN1VVRkRka1FzU1VGQlNTeERRVUZETEdGQlFXRXNSMEZCUnl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNZVUZCWVN4RFFVRkRMRlZCUVZVc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF6dFJRVU16UlN4SlFVRkpMRU5CUVVNc1ZVRkJWU3hIUVVGSExFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNWVUZCVlN4RFFVRkRPMUZCUldoRUxFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMR05CUVdkQ0xFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNZVUZCWVN4RFFVRkRMR05CUVdNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeFZRVUZETEV0QlFXRTdXVUZETjBZc1MwRkJTU3hEUVVGRExHRkJRV0VzUjBGQlJ5eExRVUZMTEVOQlFVTTdVVUZETlVJc1EwRkJReXhEUVVGRExFTkJRVU03U1VGRFNpeERRVUZETzBsQlJVUXNLME5CUVZVc1IwRkJWanRSUVVORExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhQUVVGUExFVkJRVVVzVlVGQlF5eEpRVUZUTzFsQlEzcERMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zVVVGQlVTeEhRVUZITEVsQlFVa3NRMEZCUXp0UlFVTXZRaXhEUVVGRExFTkJRVU1zUTBGQlF6dFJRVVZJTEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1owSkJRV2RDTEVWQlFVVXNRMEZCUXp0SlFVTjJReXhEUVVGRE8wbEJSVVFzT0VOQlFWTXNSMEZCVkR0UlFVTkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4bFFVRmxMRVZCUVVVc1ZVRkJReXhKUVVGVE8xbEJRMnBFTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1VVRkJVU3hIUVVGSExFbEJRVWtzUTBGQlF6dFJRVU12UWl4RFFVRkRMRU5CUVVNc1EwRkJRenRSUVVWSUxFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNaMEpCUVdkQ0xFVkJRVVVzUTBGQlF6dEpRVU4yUXl4RFFVRkRPMGxCUlVRc09FTkJRVk1zUjBGQlZEdFJRVU5ETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eFBRVUZQTEVWQlFVVXNWVUZCUXl4SlFVRlRPMWxCUTNwRExFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNVVUZCVVN4SFFVRkhMRXRCUVVzc1EwRkJRenRSUVVOb1F5eERRVUZETEVOQlFVTXNRMEZCUXp0UlFVVklMRWxCUVVrc1EwRkJReXhoUVVGaExFTkJRVU1zWjBKQlFXZENMRVZCUVVVc1EwRkJRenRKUVVOMlF5eERRVUZETzBsQlJVUXNOa05CUVZFc1IwRkJVanRSUVVORExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhsUVVGbExFVkJRVVVzVlVGQlF5eEpRVUZUTzFsQlEycEVMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zVVVGQlVTeEhRVUZITEV0QlFVc3NRMEZCUXp0UlFVTm9ReXhEUVVGRExFTkJRVU1zUTBGQlF6dFJRVVZJTEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1owSkJRV2RDTEVWQlFVVXNRMEZCUXp0SlFVTjJReXhEUVVGRE8wbEJhRVJOTEd0RFFVRlBMRWRCUVdFc1EwRkJReXhSUVVGUkxFVkJRVVVzVTBGQlV5eERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRPMGxCYVVRNVJDeHBRMEZCUXp0QlFVRkVMRU5CUVVNc1FVRjJSRVFzU1VGMVJFTTdRVUYyUkZrc2EwTkJRVEJDTERaQ1FYVkVkRU1zUTBGQlFUdEJRVVZFTEVsQlFVa3NaMEpCUVdkQ0xFZEJRVGhDTzBsQlEycEVMRTlCUVU4c1JVRkJSU3hGUVVGRkxHRkJRV0VzUlVGQlJTeHZRa0ZCYjBJc1JVRkJSVHRKUVVOb1JDeFJRVUZSTEVWQlFVVXNUMEZCVHl4RFFVRkRMSGxDUVVGNVFpeERRVUZETzBsQlF6VkRMRlZCUVZVc1JVRkJSU3h6UWtGQll6dEpRVU14UWl4WlFVRlpMRVZCUVVVc1YwRkJWenREUVVONlFpeERRVUZETzBGQlJVWXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVOQlFVTXNVMEZCVXl4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRE8wdEJRMmhFTEZOQlFWTXNRMEZCUXl4eFFrRkJZU3hGUVVGRkxHZENRVUZuUWl4RFFVRkRPMHRCUXpGRExGVkJRVlVzUTBGQlF5eHpRa0ZCWXl4RlFVRkZMREJDUVVFd1FpeERRVUZETEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NhcmRDb250YWluZXIvc2VsZWN0aW9uQ29udHJvbC9zZWxlY3Rpb25Db250cm9sLmpzXG4gKiogbW9kdWxlIGlkID0gOTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2PlxcclxcblxcdDxkaXYgc3R5bGU9XFxcIm1hcmdpbi1ib3R0b206IDVweFxcXCI+XFxyXFxuXFx0XFx0PHNwYW4+PHN0cm9uZz57e3NlbGVjdGlvbi5zZWxlY3RlZEl0ZW1zfX08L3N0cm9uZz4gaXRlbXMgc2VsZWN0ZWQ8L3NwYW4+XFxyXFxuXFx0PC9kaXY+XFxyXFxuXFx0PGRpdiBzdHlsZT1cXFwibWFyZ2luLWJvdHRvbTogNXB4XFxcIiBuZy1pZj1cXFwic2VsZWN0aW9uLnBhZ2luZ0VuYWJsZWRcXFwiPlxcclxcblxcdFxcdDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGljaz1cXFwic2VsZWN0aW9uLnNlbGVjdFBhZ2UoKVxcXCI+U2VsZWN0IHBhZ2U8L2J1dHRvbj5cXHJcXG5cXHRcXHQ8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdFxcXCIgbmctY2xpY2s9XFxcInNlbGVjdGlvbi5jbGVhclBhZ2UoKVxcXCI+Q2xlYXIgcGFnZTwvYnV0dG9uPlxcclxcblxcdDwvZGl2PlxcclxcblxcdDxkaXY+XFxyXFxuXFx0XFx0PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHRcXFwiIG5nLWNsaWNrPVxcXCJzZWxlY3Rpb24uc2VsZWN0QWxsKClcXFwiPlNlbGVjdCBhbGw8L2J1dHRvbj5cXHJcXG5cXHRcXHQ8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdFxcXCIgbmctY2xpY2s9XFxcInNlbGVjdGlvbi5jbGVhckFsbCgpXFxcIj5DbGVhciBhbGw8L2J1dHRvbj5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL3NlbGVjdGlvbkNvbnRyb2wvc2VsZWN0aW9uQ29udHJvbC5odG1sXG4gKiogbW9kdWxlIGlkID0gOThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3MvY29tbW9uanMuZC50cycgLz5cclxuLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9qcXVlcnkvanF1ZXJ5LmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fb2JqZWN0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxudmFyIF9fYXJyYXkgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMuYXJyYXk7XHJcbnZhciBfX3BhcmVudENoaWxkID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnBhcmVudENoaWxkQmVoYXZpb3I7XHJcbnZhciBkYXRhU291cmNlc19tb2R1bGVfMSA9IHJlcXVpcmUoJy4vZGF0YVNvdXJjZXMvZGF0YVNvdXJjZXMubW9kdWxlJyk7XHJcbnZhciBzb3J0c19tb2R1bGVfMSA9IHJlcXVpcmUoJy4vc29ydHMvc29ydHMubW9kdWxlJyk7XHJcbnZhciBicmVha3BvaW50XzEgPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9icmVha3BvaW50cy9icmVha3BvaW50Jyk7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybENhcmRDb250YWluZXInO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ0NhcmRDb250YWluZXJDb250cm9sbGVyJztcclxuZXhwb3J0cy5kZWZhdWx0TWF4Q29sdW1uU29ydHMgPSAyO1xyXG5leHBvcnRzLmRlZmF1bHRTZWxlY3Rpb25UaXRsZSA9ICdTZWxlY3QgY2FyZCc7XHJcbnZhciBDYXJkQ29udGFpbmVyQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDYXJkQ29udGFpbmVyQ29udHJvbGxlcigkc2NvcGUsICRhdHRycywgJHRyYW5zY2x1ZGUsIG9iamVjdCwgYXJyYXksIGRhdGFQYWdlckZhY3RvcnksIHBhcmVudENoaWxkKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcclxuICAgICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcclxuICAgICAgICB0aGlzLmFycmF5ID0gYXJyYXk7XHJcbiAgICAgICAgdGhpcy5kYXRhUGFnZXJGYWN0b3J5ID0gZGF0YVBhZ2VyRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnBhcmVudENoaWxkID0gcGFyZW50Q2hpbGQ7XHJcbiAgICAgICAgdGhpcy5udW1iZXJTZWxlY3RlZCA9IDA7XHJcbiAgICAgICAgdGhpcy5hZGRWaWV3RGF0YSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgXy5lYWNoKF90aGlzLmRhdGFTb3VyY2UucmF3RGF0YVNldCwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKGl0ZW0udmlld0RhdGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS52aWV3RGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy51cGRhdGVEaXNhYmxlZFNlbGVjdGlvbnMoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuY2xlYXJGaWx0ZXJlZFNlbGVjdGlvbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBub25WaXNpYmxlSXRlbXMgPSBfLmRpZmZlcmVuY2UoX3RoaXMuZGF0YVNvdXJjZS5yYXdEYXRhU2V0LCBfdGhpcy5kYXRhU291cmNlLmZpbHRlcmVkRGF0YVNldCk7XHJcbiAgICAgICAgICAgIF8uZWFjaChub25WaXNpYmxlSXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZChpdGVtLnZpZXdEYXRhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udmlld0RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaXRlbS52aWV3RGF0YS5zZWxlY3RlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaXRlbS52aWV3RGF0YS5zZWxlY3Rpb25UaXRsZSA9IGV4cG9ydHMuZGVmYXVsdFNlbGVjdGlvblRpdGxlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlU2VsZWN0ZWQoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudXBkYXRlU2VsZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm51bWJlclNlbGVjdGVkID0gXy5maWx0ZXIoX3RoaXMuZGF0YVNvdXJjZS5maWx0ZXJlZERhdGFTZXQsIGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS52aWV3RGF0YSAhPSBudWxsICYmIGl0ZW0udmlld0RhdGEuc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgIH0pLmxlbmd0aDtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudXBkYXRlRGlzYWJsZWRTZWxlY3Rpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuZGlzYWJsaW5nU2VsZWN0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKF90aGlzLmRhdGFTb3VyY2UucmF3RGF0YVNldCwgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlzYWJsZWRSZWFzb24gPSBfdGhpcy5kaXNhYmxlU2VsZWN0aW9uKHsgaXRlbTogaXRlbSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnZpZXdEYXRhLmRpc2FibGVkU2VsZWN0aW9uID0gKGRpc2FibGVkUmVhc29uICE9IG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udmlld0RhdGEuc2VsZWN0aW9uVGl0bGUgPSAoaXRlbS52aWV3RGF0YS5kaXNhYmxlZFNlbGVjdGlvbiA/IGRpc2FibGVkUmVhc29uIDogZXhwb3J0cy5kZWZhdWx0U2VsZWN0aW9uVGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICh0aGlzLmJ1aWxkZXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1aWxkZXIuc2V0Q2FyZENvbnRhaW5lclByb3BlcnRpZXModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWFrZUNhcmQgPSAkdHJhbnNjbHVkZTtcclxuICAgICAgICB0aGlzLmRhdGFTb3VyY2UgPSB0aGlzLnNvdXJjZTtcclxuICAgICAgICB0aGlzLnBlcm1hbmVudEZvb3RlcnMgPSBfLmlzVW5kZWZpbmVkKHRoaXMucGVybWFuZW50Rm9vdGVycykgPyBmYWxzZSA6IHRoaXMucGVybWFuZW50Rm9vdGVycztcclxuICAgICAgICB0aGlzLm1heENvbFNvcnRzID0gdGhpcy5tYXhDb2x1bW5Tb3J0cyAhPSBudWxsID8gdGhpcy5tYXhDb2x1bW5Tb3J0cyA6IGV4cG9ydHMuZGVmYXVsdE1heENvbHVtblNvcnRzO1xyXG4gICAgICAgIHRoaXMuZGlzYWJsaW5nU2VsZWN0aW9ucyA9IG9iamVjdC5pc051bGxPcldoaXRlc3BhY2UoJGF0dHJzLmRpc2FibGVTZWxlY3Rpb24pID09PSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNvcnREaXJlY3Rpb24gPSBzb3J0c19tb2R1bGVfMS5Tb3J0RGlyZWN0aW9uO1xyXG4gICAgICAgIHRoaXMuc3luY0ZpbHRlcnMoKTtcclxuICAgICAgICB0aGlzLnNldHVwUGFnaW5nKCk7XHJcbiAgICAgICAgdGhpcy5idWlsZENvbHVtblNpemVzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0YWJsZUNhcmRzKSB7XHJcbiAgICAgICAgICAgIC8vKnVzZSBjYXJkIGNvbnRhaW5lciBldmVudCBzZXJ2aWNlP1xyXG4gICAgICAgICAgICAkc2NvcGUuJG9uKCd1cGRhdGVEaXNhYmxlZFNlbGVjdGlvbnMnLCB0aGlzLnVwZGF0ZURpc2FibGVkU2VsZWN0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS53YXRjaCh0aGlzLmFkZFZpZXdEYXRhLCAnY2hhbmdlZCcpO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2Uud2F0Y2godGhpcy5jbGVhckZpbHRlcmVkU2VsZWN0aW9ucywgJ3JlZHJhd2luZycpO1xyXG4gICAgICAgICAgICB0aGlzLmFkZFZpZXdEYXRhKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uQ29sdW1uID0ge1xyXG4gICAgICAgICAgICAgICAgbGFiZWw6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBzaXplOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0udmlld0RhdGEuc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZmxpcFNvcnQ6IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRhdGFTb3VyY2Uuc29ydHMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2Uuc29ydHMgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLmNvbnRhaW5lckRhdGEgPSB0aGlzLmNvbnRhaW5lckRhdGE7XHJcbiAgICB9XHJcbiAgICBDYXJkQ29udGFpbmVyQ29udHJvbGxlci5wcm90b3R5cGUuc29ydFNlbGVjdGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuc29ydCh0aGlzLnNlbGVjdGlvbkNvbHVtbik7XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRhaW5lckNvbnRyb2xsZXIucHJvdG90eXBlLm9wZW5DYXJkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBiZWhhdmlvcnMgPSB0aGlzLnBhcmVudENoaWxkLmdldEFsbENoaWxkQmVoYXZpb3JzKHRoaXMuZGF0YVNvdXJjZS5kYXRhU2V0KTtcclxuICAgICAgICByZXR1cm4gXy5ldmVyeShfLm1hcChiZWhhdmlvcnMsIGZ1bmN0aW9uIChiZWhhdmlvcikgeyByZXR1cm4gYmVoYXZpb3IuY2xvc2UoKTsgfSkpO1xyXG4gICAgfTtcclxuICAgIENhcmRDb250YWluZXJDb250cm9sbGVyLnByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24gKGNvbHVtbikge1xyXG4gICAgICAgIHZhciBzb3J0TGlzdCA9IHRoaXMuZGF0YVNvdXJjZS5zb3J0cztcclxuICAgICAgICB2YXIgZmlyc3RTb3J0ID0gc29ydExpc3RbMF07XHJcbiAgICAgICAgLy8gSWYgY29sdW1uIGlzIGFscmVhZHkgdGhlIHByaW1hcnkgc29ydCwgY2hhbmdlIHRoZSBkaXJlY3Rpb25cclxuICAgICAgICBpZiAoZmlyc3RTb3J0ICE9IG51bGxcclxuICAgICAgICAgICAgJiYgZmlyc3RTb3J0LmNvbHVtbiA9PT0gY29sdW1uKSB7XHJcbiAgICAgICAgICAgIGZpcnN0U29ydC5kaXJlY3Rpb24gPSBzb3J0c19tb2R1bGVfMS5Tb3J0RGlyZWN0aW9uLnRvZ2dsZShmaXJzdFNvcnQuZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgLy8gQ2xlYXIgc29ydFxyXG4gICAgICAgICAgICBpZiAoZmlyc3RTb3J0LmRpcmVjdGlvbiA9PT0gc29ydHNfbW9kdWxlXzEuU29ydERpcmVjdGlvbi5ub25lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyVmlzdWFsU29ydEluZGljYXRvcihmaXJzdFNvcnQpO1xyXG4gICAgICAgICAgICAgICAgZmlyc3RTb3J0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBjb2x1bW4gaGFzIHNlY29uZGFyeSBzb3J0cyBkb24ndCBmYWxsIGJhY2sgdG8gYVxyXG4gICAgICAgICAgICAgICAgLy8gIHNlY29uZGFyeSBzb3J0LCBpbnN0ZWFkIGp1c3QgY2xlYXIgYWxsIHNvcnRzXHJcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnNlY29uZGFyeVNvcnRzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0TGlzdC5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc29ydExpc3Quc2hpZnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRWxzZSBtYWtlIGNvbHVtbiBwcmltYXJ5IGFzY2VuZGluZyBzb3J0XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBhbnkgZXhpc3Rpbmcgbm9uLXByaW1hcnkgc29ydHMgb24gY29sdW1uXHJcbiAgICAgICAgICAgIHRoaXMuYXJyYXkucmVtb3ZlKHNvcnRMaXN0LCBmdW5jdGlvbiAoc29ydCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbiA9PT0gc29ydC5jb2x1bW47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBCdWlsZCBhc2NlbmRpbmcgc29ydCBmb3IgY29sdW1uXHJcbiAgICAgICAgICAgIHZhciBuZXdTb3J0ID0ge1xyXG4gICAgICAgICAgICAgICAgY29sdW1uOiBjb2x1bW4sXHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHNvcnRzX21vZHVsZV8xLlNvcnREaXJlY3Rpb24uYXNjZW5kaW5nLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBzb3J0TGlzdC51bnNoaWZ0KG5ld1NvcnQpO1xyXG4gICAgICAgICAgICBmaXJzdFNvcnQgPSBuZXdTb3J0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbENvbHVtblNvcnRpbmcoKTtcclxuICAgICAgICAvLyBJZiBjb2x1bW4gaGFzIHNlY29uZGFyeSBzb3J0cywgd2lwZSB0aGUgc29ydCBvcmRlciBhbmQganVzdCBhcHBseSB0aGUgc2Vjb25kYXJ5IHNvcnRzXHJcbiAgICAgICAgaWYgKGZpcnN0U29ydCAhPSBudWxsICYmIGNvbHVtbi5zZWNvbmRhcnlTb3J0cyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNvcnRMaXN0Lmxlbmd0aCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBzZWNvbmRhcnlTb3J0cyA9IHRoaXMuYnVpbGRTZWNvbmRhcnlTb3J0cyhmaXJzdFNvcnQuZGlyZWN0aW9uLCBjb2x1bW4uc2Vjb25kYXJ5U29ydHMpO1xyXG4gICAgICAgICAgICBzb3J0TGlzdC5wdXNoKGZpcnN0U29ydCk7XHJcbiAgICAgICAgICAgIHNvcnRMaXN0LnB1c2guYXBwbHkoc29ydExpc3QsIHNlY29uZGFyeVNvcnRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vdCB1c2luZyBjb2x1bW4gc2Vjb25kYXJ5IHNvcnRzLCBsaW1pdCB0aGUgbWF4aW11bSBudW1iZXJcclxuICAgICAgICAgICAgLy8gIG9mIHNvcnRzIGFwcGxpZWQgdG8gdGhlIG1heGltdW0gbnVtYmVyIG9mIHNvcnRzXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5zb3J0cyA9IF8udGFrZShzb3J0TGlzdCwgdGhpcy5tYXhDb2xTb3J0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZS5vblNvcnRDaGFuZ2UoKTtcclxuICAgIH07XHJcbiAgICBDYXJkQ29udGFpbmVyQ29udHJvbGxlci5wcm90b3R5cGUuc2VsZWN0aW9uQ2hhbmdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNlbGVjdGVkKCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3Rpb25DaGFuZ2VkRXZlbnQoKTtcclxuICAgIH07XHJcbiAgICBDYXJkQ29udGFpbmVyQ29udHJvbGxlci5wcm90b3R5cGUuc3luY0ZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9iamVjdC5pc051bGxPckVtcHR5KHRoaXMuZmlsdGVycykpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLmZpbHRlcnMgPSB0aGlzLmZpbHRlcnM7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuZGF0YVNvdXJjZS5maWx0ZXJzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5maWx0ZXJzID0gdGhpcy5kYXRhU291cmNlLmZpbHRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhcmRDb250YWluZXJDb250cm9sbGVyLnByb3RvdHlwZS5zZXR1cFBhZ2luZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBJZiBwYWdpbmcgZmxhZyBpcyBzcGVjaWZpZWQsIGNhcmQgY29udGFpbmVyIGNvbnRyb2xzIHBhZ2VyIGluc3RhbmNlXHJcbiAgICAgICAgaWYgKHRoaXMucGFnaW5nICE9IG51bGwpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFnaW5nID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLnBhZ2VyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRlci5fcGFnZXIgPSB0aGlzLmRhdGFQYWdlckZhY3RvcnkuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZS5wYWdlciA9IHRoaXMuYnVpbGRlci5fcGFnZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5kYXRhU291cmNlLnBhZ2VyKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBwYWdpbmcgZmxhZyBpcyBub3Qgc2V0IGFuZCB0aGUgZGF0YVNvdXJjZSBoYXMgYSBwYWdlciwgc2F2ZSBhIHJlZmVyZW5jZSBoZXJlXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRlci5fcGFnZXIgPSB0aGlzLmRhdGFTb3VyY2UucGFnZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENhcmRDb250YWluZXJDb250cm9sbGVyLnByb3RvdHlwZS5idWlsZENvbHVtblNpemVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgXy5lYWNoKHRoaXMuY29sdW1ucywgZnVuY3Rpb24gKGNvbHVtbikge1xyXG4gICAgICAgICAgICB2YXIgc2l6ZXMgPSBjb2x1bW4uc2l6ZTtcclxuICAgICAgICAgICAgaWYgKF8uaXNPYmplY3Qoc2l6ZXMpKSB7XHJcbiAgICAgICAgICAgICAgICBzaXplc1ticmVha3BvaW50XzEueHNdID0gX3RoaXMub2JqZWN0LnZhbHVlT3JEZWZhdWx0KHNpemVzW2JyZWFrcG9pbnRfMS54c10sIDApO1xyXG4gICAgICAgICAgICAgICAgc2l6ZXNbYnJlYWtwb2ludF8xLnNtXSA9IF90aGlzLm9iamVjdC52YWx1ZU9yRGVmYXVsdChzaXplc1ticmVha3BvaW50XzEuc21dLCBzaXplc1ticmVha3BvaW50XzEueHNdKTtcclxuICAgICAgICAgICAgICAgIHNpemVzW2JyZWFrcG9pbnRfMS5tZF0gPSBfdGhpcy5vYmplY3QudmFsdWVPckRlZmF1bHQoc2l6ZXNbYnJlYWtwb2ludF8xLm1kXSwgc2l6ZXNbYnJlYWtwb2ludF8xLnNtXSk7XHJcbiAgICAgICAgICAgICAgICBzaXplc1ticmVha3BvaW50XzEubGddID0gX3RoaXMub2JqZWN0LnZhbHVlT3JEZWZhdWx0KHNpemVzW2JyZWFrcG9pbnRfMS5sZ10sIHNpemVzW2JyZWFrcG9pbnRfMS5tZF0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29sdW1uLnNpemUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeHM6IHNpemVzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNtOiBzaXplcyxcclxuICAgICAgICAgICAgICAgICAgICBtZDogc2l6ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgbGc6IHNpemVzLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIENhcmRDb250YWluZXJDb250cm9sbGVyLnByb3RvdHlwZS5sb29rdXBDb2x1bW4gPSBmdW5jdGlvbiAobGFiZWwpIHtcclxuICAgICAgICByZXR1cm4gXy5maW5kKHRoaXMuY29sdW1ucywgZnVuY3Rpb24gKGNvbHVtbikge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sdW1uLmxhYmVsID09PSBsYWJlbDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBDYXJkQ29udGFpbmVyQ29udHJvbGxlci5wcm90b3R5cGUuYnVpbGRTZWNvbmRhcnlTb3J0cyA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIHNlY29uZGFyeVNvcnRzKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgc29ydExpc3QgPSBzZWNvbmRhcnlTb3J0c1tzb3J0c19tb2R1bGVfMS5Tb3J0RGlyZWN0aW9uLmdldEZ1bGxOYW1lKGRpcmVjdGlvbildO1xyXG4gICAgICAgIHJldHVybiBfLm1hcChzb3J0TGlzdCwgZnVuY3Rpb24gKHNvcnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogc29ydC5kaXJlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBjb2x1bW46IF90aGlzLmxvb2t1cENvbHVtbihzb3J0LmNvbHVtbiksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRhaW5lckNvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZVZpc3VhbENvbHVtblNvcnRpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfLmVhY2godGhpcy5kYXRhU291cmNlLnNvcnRzLCBmdW5jdGlvbiAoc29ydCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgLy8gT25seSBmaXJzdCBzb3J0IHNob3VsZCBoYXZlIHZpc2libGUgZGlyZWN0aW9uXHJcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlVmlzdWFsU29ydEluZGljYXRvcihzb3J0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNsZWFyVmlzdWFsU29ydEluZGljYXRvcihzb3J0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIENhcmRDb250YWluZXJDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVWaXN1YWxTb3J0SW5kaWNhdG9yID0gZnVuY3Rpb24gKHNvcnQpIHtcclxuICAgICAgICBzb3J0LmNvbHVtbi5zb3J0RGlyZWN0aW9uID0gc29ydC5kaXJlY3Rpb247XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRhaW5lckNvbnRyb2xsZXIucHJvdG90eXBlLmNsZWFyVmlzdWFsU29ydEluZGljYXRvciA9IGZ1bmN0aW9uIChzb3J0KSB7XHJcbiAgICAgICAgc29ydC5jb2x1bW4uc29ydERpcmVjdGlvbiA9IG51bGw7XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRhaW5lckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRhdHRycycsICckdHJhbnNjbHVkZScsIF9fb2JqZWN0LnNlcnZpY2VOYW1lLCBfX2FycmF5LnNlcnZpY2VOYW1lLCBkYXRhU291cmNlc19tb2R1bGVfMS5kYXRhUGFnZXIuZmFjdG9yeU5hbWUsIF9fcGFyZW50Q2hpbGQuc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIENhcmRDb250YWluZXJDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkNhcmRDb250YWluZXJDb250cm9sbGVyID0gQ2FyZENvbnRhaW5lckNvbnRyb2xsZXI7XHJcbmV4cG9ydHMuY2FyZENvbnRhaW5lciA9IHtcclxuICAgIHRyYW5zY2x1ZGU6IHtcclxuICAgICAgICAnY29udGFpbmVySGVhZGVyU2xvdCc6ICc/cmxDb250YWluZXJIZWFkZXInLFxyXG4gICAgICAgICdjb250YWluZXJGb290ZXJTbG90JzogJz9ybENvbnRhaW5lckZvb3RlcicsXHJcbiAgICAgICAgJ2NvbnRlbnRTbG90JzogJz9ybENhcmRDb250ZW50JyxcclxuICAgICAgICAnZm9vdGVyU2xvdCc6ICc/cmxDYXJkRm9vdGVyJyxcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9jYXJkQ29udGFpbmVyLmh0bWwnKSxcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdjYXJkQ29udGFpbmVyJyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgYnVpbGRlcjogJz0/JyxcclxuICAgICAgICBjYXJkQ29udHJvbGxlcjogJ0AnLFxyXG4gICAgICAgIGNhcmRDb250cm9sbGVyQXM6ICdAJyxcclxuICAgICAgICBjYXJkQXM6ICdAJyxcclxuICAgICAgICBzZWxlY3Rpb25DaGFuZ2VkRXZlbnQ6ICcmc2VsZWN0aW9uQ2hhbmdlZCcsXHJcbiAgICB9XHJcbn07XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVkyRnlaRU52Ym5SaGFXNWxjaTVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkltTmhjbVJEYjI1MFlXbHVaWEl1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNNRVJCUVRCRU8wRkJRekZFTEN0RVFVRXJSRHRCUVVVdlJDeFpRVUZaTEVOQlFVTTdRVUZIWWl4SlFVRlpMRU5CUVVNc1YwRkJUU3hSUVVGUkxFTkJRVU1zUTBGQlFUdEJRVVUxUWl3MlEwRkJhME1zT0VKQlFUaENMRU5CUVVNc1EwRkJRVHRCUVVOcVJTeEpRVUZQTEZGQlFWRXNSMEZCUnl4MVEwRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU5zUXl4SlFVRlBMRTlCUVU4c1IwRkJSeXgxUTBGQlVTeERRVUZETEV0QlFVc3NRMEZCUXp0QlFVTm9ReXhKUVVGUExHRkJRV0VzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRzFDUVVGdFFpeERRVUZETzBGQlNYQkVMRzFEUVVGMVF5eHJRMEZCYTBNc1EwRkJReXhEUVVGQk8wRkJSVEZGTERaQ1FVRnZSU3h6UWtGQmMwSXNRMEZCUXl4RFFVRkJPMEZCUlROR0xESkNRVUVyUWl4MVEwRkJkVU1zUTBGQlF5eERRVUZCTzBGQlNUVkVMSEZDUVVGaExFZEJRVmNzYVVKQlFXbENMRU5CUVVNN1FVRkRNVU1zYzBKQlFXTXNSMEZCVnl4NVFrRkJlVUlzUTBGQlF6dEJRVVZ1UkN3MlFrRkJjVUlzUjBGQlZ5eERRVUZETEVOQlFVTTdRVUZEYkVNc05rSkJRWEZDTEVkQlFWY3NZVUZCWVN4RFFVRkRPMEZCTmtSNlJEdEpRV2REUXl4cFEwRkJiMElzVFVGQk1rSXNSVUZETTBNc1RVRkJNa0lzUlVGRE0wSXNWMEZCZDBNc1JVRkRhRU1zVFVGQkswSXNSVUZETDBJc1MwRkJORUlzUlVGRE5VSXNaMEpCUVRaRExFVkJRemRETEZkQlFYTkVPMUZCZEVOdVJTeHBRa0Z4VWtNN1VVRnlVRzlDTEZkQlFVMHNSMEZCVGl4TlFVRk5MRU5CUVhGQ08xRkJSMjVETEZkQlFVMHNSMEZCVGl4TlFVRk5MRU5CUVhsQ08xRkJReTlDTEZWQlFVc3NSMEZCVEN4TFFVRkxMRU5CUVhWQ08xRkJRelZDTEhGQ1FVRm5RaXhIUVVGb1FpeG5Ra0ZCWjBJc1EwRkJOa0k3VVVGRE4wTXNaMEpCUVZjc1IwRkJXQ3hYUVVGWExFTkJRVEpETzFGQlpHeEZMRzFDUVVGakxFZEJRVmNzUTBGQlF5eERRVUZETzFGQk9FdHVRaXhuUWtGQlZ5eEhRVUZsTzFsQlEycERMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4VlFVRlZMRVZCUVVVc1ZVRkJReXhKUVVGNVF6dG5Ra0ZETlVVc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZkQlFWY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzI5Q1FVTnNReXhKUVVGSkxFTkJRVU1zVVVGQlVTeEhRVUZITzNkQ1FVTm1MRkZCUVZFc1JVRkJSU3hMUVVGTE8zRkNRVU5tTEVOQlFVTTdaMEpCUTBnc1EwRkJRenRaUVVOR0xFTkJRVU1zUTBGQlF5eERRVUZETzFsQlJVZ3NTMEZCU1N4RFFVRkRMSGRDUVVGM1FpeEZRVUZGTEVOQlFVTTdVVUZEYWtNc1EwRkJReXhEUVVGQk8xRkJVVThzTkVKQlFYVkNMRWRCUVdVN1dVRkROME1zU1VGQlNTeGxRVUZsTEVkQlFWVXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhMUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEZWQlFWVXNSVUZCUlN4TFFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExHVkJRV1VzUTBGQlF5eERRVUZETzFsQlJYWkhMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zWlVGQlpTeEZRVUZGTEZWQlFVTXNTVUZCZVVNN1owSkJRMnBGTEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhYUVVGWExFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenR2UWtGRGJFTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1IwRkJSenQzUWtGRFppeFJRVUZSTEVWQlFVVXNTMEZCU3p0eFFrRkRaaXhEUVVGRE8yZENRVU5JTEVOQlFVTTdaMEpCUlVRc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eFJRVUZSTEVkQlFVY3NTMEZCU3l4RFFVRkRPMmRDUVVNdlFpeEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMR05CUVdNc1IwRkJSeXcyUWtGQmNVSXNRMEZCUXp0WlFVTjBSQ3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVVZJTEV0QlFVa3NRMEZCUXl4alFVRmpMRVZCUVVVc1EwRkJRenRSUVVOMlFpeERRVUZETEVOQlFVRTdVVUZGVHl4dFFrRkJZeXhIUVVGbE8xbEJRM0JETEV0QlFVa3NRMEZCUXl4alFVRmpMRWRCUVVjc1EwRkJReXhEUVVGRExFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMR1ZCUVdVc1JVRkJSU3hWUVVGRExFbEJRWGxETzJkQ1FVTjZSeXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNTVUZCU1N4SlFVRkpMRWxCUVVrc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eFJRVUZSTEVOQlFVTTdXVUZEZUVRc1EwRkJReXhEUVVGRExFTkJRVU1zVFVGQlRTeERRVUZETzFGQlExZ3NRMEZCUXl4RFFVRkJPMUZCUlU4c05rSkJRWGRDTEVkQlFXVTdXVUZET1VNc1JVRkJSU3hEUVVGRExFTkJRVU1zUzBGQlNTeERRVUZETEcxQ1FVRnRRaXhEUVVGRExFTkJRVU1zUTBGQlF6dG5Ra0ZET1VJc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eExRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRlZCUVZVc1JVRkJSU3hWUVVGRExFbEJRWGxETzI5Q1FVTTFSU3hKUVVGSkxHTkJRV01zUjBGQlZ5eExRVUZKTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zUlVGQlJTeEpRVUZKTEVWQlFVVXNTVUZCU1N4RlFVRkZMRU5CUVVNc1EwRkJRenR2UWtGRGJrVXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhwUWtGQmFVSXNSMEZCUnl4RFFVRkRMR05CUVdNc1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF6dHZRa0ZETTBRc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eGpRVUZqTEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExHbENRVUZwUWl4SFFVRkhMR05CUVdNc1IwRkJSeXcyUWtGQmNVSXNRMEZCUXl4RFFVRkRPMmRDUVVNelJ5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTktMRU5CUVVNN1VVRkRSaXhEUVVGRExFTkJRVUU3VVVGb1RrRXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUXpGQ0xFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNNRUpCUVRCQ0xFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdVVUZETDBNc1EwRkJRenRSUVVWRUxFbEJRVWtzUTBGQlF5eFJRVUZSTEVkQlFVY3NWMEZCVnl4RFFVRkRPMUZCUXpWQ0xFbEJRVWtzUTBGQlF5eFZRVUZWTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJRenRSUVVNNVFpeEpRVUZKTEVOQlFVTXNaMEpCUVdkQ0xFZEJRVWNzUTBGQlF5eERRVUZETEZkQlFWY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNSMEZCUnl4TFFVRkxMRWRCUVVjc1NVRkJTU3hEUVVGRExHZENRVUZuUWl4RFFVRkRPMUZCUXpkR0xFbEJRVWtzUTBGQlF5eFhRVUZYTEVkQlFVY3NTVUZCU1N4RFFVRkRMR05CUVdNc1NVRkJTU3hKUVVGSkxFZEJRVWNzU1VGQlNTeERRVUZETEdOQlFXTXNSMEZCUnl3MlFrRkJjVUlzUTBGQlF6dFJRVU0zUml4SlFVRkpMRU5CUVVNc2JVSkJRVzFDTEVkQlFVY3NUVUZCVFN4RFFVRkRMR3RDUVVGclFpeERRVUZETEUxQlFVMHNRMEZCUXl4blFrRkJaMElzUTBGQlF5eExRVUZMTEV0QlFVc3NRMEZCUXp0UlFVTjRSaXhKUVVGSkxFTkJRVU1zWVVGQllTeEhRVUZITERSQ1FVRmhMRU5CUVVNN1VVRkZia01zU1VGQlNTeERRVUZETEZkQlFWY3NSVUZCUlN4RFFVRkRPMUZCUlc1Q0xFbEJRVWtzUTBGQlF5eFhRVUZYTEVWQlFVVXNRMEZCUXp0UlFVVnVRaXhKUVVGSkxFTkJRVU1zWjBKQlFXZENMRVZCUVVVc1EwRkJRenRSUVVWNFFpeEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1pVRkJaU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU14UWl4dlEwRkJiME03V1VGRGNFTXNUVUZCVFN4RFFVRkRMRWRCUVVjc1EwRkJReXd3UWtGQk1FSXNSVUZCUlN4SlFVRkpMRU5CUVVNc2QwSkJRWGRDTEVOQlFVTXNRMEZCUXp0WlFVVjBSU3hKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEV0QlFVc3NRMEZCUXl4SlFVRkpMRU5CUVVNc1YwRkJWeXhGUVVGRkxGTkJRVk1zUTBGQlF5eERRVUZETzFsQlEyNUVMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFVa3NRMEZCUXl4MVFrRkJkVUlzUlVGQlJTeFhRVUZYTEVOQlFVTXNRMEZCUXp0WlFVVnFSU3hKUVVGSkxFTkJRVU1zVjBGQlZ5eEZRVUZGTEVOQlFVTTdXVUZGYmtJc1NVRkJTU3hEUVVGRExHVkJRV1VzUjBGQlJ6dG5Ra0ZEZEVJc1MwRkJTeXhGUVVGRkxFbEJRVWs3WjBKQlExZ3NTVUZCU1N4RlFVRkZMRWxCUVVrN1owSkJRMVlzVVVGQlVTeFpRVUZETEVsQlFWTTdiMEpCUTJwQ0xFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRkZCUVZFc1EwRkJRenRuUWtGREwwSXNRMEZCUXp0blFrRkRSQ3hSUVVGUkxFVkJRVVVzU1VGQlNUdGhRVU5rTEVOQlFVTTdVVUZEU0N4RFFVRkRPMUZCUlVRc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4TFFVRkxMRWxCUVVrc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU51UXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFdEJRVXNzUjBGQlJ5eEZRVUZGTEVOQlFVTTdVVUZETlVJc1EwRkJRenRSUVVWRUxFMUJRVTBzUTBGQlF5eGhRVUZoTEVkQlFVY3NTVUZCU1N4RFFVRkRMR0ZCUVdFc1EwRkJRenRKUVVNelF5eERRVUZETzBsQlJVUXNPRU5CUVZrc1IwRkJXanRSUVVORExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMR1ZCUVdVc1EwRkJReXhEUVVGRE8wbEJRMnBETEVOQlFVTTdTVUZGUkN3d1EwRkJVU3hIUVVGU08xRkJRME1zU1VGQlNTeFRRVUZUTEVkQlFXOUNMRWxCUVVrc1EwRkJReXhYUVVGWExFTkJRVU1zYjBKQlFXOUNMRU5CUVdkQ0xFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNN1VVRkZMMGNzVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFZEJRVWNzUTBGQlF5eFRRVUZUTEVWQlFVVXNWVUZCUXl4UlFVRjFRaXhKUVVGblFpeE5RVUZOTEVOQlFVTXNVVUZCVVN4RFFVRkRMRXRCUVVzc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0SlFVTjBSeXhEUVVGRE8wbEJSVVFzYzBOQlFVa3NSMEZCU2l4VlFVRkxMRTFCUVc5Q08xRkJRM2hDTEVsQlFVa3NVVUZCVVN4SFFVRlpMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUzBGQlN5eERRVUZETzFGQlF6bERMRWxCUVVrc1UwRkJVeXhIUVVGVkxGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0UlFVVnVReXc0UkVGQk9FUTdVVUZET1VRc1JVRkJSU3hEUVVGRExFTkJRVU1zVTBGQlV5eEpRVUZKTEVsQlFVazdaVUZEYWtJc1UwRkJVeXhEUVVGRExFMUJRVTBzUzBGQlN5eE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTJwRExGTkJRVk1zUTBGQlF5eFRRVUZUTEVkQlFVY3NORUpCUVdFc1EwRkJReXhOUVVGTkxFTkJRVU1zVTBGQlV5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRPMWxCUldoRkxHRkJRV0U3V1VGRFlpeEZRVUZGTEVOQlFVTXNRMEZCUXl4VFFVRlRMRU5CUVVNc1UwRkJVeXhMUVVGTExEUkNRVUZoTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRGFFUXNTVUZCU1N4RFFVRkRMSGRDUVVGM1FpeERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRPMmRDUVVONlF5eFRRVUZUTEVkQlFVY3NTVUZCU1N4RFFVRkRPMmRDUVVWcVFpeDVSRUZCZVVRN1owSkJRM3BFTEdkRVFVRm5SRHRuUWtGRGFFUXNSVUZCUlN4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExHTkJRV01zU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRPMjlDUVVOdVF5eFJRVUZSTEVOQlFVTXNUVUZCVFN4SFFVRkhMRU5CUVVNc1EwRkJRenRuUWtGRGNrSXNRMEZCUXp0blFrRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dHZRa0ZEVUN4UlFVRlJMRU5CUVVNc1MwRkJTeXhGUVVGRkxFTkJRVU03WjBKQlEyeENMRU5CUVVNN1dVRkRSaXhEUVVGRE8xRkJRMFlzUTBGQlF6dFJRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTFBc01FTkJRVEJETzFsQlJURkRMR3RFUVVGclJEdFpRVU5zUkN4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFMUJRVTBzUTBGQlF5eFJRVUZSTEVWQlFVVXNWVUZCUXl4SlFVRlhPMmRDUVVOMlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4TFFVRkxMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU03V1VGREwwSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkZTQ3hyUTBGQmEwTTdXVUZEYkVNc1NVRkJTU3hQUVVGUExFZEJRVlU3WjBKQlEzQkNMRTFCUVUwc1JVRkJSU3hOUVVGTk8yZENRVU5rTEZOQlFWTXNSVUZCUlN3MFFrRkJZU3hEUVVGRExGTkJRVk03WVVGRGJFTXNRMEZCUXp0WlFVVkdMRkZCUVZFc1EwRkJReXhQUVVGUExFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTTdXVUZGTVVJc1UwRkJVeXhIUVVGSExFOUJRVThzUTBGQlF6dFJRVU55UWl4RFFVRkRPMUZCUlVRc1NVRkJTU3hEUVVGRExIbENRVUY1UWl4RlFVRkZMRU5CUVVNN1VVRkZha01zZDBaQlFYZEdPMUZCUTNoR0xFVkJRVVVzUTBGQlF5eERRVUZETEZOQlFWTXNTVUZCU1N4SlFVRkpMRWxCUVVrc1RVRkJUU3hEUVVGRExHTkJRV01zU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNoRUxGRkJRVkVzUTBGQlF5eE5RVUZOTEVkQlFVY3NRMEZCUXl4RFFVRkRPMWxCUTNCQ0xFbEJRVWtzWTBGQll5eEhRVUZaTEVsQlFVa3NRMEZCUXl4dFFrRkJiVUlzUTBGQlF5eFRRVUZUTEVOQlFVTXNVMEZCVXl4RlFVRkZMRTFCUVUwc1EwRkJReXhqUVVGakxFTkJRVU1zUTBGQlF6dFpRVU51Unl4UlFVRlJMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETzFsQlEzcENMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEZGQlFWRXNSVUZCUlN4alFVRmpMRU5CUVVNc1EwRkJRenRSUVVNdlF5eERRVUZETzFGQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1dVRkRVQ3huUlVGQlowVTdXVUZEYUVVc2JVUkJRVzFFTzFsQlEyNUVMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUzBGQlN5eEhRVUZITEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hGUVVGRkxFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXp0UlFVTTFSQ3hEUVVGRE8xRkJSVVFzU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4WlFVRlpMRVZCUVVVc1EwRkJRenRKUVVOb1F5eERRVUZETzBsQlJVUXNhMFJCUVdkQ0xFZEJRV2hDTzFGQlEwTXNTVUZCU1N4RFFVRkRMR05CUVdNc1JVRkJSU3hEUVVGRE8xRkJRM1JDTEVsQlFVa3NRMEZCUXl4eFFrRkJjVUlzUlVGQlJTeERRVUZETzBsQlF6bENMRU5CUVVNN1NVRkZUeXcyUTBGQlZ5eEhRVUZ1UWp0UlFVTkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4aFFVRmhMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTTVReXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEU5QlFVOHNSMEZCUnl4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRE8xbEJRM1pETEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1QwRkJUeXhGUVVGRkxFTkJRVU03VVVGRE0wSXNRMEZCUXp0UlFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRTlCUVU4c1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6VkRMRWxCUVVrc1EwRkJReXhQUVVGUExFZEJRVWNzU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4UFFVRlBMRU5CUVVNN1VVRkRlRU1zUTBGQlF6dEpRVU5HTEVOQlFVTTdTVUZGVHl3MlEwRkJWeXhIUVVGdVFqdFJRVU5ETEhORlFVRnpSVHRSUVVOMFJTeEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEZWtJc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNTMEZCU3l4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU16UWl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFdEJRVXNzUjBGQlJ5eEpRVUZKTEVOQlFVTTdXVUZET1VJc1EwRkJRenRaUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzJkQ1FVTlFMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zVFVGQlRTeEhRVUZITEVsQlFVa3NRMEZCUXl4blFrRkJaMElzUTBGQlF5eFhRVUZYTEVWQlFVVXNRMEZCUXp0blFrRkRNVVFzU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4TFFVRkxMRWRCUVVjc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTTdXVUZETjBNc1EwRkJRenRSUVVOR0xFTkJRVU03VVVGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTJ4RExITkdRVUZ6Ump0WlFVTjBSaXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEUxQlFVMHNSMEZCUnl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFdEJRVXNzUTBGQlF6dFJRVU0zUXl4RFFVRkRPMGxCUTBZc1EwRkJRenRKUVVWUExHdEVRVUZuUWl4SFFVRjRRanRSUVVGQkxHbENRV2xDUXp0UlFXaENRU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRVZCUVVVc1ZVRkJReXhOUVVGdlFqdFpRVU42UXl4SlFVRkpMRXRCUVVzc1IwRkJOa0lzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXp0WlFVTnNSQ3hGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dG5Ra0ZEZGtJc1MwRkJTeXhEUVVGRExHVkJRVVVzUTBGQlF5eEhRVUZITEV0QlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1kwRkJZeXhEUVVGRExFdEJRVXNzUTBGQlF5eGxRVUZGTEVOQlFVTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRGNrUXNTMEZCU3l4RFFVRkRMR1ZCUVVVc1EwRkJReXhIUVVGSExFdEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNZMEZCWXl4RFFVRkRMRXRCUVVzc1EwRkJReXhsUVVGRkxFTkJRVU1zUlVGQlJTeExRVUZMTEVOQlFVTXNaVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRE4wUXNTMEZCU3l4RFFVRkRMR1ZCUVVVc1EwRkJReXhIUVVGSExFdEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNZMEZCWXl4RFFVRkRMRXRCUVVzc1EwRkJReXhsUVVGRkxFTkJRVU1zUlVGQlJTeExRVUZMTEVOQlFVTXNaVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRE4wUXNTMEZCU3l4RFFVRkRMR1ZCUVVVc1EwRkJReXhIUVVGSExFdEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNZMEZCWXl4RFFVRkRMRXRCUVVzc1EwRkJReXhsUVVGRkxFTkJRVU1zUlVGQlJTeExRVUZMTEVOQlFVTXNaVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVNNVJDeERRVUZETzFsQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1owSkJRMUFzVFVGQlRTeERRVUZETEVsQlFVa3NSMEZCUnp0dlFrRkRZaXhGUVVGRkxFVkJRVlVzUzBGQlN6dHZRa0ZEYWtJc1JVRkJSU3hGUVVGVkxFdEJRVXM3YjBKQlEycENMRVZCUVVVc1JVRkJWU3hMUVVGTE8yOUNRVU5xUWl4RlFVRkZMRVZCUVZVc1MwRkJTenRwUWtGRGFrSXNRMEZCUXp0WlFVTklMRU5CUVVNN1VVRkRSaXhEUVVGRExFTkJRVU1zUTBGQlF6dEpRVU5LTEVOQlFVTTdTVUZqVHl3NFEwRkJXU3hIUVVGd1FpeFZRVUZ4UWl4TFFVRmhPMUZCUTJwRExFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFVkJRVVVzVlVGQlF5eE5RVUZ2UWp0WlFVTm9SQ3hOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEV0QlFVc3NTMEZCU3l4TFFVRkxMRU5CUVVNN1VVRkRMMElzUTBGQlF5eERRVUZETEVOQlFVTTdTVUZEU2l4RFFVRkRPMGxCYlVOUExIRkVRVUZ0UWl4SFFVRXpRaXhWUVVFMFFpeFRRVUYzUWl4RlFVRkZMR05CUVN0Q08xRkJRWEpHTEdsQ1FWRkRPMUZCVUVFc1NVRkJTU3hSUVVGUkxFZEJRVzFDTEdOQlFXTXNRMEZCUXl3MFFrRkJZU3hEUVVGRExGZEJRVmNzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXl4RFFVRkRPMUZCUTNCR0xFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNSMEZCUnl4RFFVRkRMRkZCUVZFc1JVRkJSU3hWUVVGRExFbEJRV3RDTzFsQlEzcERMRTFCUVUwc1EwRkJRenRuUWtGRFRpeFRRVUZUTEVWQlFVVXNTVUZCU1N4RFFVRkRMRk5CUVZNN1owSkJRM3BDTEUxQlFVMHNSVUZCUlN4TFFVRkpMRU5CUVVNc1dVRkJXU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTTdZVUZEZEVNc1EwRkJRenRSUVVOSUxFTkJRVU1zUTBGQlF5eERRVUZETzBsQlEwb3NRMEZCUXp0SlFVVlBMREpFUVVGNVFpeEhRVUZxUXp0UlFVRkJMR2xDUVZORE8xRkJVa0VzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFdEJRVXNzUlVGQlJTeFZRVUZETEVsQlFWY3NSVUZCUlN4TFFVRmhPMWxCUTNoRUxHZEVRVUZuUkR0WlFVTm9SQ3hGUVVGRkxFTkJRVU1zUTBGQlF5eExRVUZMTEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRGFrSXNTMEZCU1N4RFFVRkRMSGxDUVVGNVFpeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTNSRExFTkJRVU03V1VGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0blFrRkRVQ3hMUVVGSkxFTkJRVU1zZDBKQlFYZENMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03V1VGRGNrTXNRMEZCUXp0UlFVTkdMRU5CUVVNc1EwRkJReXhEUVVGRE8wbEJRMG9zUTBGQlF6dEpRVVZQTERKRVFVRjVRaXhIUVVGcVF5eFZRVUZyUXl4SlFVRlhPMUZCUXpWRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNZVUZCWVN4SFFVRkhMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU03U1VGRE5VTXNRMEZCUXp0SlFVVlBMREJFUVVGM1FpeEhRVUZvUXl4VlFVRnBReXhKUVVGWE8xRkJRek5ETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1lVRkJZU3hIUVVGSExFbEJRVWtzUTBGQlF6dEpRVU5zUXl4RFFVRkRPMGxCY2xCTkxDdENRVUZQTEVkQlFXRXNRMEZCUXl4UlFVRlJMRVZCUVVVc1VVRkJVU3hGUVVGRkxHRkJRV0VzUlVGQlJTeFJRVUZSTEVOQlFVTXNWMEZCVnl4RlFVRkZMRTlCUVU4c1EwRkJReXhYUVVGWExFVkJRVVVzT0VKQlFWTXNRMEZCUXl4WFFVRlhMRVZCUVVVc1lVRkJZU3hEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETzBsQmMxQTNTaXc0UWtGQlF6dEJRVUZFTEVOQlFVTXNRVUZ5VWtRc1NVRnhVa003UVVGeVVsa3NLMEpCUVhWQ0xEQkNRWEZTYmtNc1EwRkJRVHRCUVVWVkxIRkNRVUZoTEVkQlFUaENPMGxCUTNKRUxGVkJRVlVzUlVGQlR6dFJRVU5vUWl4eFFrRkJjVUlzUlVGQlJTeHZRa0ZCYjBJN1VVRkRNME1zY1VKQlFYRkNMRVZCUVVVc2IwSkJRVzlDTzFGQlF6TkRMR0ZCUVdFc1JVRkJSU3huUWtGQlowSTdVVUZETDBJc1dVRkJXU3hGUVVGRkxHVkJRV1U3UzBGRE4wSTdTVUZEUkN4UlFVRlJMRVZCUVVVc1QwRkJUeXhEUVVGRExITkNRVUZ6UWl4RFFVRkRPMGxCUTNwRExGVkJRVlVzUlVGQlJTeHpRa0ZCWXp0SlFVTXhRaXhaUVVGWkxFVkJRVVVzWlVGQlpUdEpRVU0zUWl4UlFVRlJMRVZCUVVVN1VVRkRWQ3hQUVVGUExFVkJRVVVzU1VGQlNUdFJRVU5pTEdOQlFXTXNSVUZCUlN4SFFVRkhPMUZCUTI1Q0xHZENRVUZuUWl4RlFVRkZMRWRCUVVjN1VVRkRja0lzVFVGQlRTeEZRVUZGTEVkQlFVYzdVVUZEV0N4eFFrRkJjVUlzUlVGQlJTeHRRa0ZCYlVJN1MwRkRNVU03UTBGRFJDeERRVUZCSW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2NhcmRDb250YWluZXIuanNcbiAqKiBtb2R1bGUgaWQgPSA5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiY29sLW1kLTMgY29sLXhzLTEyXFxcIiBuZy1pZj1cXFwiY2FyZENvbnRhaW5lci5yZW5kZXJGaWx0ZXJzXFxcIj5cXHJcXG5cXHRcXHQ8cmwtY2FyZC1jb250YWluZXItZmlsdGVycyBmaWx0ZXJzPVxcXCJjYXJkQ29udGFpbmVyLmZpbHRlcnNcXFwiIHNvdXJjZT1cXFwiY2FyZENvbnRhaW5lci5kYXRhU291cmNlXFxcIj48L3JsLWNhcmQtY29udGFpbmVyLWZpbHRlcnM+XFxyXFxuXFx0PC9kaXY+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiY29sLXhzLTEyXFxcIiBuZy1jbGFzcz1cXFwieyAnY29sLW1kLTknOiBjYXJkQ29udGFpbmVyLnJlbmRlckZpbHRlcnMgfVxcXCI+XFxyXFxuXFx0XFx0PGRpdiBjbGFzcz1cXFwiY2FyZC1jb250YWluZXJcXFwiPlxcclxcblxcdFxcdFxcdDxkaXY+XFxyXFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiY2FyZC1jb250YWluZXItaGVhZGVyXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHQ8ZGl2IG5nLXRyYW5zY2x1ZGU9XFxcImNvbnRhaW5lckhlYWRlclNsb3RcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdDxybC1kZWZhdWx0LWNhcmQtY29udGFpbmVyLWhlYWRlcj48L3JsLWRlZmF1bHQtY2FyZC1jb250YWluZXItaGVhZGVyPlxcclxcblxcdFxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcclxcblxcdFxcdFxcdFxcdDxybC1nZW5lcmljLWNvbnRhaW5lciBzZWxlY3Rvcj1cXFwiY2FyZENvbnRhaW5lci5zZWxlY3RhYmxlQ2FyZHNcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdDx0ZW1wbGF0ZSB3aGVuLXNlbGVjdG9yPVxcXCJmYWxzZVxcXCIgZGVmYXVsdD5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjYXJkLWNvbHVtbnMtaGVhZGVyXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQ8ZGl2IG5nLXJlcGVhdD1cXFwiY29sdW1uIGluIGNhcmRDb250YWluZXIuY29sdW1uc1xcXCI+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0PHJsLWNvbHVtbi1oZWFkZXIgc29ydD1cXFwiY2FyZENvbnRhaW5lci5zb3J0KGNvbHVtbilcXFwiIHNvcnRpbmc9XFxcImNvbHVtbi5zb3J0RGlyZWN0aW9uXFxcIiBjb2x1bW49XFxcImNvbHVtblxcXCI+PC9ybC1jb2x1bW4taGVhZGVyPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImNsZWFyZml4XFxcIj48L2Rpdj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8L2Rpdj5cXHJcXG5cXHRcXHRcXHRcXHRcXHQ8L3RlbXBsYXRlPlxcclxcblxcdFxcdFxcdFxcdFxcdDx0ZW1wbGF0ZSB3aGVuLXNlbGVjdG9yPVxcXCJ0cnVlXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjYXJkLWNvbHVtbnMtaGVhZGVyXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJzZWxlY3QtZ3JvdXBcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcInNlbGVjdC1jb2x1bW5cXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdDxpIGNsYXNzPVxcXCJmYSBmYS1jaGVja1xcXCIgc3R5bGU9XFxcIm1hcmdpbi1sZWZ0OiA2cHg7IGN1cnNvcjogcG9pbnRlclxcXCIgbmctY2xpY2s9XFxcImNhcmRDb250YWluZXIuc29ydFNlbGVjdGVkKClcXFwiPjwvaT5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQ8aSBuZy1zaG93PVxcXCJjYXJkQ29udGFpbmVyLnNvcnRDb2x1bW4uc29ydERpcmVjdGlvbiA9PT0gY2FyZENvbnRhaW5lci5zb3J0RGlyZWN0aW9uLmFzY2VuZGluZ1xcXCIgY2xhc3M9XFxcImZhIGZhLXNvcnQtYXNjXFxcIj48L2k+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0PGkgbmctc2hvdz1cXFwiY2FyZENvbnRhaW5lci5zb3J0Q29sdW1uLnNvcnREaXJlY3Rpb24gPT09IGNhcmRDb250YWluZXIuc29ydERpcmVjdGlvbi5kZXNjZW5kaW5nXFxcIiBjbGFzcz1cXFwiZmEgZmEtc29ydC1kZXNjXFxcIj48L2k+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwic2VsZWN0LWNvbnRlbnRcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdDxkaXYgbmctcmVwZWF0PVxcXCJjb2x1bW4gaW4gY2FyZENvbnRhaW5lci5jb2x1bW5zXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHQ8cmwtY29sdW1uLWhlYWRlciBzb3J0PVxcXCJjYXJkQ29udGFpbmVyLnNvcnQoY29sdW1uKVxcXCIgc29ydGluZz1cXFwiY29sdW1uLnNvcnREaXJlY3Rpb25cXFwiIGNvbHVtbj1cXFwiY29sdW1uXFxcIj48L3JsLWNvbHVtbi1oZWFkZXI+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiY2xlYXJmaXhcXFwiPjwvZGl2PlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdFxcdFxcdDwvdGVtcGxhdGU+XFxyXFxuXFx0XFx0XFx0XFx0PC9ybC1nZW5lcmljLWNvbnRhaW5lcj5cXHJcXG5cXHJcXG5cXHRcXHRcXHRcXHQ8ZGl2IG5nLWlmPVxcXCJjYXJkQ29udGFpbmVyLmRhdGFTb3VyY2UuZGF0YVNldCB8IGlzRW1wdHk6ZmFsc2VcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImNhcmQtaXRlbS1yZXBlYXRcXFwiIG5nLXJlcGVhdD1cXFwiY2FyZCBpbiBjYXJkQ29udGFpbmVyLmRhdGFTb3VyY2UuZGF0YVNldFxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0PHJsLWNhcmQgY29sdW1ucz1cXFwiY2FyZENvbnRhaW5lci5jb2x1bW5zXFxcIiBpdGVtPVxcXCJjYXJkXFxcIlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdGNsaWNrYWJsZT1cXFwiY2FyZENvbnRhaW5lci5jbGlja2FibGVDYXJkc1xcXCJcXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRzZWxlY3RhYmxlPVxcXCJjYXJkQ29udGFpbmVyLnNlbGVjdGFibGVDYXJkc1xcXCJcXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRzZWxlY3Rpb24tY2hhbmdlZD1cXFwiY2FyZENvbnRhaW5lci5zZWxlY3Rpb25DaGFuZ2VkKClcXFwiXFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0Y29udGFpbmVyLWRhdGE9XFxcImNhcmRDb250YWluZXIuY29udGFpbmVyRGF0YVxcXCJcXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRzb3VyY2U9XFxcImNhcmRDb250YWluZXIuZGF0YVNvdXJjZVxcXCJcXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRwZXJtYW5lbnQtZm9vdGVyPVxcXCJjYXJkQ29udGFpbmVyLnBlcm1hbmVudEZvb3RlcnNcXFwiXFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0Y2FyZC1jb250cm9sbGVyPVxcXCJjYXJkQ29udGFpbmVyLmNhcmRDb250cm9sbGVyXFxcIlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdGNhcmQtY29udHJvbGxlci1hcz1cXFwiY2FyZENvbnRhaW5lci5jYXJkQ29udHJvbGxlckFzXFxcIlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdGNhcmQtYXM9XFxcImNhcmRDb250YWluZXIuY2FyZEFzXFxcIlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdHNhdmUtd2hlbi1pbnZhbGlkPVxcXCJjYXJkQ29udGFpbmVyLnNhdmVXaGVuSW52YWxpZFxcXCI+PC9ybC1jYXJkPlxcclxcblxcdFxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdFxcdDxkaXYgbmctaWY9XFxcImNhcmRDb250YWluZXIuZGF0YVNvdXJjZS5uZWVkc1JlZmluZWRTZWFyY2hcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFBsZWFzZSByZWZpbmUgeW91ciBzZWFyY2ggcmVzdWx0c1xcclxcblxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdFxcdDxkaXYgbmctaWY9XFxcImNhcmRDb250YWluZXIuZGF0YVNvdXJjZS5pc0VtcHR5XFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRUaGVyZSBhcmUgbm8gaXRlbXMgdG8gc2hvd1xcclxcblxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcclxcblxcdFxcdFxcdFxcdDxkaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PHJsLWJ1c3kgbG9hZGluZz1cXFwiY2FyZENvbnRhaW5lci5kYXRhU291cmNlLmxvYWRpbmdEYXRhU2V0XFxcIiBzaXplPVxcXCIyeFxcXCI+PC9ybC1idXN5PlxcclxcblxcdFxcdFxcdFxcdDwvZGl2PlxcclxcblxcclxcblxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImNhcmQtY29udGFpbmVyLWZvb3RlclxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PGRpdiBuZy10cmFuc2NsdWRlPVxcXCJjb250YWluZXJGb290ZXJTbG90XFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8cmwtZGVmYXVsdC1jYXJkLWNvbnRhaW5lci1mb290ZXI+PC9ybC1kZWZhdWx0LWNhcmQtY29udGFpbmVyLWZvb3Rlcj5cXHJcXG5cXHRcXHRcXHRcXHRcXHQ8L2Rpdj5cXHJcXG5cXHRcXHRcXHRcXHQ8L2Rpdj5cXHJcXG5cXHRcXHRcXHQ8L2Rpdj5cXHJcXG5cXHRcXHQ8L2Rpdj5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG48L2Rpdj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2NhcmRDb250YWluZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDEwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19nZW5lcmljU2VhcmNoRmlsdGVyID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLmdlbmVyaWNTZWFyY2hGaWx0ZXI7XHJcbnZhciBkYXRhU291cmNlcyA9IHJlcXVpcmUoJy4vZGF0YVNvdXJjZXMvZGF0YVNvdXJjZXMubW9kdWxlJyk7XHJcbnZhciBmaWx0ZXJHcm91cCA9IHJlcXVpcmUoJy4vZmlsdGVycy9maWx0ZXJHcm91cC9maWx0ZXJHcm91cC5tb2R1bGUnKTtcclxudmFyIHNlbGVjdEZpbHRlciA9IHJlcXVpcmUoJy4vZmlsdGVycy9zZWxlY3RGaWx0ZXIvc2VsZWN0RmlsdGVyLm1vZHVsZScpO1xyXG52YXIgZGF0ZUZpbHRlciA9IHJlcXVpcmUoJy4vZmlsdGVycy9kYXRlRmlsdGVyL2RhdGVGaWx0ZXIubW9kdWxlJyk7XHJcbnZhciBjb2x1bW5TZWFyY2hGaWx0ZXJfc2VydmljZV8xID0gcmVxdWlyZSgnLi9maWx0ZXJzL2NvbHVtblNlYXJjaEZpbHRlci9jb2x1bW5TZWFyY2hGaWx0ZXIuc2VydmljZScpO1xyXG5leHBvcnRzLmZhY3RvcnlOYW1lID0gJ2NhcmRDb250YWluZXJCdWlsZGVyJztcclxudmFyIENhcmRDb250YWluZXJCdWlsZGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENhcmRDb250YWluZXJCdWlsZGVyKCRpbmplY3Rvcikge1xyXG4gICAgICAgIHRoaXMuJGluamVjdG9yID0gJGluamVjdG9yO1xyXG4gICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IG5ldyBEYXRhU291cmNlQnVpbGRlcigkaW5qZWN0b3IsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuZmlsdGVycyA9IG5ldyBGaWx0ZXJCdWlsZGVyKCRpbmplY3RvciwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5fY29sdW1ucyA9IFtdO1xyXG4gICAgfVxyXG4gICAgQ2FyZENvbnRhaW5lckJ1aWxkZXIucHJvdG90eXBlLnVzZVNlYXJjaCA9IGZ1bmN0aW9uICh0b2tlbml6ZWQpIHtcclxuICAgICAgICB2YXIgZmFjdG9yeSA9IHRoaXMuJGluamVjdG9yLmdldChfX2dlbmVyaWNTZWFyY2hGaWx0ZXIuZmFjdG9yeU5hbWUpO1xyXG4gICAgICAgIHRoaXMuX3NlYXJjaEZpbHRlciA9IGZhY3RvcnkuZ2V0SW5zdGFuY2UodG9rZW5pemVkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2VhcmNoRmlsdGVyO1xyXG4gICAgfTtcclxuICAgIENhcmRDb250YWluZXJCdWlsZGVyLnByb3RvdHlwZS5zZWFyY2hGaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgdGhpcy5fc2VhcmNoRmlsdGVyID0gZmlsdGVyO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hGaWx0ZXI7XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRhaW5lckJ1aWxkZXIucHJvdG90eXBlLnVzZVBhZ2luZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9wYWdpbmcgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIENhcmRDb250YWluZXJCdWlsZGVyLnByb3RvdHlwZS5hZGRDb2x1bW4gPSBmdW5jdGlvbiAoY29sdW1uKSB7XHJcbiAgICAgICAgdGhpcy5fY29sdW1ucy5wdXNoKGNvbHVtbik7XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRhaW5lckJ1aWxkZXIucHJvdG90eXBlLnVzZUNsaWNrYWJsZUNhcmRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX2NsaWNrYWJsZUNhcmRzID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDYXJkQ29udGFpbmVyQnVpbGRlci5wcm90b3R5cGUudXNlUGVybWFuZW50Rm9vdGVycyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9wZXJtYW5lbnRGb290ZXJzID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBDYXJkQ29udGFpbmVyQnVpbGRlci5wcm90b3R5cGUudXNlU2VsZWN0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuX3NlbGVjdGFibGVDYXJkcyA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRhaW5lckJ1aWxkZXIucHJvdG90eXBlLnJlbmRlckZpbHRlcnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVuZGVyRmlsdGVycyA9IHRydWU7XHJcbiAgICB9O1xyXG4gICAgQ2FyZENvbnRhaW5lckJ1aWxkZXIucHJvdG90eXBlLnNhdmVXaGVuSW52YWxpZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLl9zYXZlV2hlbkludmFsaWQgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDYXJkQ29udGFpbmVyQnVpbGRlci5wcm90b3R5cGUsIFwiZGlzYWJsZVNlbGVjdGlvblwiLCB7XHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zZWxlY3RhYmxlQ2FyZHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZVNlbGVjdGlvbiA9IHZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ2FyZENvbnRhaW5lckJ1aWxkZXIucHJvdG90eXBlLnNldENhcmRDb250YWluZXJQcm9wZXJ0aWVzID0gZnVuY3Rpb24gKGNhcmRDb250YWluZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5fc2VhcmNoRmlsdGVyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmlsdGVycy5wdXNoKHRoaXMuX3NlYXJjaEZpbHRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhcmRDb250YWluZXIuc291cmNlID0gdGhpcy5fZGF0YVNvdXJjZTtcclxuICAgICAgICBjYXJkQ29udGFpbmVyLmZpbHRlcnMgPSB0aGlzLl9maWx0ZXJzO1xyXG4gICAgICAgIGNhcmRDb250YWluZXIuc2VhcmNoRmlsdGVyID0gdGhpcy5fc2VhcmNoRmlsdGVyO1xyXG4gICAgICAgIGNhcmRDb250YWluZXIucGFnaW5nID0gdGhpcy5fcGFnaW5nO1xyXG4gICAgICAgIGNhcmRDb250YWluZXIuY29sdW1ucyA9IHRoaXMuX2NvbHVtbnM7XHJcbiAgICAgICAgY2FyZENvbnRhaW5lci5jb250YWluZXJEYXRhID0gdGhpcy5jb250YWluZXJEYXRhO1xyXG4gICAgICAgIGNhcmRDb250YWluZXIuY2xpY2thYmxlQ2FyZHMgPSB0aGlzLl9jbGlja2FibGVDYXJkcztcclxuICAgICAgICBjYXJkQ29udGFpbmVyLm1heENvbHVtblNvcnRzID0gdGhpcy5tYXhDb2x1bW5Tb3J0cztcclxuICAgICAgICBjYXJkQ29udGFpbmVyLnBlcm1hbmVudEZvb3RlcnMgPSB0aGlzLl9wZXJtYW5lbnRGb290ZXJzO1xyXG4gICAgICAgIGNhcmRDb250YWluZXIuc2VsZWN0YWJsZUNhcmRzID0gdGhpcy5fc2VsZWN0YWJsZUNhcmRzO1xyXG4gICAgICAgIGNhcmRDb250YWluZXIuZGlzYWJsZVNlbGVjdGlvbiA9IHRoaXMuX2Rpc2FibGVTZWxlY3Rpb247XHJcbiAgICAgICAgY2FyZENvbnRhaW5lci5yZW5kZXJGaWx0ZXJzID0gdGhpcy5fcmVuZGVyRmlsdGVycztcclxuICAgICAgICBjYXJkQ29udGFpbmVyLnNhdmVXaGVuSW52YWxpZCA9IHRoaXMuX3NhdmVXaGVuSW52YWxpZDtcclxuICAgICAgICBpZiAoY2FyZENvbnRhaW5lci5jYXJkQ29udHJvbGxlciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNhcmRDb250YWluZXIuY2FyZENvbnRyb2xsZXIgPSB0aGlzLmNhcmRDb250cm9sbGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FyZENvbnRhaW5lci5jYXJkQ29udHJvbGxlckFzID09IG51bGwpIHtcclxuICAgICAgICAgICAgY2FyZENvbnRhaW5lci5jYXJkQ29udHJvbGxlckFzID0gdGhpcy5jYXJkQ29udHJvbGxlckFzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2FyZENvbnRhaW5lci5jYXJkQXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjYXJkQ29udGFpbmVyLmNhcmRBcyA9IHRoaXMuY2FyZEFzO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gQ2FyZENvbnRhaW5lckJ1aWxkZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuQ2FyZENvbnRhaW5lckJ1aWxkZXIgPSBDYXJkQ29udGFpbmVyQnVpbGRlcjtcclxudmFyIERhdGFTb3VyY2VCdWlsZGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERhdGFTb3VyY2VCdWlsZGVyKCRpbmplY3RvciwgcGFyZW50KSB7XHJcbiAgICAgICAgdGhpcy4kaW5qZWN0b3IgPSAkaW5qZWN0b3I7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSB0aGlzLiRpbmplY3Rvci5nZXQoZGF0YVNvdXJjZXMuc2ltcGxlRGF0YVNvdXJjZS5mYWN0b3J5TmFtZSk7XHJcbiAgICAgICAgcGFyZW50Ll9kYXRhU291cmNlID0gZmFjdG9yeS5nZXRJbnN0YW5jZShbXSk7XHJcbiAgICB9XHJcbiAgICBEYXRhU291cmNlQnVpbGRlci5wcm90b3R5cGUuYnVpbGRTaW1wbGVEYXRhU291cmNlID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgZmFjdG9yeSA9IHRoaXMuJGluamVjdG9yLmdldChkYXRhU291cmNlcy5zaW1wbGVEYXRhU291cmNlLmZhY3RvcnlOYW1lKTtcclxuICAgICAgICB0aGlzLnBhcmVudC5fZGF0YVNvdXJjZSA9IGZhY3RvcnkuZ2V0SW5zdGFuY2UoZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Ll9kYXRhU291cmNlO1xyXG4gICAgfTtcclxuICAgIERhdGFTb3VyY2VCdWlsZGVyLnByb3RvdHlwZS5idWlsZERhdGFTZXJ2aWNlRGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChnZXREYXRhU2V0KSB7XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSB0aGlzLiRpbmplY3Rvci5nZXQoZGF0YVNvdXJjZXMuZGF0YVNlcnZpY2VEYXRhU291cmNlLmZhY3RvcnlOYW1lKTtcclxuICAgICAgICB0aGlzLnBhcmVudC5fZGF0YVNvdXJjZSA9IGZhY3RvcnkuZ2V0SW5zdGFuY2UoZ2V0RGF0YVNldCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Ll9kYXRhU291cmNlO1xyXG4gICAgfTtcclxuICAgIERhdGFTb3VyY2VCdWlsZGVyLnByb3RvdHlwZS5idWlsZENsaWVudFNlcnZlckRhdGFTb3VyY2UgPSBmdW5jdGlvbiAoZ2V0RGF0YVNldCwgZ2V0RmlsdGVyTW9kZWwsIHZhbGlkYXRlTW9kZWwpIHtcclxuICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZCh0aGlzLnBhcmVudC5fc2VhcmNoRmlsdGVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhcmVudC51c2VTZWFyY2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSB0aGlzLiRpbmplY3Rvci5nZXQoZGF0YVNvdXJjZXMuY2xpZW50U2VydmVyRGF0YVNvdXJjZS5mYWN0b3J5TmFtZSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQuX2RhdGFTb3VyY2UgPSBmYWN0b3J5LmdldEluc3RhbmNlKGdldERhdGFTZXQsIHRoaXMucGFyZW50Ll9zZWFyY2hGaWx0ZXIsIGdldEZpbHRlck1vZGVsLCB2YWxpZGF0ZU1vZGVsKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuX2RhdGFTb3VyY2U7XHJcbiAgICB9O1xyXG4gICAgRGF0YVNvdXJjZUJ1aWxkZXIucHJvdG90eXBlLmJ1aWxkU2VydmVyU2lkZURhdGFTb3VyY2UgPSBmdW5jdGlvbiAoZ2V0RGF0YVNldCkge1xyXG4gICAgICAgIHZhciBmYWN0b3J5ID0gdGhpcy4kaW5qZWN0b3IuZ2V0KGRhdGFTb3VyY2VzLnNlcnZlclNpZGVEYXRhU291cmNlLmZhY3RvcnlOYW1lKTtcclxuICAgICAgICB0aGlzLnBhcmVudC5fZGF0YVNvdXJjZSA9IGZhY3RvcnkuZ2V0SW5zdGFuY2UoZ2V0RGF0YVNldCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Ll9kYXRhU291cmNlO1xyXG4gICAgfTtcclxuICAgIERhdGFTb3VyY2VCdWlsZGVyLnByb3RvdHlwZS5idWlsZFNtYXJ0RGF0YVNvdXJjZSA9IGZ1bmN0aW9uIChnZXREYXRhU2V0KSB7XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSB0aGlzLiRpbmplY3Rvci5nZXQoZGF0YVNvdXJjZXMuc21hcnREYXRhU291cmNlLmZhY3RvcnlOYW1lKTtcclxuICAgICAgICB0aGlzLnBhcmVudC5fZGF0YVNvdXJjZSA9IGZhY3RvcnkuZ2V0SW5zdGFuY2UoZ2V0RGF0YVNldCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50Ll9kYXRhU291cmNlO1xyXG4gICAgfTtcclxuICAgIERhdGFTb3VyY2VCdWlsZGVyLnByb3RvdHlwZS5idWlsZEN1c3RvbURhdGFTb3VyY2UgPSBmdW5jdGlvbiAoZGF0YVNvdXJjZSkge1xyXG4gICAgICAgIHRoaXMucGFyZW50Ll9kYXRhU291cmNlID0gZGF0YVNvdXJjZTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuX2RhdGFTb3VyY2U7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIERhdGFTb3VyY2VCdWlsZGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkRhdGFTb3VyY2VCdWlsZGVyID0gRGF0YVNvdXJjZUJ1aWxkZXI7XHJcbnZhciBGaWx0ZXJCdWlsZGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEZpbHRlckJ1aWxkZXIoJGluamVjdG9yLCBwYXJlbnQpIHtcclxuICAgICAgICB0aGlzLiRpbmplY3RvciA9ICRpbmplY3RvcjtcclxuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB0aGlzLnBhcmVudC5fZmlsdGVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgRmlsdGVyQnVpbGRlci5wcm90b3R5cGUuYnVpbGRGaWx0ZXJHcm91cCA9IGZ1bmN0aW9uIChzZXR0aW5ncykge1xyXG4gICAgICAgIHZhciBmYWN0b3J5ID0gdGhpcy4kaW5qZWN0b3IuZ2V0KGZpbHRlckdyb3VwLmZhY3RvcnlOYW1lKTtcclxuICAgICAgICB2YXIgZmlsdGVyID0gZmFjdG9yeS5nZXRJbnN0YW5jZShzZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQuX2ZpbHRlcnMucHVzaChmaWx0ZXIpO1xyXG4gICAgICAgIHJldHVybiBmaWx0ZXI7XHJcbiAgICB9O1xyXG4gICAgRmlsdGVyQnVpbGRlci5wcm90b3R5cGUuYnVpbGRNb2RlRmlsdGVyR3JvdXAgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgZmFjdG9yeSA9IHRoaXMuJGluamVjdG9yLmdldChmaWx0ZXJHcm91cC5tb2RlRmlsdGVyR3JvdXAuZmFjdG9yeU5hbWUpO1xyXG4gICAgICAgIHZhciBmaWx0ZXIgPSBmYWN0b3J5LmdldEluc3RhbmNlKHNldHRpbmdzKTtcclxuICAgICAgICB0aGlzLnBhcmVudC5fZmlsdGVycy5wdXNoKGZpbHRlcik7XHJcbiAgICAgICAgcmV0dXJuIGZpbHRlcjtcclxuICAgIH07XHJcbiAgICBGaWx0ZXJCdWlsZGVyLnByb3RvdHlwZS5idWlsZFJhbmdlRmlsdGVyR3JvdXAgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgZmFjdG9yeSA9IHRoaXMuJGluamVjdG9yLmdldChmaWx0ZXJHcm91cC5yYW5nZUZpbHRlckdyb3VwLmZhY3RvcnlOYW1lKTtcclxuICAgICAgICB2YXIgZmlsdGVyID0gZmFjdG9yeS5nZXRJbnN0YW5jZShzZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQuX2ZpbHRlcnMucHVzaChmaWx0ZXIpO1xyXG4gICAgICAgIHJldHVybiBmaWx0ZXI7XHJcbiAgICB9O1xyXG4gICAgRmlsdGVyQnVpbGRlci5wcm90b3R5cGUuYnVpbGRTZWxlY3RGaWx0ZXIgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgZmFjdG9yeSA9IHRoaXMuJGluamVjdG9yLmdldChzZWxlY3RGaWx0ZXIuZmFjdG9yeU5hbWUpO1xyXG4gICAgICAgIHZhciBmaWx0ZXIgPSBmYWN0b3J5LmdldEluc3RhbmNlKHNldHRpbmdzKTtcclxuICAgICAgICB0aGlzLnBhcmVudC5fZmlsdGVycy5wdXNoKGZpbHRlcik7XHJcbiAgICAgICAgcmV0dXJuIGZpbHRlcjtcclxuICAgIH07XHJcbiAgICBGaWx0ZXJCdWlsZGVyLnByb3RvdHlwZS5idWlsZERhdGVGaWx0ZXIgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgZmFjdG9yeSA9IHRoaXMuJGluamVjdG9yLmdldChkYXRlRmlsdGVyLmZhY3RvcnlOYW1lKTtcclxuICAgICAgICB2YXIgZmlsdGVyID0gZmFjdG9yeS5nZXRJbnN0YW5jZShzZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQuX2ZpbHRlcnMucHVzaChmaWx0ZXIpO1xyXG4gICAgICAgIHJldHVybiBmaWx0ZXI7XHJcbiAgICB9O1xyXG4gICAgRmlsdGVyQnVpbGRlci5wcm90b3R5cGUuYnVpbGRDb2x1bW5TZWFyY2hGaWx0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSB0aGlzLiRpbmplY3Rvci5nZXQoY29sdW1uU2VhcmNoRmlsdGVyX3NlcnZpY2VfMS5mYWN0b3J5TmFtZSk7XHJcbiAgICAgICAgdmFyIGZpbHRlciA9IGZhY3RvcnkuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICB0aGlzLnBhcmVudC5fZmlsdGVycy5wdXNoKGZpbHRlcik7XHJcbiAgICAgICAgcmV0dXJuIGZpbHRlcjtcclxuICAgIH07XHJcbiAgICBGaWx0ZXJCdWlsZGVyLnByb3RvdHlwZS5hZGRDdXN0b21GaWx0ZXIgPSBmdW5jdGlvbiAoZmlsdGVyKSB7XHJcbiAgICAgICAgdGhpcy5wYXJlbnQuX2ZpbHRlcnMucHVzaChmaWx0ZXIpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBGaWx0ZXJCdWlsZGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkZpbHRlckJ1aWxkZXIgPSBGaWx0ZXJCdWlsZGVyO1xyXG5jYXJkQ29udGFpbmVyQnVpbGRlckZhY3RvcnkuJGluamVjdCA9IFsnJGluamVjdG9yJ107XHJcbmZ1bmN0aW9uIGNhcmRDb250YWluZXJCdWlsZGVyRmFjdG9yeSgkaW5qZWN0b3IpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdXNlTW9jazogZmFsc2UsXHJcbiAgICAgICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudXNlTW9jayA/IHRoaXMubW9ja0J1aWxkZXIgOiBuZXcgQ2FyZENvbnRhaW5lckJ1aWxkZXIoJGluamVjdG9yKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1vY2tCdWlsZGVyOiBuZXcgQ2FyZENvbnRhaW5lckJ1aWxkZXIoJGluamVjdG9yKSxcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5jYXJkQ29udGFpbmVyQnVpbGRlckZhY3RvcnkgPSBjYXJkQ29udGFpbmVyQnVpbGRlckZhY3Rvcnk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVkyRnlaRU52Ym5SaGFXNWxja0oxYVd4a1pYSXVjMlZ5ZG1salpTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW1OaGNtUkRiMjUwWVdsdVpYSkNkV2xzWkdWeUxuTmxjblpwWTJVdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzV1VGQldTeERRVUZETzBGQlIySXNTVUZCV1N4RFFVRkRMRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGRk5VSXNOa05CUVd0RExEaENRVUU0UWl4RFFVRkRMRU5CUVVFN1FVRkRha1VzU1VGQlR5eHhRa0ZCY1VJc1IwRkJSeXgxUTBGQlVTeERRVUZETEcxQ1FVRnRRaXhEUVVGRE8wRkJTVFZFTEVsQlFWa3NWMEZCVnl4WFFVRk5MR3REUVVGclF5eERRVUZETEVOQlFVRTdRVUZEYUVVc1NVRkJXU3hYUVVGWExGZEJRVTBzTUVOQlFUQkRMRU5CUVVNc1EwRkJRVHRCUVVONFJTeEpRVUZaTEZsQlFWa3NWMEZCVFN3MFEwRkJORU1zUTBGQlF5eERRVUZCTzBGQlF6TkZMRWxCUVZrc1ZVRkJWU3hYUVVGTkxIZERRVUYzUXl4RFFVRkRMRU5CUVVFN1FVRkRja1VzTWtOQlFYZEhMSGxFUVVGNVJDeERRVUZETEVOQlFVRTdRVUYzUW5aS0xHMUNRVUZYTEVkQlFWY3NjMEpCUVhOQ0xFTkJRVU03UVVGeFJYaEVPMGxCZFVKRExEaENRVUZ2UWl4VFFVRjNRenRSUVVGNFF5eGpRVUZUTEVkQlFWUXNVMEZCVXl4RFFVRXJRanRSUVVNelJDeEpRVUZKTEVOQlFVTXNWVUZCVlN4SFFVRkhMRWxCUVVrc2FVSkJRV2xDTEVOQlFVTXNVMEZCVXl4RlFVRkZMRWxCUVVrc1EwRkJReXhEUVVGRE8xRkJRM3BFTEVsQlFVa3NRMEZCUXl4UFFVRlBMRWRCUVVjc1NVRkJTU3hoUVVGaExFTkJRVU1zVTBGQlV5eEZRVUZGTEVsQlFVa3NRMEZCUXl4RFFVRkRPMUZCUTJ4RUxFbEJRVWtzUTBGQlF5eFJRVUZSTEVkQlFVY3NSVUZCUlN4RFFVRkRPMGxCUTNCQ0xFTkJRVU03U1VGRlJDeDNRMEZCVXl4SFFVRlVMRlZCUVZVc1UwRkJiVUk3VVVGRE5VSXNTVUZCU1N4UFFVRlBMRWRCUVhORUxFbEJRVWtzUTBGQlF5eFRRVUZUTEVOQlFVTXNSMEZCUnl4RFFVRk5MSEZDUVVGeFFpeERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRPMUZCUXpWSUxFbEJRVWtzUTBGQlF5eGhRVUZoTEVkQlFVY3NUMEZCVHl4RFFVRkRMRmRCUVZjc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF6dFJRVU53UkN4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExHRkJRV0VzUTBGQlF6dEpRVU16UWl4RFFVRkRPMGxCUlVRc01rTkJRVmtzUjBGQldpeFZRVUZoTEUxQlFUUkNPMUZCUTNoRExFbEJRVWtzUTBGQlF5eGhRVUZoTEVkQlFVY3NUVUZCVFN4RFFVRkRPMUZCUXpWQ0xFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNZVUZCWVN4RFFVRkRPMGxCUXpOQ0xFTkJRVU03U1VGRlJDeDNRMEZCVXl4SFFVRlVPMUZCUTBNc1NVRkJTU3hEUVVGRExFOUJRVThzUjBGQlJ5eEpRVUZKTEVOQlFVTTdTVUZEY2tJc1EwRkJRenRKUVVWRUxIZERRVUZUTEVkQlFWUXNWVUZCY1VJc1RVRkJNRUk3VVVGRE9VTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTTdTVUZETlVJc1EwRkJRenRKUVVWRUxHZEVRVUZwUWl4SFFVRnFRanRSUVVORExFbEJRVWtzUTBGQlF5eGxRVUZsTEVkQlFVY3NTVUZCU1N4RFFVRkRPMGxCUXpkQ0xFTkJRVU03U1VGRlJDeHJSRUZCYlVJc1IwRkJia0k3VVVGRFF5eEpRVUZKTEVOQlFVTXNhVUpCUVdsQ0xFZEJRVWNzU1VGQlNTeERRVUZETzBsQlF5OUNMRU5CUVVNN1NVRkZSQ3d5UTBGQldTeEhRVUZhTzFGQlEwTXNTVUZCU1N4RFFVRkRMR2RDUVVGblFpeEhRVUZITEVsQlFVa3NRMEZCUXp0SlFVTTVRaXhEUVVGRE8wbEJSVVFzTkVOQlFXRXNSMEZCWWp0UlFVTkRMRWxCUVVrc1EwRkJReXhqUVVGakxFZEJRVWNzU1VGQlNTeERRVUZETzBsQlF6VkNMRU5CUVVNN1NVRkZSQ3c0UTBGQlpTeEhRVUZtTzFGQlEwTXNTVUZCU1N4RFFVRkRMR2RDUVVGblFpeEhRVUZITEVsQlFVa3NRMEZCUXp0SlFVTTVRaXhEUVVGRE8wbEJSVVFzYzBKQlFVa3NhMFJCUVdkQ08yRkJRWEJDTEZWQlFYRkNMRXRCUVRoQ08xbEJRMnhFTEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExHZENRVUZuUWl4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRE5VSXNTVUZCU1N4RFFVRkRMRmxCUVZrc1JVRkJSU3hEUVVGRE8xbEJRM0pDTEVOQlFVTTdXVUZGUkN4SlFVRkpMRU5CUVVNc2FVSkJRV2xDTEVkQlFVY3NTMEZCU3l4RFFVRkRPMUZCUTJoRExFTkJRVU03T3p0UFFVRkJPMGxCUlVRc2VVUkJRVEJDTEVkQlFURkNMRlZCUVRKQ0xHRkJRWE5ETzFGQlEyaEZMRVZCUVVVc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eGhRVUZoTEVsQlFVa3NTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOb1F5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zWVVGQllTeERRVUZETEVOQlFVTTdVVUZEZUVNc1EwRkJRenRSUVVWRUxHRkJRV0VzUTBGQlF5eE5RVUZOTEVkQlFVY3NTVUZCU1N4RFFVRkRMRmRCUVZjc1EwRkJRenRSUVVONFF5eGhRVUZoTEVOQlFVTXNUMEZCVHl4SFFVRkhMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU03VVVGRGRFTXNZVUZCWVN4RFFVRkRMRmxCUVZrc1IwRkJSeXhKUVVGSkxFTkJRVU1zWVVGQllTeERRVUZETzFGQlEyaEVMR0ZCUVdFc1EwRkJReXhOUVVGTkxFZEJRVWNzU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXp0UlFVTndReXhoUVVGaExFTkJRVU1zVDBGQlR5eEhRVUZITEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNN1VVRkRkRU1zWVVGQllTeERRVUZETEdGQlFXRXNSMEZCUnl4SlFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRE8xRkJRMnBFTEdGQlFXRXNRMEZCUXl4alFVRmpMRWRCUVVjc1NVRkJTU3hEUVVGRExHVkJRV1VzUTBGQlF6dFJRVU53UkN4aFFVRmhMRU5CUVVNc1kwRkJZeXhIUVVGSExFbEJRVWtzUTBGQlF5eGpRVUZqTEVOQlFVTTdVVUZEYmtRc1lVRkJZU3hEUVVGRExHZENRVUZuUWl4SFFVRkhMRWxCUVVrc1EwRkJReXhwUWtGQmFVSXNRMEZCUXp0UlFVTjRSQ3hoUVVGaExFTkJRVU1zWlVGQlpTeEhRVUZITEVsQlFVa3NRMEZCUXl4blFrRkJaMElzUTBGQlF6dFJRVU4wUkN4aFFVRmhMRU5CUVVNc1owSkJRV2RDTEVkQlFVY3NTVUZCU1N4RFFVRkRMR2xDUVVGcFFpeERRVUZETzFGQlEzaEVMR0ZCUVdFc1EwRkJReXhoUVVGaExFZEJRVWNzU1VGQlNTeERRVUZETEdOQlFXTXNRMEZCUXp0UlFVTnNSQ3hoUVVGaExFTkJRVU1zWlVGQlpTeEhRVUZITEVsQlFVa3NRMEZCUXl4blFrRkJaMElzUTBGQlF6dFJRVVYwUkN4RlFVRkZMRU5CUVVNc1EwRkJReXhoUVVGaExFTkJRVU1zWTBGQll5eEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRNVU1zWVVGQllTeERRVUZETEdOQlFXTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1kwRkJZeXhEUVVGRE8xRkJRM0JFTEVOQlFVTTdVVUZEUkN4RlFVRkZMRU5CUVVNc1EwRkJReXhoUVVGaExFTkJRVU1zWjBKQlFXZENMRWxCUVVrc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU0xUXl4aFFVRmhMRU5CUVVNc1owSkJRV2RDTEVkQlFVY3NTVUZCU1N4RFFVRkRMR2RDUVVGblFpeERRVUZETzFGQlEzaEVMRU5CUVVNN1VVRkRSQ3hGUVVGRkxFTkJRVU1zUTBGQlF5eGhRVUZoTEVOQlFVTXNUVUZCVFN4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGJFTXNZVUZCWVN4RFFVRkRMRTFCUVUwc1IwRkJSeXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETzFGQlEzQkRMRU5CUVVNN1NVRkRSaXhEUVVGRE8wbEJRMFlzTWtKQlFVTTdRVUZCUkN4RFFVRkRMRUZCZWtkRUxFbEJlVWRETzBGQmVrZFpMRFJDUVVGdlFpeDFRa0Y1UjJoRExFTkJRVUU3UVVGRlJEdEpRVU5ETERKQ1FVRnZRaXhUUVVGM1F5eEZRVU5vUkN4TlFVRTBRanRSUVVSd1FpeGpRVUZUTEVkQlFWUXNVMEZCVXl4RFFVRXJRanRSUVVOb1JDeFhRVUZOTEVkQlFVNHNUVUZCVFN4RFFVRnpRanRSUVVOMlF5eEpRVUZKTEU5QlFVOHNSMEZCTUVRc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eEhRVUZITEVOQlFVMHNWMEZCVnl4RFFVRkRMR2RDUVVGblFpeERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRPMUZCUTNaSkxFMUJRVTBzUTBGQlF5eFhRVUZYTEVkQlFVY3NUMEZCVHl4RFFVRkRMRmRCUVZjc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF6dEpRVU01UXl4RFFVRkRPMGxCUlVRc2FVUkJRWEZDTEVkQlFYSkNMRlZCUVdsRExFbEJRV2xDTzFGQlEycEVMRWxCUVVrc1QwRkJUeXhIUVVFd1JDeEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRWRCUVVjc1EwRkJUU3hYUVVGWExFTkJRVU1zWjBKQlFXZENMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU03VVVGRGRra3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhYUVVGWExFZEJRVWNzVDBGQlR5eERRVUZETEZkQlFWY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRSUVVOd1JDeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhYUVVGWExFTkJRVU03U1VGRGFFTXNRMEZCUXp0SlFVVkVMSE5FUVVFd1FpeEhRVUV4UWl4VlFVRnpReXhWUVVGeFJEdFJRVU14Uml4SlFVRkpMRTlCUVU4c1IwRkJiMFVzU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXl4SFFVRkhMRU5CUVUwc1YwRkJWeXhEUVVGRExIRkNRVUZ4UWl4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRE8xRkJRM1JLTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1YwRkJWeXhIUVVGSExFOUJRVThzUTBGQlF5eFhRVUZYTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNN1VVRkRNVVFzVFVGQlRTeERRVUZOTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1YwRkJWeXhEUVVGRE8wbEJRM0pETEVOQlFVTTdTVUZGUkN4MVJFRkJNa0lzUjBGQk0wSXNWVUZCZFVNc1ZVRkJkVVFzUlVGRGJrWXNZMEZCTWtNc1JVRkRNME1zWVVGQkswTTdVVUZEZWtRc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZkQlFWY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExHRkJRV0VzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTTVReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEZOQlFWTXNSVUZCUlN4RFFVRkRPMUZCUTNwQ0xFTkJRVU03VVVGRlJDeEpRVUZKTEU5QlFVOHNSMEZCYzBVc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eEhRVUZITEVOQlFVMHNWMEZCVnl4RFFVRkRMSE5DUVVGelFpeERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRPMUZCUTNwS0xFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNWMEZCVnl4SFFVRkhMRTlCUVU4c1EwRkJReXhYUVVGWExFTkJRVU1zVlVGQlZTeEZRVUZGTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1lVRkJZU3hGUVVGRkxHTkJRV01zUlVGQlJTeGhRVUZoTEVOQlFVTXNRMEZCUXp0UlFVTndTQ3hOUVVGTkxFTkJRVTBzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4WFFVRlhMRU5CUVVNN1NVRkRja01zUTBGQlF6dEpRVVZFTEhGRVFVRjVRaXhIUVVGNlFpeFZRVUZ4UXl4VlFVRTBRenRSUVVOb1JpeEpRVUZKTEU5QlFVOHNSMEZCYTBVc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eEhRVUZITEVOQlFVMHNWMEZCVnl4RFFVRkRMRzlDUVVGdlFpeERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRPMUZCUTI1S0xFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNWMEZCVnl4SFFVRkhMRTlCUVU4c1EwRkJReXhYUVVGWExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTTdVVUZETVVRc1RVRkJUU3hEUVVGTkxFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNWMEZCVnl4RFFVRkRPMGxCUTNKRExFTkJRVU03U1VGRlJDeG5SRUZCYjBJc1IwRkJjRUlzVlVGQlowTXNWVUZCTkVNN1VVRkRNMFVzU1VGQlNTeFBRVUZQTEVkQlFYZEVMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zUjBGQlJ5eERRVUZOTEZkQlFWY3NRMEZCUXl4bFFVRmxMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU03VVVGRGNFa3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhYUVVGWExFZEJRVWNzVDBGQlR5eERRVUZETEZkQlFWY3NRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJRenRSUVVNeFJDeE5RVUZOTEVOQlFVMHNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhYUVVGWExFTkJRVU03U1VGRGNrTXNRMEZCUXp0SlFVVkVMR2xFUVVGeFFpeEhRVUZ5UWl4VlFVRnBReXhWUVVGclF6dFJRVU5zUlN4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExGZEJRVmNzUjBGQlJ5eFZRVUZWTEVOQlFVTTdVVUZEY2tNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNWMEZCVnl4RFFVRkRPMGxCUTJoRExFTkJRVU03U1VGRFJpeDNRa0ZCUXp0QlFVRkVMRU5CUVVNc1FVRXZRMFFzU1VFclEwTTdRVUV2UTFrc2VVSkJRV2xDTEc5Q1FTdEROMElzUTBGQlFUdEJRVVZFTzBsQlEwTXNkVUpCUVc5Q0xGTkJRWGRETEVWQlEyaEVMRTFCUVRSQ08xRkJSSEJDTEdOQlFWTXNSMEZCVkN4VFFVRlRMRU5CUVN0Q08xRkJRMmhFTEZkQlFVMHNSMEZCVGl4TlFVRk5MRU5CUVhOQ08xRkJRM1pETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hIUVVGSExFVkJRVVVzUTBGQlF6dEpRVU16UWl4RFFVRkRPMGxCUlVRc2QwTkJRV2RDTEVkQlFXaENMRlZCUVdsQ0xGRkJRVEJETzFGQlF6RkVMRWxCUVVrc1QwRkJUeXhIUVVGdlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRWRCUVVjc1EwRkJUU3hYUVVGWExFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTTdVVUZEYUVjc1NVRkJTU3hOUVVGTkxFZEJRVFpDTEU5QlFVOHNRMEZCUXl4WFFVRlhMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU03VVVGRGNrVXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4RFFVRkRPMUZCUTJ4RExFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTTdTVUZEWml4RFFVRkRPMGxCUlVRc05FTkJRVzlDTEVkQlFYQkNMRlZCUVdkRExGRkJRVFpETzFGQlF6VkZMRWxCUVVrc1QwRkJUeXhIUVVGM1JDeEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRWRCUVVjc1EwRkJUU3hYUVVGWExFTkJRVU1zWlVGQlpTeERRVUZETEZkQlFWY3NRMEZCUXl4RFFVRkRPMUZCUTNCSkxFbEJRVWtzVFVGQlRTeEhRVUZwUkN4UFFVRlBMRU5CUVVNc1YwRkJWeXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFGQlEzcEdMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVVVGQlVTeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRenRSUVVOc1F5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRPMGxCUTJZc1EwRkJRenRKUVVWRUxEWkRRVUZ4UWl4SFFVRnlRaXhWUVVGcFF5eFJRVUU0UXp0UlFVTTVSU3hKUVVGSkxFOUJRVThzUjBGQk1FUXNTVUZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhIUVVGSExFTkJRVTBzVjBGQlZ5eERRVUZETEdkQ1FVRm5RaXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETzFGQlEzWkpMRWxCUVVrc1RVRkJUU3hIUVVGdFJDeFBRVUZQTEVOQlFVTXNWMEZCVnl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8xRkJRek5HTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXp0UlFVTnNReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETzBsQlEyWXNRMEZCUXp0SlFVVkVMSGxEUVVGcFFpeEhRVUZxUWl4VlFVRXdReXhSUVVGMVJEdFJRVU5vUnl4SlFVRkpMRTlCUVU4c1IwRkJjME1zU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXl4SFFVRkhMRU5CUVUwc1dVRkJXU3hEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETzFGQlEyNUhMRWxCUVVrc1RVRkJUU3hIUVVFMlFpeFBRVUZQTEVOQlFVTXNWMEZCVnl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8xRkJRM0pGTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUXp0UlFVTnNReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETzBsQlEyWXNRMEZCUXp0SlFVVkVMSFZEUVVGbExFZEJRV1lzVlVGQlowSXNVVUZCZFVNN1VVRkRkRVFzU1VGQlNTeFBRVUZQTEVkQlFXdERMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zUjBGQlJ5eERRVUZOTEZWQlFWVXNRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJRenRSUVVNM1JpeEpRVUZKTEUxQlFVMHNSMEZCWjBJc1QwRkJUeXhEUVVGRExGZEJRVmNzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXp0UlFVTjRSQ3hKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEZGQlFWRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU03VVVGRGJFTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJRenRKUVVObUxFTkJRVU03U1VGRlJDd3JRMEZCZFVJc1IwRkJka0k3VVVGRFF5eEpRVUZKTEU5QlFVOHNSMEZCSzBJc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eEhRVUZITEVOQlFVMHNkME5CUVhWQ0xFTkJRVU1zUTBGQlF6dFJRVU16Uml4SlFVRkpMRTFCUVUwc1IwRkJkMElzVDBGQlR5eERRVUZETEZkQlFWY3NSVUZCUlN4RFFVRkRPMUZCUTNoRUxFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNVVUZCVVN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF6dFJRVU5zUXl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRE8wbEJRMllzUTBGQlF6dEpRVVZFTEhWRFFVRmxMRWRCUVdZc1ZVRkJaMElzVFVGQmRVSTdVVUZEZEVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8wbEJRMjVETEVOQlFVTTdTVUZEUml4dlFrRkJRenRCUVVGRUxFTkJRVU1zUVVGdVJFUXNTVUZ0UkVNN1FVRnVSRmtzY1VKQlFXRXNaMEpCYlVSNlFpeERRVUZCTzBGQlVVUXNNa0pCUVRKQ0xFTkJRVU1zVDBGQlR5eEhRVUZITEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNN1FVRkRjRVFzY1VOQlFUUkRMRk5CUVhkRE8wbEJRMjVHTEUxQlFVMHNRMEZCUXp0UlFVTk9MRTlCUVU4c1JVRkJSU3hMUVVGTE8xRkJRMlFzVjBGQlZ6dFpRVU5XTEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhIUVVGSExFbEJRVWtzUTBGQlF5eFhRVUZYTEVkQlFVY3NTVUZCU1N4dlFrRkJiMElzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXp0UlFVTTVSU3hEUVVGRE8xRkJRMFFzVjBGQlZ5eEZRVUZGTEVsQlFVa3NiMEpCUVc5Q0xFTkJRVU1zVTBGQlV5eERRVUZETzB0QlEyaEVMRU5CUVVNN1FVRkRTQ3hEUVVGRE8wRkJVbVVzYlVOQlFUSkNMRGhDUVZFeFF5eERRVUZCSW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2NhcmRDb250YWluZXJCdWlsZGVyLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3Mvbm9kZS9ub2RlLmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxuZXhwb3J0cy5oZWFkZXJDb21wb25lbnROYW1lID0gJ3JsRGVmYXVsdENhcmRDb250YWluZXJIZWFkZXInO1xyXG5leHBvcnRzLmZvb3RlckNvbXBvbmVudE5hbWUgPSAncmxEZWZhdWx0Q2FyZENvbnRhaW5lckZvb3Rlcic7XHJcbmV4cG9ydHMuZGVmYXVsdENvbnRhaW5lckhlYWRlciA9IHtcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL2RlZmF1bHRDYXJkQ29udGFpbmVySGVhZGVyLmh0bWwnKSxcclxufTtcclxuZXhwb3J0cy5kZWZhdWx0Q29udGFpbmVyRm9vdGVyID0ge1xyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vZGVmYXVsdENhcmRDb250YWluZXJGb290ZXIuaHRtbCcpLFxyXG59O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laR1ZtWVhWc2RFTnZiWEJ2Ym1WdWRITXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKa1pXWmhkV3gwUTI5dGNHOXVaVzUwY3k1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3d5UkVGQk1rUTdRVUZGTTBRc1dVRkJXU3hEUVVGRE8wRkJTVVlzTWtKQlFXMUNMRWRCUVZjc09FSkJRVGhDTEVOQlFVTTdRVUZETjBRc01rSkJRVzFDTEVkQlFWY3NPRUpCUVRoQ0xFTkJRVU03UVVGRk4wUXNPRUpCUVhOQ0xFZEJRVGhDTzBsQlF6bEVMRkZCUVZFc1JVRkJSU3hQUVVGUExFTkJRVU1zYlVOQlFXMURMRU5CUVVNN1EwRkRkRVFzUTBGQlF6dEJRVVZUTERoQ1FVRnpRaXhIUVVFNFFqdEpRVU01UkN4UlFVRlJMRVZCUVVVc1QwRkJUeXhEUVVGRExHMURRVUZ0UXl4RFFVRkRPME5CUTNSRUxFTkJRVU1pZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RlZmF1bHRDb21wb25lbnRzLmpzXG4gKiogbW9kdWxlIGlkID0gMTAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwicm93XFxcIj5cXHJcXG5cXHQ8ZGl2IGNsYXNzPVxcXCJjb2wteHMtMTIgY29sLXNtLTlcXFwiPlxcclxcblxcdFxcdDxybC1jYXJkLXNlYXJjaD48L3JsLWNhcmQtc2VhcmNoPlxcclxcblxcdDwvZGl2PlxcclxcblxcdDxkaXYgY2xhc3M9XFxcImhpZGRlbi14cyBjb2wtc20tM1xcXCI+XFxyXFxuXFx0XFx0PHJsLXBhZ2Utc2l6ZT48L3JsLXBhZ2Utc2l6ZT5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RlZmF1bHRDYXJkQ29udGFpbmVySGVhZGVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxMDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJyb3dcXFwiPlxcclxcblxcdDxkaXYgbmctaWY9XFxcIiFjYXJkQ29udGFpbmVyLnNlbGVjdGFibGVDYXJkc1xcXCIgY2xhc3M9XFxcImNvbC1zbS02XFxcIj5cXHJcXG5cXHRcXHQ8cmwtaXRlbS1jb3VudD48L3JsLWl0ZW0tY291bnQ+XFxyXFxuXFx0PC9kaXY+XFxyXFxuXFx0PHNwYW4gbmctaWY9XFxcImNhcmRDb250YWluZXIuc2VsZWN0YWJsZUNhcmRzXFxcIj5cXHJcXG5cXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjb2wtc20tM1xcXCI+XFxyXFxuXFx0XFx0XFx0PHJsLXNlbGVjdGlvbi1jb250cm9sPjwvcmwtc2VsZWN0aW9uLWNvbnRyb2w+XFxyXFxuXFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0PGRpdiBjbGFzcz1cXFwiY29sLXNtLTNcXFwiPlxcclxcblxcdFxcdFxcdDxybC1pdGVtLWNvdW50PjwvcmwtaXRlbS1jb3VudD5cXHJcXG5cXHRcXHQ8L2Rpdj5cXHJcXG5cXHQ8L3NwYW4+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiY29sLXNtLTZcXFwiPlxcclxcblxcdFxcdDxybC1wYWdlciBjbGFzcz1cXFwicHVsbC1yaWdodFxcXCI+PC9ybC1wYWdlcj5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9jYXJkQ29udGFpbmVyL2RlZmF1bHRDYXJkQ29udGFpbmVyRm9vdGVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxMDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3MvY29tbW9uanMuZC50cycgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG5yZXF1aXJlKCcuL2NoZWNrYm94LmNzcycpO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIGNvbXBvbmVudHNEZWZhdWx0VGhlbWVfMSA9IHJlcXVpcmUoJy4uL2NvbXBvbmVudHNEZWZhdWx0VGhlbWUnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMuY2hlY2tib3gnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxDaGVja2JveCc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnQ2hlY2tib3hDb250cm9sbGVyJztcclxudmFyIENoZWNrYm94Q29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDaGVja2JveENvbnRyb2xsZXIodXNlRGVmYXVsdFRoZW1lKSB7XHJcbiAgICAgICAgdGhpcy51c2VEZWZhdWx0VGhlbWUgPSB1c2VEZWZhdWx0VGhlbWU7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ2hlY2tib3hDb250cm9sbGVyLnByb3RvdHlwZSwgXCJjaGVja2VkXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmdNb2RlbC4kdmlld1ZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgdGhpcy5uZ01vZGVsLiRzZXRWaWV3VmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQ2hlY2tib3hDb250cm9sbGVyLnByb3RvdHlwZS50b2dnbGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlICYmICF0aGlzLm5nRGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5jaGVja2VkID0gIXRoaXMuY2hlY2tlZDtcclxuICAgICAgICAgICAgdGhpcy5vblRvZ2dsZSh7IHZhbHVlOiB0aGlzLmNoZWNrZWQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIENoZWNrYm94Q29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuYWN0aXZlICE9IG51bGwgPyB0aGlzLmFjdGl2ZSA6IHRydWU7XHJcbiAgICB9O1xyXG4gICAgQ2hlY2tib3hDb250cm9sbGVyLiRpbmplY3QgPSBbY29tcG9uZW50c0RlZmF1bHRUaGVtZV8xLmRlZmF1bHRUaGVtZVZhbHVlTmFtZV07XHJcbiAgICByZXR1cm4gQ2hlY2tib3hDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkNoZWNrYm94Q29udHJvbGxlciA9IENoZWNrYm94Q29udHJvbGxlcjtcclxuZXhwb3J0cy5jaGVja2JveCA9IHtcclxuICAgIHJlcXVpcmU6IHsgbmdNb2RlbDogJ25nTW9kZWwnIH0sXHJcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vY2hlY2tib3guaHRtbCcpLFxyXG4gICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgIGNvbnRyb2xsZXJBczogJ2NoZWNrYm94JyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgbmdEaXNhYmxlZDogJzw/JyxcclxuICAgICAgICBhY3RpdmU6ICc8PycsXHJcbiAgICAgICAgb25Ub2dnbGU6ICcmJyxcclxuICAgIH0sXHJcbn07XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgZXhwb3J0cy5jaGVja2JveClcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIENoZWNrYm94Q29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVkyaGxZMnRpYjNndWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUpqYUdWamEySnZlQzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTd3dSRUZCTUVRN1FVRkZNVVFzV1VGQldTeERRVUZETzBGQlJXSXNVVUZCVHl4blFrRkJaMElzUTBGQlF5eERRVUZCTzBGQlJYaENMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlJXNURMSFZEUVVGelF5d3lRa0ZCTWtJc1EwRkJReXhEUVVGQk8wRkJSWFpFTEd0Q1FVRlZMRWRCUVZjc01rSkJRVEpDTEVOQlFVTTdRVUZEYWtRc2NVSkJRV0VzUjBGQlZ5eFpRVUZaTEVOQlFVTTdRVUZEY2tNc2MwSkJRV01zUjBGQlZ5eHZRa0ZCYjBJc1EwRkJRenRCUVZsNlJEdEpRWGRDUXl3MFFrRkJiVUlzWlVGQmQwSTdVVUZCZUVJc2IwSkJRV1VzUjBGQlppeGxRVUZsTEVOQlFWTTdTVUZCUnl4RFFVRkRPMGxCYUVJdlF5eHpRa0ZCU1N4MVEwRkJUenRoUVVGWU8xbEJRME1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1ZVRkJWU3hEUVVGRE8xRkJRMmhETEVOQlFVTTdZVUZGUkN4VlFVRlpMRXRCUVdNN1dVRkRla0lzU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4aFFVRmhMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU03VVVGRGJrTXNRMEZCUXpzN08wOUJTa0U3U1VGTlJDeHRRMEZCVFN4SFFVRk9PMUZCUTBNc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEzSkRMRWxCUVVrc1EwRkJReXhQUVVGUExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRPMWxCUXpkQ0xFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNSVUZCUlN4TFFVRkxMRVZCUVVVc1NVRkJTU3hEUVVGRExFOUJRVThzUlVGQlJTeERRVUZETEVOQlFVTTdVVUZEZUVNc1EwRkJRenRKUVVOR0xFTkJRVU03U1VGTFJDeHZRMEZCVHl4SFFVRlFPMUZCUTBNc1NVRkJTU3hEUVVGRExFMUJRVTBzUjBGQlJ5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SlFVRkpMRWxCUVVrc1IwRkJSeXhKUVVGSkxFTkJRVU1zVFVGQlRTeEhRVUZITEVsQlFVa3NRMEZCUXp0SlFVTjRSQ3hEUVVGRE8wbEJURTBzTUVKQlFVOHNSMEZCWVN4RFFVRkRMRGhEUVVGeFFpeERRVUZETEVOQlFVTTdTVUZOY0VRc2VVSkJRVU03UVVGQlJDeERRVUZETEVGQk4wSkVMRWxCTmtKRE8wRkJOMEpaTERCQ1FVRnJRaXh4UWtFMlFqbENMRU5CUVVFN1FVRkZWU3huUWtGQlVTeEhRVUU0UWp0SlFVTm9SQ3hQUVVGUExFVkJRVVVzUlVGQlJTeFBRVUZQTEVWQlFVVXNVMEZCVXl4RlFVRkZPMGxCUXk5Q0xGVkJRVlVzUlVGQlJTeEpRVUZKTzBsQlEyaENMRkZCUVZFc1JVRkJSU3hQUVVGUExFTkJRVU1zYVVKQlFXbENMRU5CUVVNN1NVRkRjRU1zVlVGQlZTeEZRVUZGTEhOQ1FVRmpPMGxCUXpGQ0xGbEJRVmtzUlVGQlJTeFZRVUZWTzBsQlEzaENMRkZCUVZFc1JVRkJSVHRSUVVOVUxGVkJRVlVzUlVGQlJTeEpRVUZKTzFGQlEyaENMRTFCUVUwc1JVRkJSU3hKUVVGSk8xRkJRMW9zVVVGQlVTeEZRVUZGTEVkQlFVYzdTMEZEWWp0RFFVTkVMRU5CUVVNN1FVRkZSaXhQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVc1JVRkJSU3hEUVVGRE8wdEJRelZDTEZOQlFWTXNRMEZCUXl4eFFrRkJZU3hGUVVGRkxHZENRVUZSTEVOQlFVTTdTMEZEYkVNc1ZVRkJWU3hEUVVGRExITkNRVUZqTEVWQlFVVXNhMEpCUVd0Q0xFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvY2hlY2tib3gvY2hlY2tib3guanNcbiAqKiBtb2R1bGUgaWQgPSAxMDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vY2hlY2tib3guY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2NoZWNrYm94LmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2NoZWNrYm94LmNzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NoZWNrYm94L2NoZWNrYm94LmNzc1xuICoqIG1vZHVsZSBpZCA9IDEwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIucmwtY2hlY2tib3guZGVmYXVsdC10aGVtZTpiZWZvcmUge1xcclxcblxcdGZvbnQtZmFtaWx5OiBGb250QXdlc29tZTtcXHJcXG5cXHRjb250ZW50OiBcXFwiXFxcXEYwOTZcXFwiOyAvKmZhLXNxdWFyZS1vKi9cXHJcXG5cXHRmb250LXNpemU6IDEuNWVtO1xcclxcblxcdHBvc2l0aW9uOiByZWxhdGl2ZTtcXHJcXG5cXHR0b3A6IC4wNWVtO1xcclxcbn1cXHJcXG5cXHJcXG4ucmwtY2hlY2tib3gtY2hlY2tlZC5kZWZhdWx0LXRoZW1lOmJlZm9yZSB7XFxyXFxuXFx0Zm9udC1mYW1pbHk6IEZvbnRBd2Vzb21lO1xcclxcblxcdGNvbnRlbnQ6IFxcXCJcXFxcRjA0NlxcXCI7IC8qZmEtY2hlY2stc3F1YXJlLW8qL1xcclxcblxcdGZvbnQtc2l6ZTogMS40ZW07XFxyXFxufVxcclxcblxcclxcbi5kaXNhYmxlZC5kZWZhdWx0LXRoZW1lOmJlZm9yZSB7XFxyXFxuXFx0Y3Vyc29yOiBub3QtYWxsb3dlZDtcXHJcXG59XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL3NvdXJjZS9jb21wb25lbnRzL2NoZWNrYm94L2NoZWNrYm94LmNzc1xuICoqIG1vZHVsZSBpZCA9IDEwN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzcGFuIG5nLWNsaWNrPVxcXCJjaGVja2JveC50b2dnbGUoKVxcXCIgbmctdHJhbnNjbHVkZVxcclxcblxcdCAgbmctY2xhc3M9XFxcInsgJ3JsLWNoZWNrYm94JzogIWNoZWNrYm94LmNoZWNrZWRcXHJcXG5cXHQgICwgJ3JsLWNoZWNrYm94LWNoZWNrZWQnOiBjaGVja2JveC5jaGVja2VkXFxyXFxuXFx0ICAsICdkaXNhYmxlZCc6IGNoZWNrYm94Lm5nRGlzYWJsZWRcXHJcXG5cXHQgICwgJ2RlZmF1bHQtdGhlbWUnOiBjaGVja2JveC51c2VEZWZhdWx0VGhlbWUgfVxcXCI+PC9zcGFuPlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NoZWNrYm94L2NoZWNrYm94Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxMDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbnZhciBfX3RyYW5zZm9ybSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy50cmFuc2Zvcm0udHJhbnNmb3JtO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5jb21tYUxpc3QnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxDb21tYUxpc3QnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ0NvbW1hTGlzdENvbnRyb2xsZXInO1xyXG52YXIgQ29tbWFMaXN0Q29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb21tYUxpc3RDb250cm9sbGVyKG9iamVjdCkge1xyXG4gICAgICAgIHRoaXMucmVtYWluaW5nSXRlbXMgPSAwO1xyXG4gICAgICAgIHRoaXMubGlzdCA9IHRoaXMuZ2V0Rmlyc3RJdGVtcyh0aGlzLmluTGlzdCk7XHJcbiAgICB9XHJcbiAgICBDb21tYUxpc3RDb250cm9sbGVyLnByb3RvdHlwZS5nZXRGaXJzdEl0ZW1zID0gZnVuY3Rpb24gKGxpc3QpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLnRyYW5zZm9ybSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGxpc3QgPSBfLm1hcChsaXN0LCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fdHJhbnNmb3JtLmdldFZhbHVlKGl0ZW0sIF90aGlzLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICA7XHJcbiAgICAgICAgdmFyIG5ld0xpc3Q7XHJcbiAgICAgICAgaWYgKHRoaXMubWF4ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgbmV3TGlzdCA9IF8udGFrZShsaXN0LCB0aGlzLm1heCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVtYWluaW5nSXRlbXMgPSBsaXN0Lmxlbmd0aCAtIHRoaXMubWF4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbmV3TGlzdCA9IF8uY2xvbmUobGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXdMaXN0O1xyXG4gICAgfTtcclxuICAgIENvbW1hTGlzdENvbnRyb2xsZXIuJGluamVjdCA9IFtfX29iamVjdC5zZXJ2aWNlTmFtZV07XHJcbiAgICByZXR1cm4gQ29tbWFMaXN0Q29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Db21tYUxpc3RDb250cm9sbGVyID0gQ29tbWFMaXN0Q29udHJvbGxlcjtcclxudmFyIGNvbW1hTGlzdCA9IHtcclxuICAgIHRlbXBsYXRlOiBcIlxcblxcdFxcdDxzcGFuPlxcblxcdFxcdFxcdDxzcGFuIG5nLXJlcGVhdD1cXFwiaXRlbSBpbiBjb21tYUxpc3QubGlzdCB0cmFjayBieSAkaW5kZXhcXFwiPlxcblxcdFxcdFxcdFxcdDxzcGFuPnt7aXRlbX19PC9zcGFuPjxzcGFuIG5nLWhpZGU9XFxcIiRsYXN0XFxcIj4sIDwvc3Bhbj5cXG5cXHRcXHRcXHQ8L3NwYW4+XFxuXFx0XFx0XFx0PHNwYW4gbmctc2hvdz1cXFwiY29tbWFMaXN0LnJlbWFpbmluZ0l0ZW1zID4gMFxcXCI+Li4uIHt7Y29tbWFMaXN0LnJlbWFpbmluZ0l0ZW1zfX0gbW9yZSBpdGVtczwvc3Bhbj5cXG5cXHRcXHQ8L3NwYW4+XFxuXFx0XCIsXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnY29tbWFMaXN0JyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgaW5MaXN0OiAnPGxpc3QnLFxyXG4gICAgICAgIG1heDogJzw/JyxcclxuICAgICAgICB0cmFuc2Zvcm06ICc8PycsXHJcbiAgICB9LFxyXG59O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtfX29iamVjdC5tb2R1bGVOYW1lXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBjb21tYUxpc3QpXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBDb21tYUxpc3RDb250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWTI5dGJXRk1hWE4wTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lZMjl0YldGTWFYTjBMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxGbEJRVmtzUTBGQlF6dEJRVVZpTEVsQlFWa3NUMEZCVHl4WFFVRk5MRk5CUVZNc1EwRkJReXhEUVVGQk8wRkJRMjVETEVsQlFWa3NRMEZCUXl4WFFVRk5MRkZCUVZFc1EwRkJReXhEUVVGQk8wRkJSVFZDTERaRFFVRjVRaXc0UWtGQk9FSXNRMEZCUXl4RFFVRkJPMEZCUlhoRUxFbEJRVThzVVVGQlVTeEhRVUZITEhWRFFVRlJMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRMnhETEVsQlFVOHNWMEZCVnl4SFFVRkhMSFZEUVVGUkxFTkJRVU1zVTBGQlV5eERRVUZETEZOQlFWTXNRMEZCUXp0QlFVVjJReXhyUWtGQlZTeEhRVUZYTERSQ1FVRTBRaXhEUVVGRE8wRkJRMnhFTEhGQ1FVRmhMRWRCUVZjc1lVRkJZU3hEUVVGRE8wRkJRM1JETEhOQ1FVRmpMRWRCUVZjc2NVSkJRWEZDTEVOQlFVTTdRVUZGTVVRN1NVRlJReXcyUWtGQldTeE5RVUVyUWp0UlFVZ3pReXh0UWtGQll5eEhRVUZYTEVOQlFVTXNRMEZCUXp0UlFVa3hRaXhKUVVGSkxFTkJRVU1zU1VGQlNTeEhRVUZITEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETzBsQlF6ZERMRU5CUVVNN1NVRkZUeXd5UTBGQllTeEhRVUZ5UWl4VlFVRnpRaXhKUVVGWE8xRkJRV3BETEdsQ1FXbENRenRSUVdoQ1FTeEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1UwRkJVeXhKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZETlVJc1NVRkJTU3hIUVVGSExFTkJRVU1zUTBGQlF5eEhRVUZITEVOQlFVTXNTVUZCU1N4RlFVRkZMRlZCUVVNc1NVRkJVenRuUWtGRE5VSXNUVUZCVFN4RFFVRkRMRmRCUVZjc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeEZRVUZGTEV0QlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJRenRaUVVOdVJDeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTktMRU5CUVVNN1VVRkJRU3hEUVVGRE8xRkJSVVlzU1VGQlNTeFBRVUZqTEVOQlFVTTdVVUZGYmtJc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEVkQlFVY3NTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRM1JDTEU5QlFVOHNSMEZCUnl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUlVGQlJTeEpRVUZKTEVOQlFVTXNSMEZCUnl4RFFVRkRMRU5CUVVNN1dVRkZha01zU1VGQlNTeERRVUZETEdOQlFXTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSExFbEJRVWtzUTBGQlF5eEhRVUZITEVOQlFVTTdVVUZET1VNc1EwRkJRenRSUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzFsQlExQXNUMEZCVHl4SFFVRkhMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdVVUZEZWtJc1EwRkJRenRSUVVORUxFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTTdTVUZEYUVJc1EwRkJRenRKUVhSQ1RTd3lRa0ZCVHl4SFFVRmhMRU5CUVVNc1VVRkJVU3hEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETzBsQmRVSnVSQ3d3UWtGQlF6dEJRVUZFTEVOQlFVTXNRVUU1UWtRc1NVRTRRa003UVVFNVFsa3NNa0pCUVcxQ0xITkNRVGhDTDBJc1EwRkJRVHRCUVVWRUxFbEJRVWtzVTBGQlV5eEhRVUU0UWp0SlFVTXhReXhSUVVGUkxFVkJRVVVzTUZKQlQxUTdTVUZEUkN4VlFVRlZMRVZCUVVVc2MwSkJRV003U1VGRE1VSXNXVUZCV1N4RlFVRkZMRmRCUVZjN1NVRkRla0lzVVVGQlVTeEZRVUZGTzFGQlExUXNUVUZCVFN4RlFVRkZMRTlCUVU4N1VVRkRaaXhIUVVGSExFVkJRVVVzU1VGQlNUdFJRVU5VTEZOQlFWTXNSVUZCUlN4SlFVRkpPMHRCUTJZN1EwRkRSQ3hEUVVGRE8wRkJSVVlzVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4clFrRkJWU3hGUVVGRkxFTkJRVU1zVVVGQlVTeERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRPMHRCUXk5RExGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMRk5CUVZNc1EwRkJRenRMUVVOdVF5eFZRVUZWTEVOQlFVTXNjMEpCUVdNc1JVRkJSU3h0UWtGQmJVSXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2NvbW1hTGlzdC9jb21tYUxpc3QuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufTtcclxuLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9ib290c3RyYXBEYXRlVGltZVBpY2tlci5kLnRzJyAvPlxyXG5yZXF1aXJlKCcuLi8uLi8uLi9saWJyYXJpZXMvYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyL2luZGV4Jyk7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX2RhdGVUaW1lRm9ybWF0U3RyaW5ncyA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5kYXRlO1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG52YXIgX190aW1lem9uZSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy50aW1lem9uZTtcclxudmFyIGlucHV0XzEgPSByZXF1aXJlKCcuLi9pbnB1dC9pbnB1dCcpO1xyXG52YXIgY29tcG9uZW50VmFsaWRhdG9yX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uLy4uL3NlcnZpY2VzL2NvbXBvbmVudFZhbGlkYXRvci9jb21wb25lbnRWYWxpZGF0b3Iuc2VydmljZScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5kYXRlVGltZSc7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybERhdGVUaW1lJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdEYXRlVGltZUNvbnRyb2xsZXInO1xyXG52YXIgRGF0ZVRpbWVDb250cm9sbGVyID0gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhEYXRlVGltZUNvbnRyb2xsZXIsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBEYXRlVGltZUNvbnRyb2xsZXIoJHNjb3BlLCAkYXR0cnMsIGNvbXBvbmVudFZhbGlkYXRvckZhY3RvcnksICRlbGVtZW50KSB7XHJcbiAgICAgICAgX3N1cGVyLmNhbGwodGhpcywgJHNjb3BlLCAkYXR0cnMsIGNvbXBvbmVudFZhbGlkYXRvckZhY3RvcnkpO1xyXG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcclxuICAgICAgICB0aGlzLmlucHV0VHlwZSA9ICdkYXRlLXRpbWUnO1xyXG4gICAgICAgIHRoaXMudXNlRGF0ZSA9IF8uaXNVbmRlZmluZWQodGhpcy51c2VEYXRlKSA/IHRydWUgOiB0aGlzLnVzZURhdGU7XHJcbiAgICAgICAgdGhpcy51c2VUaW1lID0gXy5pc1VuZGVmaW5lZCh0aGlzLnVzZVRpbWUpID8gdHJ1ZSA6IHRoaXMudXNlVGltZTtcclxuICAgIH1cclxuICAgIERhdGVUaW1lQ29udHJvbGxlci5wcm90b3R5cGUub25DbGVhckNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubmdNb2RlbC4kc2V0Vmlld1ZhbHVlKCcnKTtcclxuICAgICAgICB0aGlzLm9uQ2xlYXJFdmVudCgpO1xyXG4gICAgfTtcclxuICAgIERhdGVUaW1lQ29udHJvbGxlci5wcm90b3R5cGUuJHBvc3RMaW5rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGRlZmF1bHRzID0gdGhpcy4kZWxlbWVudC5kYXRldGltZXBpY2tlci5kZWZhdWx0cztcclxuICAgICAgICB2YXIgbWluID0gdGhpcy5taW4gIT0gbnVsbCA/IHRoaXMubWluIDogZGVmYXVsdHMubWluRGF0ZTtcclxuICAgICAgICB2YXIgbWF4ID0gdGhpcy5tYXggIT0gbnVsbCA/IHRoaXMubWF4IDogZGVmYXVsdHMubWF4RGF0ZTtcclxuICAgICAgICB0aGlzLm5nTW9kZWwuJGZvcm1hdHRlcnMucHVzaChmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnRpbWV6b25lID0gX190aW1lem9uZS50aW1lem9uZVNlcnZpY2UuY3VycmVudFRpbWV6b25lO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGRhdGUgPSBtb21lbnQodmFsdWUpO1xyXG4gICAgICAgICAgICBfdGhpcy50aW1lem9uZSA9IF9fdGltZXpvbmUudGltZXpvbmVzLmdldChkYXRlLnR6KCkpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS5mb3JtYXQoX3RoaXMuZ2V0Rm9ybWF0T3JEZWZhdWx0KCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubmdNb2RlbC4kcGFyc2Vycy5wdXNoKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX190aW1lem9uZS50aW1lem9uZVNlcnZpY2UuYnVpbGRNb21lbnRXaXRoVGltZXpvbmUodmFsdWUsIF90aGlzLnRpbWV6b25lLCBfdGhpcy5nZXRGb3JtYXRPckRlZmF1bHQoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm5nTW9kZWwuJG1vZGVsVmFsdWU7IH0sIGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICBfdGhpcy52YWxpZEZvcm1hdCA9IF9fb2JqZWN0Lm9iamVjdFV0aWxpdHkuaXNOdWxsT3JFbXB0eShuZXdWYWx1ZSlcclxuICAgICAgICAgICAgICAgID8gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgOiBtb21lbnQobmV3VmFsdWUpLmlzVmFsaWQoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLiRlbGVtZW50LmZpbmQoJy5zaG93LWRhdGUtcGlja2VyJykuZGF0ZXRpbWVwaWNrZXIoe1xyXG4gICAgICAgICAgICBzdGVwcGluZzogdGhpcy5taW51dGVTdGVwcGluZyB8fCAxLFxyXG4gICAgICAgICAgICBmb3JtYXQ6IHRoaXMuZ2V0Rm9ybWF0T3JEZWZhdWx0KCksXHJcbiAgICAgICAgICAgIGRpcmVjdGlvbjogJ2JvdHRvbScsXHJcbiAgICAgICAgICAgIGVsZW1lbnRIZWlnaHQ6IDIsXHJcbiAgICAgICAgICAgIHBpY2tEYXRlOiB0aGlzLnVzZURhdGUsXHJcbiAgICAgICAgICAgIHBpY2tUaW1lOiB0aGlzLnVzZVRpbWUsXHJcbiAgICAgICAgICAgIG1pbkRhdGU6IG1pbixcclxuICAgICAgICAgICAgbWF4RGF0ZTogbWF4LFxyXG4gICAgICAgIH0pLm9uKCdjaGFuZ2UuZHAnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IF90aGlzLiRlbGVtZW50LmZpbmQoJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgIF90aGlzLm5nTW9kZWwuJHNldFZpZXdWYWx1ZShuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIF90aGlzLiRzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBEYXRlVGltZUNvbnRyb2xsZXIucHJvdG90eXBlLmdldEZvcm1hdE9yRGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQgfHwgdGhpcy5kZWZhdWx0Rm9ybWF0KHRoaXMudXNlRGF0ZSwgdGhpcy51c2VUaW1lKTtcclxuICAgIH07XHJcbiAgICBEYXRlVGltZUNvbnRyb2xsZXIucHJvdG90eXBlLmRlZmF1bHRGb3JtYXQgPSBmdW5jdGlvbiAoaGFzRGF0ZSwgaGFzVGltZSkge1xyXG4gICAgICAgIGlmIChoYXNEYXRlICYmIGhhc1RpbWUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fZGF0ZVRpbWVGb3JtYXRTdHJpbmdzLmRlZmF1bHRGb3JtYXRzLmRhdGVUaW1lRm9ybWF0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChoYXNEYXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2RhdGVUaW1lRm9ybWF0U3RyaW5ncy5kZWZhdWx0Rm9ybWF0cy5kYXRlRm9ybWF0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChoYXNUaW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfX2RhdGVUaW1lRm9ybWF0U3RyaW5ncy5kZWZhdWx0Rm9ybWF0cy50aW1lRm9ybWF0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gcmV2ZXJ0IHRvIGRlZmF1bHQgZm9ybWF0XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgRGF0ZVRpbWVDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckYXR0cnMnLCBjb21wb25lbnRWYWxpZGF0b3Jfc2VydmljZV8xLmZhY3RvcnlOYW1lLCAnJGVsZW1lbnQnXTtcclxuICAgIHJldHVybiBEYXRlVGltZUNvbnRyb2xsZXI7XHJcbn0oaW5wdXRfMS5JbnB1dENvbnRyb2xsZXIpKTtcclxuZXhwb3J0cy5EYXRlVGltZUNvbnRyb2xsZXIgPSBEYXRlVGltZUNvbnRyb2xsZXI7XHJcbnZhciBkYXRlVGltZSA9IGlucHV0XzEuYnVpbGRJbnB1dCh7XHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9kYXRlVGltZS5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnZGF0ZVRpbWUnLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBtaW51dGVTdGVwcGluZzogJzw/JyxcclxuICAgICAgICB1c2VEYXRlOiAnPD8nLFxyXG4gICAgICAgIHVzZVRpbWU6ICc8PycsXHJcbiAgICAgICAgbWluOiAnPD8nLFxyXG4gICAgICAgIG1heDogJzw/JyxcclxuICAgICAgICBjbGVhckJ1dHRvbjogJzw/JyxcclxuICAgICAgICBvbkNsZWFyRXZlbnQ6ICcmJyxcclxuICAgIH0sXHJcbn0pO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFt0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMubW9tZW50Lm1vZHVsZU5hbWUsIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5kYXRlLm1vZHVsZU5hbWUsIGlucHV0XzEubW9kdWxlTmFtZSwgX19vYmplY3QubW9kdWxlTmFtZV0pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgZGF0ZVRpbWUpXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBEYXRlVGltZUNvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laR0YwWlZScGJXVXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKa1lYUmxWR2x0WlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3haUVVGWkxFTkJRVU03T3pzN096dEJRVVZpTEhsRlFVRjVSVHRCUVVWNlJTeFJRVUZQTEcxRVFVRnRSQ3hEUVVGRExFTkJRVUU3UVVGRk0wUXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGRGJrTXNTVUZCV1N4TlFVRk5MRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGRmFrTXNTVUZCV1N4RFFVRkRMRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGRk5VSXNOa05CUVhsQ0xEaENRVUU0UWl4RFFVRkRMRU5CUVVFN1FVRkZlRVFzU1VGQlR5eDFRa0ZCZFVJc1IwRkJSeXgxUTBGQlVTeERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTXZReXhKUVVGUExGRkJRVkVzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVOc1F5eEpRVUZQTEZWQlFWVXNSMEZCUnl4MVEwRkJVU3hEUVVGRExGRkJRVkVzUTBGQlF6dEJRVVYwUXl4elFrRkJlVVlzWjBKQlFXZENMRU5CUVVNc1EwRkJRVHRCUVVNeFJ5d3lRMEZCZVVZc09FUkJRVGhFTEVOQlFVTXNRMEZCUVR0QlFVczNTU3hyUWtGQlZTeEhRVUZYTERKQ1FVRXlRaXhEUVVGRE8wRkJRMnBFTEhGQ1FVRmhMRWRCUVZjc1dVRkJXU3hEUVVGRE8wRkJRM0pETEhOQ1FVRmpMRWRCUVZjc2IwSkJRVzlDTEVOQlFVTTdRVUYzUW5wRU8wbEJRWGRETEhORFFVRmxPMGxCYjBKMFJDdzBRa0ZCV1N4TlFVRnpRaXhGUVVNNVFpeE5RVUYzUWl4RlFVTjRRaXg1UWtGQmNVUXNSVUZETjBNc1VVRkJhME03VVVGRE4wTXNhMEpCUVUwc1RVRkJUU3hGUVVGRkxFMUJRVTBzUlVGQlJTeDVRa0ZCZVVJc1EwRkJReXhEUVVGRE8xRkJSSFJETEdGQlFWRXNSMEZCVWl4UlFVRlJMRU5CUVRCQ08xRkJSemRETEVsQlFVa3NRMEZCUXl4VFFVRlRMRWRCUVVjc1YwRkJWeXhEUVVGRE8xRkJSVGRDTEVsQlFVa3NRMEZCUXl4UFFVRlBMRWRCUVVjc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWRCUVVjc1NVRkJTU3hIUVVGSExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTTdVVUZEYWtVc1NVRkJTU3hEUVVGRExFOUJRVThzUjBGQlJ5eERRVUZETEVOQlFVTXNWMEZCVnl4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUjBGQlJ5eEpRVUZKTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJRenRKUVVOc1JTeERRVUZETzBsQlJVUXNlVU5CUVZrc1IwRkJXanRSUVVORExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNZVUZCWVN4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRE8xRkJReTlDTEVsQlFVa3NRMEZCUXl4WlFVRlpMRVZCUVVVc1EwRkJRenRKUVVOeVFpeERRVUZETzBsQlJVUXNjME5CUVZNc1IwRkJWRHRSUVVGQkxHbENRVEJEUXp0UlFYcERRU3hKUVVGSkxGRkJRVkVzUjBGQk1rTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhqUVVGakxFTkJRVU1zVVVGQlVTeERRVUZETzFGQlF6ZEdMRWxCUVVrc1IwRkJSeXhIUVVOS0xFbEJRVWtzUTBGQlF5eEhRVUZITEVsQlFVa3NTVUZCU1N4SFFVRkhMRWxCUVVrc1EwRkJReXhIUVVGSExFZEJRVWNzVVVGQlVTeERRVUZETEU5QlFVOHNRMEZCUXp0UlFVTnNSQ3hKUVVGSkxFZEJRVWNzUjBGRFNpeEpRVUZKTEVOQlFVTXNSMEZCUnl4SlFVRkpMRWxCUVVrc1IwRkJSeXhKUVVGSkxFTkJRVU1zUjBGQlJ5eEhRVUZITEZGQlFWRXNRMEZCUXl4UFFVRlBMRU5CUVVNN1VVRkZiRVFzU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4WFFVRlhMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVU1zUzBGQmIwSTdXVUZEYkVRc1JVRkJSU3hEUVVGRExFTkJRVU1zUzBGQlN5eEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1owSkJRMjVDTEV0QlFVa3NRMEZCUXl4UlFVRlJMRWRCUVVjc1ZVRkJWU3hEUVVGRExHVkJRV1VzUTBGQlF5eGxRVUZsTEVOQlFVTTdaMEpCUXpORUxFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTTdXVUZEWWl4RFFVRkRPMWxCUlVRc1NVRkJTU3hKUVVGSkxFZEJRV3RDTEUxQlFVMHNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRaUVVWNFF5eExRVUZKTEVOQlFVTXNVVUZCVVN4SFFVRkhMRlZCUVZVc1EwRkJReXhUUVVGVExFTkJRVU1zUjBGQlJ5eERRVUZETEVsQlFVa3NRMEZCUXl4RlFVRkZMRVZCUVVVc1EwRkJReXhEUVVGRE8xbEJRM0JFTEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFdEJRVWtzUTBGQlF5eHJRa0ZCYTBJc1JVRkJSU3hEUVVGRExFTkJRVU03VVVGREwwTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkZTQ3hKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEZGQlFWRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJReXhMUVVGaE8xbEJRM2hETEUxQlFVMHNRMEZCUXl4VlFVRlZMRU5CUVVNc1pVRkJaU3hEUVVGRExIVkNRVUYxUWl4RFFVRkRMRXRCUVVzc1JVRkJSU3hMUVVGSkxFTkJRVU1zVVVGQlVTeEZRVUZGTEV0QlFVa3NRMEZCUXl4clFrRkJhMElzUlVGQlJTeERRVUZETEVOQlFVTTdVVUZETlVjc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRlNDeEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhqUVVGaExFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeFZRVUZETEZGQlFXRTdXVUZEYWtZc1MwRkJTU3hEUVVGRExGZEJRVmNzUjBGQlJ5eFJRVUZSTEVOQlFVTXNZVUZCWVN4RFFVRkRMR0ZCUVdFc1EwRkJReXhSUVVGUkxFTkJRVU03YTBKQlF6bEVMRWxCUVVrN2EwSkJRMG9zVFVGQlRTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRTlCUVU4c1JVRkJSU3hEUVVGRE8xRkJReTlDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMUZCUTBnc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU1zUTBGQlF5eGpRVUZqTEVOQlFVTTdXVUZEZEVRc1VVRkJVU3hGUVVGRkxFbEJRVWtzUTBGQlF5eGpRVUZqTEVsQlFVa3NRMEZCUXp0WlFVTnNReXhOUVVGTkxFVkJRVVVzU1VGQlNTeERRVUZETEd0Q1FVRnJRaXhGUVVGRk8xbEJRMnBETEZOQlFWTXNSVUZCUlN4UlFVRlJPMWxCUTI1Q0xHRkJRV0VzUlVGQlJTeERRVUZETzFsQlEyaENMRkZCUVZFc1JVRkJSU3hKUVVGSkxFTkJRVU1zVDBGQlR6dFpRVU4wUWl4UlFVRlJMRVZCUVVVc1NVRkJTU3hEUVVGRExFOUJRVTg3V1VGRGRFSXNUMEZCVHl4RlFVRkZMRWRCUVVjN1dVRkRXaXhQUVVGUExFVkJRVVVzUjBGQlJ6dFRRVU5hTEVOQlFVTXNRMEZCUXl4RlFVRkZMRU5CUVVNc1YwRkJWeXhGUVVGRk8xbEJRMnhDTEVsQlFVa3NVVUZCVVN4SFFVRlJMRXRCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRWRCUVVjc1JVRkJSU3hEUVVGRE8xbEJRM1JFTEV0QlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1lVRkJZU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFsQlEzSkRMRXRCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRTeEZRVUZGTEVOQlFVTTdVVUZEZEVJc1EwRkJReXhEUVVGRExFTkJRVU03U1VGRFNpeERRVUZETzBsQlJVOHNLME5CUVd0Q0xFZEJRVEZDTzFGQlEwTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFbEJRVmtzU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhGUVVGRkxFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXp0SlFVTTVSU3hEUVVGRE8wbEJSVThzTUVOQlFXRXNSMEZCY2tJc1ZVRkJjMElzVDBGQlowSXNSVUZCUlN4UFFVRm5RanRSUVVOMlJDeEZRVUZGTEVOQlFVTXNRMEZCUXl4UFFVRlBMRWxCUVVrc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU40UWl4TlFVRk5MRU5CUVVNc2RVSkJRWFZDTEVOQlFVTXNZMEZCWXl4RFFVRkRMR05CUVdNc1EwRkJRenRSUVVNNVJDeERRVUZETzFGQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEY0VJc1RVRkJUU3hEUVVGRExIVkNRVUYxUWl4RFFVRkRMR05CUVdNc1EwRkJReXhWUVVGVkxFTkJRVU03VVVGRE1VUXNRMEZCUXp0UlFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNCQ0xFMUJRVTBzUTBGQlF5eDFRa0ZCZFVJc1EwRkJReXhqUVVGakxFTkJRVU1zVlVGQlZTeERRVUZETzFGQlF6RkVMRU5CUVVNN1VVRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dFpRVU5RTERKQ1FVRXlRanRaUVVNelFpeE5RVUZOTEVOQlFVTXNTMEZCU3l4RFFVRkRPMUZCUTJRc1EwRkJRenRKUVVOR0xFTkJRVU03U1VFM1JVMHNNRUpCUVU4c1IwRkJZU3hEUVVGRExGRkJRVkVzUlVGQlJTeFJRVUZSTEVWQlFVVXNkME5CUVRaQ0xFVkJRVVVzVlVGQlZTeERRVUZETEVOQlFVTTdTVUU0UlRWR0xIbENRVUZETzBGQlFVUXNRMEZCUXl4QlFXcEhSQ3hEUVVGM1F5eDFRa0ZCWlN4SFFXbEhkRVE3UVVGcVIxa3NNRUpCUVd0Q0xIRkNRV2xIT1VJc1EwRkJRVHRCUVVWRUxFbEJRVWtzVVVGQlVTeEhRVUU0UWl4clFrRkJWU3hEUVVGRE8wbEJRM0JFTEZGQlFWRXNSVUZCUlN4UFFVRlBMRU5CUVVNc2FVSkJRV2xDTEVOQlFVTTdTVUZEY0VNc1ZVRkJWU3hGUVVGRkxITkNRVUZqTzBsQlF6RkNMRmxCUVZrc1JVRkJSU3hWUVVGVk8wbEJRM2hDTEZGQlFWRXNSVUZCUlR0UlFVTlVMR05CUVdNc1JVRkJSU3hKUVVGSk8xRkJRM0JDTEU5QlFVOHNSVUZCUlN4SlFVRkpPMUZCUTJJc1QwRkJUeXhGUVVGRkxFbEJRVWs3VVVGRFlpeEhRVUZITEVWQlFVVXNTVUZCU1R0UlFVTlVMRWRCUVVjc1JVRkJSU3hKUVVGSk8xRkJRMVFzVjBGQlZ5eEZRVUZGTEVsQlFVazdVVUZEYWtJc1dVRkJXU3hGUVVGRkxFZEJRVWM3UzBGRGFrSTdRMEZEUkN4RFFVRkRMRU5CUVVNN1FVRkZTQ3hQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVc1EwRkJReXgxUTBGQlVTeERRVUZETEUxQlFVMHNRMEZCUXl4VlFVRlZMRVZCUVVVc2RVTkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RlFVRkZMR3RDUVVGWExFVkJRVVVzVVVGQlVTeERRVUZETEZWQlFWVXNRMEZCUXl4RFFVRkRPMHRCUTJ4SUxGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMRkZCUVZFc1EwRkJRenRMUVVOc1F5eFZRVUZWTEVOQlFVTXNjMEpCUVdNc1JVRkJSU3hyUWtGQmEwSXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2RhdGVUaW1lL2RhdGVUaW1lLmpzXG4gKiogbW9kdWxlIGlkID0gMTEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJyZXF1aXJlKCcuL2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlci5jc3MnKTtcclxucmVxdWlyZSgnLi9ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXInKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vbGlicmFyaWVzL2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlci9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDExMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIuY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlci5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIuY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vbGlicmFyaWVzL2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlci9ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIuY3NzXG4gKiogbW9kdWxlIGlkID0gMTEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi8qIVxcclxcbiAqIERhdGV0aW1lcGlja2VyIGZvciBCb290c3RyYXAgdjNcXHJcXG4vLyEgdmVyc2lvbiA6IDMuMS4zXFxyXFxuICogaHR0cHM6Ly9naXRodWIuY29tL0VvbmFzZGFuL2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlci9cXHJcXG4gKi9cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB7XFxyXFxuICB0b3A6IDA7XFxyXFxuICBsZWZ0OiAwO1xcclxcbiAgd2lkdGg6IDI1MHB4O1xcclxcbiAgcGFkZGluZzogNHB4O1xcclxcbiAgbWFyZ2luLXRvcDogMXB4O1xcclxcbiAgei1pbmRleDogOTk5OTkgIWltcG9ydGFudDtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQudGltZXBpY2tlci1zYnMge1xcclxcbiAgd2lkdGg6IDYwMHB4O1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldC5ib3R0b206YmVmb3JlIHtcXHJcXG4gIGNvbnRlbnQ6ICcnO1xcclxcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcclxcbiAgYm9yZGVyLWxlZnQ6IDdweCBzb2xpZCB0cmFuc3BhcmVudDtcXHJcXG4gIGJvcmRlci1yaWdodDogN3B4IHNvbGlkIHRyYW5zcGFyZW50O1xcclxcbiAgYm9yZGVyLWJvdHRvbTogN3B4IHNvbGlkICNjY2M7XFxyXFxuICBib3JkZXItYm90dG9tLWNvbG9yOiByZ2JhKDAsIDAsIDAsIDAuMik7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICB0b3A6IC03cHg7XFxyXFxuICBsZWZ0OiA3cHg7XFxyXFxufVxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0LmJvdHRvbTphZnRlciB7XFxyXFxuICBjb250ZW50OiAnJztcXHJcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gIGJvcmRlci1sZWZ0OiA2cHggc29saWQgdHJhbnNwYXJlbnQ7XFxyXFxuICBib3JkZXItcmlnaHQ6IDZweCBzb2xpZCB0cmFuc3BhcmVudDtcXHJcXG4gIGJvcmRlci1ib3R0b206IDZweCBzb2xpZCB3aGl0ZTtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIHRvcDogLTZweDtcXHJcXG4gIGxlZnQ6IDhweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQudG9wOmJlZm9yZSB7XFxyXFxuICBjb250ZW50OiAnJztcXHJcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gIGJvcmRlci1sZWZ0OiA3cHggc29saWQgdHJhbnNwYXJlbnQ7XFxyXFxuICBib3JkZXItcmlnaHQ6IDdweCBzb2xpZCB0cmFuc3BhcmVudDtcXHJcXG4gIGJvcmRlci10b3A6IDdweCBzb2xpZCAjY2NjO1xcclxcbiAgYm9yZGVyLXRvcC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjIpO1xcclxcbiAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgYm90dG9tOiAtN3B4O1xcclxcbiAgbGVmdDogNnB4O1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldC50b3A6YWZ0ZXIge1xcclxcbiAgY29udGVudDogJyc7XFxyXFxuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XFxyXFxuICBib3JkZXItbGVmdDogNnB4IHNvbGlkIHRyYW5zcGFyZW50O1xcclxcbiAgYm9yZGVyLXJpZ2h0OiA2cHggc29saWQgdHJhbnNwYXJlbnQ7XFxyXFxuICBib3JkZXItdG9wOiA2cHggc29saWQgd2hpdGU7XFxyXFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxyXFxuICBib3R0b206IC02cHg7XFxyXFxuICBsZWZ0OiA3cHg7XFxyXFxufVxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IC5kb3cge1xcclxcbiAgd2lkdGg6IDE0LjI4NTclO1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldC5wdWxsLXJpZ2h0OmJlZm9yZSB7XFxyXFxuICBsZWZ0OiBhdXRvO1xcclxcbiAgcmlnaHQ6IDZweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQucHVsbC1yaWdodDphZnRlciB7XFxyXFxuICBsZWZ0OiBhdXRvO1xcclxcbiAgcmlnaHQ6IDdweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgPiB1bCB7XFxyXFxuICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XFxyXFxuICBtYXJnaW46IDA7XFxyXFxufVxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IGFbZGF0YS1hY3Rpb25dIHtcXHJcXG4gIHBhZGRpbmc6IDA7XFxyXFxufVxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IGFbZGF0YS1hY3Rpb25dOmFjdGl2ZSB7XFxyXFxuICBib3gtc2hhZG93OiBub25lO1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCAudGltZXBpY2tlciB7XFxyXFxuICBtYXJnaW46IDAgNHB4IDRweCA0cHg7XFxyXFxufVxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IC50aW1lcGlja2VyLWhvdXIsXFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgLnRpbWVwaWNrZXItbWludXRlLFxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IC50aW1lcGlja2VyLXNlY29uZCB7XFxyXFxuICB3aWR0aDogNTRweDtcXHJcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcclxcbiAgZm9udC1zaXplOiAxLjJlbTtcXHJcXG4gIG1hcmdpbi10b3A6IDRweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgYnV0dG9uW2RhdGEtYWN0aW9uXSB7XFxyXFxuICBwYWRkaW5nOiA2cHg7XFxyXFxufVxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IHRhYmxlW2RhdGEtaG91ci1mb3JtYXQ9XFxcIjEyXFxcIl0gLnNlcGFyYXRvciB7XFxyXFxuICB3aWR0aDogNHB4O1xcclxcbiAgcGFkZGluZzogMDtcXHJcXG4gIG1hcmdpbjogMDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgLmRhdGVwaWNrZXIgPiBkaXYge1xcclxcbiAgZGlzcGxheTogbm9uZTtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgLnBpY2tlci1zd2l0Y2gge1xcclxcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0YWJsZSB7XFxyXFxuICB3aWR0aDogMTAwJTtcXHJcXG4gIG1hcmdpbjogMDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGQsXFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGgge1xcclxcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xcclxcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0ZCB7XFxyXFxuICBoZWlnaHQ6IDI1cHg7XFxyXFxuICBsaW5lLWhlaWdodDogMjVweDtcXHJcXG4gIHdpZHRoOiA1NHB4O1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0ZC5jdyB7XFxyXFxuICBmb250LXNpemU6IDEwcHg7XFxyXFxuICBoZWlnaHQ6IDIwcHg7XFxyXFxuICBsaW5lLWhlaWdodDogMjBweDtcXHJcXG4gIGNvbG9yOiAjNzc3Nzc3O1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0ZC5kYXkge1xcclxcbiAgaGVpZ2h0OiAyMHB4O1xcclxcbiAgbGluZS1oZWlnaHQ6IDIwcHg7XFxyXFxuICB3aWR0aDogMjBweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGQuZGF5OmhvdmVyLFxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IHRkLmhvdXI6aG92ZXIsXFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGQubWludXRlOmhvdmVyLFxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IHRkLnNlY29uZDpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kOiAjZWVlZWVlO1xcclxcbiAgY3Vyc29yOiBwb2ludGVyO1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0ZC5vbGQsXFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGQubmV3IHtcXHJcXG4gIGNvbG9yOiAjNzc3Nzc3O1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0ZC50b2RheSB7XFxyXFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxyXFxufVxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IHRkLnRvZGF5OmJlZm9yZSB7XFxyXFxuICBjb250ZW50OiAnJztcXHJcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gIGJvcmRlci1sZWZ0OiA3cHggc29saWQgdHJhbnNwYXJlbnQ7XFxyXFxuICBib3JkZXItYm90dG9tOiA3cHggc29saWQgIzQyOGJjYTtcXHJcXG4gIGJvcmRlci10b3AtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4yKTtcXHJcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXHJcXG4gIGJvdHRvbTogNHB4O1xcclxcbiAgcmlnaHQ6IDRweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGQuYWN0aXZlLFxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IHRkLmFjdGl2ZTpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDI4YmNhO1xcclxcbiAgY29sb3I6ICNmZmZmZmY7XFxyXFxuICB0ZXh0LXNoYWRvdzogMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjI1KTtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGQuYWN0aXZlLnRvZGF5OmJlZm9yZSB7XFxyXFxuICBib3JkZXItYm90dG9tLWNvbG9yOiAjZmZmO1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0ZC5kaXNhYmxlZCxcXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0ZC5kaXNhYmxlZDpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kOiBub25lO1xcclxcbiAgY29sb3I6ICM3Nzc3Nzc7XFxyXFxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0ZCBzcGFuIHtcXHJcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXHJcXG4gIHdpZHRoOiA1NHB4O1xcclxcbiAgaGVpZ2h0OiAyNXB4O1xcclxcbiAgbGluZS1oZWlnaHQ6IDI1cHg7XFxyXFxuICBtYXJnaW46IDBweCAxLjVweDtcXHJcXG4gIGN1cnNvcjogcG9pbnRlcjtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGQgc3Bhbjpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kOiAjZWVlZWVlO1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0ZCBzcGFuLmFjdGl2ZSB7XFxyXFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDI4YmNhO1xcclxcbiAgY29sb3I6ICNmZmZmZmY7XFxyXFxuICB0ZXh0LXNoYWRvdzogMCAtMXB4IDAgcmdiYSgwLCAwLCAwLCAwLjI1KTtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGQgc3Bhbi5vbGQge1xcclxcbiAgY29sb3I6ICM3Nzc3Nzc7XFxyXFxufVxcclxcbi5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0IHRkIHNwYW4uZGlzYWJsZWQsXFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGQgc3Bhbi5kaXNhYmxlZDpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kOiBub25lO1xcclxcbiAgY29sb3I6ICM3Nzc3Nzc7XFxyXFxuICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0aCB7XFxyXFxuICBoZWlnaHQ6IDIwcHg7XFxyXFxuICBsaW5lLWhlaWdodDogMjBweDtcXHJcXG4gIHdpZHRoOiAyMHB4O1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0aC5waWNrZXItc3dpdGNoIHtcXHJcXG4gIHdpZHRoOiAxNDVweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGgubmV4dCxcXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0aC5wcmV2IHtcXHJcXG4gIGZvbnQtc2l6ZTogMjFweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGguZGlzYWJsZWQsXFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGguZGlzYWJsZWQ6aG92ZXIge1xcclxcbiAgYmFja2dyb3VuZDogbm9uZTtcXHJcXG4gIGNvbG9yOiAjNzc3Nzc3O1xcclxcbiAgY3Vyc29yOiBub3QtYWxsb3dlZDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdGhlYWQgdHI6Zmlyc3QtY2hpbGQgdGgge1xcclxcbiAgY3Vyc29yOiBwb2ludGVyO1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCB0aGVhZCB0cjpmaXJzdC1jaGlsZCB0aDpob3ZlciB7XFxyXFxuICBiYWNrZ3JvdW5kOiAjZWVlZWVlO1xcclxcbn1cXHJcXG4uaW5wdXQtZ3JvdXAuZGF0ZSAuaW5wdXQtZ3JvdXAtYWRkb24gc3BhbiB7XFxyXFxuICBkaXNwbGF5OiBibG9jaztcXHJcXG4gIGN1cnNvcjogcG9pbnRlcjtcXHJcXG4gIHdpZHRoOiAxNnB4O1xcclxcbiAgaGVpZ2h0OiAxNnB4O1xcclxcbn1cXHJcXG4uYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldC5sZWZ0LW9yaWVudGVkOmJlZm9yZSB7XFxyXFxuICBsZWZ0OiBhdXRvO1xcclxcbiAgcmlnaHQ6IDZweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQubGVmdC1vcmllbnRlZDphZnRlciB7XFxyXFxuICBsZWZ0OiBhdXRvO1xcclxcbiAgcmlnaHQ6IDdweDtcXHJcXG59XFxyXFxuLmJvb3RzdHJhcC1kYXRldGltZXBpY2tlci13aWRnZXQgdWwubGlzdC11bnN0eWxlZCBsaSBkaXYudGltZXBpY2tlciBkaXYudGltZXBpY2tlci1waWNrZXIgdGFibGUudGFibGUtY29uZGVuc2VkIHRib2R5ID4gdHIgPiB0ZCB7XFxyXFxuICBwYWRkaW5nOiAwcHggIWltcG9ydGFudDtcXHJcXG59XFxyXFxuQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY3cHgpIHtcXHJcXG4gIC5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXItd2lkZ2V0LnRpbWVwaWNrZXItc2JzIHtcXHJcXG4gICAgd2lkdGg6IDI4M3B4O1xcclxcbiAgfVxcclxcbn1cXHJcXG5cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vbGlicmFyaWVzL2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlci9ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIuY3NzXG4gKiogbW9kdWxlIGlkID0gMTEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxyXG4vLyEgdmVyc2lvbiA6IDMuMS4zXHJcbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG5ib290c3RyYXAtZGF0ZXRpbWVwaWNrZXIuanNcclxuaHR0cHM6Ly9naXRodWIuY29tL0VvbmFzZGFuL2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlclxyXG49PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuVGhlIE1JVCBMaWNlbnNlIChNSVQpXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMTQgSm9uYXRoYW4gUGV0ZXJzb25cclxuXHJcblBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcclxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxyXG5pbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXHJcbnRvIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGxcclxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXHJcbmZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XHJcblxyXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxyXG5hbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcclxuSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXHJcbkZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxyXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXHJcbkxJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXHJcbk9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cclxuVEhFIFNPRlRXQVJFLlxyXG4qL1xyXG47IChmdW5jdGlvbiAocm9vdCwgZmFjdG9yeSkge1xyXG5cdCd1c2Ugc3RyaWN0JztcclxuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XHJcblx0XHQvLyBBTUQgaXMgdXNlZCAtIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcblx0XHRkZWZpbmUoWydqcXVlcnknLCAnbW9tZW50J10sIGZhY3RvcnkpO1xyXG5cdH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XHJcblx0XHRmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpLCByZXF1aXJlKCdtb21lbnQnKSk7XHJcblx0fVxyXG5cdGVsc2Uge1xyXG5cdFx0Ly8gTmVpdGhlciBBTUQgb3IgQ29tbW9uSlMgdXNlZC4gVXNlIGdsb2JhbCB2YXJpYWJsZXMuXHJcblx0XHRpZiAoIWpRdWVyeSkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlciByZXF1aXJlcyBqUXVlcnkgdG8gYmUgbG9hZGVkIGZpcnN0Jyk7XHJcblx0XHR9XHJcblx0XHRpZiAoIW1vbWVudCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlciByZXF1aXJlcyBtb21lbnQuanMgdG8gYmUgbG9hZGVkIGZpcnN0Jyk7XHJcblx0XHR9XHJcblx0XHRmYWN0b3J5KHJvb3QualF1ZXJ5LCBtb21lbnQpO1xyXG5cdH1cclxufSh0aGlzLCBmdW5jdGlvbiAoJCwgbW9tZW50KSB7XHJcblx0J3VzZSBzdHJpY3QnO1xyXG5cdGlmICh0eXBlb2YgbW9tZW50ID09PSAndW5kZWZpbmVkJykge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKCdtb21lbnRqcyBpcyByZXF1aXJlZCcpO1xyXG5cdH1cclxuXHJcblx0dmFyIGRwZ0lkID0gMCxcclxuXHJcbiAgICBEYXRlVGltZVBpY2tlciA9IGZ1bmN0aW9uIChlbGVtZW50LCBvcHRpb25zKSB7XHJcbiAgICBcdHZhciBkZWZhdWx0cyA9ICQuZm4uZGF0ZXRpbWVwaWNrZXIuZGVmYXVsdHMsXHJcblxyXG4gICAgICAgICAgICBpY29ucyA9IHtcclxuICAgICAgICAgICAgXHR0aW1lOiAnZmEgZmEtY2xvY2stbycsXHJcbiAgICAgICAgICAgIFx0ZGF0ZTogJ2ZhIGZhLWNhbGVuZGFyJyxcclxuICAgICAgICAgICAgXHR1cDogJ2ZhIGZhLWNoZXZyb24tdXAnLFxyXG4gICAgICAgICAgICBcdGRvd246ICdmYSBmYS1jaGV2cm9uLWRvd24nXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBwaWNrZXIgPSB0aGlzLFxyXG4gICAgICAgICAgICBlcnJvcmVkID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGREYXRlLFxyXG5cclxuICAgICAgICBpbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0dmFyIGljb24gPSBmYWxzZSwgbG9jYWxlRGF0YSwgckludGVydmFsO1xyXG4gICAgICAgIFx0cGlja2VyLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xyXG4gICAgICAgIFx0cGlja2VyLm9wdGlvbnMuaWNvbnMgPSAkLmV4dGVuZCh7fSwgaWNvbnMsIHBpY2tlci5vcHRpb25zLmljb25zKTtcclxuXHJcbiAgICAgICAgXHRwaWNrZXIuZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgIFx0ZGF0YVRvT3B0aW9ucygpO1xyXG5cclxuICAgICAgICBcdGlmICghKHBpY2tlci5vcHRpb25zLnBpY2tUaW1lIHx8IHBpY2tlci5vcHRpb25zLnBpY2tEYXRlKSkge1xyXG4gICAgICAgIFx0XHR0aHJvdyBuZXcgRXJyb3IoJ011c3QgY2hvb3NlIGF0IGxlYXN0IG9uZSBwaWNrZXInKTtcclxuICAgICAgICBcdH1cclxuXHJcbiAgICAgICAgXHRwaWNrZXIuaWQgPSBkcGdJZCsrO1xyXG4gICAgICAgIFx0bW9tZW50LmxvY2FsZShwaWNrZXIub3B0aW9ucy5sYW5ndWFnZSk7XHJcbiAgICAgICAgXHRwaWNrZXIuZGF0ZSA9IG1vbWVudCgpO1xyXG4gICAgICAgIFx0cGlja2VyLnVuc2V0ID0gZmFsc2U7XHJcbiAgICAgICAgXHRwaWNrZXIuaXNJbnB1dCA9IHBpY2tlci5lbGVtZW50LmlzKCdpbnB1dCcpO1xyXG4gICAgICAgIFx0cGlja2VyLmNvbXBvbmVudCA9IGZhbHNlO1xyXG5cclxuICAgICAgICBcdGlmIChwaWNrZXIuZWxlbWVudC5oYXNDbGFzcygnaW5wdXQtZ3JvdXAnKSkge1xyXG4gICAgICAgIFx0XHRpZiAocGlja2VyLmVsZW1lbnQuZmluZCgnLmRhdGVwaWNrZXJidXR0b24nKS5zaXplKCkgPT09IDApIHsvL2luIGNhc2UgdGhlcmUgaXMgbW9yZSB0aGVuIG9uZSAnaW5wdXQtZ3JvdXAtYWRkb24nIElzc3VlICM0OFxyXG4gICAgICAgIFx0XHRcdHBpY2tlci5jb21wb25lbnQgPSBwaWNrZXIuZWxlbWVudC5maW5kKCdbY2xhc3NePVwiaW5wdXQtZ3JvdXAtXCJdJyk7XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdFx0ZWxzZSB7XHJcbiAgICAgICAgXHRcdFx0cGlja2VyLmNvbXBvbmVudCA9IHBpY2tlci5lbGVtZW50LmZpbmQoJy5kYXRlcGlja2VyYnV0dG9uJyk7XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHBpY2tlci5mb3JtYXQgPSBwaWNrZXIub3B0aW9ucy5mb3JtYXQ7XHJcblxyXG4gICAgICAgIFx0bG9jYWxlRGF0YSA9IG1vbWVudCgpLmxvY2FsZURhdGEoKTtcclxuXHJcbiAgICAgICAgXHRpZiAoIXBpY2tlci5mb3JtYXQpIHtcclxuICAgICAgICBcdFx0cGlja2VyLmZvcm1hdCA9IChwaWNrZXIub3B0aW9ucy5waWNrRGF0ZSA/IGxvY2FsZURhdGEubG9uZ0RhdGVGb3JtYXQoJ0wnKSA6ICcnKTtcclxuICAgICAgICBcdFx0aWYgKHBpY2tlci5vcHRpb25zLnBpY2tEYXRlICYmIHBpY2tlci5vcHRpb25zLnBpY2tUaW1lKSB7XHJcbiAgICAgICAgXHRcdFx0cGlja2VyLmZvcm1hdCArPSAnICc7XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdFx0cGlja2VyLmZvcm1hdCArPSAocGlja2VyLm9wdGlvbnMucGlja1RpbWUgPyBsb2NhbGVEYXRhLmxvbmdEYXRlRm9ybWF0KCdMVCcpIDogJycpO1xyXG4gICAgICAgIFx0XHRpZiAocGlja2VyLm9wdGlvbnMudXNlU2Vjb25kcykge1xyXG4gICAgICAgIFx0XHRcdGlmIChsb2NhbGVEYXRhLmxvbmdEYXRlRm9ybWF0KCdMVCcpLmluZGV4T2YoJyBBJykgIT09IC0xKSB7XHJcbiAgICAgICAgXHRcdFx0XHRwaWNrZXIuZm9ybWF0ID0gcGlja2VyLmZvcm1hdC5zcGxpdCgnIEEnKVswXSArICc6c3MgQSc7XHJcbiAgICAgICAgXHRcdFx0fVxyXG4gICAgICAgIFx0XHRcdGVsc2Uge1xyXG4gICAgICAgIFx0XHRcdFx0cGlja2VyLmZvcm1hdCArPSAnOnNzJztcclxuICAgICAgICBcdFx0XHR9XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHBpY2tlci51c2UyNGhvdXJzID0gKHBpY2tlci5mb3JtYXQudG9Mb3dlckNhc2UoKS5pbmRleE9mKCdhJykgPCAwICYmIHBpY2tlci5mb3JtYXQuaW5kZXhPZignaCcpIDwgMCk7XHJcblxyXG4gICAgICAgIFx0aWYgKHBpY2tlci5jb21wb25lbnQpIHtcclxuICAgICAgICBcdFx0aWNvbiA9IHBpY2tlci5jb21wb25lbnQuZmluZCgnc3BhbicpO1xyXG4gICAgICAgIFx0fVxyXG5cclxuICAgICAgICBcdGlmIChwaWNrZXIub3B0aW9ucy5waWNrVGltZSkge1xyXG4gICAgICAgIFx0XHRpZiAoaWNvbikge1xyXG4gICAgICAgIFx0XHRcdGljb24uYWRkQ2xhc3MocGlja2VyLm9wdGlvbnMuaWNvbnMudGltZSk7XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGlmIChwaWNrZXIub3B0aW9ucy5waWNrRGF0ZSkge1xyXG4gICAgICAgIFx0XHRpZiAoaWNvbikge1xyXG4gICAgICAgIFx0XHRcdGljb24ucmVtb3ZlQ2xhc3MocGlja2VyLm9wdGlvbnMuaWNvbnMudGltZSk7XHJcbiAgICAgICAgXHRcdFx0aWNvbi5hZGRDbGFzcyhwaWNrZXIub3B0aW9ucy5pY29ucy5kYXRlKTtcclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0fVxyXG5cclxuICAgICAgICBcdHBpY2tlci5vcHRpb25zLndpZGdldFBhcmVudCA9XHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgcGlja2VyLm9wdGlvbnMud2lkZ2V0UGFyZW50ID09PSAnc3RyaW5nJyAmJiBwaWNrZXIub3B0aW9ucy53aWRnZXRQYXJlbnQgfHxcclxuICAgICAgICAgICAgICAgIHBpY2tlci5lbGVtZW50LnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgXHRyZXR1cm4gJ3Njcm9sbCcgPT09ICQodGhpcykuY3NzKCdvdmVyZmxvdy15Jyk7XHJcbiAgICAgICAgICAgICAgICB9KS5nZXQoMCkgfHxcclxuICAgICAgICAgICAgICAgICdib2R5JztcclxuXHJcbiAgICAgICAgXHRwaWNrZXIud2lkZ2V0ID0gJChnZXRUZW1wbGF0ZSgpKS5hcHBlbmRUbyhwaWNrZXIub3B0aW9ucy53aWRnZXRQYXJlbnQpO1xyXG5cclxuICAgICAgICBcdHBpY2tlci5taW5WaWV3TW9kZSA9IHBpY2tlci5vcHRpb25zLm1pblZpZXdNb2RlIHx8IDA7XHJcbiAgICAgICAgXHRpZiAodHlwZW9mIHBpY2tlci5taW5WaWV3TW9kZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBcdFx0c3dpdGNoIChwaWNrZXIubWluVmlld01vZGUpIHtcclxuICAgICAgICBcdFx0XHRjYXNlICdtb250aHMnOlxyXG4gICAgICAgIFx0XHRcdFx0cGlja2VyLm1pblZpZXdNb2RlID0gMTtcclxuICAgICAgICBcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgIFx0XHRcdGNhc2UgJ3llYXJzJzpcclxuICAgICAgICBcdFx0XHRcdHBpY2tlci5taW5WaWV3TW9kZSA9IDI7XHJcbiAgICAgICAgXHRcdFx0XHRicmVhaztcclxuICAgICAgICBcdFx0XHRkZWZhdWx0OlxyXG4gICAgICAgIFx0XHRcdFx0cGlja2VyLm1pblZpZXdNb2RlID0gMDtcclxuICAgICAgICBcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRwaWNrZXIudmlld01vZGUgPSBwaWNrZXIub3B0aW9ucy52aWV3TW9kZSB8fCAwO1xyXG4gICAgICAgIFx0aWYgKHR5cGVvZiBwaWNrZXIudmlld01vZGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgXHRcdHN3aXRjaCAocGlja2VyLnZpZXdNb2RlKSB7XHJcbiAgICAgICAgXHRcdFx0Y2FzZSAnbW9udGhzJzpcclxuICAgICAgICBcdFx0XHRcdHBpY2tlci52aWV3TW9kZSA9IDE7XHJcbiAgICAgICAgXHRcdFx0XHRicmVhaztcclxuICAgICAgICBcdFx0XHRjYXNlICd5ZWFycyc6XHJcbiAgICAgICAgXHRcdFx0XHRwaWNrZXIudmlld01vZGUgPSAyO1xyXG4gICAgICAgIFx0XHRcdFx0YnJlYWs7XHJcbiAgICAgICAgXHRcdFx0ZGVmYXVsdDpcclxuICAgICAgICBcdFx0XHRcdHBpY2tlci52aWV3TW9kZSA9IDA7XHJcbiAgICAgICAgXHRcdFx0XHRicmVhaztcclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0fVxyXG5cclxuICAgICAgICBcdHBpY2tlci52aWV3TW9kZSA9IE1hdGgubWF4KHBpY2tlci52aWV3TW9kZSwgcGlja2VyLm1pblZpZXdNb2RlKTtcclxuXHJcbiAgICAgICAgXHRwaWNrZXIub3B0aW9ucy5kaXNhYmxlZERhdGVzID0gaW5kZXhHaXZlbkRhdGVzKHBpY2tlci5vcHRpb25zLmRpc2FibGVkRGF0ZXMpO1xyXG4gICAgICAgIFx0cGlja2VyLm9wdGlvbnMuZW5hYmxlZERhdGVzID0gaW5kZXhHaXZlbkRhdGVzKHBpY2tlci5vcHRpb25zLmVuYWJsZWREYXRlcyk7XHJcblxyXG4gICAgICAgIFx0cGlja2VyLnN0YXJ0Vmlld01vZGUgPSBwaWNrZXIudmlld01vZGU7XHJcbiAgICAgICAgXHRwaWNrZXIuc2V0TWluRGF0ZShwaWNrZXIub3B0aW9ucy5taW5EYXRlKTtcclxuICAgICAgICBcdHBpY2tlci5zZXRNYXhEYXRlKHBpY2tlci5vcHRpb25zLm1heERhdGUpO1xyXG4gICAgICAgIFx0ZmlsbERvdygpO1xyXG4gICAgICAgIFx0ZmlsbE1vbnRocygpO1xyXG4gICAgICAgIFx0ZmlsbEhvdXJzKCk7XHJcbiAgICAgICAgXHRmaWxsTWludXRlcygpO1xyXG4gICAgICAgIFx0ZmlsbFNlY29uZHMoKTtcclxuICAgICAgICBcdHVwZGF0ZSgpO1xyXG4gICAgICAgIFx0c2hvd01vZGUoKTtcclxuICAgICAgICBcdGlmICghZ2V0UGlja2VySW5wdXQoKS5wcm9wKCdkaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgXHRcdGF0dGFjaERhdGVQaWNrZXJFdmVudHMoKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGlmIChwaWNrZXIub3B0aW9ucy5kZWZhdWx0RGF0ZSAhPT0gJycgJiYgZ2V0UGlja2VySW5wdXQoKS52YWwoKSA9PT0gJycpIHtcclxuICAgICAgICBcdFx0cGlja2VyLnNldFZhbHVlKHBpY2tlci5vcHRpb25zLmRlZmF1bHREYXRlKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGlmIChwaWNrZXIub3B0aW9ucy5taW51dGVTdGVwcGluZyAhPT0gMSkge1xyXG4gICAgICAgIFx0XHRySW50ZXJ2YWwgPSBwaWNrZXIub3B0aW9ucy5taW51dGVTdGVwcGluZztcclxuICAgICAgICBcdFx0cGlja2VyLmRhdGUubWludXRlcygoTWF0aC5yb3VuZChwaWNrZXIuZGF0ZS5taW51dGVzKCkgLyBySW50ZXJ2YWwpICogckludGVydmFsKSAlIDYwKS5zZWNvbmRzKDApO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldFBpY2tlcklucHV0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0dmFyIGlucHV0O1xyXG5cclxuICAgICAgICBcdGlmIChwaWNrZXIuaXNJbnB1dCkge1xyXG4gICAgICAgIFx0XHRyZXR1cm4gcGlja2VyLmVsZW1lbnQ7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpbnB1dCA9IHBpY2tlci5lbGVtZW50LmZpbmQoJy5kYXRlcGlja2VyaW5wdXQnKTtcclxuICAgICAgICBcdGlmIChpbnB1dC5zaXplKCkgPT09IDApIHtcclxuICAgICAgICBcdFx0aW5wdXQgPSBwaWNrZXIuZWxlbWVudC5maW5kKCdpbnB1dCcpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0ZWxzZSBpZiAoIWlucHV0LmlzKCdpbnB1dCcpKSB7XHJcbiAgICAgICAgXHRcdHRocm93IG5ldyBFcnJvcignQ1NTIGNsYXNzIFwiZGF0ZXBpY2tlcmlucHV0XCIgY2Fubm90IGJlIGFwcGxpZWQgdG8gbm9uIGlucHV0IGVsZW1lbnQnKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHJldHVybiBpbnB1dDtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBkYXRhVG9PcHRpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0dmFyIGVEYXRhO1xyXG4gICAgICAgIFx0aWYgKHBpY2tlci5lbGVtZW50LmlzKCdpbnB1dCcpKSB7XHJcbiAgICAgICAgXHRcdGVEYXRhID0gcGlja2VyLmVsZW1lbnQuZGF0YSgpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0ZWxzZSB7XHJcbiAgICAgICAgXHRcdGVEYXRhID0gcGlja2VyLmVsZW1lbnQuZmluZCgnaW5wdXQnKS5kYXRhKCk7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAoZURhdGEuZGF0ZUZvcm1hdCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci5vcHRpb25zLmZvcm1hdCA9IGVEYXRhLmRhdGVGb3JtYXQ7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAoZURhdGEuZGF0ZVBpY2tkYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBcdFx0cGlja2VyLm9wdGlvbnMucGlja0RhdGUgPSBlRGF0YS5kYXRlUGlja2RhdGU7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAoZURhdGEuZGF0ZVBpY2t0aW1lICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBcdFx0cGlja2VyLm9wdGlvbnMucGlja1RpbWUgPSBlRGF0YS5kYXRlUGlja3RpbWU7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAoZURhdGEuZGF0ZVVzZW1pbnV0ZXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIub3B0aW9ucy51c2VNaW51dGVzID0gZURhdGEuZGF0ZVVzZW1pbnV0ZXM7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAoZURhdGEuZGF0ZVVzZXNlY29uZHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIub3B0aW9ucy51c2VTZWNvbmRzID0gZURhdGEuZGF0ZVVzZXNlY29uZHM7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAoZURhdGEuZGF0ZVVzZWN1cnJlbnQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIub3B0aW9ucy51c2VDdXJyZW50ID0gZURhdGEuZGF0ZVVzZWN1cnJlbnQ7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAoZURhdGEuY2FsZW5kYXJXZWVrcyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci5vcHRpb25zLmNhbGVuZGFyV2Vla3MgPSBlRGF0YS5jYWxlbmRhcldlZWtzO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVNaW51dGVzdGVwcGluZyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci5vcHRpb25zLm1pbnV0ZVN0ZXBwaW5nID0gZURhdGEuZGF0ZU1pbnV0ZXN0ZXBwaW5nO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVNaW5kYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBcdFx0cGlja2VyLm9wdGlvbnMubWluRGF0ZSA9IGVEYXRhLmRhdGVNaW5kYXRlO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVNYXhkYXRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBcdFx0cGlja2VyLm9wdGlvbnMubWF4RGF0ZSA9IGVEYXRhLmRhdGVNYXhkYXRlO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVTaG93dG9kYXkgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIub3B0aW9ucy5zaG93VG9kYXkgPSBlRGF0YS5kYXRlU2hvd3RvZGF5O1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVDb2xsYXBzZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci5vcHRpb25zLmNvbGxhcHNlID0gZURhdGEuZGF0ZUNvbGxhcHNlO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVMYW5ndWFnZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci5vcHRpb25zLmxhbmd1YWdlID0gZURhdGEuZGF0ZUxhbmd1YWdlO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVEZWZhdWx0ZGF0ZSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci5vcHRpb25zLmRlZmF1bHREYXRlID0gZURhdGEuZGF0ZURlZmF1bHRkYXRlO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVEaXNhYmxlZGRhdGVzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBcdFx0cGlja2VyLm9wdGlvbnMuZGlzYWJsZWREYXRlcyA9IGVEYXRhLmRhdGVEaXNhYmxlZGRhdGVzO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVFbmFibGVkZGF0ZXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIub3B0aW9ucy5lbmFibGVkRGF0ZXMgPSBlRGF0YS5kYXRlRW5hYmxlZGRhdGVzO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVJY29ucyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci5vcHRpb25zLmljb25zID0gZURhdGEuZGF0ZUljb25zO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVVc2VzdHJpY3QgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIub3B0aW9ucy51c2VTdHJpY3QgPSBlRGF0YS5kYXRlVXNlc3RyaWN0O1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVEaXJlY3Rpb24gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIub3B0aW9ucy5kaXJlY3Rpb24gPSBlRGF0YS5kYXRlRGlyZWN0aW9uO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVTaWRlYnlzaWRlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBcdFx0cGlja2VyLm9wdGlvbnMuc2lkZUJ5U2lkZSA9IGVEYXRhLmRhdGVTaWRlYnlzaWRlO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGVEYXRhLmRhdGVEYXlzb2Z3ZWVrZGlzYWJsZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIub3B0aW9ucy5kYXlzT2ZXZWVrRGlzYWJsZWQgPSBlRGF0YS5kYXRlRGF5c29md2Vla2Rpc2FibGVkO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHBsYWNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0dmFyIHBvc2l0aW9uID0gJ2Fic29sdXRlJyxcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IHBpY2tlci5jb21wb25lbnQgPyBwaWNrZXIuY29tcG9uZW50Lm9mZnNldCgpIDogcGlja2VyLmVsZW1lbnQub2Zmc2V0KCksXHJcbiAgICAgICAgICAgICAgICAkd2luZG93ID0gJCh3aW5kb3cpLFxyXG4gICAgICAgICAgICAgICAgcGxhY2VQb3NpdGlvbjtcclxuXHJcbiAgICAgICAgXHRwaWNrZXIud2lkdGggPSBwaWNrZXIuY29tcG9uZW50ID8gcGlja2VyLmNvbXBvbmVudC5vdXRlcldpZHRoKCkgOiBwaWNrZXIuZWxlbWVudC5vdXRlcldpZHRoKCk7XHJcbiAgICAgICAgXHRvZmZzZXQudG9wID0gb2Zmc2V0LnRvcCArIHBpY2tlci5lbGVtZW50Lm91dGVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgIFx0aWYgKHBpY2tlci5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3VwJykge1xyXG4gICAgICAgIFx0XHRwbGFjZVBvc2l0aW9uID0gJ3RvcCc7XHJcbiAgICAgICAgXHR9IGVsc2UgaWYgKHBpY2tlci5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ2JvdHRvbScpIHtcclxuICAgICAgICBcdFx0cGxhY2VQb3NpdGlvbiA9ICdib3R0b20nO1xyXG4gICAgICAgIFx0fSBlbHNlIGlmIChwaWNrZXIub3B0aW9ucy5kaXJlY3Rpb24gPT09ICdhdXRvJykge1xyXG4gICAgICAgIFx0XHRpZiAob2Zmc2V0LnRvcCArIHBpY2tlci53aWRnZXQuaGVpZ2h0KCkgPiAkd2luZG93LmhlaWdodCgpICsgJHdpbmRvdy5zY3JvbGxUb3AoKSAmJiBwaWNrZXIud2lkZ2V0LmhlaWdodCgpICsgcGlja2VyLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSA8IG9mZnNldC50b3ApIHtcclxuICAgICAgICBcdFx0XHRwbGFjZVBvc2l0aW9uID0gJ3RvcCc7XHJcbiAgICAgICAgXHRcdH0gZWxzZSB7XHJcbiAgICAgICAgXHRcdFx0cGxhY2VQb3NpdGlvbiA9ICdib3R0b20nO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAocGxhY2VQb3NpdGlvbiA9PT0gJ3RvcCcpIHtcclxuICAgICAgICBcdFx0b2Zmc2V0LmJvdHRvbSA9ICR3aW5kb3cuaGVpZ2h0KCkgLSBvZmZzZXQudG9wICsgcGlja2VyLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSArIDM7XHJcbiAgICAgICAgXHRcdHBpY2tlci53aWRnZXQuYWRkQ2xhc3MoJ3RvcCcpLnJlbW92ZUNsYXNzKCdib3R0b20nKTtcclxuICAgICAgICBcdH0gZWxzZSB7XHJcbiAgICAgICAgXHRcdG9mZnNldC50b3AgKz0gMTtcclxuICAgICAgICBcdFx0b2Zmc2V0LnRvcCArPSBwaWNrZXIub3B0aW9ucy5lbGVtZW50SGVpZ2h0O1xyXG4gICAgICAgIFx0XHRwaWNrZXIud2lkZ2V0LmFkZENsYXNzKCdib3R0b20nKS5yZW1vdmVDbGFzcygndG9wJyk7XHJcbiAgICAgICAgXHR9XHJcblxyXG4gICAgICAgIFx0aWYgKHBpY2tlci5vcHRpb25zLndpZHRoICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC53aWR0aChwaWNrZXIub3B0aW9ucy53aWR0aCk7XHJcbiAgICAgICAgXHR9XHJcblxyXG4gICAgICAgIFx0aWYgKHBpY2tlci5vcHRpb25zLm9yaWVudGF0aW9uID09PSAnbGVmdCcpIHtcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC5hZGRDbGFzcygnbGVmdC1vcmllbnRlZCcpO1xyXG4gICAgICAgIFx0XHRvZmZzZXQubGVmdCA9IG9mZnNldC5sZWZ0IC0gcGlja2VyLndpZGdldC53aWR0aCgpICsgMjA7XHJcbiAgICAgICAgXHR9XHJcblxyXG4gICAgICAgIFx0aWYgKGlzSW5GaXhlZCgpKSB7XHJcbiAgICAgICAgXHRcdHBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICBcdFx0b2Zmc2V0LnRvcCAtPSAkd2luZG93LnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIFx0XHRvZmZzZXQubGVmdCAtPSAkd2luZG93LnNjcm9sbExlZnQoKTtcclxuICAgICAgICBcdH1cclxuXHJcbiAgICAgICAgXHRpZiAoJHdpbmRvdy53aWR0aCgpIDwgb2Zmc2V0LmxlZnQgKyBwaWNrZXIud2lkZ2V0Lm91dGVyV2lkdGgoKSkge1xyXG4gICAgICAgIFx0XHRvZmZzZXQucmlnaHQgPSAkd2luZG93LndpZHRoKCkgLSBvZmZzZXQubGVmdCAtIHBpY2tlci53aWR0aDtcclxuICAgICAgICBcdFx0b2Zmc2V0LmxlZnQgPSAnYXV0byc7XHJcbiAgICAgICAgXHRcdHBpY2tlci53aWRnZXQuYWRkQ2xhc3MoJ3B1bGwtcmlnaHQnKTtcclxuICAgICAgICBcdH0gZWxzZSB7XHJcbiAgICAgICAgXHRcdG9mZnNldC5yaWdodCA9ICdhdXRvJztcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC5yZW1vdmVDbGFzcygncHVsbC1yaWdodCcpO1xyXG4gICAgICAgIFx0fVxyXG5cclxuICAgICAgICBcdGlmIChwbGFjZVBvc2l0aW9uID09PSAndG9wJykge1xyXG4gICAgICAgIFx0XHRwaWNrZXIud2lkZ2V0LmNzcyh7XHJcbiAgICAgICAgXHRcdFx0cG9zaXRpb246IHBvc2l0aW9uLFxyXG4gICAgICAgIFx0XHRcdGJvdHRvbTogb2Zmc2V0LmJvdHRvbSxcclxuICAgICAgICBcdFx0XHR0b3A6ICdhdXRvJyxcclxuICAgICAgICBcdFx0XHRsZWZ0OiBvZmZzZXQubGVmdCxcclxuICAgICAgICBcdFx0XHRyaWdodDogb2Zmc2V0LnJpZ2h0XHJcbiAgICAgICAgXHRcdH0pO1xyXG4gICAgICAgIFx0fSBlbHNlIHtcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC5jc3Moe1xyXG4gICAgICAgIFx0XHRcdHBvc2l0aW9uOiBwb3NpdGlvbixcclxuICAgICAgICBcdFx0XHR0b3A6IG9mZnNldC50b3AsXHJcbiAgICAgICAgXHRcdFx0Ym90dG9tOiAnYXV0bycsXHJcbiAgICAgICAgXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgXHRcdFx0cmlnaHQ6IG9mZnNldC5yaWdodFxyXG4gICAgICAgIFx0XHR9KTtcclxuICAgICAgICBcdH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBub3RpZnlDaGFuZ2UgPSBmdW5jdGlvbiAob2xkRGF0ZSwgZXZlbnRUeXBlKSB7XHJcbiAgICAgICAgXHRpZiAobW9tZW50KHBpY2tlci5kYXRlKS5pc1NhbWUobW9tZW50KG9sZERhdGUpKSAmJiAhZXJyb3JlZCkge1xyXG4gICAgICAgIFx0XHRyZXR1cm47XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRlcnJvcmVkID0gZmFsc2U7XHJcbiAgICAgICAgXHRwaWNrZXIuZWxlbWVudC50cmlnZ2VyKHtcclxuICAgICAgICBcdFx0dHlwZTogJ2RwLmNoYW5nZScsXHJcbiAgICAgICAgXHRcdGRhdGU6IG1vbWVudChwaWNrZXIuZGF0ZSksXHJcbiAgICAgICAgXHRcdG9sZERhdGU6IG1vbWVudChvbGREYXRlKVxyXG4gICAgICAgIFx0fSk7XHJcblxyXG4gICAgICAgIFx0aWYgKGV2ZW50VHlwZSAhPT0gJ2NoYW5nZScpIHtcclxuICAgICAgICBcdFx0cGlja2VyLmVsZW1lbnQuY2hhbmdlKCk7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgbm90aWZ5RXJyb3IgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgIFx0ZXJyb3JlZCA9IHRydWU7XHJcbiAgICAgICAgXHRwaWNrZXIuZWxlbWVudC50cmlnZ2VyKHtcclxuICAgICAgICBcdFx0dHlwZTogJ2RwLmVycm9yJyxcclxuICAgICAgICBcdFx0ZGF0ZTogbW9tZW50KGRhdGUsIHBpY2tlci5mb3JtYXQsIHBpY2tlci5vcHRpb25zLnVzZVN0cmljdClcclxuICAgICAgICBcdH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHVwZGF0ZSA9IGZ1bmN0aW9uIChuZXdEYXRlKSB7XHJcbiAgICAgICAgXHRtb21lbnQubG9jYWxlKHBpY2tlci5vcHRpb25zLmxhbmd1YWdlKTtcclxuICAgICAgICBcdHZhciBkYXRlU3RyID0gbmV3RGF0ZTtcclxuICAgICAgICBcdGlmICghZGF0ZVN0cikge1xyXG4gICAgICAgIFx0XHRkYXRlU3RyID0gZ2V0UGlja2VySW5wdXQoKS52YWwoKTtcclxuICAgICAgICBcdFx0aWYgKGRhdGVTdHIpIHtcclxuICAgICAgICBcdFx0XHRwaWNrZXIuZGF0ZSA9IG1vbWVudChkYXRlU3RyLCBwaWNrZXIuZm9ybWF0LCBwaWNrZXIub3B0aW9ucy51c2VTdHJpY3QpO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHRcdGlmICghcGlja2VyLmRhdGUpIHtcclxuICAgICAgICBcdFx0XHRwaWNrZXIuZGF0ZSA9IG1vbWVudCgpO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRwaWNrZXIudmlld0RhdGUgPSBtb21lbnQocGlja2VyLmRhdGUpLnN0YXJ0T2YoJ21vbnRoJyk7XHJcbiAgICAgICAgXHRmaWxsRGF0ZSgpO1xyXG4gICAgICAgIFx0ZmlsbFRpbWUoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBmaWxsRG93ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0bW9tZW50LmxvY2FsZShwaWNrZXIub3B0aW9ucy5sYW5ndWFnZSk7XHJcbiAgICAgICAgXHR2YXIgaHRtbCA9ICQoJzx0cj4nKSwgd2Vla2RheXNNaW4gPSBtb21lbnQud2Vla2RheXNNaW4oKSwgaTtcclxuICAgICAgICBcdGlmIChwaWNrZXIub3B0aW9ucy5jYWxlbmRhcldlZWtzID09PSB0cnVlKSB7XHJcbiAgICAgICAgXHRcdGh0bWwuYXBwZW5kKCc8dGggY2xhc3M9XCJjd1wiPiM8L3RoPicpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKG1vbWVudCgpLmxvY2FsZURhdGEoKS5fd2Vlay5kb3cgPT09IDApIHsgLy8gc3RhcnRzIG9uIFN1bmRheVxyXG4gICAgICAgIFx0XHRmb3IgKGkgPSAwOyBpIDwgNzsgaSsrKSB7XHJcbiAgICAgICAgXHRcdFx0aHRtbC5hcHBlbmQoJzx0aCBjbGFzcz1cImRvd1wiPicgKyB3ZWVrZGF5c01pbltpXSArICc8L3RoPicpO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRmb3IgKGkgPSAxOyBpIDwgODsgaSsrKSB7XHJcbiAgICAgICAgXHRcdFx0aWYgKGkgPT09IDcpIHtcclxuICAgICAgICBcdFx0XHRcdGh0bWwuYXBwZW5kKCc8dGggY2xhc3M9XCJkb3dcIj4nICsgd2Vla2RheXNNaW5bMF0gKyAnPC90aD4nKTtcclxuICAgICAgICBcdFx0XHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRcdFx0aHRtbC5hcHBlbmQoJzx0aCBjbGFzcz1cImRvd1wiPicgKyB3ZWVrZGF5c01pbltpXSArICc8L3RoPicpO1xyXG4gICAgICAgIFx0XHRcdH1cclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0cGlja2VyLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1kYXlzIHRoZWFkJykuYXBwZW5kKGh0bWwpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGZpbGxNb250aHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRtb21lbnQubG9jYWxlKHBpY2tlci5vcHRpb25zLmxhbmd1YWdlKTtcclxuICAgICAgICBcdHZhciBodG1sID0gJycsIGksIG1vbnRoc1Nob3J0ID0gbW9tZW50Lm1vbnRoc1Nob3J0KCk7XHJcbiAgICAgICAgXHRmb3IgKGkgPSAwOyBpIDwgMTI7IGkrKykge1xyXG4gICAgICAgIFx0XHRodG1sICs9ICc8c3BhbiBjbGFzcz1cIm1vbnRoXCI+JyArIG1vbnRoc1Nob3J0W2ldICsgJzwvc3Bhbj4nO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0cGlja2VyLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1tb250aHMgdGQnKS5hcHBlbmQoaHRtbCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZmlsbERhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRpZiAoIXBpY2tlci5vcHRpb25zLnBpY2tEYXRlKSB7XHJcbiAgICAgICAgXHRcdHJldHVybjtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdG1vbWVudC5sb2NhbGUocGlja2VyLm9wdGlvbnMubGFuZ3VhZ2UpO1xyXG4gICAgICAgIFx0dmFyIHllYXIgPSBwaWNrZXIudmlld0RhdGUueWVhcigpLFxyXG4gICAgICAgICAgICAgICAgbW9udGggPSBwaWNrZXIudmlld0RhdGUubW9udGgoKSxcclxuICAgICAgICAgICAgICAgIHN0YXJ0WWVhciA9IHBpY2tlci5vcHRpb25zLm1pbkRhdGUueWVhcigpLFxyXG4gICAgICAgICAgICAgICAgc3RhcnRNb250aCA9IHBpY2tlci5vcHRpb25zLm1pbkRhdGUubW9udGgoKSxcclxuICAgICAgICAgICAgICAgIGVuZFllYXIgPSBwaWNrZXIub3B0aW9ucy5tYXhEYXRlLnllYXIoKSxcclxuICAgICAgICAgICAgICAgIGVuZE1vbnRoID0gcGlja2VyLm9wdGlvbnMubWF4RGF0ZS5tb250aCgpLFxyXG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUsXHJcbiAgICAgICAgICAgICAgICBwcmV2TW9udGgsIG5leHRNb250aCwgaHRtbCA9IFtdLCByb3csIGNsc05hbWUsIGksIGRheXMsIHllYXJDb250LCBjdXJyZW50WWVhciwgbW9udGhzID0gbW9tZW50Lm1vbnRocygpO1xyXG5cclxuICAgICAgICBcdHBpY2tlci53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXItZGF5cycpLmZpbmQoJy5kaXNhYmxlZCcpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIFx0cGlja2VyLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1tb250aHMnKS5maW5kKCcuZGlzYWJsZWQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBcdHBpY2tlci53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXIteWVhcnMnKS5maW5kKCcuZGlzYWJsZWQnKS5yZW1vdmVDbGFzcygnZGlzYWJsZWQnKTtcclxuXHJcbiAgICAgICAgXHRwaWNrZXIud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyLWRheXMgdGg6ZXEoMSknKS50ZXh0KFxyXG4gICAgICAgICAgICAgICAgbW9udGhzW21vbnRoXSArICcgJyArIHllYXIpO1xyXG5cclxuICAgICAgICBcdHByZXZNb250aCA9IG1vbWVudChwaWNrZXIudmlld0RhdGUsIHBpY2tlci5mb3JtYXQsIHBpY2tlci5vcHRpb25zLnVzZVN0cmljdCkuc3VidHJhY3QoMSwgJ21vbnRocycpO1xyXG4gICAgICAgIFx0ZGF5cyA9IHByZXZNb250aC5kYXlzSW5Nb250aCgpO1xyXG4gICAgICAgIFx0cHJldk1vbnRoLmRhdGUoZGF5cykuc3RhcnRPZignd2VlaycpO1xyXG4gICAgICAgIFx0aWYgKCh5ZWFyID09PSBzdGFydFllYXIgJiYgbW9udGggPD0gc3RhcnRNb250aCkgfHwgeWVhciA8IHN0YXJ0WWVhcikge1xyXG4gICAgICAgIFx0XHRwaWNrZXIud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyLWRheXMgdGg6ZXEoMCknKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGlmICgoeWVhciA9PT0gZW5kWWVhciAmJiBtb250aCA+PSBlbmRNb250aCkgfHwgeWVhciA+IGVuZFllYXIpIHtcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1kYXlzIHRoOmVxKDIpJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgXHR9XHJcblxyXG4gICAgICAgIFx0bmV4dE1vbnRoID0gbW9tZW50KHByZXZNb250aCkuYWRkKDQyLCAnZCcpO1xyXG4gICAgICAgIFx0d2hpbGUgKHByZXZNb250aC5pc0JlZm9yZShuZXh0TW9udGgpKSB7XHJcbiAgICAgICAgXHRcdGlmIChwcmV2TW9udGgud2Vla2RheSgpID09PSBtb21lbnQoKS5zdGFydE9mKCd3ZWVrJykud2Vla2RheSgpKSB7XHJcbiAgICAgICAgXHRcdFx0cm93ID0gJCgnPHRyPicpO1xyXG4gICAgICAgIFx0XHRcdGh0bWwucHVzaChyb3cpO1xyXG4gICAgICAgIFx0XHRcdGlmIChwaWNrZXIub3B0aW9ucy5jYWxlbmRhcldlZWtzID09PSB0cnVlKSB7XHJcbiAgICAgICAgXHRcdFx0XHRyb3cuYXBwZW5kKCc8dGQgY2xhc3M9XCJjd1wiPicgKyBwcmV2TW9udGgud2VlaygpICsgJzwvdGQ+Jyk7XHJcbiAgICAgICAgXHRcdFx0fVxyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHRcdGNsc05hbWUgPSAnJztcclxuICAgICAgICBcdFx0aWYgKHByZXZNb250aC55ZWFyKCkgPCB5ZWFyIHx8IChwcmV2TW9udGgueWVhcigpID09PSB5ZWFyICYmIHByZXZNb250aC5tb250aCgpIDwgbW9udGgpKSB7XHJcbiAgICAgICAgXHRcdFx0Y2xzTmFtZSArPSAnIG9sZCc7XHJcbiAgICAgICAgXHRcdH0gZWxzZSBpZiAocHJldk1vbnRoLnllYXIoKSA+IHllYXIgfHwgKHByZXZNb250aC55ZWFyKCkgPT09IHllYXIgJiYgcHJldk1vbnRoLm1vbnRoKCkgPiBtb250aCkpIHtcclxuICAgICAgICBcdFx0XHRjbHNOYW1lICs9ICcgbmV3JztcclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0XHRpZiAocHJldk1vbnRoLmlzU2FtZShtb21lbnQoeyB5OiBwaWNrZXIuZGF0ZS55ZWFyKCksIE06IHBpY2tlci5kYXRlLm1vbnRoKCksIGQ6IHBpY2tlci5kYXRlLmRhdGUoKSB9KSkpIHtcclxuICAgICAgICBcdFx0XHRjbHNOYW1lICs9ICcgYWN0aXZlJztcclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0XHRpZiAoaXNJbkRpc2FibGVEYXRlcyhwcmV2TW9udGgsICdkYXknKSB8fCAhaXNJbkVuYWJsZURhdGVzKHByZXZNb250aCkpIHtcclxuICAgICAgICBcdFx0XHRjbHNOYW1lICs9ICcgZGlzYWJsZWQnO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHRcdGlmIChwaWNrZXIub3B0aW9ucy5zaG93VG9kYXkgPT09IHRydWUpIHtcclxuICAgICAgICBcdFx0XHRpZiAocHJldk1vbnRoLmlzU2FtZShtb21lbnQoKSwgJ2RheScpKSB7XHJcbiAgICAgICAgXHRcdFx0XHRjbHNOYW1lICs9ICcgdG9kYXknO1xyXG4gICAgICAgIFx0XHRcdH1cclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0XHRpZiAocGlja2VyLm9wdGlvbnMuZGF5c09mV2Vla0Rpc2FibGVkKSB7XHJcbiAgICAgICAgXHRcdFx0Zm9yIChpID0gMDsgaSA8IHBpY2tlci5vcHRpb25zLmRheXNPZldlZWtEaXNhYmxlZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIFx0XHRcdFx0aWYgKHByZXZNb250aC5kYXkoKSA9PT0gcGlja2VyLm9wdGlvbnMuZGF5c09mV2Vla0Rpc2FibGVkW2ldKSB7XHJcbiAgICAgICAgXHRcdFx0XHRcdGNsc05hbWUgKz0gJyBkaXNhYmxlZCc7XHJcbiAgICAgICAgXHRcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgIFx0XHRcdFx0fVxyXG4gICAgICAgIFx0XHRcdH1cclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0XHRyb3cuYXBwZW5kKCc8dGQgY2xhc3M9XCJkYXknICsgY2xzTmFtZSArICdcIj4nICsgcHJldk1vbnRoLmRhdGUoKSArICc8L3RkPicpO1xyXG5cclxuICAgICAgICBcdFx0Y3VycmVudERhdGUgPSBwcmV2TW9udGguZGF0ZSgpO1xyXG4gICAgICAgIFx0XHRwcmV2TW9udGguYWRkKDEsICdkJyk7XHJcblxyXG4gICAgICAgIFx0XHRpZiAoY3VycmVudERhdGUgPT09IHByZXZNb250aC5kYXRlKCkpIHtcclxuICAgICAgICBcdFx0XHRwcmV2TW9udGguYWRkKDEsICdkJyk7XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHBpY2tlci53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXItZGF5cyB0Ym9keScpLmVtcHR5KCkuYXBwZW5kKGh0bWwpO1xyXG4gICAgICAgIFx0Y3VycmVudFllYXIgPSBwaWNrZXIuZGF0ZS55ZWFyKCk7XHJcbiAgICAgICAgXHRtb250aHMgPSBwaWNrZXIud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyLW1vbnRocycpLmZpbmQoJ3RoOmVxKDEpJykudGV4dCh5ZWFyKS5lbmQoKS5maW5kKCdzcGFuJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIFx0aWYgKGN1cnJlbnRZZWFyID09PSB5ZWFyKSB7XHJcbiAgICAgICAgXHRcdG1vbnRocy5lcShwaWNrZXIuZGF0ZS5tb250aCgpKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAoeWVhciAtIDEgPCBzdGFydFllYXIpIHtcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1tb250aHMgdGg6ZXEoMCknKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGlmICh5ZWFyICsgMSA+IGVuZFllYXIpIHtcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci1tb250aHMgdGg6ZXEoMiknKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGZvciAoaSA9IDA7IGkgPCAxMjsgaSsrKSB7XHJcbiAgICAgICAgXHRcdGlmICgoeWVhciA9PT0gc3RhcnRZZWFyICYmIHN0YXJ0TW9udGggPiBpKSB8fCAoeWVhciA8IHN0YXJ0WWVhcikpIHtcclxuICAgICAgICBcdFx0XHQkKG1vbnRoc1tpXSkuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgXHRcdH0gZWxzZSBpZiAoKHllYXIgPT09IGVuZFllYXIgJiYgZW5kTW9udGggPCBpKSB8fCAoeWVhciA+IGVuZFllYXIpKSB7XHJcbiAgICAgICAgXHRcdFx0JChtb250aHNbaV0pLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHR9XHJcblxyXG4gICAgICAgIFx0aHRtbCA9ICcnO1xyXG4gICAgICAgIFx0eWVhciA9IHBhcnNlSW50KHllYXIgLyAxMCwgMTApICogMTA7XHJcbiAgICAgICAgXHR5ZWFyQ29udCA9IHBpY2tlci53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXIteWVhcnMnKS5maW5kKFxyXG4gICAgICAgICAgICAgICAgJ3RoOmVxKDEpJykudGV4dCh5ZWFyICsgJy0nICsgKHllYXIgKyA5KSkucGFyZW50cygndGFibGUnKS5maW5kKCd0ZCcpO1xyXG4gICAgICAgIFx0cGlja2VyLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci15ZWFycycpLmZpbmQoJ3RoJykucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgXHRpZiAoc3RhcnRZZWFyID4geWVhcikge1xyXG4gICAgICAgIFx0XHRwaWNrZXIud2lkZ2V0LmZpbmQoJy5kYXRlcGlja2VyLXllYXJzJykuZmluZCgndGg6ZXEoMCknKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGlmIChlbmRZZWFyIDwgeWVhciArIDkpIHtcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC5maW5kKCcuZGF0ZXBpY2tlci15ZWFycycpLmZpbmQoJ3RoOmVxKDIpJykuYWRkQ2xhc3MoJ2Rpc2FibGVkJyk7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHR5ZWFyIC09IDE7XHJcbiAgICAgICAgXHRmb3IgKGkgPSAtMTsgaSA8IDExOyBpKyspIHtcclxuICAgICAgICBcdFx0aHRtbCArPSAnPHNwYW4gY2xhc3M9XCJ5ZWFyJyArIChpID09PSAtMSB8fCBpID09PSAxMCA/ICcgb2xkJyA6ICcnKSArIChjdXJyZW50WWVhciA9PT0geWVhciA/ICcgYWN0aXZlJyA6ICcnKSArICgoeWVhciA8IHN0YXJ0WWVhciB8fCB5ZWFyID4gZW5kWWVhcikgPyAnIGRpc2FibGVkJyA6ICcnKSArICdcIj4nICsgeWVhciArICc8L3NwYW4+JztcclxuICAgICAgICBcdFx0eWVhciArPSAxO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0eWVhckNvbnQuaHRtbChodG1sKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBmaWxsSG91cnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRtb21lbnQubG9jYWxlKHBpY2tlci5vcHRpb25zLmxhbmd1YWdlKTtcclxuICAgICAgICBcdHZhciB0YWJsZSA9IHBpY2tlci53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItaG91cnMgdGFibGUnKSwgaHRtbCA9ICcnLCBjdXJyZW50LCBpLCBqO1xyXG4gICAgICAgIFx0dGFibGUucGFyZW50KCkuaGlkZSgpO1xyXG4gICAgICAgIFx0aWYgKHBpY2tlci51c2UyNGhvdXJzKSB7XHJcbiAgICAgICAgXHRcdGN1cnJlbnQgPSAwO1xyXG4gICAgICAgIFx0XHRmb3IgKGkgPSAwOyBpIDwgNjsgaSArPSAxKSB7XHJcbiAgICAgICAgXHRcdFx0aHRtbCArPSAnPHRyPic7XHJcbiAgICAgICAgXHRcdFx0Zm9yIChqID0gMDsgaiA8IDQ7IGogKz0gMSkge1xyXG4gICAgICAgIFx0XHRcdFx0aHRtbCArPSAnPHRkIGNsYXNzPVwiaG91clwiPicgKyBwYWRMZWZ0KGN1cnJlbnQudG9TdHJpbmcoKSkgKyAnPC90ZD4nO1xyXG4gICAgICAgIFx0XHRcdFx0Y3VycmVudCsrO1xyXG4gICAgICAgIFx0XHRcdH1cclxuICAgICAgICBcdFx0XHRodG1sICs9ICc8L3RyPic7XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGVsc2Uge1xyXG4gICAgICAgIFx0XHRjdXJyZW50ID0gMTtcclxuICAgICAgICBcdFx0Zm9yIChpID0gMDsgaSA8IDM7IGkgKz0gMSkge1xyXG4gICAgICAgIFx0XHRcdGh0bWwgKz0gJzx0cj4nO1xyXG4gICAgICAgIFx0XHRcdGZvciAoaiA9IDA7IGogPCA0OyBqICs9IDEpIHtcclxuICAgICAgICBcdFx0XHRcdGh0bWwgKz0gJzx0ZCBjbGFzcz1cImhvdXJcIj4nICsgcGFkTGVmdChjdXJyZW50LnRvU3RyaW5nKCkpICsgJzwvdGQ+JztcclxuICAgICAgICBcdFx0XHRcdGN1cnJlbnQrKztcclxuICAgICAgICBcdFx0XHR9XHJcbiAgICAgICAgXHRcdFx0aHRtbCArPSAnPC90cj4nO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHR0YWJsZS5odG1sKGh0bWwpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGZpbGxNaW51dGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0dmFyIHRhYmxlID0gcGlja2VyLndpZGdldC5maW5kKCcudGltZXBpY2tlciAudGltZXBpY2tlci1taW51dGVzIHRhYmxlJyksIGh0bWwgPSAnJywgY3VycmVudCA9IDAsIGksIGosIHN0ZXAgPSBwaWNrZXIub3B0aW9ucy5taW51dGVTdGVwcGluZztcclxuICAgICAgICBcdHRhYmxlLnBhcmVudCgpLmhpZGUoKTtcclxuICAgICAgICBcdGlmIChzdGVwID09PSAxKSB7XHJcbiAgICAgICAgXHRcdHN0ZXAgPSA1O1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0Zm9yIChpID0gMDsgaSA8IE1hdGguY2VpbCg2MCAvIHN0ZXAgLyA0KSA7IGkrKykge1xyXG4gICAgICAgIFx0XHRodG1sICs9ICc8dHI+JztcclxuICAgICAgICBcdFx0Zm9yIChqID0gMDsgaiA8IDQ7IGogKz0gMSkge1xyXG4gICAgICAgIFx0XHRcdGlmIChjdXJyZW50IDwgNjApIHtcclxuICAgICAgICBcdFx0XHRcdGh0bWwgKz0gJzx0ZCBjbGFzcz1cIm1pbnV0ZVwiPicgKyBwYWRMZWZ0KGN1cnJlbnQudG9TdHJpbmcoKSkgKyAnPC90ZD4nO1xyXG4gICAgICAgIFx0XHRcdFx0Y3VycmVudCArPSBzdGVwO1xyXG4gICAgICAgIFx0XHRcdH0gZWxzZSB7XHJcbiAgICAgICAgXHRcdFx0XHRodG1sICs9ICc8dGQ+PC90ZD4nO1xyXG4gICAgICAgIFx0XHRcdH1cclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0XHRodG1sICs9ICc8L3RyPic7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHR0YWJsZS5odG1sKGh0bWwpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGZpbGxTZWNvbmRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0dmFyIHRhYmxlID0gcGlja2VyLndpZGdldC5maW5kKCcudGltZXBpY2tlciAudGltZXBpY2tlci1zZWNvbmRzIHRhYmxlJyksIGh0bWwgPSAnJywgY3VycmVudCA9IDAsIGksIGo7XHJcbiAgICAgICAgXHR0YWJsZS5wYXJlbnQoKS5oaWRlKCk7XHJcbiAgICAgICAgXHRmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7XHJcbiAgICAgICAgXHRcdGh0bWwgKz0gJzx0cj4nO1xyXG4gICAgICAgIFx0XHRmb3IgKGogPSAwOyBqIDwgNDsgaiArPSAxKSB7XHJcbiAgICAgICAgXHRcdFx0aHRtbCArPSAnPHRkIGNsYXNzPVwic2Vjb25kXCI+JyArIHBhZExlZnQoY3VycmVudC50b1N0cmluZygpKSArICc8L3RkPic7XHJcbiAgICAgICAgXHRcdFx0Y3VycmVudCArPSA1O1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHRcdGh0bWwgKz0gJzwvdHI+JztcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHRhYmxlLmh0bWwoaHRtbCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZmlsbFRpbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRpZiAoIXBpY2tlci5kYXRlKSB7XHJcbiAgICAgICAgXHRcdHJldHVybjtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHZhciB0aW1lQ29tcG9uZW50cyA9IHBpY2tlci53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgc3BhbltkYXRhLXRpbWUtY29tcG9uZW50XScpLFxyXG4gICAgICAgICAgICAgICAgaG91ciA9IHBpY2tlci5kYXRlLmhvdXJzKCksXHJcbiAgICAgICAgICAgICAgICBwZXJpb2QgPSBwaWNrZXIuZGF0ZS5mb3JtYXQoJ0EnKTtcclxuICAgICAgICBcdGlmICghcGlja2VyLnVzZTI0aG91cnMpIHtcclxuICAgICAgICBcdFx0aWYgKGhvdXIgPT09IDApIHtcclxuICAgICAgICBcdFx0XHRob3VyID0gMTI7XHJcbiAgICAgICAgXHRcdH0gZWxzZSBpZiAoaG91ciAhPT0gMTIpIHtcclxuICAgICAgICBcdFx0XHRob3VyID0gaG91ciAlIDEyO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHRcdHBpY2tlci53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgW2RhdGEtYWN0aW9uPXRvZ2dsZVBlcmlvZF0nKS50ZXh0KHBlcmlvZCk7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHR0aW1lQ29tcG9uZW50cy5maWx0ZXIoJ1tkYXRhLXRpbWUtY29tcG9uZW50PWhvdXJzXScpLnRleHQocGFkTGVmdChob3VyKSk7XHJcbiAgICAgICAgXHR0aW1lQ29tcG9uZW50cy5maWx0ZXIoJ1tkYXRhLXRpbWUtY29tcG9uZW50PW1pbnV0ZXNdJykudGV4dChwYWRMZWZ0KHBpY2tlci5kYXRlLm1pbnV0ZXMoKSkpO1xyXG4gICAgICAgIFx0dGltZUNvbXBvbmVudHMuZmlsdGVyKCdbZGF0YS10aW1lLWNvbXBvbmVudD1zZWNvbmRzXScpLnRleHQocGFkTGVmdChwaWNrZXIuZGF0ZS5zZWNvbmQoKSkpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNsaWNrID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgXHRlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgXHRwaWNrZXIudW5zZXQgPSBmYWxzZTtcclxuICAgICAgICBcdHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdzcGFuLCB0ZCwgdGgnKSwgbW9udGgsIHllYXIsIHN0ZXAsIGRheSwgb2xkRGF0ZSA9IG1vbWVudChwaWNrZXIuZGF0ZSk7XHJcbiAgICAgICAgXHRpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgIFx0XHRpZiAoIXRhcmdldC5pcygnLmRpc2FibGVkJykpIHtcclxuICAgICAgICBcdFx0XHRzd2l0Y2ggKHRhcmdldFswXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgXHRcdFx0XHRjYXNlICd0aCc6XHJcbiAgICAgICAgXHRcdFx0XHRcdHN3aXRjaCAodGFyZ2V0WzBdLmNsYXNzTmFtZSkge1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdGNhc2UgJ3BpY2tlci1zd2l0Y2gnOlxyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0c2hvd01vZGUoMSk7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICBcdFx0XHRcdFx0XHRjYXNlICdwcmV2JzpcclxuICAgICAgICBcdFx0XHRcdFx0XHRjYXNlICduZXh0JzpcclxuICAgICAgICBcdFx0XHRcdFx0XHRcdHN0ZXAgPSBkcEdsb2JhbC5tb2Rlc1twaWNrZXIudmlld01vZGVdLm5hdlN0ZXA7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRpZiAodGFyZ2V0WzBdLmNsYXNzTmFtZSA9PT0gJ3ByZXYnKSB7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRcdHN0ZXAgPSBzdGVwICogLTE7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHR9XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRwaWNrZXIudmlld0RhdGUuYWRkKHN0ZXAsIGRwR2xvYmFsLm1vZGVzW3BpY2tlci52aWV3TW9kZV0ubmF2Rm5jKTtcclxuICAgICAgICBcdFx0XHRcdFx0XHRcdGZpbGxEYXRlKCk7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICBcdFx0XHRcdFx0fVxyXG4gICAgICAgIFx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICBcdFx0XHRcdGNhc2UgJ3NwYW4nOlxyXG4gICAgICAgIFx0XHRcdFx0XHRpZiAodGFyZ2V0LmlzKCcubW9udGgnKSkge1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdG1vbnRoID0gdGFyZ2V0LnBhcmVudCgpLmZpbmQoJ3NwYW4nKS5pbmRleCh0YXJnZXQpO1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdHBpY2tlci52aWV3RGF0ZS5tb250aChtb250aCk7XHJcbiAgICAgICAgXHRcdFx0XHRcdH0gZWxzZSB7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0eWVhciA9IHBhcnNlSW50KHRhcmdldC50ZXh0KCksIDEwKSB8fCAwO1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdHBpY2tlci52aWV3RGF0ZS55ZWFyKHllYXIpO1xyXG4gICAgICAgIFx0XHRcdFx0XHR9XHJcbiAgICAgICAgXHRcdFx0XHRcdGlmIChwaWNrZXIudmlld01vZGUgPT09IHBpY2tlci5taW5WaWV3TW9kZSkge1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdHBpY2tlci5kYXRlID0gbW9tZW50KHtcclxuICAgICAgICBcdFx0XHRcdFx0XHRcdHk6IHBpY2tlci52aWV3RGF0ZS55ZWFyKCksXHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRNOiBwaWNrZXIudmlld0RhdGUubW9udGgoKSxcclxuICAgICAgICBcdFx0XHRcdFx0XHRcdGQ6IHBpY2tlci52aWV3RGF0ZS5kYXRlKCksXHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRoOiBwaWNrZXIuZGF0ZS5ob3VycygpLFxyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0bTogcGlja2VyLmRhdGUubWludXRlcygpLFxyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0czogcGlja2VyLmRhdGUuc2Vjb25kcygpXHJcbiAgICAgICAgXHRcdFx0XHRcdFx0fSk7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0c2V0KCk7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0bm90aWZ5Q2hhbmdlKG9sZERhdGUsIGUudHlwZSk7XHJcbiAgICAgICAgXHRcdFx0XHRcdH1cclxuICAgICAgICBcdFx0XHRcdFx0c2hvd01vZGUoLTEpO1xyXG4gICAgICAgIFx0XHRcdFx0XHRmaWxsRGF0ZSgpO1xyXG4gICAgICAgIFx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICBcdFx0XHRcdGNhc2UgJ3RkJzpcclxuICAgICAgICBcdFx0XHRcdFx0aWYgKHRhcmdldC5pcygnLmRheScpKSB7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0ZGF5ID0gcGFyc2VJbnQodGFyZ2V0LnRleHQoKSwgMTApIHx8IDE7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0bW9udGggPSBwaWNrZXIudmlld0RhdGUubW9udGgoKTtcclxuICAgICAgICBcdFx0XHRcdFx0XHR5ZWFyID0gcGlja2VyLnZpZXdEYXRlLnllYXIoKTtcclxuICAgICAgICBcdFx0XHRcdFx0XHRpZiAodGFyZ2V0LmlzKCcub2xkJykpIHtcclxuICAgICAgICBcdFx0XHRcdFx0XHRcdGlmIChtb250aCA9PT0gMCkge1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0XHRtb250aCA9IDExO1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0XHR5ZWFyIC09IDE7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0XHRtb250aCAtPSAxO1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0fVxyXG4gICAgICAgIFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodGFyZ2V0LmlzKCcubmV3JykpIHtcclxuICAgICAgICBcdFx0XHRcdFx0XHRcdGlmIChtb250aCA9PT0gMTEpIHtcclxuICAgICAgICBcdFx0XHRcdFx0XHRcdFx0bW9udGggPSAwO1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0XHR5ZWFyICs9IDE7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0XHRtb250aCArPSAxO1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0fVxyXG4gICAgICAgIFx0XHRcdFx0XHRcdH1cclxuICAgICAgICBcdFx0XHRcdFx0XHRwaWNrZXIuZGF0ZSA9IG1vbWVudCh7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHR5OiB5ZWFyLFxyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0TTogbW9udGgsXHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRkOiBkYXksXHJcbiAgICAgICAgXHRcdFx0XHRcdFx0XHRoOiBwaWNrZXIuZGF0ZS5ob3VycygpLFxyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0bTogcGlja2VyLmRhdGUubWludXRlcygpLFxyXG4gICAgICAgIFx0XHRcdFx0XHRcdFx0czogcGlja2VyLmRhdGUuc2Vjb25kcygpXHJcbiAgICAgICAgXHRcdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0cGlja2VyLnZpZXdEYXRlID0gbW9tZW50KHtcclxuICAgICAgICBcdFx0XHRcdFx0XHRcdHk6IHllYXIsIE06IG1vbnRoLCBkOiBNYXRoLm1pbigyOCwgZGF5KVxyXG4gICAgICAgIFx0XHRcdFx0XHRcdH0pO1xyXG4gICAgICAgIFx0XHRcdFx0XHRcdGZpbGxEYXRlKCk7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0c2V0KCk7XHJcbiAgICAgICAgXHRcdFx0XHRcdFx0bm90aWZ5Q2hhbmdlKG9sZERhdGUsIGUudHlwZSk7XHJcbiAgICAgICAgXHRcdFx0XHRcdH1cclxuICAgICAgICBcdFx0XHRcdFx0YnJlYWs7XHJcbiAgICAgICAgXHRcdFx0fVxyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYWN0aW9ucyA9IHtcclxuICAgICAgICBcdGluY3JlbWVudEhvdXJzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRcdGNoZWNrRGF0ZSgnYWRkJywgJ2hvdXJzJywgMSk7XHJcbiAgICAgICAgXHR9LFxyXG5cclxuICAgICAgICBcdGluY3JlbWVudE1pbnV0ZXM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBcdFx0Y2hlY2tEYXRlKCdhZGQnLCAnbWludXRlcycsIHBpY2tlci5vcHRpb25zLm1pbnV0ZVN0ZXBwaW5nKTtcclxuICAgICAgICBcdH0sXHJcblxyXG4gICAgICAgIFx0aW5jcmVtZW50U2Vjb25kczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0XHRjaGVja0RhdGUoJ2FkZCcsICdzZWNvbmRzJywgMSk7XHJcbiAgICAgICAgXHR9LFxyXG5cclxuICAgICAgICBcdGRlY3JlbWVudEhvdXJzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRcdGNoZWNrRGF0ZSgnc3VidHJhY3QnLCAnaG91cnMnLCAxKTtcclxuICAgICAgICBcdH0sXHJcblxyXG4gICAgICAgIFx0ZGVjcmVtZW50TWludXRlczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0XHRjaGVja0RhdGUoJ3N1YnRyYWN0JywgJ21pbnV0ZXMnLCBwaWNrZXIub3B0aW9ucy5taW51dGVTdGVwcGluZyk7XHJcbiAgICAgICAgXHR9LFxyXG5cclxuICAgICAgICBcdGRlY3JlbWVudFNlY29uZHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBcdFx0Y2hlY2tEYXRlKCdzdWJ0cmFjdCcsICdzZWNvbmRzJywgMSk7XHJcbiAgICAgICAgXHR9LFxyXG5cclxuICAgICAgICBcdHRvZ2dsZVBlcmlvZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0XHR2YXIgaG91ciA9IHBpY2tlci5kYXRlLmhvdXJzKCk7XHJcbiAgICAgICAgXHRcdGlmIChob3VyID49IDEyKSB7XHJcbiAgICAgICAgXHRcdFx0aG91ciAtPSAxMjtcclxuICAgICAgICBcdFx0fSBlbHNlIHtcclxuICAgICAgICBcdFx0XHRob3VyICs9IDEyO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHRcdHBpY2tlci5kYXRlLmhvdXJzKGhvdXIpO1xyXG4gICAgICAgIFx0fSxcclxuXHJcbiAgICAgICAgXHRzaG93UGlja2VyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgPiBkaXY6bm90KC50aW1lcGlja2VyLXBpY2tlciknKS5oaWRlKCk7XHJcbiAgICAgICAgXHRcdHBpY2tlci53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyJykuc2hvdygpO1xyXG4gICAgICAgIFx0fSxcclxuXHJcbiAgICAgICAgXHRzaG93SG91cnM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC5maW5kKCcudGltZXBpY2tlciAudGltZXBpY2tlci1waWNrZXInKS5oaWRlKCk7XHJcbiAgICAgICAgXHRcdHBpY2tlci53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItaG91cnMnKS5zaG93KCk7XHJcbiAgICAgICAgXHR9LFxyXG5cclxuICAgICAgICBcdHNob3dNaW51dGVzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyJykuaGlkZSgpO1xyXG4gICAgICAgIFx0XHRwaWNrZXIud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyIC50aW1lcGlja2VyLW1pbnV0ZXMnKS5zaG93KCk7XHJcbiAgICAgICAgXHR9LFxyXG5cclxuICAgICAgICBcdHNob3dTZWNvbmRzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci53aWRnZXQuZmluZCgnLnRpbWVwaWNrZXIgLnRpbWVwaWNrZXItcGlja2VyJykuaGlkZSgpO1xyXG4gICAgICAgIFx0XHRwaWNrZXIud2lkZ2V0LmZpbmQoJy50aW1lcGlja2VyIC50aW1lcGlja2VyLXNlY29uZHMnKS5zaG93KCk7XHJcbiAgICAgICAgXHR9LFxyXG5cclxuICAgICAgICBcdHNlbGVjdEhvdXI6IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgXHRcdHZhciBob3VyID0gcGFyc2VJbnQoJChlLnRhcmdldCkudGV4dCgpLCAxMCk7XHJcbiAgICAgICAgXHRcdGlmICghcGlja2VyLnVzZTI0aG91cnMpIHtcclxuICAgICAgICBcdFx0XHRpZiAocGlja2VyLmRhdGUuaG91cnMoKSA+PSAxMikge1xyXG4gICAgICAgIFx0XHRcdFx0aWYgKGhvdXIgIT09IDEyKSB7XHJcbiAgICAgICAgXHRcdFx0XHRcdGhvdXIgKz0gMTI7XHJcbiAgICAgICAgXHRcdFx0XHR9XHJcbiAgICAgICAgXHRcdFx0fSBlbHNlIHtcclxuICAgICAgICBcdFx0XHRcdGlmIChob3VyID09PSAxMikge1xyXG4gICAgICAgIFx0XHRcdFx0XHRob3VyID0gMDtcclxuICAgICAgICBcdFx0XHRcdH1cclxuICAgICAgICBcdFx0XHR9XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdFx0cGlja2VyLmRhdGUuaG91cnMoaG91cik7XHJcbiAgICAgICAgXHRcdGFjdGlvbnMuc2hvd1BpY2tlci5jYWxsKHBpY2tlcik7XHJcbiAgICAgICAgXHR9LFxyXG5cclxuICAgICAgICBcdHNlbGVjdE1pbnV0ZTogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBcdFx0cGlja2VyLmRhdGUubWludXRlcyhwYXJzZUludCgkKGUudGFyZ2V0KS50ZXh0KCksIDEwKSk7XHJcbiAgICAgICAgXHRcdGFjdGlvbnMuc2hvd1BpY2tlci5jYWxsKHBpY2tlcik7XHJcbiAgICAgICAgXHR9LFxyXG5cclxuICAgICAgICBcdHNlbGVjdFNlY29uZDogZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBcdFx0cGlja2VyLmRhdGUuc2Vjb25kcyhwYXJzZUludCgkKGUudGFyZ2V0KS50ZXh0KCksIDEwKSk7XHJcbiAgICAgICAgXHRcdGFjdGlvbnMuc2hvd1BpY2tlci5jYWxsKHBpY2tlcik7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZG9BY3Rpb24gPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIFx0dmFyIG9sZERhdGUgPSBtb21lbnQocGlja2VyLmRhdGUpLFxyXG4gICAgICAgICAgICAgICAgYWN0aW9uID0gJChlLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2FjdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgcnYgPSBhY3Rpb25zW2FjdGlvbl0uYXBwbHkocGlja2VyLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIFx0c3RvcEV2ZW50KGUpO1xyXG4gICAgICAgIFx0aWYgKCFwaWNrZXIuZGF0ZSkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIuZGF0ZSA9IG1vbWVudCh7IHk6IDE5NzAgfSk7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRzZXQoKTtcclxuICAgICAgICBcdGZpbGxUaW1lKCk7XHJcbiAgICAgICAgXHRub3RpZnlDaGFuZ2Uob2xkRGF0ZSwgZS50eXBlKTtcclxuICAgICAgICBcdHJldHVybiBydjtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzdG9wRXZlbnQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBcdGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBrZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBcdGlmIChlLmtleUNvZGUgPT09IDI3KSB7IC8vIGFsbG93IGVzY2FwZSB0byBoaWRlIHBpY2tlclxyXG4gICAgICAgIFx0XHRwaWNrZXIuaGlkZSgpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgXHRtb21lbnQubG9jYWxlKHBpY2tlci5vcHRpb25zLmxhbmd1YWdlKTtcclxuICAgICAgICBcdHZhciBpbnB1dCA9ICQoZS50YXJnZXQpLCBvbGREYXRlID0gbW9tZW50KHBpY2tlci5kYXRlKSwgbmV3RGF0ZSA9IG1vbWVudChpbnB1dC52YWwoKSwgcGlja2VyLmZvcm1hdCwgcGlja2VyLm9wdGlvbnMudXNlU3RyaWN0KTtcclxuICAgICAgICBcdGlmIChuZXdEYXRlLmlzVmFsaWQoKSAmJiAhaXNJbkRpc2FibGVEYXRlcyhuZXdEYXRlKSAmJiBpc0luRW5hYmxlRGF0ZXMobmV3RGF0ZSkpIHtcclxuICAgICAgICBcdFx0dXBkYXRlKCk7XHJcbiAgICAgICAgXHRcdHBpY2tlci5zZXRWYWx1ZShuZXdEYXRlKTtcclxuICAgICAgICBcdFx0bm90aWZ5Q2hhbmdlKG9sZERhdGUsIGUudHlwZSk7XHJcbiAgICAgICAgXHRcdHNldCgpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0ZWxzZSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci52aWV3RGF0ZSA9IG9sZERhdGU7XHJcbiAgICAgICAgXHRcdHBpY2tlci51bnNldCA9IHRydWU7XHJcbiAgICAgICAgXHRcdG5vdGlmeUNoYW5nZShvbGREYXRlLCBlLnR5cGUpO1xyXG4gICAgICAgIFx0XHRub3RpZnlFcnJvcihuZXdEYXRlKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzaG93TW9kZSA9IGZ1bmN0aW9uIChkaXIpIHtcclxuICAgICAgICBcdGlmIChkaXIpIHtcclxuICAgICAgICBcdFx0cGlja2VyLnZpZXdNb2RlID0gTWF0aC5tYXgocGlja2VyLm1pblZpZXdNb2RlLCBNYXRoLm1pbigyLCBwaWNrZXIudmlld01vZGUgKyBkaXIpKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHBpY2tlci53aWRnZXQuZmluZCgnLmRhdGVwaWNrZXIgPiBkaXYnKS5oaWRlKCkuZmlsdGVyKCcuZGF0ZXBpY2tlci0nICsgZHBHbG9iYWwubW9kZXNbcGlja2VyLnZpZXdNb2RlXS5jbHNOYW1lKS5zaG93KCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYXR0YWNoRGF0ZVBpY2tlckV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBcdHZhciAkdGhpcywgJHBhcmVudCwgZXhwYW5kZWQsIGNsb3NlZCwgY29sbGFwc2VEYXRhO1xyXG4gICAgICAgIFx0cGlja2VyLndpZGdldC5vbignY2xpY2snLCAnLmRhdGVwaWNrZXIgKicsICQucHJveHkoY2xpY2ssIHRoaXMpKTsgLy8gdGhpcyBoYW5kbGVzIGRhdGUgcGlja2VyIGNsaWNrc1xyXG4gICAgICAgIFx0cGlja2VyLndpZGdldC5vbignY2xpY2snLCAnW2RhdGEtYWN0aW9uXScsICQucHJveHkoZG9BY3Rpb24sIHRoaXMpKTsgLy8gdGhpcyBoYW5kbGVzIHRpbWUgcGlja2VyIGNsaWNrc1xyXG4gICAgICAgIFx0cGlja2VyLndpZGdldC5vbignbW91c2Vkb3duJywgJC5wcm94eShzdG9wRXZlbnQsIHRoaXMpKTtcclxuICAgICAgICBcdHBpY2tlci5lbGVtZW50Lm9uKCdrZXlkb3duJywgJC5wcm94eShrZXlkb3duLCB0aGlzKSk7XHJcbiAgICAgICAgXHRpZiAocGlja2VyLm9wdGlvbnMucGlja0RhdGUgJiYgcGlja2VyLm9wdGlvbnMucGlja1RpbWUpIHtcclxuICAgICAgICBcdFx0cGlja2VyLndpZGdldC5vbignY2xpY2sudG9nZ2xlUGlja2VyJywgJy5hY2NvcmRpb24tdG9nZ2xlJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIFx0XHRcdCR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICBcdFx0XHQkcGFyZW50ID0gJHRoaXMuY2xvc2VzdCgndWwnKTtcclxuICAgICAgICBcdFx0XHRleHBhbmRlZCA9ICRwYXJlbnQuZmluZCgnLmluJyk7XHJcbiAgICAgICAgXHRcdFx0Y2xvc2VkID0gJHBhcmVudC5maW5kKCcuY29sbGFwc2U6bm90KC5pbiknKTtcclxuXHJcbiAgICAgICAgXHRcdFx0aWYgKGV4cGFuZGVkICYmIGV4cGFuZGVkLmxlbmd0aCkge1xyXG4gICAgICAgIFx0XHRcdFx0Y29sbGFwc2VEYXRhID0gZXhwYW5kZWQuZGF0YSgnY29sbGFwc2UnKTtcclxuICAgICAgICBcdFx0XHRcdGlmIChjb2xsYXBzZURhdGEgJiYgY29sbGFwc2VEYXRhLnRyYW5zaXRpb25pbmcpIHtcclxuICAgICAgICBcdFx0XHRcdFx0cmV0dXJuO1xyXG4gICAgICAgIFx0XHRcdFx0fVxyXG4gICAgICAgIFx0XHRcdFx0ZXhwYW5kZWQuY29sbGFwc2UoJ2hpZGUnKTtcclxuICAgICAgICBcdFx0XHRcdGNsb3NlZC5jb2xsYXBzZSgnc2hvdycpO1xyXG4gICAgICAgIFx0XHRcdFx0JHRoaXMuZmluZCgnc3BhbicpLnRvZ2dsZUNsYXNzKHBpY2tlci5vcHRpb25zLmljb25zLnRpbWUgKyAnICcgKyBwaWNrZXIub3B0aW9ucy5pY29ucy5kYXRlKTtcclxuICAgICAgICBcdFx0XHRcdGlmIChwaWNrZXIuY29tcG9uZW50KSB7XHJcbiAgICAgICAgXHRcdFx0XHRcdHBpY2tlci5jb21wb25lbnQuZmluZCgnc3BhbicpLnRvZ2dsZUNsYXNzKHBpY2tlci5vcHRpb25zLmljb25zLnRpbWUgKyAnICcgKyBwaWNrZXIub3B0aW9ucy5pY29ucy5kYXRlKTtcclxuICAgICAgICBcdFx0XHRcdH1cclxuICAgICAgICBcdFx0XHR9XHJcbiAgICAgICAgXHRcdH0pO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKHBpY2tlci5pc0lucHV0KSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci5lbGVtZW50Lm9uKHtcclxuICAgICAgICBcdFx0XHQnY2xpY2snOiAkLnByb3h5KHBpY2tlci5zaG93LCB0aGlzKSxcclxuICAgICAgICBcdFx0XHQnZm9jdXMnOiAkLnByb3h5KHBpY2tlci5zaG93LCB0aGlzKSxcclxuICAgICAgICBcdFx0XHQnY2hhbmdlJzogJC5wcm94eShjaGFuZ2UsIHRoaXMpLFxyXG4gICAgICAgIFx0XHRcdCdibHVyJzogJC5wcm94eShwaWNrZXIuaGlkZSwgdGhpcylcclxuICAgICAgICBcdFx0fSk7XHJcbiAgICAgICAgXHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRwaWNrZXIuZWxlbWVudC5vbih7XHJcbiAgICAgICAgXHRcdFx0J2NoYW5nZSc6ICQucHJveHkoY2hhbmdlLCB0aGlzKVxyXG4gICAgICAgIFx0XHR9LCAnaW5wdXQnKTtcclxuICAgICAgICBcdFx0aWYgKHBpY2tlci5jb21wb25lbnQpIHtcclxuICAgICAgICBcdFx0XHRwaWNrZXIuY29tcG9uZW50Lm9uKCdjbGljaycsICQucHJveHkocGlja2VyLnNob3csIHRoaXMpKTtcclxuICAgICAgICBcdFx0XHRwaWNrZXIuY29tcG9uZW50Lm9uKCdtb3VzZWRvd24nLCAkLnByb3h5KHN0b3BFdmVudCwgdGhpcykpO1xyXG4gICAgICAgIFx0XHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRcdHBpY2tlci5lbGVtZW50Lm9uKCdjbGljaycsICQucHJveHkocGlja2VyLnNob3csIHRoaXMpKTtcclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0cGlja2VyLndpZGdldC5vbignY2xpY2sudG9nZ2xlUGlja2VyJywgJyN0b2RheS1idXR0b24nLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIFx0XHRpZiAocGlja2VyLm9wdGlvbnMubWludXRlU3RlcHBpbmcgIT09IDEpIHtcclxuICAgICAgICBcdFx0XHR2YXIgbURhdGUgPSBtb21lbnQoKSxcclxuXHRcdFx0XHRcdFx0ckludGVydmFsID0gcGlja2VyLm9wdGlvbnMubWludXRlU3RlcHBpbmc7XHJcbiAgICAgICAgXHRcdFx0bURhdGUubWludXRlcygoTWF0aC5yb3VuZChtRGF0ZS5taW51dGVzKCkgLyBySW50ZXJ2YWwpICogckludGVydmFsKSAlIDYwKS5zZWNvbmRzKDApO1xyXG4gICAgICAgIFx0XHRcdHBpY2tlci5zZXRWYWx1ZShtRGF0ZS5mb3JtYXQocGlja2VyLmZvcm1hdCkpO1xyXG4gICAgICAgIFx0XHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRcdHBpY2tlci5zZXRWYWx1ZShtb21lbnQoKS5mb3JtYXQocGlja2VyLmZvcm1hdCkpO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHRcdG5vdGlmeUNoYW5nZSgnJywgZS50eXBlKTtcclxuICAgICAgICBcdFx0c2V0KCk7XHJcbiAgICAgICAgXHR9KTtcclxuICAgICAgICBcdHBpY2tlci53aWRnZXQub24oJ2NsaWNrLnRvZ2dsZVBpY2tlcicsICcjY2xlYXItYnV0dG9uJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBcdFx0cGlja2VyLnNldFZhbHVlKG51bGwpO1xyXG4gICAgICAgIFx0XHRub3RpZnlDaGFuZ2UoJycsIGUudHlwZSk7XHJcbiAgICAgICAgXHR9KTtcclxuICAgICAgICBcdHBpY2tlci53aWRnZXQub24oJ2NsaWNrLnRvZ2dsZVBpY2tlcicsICcjY2xvc2UtYnV0dG9uJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBcdFx0cGlja2VyLmhpZGUoKTtcclxuICAgICAgICBcdH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGF0dGFjaERhdGVQaWNrZXJHbG9iYWxFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHQkKHdpbmRvdykub24oXHJcbiAgICAgICAgICAgICAgICAncmVzaXplLmRhdGV0aW1lcGlja2VyJyArIHBpY2tlci5pZCwgJC5wcm94eShwbGFjZSwgdGhpcykpO1xyXG4gICAgICAgIFx0aWYgKCFwaWNrZXIuaXNJbnB1dCkge1xyXG4gICAgICAgIFx0XHQkKGRvY3VtZW50KS5vbihcclxuICAgICAgICAgICAgICAgICAgICAnbW91c2Vkb3duLmRhdGV0aW1lcGlja2VyJyArIHBpY2tlci5pZCwgJC5wcm94eShwaWNrZXIuaGlkZSwgdGhpcykpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGRldGFjaERhdGVQaWNrZXJFdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRwaWNrZXIud2lkZ2V0Lm9mZignY2xpY2snLCAnLmRhdGVwaWNrZXIgKicsIHBpY2tlci5jbGljayk7XHJcbiAgICAgICAgXHRwaWNrZXIud2lkZ2V0Lm9mZignY2xpY2snLCAnW2RhdGEtYWN0aW9uXScpO1xyXG4gICAgICAgIFx0cGlja2VyLndpZGdldC5vZmYoJ21vdXNlZG93bicsIHBpY2tlci5zdG9wRXZlbnQpO1xyXG4gICAgICAgIFx0aWYgKHBpY2tlci5vcHRpb25zLnBpY2tEYXRlICYmIHBpY2tlci5vcHRpb25zLnBpY2tUaW1lKSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci53aWRnZXQub2ZmKCdjbGljay50b2dnbGVQaWNrZXInKTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGlmIChwaWNrZXIuaXNJbnB1dCkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIuZWxlbWVudC5vZmYoe1xyXG4gICAgICAgIFx0XHRcdCdmb2N1cyc6IHBpY2tlci5zaG93LFxyXG4gICAgICAgIFx0XHRcdCdjaGFuZ2UnOiBjaGFuZ2UsXHJcbiAgICAgICAgXHRcdFx0J2NsaWNrJzogcGlja2VyLnNob3csXHJcbiAgICAgICAgXHRcdFx0J2JsdXInOiBwaWNrZXIuaGlkZVxyXG4gICAgICAgIFx0XHR9KTtcclxuICAgICAgICBcdH0gZWxzZSB7XHJcbiAgICAgICAgXHRcdHBpY2tlci5lbGVtZW50Lm9mZih7XHJcbiAgICAgICAgXHRcdFx0J2NoYW5nZSc6IGNoYW5nZVxyXG4gICAgICAgIFx0XHR9LCAnaW5wdXQnKTtcclxuICAgICAgICBcdFx0aWYgKHBpY2tlci5jb21wb25lbnQpIHtcclxuICAgICAgICBcdFx0XHRwaWNrZXIuY29tcG9uZW50Lm9mZignY2xpY2snLCBwaWNrZXIuc2hvdyk7XHJcbiAgICAgICAgXHRcdFx0cGlja2VyLmNvbXBvbmVudC5vZmYoJ21vdXNlZG93bicsIHBpY2tlci5zdG9wRXZlbnQpO1xyXG4gICAgICAgIFx0XHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRcdHBpY2tlci5lbGVtZW50Lm9mZignY2xpY2snLCBwaWNrZXIuc2hvdyk7XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBkZXRhY2hEYXRlUGlja2VyR2xvYmFsRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0JCh3aW5kb3cpLm9mZigncmVzaXplLmRhdGV0aW1lcGlja2VyJyArIHBpY2tlci5pZCk7XHJcbiAgICAgICAgXHRpZiAoIXBpY2tlci5pc0lucHV0KSB7XHJcbiAgICAgICAgXHRcdCQoZG9jdW1lbnQpLm9mZignbW91c2Vkb3duLmRhdGV0aW1lcGlja2VyJyArIHBpY2tlci5pZCk7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaXNJbkZpeGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFx0aWYgKHBpY2tlci5lbGVtZW50KSB7XHJcbiAgICAgICAgXHRcdHZhciBwYXJlbnRzID0gcGlja2VyLmVsZW1lbnQucGFyZW50cygpLCBpbkZpeGVkID0gZmFsc2UsIGk7XHJcbiAgICAgICAgXHRcdGZvciAoaSA9IDA7IGkgPCBwYXJlbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgXHRcdFx0aWYgKCQocGFyZW50c1tpXSkuY3NzKCdwb3NpdGlvbicpID09PSAnZml4ZWQnKSB7XHJcbiAgICAgICAgXHRcdFx0XHRpbkZpeGVkID0gdHJ1ZTtcclxuICAgICAgICBcdFx0XHRcdGJyZWFrO1xyXG4gICAgICAgIFx0XHRcdH1cclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0XHRyZXR1cm4gaW5GaXhlZDtcclxuICAgICAgICBcdH0gZWxzZSB7XHJcbiAgICAgICAgXHRcdHJldHVybiBmYWxzZTtcclxuICAgICAgICBcdH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHRtb21lbnQubG9jYWxlKHBpY2tlci5vcHRpb25zLmxhbmd1YWdlKTtcclxuICAgICAgICBcdHZhciBmb3JtYXR0ZWQgPSAnJztcclxuICAgICAgICBcdGlmICghcGlja2VyLnVuc2V0KSB7XHJcbiAgICAgICAgXHRcdGZvcm1hdHRlZCA9IG1vbWVudChwaWNrZXIuZGF0ZSkuZm9ybWF0KHBpY2tlci5mb3JtYXQpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0Z2V0UGlja2VySW5wdXQoKS52YWwoZm9ybWF0dGVkKTtcclxuICAgICAgICBcdHBpY2tlci5lbGVtZW50LmRhdGEoJ2RhdGUnLCBmb3JtYXR0ZWQpO1xyXG4gICAgICAgIFx0aWYgKCFwaWNrZXIub3B0aW9ucy5waWNrVGltZSkge1xyXG4gICAgICAgIFx0XHRwaWNrZXIuaGlkZSgpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNoZWNrRGF0ZSA9IGZ1bmN0aW9uIChkaXJlY3Rpb24sIHVuaXQsIGFtb3VudCkge1xyXG4gICAgICAgIFx0bW9tZW50LmxvY2FsZShwaWNrZXIub3B0aW9ucy5sYW5ndWFnZSk7XHJcbiAgICAgICAgXHR2YXIgbmV3RGF0ZTtcclxuICAgICAgICBcdGlmIChkaXJlY3Rpb24gPT09ICdhZGQnKSB7XHJcbiAgICAgICAgXHRcdG5ld0RhdGUgPSBtb21lbnQocGlja2VyLmRhdGUpO1xyXG4gICAgICAgIFx0XHRpZiAobmV3RGF0ZS5ob3VycygpID09PSAyMykge1xyXG4gICAgICAgIFx0XHRcdG5ld0RhdGUuYWRkKGFtb3VudCwgdW5pdCk7XHJcbiAgICAgICAgXHRcdH1cclxuICAgICAgICBcdFx0bmV3RGF0ZS5hZGQoYW1vdW50LCB1bml0KTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGVsc2Uge1xyXG4gICAgICAgIFx0XHRuZXdEYXRlID0gbW9tZW50KHBpY2tlci5kYXRlKS5zdWJ0cmFjdChhbW91bnQsIHVuaXQpO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGlzSW5EaXNhYmxlRGF0ZXMobW9tZW50KG5ld0RhdGUuc3VidHJhY3QoYW1vdW50LCB1bml0KSkpIHx8IGlzSW5EaXNhYmxlRGF0ZXMobmV3RGF0ZSkpIHtcclxuICAgICAgICBcdFx0bm90aWZ5RXJyb3IobmV3RGF0ZS5mb3JtYXQocGlja2VyLmZvcm1hdCkpO1xyXG4gICAgICAgIFx0XHRyZXR1cm47XHJcbiAgICAgICAgXHR9XHJcblxyXG4gICAgICAgIFx0aWYgKGRpcmVjdGlvbiA9PT0gJ2FkZCcpIHtcclxuICAgICAgICBcdFx0cGlja2VyLmRhdGUuYWRkKGFtb3VudCwgdW5pdCk7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRlbHNlIHtcclxuICAgICAgICBcdFx0cGlja2VyLmRhdGUuc3VidHJhY3QoYW1vdW50LCB1bml0KTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHBpY2tlci51bnNldCA9IGZhbHNlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGlzSW5EaXNhYmxlRGF0ZXMgPSBmdW5jdGlvbiAoZGF0ZSwgdGltZVVuaXQpIHtcclxuICAgICAgICBcdG1vbWVudC5sb2NhbGUocGlja2VyLm9wdGlvbnMubGFuZ3VhZ2UpO1xyXG4gICAgICAgIFx0dmFyIG1heERhdGUgPSBtb21lbnQocGlja2VyLm9wdGlvbnMubWF4RGF0ZSwgcGlja2VyLmZvcm1hdCwgcGlja2VyLm9wdGlvbnMudXNlU3RyaWN0KSxcclxuICAgICAgICAgICAgICAgIG1pbkRhdGUgPSBtb21lbnQocGlja2VyLm9wdGlvbnMubWluRGF0ZSwgcGlja2VyLmZvcm1hdCwgcGlja2VyLm9wdGlvbnMudXNlU3RyaWN0KTtcclxuXHJcbiAgICAgICAgXHRpZiAodGltZVVuaXQpIHtcclxuICAgICAgICBcdFx0bWF4RGF0ZSA9IG1heERhdGUuZW5kT2YodGltZVVuaXQpO1xyXG4gICAgICAgIFx0XHRtaW5EYXRlID0gbWluRGF0ZS5zdGFydE9mKHRpbWVVbml0KTtcclxuICAgICAgICBcdH1cclxuXHJcbiAgICAgICAgXHRpZiAoZGF0ZS5pc0FmdGVyKG1heERhdGUpIHx8IGRhdGUuaXNCZWZvcmUobWluRGF0ZSkpIHtcclxuICAgICAgICBcdFx0cmV0dXJuIHRydWU7XHJcbiAgICAgICAgXHR9XHJcbiAgICAgICAgXHRpZiAocGlja2VyLm9wdGlvbnMuZGlzYWJsZWREYXRlcyA9PT0gZmFsc2UpIHtcclxuICAgICAgICBcdFx0cmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0cmV0dXJuIHBpY2tlci5vcHRpb25zLmRpc2FibGVkRGF0ZXNbZGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKV0gPT09IHRydWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBpc0luRW5hYmxlRGF0ZXMgPSBmdW5jdGlvbiAoZGF0ZSkge1xyXG4gICAgICAgIFx0bW9tZW50LmxvY2FsZShwaWNrZXIub3B0aW9ucy5sYW5ndWFnZSk7XHJcbiAgICAgICAgXHRpZiAocGlja2VyLm9wdGlvbnMuZW5hYmxlZERhdGVzID09PSBmYWxzZSkge1xyXG4gICAgICAgIFx0XHRyZXR1cm4gdHJ1ZTtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHJldHVybiBwaWNrZXIub3B0aW9ucy5lbmFibGVkRGF0ZXNbZGF0ZS5mb3JtYXQoJ1lZWVktTU0tREQnKV0gPT09IHRydWU7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5kZXhHaXZlbkRhdGVzID0gZnVuY3Rpb24gKGdpdmVuRGF0ZXNBcnJheSkge1xyXG4gICAgICAgIFx0Ly8gU3RvcmUgZ2l2ZW4gZW5hYmxlZERhdGVzIGFuZCBkaXNhYmxlZERhdGVzIGFzIGtleXMuXHJcbiAgICAgICAgXHQvLyBUaGlzIHdheSB3ZSBjYW4gY2hlY2sgdGhlaXIgZXhpc3RlbmNlIGluIE8oMSkgdGltZSBpbnN0ZWFkIG9mIGxvb3BpbmcgdGhyb3VnaCB3aG9sZSBhcnJheS5cclxuICAgICAgICBcdC8vIChmb3IgZXhhbXBsZTogcGlja2VyLm9wdGlvbnMuZW5hYmxlZERhdGVzWycyMDE0LTAyLTI3J10gPT09IHRydWUpXHJcbiAgICAgICAgXHR2YXIgZ2l2ZW5EYXRlc0luZGV4ZWQgPSB7fSwgZ2l2ZW5EYXRlc0NvdW50ID0gMCwgaTtcclxuICAgICAgICBcdGZvciAoaSA9IDA7IGkgPCBnaXZlbkRhdGVzQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBcdFx0aWYgKG1vbWVudC5pc01vbWVudChnaXZlbkRhdGVzQXJyYXlbaV0pIHx8IGdpdmVuRGF0ZXNBcnJheVtpXSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgICAgICBcdFx0XHRkRGF0ZSA9IG1vbWVudChnaXZlbkRhdGVzQXJyYXlbaV0pO1xyXG4gICAgICAgIFx0XHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRcdGREYXRlID0gbW9tZW50KGdpdmVuRGF0ZXNBcnJheVtpXSwgcGlja2VyLmZvcm1hdCwgcGlja2VyLm9wdGlvbnMudXNlU3RyaWN0KTtcclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0XHRpZiAoZERhdGUuaXNWYWxpZCgpKSB7XHJcbiAgICAgICAgXHRcdFx0Z2l2ZW5EYXRlc0luZGV4ZWRbZERhdGUuZm9ybWF0KCdZWVlZLU1NLUREJyldID0gdHJ1ZTtcclxuICAgICAgICBcdFx0XHRnaXZlbkRhdGVzQ291bnQrKztcclxuICAgICAgICBcdFx0fVxyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0aWYgKGdpdmVuRGF0ZXNDb3VudCA+IDApIHtcclxuICAgICAgICBcdFx0cmV0dXJuIGdpdmVuRGF0ZXNJbmRleGVkO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0cmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHBhZExlZnQgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XHJcbiAgICAgICAgXHRzdHJpbmcgPSBzdHJpbmcudG9TdHJpbmcoKTtcclxuICAgICAgICBcdGlmIChzdHJpbmcubGVuZ3RoID49IDIpIHtcclxuICAgICAgICBcdFx0cmV0dXJuIHN0cmluZztcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdHJldHVybiAnMCcgKyBzdHJpbmc7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgZ2V0VGVtcGxhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHR2YXJcclxuICAgICAgICAgICAgICAgIGhlYWRUZW1wbGF0ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGhlYWQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRyPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGggY2xhc3M9XCJwcmV2XCI+JmxzYXF1bzs8L3RoPjx0aCBjb2xzcGFuPVwiJyArIChwaWNrZXIub3B0aW9ucy5jYWxlbmRhcldlZWtzID8gJzYnIDogJzUnKSArICdcIiBjbGFzcz1cInBpY2tlci1zd2l0Y2hcIj48L3RoPjx0aCBjbGFzcz1cIm5leHRcIj4mcnNhcXVvOzwvdGg+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC90cj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvdGhlYWQ+JyxcclxuICAgICAgICAgICAgICAgIGNvbnRUZW1wbGF0ZSA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dGJvZHk+PHRyPjx0ZCBjb2xzcGFuPVwiJyArIChwaWNrZXIub3B0aW9ucy5jYWxlbmRhcldlZWtzID8gJzgnIDogJzcnKSArICdcIj48L3RkPjwvdHI+PC90Ym9keT4nLFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGUgPSAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItZGF5c1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8dGFibGUgY2xhc3M9XCJ0YWJsZS1jb25kZW5zZWRcIj4nICsgaGVhZFRlbXBsYXRlICsgJzx0Ym9keT48L3Rib2R5PjwvdGFibGU+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItbW9udGhzXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzx0YWJsZSBjbGFzcz1cInRhYmxlLWNvbmRlbnNlZFwiPicgKyBoZWFkVGVtcGxhdGUgKyBjb250VGVtcGxhdGUgKyAnPC90YWJsZT4nICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZGF0ZXBpY2tlci15ZWFyc1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8dGFibGUgY2xhc3M9XCJ0YWJsZS1jb25kZW5zZWRcIj4nICsgaGVhZFRlbXBsYXRlICsgY29udFRlbXBsYXRlICsgJzwvdGFibGU+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+JyxcclxuICAgICAgICAgICAgICAgIHJldCA9ICcnO1xyXG4gICAgICAgIFx0aWYgKHBpY2tlci5vcHRpb25zLnBpY2tEYXRlICYmIHBpY2tlci5vcHRpb25zLnBpY2tUaW1lKSB7XHJcbiAgICAgICAgXHRcdHJldCA9ICc8ZGl2IGNsYXNzPVwiYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCcgKyAocGlja2VyLm9wdGlvbnMuc2lkZUJ5U2lkZSA/ICcgdGltZXBpY2tlci1zYnMnIDogJycpICsgKHBpY2tlci51c2UyNGhvdXJzID8gJyB1c2V0d2VudHlmb3VyJyA6ICcnKSArICcgZHJvcGRvd24tbWVudVwiIHN0eWxlPVwiei1pbmRleDo5OTk5ICFpbXBvcnRhbnQ7XCI+JztcclxuICAgICAgICBcdFx0aWYgKHBpY2tlci5vcHRpb25zLnNpZGVCeVNpZGUpIHtcclxuICAgICAgICBcdFx0XHRyZXQgKz0gJzxkaXYgY2xhc3M9XCJyb3dcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbC1zbS02IGRhdGVwaWNrZXJcIj4nICsgdGVtcGxhdGUgKyAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb2wtc20tNiB0aW1lcGlja2VyXCI+JyArIHRwR2xvYmFsLmdldFRlbXBsYXRlKCkgKyAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgIFx0XHR9IGVsc2Uge1xyXG4gICAgICAgIFx0XHRcdHJldCArPSAnPHVsIGNsYXNzPVwibGlzdC11bnN0eWxlZFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGxpJyArIChwaWNrZXIub3B0aW9ucy5jb2xsYXBzZSA/ICcgY2xhc3M9XCJjb2xsYXBzZSBpblwiJyA6ICcnKSArICc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXJcIj4nICsgdGVtcGxhdGUgKyAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2xpPicgK1xyXG5cdFx0XHRcdFx0XHQnPGxpPicgK1xyXG5cdFx0XHRcdFx0XHQnPHNwYW4gY2xhc3M9XCJidG4tZ3JvdXBcIiBzdHlsZT1cImZsb2F0OmxlZnQ7IG1hcmdpbi1sZWZ0OjRweFwiPicgK1xyXG5cdFx0XHRcdFx0XHQnPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4taW5mb1wiXCIgaWQ9XCJ0b2RheS1idXR0b25cIj4gTm93IDwvYnV0dG9uPicgK1xyXG5cdFx0XHRcdFx0XHQnPGJ1dHRvbiBjbGFzcz1cImJ0biBidG4tZGFuZ2VyXCIgaWQ9XCJjbGVhci1idXR0b25cIj4gQ2xlYXIgPC9idXR0b24+JyArXHJcblx0XHRcdFx0XHRcdCc8L3NwYW4+JyArXHJcblx0XHRcdFx0XHRcdCc8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzXCIgaWQ9XCJjbG9zZS1idXR0b25cIiBzdHlsZT1cImZsb2F0OnJpZ2h0OyBtYXJnaW4tcmlnaHQ6NHB4O1wiPkRvbmU8L2J1dHRvbj4nICtcclxuXHRcdFx0XHRcdFx0JzxkaXYgc3R5bGU9XCJjbGVhcjpib3RoOyBwYWRkaW5nLWJvdHRvbTo1cHg7XCI+PC9kaXY+JyArXHJcblx0XHRcdFx0XHRcdCc8L2xpPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGxpJyArIChwaWNrZXIub3B0aW9ucy5jb2xsYXBzZSA/ICcgY2xhc3M9XCJjb2xsYXBzZVwiJyA6ICcnKSArICc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXJcIj4nICsgdHBHbG9iYWwuZ2V0VGVtcGxhdGUoKSArICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvbGk+JyArXHJcbiAgICAgICAgICAgICAgICAgICAnPC91bD4nO1xyXG4gICAgICAgIFx0XHR9XHJcbiAgICAgICAgXHRcdHJldCArPSAnPC9kaXY+JztcclxuICAgICAgICBcdFx0cmV0dXJuIHJldDtcclxuICAgICAgICBcdH1cclxuICAgICAgICBcdGlmIChwaWNrZXIub3B0aW9ucy5waWNrVGltZSkge1xyXG4gICAgICAgIFx0XHRyZXR1cm4gKFxyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCBkcm9wZG93bi1tZW51XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlclwiPicgKyB0cEdsb2JhbC5nZXRUZW1wbGF0ZSgpICsgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIFx0fVxyXG4gICAgICAgIFx0cmV0dXJuIChcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyLXdpZGdldCBkcm9wZG93bi1tZW51XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkYXRlcGlja2VyXCI+JyArIHRlbXBsYXRlICsgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PidcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBkcEdsb2JhbCA9IHtcclxuICAgICAgICBcdG1vZGVzOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcdGNsc05hbWU6ICdkYXlzJyxcclxuICAgICAgICAgICAgICAgIFx0bmF2Rm5jOiAnbW9udGgnLFxyXG4gICAgICAgICAgICAgICAgXHRuYXZTdGVwOiAxXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgXHRjbHNOYW1lOiAnbW9udGhzJyxcclxuICAgICAgICAgICAgICAgIFx0bmF2Rm5jOiAneWVhcicsXHJcbiAgICAgICAgICAgICAgICBcdG5hdlN0ZXA6IDFcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBcdGNsc05hbWU6ICd5ZWFycycsXHJcbiAgICAgICAgICAgICAgICBcdG5hdkZuYzogJ3llYXInLFxyXG4gICAgICAgICAgICAgICAgXHRuYXZTdGVwOiAxMFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIFx0XVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHRwR2xvYmFsID0ge1xyXG4gICAgICAgIFx0aG91clRlbXBsYXRlOiAnPHNwYW4gZGF0YS1hY3Rpb249XCJzaG93SG91cnNcIiAgIGRhdGEtdGltZS1jb21wb25lbnQ9XCJob3Vyc1wiICAgY2xhc3M9XCJ0aW1lcGlja2VyLWhvdXJcIj48L3NwYW4+JyxcclxuICAgICAgICBcdG1pbnV0ZVRlbXBsYXRlOiAnPHNwYW4gZGF0YS1hY3Rpb249XCJzaG93TWludXRlc1wiIGRhdGEtdGltZS1jb21wb25lbnQ9XCJtaW51dGVzXCIgY2xhc3M9XCJ0aW1lcGlja2VyLW1pbnV0ZVwiPjwvc3Bhbj4nLFxyXG4gICAgICAgIFx0c2Vjb25kVGVtcGxhdGU6ICc8c3BhbiBkYXRhLWFjdGlvbj1cInNob3dTZWNvbmRzXCIgIGRhdGEtdGltZS1jb21wb25lbnQ9XCJzZWNvbmRzXCIgY2xhc3M9XCJ0aW1lcGlja2VyLXNlY29uZFwiPjwvc3Bhbj4nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICBcdHRwR2xvYmFsLmdldFRlbXBsYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgXHRcdHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItcGlja2VyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzx0YWJsZSBjbGFzcz1cInRhYmxlLWNvbmRlbnNlZFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRyPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD48YSBocmVmPVwiI1wiIGNsYXNzPVwiYnRuXCIgZGF0YS1hY3Rpb249XCJpbmNyZW1lbnRIb3Vyc1wiPjxzcGFuIGNsYXNzPVwiJyArIHBpY2tlci5vcHRpb25zLmljb25zLnVwICsgJ1wiPjwvc3Bhbj48L2E+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQgY2xhc3M9XCJzZXBhcmF0b3JcIj48L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4nICsgKHBpY2tlci5vcHRpb25zLnVzZU1pbnV0ZXMgPyAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImJ0blwiIGRhdGEtYWN0aW9uPVwiaW5jcmVtZW50TWludXRlc1wiPjxzcGFuIGNsYXNzPVwiJyArIHBpY2tlci5vcHRpb25zLmljb25zLnVwICsgJ1wiPjwvc3Bhbj48L2E+JyA6ICcnKSArICc8L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBpY2tlci5vcHRpb25zLnVzZVNlY29uZHMgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQgY2xhc3M9XCJzZXBhcmF0b3JcIj48L3RkPjx0ZD48YSBocmVmPVwiI1wiIGNsYXNzPVwiYnRuXCIgZGF0YS1hY3Rpb249XCJpbmNyZW1lbnRTZWNvbmRzXCI+PHNwYW4gY2xhc3M9XCInICsgcGlja2VyLm9wdGlvbnMuaWNvbnMudXAgKyAnXCI+PC9zcGFuPjwvYT48L3RkPicgOiAnJykgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBpY2tlci51c2UyNGhvdXJzID8gJycgOiAnPHRkIGNsYXNzPVwic2VwYXJhdG9yXCI+PC90ZD4nKSArICc8dGQ+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvdHI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dHI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRkPicgKyB0cEdsb2JhbC5ob3VyVGVtcGxhdGUgKyAnPC90ZD4gJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRkIGNsYXNzPVwic2VwYXJhdG9yXCI+OjwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRkPicgKyAocGlja2VyLm9wdGlvbnMudXNlTWludXRlcyA/IHRwR2xvYmFsLm1pbnV0ZVRlbXBsYXRlIDogJzxzcGFuIGNsYXNzPVwidGltZXBpY2tlci1taW51dGVcIj4wMDwvc3Bhbj4nKSArICc8L3RkPiAnICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwaWNrZXIub3B0aW9ucy51c2VTZWNvbmRzID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHRkIGNsYXNzPVwic2VwYXJhdG9yXCI+OjwvdGQ+PHRkPicgKyB0cEdsb2JhbC5zZWNvbmRUZW1wbGF0ZSArICc8L3RkPicgOiAnJykgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHBpY2tlci51c2UyNGhvdXJzID8gJycgOiAnPHRkIGNsYXNzPVwic2VwYXJhdG9yXCI+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXByaW1hcnlcIiBkYXRhLWFjdGlvbj1cInRvZ2dsZVBlcmlvZFwiPjwvYnV0dG9uPjwvdGQ+JykgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC90cj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx0cj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQ+PGEgaHJlZj1cIiNcIiBjbGFzcz1cImJ0blwiIGRhdGEtYWN0aW9uPVwiZGVjcmVtZW50SG91cnNcIj48c3BhbiBjbGFzcz1cIicgKyBwaWNrZXIub3B0aW9ucy5pY29ucy5kb3duICsgJ1wiPjwvc3Bhbj48L2E+PC90ZD4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8dGQgY2xhc3M9XCJzZXBhcmF0b3JcIj48L3RkPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZD4nICsgKHBpY2tlci5vcHRpb25zLnVzZU1pbnV0ZXMgPyAnPGEgaHJlZj1cIiNcIiBjbGFzcz1cImJ0blwiIGRhdGEtYWN0aW9uPVwiZGVjcmVtZW50TWludXRlc1wiPjxzcGFuIGNsYXNzPVwiJyArIHBpY2tlci5vcHRpb25zLmljb25zLmRvd24gKyAnXCI+PC9zcGFuPjwvYT4nIDogJycpICsgJzwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGlja2VyLm9wdGlvbnMudXNlU2Vjb25kcyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx0ZCBjbGFzcz1cInNlcGFyYXRvclwiPjwvdGQ+PHRkPjxhIGhyZWY9XCIjXCIgY2xhc3M9XCJidG5cIiBkYXRhLWFjdGlvbj1cImRlY3JlbWVudFNlY29uZHNcIj48c3BhbiBjbGFzcz1cIicgKyBwaWNrZXIub3B0aW9ucy5pY29ucy5kb3duICsgJ1wiPjwvc3Bhbj48L2E+PC90ZD4nIDogJycpICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwaWNrZXIudXNlMjRob3VycyA/ICcnIDogJzx0ZCBjbGFzcz1cInNlcGFyYXRvclwiPjwvdGQ+JykgKyAnPHRkPjwvdGQ+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L3RyPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3RhYmxlPicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWhvdXJzXCIgZGF0YS1hY3Rpb249XCJzZWxlY3RIb3VyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzx0YWJsZSBjbGFzcz1cInRhYmxlLWNvbmRlbnNlZFwiPjwvdGFibGU+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItbWludXRlc1wiIGRhdGEtYWN0aW9uPVwic2VsZWN0TWludXRlXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzx0YWJsZSBjbGFzcz1cInRhYmxlLWNvbmRlbnNlZFwiPjwvdGFibGU+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAocGlja2VyLm9wdGlvbnMudXNlU2Vjb25kcyA/XHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLXNlY29uZHNcIiBkYXRhLWFjdGlvbj1cInNlbGVjdFNlY29uZFwiPjx0YWJsZSBjbGFzcz1cInRhYmxlLWNvbmRlbnNlZFwiPjwvdGFibGU+PC9kaXY+JyA6ICcnKVxyXG4gICAgICAgICAgICApO1xyXG4gICAgXHR9O1xyXG5cclxuICAgIFx0cGlja2VyLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBcdFx0ZGV0YWNoRGF0ZVBpY2tlckV2ZW50cygpO1xyXG4gICAgXHRcdGRldGFjaERhdGVQaWNrZXJHbG9iYWxFdmVudHMoKTtcclxuICAgIFx0XHRwaWNrZXIud2lkZ2V0LnJlbW92ZSgpO1xyXG4gICAgXHRcdHBpY2tlci5lbGVtZW50LnJlbW92ZURhdGEoJ0RhdGVUaW1lUGlja2VyJyk7XHJcbiAgICBcdFx0aWYgKHBpY2tlci5jb21wb25lbnQpIHtcclxuICAgIFx0XHRcdHBpY2tlci5jb21wb25lbnQucmVtb3ZlRGF0YSgnRGF0ZVRpbWVQaWNrZXInKTtcclxuICAgIFx0XHR9XHJcbiAgICBcdH07XHJcblxyXG4gICAgXHRwaWNrZXIuc2hvdyA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICBcdFx0aWYgKGdldFBpY2tlcklucHV0KCkucHJvcCgnZGlzYWJsZWQnKSkge1xyXG4gICAgXHRcdFx0cmV0dXJuO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHRpZiAocGlja2VyLm9wdGlvbnMudXNlQ3VycmVudCkge1xyXG4gICAgXHRcdFx0aWYgKGdldFBpY2tlcklucHV0KCkudmFsKCkgPT09ICcnKSB7XHJcbiAgICBcdFx0XHRcdGlmIChwaWNrZXIub3B0aW9ucy5maWxsRW1wdHkpIHtcclxuICAgIFx0XHRcdFx0XHRpZiAocGlja2VyLm9wdGlvbnMubWludXRlU3RlcHBpbmcgIT09IDEpIHtcclxuICAgIFx0XHRcdFx0XHRcdHZhciBtRGF0ZSA9IG1vbWVudCgpLFxyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICBySW50ZXJ2YWwgPSBwaWNrZXIub3B0aW9ucy5taW51dGVTdGVwcGluZztcclxuICAgIFx0XHRcdFx0XHRcdG1EYXRlLm1pbnV0ZXMoKE1hdGgucm91bmQobURhdGUubWludXRlcygpIC8gckludGVydmFsKSAqIHJJbnRlcnZhbCkgJSA2MCkuc2Vjb25kcygwKTtcclxuICAgIFx0XHRcdFx0XHRcdHBpY2tlci5zZXRWYWx1ZShtRGF0ZS5mb3JtYXQocGlja2VyLmZvcm1hdCkpO1xyXG4gICAgXHRcdFx0XHRcdH0gZWxzZSB7XHJcbiAgICBcdFx0XHRcdFx0XHRwaWNrZXIuc2V0VmFsdWUobW9tZW50KCkuZm9ybWF0KHBpY2tlci5mb3JtYXQpKTtcclxuICAgIFx0XHRcdFx0XHR9XHJcbiAgICBcdFx0XHRcdFx0bm90aWZ5Q2hhbmdlKCcnLCBlLnR5cGUpO1xyXG4gICAgXHRcdFx0XHR9XHJcbiAgICBcdFx0XHR9IGVsc2VcclxuICAgIFx0XHRcdFx0cGlja2VyLnNldFZhbHVlKGdldFBpY2tlcklucHV0KCkudmFsKCkpO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHQvLyBpZiB0aGlzIGlzIGEgY2xpY2sgZXZlbnQgb24gdGhlIGlucHV0IGZpZWxkIGFuZCBwaWNrZXIgaXMgYWxyZWFkeSBvcGVuIGRvbid0IGhpZGUgaXRcclxuICAgIFx0XHRpZiAoZSAmJiBlLnR5cGUgPT09ICdjbGljaycgJiYgcGlja2VyLmlzSW5wdXQgJiYgcGlja2VyLndpZGdldC5oYXNDbGFzcygncGlja2VyLW9wZW4nKSkge1xyXG4gICAgXHRcdFx0cmV0dXJuO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHRpZiAocGlja2VyLndpZGdldC5oYXNDbGFzcygncGlja2VyLW9wZW4nKSkge1xyXG4gICAgXHRcdFx0cGlja2VyLndpZGdldC5oaWRlKCk7XHJcbiAgICBcdFx0XHRwaWNrZXIud2lkZ2V0LnJlbW92ZUNsYXNzKCdwaWNrZXItb3BlbicpO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHRlbHNlIHtcclxuICAgIFx0XHRcdHBpY2tlci53aWRnZXQuc2hvdygpO1xyXG4gICAgXHRcdFx0cGlja2VyLndpZGdldC5hZGRDbGFzcygncGlja2VyLW9wZW4nKTtcclxuICAgIFx0XHR9XHJcbiAgICBcdFx0cGlja2VyLmhlaWdodCA9IHBpY2tlci5jb21wb25lbnQgPyBwaWNrZXIuY29tcG9uZW50Lm91dGVySGVpZ2h0KCkgOiBwaWNrZXIuZWxlbWVudC5vdXRlckhlaWdodCgpO1xyXG4gICAgXHRcdHBsYWNlKCk7XHJcbiAgICBcdFx0cGlja2VyLmVsZW1lbnQudHJpZ2dlcih7XHJcbiAgICBcdFx0XHR0eXBlOiAnZHAuc2hvdycsXHJcbiAgICBcdFx0XHRkYXRlOiBtb21lbnQocGlja2VyLmRhdGUpXHJcbiAgICBcdFx0fSk7XHJcbiAgICBcdFx0YXR0YWNoRGF0ZVBpY2tlckdsb2JhbEV2ZW50cygpO1xyXG4gICAgXHRcdGlmIChlKSB7XHJcbiAgICBcdFx0XHRzdG9wRXZlbnQoZSk7XHJcbiAgICBcdFx0fVxyXG4gICAgXHR9O1xyXG5cclxuICAgIFx0cGlja2VyLmRpc2FibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBcdFx0dmFyIGlucHV0ID0gZ2V0UGlja2VySW5wdXQoKTtcclxuICAgIFx0XHRpZiAoaW5wdXQucHJvcCgnZGlzYWJsZWQnKSkge1xyXG4gICAgXHRcdFx0cmV0dXJuO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHRpbnB1dC5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgXHRcdGRldGFjaERhdGVQaWNrZXJFdmVudHMoKTtcclxuICAgIFx0fTtcclxuXHJcbiAgICBcdHBpY2tlci5lbmFibGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBcdFx0dmFyIGlucHV0ID0gZ2V0UGlja2VySW5wdXQoKTtcclxuICAgIFx0XHRpZiAoIWlucHV0LnByb3AoJ2Rpc2FibGVkJykpIHtcclxuICAgIFx0XHRcdHJldHVybjtcclxuICAgIFx0XHR9XHJcbiAgICBcdFx0aW5wdXQucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICBcdFx0YXR0YWNoRGF0ZVBpY2tlckV2ZW50cygpO1xyXG4gICAgXHR9O1xyXG5cclxuICAgIFx0cGlja2VyLmhpZGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBcdFx0Ly8gSWdub3JlIGV2ZW50IGlmIGluIHRoZSBtaWRkbGUgb2YgYSBwaWNrZXIgdHJhbnNpdGlvblxyXG4gICAgXHRcdHZhciBjb2xsYXBzZSA9IHBpY2tlci53aWRnZXQuZmluZCgnLmNvbGxhcHNlJyksIGksIGNvbGxhcHNlRGF0YTtcclxuICAgIFx0XHRmb3IgKGkgPSAwOyBpIDwgY29sbGFwc2UubGVuZ3RoOyBpKyspIHtcclxuICAgIFx0XHRcdGNvbGxhcHNlRGF0YSA9IGNvbGxhcHNlLmVxKGkpLmRhdGEoJ2NvbGxhcHNlJyk7XHJcbiAgICBcdFx0XHRpZiAoY29sbGFwc2VEYXRhICYmIGNvbGxhcHNlRGF0YS50cmFuc2l0aW9uaW5nKSB7XHJcbiAgICBcdFx0XHRcdHJldHVybjtcclxuICAgIFx0XHRcdH1cclxuICAgIFx0XHR9XHJcbiAgICBcdFx0cGlja2VyLndpZGdldC5oaWRlKCk7XHJcbiAgICBcdFx0cGlja2VyLndpZGdldC5yZW1vdmVDbGFzcygncGlja2VyLW9wZW4nKTtcclxuICAgIFx0XHRwaWNrZXIudmlld01vZGUgPSBwaWNrZXIuc3RhcnRWaWV3TW9kZTtcclxuICAgIFx0XHRzaG93TW9kZSgpO1xyXG4gICAgXHRcdHBpY2tlci5lbGVtZW50LnRyaWdnZXIoe1xyXG4gICAgXHRcdFx0dHlwZTogJ2RwLmhpZGUnLFxyXG4gICAgXHRcdFx0ZGF0ZTogbW9tZW50KHBpY2tlci5kYXRlKVxyXG4gICAgXHRcdH0pO1xyXG4gICAgXHRcdGRldGFjaERhdGVQaWNrZXJHbG9iYWxFdmVudHMoKTtcclxuICAgIFx0fTtcclxuXHJcbiAgICBcdHBpY2tlci5zZXRWYWx1ZSA9IGZ1bmN0aW9uIChuZXdEYXRlKSB7XHJcbiAgICBcdFx0bW9tZW50LmxvY2FsZShwaWNrZXIub3B0aW9ucy5sYW5ndWFnZSk7XHJcbiAgICBcdFx0aWYgKCFuZXdEYXRlKSB7XHJcbiAgICBcdFx0XHRwaWNrZXIudW5zZXQgPSB0cnVlO1xyXG4gICAgXHRcdFx0c2V0KCk7XHJcbiAgICBcdFx0fSBlbHNlIHtcclxuICAgIFx0XHRcdHBpY2tlci51bnNldCA9IGZhbHNlO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHRpZiAoIW1vbWVudC5pc01vbWVudChuZXdEYXRlKSkge1xyXG4gICAgXHRcdFx0bmV3RGF0ZSA9IChuZXdEYXRlIGluc3RhbmNlb2YgRGF0ZSkgPyBtb21lbnQobmV3RGF0ZSkgOiBtb21lbnQobmV3RGF0ZSwgcGlja2VyLmZvcm1hdCwgcGlja2VyLm9wdGlvbnMudXNlU3RyaWN0KTtcclxuICAgIFx0XHR9IGVsc2Uge1xyXG4gICAgXHRcdFx0bmV3RGF0ZSA9IG5ld0RhdGUubG9jYWxlKHBpY2tlci5vcHRpb25zLmxhbmd1YWdlKTtcclxuICAgIFx0XHR9XHJcbiAgICBcdFx0aWYgKG5ld0RhdGUuaXNWYWxpZCgpKSB7XHJcbiAgICBcdFx0XHRwaWNrZXIuZGF0ZSA9IG5ld0RhdGU7XHJcbiAgICBcdFx0XHRzZXQoKTtcclxuICAgIFx0XHRcdHBpY2tlci52aWV3RGF0ZSA9IG1vbWVudCh7IHk6IHBpY2tlci5kYXRlLnllYXIoKSwgTTogcGlja2VyLmRhdGUubW9udGgoKSB9KTtcclxuICAgIFx0XHRcdGZpbGxEYXRlKCk7XHJcbiAgICBcdFx0XHRmaWxsVGltZSgpO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHRlbHNlIHtcclxuICAgIFx0XHRcdG5vdGlmeUVycm9yKG5ld0RhdGUpO1xyXG4gICAgXHRcdH1cclxuICAgIFx0fTtcclxuXHJcbiAgICBcdHBpY2tlci5nZXREYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgXHRcdGlmIChwaWNrZXIudW5zZXQpIHtcclxuICAgIFx0XHRcdHJldHVybiBudWxsO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHRyZXR1cm4gbW9tZW50KHBpY2tlci5kYXRlKTtcclxuICAgIFx0fTtcclxuXHJcbiAgICBcdHBpY2tlci5zZXREYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgIFx0XHR2YXIgb2xkRGF0ZSA9IG1vbWVudChwaWNrZXIuZGF0ZSk7XHJcbiAgICBcdFx0aWYgKCFkYXRlKSB7XHJcbiAgICBcdFx0XHRwaWNrZXIuc2V0VmFsdWUobnVsbCk7XHJcbiAgICBcdFx0fSBlbHNlIHtcclxuICAgIFx0XHRcdHBpY2tlci5zZXRWYWx1ZShkYXRlKTtcclxuICAgIFx0XHR9XHJcbiAgICBcdFx0bm90aWZ5Q2hhbmdlKG9sZERhdGUsICdmdW5jdGlvbicpO1xyXG4gICAgXHR9O1xyXG5cclxuICAgIFx0cGlja2VyLnNldERpc2FibGVkRGF0ZXMgPSBmdW5jdGlvbiAoZGF0ZXMpIHtcclxuICAgIFx0XHRwaWNrZXIub3B0aW9ucy5kaXNhYmxlZERhdGVzID0gaW5kZXhHaXZlbkRhdGVzKGRhdGVzKTtcclxuICAgIFx0XHRpZiAocGlja2VyLnZpZXdEYXRlKSB7XHJcbiAgICBcdFx0XHR1cGRhdGUoKTtcclxuICAgIFx0XHR9XHJcbiAgICBcdH07XHJcblxyXG4gICAgXHRwaWNrZXIuc2V0RW5hYmxlZERhdGVzID0gZnVuY3Rpb24gKGRhdGVzKSB7XHJcbiAgICBcdFx0cGlja2VyLm9wdGlvbnMuZW5hYmxlZERhdGVzID0gaW5kZXhHaXZlbkRhdGVzKGRhdGVzKTtcclxuICAgIFx0XHRpZiAocGlja2VyLnZpZXdEYXRlKSB7XHJcbiAgICBcdFx0XHR1cGRhdGUoKTtcclxuICAgIFx0XHR9XHJcbiAgICBcdH07XHJcblxyXG4gICAgXHRwaWNrZXIuc2V0TWF4RGF0ZSA9IGZ1bmN0aW9uIChkYXRlKSB7XHJcbiAgICBcdFx0aWYgKGRhdGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgXHRcdFx0cmV0dXJuO1xyXG4gICAgXHRcdH1cclxuICAgIFx0XHRpZiAobW9tZW50LmlzTW9tZW50KGRhdGUpIHx8IGRhdGUgaW5zdGFuY2VvZiBEYXRlKSB7XHJcbiAgICBcdFx0XHRwaWNrZXIub3B0aW9ucy5tYXhEYXRlID0gbW9tZW50KGRhdGUpO1xyXG4gICAgXHRcdH0gZWxzZSB7XHJcbiAgICBcdFx0XHRwaWNrZXIub3B0aW9ucy5tYXhEYXRlID0gbW9tZW50KGRhdGUsIHBpY2tlci5mb3JtYXQsIHBpY2tlci5vcHRpb25zLnVzZVN0cmljdCk7XHJcbiAgICBcdFx0fVxyXG4gICAgXHRcdGlmIChwaWNrZXIudmlld0RhdGUpIHtcclxuICAgIFx0XHRcdHVwZGF0ZSgpO1xyXG4gICAgXHRcdH1cclxuICAgIFx0fTtcclxuXHJcbiAgICBcdHBpY2tlci5zZXRNaW5EYXRlID0gZnVuY3Rpb24gKGRhdGUpIHtcclxuICAgIFx0XHRpZiAoZGF0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICBcdFx0XHRyZXR1cm47XHJcbiAgICBcdFx0fVxyXG4gICAgXHRcdGlmIChtb21lbnQuaXNNb21lbnQoZGF0ZSkgfHwgZGF0ZSBpbnN0YW5jZW9mIERhdGUpIHtcclxuICAgIFx0XHRcdHBpY2tlci5vcHRpb25zLm1pbkRhdGUgPSBtb21lbnQoZGF0ZSk7XHJcbiAgICBcdFx0fSBlbHNlIHtcclxuICAgIFx0XHRcdHBpY2tlci5vcHRpb25zLm1pbkRhdGUgPSBtb21lbnQoZGF0ZSwgcGlja2VyLmZvcm1hdCwgcGlja2VyLm9wdGlvbnMudXNlU3RyaWN0KTtcclxuICAgIFx0XHR9XHJcbiAgICBcdFx0aWYgKHBpY2tlci52aWV3RGF0ZSkge1xyXG4gICAgXHRcdFx0dXBkYXRlKCk7XHJcbiAgICBcdFx0fVxyXG4gICAgXHR9O1xyXG5cclxuICAgIFx0aW5pdCgpO1xyXG4gICAgfTtcclxuXHJcblx0JC5mbi5kYXRldGltZXBpY2tlciA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0dmFyICR0aGlzID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGRhdGEgPSAkdGhpcy5kYXRhKCdEYXRlVGltZVBpY2tlcicpO1xyXG5cdFx0XHRpZiAoIWRhdGEpIHtcclxuXHRcdFx0XHQkdGhpcy5kYXRhKCdEYXRlVGltZVBpY2tlcicsIG5ldyBEYXRlVGltZVBpY2tlcih0aGlzLCBvcHRpb25zKSk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH07XHJcblxyXG5cdCQuZm4uZGF0ZXRpbWVwaWNrZXIuZGVmYXVsdHMgPSB7XHJcblx0XHRmb3JtYXQ6IGZhbHNlLFxyXG5cdFx0cGlja0RhdGU6IHRydWUsXHJcblx0XHRwaWNrVGltZTogdHJ1ZSxcclxuXHRcdHVzZU1pbnV0ZXM6IHRydWUsXHJcblx0XHR1c2VTZWNvbmRzOiBmYWxzZSxcclxuXHRcdHVzZUN1cnJlbnQ6IHRydWUsXHJcblx0XHRjYWxlbmRhcldlZWtzOiBmYWxzZSxcclxuXHRcdG1pbnV0ZVN0ZXBwaW5nOiAxLFxyXG5cdFx0bWluRGF0ZTogbW9tZW50KHsgeTogMTkwMCB9KSxcclxuXHRcdG1heERhdGU6IG1vbWVudCgpLmFkZCgxMDAsICd5JyksXHJcblx0XHRzaG93VG9kYXk6IHRydWUsXHJcblx0XHRjb2xsYXBzZTogZmFsc2UsXHJcblx0XHRsYW5ndWFnZTogbW9tZW50LmxvY2FsZSgpLFxyXG5cdFx0ZGVmYXVsdERhdGU6ICcnLFxyXG5cdFx0ZGlzYWJsZWREYXRlczogZmFsc2UsXHJcblx0XHRlbmFibGVkRGF0ZXM6IGZhbHNlLFxyXG5cdFx0aWNvbnM6IHt9LFxyXG5cdFx0dXNlU3RyaWN0OiBmYWxzZSxcclxuXHRcdGRpcmVjdGlvbjogJ2F1dG8nLFxyXG5cdFx0c2lkZUJ5U2lkZTogZmFsc2UsXHJcblx0XHRkYXlzT2ZXZWVrRGlzYWJsZWQ6IFtdLFxyXG5cdFx0d2lkZ2V0UGFyZW50OiBmYWxzZSxcclxuXHRcdGZpbGxFbXB0eTogZmFsc2VcclxuXHR9O1xyXG59KSk7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9saWJyYXJpZXMvYm9vdHN0cmFwLWRhdGV0aW1lcGlja2VyL2Jvb3RzdHJhcC1kYXRldGltZXBpY2tlci5qc1xuICoqIG1vZHVsZSBpZCA9IDExNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG52YXIgX19ndWlkID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLmd1aWQ7XHJcbnZhciByZXF1aXJlZF8xID0gcmVxdWlyZSgnLi4vLi4vYmVoYXZpb3JzL3JlcXVpcmVkL3JlcXVpcmVkJyk7XHJcbnZhciBjb21wb25lbnRWYWxpZGF0b3Jfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvY29tcG9uZW50VmFsaWRhdG9yL2NvbXBvbmVudFZhbGlkYXRvci5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmlucHV0JztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdJbnB1dENvbnRyb2xsZXInO1xyXG52YXIgSW5wdXRDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIElucHV0Q29udHJvbGxlcigkc2NvcGUsICRhdHRycywgY29tcG9uZW50VmFsaWRhdG9yRmFjdG9yeSkge1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMuJGF0dHJzID0gJGF0dHJzO1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50VmFsaWRhdG9yRmFjdG9yeSA9IGNvbXBvbmVudFZhbGlkYXRvckZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy5pbnB1dFR5cGUgPSAnaW5wdXQnO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KElucHV0Q29udHJvbGxlci5wcm90b3R5cGUsIFwiaW5wdXRWYWx1ZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5nTW9kZWwuJHZpZXdWYWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMubmdNb2RlbC4kc2V0Vmlld1ZhbHVlKHZhbHVlKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIElucHV0Q29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB2YWxpZGF0b3JzID0gW107XHJcbiAgICAgICAgaWYgKCFfLmlzVW5kZWZpbmVkKHRoaXMudmFsaWRhdG9yKSkge1xyXG4gICAgICAgICAgICB2YWxpZGF0b3JzLnB1c2godGhpcy52YWxpZGF0b3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX19vYmplY3Qub2JqZWN0VXRpbGl0eS5pc051bGxPckVtcHR5KHRoaXMuJGF0dHJzLm5hbWUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJGF0dHJzLiRzZXQoJ25hbWUnLCB0aGlzLmlucHV0VHlwZSArICctJyArIF9fZ3VpZC5ndWlkLnJhbmRvbSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVxdWlyZWQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2YWxpZGF0b3JzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3JsUmVxdWlyZWQnLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRhdGU6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICFfX29iamVjdC5vYmplY3RVdGlsaXR5LmlzTnVsbE9yRW1wdHkoX3RoaXMubmdNb2RlbC4kdmlld1ZhbHVlKTsgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yTWVzc2FnZTogdGhpcy5yZXF1aXJlZC5tZXNzYWdlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF8uc29tZSh2YWxpZGF0b3JzKSkge1xyXG4gICAgICAgICAgICB0aGlzLmlucHV0VmFsaWRhdG9yID0gdGhpcy5jb21wb25lbnRWYWxpZGF0b3JGYWN0b3J5LmdldEluc3RhbmNlKHtcclxuICAgICAgICAgICAgICAgIG5nTW9kZWw6IHRoaXMubmdNb2RlbCxcclxuICAgICAgICAgICAgICAgICRzY29wZTogdGhpcy4kc2NvcGUsXHJcbiAgICAgICAgICAgICAgICB2YWxpZGF0b3JzOiB2YWxpZGF0b3JzLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgSW5wdXRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckYXR0cnMnLCBjb21wb25lbnRWYWxpZGF0b3Jfc2VydmljZV8xLmZhY3RvcnlOYW1lXTtcclxuICAgIHJldHVybiBJbnB1dENvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuSW5wdXRDb250cm9sbGVyID0gSW5wdXRDb250cm9sbGVyO1xyXG52YXIgYmFzZUlucHV0T3B0aW9ucyA9IHtcclxuICAgIHJlcXVpcmU6IHtcclxuICAgICAgICBuZ01vZGVsOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgcmVxdWlyZWQ6ICc/JyArIHJlcXVpcmVkXzEuZGlyZWN0aXZlTmFtZSxcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZTogJycsXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnaW5wdXQnLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICB2YWxpZGF0b3I6ICc8PycsXHJcbiAgICAgICAgbGFiZWw6ICdAJyxcclxuICAgICAgICBuYW1lOiAnQCcsXHJcbiAgICB9LFxyXG59O1xyXG5mdW5jdGlvbiBidWlsZElucHV0KG9wdGlvbnMpIHtcclxuICAgIHZhciBjbG9uZSA9IF8uY2xvbmUoYmFzZUlucHV0T3B0aW9ucyk7XHJcbiAgICBjbG9uZS50ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XHJcbiAgICBjbG9uZS5jb250cm9sbGVyID0gb3B0aW9ucy5jb250cm9sbGVyIHx8IGNsb25lLmNvbnRyb2xsZXI7XHJcbiAgICBjbG9uZS5jb250cm9sbGVyQXMgPSBvcHRpb25zLmNvbnRyb2xsZXJBcyB8fCBjbG9uZS5jb250cm9sbGVyQXM7XHJcbiAgICBjbG9uZS5iaW5kaW5ncyA9IF8uYXNzaWduKHt9LCBjbG9uZS5iaW5kaW5ncywgb3B0aW9ucy5iaW5kaW5ncyk7XHJcbiAgICByZXR1cm4gY2xvbmU7XHJcbn1cclxuZXhwb3J0cy5idWlsZElucHV0ID0gYnVpbGRJbnB1dDtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbY29tcG9uZW50VmFsaWRhdG9yX3NlcnZpY2VfMS5tb2R1bGVOYW1lXSlcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIElucHV0Q29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWFXNXdkWFF1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SnBibkIxZEM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3d3UkVGQk1FUTdRVUZGTVVRc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeFBRVUZQTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkRia01zU1VGQldTeERRVUZETEZkQlFVMHNVVUZCVVN4RFFVRkRMRU5CUVVFN1FVRkZOVUlzTmtOQlFYbENMRGhDUVVFNFFpeERRVUZETEVOQlFVRTdRVUZGZUVRc1NVRkJUeXhSUVVGUkxFZEJRVWNzZFVOQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRiRU1zU1VGQlR5eE5RVUZOTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhKUVVGSkxFTkJRVU03UVVGSE9VSXNlVUpCUVRKRkxHMURRVUZ0UXl4RFFVRkRMRU5CUVVFN1FVRkRMMGNzTWtOQlMwOHNPRVJCUVRoRUxFTkJRVU1zUTBGQlFUdEJRVVV6UkN4clFrRkJWU3hIUVVGWExIZENRVUYzUWl4RFFVRkRPMEZCUXpsRExITkNRVUZqTEVkQlFWY3NhVUpCUVdsQ0xFTkJRVU03UVVGaGRFUTdTVUZ2UWtNc2VVSkJRWE5DTEUxQlFYTkNMRVZCUXpsQ0xFMUJRWGRDTEVWQlF6RkNMSGxDUVVGeFJEdFJRVVl6UXl4WFFVRk5MRWRCUVU0c1RVRkJUU3hEUVVGblFqdFJRVU01UWl4WFFVRk5MRWRCUVU0c1RVRkJUU3hEUVVGclFqdFJRVU14UWl3NFFrRkJlVUlzUjBGQmVrSXNlVUpCUVhsQ0xFTkJRVFJDTzFGQlltcEZMR05CUVZNc1IwRkJWeXhQUVVGUExFTkJRVU03U1VGaGVVTXNRMEZCUXp0SlFWaDBSU3h6UWtGQlNTeDFRMEZCVlR0aFFVRmtPMWxCUTBNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNWVUZCVlN4RFFVRkRPMUZCUTJoRExFTkJRVU03WVVGRlJDeFZRVUZsTEV0QlFXRTdXVUZETTBJc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eGhRVUZoTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNN1VVRkRia01zUTBGQlF6czdPMDlCU2tFN1NVRlhSQ3hwUTBGQlR5eEhRVUZRTzFGQlFVRXNhVUpCTUVKRE8xRkJla0pCTEVsQlFVa3NWVUZCVlN4SFFVRnpReXhGUVVGRkxFTkJRVU03VVVGRmRrUXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGNFTXNWVUZCVlN4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eERRVUZETEVOQlFVTTdVVUZEYWtNc1EwRkJRenRSUVVWRUxFVkJRVVVzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4aFFVRmhMRU5CUVVNc1lVRkJZU3hEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRelZFTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUlVGQlJTeEpRVUZKTEVOQlFVTXNVMEZCVXl4SFFVRkhMRWRCUVVjc1IwRkJSeXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNSVUZCUlN4RFFVRkRMRU5CUVVNN1VVRkRka1VzUTBGQlF6dFJRVVZFTEVWQlFVVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhSUVVGUkxFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTXpRaXhWUVVGVkxFTkJRVU1zU1VGQlNTeERRVUZETzJkQ1FVTm1MRWxCUVVrc1JVRkJSU3haUVVGWk8yZENRVU5zUWl4UlFVRlJMRVZCUVVVc1kwRkJhVUlzVFVGQlRTeERRVUZETEVOQlFVTXNVVUZCVVN4RFFVRkRMR0ZCUVdFc1EwRkJReXhoUVVGaExFTkJRVU1zUzBGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEyNUhMRmxCUVZrc1JVRkJSU3hKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEU5QlFVODdZVUZEYmtNc1EwRkJReXhEUVVGRE8xRkJRMG9zUTBGQlF6dFJRVVZFTEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNoQ0xFbEJRVWtzUTBGQlF5eGpRVUZqTEVkQlFVY3NTVUZCU1N4RFFVRkRMSGxDUVVGNVFpeERRVUZETEZkQlFWY3NRMEZCUXp0blFrRkRhRVVzVDBGQlR5eEZRVUZGTEVsQlFVa3NRMEZCUXl4UFFVRlBPMmRDUVVOeVFpeE5RVUZOTEVWQlFVVXNTVUZCU1N4RFFVRkRMRTFCUVUwN1owSkJRMjVDTEZWQlFWVXNSVUZCUlN4VlFVRlZPMkZCUTNSQ0xFTkJRVU1zUTBGQlF6dFJRVU5LTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCTDBKTkxIVkNRVUZQTEVkQlFXRXNRMEZCUXl4UlFVRlJMRVZCUVVVc1VVRkJVU3hGUVVGRkxIZERRVUUyUWl4RFFVRkRMRU5CUVVNN1NVRm5RMmhHTEhOQ1FVRkRPMEZCUVVRc1EwRkJReXhCUVc1RVJDeEpRVzFFUXp0QlFXNUVXU3gxUWtGQlpTeHJRa0Z0UkROQ0xFTkJRVUU3UVVGRlJDeEpRVUZKTEdkQ1FVRm5RaXhIUVVFNFFqdEpRVU5xUkN4UFFVRlBMRVZCUVVVN1VVRkRVaXhQUVVGUExFVkJRVVVzVTBGQlV6dFJRVU5zUWl4UlFVRlJMRVZCUVVVc1IwRkJSeXhIUVVGSExIZENRVUZ4UWp0TFFVTnlRenRKUVVORUxGRkJRVkVzUlVGQlJTeEZRVUZGTzBsQlExb3NWVUZCVlN4RlFVRkZMSE5DUVVGak8wbEJRekZDTEZsQlFWa3NSVUZCUlN4UFFVRlBPMGxCUTNKQ0xGRkJRVkVzUlVGQlJUdFJRVU5VTEZOQlFWTXNSVUZCUlN4SlFVRkpPMUZCUTJZc1MwRkJTeXhGUVVGRkxFZEJRVWM3VVVGRFZpeEpRVUZKTEVWQlFVVXNSMEZCUnp0TFFVTlVPME5CUTBRc1EwRkJRenRCUVVWR0xHOUNRVUV5UWl4UFFVRnpRanRKUVVOb1JDeEpRVUZKTEV0QlFVc3NSMEZCVVN4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExHZENRVUZuUWl4RFFVRkRMRU5CUVVNN1NVRkRNME1zUzBGQlN5eERRVUZETEZGQlFWRXNSMEZCUnl4UFFVRlBMRU5CUVVNc1VVRkJVU3hEUVVGRE8wbEJRMnhETEV0QlFVc3NRMEZCUXl4VlFVRlZMRWRCUVVjc1QwRkJUeXhEUVVGRExGVkJRVlVzU1VGQlNTeExRVUZMTEVOQlFVTXNWVUZCVlN4RFFVRkRPMGxCUXpGRUxFdEJRVXNzUTBGQlF5eFpRVUZaTEVkQlFVY3NUMEZCVHl4RFFVRkRMRmxCUVZrc1NVRkJTU3hMUVVGTExFTkJRVU1zV1VGQldTeERRVUZETzBsQlEyaEZMRXRCUVVzc1EwRkJReXhSUVVGUkxFZEJRVWNzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4RlFVRkZMRVZCUVVVc1MwRkJTeXhEUVVGRExGRkJRVkVzUlVGQlJTeFBRVUZQTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNN1NVRkRhRVVzVFVGQlRTeERRVUZETEV0QlFVc3NRMEZCUXp0QlFVTmtMRU5CUVVNN1FVRlFaU3hyUWtGQlZTeGhRVTk2UWl4RFFVRkJPMEZCUlVRc1QwRkJUeXhEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZMRU5CUVVNc2RVTkJRVFJDTEVOQlFVTXNRMEZCUXp0TFFVTjRSQ3hWUVVGVkxFTkJRVU1zYzBKQlFXTXNSVUZCUlN4bFFVRmxMRU5CUVVNc1EwRkJReUo5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2lucHV0L2lucHV0LmpzXG4gKiogbW9kdWxlIGlkID0gMTE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX192YWxpZGF0aW9uID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnZhbGlkYXRpb247XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5zZXJ2aWNlcy5jb21wb25lbnRWYWxpZGF0b3InO1xyXG5leHBvcnRzLmZhY3RvcnlOYW1lID0gJ2NvbXBvbmVudFZhbGlkYXRvcic7XHJcbnZhciBDb21wb25lbnRWYWxpZGF0b3IgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQ29tcG9uZW50VmFsaWRhdG9yKHZhbGlkYXRpb25TZXJ2aWNlLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLiRzY29wZSA9IG9wdGlvbnMuJHNjb3BlO1xyXG4gICAgICAgIHRoaXMubmdNb2RlbCA9IG9wdGlvbnMubmdNb2RlbDtcclxuICAgICAgICB0aGlzLmZvcm0gPSBvcHRpb25zLmZvcm07XHJcbiAgICAgICAgdGhpcy52YWxpZGF0b3IgPSB2YWxpZGF0aW9uU2VydmljZS5idWlsZEN1c3RvbVZhbGlkYXRvcihmdW5jdGlvbiAoZXJyb3IsIG5hbWUpIHtcclxuICAgICAgICAgICAgX3RoaXMuZXJyb3IgPSBlcnJvcjtcclxuICAgICAgICAgICAgX3RoaXMuZXJyb3JUeXBlID0gbmFtZSB8fCAnY3VzdG9tVmFsaWRhdGlvbic7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXy5lYWNoKG9wdGlvbnMudmFsaWRhdG9ycywgZnVuY3Rpb24gKGN1c3RvbVZhbGlkYXRvcikge1xyXG4gICAgICAgICAgICBfdGhpcy52YWxpZGF0b3IucmVnaXN0ZXJWYWxpZGF0aW9uSGFuZGxlcihjdXN0b21WYWxpZGF0b3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuc2V0VmFsaWRhdG9yKCk7XHJcbiAgICB9XHJcbiAgICBDb21wb25lbnRWYWxpZGF0b3IucHJvdG90eXBlLnNldFZhbGlkYXRvciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLiRzY29wZS4kd2F0Y2godGhpcy52YWxpZGF0b3IudmFsaWRhdGUuYmluZCh0aGlzLnZhbGlkYXRvciksIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmVycm9yID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIV8uaXNVbmRlZmluZWQoX3RoaXMubmdNb2RlbCkpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm5nTW9kZWwuJHNldFZhbGlkaXR5KF90aGlzLmVycm9yVHlwZSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubmdNb2RlbC5ybEVycm9yTWVzc2FnZSA9IF90aGlzLmVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKCFfLmlzVW5kZWZpbmVkKF90aGlzLmZvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5mb3JtLiRzZXRWYWxpZGl0eShfdGhpcy5lcnJvclR5cGUsIHZhbHVlLCAnZ3JvdXAnKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmZvcm0ucmxFcnJvck1lc3NhZ2UgPSBfdGhpcy5lcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChfLmlzRnVuY3Rpb24oX3RoaXMuc2V0VmFsaWRpdHkpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRWYWxpZGl0eSh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQ29tcG9uZW50VmFsaWRhdG9yO1xyXG59KCkpO1xyXG5leHBvcnRzLkNvbXBvbmVudFZhbGlkYXRvciA9IENvbXBvbmVudFZhbGlkYXRvcjtcclxuY29tcG9uZW50VmFsaWRhdG9yRmFjdG9yeS4kaW5qZWN0ID0gW19fdmFsaWRhdGlvbi5zZXJ2aWNlTmFtZV07XHJcbmZ1bmN0aW9uIGNvbXBvbmVudFZhbGlkYXRvckZhY3RvcnkodmFsaWRhdGlvblNlcnZpY2UpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcG9uZW50VmFsaWRhdG9yKHZhbGlkYXRpb25TZXJ2aWNlLCBvcHRpb25zKTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLmNvbXBvbmVudFZhbGlkYXRvckZhY3RvcnkgPSBjb21wb25lbnRWYWxpZGF0b3JGYWN0b3J5O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtfX3ZhbGlkYXRpb24ubW9kdWxlTmFtZV0pXHJcbiAgICAuZmFjdG9yeShleHBvcnRzLmZhY3RvcnlOYW1lLCBjb21wb25lbnRWYWxpZGF0b3JGYWN0b3J5KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWTI5dGNHOXVaVzUwVm1Gc2FXUmhkRzl5TG5ObGNuWnBZMlV1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SmpiMjF3YjI1bGJuUldZV3hwWkdGMGIzSXVjMlZ5ZG1salpTNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4WlFVRlpMRU5CUVVNN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVTnVReXhKUVVGWkxFTkJRVU1zVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVVTFRaXcyUTBGQmVVSXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlFUdEJRVU40UkN4SlFVRlBMRmxCUVZrc1IwRkJSeXgxUTBGQlVTeERRVUZETEZWQlFWVXNRMEZCUXp0QlFVa3ZRaXhyUWtGQlZTeEhRVUZYTEcxRFFVRnRReXhEUVVGRE8wRkJRM3BFTEcxQ1FVRlhMRWRCUVZjc2IwSkJRVzlDTEVOQlFVTTdRVUZqZEVRN1NVRlZReXcwUWtGQldTeHBRa0ZCYTBRc1JVRkRNVVFzVDBGQmJVTTdVVUZZZUVNc2FVSkJORU5ETzFGQmFFTkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFZEJRVWNzVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXp0UlFVTTNRaXhKUVVGSkxFTkJRVU1zVDBGQlR5eEhRVUZITEU5QlFVOHNRMEZCUXl4UFFVRlBMRU5CUVVNN1VVRkRMMElzU1VGQlNTeERRVUZETEVsQlFVa3NSMEZCUnl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRE8xRkJSWHBDTEVsQlFVa3NRMEZCUXl4VFFVRlRMRWRCUVVjc2FVSkJRV2xDTEVOQlFVTXNiMEpCUVc5Q0xFTkJRVU1zVlVGQlF5eExRVUZoTEVWQlFVVXNTVUZCV1R0WlFVTnVSaXhMUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEV0QlFVc3NRMEZCUXp0WlFVTnVRaXhMUVVGSkxFTkJRVU1zVTBGQlV5eEhRVUZITEVsQlFVa3NTVUZCU1N4clFrRkJhMElzUTBGQlF6dFJRVU0zUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRSUVVOSUxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRlZCUVZVc1JVRkJSU3hWUVVGRExHVkJRV2RFTzFsQlF6TkZMRXRCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zZVVKQlFYbENMRU5CUVVNc1pVRkJaU3hEUVVGRExFTkJRVU03VVVGRE0wUXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkZTQ3hKUVVGSkxFTkJRVU1zV1VGQldTeEZRVUZGTEVOQlFVTTdTVUZEY2tJc1EwRkJRenRKUVVWUExIbERRVUZaTEVkQlFYQkNPMUZCUVVFc2FVSkJaMEpETzFGQlprRXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRVZCUVVVc1ZVRkJReXhMUVVGak8xbEJRM1JHTEVWQlFVVXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlExZ3NTMEZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhKUVVGSkxFTkJRVU03V1VGRGJrSXNRMEZCUXp0WlFVVkVMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEZkQlFWY3NRMEZCUXl4TFFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTnNReXhMUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEZsQlFWa3NRMEZCUXl4TFFVRkpMRU5CUVVNc1UwRkJVeXhGUVVGRkxFdEJRVXNzUTBGQlF5eERRVUZETzJkQ1FVTnFSQ3hMUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEdOQlFXTXNSMEZCUnl4TFFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRE8xbEJRekZETEVOQlFVTTdXVUZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNWMEZCVnl4RFFVRkRMRXRCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdaMEpCUTNSRExFdEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRMRXRCUVVrc1EwRkJReXhUUVVGVExFVkJRVVVzUzBGQlN5eEZRVUZQTEU5QlFVOHNRMEZCUXl4RFFVRkRPMmRDUVVNMVJDeExRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMR05CUVdNc1IwRkJSeXhMUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETzFsQlEzWkRMRU5CUVVNN1dVRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhMUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMmRDUVVNelF5eExRVUZKTEVOQlFVTXNWMEZCVnl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRE8xbEJRM3BDTEVOQlFVTTdVVUZEUml4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGRFJpeDVRa0ZCUXp0QlFVRkVMRU5CUVVNc1FVRTFRMFFzU1VFMFEwTTdRVUUxUTFrc01FSkJRV3RDTEhGQ1FUUkRPVUlzUTBGQlFUdEJRVTFFTEhsQ1FVRjVRaXhEUVVGRExFOUJRVThzUjBGQlJ5eERRVUZETEZsQlFWa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJRenRCUVVNdlJDeHRRMEZCTUVNc2FVSkJRV3RFTzBsQlF6TkdMRTFCUVUwc1EwRkJRenRSUVVOT0xGZEJRVmNzV1VGQlF5eFBRVUZ0UXp0WlFVTTVReXhOUVVGTkxFTkJRVU1zU1VGQlNTeHJRa0ZCYTBJc1EwRkJReXhwUWtGQmFVSXNSVUZCUlN4UFFVRlBMRU5CUVVNc1EwRkJRenRSUVVNelJDeERRVUZETzB0QlEwUXNRMEZCUXp0QlFVTklMRU5CUVVNN1FVRk9aU3hwUTBGQmVVSXNORUpCVFhoRExFTkJRVUU3UVVGRlJDeFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMR3RDUVVGVkxFVkJRVVVzUTBGQlF5eFpRVUZaTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNN1MwRkRia1FzVDBGQlR5eERRVUZETEcxQ1FVRlhMRVZCUVVVc2VVSkJRWGxDTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2Uvc2VydmljZXMvY29tcG9uZW50VmFsaWRhdG9yL2NvbXBvbmVudFZhbGlkYXRvci5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gMTE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiaW5wdXQtZ3JvdXAgZmllbGQgZGF0ZS10aW1lXFxcIiBuZy1jbGFzcz1cXFwieyAnaGFzLXdhcm5pbmcnOiAhZGF0ZVRpbWUudmFsaWRGb3JtYXQsICdlcnJvcic6IGRhdGVUaW1lLm5nTW9kZWwuJGludmFsaWQsICdkYXRlcGlja2VyLXdpdGgtY2xlYXInOiBkYXRlVGltZS5jbGVhckJ1dHRvbiB9XFxcIj5cXHJcXG5cXHQ8c3BhbiBjbGFzcz1cXFwic2hvdy1kYXRlLXBpY2tlclxcXCI+XFxyXFxuXFx0XFx0PGlucHV0IHR5cGU9XFxcInRleHRcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2xcXFwiIG5nLW1vZGVsPVxcXCJkYXRlVGltZS5uZ01vZGVsLiR2aWV3VmFsdWVcXFwiIC8+XFxyXFxuXFx0XFx0PHNwYW4gY2xhc3M9XFxcImlucHV0LWdyb3VwLWJ0blxcXCI+XFxyXFxuXFx0XFx0XFx0PGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kZWZhdWx0XFxcIiBuZy1jbGljaz1cXFwidG9nZ2xlKClcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1jYWxlbmRhclxcXCI+PC9pPjwvYnV0dG9uPlxcclxcblxcdFxcdDwvc3Bhbj5cXHJcXG5cXHRcXHQ8c3BhbiBjbGFzcz1cXFwidGltZXpvbmVcXFwiIG5nLWlmPVxcXCJkYXRlVGltZS51c2VEYXRlXFxcIj57e2RhdGVUaW1lLnRpbWV6b25lLmRpc3BsYXl9fTwvc3Bhbj5cXHJcXG5cXHQ8L3NwYW4+XFxyXFxuXFx0PHNwYW4gY2xhc3M9XFxcImRhdGVwaWNrZXItY2xlYXJcXFwiIG5nLWlmPVxcXCI6OmRhdGVUaW1lLmNsZWFyQnV0dG9uXFxcIj5cXHJcXG5cXHRcXHQ8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tZGVmYXVsdFxcXCIgIG5nLWRpc2FibGVkPVxcXCJkYXRlVGltZS5uZ01vZGVsLiR2aWV3VmFsdWUgfCBpc0VtcHR5XFxcIiBuZy1jbGljaz1cXFwiZGF0ZVRpbWUub25DbGVhckNsaWNrKClcXFwiID5cXHJcXG5cXHRcXHRcXHQ8aSBjbGFzcz1cXFwiZmEgZmEtdGltZXNcXFwiPjwvaT5cXHJcXG5cXHRcXHQ8L2J1dHRvbj5cXHJcXG5cXHQ8L3NwYW4+XFxyXFxuXFx0PHNwYW4gY2xhc3M9XFxcImVycm9yLXN0cmluZyBhbmd1bGFyLWFuaW1hdGVcXFwiIG5nLWlmPVxcXCJkYXRlVGltZS5pbnB1dFZhbGlkYXRvci5lcnJvciB8IGlzRW1wdHk6ZmFsc2VcXFwiPnt7ZGF0ZVRpbWUuaW5wdXRWYWxpZGF0b3IuZXJyb3J9fTwvc3Bhbj5cXHJcXG48L2Rpdj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9kYXRlVGltZS9kYXRlVGltZS5odG1sXG4gKiogbW9kdWxlIGlkID0gMTE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3MvYm9vdHN0cmFwRGF0ZVRpbWVQaWNrZXIuZC50cycgLz5cclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmRhdGVUaW1lU3RhdGljJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsRGF0ZVRpbWVTdGF0aWMnO1xyXG52YXIgZGF0ZVRpbWVTdGF0aWNDb21wb25lbnQgPSB7XHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9kYXRlVGltZVN0YXRpYy5odG1sJyksXHJcbiAgICBjb250cm9sbGVyQXM6ICd2aWV3JyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgZGF0ZVZhbHVlOiAnPCcsXHJcbiAgICAgICAgaW5jbHVkZVRpbWU6ICc8PycsXHJcbiAgICB9LFxyXG59O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIGRhdGVUaW1lU3RhdGljQ29tcG9uZW50KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWkdGMFpWUnBiV1ZUZEdGMGFXTXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKa1lYUmxWR2x0WlZOMFlYUnBZeTUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdRVUZGWWl4NVJVRkJlVVU3UVVGRmVrVXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGSmVFSXNhMEpCUVZVc1IwRkJWeXhwUTBGQmFVTXNRMEZCUXp0QlFVTjJSQ3h4UWtGQllTeEhRVUZYTEd0Q1FVRnJRaXhEUVVGRE8wRkJUM1JFTEVsQlFVa3NkVUpCUVhWQ0xFZEJRVGhDTzBsQlEzaEVMRkZCUVZFc1JVRkJSU3hQUVVGUExFTkJRVU1zZFVKQlFYVkNMRU5CUVVNN1NVRkRNVU1zV1VGQldTeEZRVUZGTEUxQlFVMDdTVUZEY0VJc1VVRkJVU3hGUVVGRk8xRkJRMVFzVTBGQlV5eEZRVUZGTEVkQlFVYzdVVUZEWkN4WFFVRlhMRVZCUVVVc1NVRkJTVHRMUVVOcVFqdERRVU5FTEVOQlFVTTdRVUZGUml4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVXNSVUZCUlN4RFFVRkRPMHRCUXpWQ0xGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMSFZDUVVGMVFpeERRVUZETEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2RhdGVUaW1lU3RhdGljL2RhdGVUaW1lU3RhdGljLmpzXG4gKiogbW9kdWxlIGlkID0gMTE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHNwYW4gY2xhc3M9XFxcInJsLWRhdGUtdGltZS1zdGF0aWNcXFwiPnt7dmlldy5kYXRlVmFsdWUgfCBybERhdGU6dmlldy5pbmNsdWRlVGltZX19PC9zcGFuPlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2RhdGVUaW1lU3RhdGljL2RhdGVUaW1lU3RhdGljLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3Mvbm9kZS9ub2RlLmQudHMnIC8+XHJcbi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3MvanF1ZXJ5L2pxdWVyeS5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgZGlhbG9nX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uLy4uL3NlcnZpY2VzL2RpYWxvZy9kaWFsb2cuc2VydmljZScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5kaWFsb2cnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxEaWFsb2cnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ0RpYWxvZ0NvbnRyb2xsZXInO1xyXG52YXIgRGlhbG9nQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBEaWFsb2dDb250cm9sbGVyKCRzY29wZSwgJGVsZW1lbnQsICR0cmFuc2NsdWRlLCAkY29tcGlsZSwgZGlhbG9nU2VydmljZSkge1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcclxuICAgICAgICB0aGlzLiR0cmFuc2NsdWRlID0gJHRyYW5zY2x1ZGU7XHJcbiAgICAgICAgdGhpcy4kY29tcGlsZSA9ICRjb21waWxlO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nU2VydmljZSA9IGRpYWxvZ1NlcnZpY2U7XHJcbiAgICB9XHJcbiAgICBEaWFsb2dDb250cm9sbGVyLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVuYmluZCA9IHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5mb3JtOyB9LCBmdW5jdGlvbiAoZm9ybSkge1xyXG4gICAgICAgICAgICBpZiAoZm9ybSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5kaWFsb2dTZXJ2aWNlLnNldEZvcm0oZm9ybSk7XHJcbiAgICAgICAgICAgICAgICB1bmJpbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIERpYWxvZ0NvbnRyb2xsZXIucHJvdG90eXBlLiRwb3N0TGluayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuY2xvc2UgPSB0aGlzLiRzY29wZS4kcGFyZW50LiRjbG9zZTtcclxuICAgICAgICB0aGlzLmRpc21pc3MgPSB0aGlzLiRzY29wZS4kcGFyZW50LiRkaXNtaXNzO1xyXG4gICAgICAgIHRoaXMuc2F2ZUFuZENsb3NlID0gdGhpcy4kc2NvcGUuJHBhcmVudC4kc2F2ZUFuZENsb3NlO1xyXG4gICAgICAgIHZhciBmb290ZXJBcmVhID0gdGhpcy4kZWxlbWVudC5maW5kKCcuZm9vdGVyLXRlbXBsYXRlJyk7XHJcbiAgICAgICAgaWYgKHRoaXMuJHRyYW5zY2x1ZGUuaXNTbG90RmlsbGVkKCdmb290ZXJTbG90JykpIHtcclxuICAgICAgICAgICAgdGhpcy4kdHJhbnNjbHVkZShmdW5jdGlvbiAoZm9vdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5oYXNGb290ZXIgPSAoZm9vdGVyLmxlbmd0aCA+IDApO1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmhhc0Zvb3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvb3RlckFyZWEuYXBwZW5kKGZvb3Rlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIG51bGwsICdmb290ZXJTbG90Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuYXV0b3NhdmUpIHtcclxuICAgICAgICAgICAgdmFyIGZvb3RlciA9IHRoaXMuJGNvbXBpbGUocmVxdWlyZSgnLi9hdXRvc2F2ZURpYWxvZ0Zvb3Rlci5odG1sJykpKHRoaXMuJHNjb3BlKTtcclxuICAgICAgICAgICAgdGhpcy5oYXNGb290ZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICBmb290ZXJBcmVhLmFwcGVuZChmb290ZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBEaWFsb2dDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckZWxlbWVudCcsICckdHJhbnNjbHVkZScsICckY29tcGlsZScsIGRpYWxvZ19zZXJ2aWNlXzEuc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIERpYWxvZ0NvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRGlhbG9nQ29udHJvbGxlciA9IERpYWxvZ0NvbnRyb2xsZXI7XHJcbnZhciBkaWFsb2cgPSB7XHJcbiAgICB0cmFuc2NsdWRlOiB7XHJcbiAgICAgICAgaGVhZGVyU2xvdDogJz9ybERpYWxvZ0hlYWRlcicsXHJcbiAgICAgICAgY29udGVudFNsb3Q6ICc/cmxEaWFsb2dDb250ZW50JyxcclxuICAgICAgICBmb290ZXJTbG90OiAnP3JsRGlhbG9nRm9vdGVyJyxcclxuICAgIH0sXHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9kaWFsb2cuaHRtbCcpLFxyXG4gICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgIGNvbnRyb2xsZXJBczogJ2RpYWxvZycsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIGF1dG9zYXZlOiAnPScsXHJcbiAgICB9LFxyXG59O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtkaWFsb2dfc2VydmljZV8xLm1vZHVsZU5hbWVdKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIGRpYWxvZylcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIERpYWxvZ0NvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laR2xoYkc5bkxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpWkdsaGJHOW5MblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxESkVRVUV5UkR0QlFVTXpSQ3dyUkVGQkswUTdRVUZGTDBRc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeFBRVUZQTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkZia01zSzBKQlFUUkdMSE5EUVVGelF5eERRVUZETEVOQlFVRTdRVUZIZUVnc2EwSkJRVlVzUjBGQlZ5eDVRa0ZCZVVJc1EwRkJRenRCUVVNdlF5eHhRa0ZCWVN4SFFVRlhMRlZCUVZVc1EwRkJRenRCUVVOdVF5eHpRa0ZCWXl4SFFVRlhMR3RDUVVGclFpeERRVUZETzBGQmFVSjJSRHRKUVZWRExEQkNRVUZ2UWl4TlFVRnZRaXhGUVVNMVFpeFJRVUZyUXl4RlFVTnNReXhYUVVGM1F5eEZRVU40UXl4UlFVRnBReXhGUVVOcVF5eGhRVUZwUXp0UlFVcDZRaXhYUVVGTkxFZEJRVTRzVFVGQlRTeERRVUZqTzFGQlF6VkNMR0ZCUVZFc1IwRkJVaXhSUVVGUkxFTkJRVEJDTzFGQlEyeERMR2RDUVVGWExFZEJRVmdzVjBGQlZ5eERRVUUyUWp0UlFVTjRReXhoUVVGUkxFZEJRVklzVVVGQlVTeERRVUY1UWp0UlFVTnFReXhyUWtGQllTeEhRVUZpTEdGQlFXRXNRMEZCYjBJN1NVRkJSeXhEUVVGRE8wbEJSV3BFTEd0RFFVRlBMRWRCUVZBN1VVRkJRU3hwUWtGUFF6dFJRVTVCTEVsQlFVa3NUVUZCVFN4SFFVRmhMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEdOQlFYZENMRTFCUVUwc1EwRkJReXhMUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRlZCUVVNc1NVRkJiMEk3V1VGRE0wY3NSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdaMEpCUTJ4Q0xFdEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRE8yZENRVU5xUXl4TlFVRk5MRVZCUVVVc1EwRkJRenRaUVVOV0xFTkJRVU03VVVGRFJpeERRVUZETEVOQlFVTXNRMEZCUXp0SlFVTktMRU5CUVVNN1NVRkZSQ3h2UTBGQlV5eEhRVUZVTzFGQlFVRXNhVUpCYTBKRE8xRkJha0pCTEVsQlFVa3NRMEZCUXl4TFFVRkxMRWRCUVVjc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRPMUZCUTNoRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NTVUZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhQUVVGUExFTkJRVU1zVVVGQlVTeERRVUZETzFGQlF6VkRMRWxCUVVrc1EwRkJReXhaUVVGWkxFZEJRVWNzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1lVRkJZU3hEUVVGRE8xRkJRM1JFTEVsQlFVa3NWVUZCVlN4SFFVRlhMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEd0Q1FVRnJRaXhEUVVGRExFTkJRVU03VVVGRmFFVXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGZEJRVmNzUTBGQlF5eFpRVUZaTEVOQlFVTXNXVUZCV1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRMnBFTEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1ZVRkJReXhOUVVGak8yZENRVU12UWl4TFFVRkpMRU5CUVVNc1UwRkJVeXhIUVVGSExFTkJRVU1zVFVGQlRTeERRVUZETEUxQlFVMHNSMEZCUnl4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRGNrTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1MwRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVOQlFVTTdiMEpCUTNCQ0xGVkJRVlVzUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNN1owSkJRek5DTEVOQlFVTTdXVUZEUml4RFFVRkRMRVZCUVVVc1NVRkJTU3hGUVVGRkxGbEJRVmtzUTBGQlF5eERRVUZETzFGQlEzaENMRU5CUVVNN1VVRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRE1VSXNTVUZCU1N4TlFVRk5MRWRCUVZjc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eFBRVUZQTEVOQlFVTXNOa0pCUVRaQ0xFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRenRaUVVONFJpeEpRVUZKTEVOQlFVTXNVMEZCVXl4SFFVRkhMRWxCUVVrc1EwRkJRenRaUVVOMFFpeFZRVUZWTEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8xRkJRek5DTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCYkVOTkxIZENRVUZQTEVkQlFXRXNRMEZCUXl4UlFVRlJMRVZCUVVVc1ZVRkJWU3hGUVVGRkxHRkJRV0VzUlVGQlJTeFZRVUZWTEVWQlFVVXNORUpCUVdsQ0xFTkJRVU1zUTBGQlF6dEpRVzFEYWtjc2RVSkJRVU03UVVGQlJDeERRVUZETEVGQk5VTkVMRWxCTkVORE8wRkJOVU5aTEhkQ1FVRm5RaXh0UWtFMFF6VkNMRU5CUVVFN1FVRkZSQ3hKUVVGSkxFMUJRVTBzUjBGQk9FSTdTVUZEZGtNc1ZVRkJWU3hGUVVGUE8xRkJRMmhDTEZWQlFWVXNSVUZCUlN4cFFrRkJhVUk3VVVGRE4wSXNWMEZCVnl4RlFVRkZMR3RDUVVGclFqdFJRVU12UWl4VlFVRlZMRVZCUVVVc2FVSkJRV2xDTzB0QlF6ZENPMGxCUTBRc1VVRkJVU3hGUVVGRkxFOUJRVThzUTBGQlF5eGxRVUZsTEVOQlFVTTdTVUZEYkVNc1ZVRkJWU3hGUVVGRkxITkNRVUZqTzBsQlF6RkNMRmxCUVZrc1JVRkJSU3hSUVVGUk8wbEJRM1JDTEZGQlFWRXNSVUZCUlR0UlFVTlVMRkZCUVZFc1JVRkJSU3hIUVVGSE8wdEJRMkk3UTBGRFJDeERRVUZETzBGQlJVWXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVOQlFVTXNNa0pCUVZrc1EwRkJReXhEUVVGRE8wdEJRM2hETEZOQlFWTXNRMEZCUXl4eFFrRkJZU3hGUVVGRkxFMUJRVTBzUTBGQlF6dExRVU5vUXl4VlFVRlZMRU5CUVVNc2MwSkJRV01zUlVGQlJTeG5Ra0ZCWjBJc1EwRkJReXhEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvZGlhbG9nL2RpYWxvZy5qc1xuICoqIG1vZHVsZSBpZCA9IDEyMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fcHJvbWlzZSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5wcm9taXNlO1xyXG52YXIgX19ub3RpZmljYXRpb24gPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMubm90aWZpY2F0aW9uO1xyXG52YXIgYm9vdHN0cmFwTW9kYWxEaWFsb2cgPSByZXF1aXJlKCcuL2Jvb3RzdHJhcE1vZGFsRGlhbG9nL2Jvb3RzdHJhcE1vZGFsRGlhbG9nLm1vZHVsZScpO1xyXG5leHBvcnRzLmJvb3RzdHJhcE1vZGFsRGlhbG9nID0gYm9vdHN0cmFwTW9kYWxEaWFsb2c7XHJcbnZhciBhdXRvc2F2ZV9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi9hdXRvc2F2ZS9hdXRvc2F2ZS5zZXJ2aWNlJyk7XHJcbnZhciBmb3JtX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL2Zvcm0vZm9ybS5zZXJ2aWNlJyk7XHJcbnZhciBkaWFsb2dfMSA9IHJlcXVpcmUoJy4uLy4uL2NvbXBvbmVudHMvZGlhbG9nL2RpYWxvZycpO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSBkaWFsb2dfMS5jb21wb25lbnROYW1lO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gZGlhbG9nXzEuY29udHJvbGxlck5hbWU7XHJcbmV4cG9ydHMuRGlhbG9nQ29udHJvbGxlciA9IGRpYWxvZ18xLkRpYWxvZ0NvbnRyb2xsZXI7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5zZXJ2aWNlcy5kaWFsb2cnO1xyXG5leHBvcnRzLnNlcnZpY2VOYW1lID0gJ2RpYWxvZyc7XHJcbnZhciBEaWFsb2dTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERpYWxvZ1NlcnZpY2UoZGlhbG9nLCAkcm9vdFNjb3BlLCBhdXRvc2F2ZUZhY3RvcnksIHByb21pc2UsIG5vdGlmaWNhdGlvbiwgZm9ybVNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nID0gZGlhbG9nO1xyXG4gICAgICAgIHRoaXMuJHJvb3RTY29wZSA9ICRyb290U2NvcGU7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZUZhY3RvcnkgPSBhdXRvc2F2ZUZhY3Rvcnk7XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcclxuICAgICAgICB0aGlzLm5vdGlmaWNhdGlvbiA9IG5vdGlmaWNhdGlvbjtcclxuICAgICAgICB0aGlzLmZvcm1TZXJ2aWNlID0gZm9ybVNlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZUNsb3NlSGFuZGxlciA9IGZ1bmN0aW9uIChleHBsaWNpdCkge1xyXG4gICAgICAgICAgICBpZiAoZXhwbGljaXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5hdXRvc2F2ZS5hdXRvc2F2ZShfdGhpcy5kYXRhKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgRGlhbG9nU2VydmljZS5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChvcHRpb25zLCBjbG9zZUhhbmRsZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkaWFsb2dJbnN0YW5jZSA9IHRoaXMuZGlhbG9nLm9wZW4ob3B0aW9ucywgY2xvc2VIYW5kbGVyKTtcclxuICAgICAgICBkaWFsb2dJbnN0YW5jZS52YWxpZGF0ZUFuZE5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZhbGlkID0gX3RoaXMuZm9ybS4kdmFsaWQ7XHJcbiAgICAgICAgICAgIGlmICghdmFsaWQpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm5vdGlmaWNhdGlvbi53YXJuaW5nKF90aGlzLmZvcm1TZXJ2aWNlLmdldEFnZ3JlZ2F0ZUVycm9yKF90aGlzLmZvcm0pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdmFsaWQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gZGlhbG9nSW5zdGFuY2U7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nU2VydmljZS5wcm90b3R5cGUucHJvbXB0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICBvcHRpb25zLm9rQnV0dG9uID0gb3B0aW9ucy5va0J1dHRvbiB8fCAnT2snO1xyXG4gICAgICAgIG9wdGlvbnMuY2FuY2VsQnV0dG9uID0gb3B0aW9ucy5jYW5jZWxCdXR0b24gfHwgJ0NhbmNlbCc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlhbG9nLnByb21wdChvcHRpb25zLCByZXF1aXJlKCcuL3Byb21wdERpYWxvZy5odG1sJykpO1xyXG4gICAgfTtcclxuICAgIERpYWxvZ1NlcnZpY2UucHJvdG90eXBlLm9wZW5Gb3JtID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciBkaWFsb2dJbnN0YW5jZSA9IHtcclxuICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uICgpIHsgfSxcclxuICAgICAgICAgICAgZGlzbWlzczogZnVuY3Rpb24gKCkgeyB9LFxyXG4gICAgICAgICAgICBzYXZlOiBmdW5jdGlvbiAoKSB7IH0sXHJcbiAgICAgICAgICAgIHNhdmVBbmRDbG9zZTogZnVuY3Rpb24gKCkgeyB9LFxyXG4gICAgICAgICAgICB2YWxpZGF0ZUFuZE5vdGlmeTogZnVuY3Rpb24gKCkgeyB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5wcm9taXNlLnJlc29sdmVQcm9taXNlcyhvcHRpb25zLnJlc29sdmUpLnRoZW4oZnVuY3Rpb24gKHJlc29sdmVEYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBzY29wZSA9IG9wdGlvbnMuc2NvcGU7XHJcbiAgICAgICAgICAgIGlmIChzY29wZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBzY29wZSA9IF90aGlzLiRyb290U2NvcGUuJG5ldygpO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5zY29wZSA9IHNjb3BlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRhdGEgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5kYXRhID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlcnMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy50cmlnZ2VycyA9ICdub25lJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfdGhpcy5hdXRvc2F2ZSA9IF90aGlzLmF1dG9zYXZlRmFjdG9yeS5nZXRJbnN0YW5jZSh7XHJcbiAgICAgICAgICAgICAgICBzYXZlOiBvcHRpb25zLnNhdmUsXHJcbiAgICAgICAgICAgICAgICB0cmlnZ2Vyczogb3B0aW9ucy50cmlnZ2VycyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIF90aGlzLmRhdGEgPSBfLmV4dGVuZChvcHRpb25zLmRhdGEsIHJlc29sdmVEYXRhKTtcclxuICAgICAgICAgICAgc2NvcGUuZGlhbG9nID0gX3RoaXMuZGF0YTtcclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gX3RoaXMub3BlbihvcHRpb25zLCBfdGhpcy5hdXRvc2F2ZUNsb3NlSGFuZGxlcik7XHJcbiAgICAgICAgICAgIGRpYWxvZ0luc3RhbmNlLmNsb3NlID0gaW5zdGFuY2UuY2xvc2U7XHJcbiAgICAgICAgICAgIGRpYWxvZ0luc3RhbmNlLmRpc21pc3MgPSBpbnN0YW5jZS5kaXNtaXNzO1xyXG4gICAgICAgICAgICBzY29wZS4kc2F2ZSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmF1dG9zYXZlLnZhbGlkYXRlQW5kU2F2ZShfdGhpcy5kYXRhKTsgfTtcclxuICAgICAgICAgICAgO1xyXG4gICAgICAgICAgICBzY29wZS4kc2F2ZUFuZENsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb21pc2UgPSBzY29wZS4kc2F2ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uaXNCb29sZWFuKHByb21pc2UpICYmIHByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoX3RoaXMucHJvbWlzZS5pc1Byb21pc2UocHJvbWlzZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRpYWxvZ0luc3RhbmNlLnNhdmUgPSBzY29wZS4kc2F2ZTtcclxuICAgICAgICAgICAgZGlhbG9nSW5zdGFuY2Uuc2F2ZUFuZENsb3NlID0gc2NvcGUuJHNhdmVBbmRDbG9zZTtcclxuICAgICAgICAgICAgZGlhbG9nSW5zdGFuY2UudmFsaWRhdGVBbmROb3RpZnkgPSBpbnN0YW5jZS52YWxpZGF0ZUFuZE5vdGlmeTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGlhbG9nSW5zdGFuY2U7XHJcbiAgICB9O1xyXG4gICAgRGlhbG9nU2VydmljZS5wcm90b3R5cGUuc2V0Rm9ybSA9IGZ1bmN0aW9uIChmb3JtKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0b3NhdmUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dG9zYXZlLmNvbnRlbnRGb3JtID0gZm9ybTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mb3JtID0gZm9ybTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gRGlhbG9nU2VydmljZTtcclxufSgpKTtcclxuZXhwb3J0cy5EaWFsb2dTZXJ2aWNlID0gRGlhbG9nU2VydmljZTtcclxuZnVuY3Rpb24gZGlhbG9nU2VydmljZVByb3ZpZGVyKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgIHZhciBwcm92aWRlciA9IHtcclxuICAgICAgICBzZXRJbXBsZW1lbnRhdGlvbjogZnVuY3Rpb24gKGRpYWxvZ0ltcGxlbWVudGF0aW9uKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmRpYWxvZ0ltcGxlbWVudGF0aW9uID0gZGlhbG9nSW1wbGVtZW50YXRpb247XHJcbiAgICAgICAgfSxcclxuICAgICAgICAkZ2V0OiBmdW5jdGlvbiAoYm9vdHN0cmFwTW9kYWxEaWFsb2csICRyb290U2NvcGUsIGF1dG9zYXZlRmFjdG9yeSwgcHJvbWlzZSwgbm90aWZpY2F0aW9uLCBmb3JtU2VydmljZSkge1xyXG4gICAgICAgICAgICB2YXIgZGlhbG9nSW1wbGVtZW50YXRpb24gPSBfdGhpcy5kaWFsb2dJbXBsZW1lbnRhdGlvbiAhPSBudWxsXHJcbiAgICAgICAgICAgICAgICA/IF90aGlzLmRpYWxvZ0ltcGxlbWVudGF0aW9uXHJcbiAgICAgICAgICAgICAgICA6IGJvb3RzdHJhcE1vZGFsRGlhbG9nO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERpYWxvZ1NlcnZpY2UoZGlhbG9nSW1wbGVtZW50YXRpb24sICRyb290U2NvcGUsIGF1dG9zYXZlRmFjdG9yeSwgcHJvbWlzZSwgbm90aWZpY2F0aW9uLCBmb3JtU2VydmljZSk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbiAgICBwcm92aWRlci4kZ2V0LiRpbmplY3QgPSBbYm9vdHN0cmFwTW9kYWxEaWFsb2cuc2VydmljZU5hbWUsICckcm9vdFNjb3BlJywgYXV0b3NhdmVfc2VydmljZV8xLmZhY3RvcnlOYW1lLCBfX3Byb21pc2Uuc2VydmljZU5hbWUsIF9fbm90aWZpY2F0aW9uLnNlcnZpY2VOYW1lLCBmb3JtX3NlcnZpY2VfMS5zZXJ2aWNlTmFtZV07XHJcbiAgICByZXR1cm4gcHJvdmlkZXI7XHJcbn1cclxuZXhwb3J0cy5kaWFsb2dTZXJ2aWNlUHJvdmlkZXIgPSBkaWFsb2dTZXJ2aWNlUHJvdmlkZXI7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW2Jvb3RzdHJhcE1vZGFsRGlhbG9nLm1vZHVsZU5hbWUsIGF1dG9zYXZlX3NlcnZpY2VfMS5tb2R1bGVOYW1lLCBfX25vdGlmaWNhdGlvbi5tb2R1bGVOYW1lLCBmb3JtX3NlcnZpY2VfMS5tb2R1bGVOYW1lXSlcclxuICAgIC5wcm92aWRlcihleHBvcnRzLnNlcnZpY2VOYW1lLCBkaWFsb2dTZXJ2aWNlUHJvdmlkZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laR2xoYkc5bkxuTmxjblpwWTJVdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUprYVdGc2IyY3VjMlZ5ZG1salpTNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4WlFVRlpMRU5CUVVNN1FVRkRZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVTnVReXhKUVVGWkxFTkJRVU1zVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVVTFRaXcyUTBGQmVVSXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlFUdEJRVU40UkN4SlFVRlBMRk5CUVZNc1IwRkJSeXgxUTBGQlVTeERRVUZETEU5QlFVOHNRMEZCUXp0QlFVTndReXhKUVVGUExHTkJRV01zUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRmxCUVZrc1EwRkJRenRCUVVVNVF5eEpRVUZaTEc5Q1FVRnZRaXhYUVVGTkxHOUVRVUZ2UkN4RFFVRkRMRU5CUVVFN1FVRlhiRVlzTkVKQlFXOUNPMEZCVkRkQ0xHbERRVXRQTERoQ1FVRTRRaXhEUVVGRExFTkJRVUU3UVVGRGRFTXNOa0pCUVhWR0xITkNRVUZ6UWl4RFFVRkRMRU5CUVVFN1FVRkpPVWNzZFVKQlFXZEZMR2REUVVGblF5eERRVUZETzBGQlFYaEdMQ3REUVVGaE8wRkJRVVVzYVVSQlFXTTdRVUZCUlN4eFJFRkJlVVE3UVVGSGRFWXNhMEpCUVZVc1IwRkJWeXgxUWtGQmRVSXNRMEZCUXp0QlFVTTNReXh0UWtGQlZ5eEhRVUZYTEZGQlFWRXNRMEZCUXp0QlFWRXhRenRKUVV0RExIVkNRVUZ2UWl4TlFVRnZSQ3hGUVVNMVJDeFZRVUZ4UXl4RlFVTnlReXhsUVVGM1F5eEZRVU40UXl4UFFVRnJReXhGUVVOc1F5eFpRVUZwUkN4RlFVTnFSQ3hYUVVGNVFqdFJRVlowUXl4cFFrRjVSME03VVVGd1IyOUNMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRVGhETzFGQlF6VkVMR1ZCUVZVc1IwRkJWaXhWUVVGVkxFTkJRVEpDTzFGQlEzSkRMRzlDUVVGbExFZEJRV1lzWlVGQlpTeERRVUY1UWp0UlFVTjRReXhaUVVGUExFZEJRVkFzVDBGQlR5eERRVUV5UWp0UlFVTnNReXhwUWtGQldTeEhRVUZhTEZsQlFWa3NRMEZCY1VNN1VVRkRha1FzWjBKQlFWY3NSMEZCV0N4WFFVRlhMRU5CUVdNN1VVRnBSamRDTEhsQ1FVRnZRaXhIUVVFNFFpeFZRVUZETEZGQlFXbENPMWxCUXpORkxFVkJRVVVzUTBGQlF5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRMRU5CUVVNN1owSkJRMlFzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXp0WlFVTmlMRU5CUVVNN1dVRkZSQ3hOUVVGTkxFTkJRVU1zUzBGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4UlFVRlJMRU5CUVVNc1MwRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzFGQlF6RkRMRU5CUVVNc1EwRkJRVHRKUVhaR2QwTXNRMEZCUXp0SlFVVXhReXcwUWtGQlNTeEhRVUZLTEZWQlFVc3NUMEZCZDBJc1JVRkJSU3haUVVGM1F6dFJRVUYyUlN4cFFrRlpRenRSUVZoQkxFbEJRVWtzWTBGQll5eEhRVUV3UWl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVWQlFVVXNXVUZCV1N4RFFVRkRMRU5CUVVNN1VVRkRjRVlzWTBGQll5eERRVUZETEdsQ1FVRnBRaXhIUVVGSE8xbEJRMnhETEVsQlFVa3NTMEZCU3l4SFFVRlpMRXRCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETzFsQlJYUkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNRMEZCUXp0blFrRkRXaXhMUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEU5QlFVOHNRMEZCUXl4TFFVRkpMRU5CUVVNc1YwRkJWeXhEUVVGRExHbENRVUZwUWl4RFFVRkRMRXRCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6RkZMRU5CUVVNN1dVRkZSQ3hOUVVGTkxFTkJRVU1zUzBGQlN5eERRVUZETzFGQlEyUXNRMEZCUXl4RFFVRkRPMUZCUTBZc1RVRkJUU3hEUVVGRExHTkJRV01zUTBGQlF6dEpRVU4yUWl4RFFVRkRPMGxCUlVRc09FSkJRVTBzUjBGQlRpeFZRVUZQTEU5QlFUaENPMUZCUTNCRExFOUJRVThzUTBGQlF5eFJRVUZSTEVkQlFVY3NUMEZCVHl4RFFVRkRMRkZCUVZFc1NVRkJTU3hKUVVGSkxFTkJRVU03VVVGRE5VTXNUMEZCVHl4RFFVRkRMRmxCUVZrc1IwRkJSeXhQUVVGUExFTkJRVU1zV1VGQldTeEpRVUZKTEZGQlFWRXNRMEZCUXp0UlFVVjRSQ3hOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1QwRkJUeXhGUVVGRkxFOUJRVThzUTBGQlF5eHhRa0ZCY1VJc1EwRkJReXhEUVVGRExFTkJRVU03U1VGRGNFVXNRMEZCUXp0SlFVVkVMR2REUVVGUkxFZEJRVklzVlVGQlV5eFBRVUZ6UXp0UlFVRXZReXhwUWtGM1JFTTdVVUYyUkVFc1NVRkJTU3hqUVVGakxFZEJRV3RETzFsQlEyNUVMRXRCUVVzc1owSkJRVlVzUTBGQlF6dFpRVU5vUWl4UFFVRlBMR2RDUVVGWExFTkJRVU03V1VGRGJrSXNTVUZCU1N4blFrRkJWU3hEUVVGRE8xbEJRMllzV1VGQldTeG5Ra0ZCVlN4RFFVRkRPMWxCUTNaQ0xHbENRVUZwUWl4blFrRkJWeXhEUVVGRE8xTkJRemRDTEVOQlFVTTdVVUZGUml4SlFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExHVkJRV1VzUTBGQlF5eFBRVUZQTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVU1zVjBGQlowSTdXVUZEYmtVc1NVRkJTU3hMUVVGTExFZEJRVEpFTEU5QlFVOHNRMEZCUXl4TFFVRkxMRU5CUVVNN1dVRkZiRVlzUlVGQlJTeERRVUZETEVOQlFVTXNTMEZCU3l4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEyNUNMRXRCUVVzc1IwRkJLMElzUzBGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4SlFVRkpMRVZCUVVVc1EwRkJRenRuUWtGRE0wUXNUMEZCVHl4RFFVRkRMRXRCUVVzc1IwRkJSeXhMUVVGTExFTkJRVU03V1VGRGRrSXNRMEZCUXp0WlFVVkVMRVZCUVVVc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eEpRVUZKTEVsQlFVa3NTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRE1VSXNUMEZCVHl4RFFVRkRMRWxCUVVrc1IwRkJSeXhGUVVGRkxFTkJRVU03V1VGRGJrSXNRMEZCUXp0WlFVVkVMRVZCUVVVc1EwRkJReXhEUVVGRExFOUJRVThzUTBGQlF5eFJRVUZSTEVsQlFVa3NTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRE9VSXNUMEZCVHl4RFFVRkRMRkZCUVZFc1IwRkJSeXhOUVVGTkxFTkJRVU03V1VGRE0wSXNRMEZCUXp0WlFVVkVMRXRCUVVrc1EwRkJReXhSUVVGUkxFZEJRVWNzUzBGQlNTeERRVUZETEdWQlFXVXNRMEZCUXl4WFFVRlhMRU5CUVVNN1owSkJRMmhFTEVsQlFVa3NSVUZCUlN4UFFVRlBMRU5CUVVNc1NVRkJTVHRuUWtGRGJFSXNVVUZCVVN4RlFVRkZMRTlCUVU4c1EwRkJReXhSUVVGUk8yRkJRekZDTEVOQlFVTXNRMEZCUXp0WlFVVklMRXRCUVVrc1EwRkJReXhKUVVGSkxFZEJRVWNzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1NVRkJTU3hGUVVGRkxGZEJRVmNzUTBGQlF5eERRVUZETzFsQlEyaEVMRXRCUVVzc1EwRkJReXhOUVVGTkxFZEJRVWNzUzBGQlNTeERRVUZETEVsQlFVa3NRMEZCUXp0WlFVVjZRaXhKUVVGSkxGRkJRVkVzUjBGQmRVTXNTMEZCU1N4RFFVRkRMRWxCUVVrc1EwRkJUU3hQUVVGUExFVkJRVVVzUzBGQlNTeERRVUZETEc5Q1FVRnZRaXhEUVVGRExFTkJRVU03V1VGRGRFY3NZMEZCWXl4RFFVRkRMRXRCUVVzc1IwRkJSeXhSUVVGUkxFTkJRVU1zUzBGQlN5eERRVUZETzFsQlEzUkRMR05CUVdNc1EwRkJReXhQUVVGUExFZEJRVWNzVVVGQlVTeERRVUZETEU5QlFVOHNRMEZCUXp0WlFVVXhReXhMUVVGTExFTkJRVU1zUzBGQlN5eEhRVUZITEdOQlFUQkRMRTFCUVUwc1EwRkJReXhMUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEdWQlFXVXNRMEZCUXl4TFFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdXVUZCUVN4RFFVRkRPMWxCUXpWSExFdEJRVXNzUTBGQlF5eGhRVUZoTEVkQlFVYzdaMEpCUTNKQ0xFbEJRVWtzVDBGQlR5eEhRVUZSTEV0QlFVc3NRMEZCUXl4TFFVRkxMRVZCUVVVc1EwRkJRenRuUWtGRGFrTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRE8yOUNRVU55UXl4UlFVRlJMRU5CUVVNc1MwRkJTeXhGUVVGRkxFTkJRVU03WjBKQlEyeENMRU5CUVVNN1owSkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRXRCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zVTBGQlV5eERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenR2UWtGRE5VTXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJRenQzUWtGRFdpeFJRVUZSTEVOQlFVTXNTMEZCU3l4RlFVRkZMRU5CUVVNN2IwSkJRMnhDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMmRDUVVOS0xFTkJRVU03WjBKQlEwUXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJRenRaUVVOb1FpeERRVUZETEVOQlFVTTdXVUZGUml4alFVRmpMRU5CUVVNc1NVRkJTU3hIUVVGSExFdEJRVXNzUTBGQlF5eExRVUZMTEVOQlFVTTdXVUZEYkVNc1kwRkJZeXhEUVVGRExGbEJRVmtzUjBGQlJ5eExRVUZMTEVOQlFVTXNZVUZCWVN4RFFVRkRPMWxCUTJ4RUxHTkJRV01zUTBGQlF5eHBRa0ZCYVVJc1IwRkJSeXhSUVVGUkxFTkJRVU1zYVVKQlFXbENMRU5CUVVNN1VVRkRMMFFzUTBGQlF5eERRVUZETEVOQlFVTTdVVUZGU0N4TlFVRk5MRU5CUVVNc1kwRkJZeXhEUVVGRE8wbEJRM1pDTEVOQlFVTTdTVUZWUkN3clFrRkJUeXhIUVVGUUxGVkJRVkVzU1VGQmIwSTdVVUZETTBJc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRek5DTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1YwRkJWeXhIUVVGSExFbEJRVWtzUTBGQlF6dFJRVU5zUXl4RFFVRkRPMUZCUTBRc1NVRkJTU3hEUVVGRExFbEJRVWtzUjBGQlJ5eEpRVUZKTEVOQlFVTTdTVUZEYkVJc1EwRkJRenRKUVVOR0xHOUNRVUZETzBGQlFVUXNRMEZCUXl4QlFYcEhSQ3hKUVhsSFF6dEJRWHBIV1N4eFFrRkJZU3huUWtGNVIzcENMRU5CUVVFN1FVRlpSRHRKUVVORExGbEJRVmtzUTBGQlF6dEpRVVJrTEdsQ1FYRkNRenRKUVd4Q1FTeEpRVUZKTEZGQlFWRXNSMEZCTkVNN1VVRkRka1FzYVVKQlFXbENMRVZCUVVVc1ZVRkJReXh2UWtGQmEwVTdXVUZEY2tZc1MwRkJTU3hEUVVGRExHOUNRVUZ2UWl4SFFVRkhMRzlDUVVGdlFpeERRVUZETzFGQlEyeEVMRU5CUVVNN1VVRkRSQ3hKUVVGSkxFVkJRVVVzVlVGQlF5eHZRa0ZCZFVVc1JVRkRNMFVzVlVGQmNVTXNSVUZEY2tNc1pVRkJkME1zUlVGRGVFTXNUMEZCYTBNc1JVRkRiRU1zV1VGQmFVUXNSVUZEYWtRc1YwRkJlVUk3V1VGRE0wSXNTVUZCU1N4dlFrRkJiMElzUjBGQmFVUXNTMEZCU1N4RFFVRkRMRzlDUVVGdlFpeEpRVUZKTEVsQlFVazdhMEpCUTNoR0xFdEJRVWtzUTBGQlF5eHZRa0ZCYjBJN2EwSkJRM3BDTEc5Q1FVRnZRaXhEUVVGRE8xbEJRM1pETEUxQlFVMHNRMEZCUXl4SlFVRkpMR0ZCUVdFc1EwRkJhMElzYjBKQlFXOUNMRVZCUVVVc1ZVRkJWU3hGUVVGRkxHVkJRV1VzUlVGQlJTeFBRVUZQTEVWQlFVVXNXVUZCV1N4RlFVRkZMRmRCUVZjc1EwRkJReXhEUVVGRE8xRkJRMnhKTEVOQlFVTTdTMEZEUkN4RFFVRkRPMGxCUTBZc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NRMEZCUXl4dlFrRkJiMElzUTBGQlF5eFhRVUZYTEVWQlFVVXNXVUZCV1N4RlFVRkZMRGhDUVVGdFFpeEZRVUZGTEZOQlFWTXNRMEZCUXl4WFFVRlhMRVZCUVVVc1kwRkJZeXhEUVVGRExGZEJRVmNzUlVGQlJTd3dRa0ZCWlN4RFFVRkRMRU5CUVVNN1NVRkRiRXNzVFVGQlRTeERRVUZETEZGQlFWRXNRMEZCUXp0QlFVTnFRaXhEUVVGRE8wRkJja0psTERaQ1FVRnhRaXgzUWtGeFFuQkRMRU5CUVVFN1FVRkZSQ3hQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVc1EwRkJReXh2UWtGQmIwSXNRMEZCUXl4VlFVRlZMRVZCUVVVc05rSkJRV01zUlVGQlJTeGpRVUZqTEVOQlFVTXNWVUZCVlN4RlFVRkZMSGxDUVVGVkxFTkJRVU1zUTBGQlF6dExRVU5zU0N4UlFVRlJMRU5CUVVNc2JVSkJRVmNzUlVGQlJTeHhRa0ZCY1VJc1EwRkJReXhEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL3NlcnZpY2VzL2RpYWxvZy9kaWFsb2cuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX3Byb21pc2UgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMucHJvbWlzZTtcclxudmFyIGJvb3RzdHJhcE1vZGFsRGlhbG9nX2NvbnRyb2xsZXJfMSA9IHJlcXVpcmUoJy4vYm9vdHN0cmFwTW9kYWxEaWFsb2cuY29udHJvbGxlcicpO1xyXG52YXIgYm9vdHN0cmFwTW9kYWxEaWFsb2dfc2VydmljZV8xID0gcmVxdWlyZSgnLi9ib290c3RyYXBNb2RhbERpYWxvZy5zZXJ2aWNlJyk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoJy4vYm9vdHN0cmFwTW9kYWxEaWFsb2cuY29udHJvbGxlcicpKTtcclxuX19leHBvcnQocmVxdWlyZSgnLi9ib290c3RyYXBNb2RhbERpYWxvZy5zZXJ2aWNlJykpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuc2VydmljZXMuZGlhbG9nLmJvb3RzdHJhcE1vZGFsRGlhbG9nJztcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbX19wcm9taXNlLm1vZHVsZU5hbWVdKVxyXG4gICAgLmNvbnRyb2xsZXIoYm9vdHN0cmFwTW9kYWxEaWFsb2dfY29udHJvbGxlcl8xLmNvbnRyb2xsZXJOYW1lLCBib290c3RyYXBNb2RhbERpYWxvZ19jb250cm9sbGVyXzEuQm9vdHN0cmFwTW9kYWxEaWFsb2dDb250cm9sbGVyKVxyXG4gICAgLnNlcnZpY2UoYm9vdHN0cmFwTW9kYWxEaWFsb2dfc2VydmljZV8xLnNlcnZpY2VOYW1lLCBib290c3RyYXBNb2RhbERpYWxvZ19zZXJ2aWNlXzEuQm9vdHN0cmFwTW9kYWxEaWFsb2dTZXJ2aWNlKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWW05dmRITjBjbUZ3VFc5a1lXeEVhV0ZzYjJjdWJXOWtkV3hsTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lZbTl2ZEhOMGNtRndUVzlrWVd4RWFXRnNiMmN1Ylc5a2RXeGxMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxGbEJRVmtzUTBGQlF6czdPenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUlc1RExEWkRRVUY1UWl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlEzaEVMRWxCUVU4c1UwRkJVeXhIUVVGSExIVkRRVUZSTEVOQlFVTXNUMEZCVHl4RFFVRkRPMEZCUlhCRExHZEVRVUVyUkN4dFEwRkJiVU1zUTBGQlF5eERRVUZCTzBGQlEyNUhMRFpEUVVGNVJDeG5RMEZCWjBNc1EwRkJReXhEUVVGQk8wRkJSVEZHTEdsQ1FVRmpMRzFEUVVGdFF5eERRVUZETEVWQlFVRTdRVUZEYkVRc2FVSkJRV01zWjBOQlFXZERMRU5CUVVNc1JVRkJRVHRCUVVWd1F5eHJRa0ZCVlN4SFFVRlhMRFJEUVVFMFF5eERRVUZETzBGQlJUZEZMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFWVXNSVUZCUlN4RFFVRkRMRk5CUVZNc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dExRVU5vUkN4VlFVRlZMRU5CUVVNc1owUkJRV01zUlVGQlJTeG5SVUZCT0VJc1EwRkJRenRMUVVNeFJDeFBRVUZQTEVOQlFVTXNNRU5CUVZjc1JVRkJSU3d3UkVGQk1rSXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9zZXJ2aWNlcy9kaWFsb2cvYm9vdHN0cmFwTW9kYWxEaWFsb2cvYm9vdHN0cmFwTW9kYWxEaWFsb2cubW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMTIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBib290c3RyYXBNb2RhbERpYWxvZ19zZXJ2aWNlXzEgPSByZXF1aXJlKCcuL2Jvb3RzdHJhcE1vZGFsRGlhbG9nLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdCb290c3RyYXBNb2RhbERpYWxvZ0NvbnRyb2xsZXInO1xyXG52YXIgQm9vdHN0cmFwTW9kYWxEaWFsb2dDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJvb3RzdHJhcE1vZGFsRGlhbG9nQ29udHJvbGxlcigkc2NvcGUsICRjb250cm9sbGVyLCBiYXNlRGlhbG9nKSB7XHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXI7XHJcbiAgICAgICAgaWYgKCRzY29wZS5tb2RhbENvbnRyb2xsZXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB2YXIgbG9jYWxzID0gJHNjb3BlLnJlc29sdmVEYXRhIHx8IHt9O1xyXG4gICAgICAgICAgICAkc2NvcGUucmVzb2x2ZURhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICBsb2NhbHMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgICAgICBjb250cm9sbGVyID0gJGNvbnRyb2xsZXIoJHNjb3BlLm1vZGFsQ29udHJvbGxlciwgbG9jYWxzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLiRvbignbW9kYWwuY2xvc2luZycsIGJhc2VEaWFsb2cubW9kYWxDbG9zaW5nKTtcclxuICAgICAgICByZXR1cm4gY29udHJvbGxlcjtcclxuICAgIH1cclxuICAgIEJvb3RzdHJhcE1vZGFsRGlhbG9nQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGNvbnRyb2xsZXInLCBib290c3RyYXBNb2RhbERpYWxvZ19zZXJ2aWNlXzEuc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIEJvb3RzdHJhcE1vZGFsRGlhbG9nQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Cb290c3RyYXBNb2RhbERpYWxvZ0NvbnRyb2xsZXIgPSBCb290c3RyYXBNb2RhbERpYWxvZ0NvbnRyb2xsZXI7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVltOXZkSE4wY21Gd1RXOWtZV3hFYVdGc2IyY3VZMjl1ZEhKdmJHeGxjaTVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkltSnZiM1J6ZEhKaGNFMXZaR0ZzUkdsaGJHOW5MbU52Ym5SeWIyeHNaWEl1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNXVUZCV1N4RFFVRkRPMEZCUjJJc05rTkJRWGxFTEdkRFFVRm5ReXhEUVVGRExFTkJRVUU3UVVGRkwwVXNjMEpCUVdNc1IwRkJWeXhuUTBGQlowTXNRMEZCUXp0QlFVOXlSVHRKUVVWRExIZERRVUZaTEUxQlFXdERMRVZCUXpGRExGZEJRV3RETEVWQlEyeERMRlZCUVhWRE8xRkJRekZETEVsQlFVa3NWVUZCWlN4RFFVRkRPMUZCUlhCQ0xFVkJRVVVzUTBGQlF5eERRVUZETEUxQlFVMHNRMEZCUXl4bFFVRmxMRWxCUVVrc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU53UXl4SlFVRkpMRTFCUVUwc1IwRkJVU3hOUVVGTkxFTkJRVU1zVjBGQlZ5eEpRVUZKTEVWQlFVVXNRMEZCUXp0WlFVTXpReXhOUVVGTkxFTkJRVU1zVjBGQlZ5eEhRVUZITEVsQlFVa3NRMEZCUXp0WlFVTXhRaXhOUVVGTkxFTkJRVU1zVFVGQlRTeEhRVUZITEUxQlFVMHNRMEZCUXp0WlFVVjJRaXhWUVVGVkxFZEJRVWNzVjBGQlZ5eERRVUZOTEUxQlFVMHNRMEZCUXl4bFFVRmxMRVZCUVVVc1RVRkJUU3hEUVVGRExFTkJRVU03VVVGREwwUXNRMEZCUXp0UlFVVkVMRTFCUVUwc1EwRkJReXhIUVVGSExFTkJRVU1zWlVGQlpTeEZRVUZGTEZWQlFWVXNRMEZCUXl4WlFVRlpMRU5CUVVNc1EwRkJRenRSUVVWeVJDeE5RVUZOTEVOQlFVTXNWVUZCVlN4RFFVRkRPMGxCUTI1Q0xFTkJRVU03U1VGcVFrMHNjME5CUVU4c1IwRkJZU3hEUVVGRExGRkJRVkVzUlVGQlJTeGhRVUZoTEVWQlFVVXNNRU5CUVZjc1EwRkJReXhEUVVGRE8wbEJhMEp1UlN4eFEwRkJRenRCUVVGRUxFTkJRVU1zUVVGdVFrUXNTVUZ0UWtNN1FVRnVRbGtzYzBOQlFUaENMR2xEUVcxQ01VTXNRMEZCUVNKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2Uvc2VydmljZXMvZGlhbG9nL2Jvb3RzdHJhcE1vZGFsRGlhbG9nL2Jvb3RzdHJhcE1vZGFsRGlhbG9nLmNvbnRyb2xsZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fcHJvbWlzZSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5wcm9taXNlO1xyXG52YXIgYm9vdHN0cmFwTW9kYWxEaWFsb2dfY29udHJvbGxlcl8xID0gcmVxdWlyZSgnLi9ib290c3RyYXBNb2RhbERpYWxvZy5jb250cm9sbGVyJyk7XHJcbmV4cG9ydHMuc2VydmljZU5hbWUgPSAndWlCb290c3RyYXBNb2RlbERpYWxvZyc7XHJcbnZhciBCb290c3RyYXBNb2RhbERpYWxvZ1NlcnZpY2UgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gQm9vdHN0cmFwTW9kYWxEaWFsb2dTZXJ2aWNlKCRtb2RhbCwgJHJvb3RTY29wZSwgcHJvbWlzZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4kbW9kYWwgPSAkbW9kYWw7XHJcbiAgICAgICAgdGhpcy4kcm9vdFNjb3BlID0gJHJvb3RTY29wZTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xyXG4gICAgICAgIHRoaXMubW9kYWxDbG9zaW5nID0gZnVuY3Rpb24gKGV2ZW50LCByZWFzb24sIGV4cGxpY2l0bHlDbG9zZWQpIHtcclxuICAgICAgICAgICAgdmFyIGNhbkNsb3NlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihfdGhpcy5jbG9zZUhhbmRsZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5DbG9zZSA9IF90aGlzLmNsb3NlSGFuZGxlcihleHBsaWNpdGx5Q2xvc2VkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWNhbkNsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIEJvb3RzdHJhcE1vZGFsRGlhbG9nU2VydmljZS5wcm90b3R5cGUub3BlbiA9IGZ1bmN0aW9uIChvcHRpb25zLCBjbG9zZUhhbmRsZXIpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmIChvcHRpb25zID09IG51bGwpIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGlhbG9nSW5zdGFuY2UgPSB7XHJcbiAgICAgICAgICAgIGNsb3NlOiBmdW5jdGlvbiAoKSB7IH0sXHJcbiAgICAgICAgICAgIGRpc21pc3M6IGZ1bmN0aW9uICgpIHsgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZS5yZXNvbHZlUHJvbWlzZXMob3B0aW9ucy5yZXNvbHZlKS50aGVuKGZ1bmN0aW9uIChyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmNsb3NlSGFuZGxlciA9IGNsb3NlSGFuZGxlcjtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IF90aGlzLmNvbmZpZ3VyZU1vZGFsU2V0dGluZ3Mob3B0aW9ucywgcmVzdWx0cyk7XHJcbiAgICAgICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gX3RoaXMuJG1vZGFsLm9wZW4ob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGRpYWxvZ0luc3RhbmNlLmNsb3NlID0gbW9kYWxJbnN0YW5jZS5jbG9zZTtcclxuICAgICAgICAgICAgZGlhbG9nSW5zdGFuY2UuZGlzbWlzcyA9IG1vZGFsSW5zdGFuY2UuZGlzbWlzcztcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gZGlhbG9nSW5zdGFuY2U7XHJcbiAgICB9O1xyXG4gICAgQm9vdHN0cmFwTW9kYWxEaWFsb2dTZXJ2aWNlLnByb3RvdHlwZS5wcm9tcHQgPSBmdW5jdGlvbiAob3B0aW9ucywgdGVtcGxhdGUpIHtcclxuICAgICAgICB2YXIgYWNjZXB0SGFuZGxlciA9IG9wdGlvbnMuYWNjZXB0SGFuZGxlciB8fCBmdW5jdGlvbiAoKSB7IH07XHJcbiAgICAgICAgdmFyIGNhbmNlbEhhbmRsZXIgPSBvcHRpb25zLmNhbmNlbEhhbmRsZXIgfHwgZnVuY3Rpb24gKCkgeyB9O1xyXG4gICAgICAgIG9wdGlvbnMuYWNjZXB0SGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgb3B0aW9ucy5jYW5jZWxIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB2YXIgbW9kYWxTY29wZSA9IHRoaXMuJHJvb3RTY29wZS4kbmV3KCk7XHJcbiAgICAgICAgbW9kYWxTY29wZS5wcm9tcHQgPSBvcHRpb25zO1xyXG4gICAgICAgIHZhciBzZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgc2NvcGU6IG1vZGFsU2NvcGUsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogYm9vdHN0cmFwTW9kYWxEaWFsb2dfY29udHJvbGxlcl8xLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSB0aGlzLiRtb2RhbC5vcGVuKHNldHRpbmdzKTtcclxuICAgICAgICB2YXIgYWNjZXB0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBhY2NlcHRIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgIG1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBjYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNhbmNlbEhhbmRsZXIoKTtcclxuICAgICAgICAgICAgbW9kYWxJbnN0YW5jZS5jbG9zZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgbW9kYWxTY29wZS4kYWNjZXB0ID0gYWNjZXB0O1xyXG4gICAgICAgIG1vZGFsU2NvcGUuJGNhbmNlbCA9IGNhbmNlbDtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhY2NlcHQ6IGFjY2VwdCxcclxuICAgICAgICAgICAgY2FuY2VsOiBjYW5jZWwsXHJcbiAgICAgICAgICAgIGNsb3NlOiBtb2RhbEluc3RhbmNlLmNsb3NlLFxyXG4gICAgICAgICAgICBkaXNtaXNzOiBtb2RhbEluc3RhbmNlLmRpc21pc3MsXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBCb290c3RyYXBNb2RhbERpYWxvZ1NlcnZpY2UucHJvdG90eXBlLmNvbmZpZ3VyZU1vZGFsU2V0dGluZ3MgPSBmdW5jdGlvbiAob3B0aW9ucywgcmVzb2x2ZURhdGEpIHtcclxuICAgICAgICB2YXIgbW9kYWxTY29wZSA9IG9wdGlvbnMuc2NvcGU7XHJcbiAgICAgICAgaWYgKG1vZGFsU2NvcGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBtb2RhbFNjb3BlID0gdGhpcy4kcm9vdFNjb3BlLiRuZXcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbnMucmVzb2x2ZVRvRGlhbG9nKSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmRpYWxvZ0FzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIG1vZGFsU2NvcGVbb3B0aW9ucy5kaWFsb2dBc10gPSByZXNvbHZlRGF0YTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1vZGFsU2NvcGUgPSBfLmV4dGVuZChtb2RhbFNjb3BlLCByZXNvbHZlRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG1vZGFsU2NvcGUucmVzb2x2ZURhdGEgPSByZXNvbHZlRGF0YTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbW9kYWxTY29wZS5tb2RhbENvbnRyb2xsZXIgPSBvcHRpb25zLmNvbnRyb2xsZXI7XHJcbiAgICAgICAgb3B0aW9ucy5yZXNvbHZlID0gbnVsbDtcclxuICAgICAgICBvcHRpb25zLmNvbnRyb2xsZXIgPSBib290c3RyYXBNb2RhbERpYWxvZ19jb250cm9sbGVyXzEuY29udHJvbGxlck5hbWU7XHJcbiAgICAgICAgb3B0aW9ucy5zY29wZSA9IG1vZGFsU2NvcGU7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XHJcbiAgICB9O1xyXG4gICAgQm9vdHN0cmFwTW9kYWxEaWFsb2dTZXJ2aWNlLiRpbmplY3QgPSBbJyR1aWJNb2RhbCcsICckcm9vdFNjb3BlJywgX19wcm9taXNlLnNlcnZpY2VOYW1lXTtcclxuICAgIHJldHVybiBCb290c3RyYXBNb2RhbERpYWxvZ1NlcnZpY2U7XHJcbn0oKSk7XHJcbmV4cG9ydHMuQm9vdHN0cmFwTW9kYWxEaWFsb2dTZXJ2aWNlID0gQm9vdHN0cmFwTW9kYWxEaWFsb2dTZXJ2aWNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lZbTl2ZEhOMGNtRndUVzlrWVd4RWFXRnNiMmN1YzJWeWRtbGpaUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkltSnZiM1J6ZEhKaGNFMXZaR0ZzUkdsaGJHOW5Mbk5sY25acFkyVXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE8wRkJSMklzU1VGQldTeERRVUZETEZkQlFVMHNVVUZCVVN4RFFVRkRMRU5CUVVFN1FVRkZOVUlzTmtOQlFYbENMRGhDUVVFNFFpeERRVUZETEVOQlFVRTdRVUZEZUVRc1NVRkJUeXhUUVVGVExFZEJRVWNzZFVOQlFWRXNRMEZCUXl4UFFVRlBMRU5CUVVNN1FVRlZjRU1zWjBSQlFUSkVMRzFEUVVGdFF5eERRVUZETEVOQlFVRTdRVUZGY0VZc2JVSkJRVmNzUjBGQlZ5eDNRa0ZCZDBJc1EwRkJRenRCUVdsQ01VUTdTVUZKUXl4eFEwRkJiMElzVFVGQmNVTXNSVUZETjBNc1ZVRkJaME1zUlVGRGFFTXNUMEZCYTBNN1VVRk9MME1zYVVKQmQwZERPMUZCY0VkdlFpeFhRVUZOTEVkQlFVNHNUVUZCVFN4RFFVRXJRanRSUVVNM1F5eGxRVUZWTEVkQlFWWXNWVUZCVlN4RFFVRnpRanRSUVVOb1F5eFpRVUZQTEVkQlFWQXNUMEZCVHl4RFFVRXlRanRSUVRaRU9VTXNhVUpCUVZrc1IwRkRWQ3hWUVVGRExFdEJRWFZDTEVWQlFVVXNUVUZCVnl4RlFVRkZMR2RDUVVGNVFqdFpRVU5zUlN4SlFVRkpMRkZCUVZFc1IwRkJXU3hKUVVGSkxFTkJRVU03V1VGRk4wSXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGVkJRVlVzUTBGQlF5eExRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU55UXl4UlFVRlJMRWRCUVVjc1MwRkJTU3hEUVVGRExGbEJRVmtzUTBGQlF5eG5Ra0ZCWjBJc1EwRkJReXhEUVVGRE8xbEJRMmhFTEVOQlFVTTdXVUZGUkN4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETEVOQlFVTTdaMEpCUTJZc1MwRkJTeXhEUVVGRExHTkJRV01zUlVGQlJTeERRVUZETzFsQlEzaENMRU5CUVVNN1VVRkRSaXhEUVVGRExFTkJRVUU3U1VGNFJXbEVMRU5CUVVNN1NVRkZia1FzTUVOQlFVa3NSMEZCU2l4VlFVRkxMRTlCUVhORExFVkJRVVVzV1VGQmEwTTdVVUZCTDBVc2FVSkJiVUpETzFGQmJFSkJMRVZCUVVVc1EwRkJReXhEUVVGRExFOUJRVThzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNKQ0xFOUJRVThzUjBGQlVTeEZRVUZGTEVOQlFVTTdVVUZEYmtJc1EwRkJRenRSUVVWRUxFbEJRVWtzWTBGQll5eEhRVUY1UWp0WlFVTXhReXhMUVVGTExHZENRVUZWTEVOQlFVTTdXVUZEYUVJc1QwRkJUeXhuUWtGQlZTeERRVUZETzFOQlEyeENMRU5CUVVNN1VVRkZSaXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEdWQlFXVXNRMEZCUXl4UFFVRlBMRU5CUVVNc1QwRkJUeXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFVTXNUMEZCV1R0WlFVTXZSQ3hMUVVGSkxFTkJRVU1zV1VGQldTeEhRVUZITEZsQlFWa3NRMEZCUXp0WlFVTnFReXhQUVVGUExFZEJRVWNzUzBGQlNTeERRVUZETEhOQ1FVRnpRaXhEUVVGRExFOUJRVThzUlVGQlJTeFBRVUZQTEVOQlFVTXNRMEZCUXp0WlFVTjRSQ3hKUVVGSkxHRkJRV0VzUjBGQk1FTXNTMEZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTTdXVUZEY2tZc1kwRkJZeXhEUVVGRExFdEJRVXNzUjBGQlJ5eGhRVUZoTEVOQlFVTXNTMEZCU3l4RFFVRkRPMWxCUXpORExHTkJRV01zUTBGQlF5eFBRVUZQTEVkQlFVY3NZVUZCWVN4RFFVRkRMRTlCUVU4c1EwRkJRenRSUVVOb1JDeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVVklMRTFCUVUwc1EwRkJReXhqUVVGakxFTkJRVU03U1VGRGRrSXNRMEZCUXp0SlFVVkVMRFJEUVVGTkxFZEJRVTRzVlVGQlR5eFBRVUYzUWl4RlFVRkZMRkZCUVdkQ08xRkJRMmhFTEVsQlFVa3NZVUZCWVN4SFFVRnBRaXhQUVVGUExFTkJRVU1zWVVGQllTeEpRVUZKTEdOQlFXMUNMRU5CUVVNc1EwRkJRenRSUVVOb1JpeEpRVUZKTEdGQlFXRXNSMEZCYVVJc1QwRkJUeXhEUVVGRExHRkJRV0VzU1VGQlNTeGpRVUZ0UWl4RFFVRkRMRU5CUVVNN1VVRkRhRVlzVDBGQlR5eERRVUZETEdGQlFXRXNSMEZCUnl4SlFVRkpMRU5CUVVNN1VVRkROMElzVDBGQlR5eERRVUZETEdGQlFXRXNSMEZCUnl4SlFVRkpMRU5CUVVNN1VVRkZOMElzU1VGQlNTeFZRVUZWTEVkQlFTdENMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zU1VGQlNTeEZRVUZGTEVOQlFVTTdVVUZEY0VVc1ZVRkJWU3hEUVVGRExFMUJRVTBzUjBGQlJ5eFBRVUZQTEVOQlFVTTdVVUZGTlVJc1NVRkJTU3hSUVVGUkxFZEJRV3RETzFsQlF6ZERMRXRCUVVzc1JVRkJSU3hWUVVGVk8xbEJRMnBDTEZGQlFWRXNSVUZCUlN4UlFVRlJPMWxCUTJ4Q0xGVkJRVlVzUlVGQlJTeG5SRUZCWXp0VFFVTXhRaXhEUVVGRE8xRkJSVVlzU1VGQlNTeGhRVUZoTEVkQlFUQkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRPMUZCUlhSR0xFbEJRVWtzVFVGQlRTeEhRVUZwUWp0WlFVTXhRaXhoUVVGaExFVkJRVVVzUTBGQlF6dFpRVU5vUWl4aFFVRmhMRU5CUVVNc1MwRkJTeXhGUVVGRkxFTkJRVU03VVVGRGRrSXNRMEZCUXl4RFFVRkRPMUZCUlVZc1NVRkJTU3hOUVVGTkxFZEJRV2xDTzFsQlF6RkNMR0ZCUVdFc1JVRkJSU3hEUVVGRE8xbEJRMmhDTEdGQlFXRXNRMEZCUXl4TFFVRkxMRVZCUVVVc1EwRkJRenRSUVVOMlFpeERRVUZETEVOQlFVTTdVVUZGUml4VlFVRlZMRU5CUVVNc1QwRkJUeXhIUVVGSExFMUJRVTBzUTBGQlF6dFJRVU0xUWl4VlFVRlZMRU5CUVVNc1QwRkJUeXhIUVVGSExFMUJRVTBzUTBGQlF6dFJRVVUxUWl4TlFVRk5MRU5CUVUwN1dVRkRXQ3hOUVVGTkxFVkJRVVVzVFVGQlRUdFpRVU5rTEUxQlFVMHNSVUZCUlN4TlFVRk5PMWxCUTJRc1MwRkJTeXhGUVVGRkxHRkJRV0VzUTBGQlF5eExRVUZMTzFsQlF6RkNMRTlCUVU4c1JVRkJSU3hoUVVGaExFTkJRVU1zVDBGQlR6dFRRVU01UWl4RFFVRkRPMGxCUTBnc1EwRkJRenRKUVdWUExEUkVRVUZ6UWl4SFFVRTVRaXhWUVVFclFpeFBRVUZ6UXl4RlFVRkZMRmRCUVdkQ08xRkJRM1JHTEVsQlFVa3NWVUZCVlN4SFFVRXlSQ3hQUVVGUExFTkJRVU1zUzBGQlN5eERRVUZETzFGQlJYWkdMRVZCUVVVc1EwRkJReXhEUVVGRExGVkJRVlVzU1VGQlNTeEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNoQ0xGVkJRVlVzUjBGQkswSXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFVkJRVVVzUTBGQlF6dFJRVU5xUlN4RFFVRkRPMUZCUlVRc1JVRkJSU3hEUVVGRExFTkJRVU1zVDBGQlR5eERRVUZETEdWQlFXVXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkROMElzUlVGQlJTeERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRkZCUVZFc1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTTVRaXhWUVVGVkxFTkJRVU1zVDBGQlR5eERRVUZETEZGQlFWRXNRMEZCUXl4SFFVRkhMRmRCUVZjc1EwRkJRenRaUVVNMVF5eERRVUZETzFsQlEwUXNTVUZCU1N4RFFVRkRMRU5CUVVNN1owSkJRMHdzVlVGQlZTeEhRVUVyUWl4RFFVRkRMRU5CUVVNc1RVRkJUU3hEUVVGRExGVkJRVlVzUlVGQlJTeFhRVUZYTEVOQlFVTXNRMEZCUXp0WlFVTTFSU3hEUVVGRE8xRkJRMFlzUTBGQlF6dFJRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTFBc1ZVRkJWU3hEUVVGRExGZEJRVmNzUjBGQlJ5eFhRVUZYTEVOQlFVTTdVVUZEZEVNc1EwRkJRenRSUVVWRUxGVkJRVlVzUTBGQlF5eGxRVUZsTEVkQlFVY3NUMEZCVHl4RFFVRkRMRlZCUVZVc1EwRkJRenRSUVVOb1JDeFBRVUZQTEVOQlFVTXNUMEZCVHl4SFFVRkhMRWxCUVVrc1EwRkJRenRSUVVOMlFpeFBRVUZQTEVOQlFVTXNWVUZCVlN4SFFVRkhMR2RFUVVGakxFTkJRVU03VVVGRGNFTXNUMEZCVHl4RFFVRkRMRXRCUVVzc1IwRkJSeXhWUVVGVkxFTkJRVU03VVVGRE0wSXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJRenRKUVVOb1FpeERRVUZETzBsQmNFZE5MRzFEUVVGUExFZEJRV0VzUTBGQlF5eFhRVUZYTEVWQlFVVXNXVUZCV1N4RlFVRkZMRk5CUVZNc1EwRkJReXhYUVVGWExFTkJRVU1zUTBGQlF6dEpRWEZITDBVc2EwTkJRVU03UVVGQlJDeERRVUZETEVGQmVFZEVMRWxCZDBkRE8wRkJlRWRaTEcxRFFVRXlRaXc0UWtGM1IzWkRMRU5CUVVFaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL3NlcnZpY2VzL2RpYWxvZy9ib290c3RyYXBNb2RhbERpYWxvZy9ib290c3RyYXBNb2RhbERpYWxvZy5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gMTI0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwibW9kYWwtYm9keVxcXCI+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwicm93XFxcIj5cXHJcXG5cXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjb2wteHMtMTJcXFwiPlxcclxcblxcdFxcdFxcdDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiY2xvc2VcXFwiIGRhdGEtZGlzbWlzcz1cXFwibW9kYWxcXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiBuZy1jbGljaz1cXFwiJGRpc21pc3MoKVxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0PHNwYW4gY2xhc3M9XFxcImZhLXN0YWNrXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHQ8aSBjbGFzcz1cXFwiY2xvc2UtYmcgZmEgZmEtY2lyY2xlIGZhLXN0YWNrLTJ4XFxcIj48L2k+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PGkgY2xhc3M9XFxcImNsb3NlLWljb24gZmEgZmEtY2xvc2UgZmEtc3RhY2stMXhcXFwiPjwvaT5cXHJcXG5cXHRcXHRcXHRcXHQ8L3NwYW4+XFxyXFxuXFx0XFx0XFx0PC9idXR0b24+XFxyXFxuXFx0XFx0PC9kaXY+XFxyXFxuXFx0PC9kaXY+XFxyXFxuXFxyXFxuXFx0e3twcm9tcHQubWVzc2FnZX19XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiY2xlYXJmaXhcXFwiPjwvZGl2PlxcclxcbjwvZGl2PlxcclxcbjxkaXYgY2xhc3M9XFxcIm1vZGFsLWZvb3RlclxcXCI+XFxyXFxuXFx0PGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1kYW5nZXJcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgbmctY2xpY2s9XFxcIiRjYW5jZWwoKVxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLXRpbWVzXFxcIj48L2k+IHt7cHJvbXB0LmNhbmNlbEJ1dHRvbn19PC9idXR0b24+XFxyXFxuXFx0PGJ1dHRvbiBjbGFzcz1cXFwiYnRuIGJ0bi1zdWNjZXNzXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIG5nLWNsaWNrPVxcXCIkYWNjZXB0KClcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1jaGVja1xcXCI+PC9pPiB7e3Byb21wdC5va0J1dHRvbn19PC9idXR0b24+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiY2xlYXJmaXhcXFwiPjwvZGl2PlxcclxcbjwvZGl2PlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9zZXJ2aWNlcy9kaWFsb2cvcHJvbXB0RGlhbG9nLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxMjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8cmwtYnV0dG9uIHR5cGU9XFxcImRhbmdlclxcXCIgYWN0aW9uPVxcXCJkaWFsb2cuY2xvc2UoKVxcXCI+PGkgY2xhc3M9XFxcImZhIGZhLXRpbWVzXFxcIj48L2k+IENhbmNlbDwvcmwtYnV0dG9uPlxcclxcbjxybC1idXR0b24tYXN5bmMgdHlwZT1cXFwic3VjY2Vzc1xcXCIgYWN0aW9uPVxcXCJkaWFsb2cuc2F2ZUFuZENsb3NlKClcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1jaGVja1xcXCI+PC9pPiBTYXZlPC9ybC1idXR0b24tc3VibWl0PlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2RpYWxvZy9hdXRvc2F2ZURpYWxvZ0Zvb3Rlci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHJsLWZvcm0gc2F2ZT1cXFwiZGlhbG9nLnNhdmVBbmRDbG9zZSgpXFxcIiBzYXZpbmc9XFxcImRpYWxvZy5zYXZpbmdcXFwiIGZvcm09XFxcImRpYWxvZy5mb3JtXFxcIj5cXHJcXG5cXHQ8ZGl2IGNsYXNzPVxcXCJtb2RhbC1oZWFkZXJcXFwiPlxcclxcblxcdFxcdDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiY2xvc2VcXFwiIGRhdGEtZGlzbWlzcz1cXFwibW9kYWxcXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIiBuZy1jbGljaz1cXFwiZGlhbG9nLmNsb3NlKClcXFwiPlxcclxcblxcdFxcdFxcdDxzcGFuIGNsYXNzPVxcXCJmYS1zdGFja1xcXCI+XFxyXFxuXFx0XFx0XFx0XFx0PGkgY2xhc3M9XFxcImNsb3NlLWJnIGZhIGZhLWNpcmNsZSBmYS1zdGFjay0yeFxcXCI+PC9pPlxcclxcblxcdFxcdFxcdFxcdDxpIGNsYXNzPVxcXCJjbG9zZS1pY29uIGZhIGZhLWNsb3NlIGZhLXN0YWNrLTF4XFxcIj48L2k+XFxyXFxuXFx0XFx0XFx0PC9zcGFuPlxcclxcblxcdFxcdDwvYnV0dG9uPlxcclxcblxcdFxcdDxkaXYgbmctdHJhbnNjbHVkZT1cXFwiaGVhZGVyU2xvdFxcXCI+PC9kaXY+XFxyXFxuXFx0XFx0PGRpdiBjbGFzcz1cXFwiY2xlYXJmaXggXFxcIj48L2Rpdj5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG5cXHQ8ZGl2IGNsYXNzPVxcXCJtb2RhbC1ib2R5XFxcIj5cXHJcXG5cXHRcXHQ8ZGl2IG5nLXRyYW5zY2x1ZGU9XFxcImNvbnRlbnRTbG90XFxcIj48L2Rpdj5cXHJcXG5cXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjbGVhcmZpeFxcXCI+PC9kaXY+XFxyXFxuXFx0PC9kaXY+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwibW9kYWwtZm9vdGVyXFxcIiBuZy1zaG93PVxcXCJkaWFsb2cuaGFzRm9vdGVyXFxcIj5cXHJcXG5cXHRcXHQ8ZGl2IGNsYXNzPVxcXCJmb290ZXItdGVtcGxhdGVcXFwiPjwvZGl2PlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcImNsZWFyZml4XFxcIj48L2Rpdj5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG48L3JsLWZvcm0+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvZGlhbG9nL2RpYWxvZy5odG1sXG4gKiogbW9kdWxlIGlkID0gMTI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi90eXBpbmdzL25vZGUvbm9kZS5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19wYXJlbnRDaGlsZCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5wYXJlbnRDaGlsZEJlaGF2aW9yO1xyXG52YXIgYXV0b3NhdmVfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvYXV0b3NhdmUvYXV0b3NhdmUuc2VydmljZScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5mb3JtJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsRm9ybSc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAncmxGb3JtQ29udHJvbGxlcic7XHJcbnZhciBGb3JtQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBGb3JtQ29udHJvbGxlcigkZWxlbWVudCwgJHNjb3BlLCAkdGltZW91dCwgJHEsIGF1dG9zYXZlRmFjdG9yeSwgcGFyZW50Q2hpbGQpIHtcclxuICAgICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy4kdGltZW91dCA9ICR0aW1lb3V0O1xyXG4gICAgICAgIHRoaXMuJHEgPSAkcTtcclxuICAgICAgICB0aGlzLmF1dG9zYXZlRmFjdG9yeSA9IGF1dG9zYXZlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnBhcmVudENoaWxkID0gcGFyZW50Q2hpbGQ7XHJcbiAgICB9XHJcbiAgICBGb3JtQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5mb3JtID0gX3RoaXMuJHNjb3BlLnJsRm9ybTtcclxuICAgICAgICAgICAgX3RoaXMuYXV0b3NhdmUgPSBfdGhpcy5hdXRvc2F2ZUZhY3RvcnkuZ2V0SW5zdGFuY2Uoe1xyXG4gICAgICAgICAgICAgICAgc2F2ZTogX3RoaXMuc2F2ZUZvcm0uYmluZChfdGhpcyksXHJcbiAgICAgICAgICAgICAgICBjb250ZW50Rm9ybTogX3RoaXMuJHNjb3BlLnJsRm9ybSxcclxuICAgICAgICAgICAgICAgIHRyaWdnZXJzOiAnbm9uZScsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBfdGhpcy5wYXJlbnRDaGlsZC5yZWdpc3RlckNoaWxkQmVoYXZpb3IoX3RoaXMuY2hpbGRMaW5rLCB7XHJcbiAgICAgICAgICAgICAgICBzYXZlOiBfdGhpcy5hdXRvc2F2ZS52YWxpZGF0ZUFuZFNhdmUuYmluZChfdGhpcy5hdXRvc2F2ZSksXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEZvcm1Db250cm9sbGVyLnByb3RvdHlwZS5zYXZlRm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc2F2aW5nID0gdHJ1ZTtcclxuICAgICAgICByZXR1cm4gdGhpcy4kcS53aGVuKHRoaXMuc2F2ZSgpKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3RoaXMuc2F2aW5nID0gZmFsc2U7XHJcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgeyBfdGhpcy5zYXZpbmcgPSBmYWxzZTsgfSk7XHJcbiAgICB9O1xyXG4gICAgRm9ybUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGVsZW1lbnQnLCAnJHNjb3BlJywgJyR0aW1lb3V0JywgJyRxJywgYXV0b3NhdmVfc2VydmljZV8xLmZhY3RvcnlOYW1lLCBfX3BhcmVudENoaWxkLnNlcnZpY2VOYW1lXTtcclxuICAgIHJldHVybiBGb3JtQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5Gb3JtQ29udHJvbGxlciA9IEZvcm1Db250cm9sbGVyO1xyXG52YXIgZm9ybSA9IHtcclxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICB0ZW1wbGF0ZTogXCI8Zm9ybSBuZy10cmFuc2NsdWRlIG5hbWU9XFxcInJsRm9ybVxcXCIgbmctc3VibWl0PVxcXCJjb250cm9sbGVyLmF1dG9zYXZlLnZhbGlkYXRlQW5kU2F2ZSgpXFxcIj48L2Zvcm0+XCIsXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnY29udHJvbGxlcicsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIHNhdmluZzogJz0/JyxcclxuICAgICAgICBzYXZlOiAnJicsXHJcbiAgICAgICAgZm9ybTogJz0/JyxcclxuICAgICAgICBjaGlsZExpbms6ICc9PycsXHJcbiAgICB9LFxyXG59O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFthdXRvc2F2ZV9zZXJ2aWNlXzEubW9kdWxlTmFtZV0pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgZm9ybSlcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIEZvcm1Db250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWm05eWJTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW1admNtMHVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc01rUkJRVEpFTzBGQlJUTkVMRmxCUVZrc1EwRkJRenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUjI1RExEWkRRVUY1UWl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlEzaEVMRWxCUVU4c1lVRkJZU3hIUVVGSExIVkRRVUZSTEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU03UVVGSGNFUXNhVU5CUVRSSUxEQkRRVUV3UXl4RFFVRkRMRU5CUVVFN1FVRkZOVW9zYTBKQlFWVXNSMEZCVnl4MVFrRkJkVUlzUTBGQlF6dEJRVU0zUXl4eFFrRkJZU3hIUVVGWExGRkJRVkVzUTBGQlF6dEJRVU5xUXl4elFrRkJZeXhIUVVGWExHdENRVUZyUWl4RFFVRkRPMEZCWlhaRU8wbEJVME1zZDBKQlFXOUNMRkZCUVd0RExFVkJRekZETEUxQlFXdENMRVZCUTJ4Q0xGRkJRV2xETEVWQlEycERMRVZCUVhGQ0xFVkJRM0pDTEdWQlFYZERMRVZCUTNoRExGZEJRWE5FTzFGQlREbERMR0ZCUVZFc1IwRkJVaXhSUVVGUkxFTkJRVEJDTzFGQlF6RkRMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRVms3VVVGRGJFSXNZVUZCVVN4SFFVRlNMRkZCUVZFc1EwRkJlVUk3VVVGRGFrTXNUMEZCUlN4SFFVRkdMRVZCUVVVc1EwRkJiVUk3VVVGRGNrSXNiMEpCUVdVc1IwRkJaaXhsUVVGbExFTkJRWGxDTzFGQlEzaERMR2RDUVVGWExFZEJRVmdzVjBGQlZ5eERRVUV5UXp0SlFVRkpMRU5CUVVNN1NVRkZka1VzWjBOQlFVOHNSMEZCVUR0UlFVRkJMR2xDUVdGRE8xRkJXa0VzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXp0WlFVTmlMRXRCUVVrc1EwRkJReXhKUVVGSkxFZEJRVWNzUzBGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNN1dVRkRMMElzUzBGQlNTeERRVUZETEZGQlFWRXNSMEZCUnl4TFFVRkpMRU5CUVVNc1pVRkJaU3hEUVVGRExGZEJRVmNzUTBGQlF6dG5Ra0ZEYUVRc1NVRkJTU3hGUVVGRkxFdEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMRXRCUVVrc1EwRkJRenRuUWtGRE9VSXNWMEZCVnl4RlFVRkZMRXRCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRUdG5Ra0ZETDBJc1VVRkJVU3hGUVVGRkxFMUJRVTA3WVVGRGFFSXNRMEZCUXl4RFFVRkRPMWxCUlVnc1MwRkJTU3hEUVVGRExGZEJRVmNzUTBGQlF5eHhRa0ZCY1VJc1EwRkJReXhMUVVGSkxFTkJRVU1zVTBGQlV5eEZRVUZGTzJkQ1FVTjBSQ3hKUVVGSkxFVkJRVVVzUzBGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4bFFVRmxMRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTTdZVUZEZGtRc1EwRkJReXhEUVVGRE8xRkJRMG9zUTBGQlF5eERRVUZETEVOQlFVTTdTVUZEU2l4RFFVRkRPMGxCUlVRc2FVTkJRVkVzUjBGQlVqdFJRVUZCTEdsQ1FVdERPMUZCU2tFc1NVRkJTU3hEUVVGRExFMUJRVTBzUjBGQlJ5eEpRVUZKTEVOQlFVTTdVVUZEYmtJc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXp0WlFVTnlReXhMUVVGSkxFTkJRVU1zVFVGQlRTeEhRVUZITEV0QlFVc3NRMEZCUXp0UlFVTnlRaXhEUVVGRExFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNZMEZCWXl4TFFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMGxCUTJoRUxFTkJRVU03U1VFMVFrMHNjMEpCUVU4c1IwRkJZU3hEUVVGRExGVkJRVlVzUlVGQlJTeFJRVUZSTEVWQlFVVXNWVUZCVlN4RlFVRkZMRWxCUVVrc1JVRkJSU3c0UWtGQmJVSXNSVUZCUlN4aFFVRmhMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU03U1VFMlFuSklMSEZDUVVGRE8wRkJRVVFzUTBGQlF5eEJRWEpEUkN4SlFYRkRRenRCUVhKRFdTeHpRa0ZCWXl4cFFrRnhRekZDTEVOQlFVRTdRVUZGUkN4SlFVRkpMRWxCUVVrc1IwRkJPRUk3U1VGRGNrTXNWVUZCVlN4RlFVRkZMRWxCUVVrN1NVRkRhRUlzVVVGQlVTeEZRVUZGTEdsSFFVRTJSanRKUVVOMlJ5eFZRVUZWTEVWQlFVVXNjMEpCUVdNN1NVRkRNVUlzV1VGQldTeEZRVUZGTEZsQlFWazdTVUZETVVJc1VVRkJVU3hGUVVGRk8xRkJRMVFzVFVGQlRTeEZRVUZGTEVsQlFVazdVVUZEV2l4SlFVRkpMRVZCUVVVc1IwRkJSenRSUVVOVUxFbEJRVWtzUlVGQlJTeEpRVUZKTzFGQlExWXNVMEZCVXl4RlFVRkZMRWxCUVVrN1MwRkRaanREUVVORUxFTkJRVU03UVVGRlJpeFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMR3RDUVVGVkxFVkJRVVVzUTBGQlF5dzJRa0ZCWXl4RFFVRkRMRU5CUVVNN1MwRkRNVU1zVTBGQlV5eERRVUZETEhGQ1FVRmhMRVZCUVVVc1NVRkJTU3hEUVVGRE8wdEJRemxDTEZWQlFWVXNRMEZCUXl4elFrRkJZeXhGUVVGRkxHTkJRV01zUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9mb3JtL2Zvcm0uanNcbiAqKiBtb2R1bGUgaWQgPSAxMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBqcXVlcnlfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvanF1ZXJ5L2pxdWVyeS5zZXJ2aWNlJyk7XHJcbnZhciB0ZW1wbGF0ZUxvYWRlcl9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy90ZW1wbGF0ZUxvYWRlci90ZW1wbGF0ZUxvYWRlci5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLmdlbmVyaWNDb250YWluZXInO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxHZW5lcmljQ29udGFpbmVyJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdHZW5lcmljQ29udGFpbmVyQ29udHJvbGxlcic7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbnZhciBHZW5lcmljQ29udGFpbmVyQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBHZW5lcmljQ29udGFpbmVyQ29udHJvbGxlcigkc2NvcGUsICRlbGVtZW50LCAkdHJhbnNjbHVkZSwgJGNvbXBpbGUsIG9iamVjdCwganF1ZXJ5LCB0ZW1wbGF0ZUxvYWRlcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xyXG4gICAgICAgIHRoaXMuJHRyYW5zY2x1ZGUgPSAkdHJhbnNjbHVkZTtcclxuICAgICAgICB0aGlzLiRjb21waWxlID0gJGNvbXBpbGU7XHJcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgdGhpcy5qcXVlcnkgPSBqcXVlcnk7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZUxvYWRlciA9IHRlbXBsYXRlTG9hZGVyO1xyXG4gICAgICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuc2VsZWN0b3I7IH0sIGZ1bmN0aW9uIChuZXdUeXBlLCBvbGRUeXBlKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5vYmplY3QuYXJlRXF1YWwobmV3VHlwZSwgb2xkVHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBfdGhpcy5yZXNvbHZlVGVtcGxhdGUobmV3VHlwZSk7XHJcbiAgICAgICAgICAgIF90aGlzLnN3YXBUZW1wbGF0ZXModGVtcGxhdGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgR2VuZXJpY0NvbnRhaW5lckNvbnRyb2xsZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gdGhpcy5yZXNvbHZlVGVtcGxhdGUodGhpcy5zZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5zd2FwVGVtcGxhdGVzKHRlbXBsYXRlKTtcclxuICAgIH07XHJcbiAgICBHZW5lcmljQ29udGFpbmVyQ29udHJvbGxlci5wcm90b3R5cGUucmVzb2x2ZVRlbXBsYXRlID0gZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICBpZiAoXy5oYXModGhpcy50ZW1wbGF0ZXMsIHR5cGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRlbXBsYXRlc1t0eXBlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmF1bHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEdlbmVyaWNDb250YWluZXJDb250cm9sbGVyLnByb3RvdHlwZS4kcG9zdExpbmsgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5pbml0RGVmYXVsdHMoKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMuJGVsZW1lbnQuZmluZCgnI2NvbnRhaW5lcicpO1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZVJlc3VsdCA9IHRoaXMudGVtcGxhdGVMb2FkZXIubG9hZFRlbXBsYXRlcyh0aGlzLiR0cmFuc2NsdWRlKTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcyA9IF8uZXh0ZW5kKHRoaXMudGVtcGxhdGVzLCB0ZW1wbGF0ZVJlc3VsdC50ZW1wbGF0ZXMpO1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdCA9IHRlbXBsYXRlUmVzdWx0LmRlZmF1bHQ7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVNjb3BlID0gdGVtcGxhdGVSZXN1bHQudHJhbnNjbHVzaW9uU2NvcGU7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRlZmF1bHQpIHtcclxuICAgICAgICAgICAgdGhpcy5kZWZhdWx0ID0gJzxkaXY+PC9kaXY+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICB9O1xyXG4gICAgR2VuZXJpY0NvbnRhaW5lckNvbnRyb2xsZXIucHJvdG90eXBlLmluaXREZWZhdWx0cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0aGlzLmRlZmF1bHRUZW1wbGF0ZTtcclxuICAgICAgICB0aGlzLnRlbXBsYXRlcyA9IHRoaXMuY29uZmlndXJlZFRlbXBsYXRlcyA/IHRoaXMuY29uZmlndXJlZFRlbXBsYXRlcyA6IHt9O1xyXG4gICAgfTtcclxuICAgIEdlbmVyaWNDb250YWluZXJDb250cm9sbGVyLnByb3RvdHlwZS5zd2FwVGVtcGxhdGVzID0gZnVuY3Rpb24gKHRlbXBsYXRlKSB7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQgPSBhbmd1bGFyLmVsZW1lbnQodGVtcGxhdGUpO1xyXG4gICAgICAgIHRoaXMuanF1ZXJ5LnJlcGxhY2VDb250ZW50KHRoaXMuY29udGFpbmVyLCBjb250ZW50KTtcclxuICAgICAgICB0aGlzLiRjb21waWxlKGNvbnRlbnQpKHRoaXMudGVtcGxhdGVTY29wZSk7XHJcbiAgICB9O1xyXG4gICAgR2VuZXJpY0NvbnRhaW5lckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJyxcclxuICAgICAgICAnJGVsZW1lbnQnLFxyXG4gICAgICAgICckdHJhbnNjbHVkZScsXHJcbiAgICAgICAgJyRjb21waWxlJyxcclxuICAgICAgICBfX29iamVjdC5zZXJ2aWNlTmFtZSxcclxuICAgICAgICBqcXVlcnlfc2VydmljZV8xLnNlcnZpY2VOYW1lLFxyXG4gICAgICAgIHRlbXBsYXRlTG9hZGVyX3NlcnZpY2VfMS5zZXJ2aWNlTmFtZV07XHJcbiAgICByZXR1cm4gR2VuZXJpY0NvbnRhaW5lckNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuR2VuZXJpY0NvbnRhaW5lckNvbnRyb2xsZXIgPSBHZW5lcmljQ29udGFpbmVyQ29udHJvbGxlcjtcclxudmFyIGdlbmVyaWNDb250YWluZXIgPSB7XHJcbiAgICB0ZW1wbGF0ZTogJzxkaXYgaWQ9XCJjb250YWluZXJcIj48L2Rpdj4nLFxyXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdnZW5lcmljQ29udGFpbmVyJyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgc2VsZWN0b3I6ICc8JyxcclxuICAgICAgICBjb25maWd1cmVkVGVtcGxhdGVzOiAnPHRlbXBsYXRlcycsXHJcbiAgICAgICAgZGVmYXVsdFRlbXBsYXRlOiAnPCcsXHJcbiAgICB9LFxyXG59O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtqcXVlcnlfc2VydmljZV8xLm1vZHVsZU5hbWUsIF9fb2JqZWN0Lm1vZHVsZU5hbWUsIHRlbXBsYXRlTG9hZGVyX3NlcnZpY2VfMS5tb2R1bGVOYW1lXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBnZW5lcmljQ29udGFpbmVyKVxyXG4gICAgLmNvbnRyb2xsZXIoZXhwb3J0cy5jb250cm9sbGVyTmFtZSwgR2VuZXJpY0NvbnRhaW5lckNvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laMlZ1WlhKcFkwTnZiblJoYVc1bGNpNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW1kbGJtVnlhV05EYjI1MFlXbHVaWEl1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNXVUZCV1N4RFFVRkRPMEZCUldJc1NVRkJXU3hQUVVGUExGZEJRVTBzVTBGQlV5eERRVUZETEVOQlFVRTdRVUZEYmtNc1NVRkJXU3hEUVVGRExGZEJRVTBzVVVGQlVTeERRVUZETEVOQlFVRTdRVUZGTlVJc05rTkJRWGxDTERoQ1FVRTRRaXhEUVVGRExFTkJRVUU3UVVGRmVFUXNLMEpCU1U4c2MwTkJRWE5ETEVOQlFVTXNRMEZCUVR0QlFVVTVReXgxUTBGSlR5eHpSRUZCYzBRc1EwRkJReXhEUVVGQk8wRkJSVzVFTEd0Q1FVRlZMRWRCUVZjc2JVTkJRVzFETEVOQlFVTTdRVUZEZWtRc2NVSkJRV0VzUjBGQlZ5eHZRa0ZCYjBJc1EwRkJRenRCUVVNM1F5eHpRa0ZCWXl4SFFVRlhMRFJDUVVFMFFpeERRVUZETzBGQlJXcEZMRWxCUVU4c1VVRkJVU3hIUVVGSExIVkRRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUld4RE8wbEJhMEpETEc5RFFVRlpMRTFCUVhOQ0xFVkJRM1JDTEZGQlFXdERMRVZCUTJ4RExGZEJRWGRETEVWQlEzaERMRkZCUVdsRExFVkJRMnBETEUxQlFTdENMRVZCUXk5Q0xFMUJRWE5DTEVWQlEzUkNMR05CUVN0Q08xRkJlRUkxUXl4cFFrRXlSVU03VVVGNFJGa3NZVUZCVVN4SFFVRlNMRkZCUVZFc1EwRkJNRUk3VVVGRGJFTXNaMEpCUVZjc1IwRkJXQ3hYUVVGWExFTkJRVFpDTzFGQlEzaERMR0ZCUVZFc1IwRkJVaXhSUVVGUkxFTkJRWGxDTzFGQlEycERMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRWGxDTzFGQlF5OUNMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRV2RDTzFGQlEzUkNMRzFDUVVGakxFZEJRV1FzWTBGQll5eERRVUZwUWp0UlFVTXhReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEdOQlFXRXNUVUZCVFN4RFFVRkRMRXRCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETEVWQlFVVXNWVUZCUXl4UFFVRlpMRVZCUVVVc1QwRkJXVHRaUVVNNVJTeEZRVUZGTEVOQlFVTXNRMEZCUXl4TFFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExGRkJRVkVzUTBGQlF5eFBRVUZQTEVWQlFVVXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU0xUXl4TlFVRk5MRU5CUVVNN1dVRkRVaXhEUVVGRE8xbEJSVVFzU1VGQlNTeFJRVUZSTEVkQlFWY3NTMEZCU1N4RFFVRkRMR1ZCUVdVc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF6dFpRVU55UkN4TFFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFGQlF6bENMRU5CUVVNc1EwRkJReXhEUVVGRE8wbEJRMG9zUTBGQlF6dEpRVVZFTERSRFFVRlBMRWRCUVZBN1VVRkRReXhKUVVGSkxGRkJRVkVzUjBGQlZ5eEpRVUZKTEVOQlFVTXNaVUZCWlN4RFFVRkRMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF6dFJRVU16UkN4SlFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzBsQlF6bENMRU5CUVVNN1NVRkZSQ3h2UkVGQlpTeEhRVUZtTEZWQlFXZENMRWxCUVZrN1VVRkRNMElzUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRWRCUVVjc1EwRkJReXhKUVVGSkxFTkJRVU1zVTBGQlV5eEZRVUZGTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOcVF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dFJRVU0zUWl4RFFVRkRPMUZCUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03V1VGRFVDeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJRenRSUVVOeVFpeERRVUZETzBsQlEwWXNRMEZCUXp0SlFVVkVMRGhEUVVGVExFZEJRVlE3VVVGRFF5eEpRVUZKTEVOQlFVTXNXVUZCV1N4RlFVRkZMRU5CUVVNN1VVRkZjRUlzU1VGQlNTeERRVUZETEZOQlFWTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXp0UlFVTnNSQ3hKUVVGSkxHTkJRV01zUjBGQlJ5eEpRVUZKTEVOQlFVTXNZMEZCWXl4RFFVRkRMR0ZCUVdFc1EwRkJReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTTdVVUZGZWtVc1NVRkJTU3hEUVVGRExGTkJRVk1zUjBGQlVTeERRVUZETEVOQlFVTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFVkJRVVVzWTBGQll5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRPMUZCUTNwRkxFbEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NZMEZCWXl4RFFVRkRMRTlCUVU4c1EwRkJRenRSUVVOMFF5eEpRVUZKTEVOQlFVTXNZVUZCWVN4SFFVRkhMR05CUVdNc1EwRkJReXhwUWtGQmFVSXNRMEZCUXp0UlFVVjBSQ3hGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRMjVDTEVsQlFVa3NRMEZCUXl4UFFVRlBMRWRCUVVjc1lVRkJZU3hEUVVGRE8xRkJRemxDTEVOQlFVTTdVVUZGUkN4SlFVRkpMRU5CUVVNc1QwRkJUeXhGUVVGRkxFTkJRVU03U1VGRGFFSXNRMEZCUXp0SlFVVlBMR2xFUVVGWkxFZEJRWEJDTzFGQlEwTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1IwRkJSeXhKUVVGSkxFTkJRVU1zWlVGQlpTeERRVUZETzFGQlEzQkRMRWxCUVVrc1EwRkJReXhUUVVGVExFZEJRVWNzU1VGQlNTeERRVUZETEcxQ1FVRnRRaXhIUVVGSExFbEJRVWtzUTBGQlF5eHRRa0ZCYlVJc1IwRkJSeXhGUVVGRkxFTkJRVU03U1VGRE0wVXNRMEZCUXp0SlFVVlBMR3RFUVVGaExFZEJRWEpDTEZWQlFYTkNMRkZCUVdkQ08xRkJRM0pETEVsQlFVa3NUMEZCVHl4SFFVRTJRaXhQUVVGUExFTkJRVU1zVDBGQlR5eERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRPMUZCUTJ4RkxFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNZMEZCWXl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFVkJRVVVzVDBGQlR5eERRVUZETEVOQlFVTTdVVUZEY0VRc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1lVRkJZU3hEUVVGRExFTkJRVUU3U1VGRE0wTXNRMEZCUXp0SlFTOUVUU3hyUTBGQlR5eEhRVUZoTEVOQlFVTXNVVUZCVVR0UlFVTTFRaXhWUVVGVk8xRkJRMVlzWVVGQllUdFJRVU5pTEZWQlFWVTdVVUZEVml4UlFVRlJMRU5CUVVNc1YwRkJWenRSUVVOd1FpdzBRa0ZCYVVJN1VVRkRha0lzYjBOQlFYRkNMRU5CUVVNc1EwRkJRenRKUVRCRWFFTXNhVU5CUVVNN1FVRkJSQ3hEUVVGRExFRkJNMFZFTEVsQk1rVkRPMEZCTTBWWkxHdERRVUV3UWl3MlFrRXlSWFJETEVOQlFVRTdRVUZGUkN4SlFVRkpMR2RDUVVGblFpeEhRVUU0UWp0SlFVTnFSQ3hSUVVGUkxFVkJRVVVzTkVKQlFUUkNPMGxCUTNSRExGVkJRVlVzUlVGQlJTeEpRVUZKTzBsQlEyaENMRlZCUVZVc1JVRkJSU3h6UWtGQll6dEpRVU14UWl4WlFVRlpMRVZCUVVVc2EwSkJRV3RDTzBsQlEyaERMRkZCUVZFc1JVRkJSVHRSUVVOVUxGRkJRVkVzUlVGQlJTeEhRVUZITzFGQlEySXNiVUpCUVcxQ0xFVkJRVVVzV1VGQldUdFJRVU5xUXl4bFFVRmxMRVZCUVVVc1IwRkJSenRMUVVOd1FqdERRVU5FTEVOQlFVTTdRVUZGUml4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVXNRMEZCUXl3eVFrRkJaMElzUlVGQlJTeFJRVUZSTEVOQlFVTXNWVUZCVlN4RlFVRkZMRzFEUVVGdlFpeERRVUZETEVOQlFVTTdTMEZEZGtZc1UwRkJVeXhEUVVGRExIRkNRVUZoTEVWQlFVVXNaMEpCUVdkQ0xFTkJRVU03UzBGRE1VTXNWVUZCVlN4RFFVRkRMSE5DUVVGakxFVkJRVVVzTUVKQlFUQkNMRU5CUVVNc1EwRkJReUo5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2dlbmVyaWNDb250YWluZXIvZ2VuZXJpY0NvbnRhaW5lci5qc1xuICoqIG1vZHVsZSBpZCA9IDEyOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvanF1ZXJ5L2pxdWVyeS5kLnRzXCIgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnV0aWxpdGllcy5zZXJ2aWNlcy5qcXVlcnknO1xyXG5leHBvcnRzLnNlcnZpY2VOYW1lID0gJ2pxdWVyeVV0aWxpdHknO1xyXG52YXIgSlF1ZXJ5VXRpbGl0eSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBKUXVlcnlVdGlsaXR5KCkge1xyXG4gICAgfVxyXG4gICAgSlF1ZXJ5VXRpbGl0eS5wcm90b3R5cGUucmVwbGFjZUNvbnRlbnQgPSBmdW5jdGlvbiAoY29udGVudEFyZWEsIG5ld0NvbnRlbnQpIHtcclxuICAgICAgICBjb250ZW50QXJlYS5lbXB0eSgpO1xyXG4gICAgICAgIHJldHVybiBjb250ZW50QXJlYS5hcHBlbmQobmV3Q29udGVudCk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEpRdWVyeVV0aWxpdHk7XHJcbn0oKSk7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuc2VydmljZShleHBvcnRzLnNlcnZpY2VOYW1lLCBKUXVlcnlVdGlsaXR5KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYW5GMVpYSjVMbk5sY25acFkyVXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKcWNYVmxjbmt1YzJWeWRtbGpaUzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTd3JSRUZCSzBRN1FVRkZMMFFzV1VGQldTeERRVUZETzBGQlJXSXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGRmVFSXNhMEpCUVZVc1IwRkJWeXc0UWtGQk9FSXNRMEZCUXp0QlFVTndSQ3h0UWtGQlZ5eEhRVUZYTEdWQlFXVXNRMEZCUXp0QlFVMXFSRHRKUVVGQk8wbEJTMEVzUTBGQlF6dEpRVXBCTEhORFFVRmpMRWRCUVdRc1ZVRkJaU3hYUVVGdFFpeEZRVUZGTEZWQlFXdENPMUZCUTNKRUxGZEJRVmNzUTBGQlF5eExRVUZMTEVWQlFVVXNRMEZCUXp0UlFVTndRaXhOUVVGTkxFTkJRVU1zVjBGQlZ5eERRVUZETEUxQlFVMHNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJRenRKUVVOMlF5eERRVUZETzBsQlEwWXNiMEpCUVVNN1FVRkJSQ3hEUVVGRExFRkJURVFzU1VGTFF6dEJRVVZFTEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc2EwSkJRVlVzUlVGQlJTeEZRVUZGTEVOQlFVTTdTMEZETlVJc1QwRkJUeXhEUVVGRExHMUNRVUZYTEVWQlFVVXNZVUZCWVN4RFFVRkRMRU5CUVVNaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL3NlcnZpY2VzL2pxdWVyeS9qcXVlcnkuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9qcXVlcnkvanF1ZXJ5LmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51dGlsaXRpZXMuc2VydmljZXMudGVtcGxhdGVMb2FkZXInO1xyXG5leHBvcnRzLnNlcnZpY2VOYW1lID0gJ3RlbXBsYXRlTG9hZGVyJztcclxudmFyIFRlbXBsYXRlTG9hZGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRlbXBsYXRlTG9hZGVyKCRpbnRlcnBvbGF0ZSwgdGVtcGxhdGVTZWxlY3RvclZhbHVlLCBvYmplY3RVdGlsaXR5KSB7XHJcbiAgICAgICAgdGhpcy4kaW50ZXJwb2xhdGUgPSAkaW50ZXJwb2xhdGU7XHJcbiAgICAgICAgdGhpcy50ZW1wbGF0ZVNlbGVjdG9yVmFsdWUgPSB0ZW1wbGF0ZVNlbGVjdG9yVmFsdWU7XHJcbiAgICAgICAgdGhpcy5vYmplY3RVdGlsaXR5ID0gb2JqZWN0VXRpbGl0eTtcclxuICAgIH1cclxuICAgIFRlbXBsYXRlTG9hZGVyLnByb3RvdHlwZS5sb2FkVGVtcGxhdGVzID0gZnVuY3Rpb24gKHRyYW5zY2x1ZGUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlczoge30sXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHRyYW5zY2x1c2lvblNjb3BlOiBudWxsLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgLy8gTG9hZCB0ZW1wbGF0ZXMgZnJvbSB0aGUgRE9NXHJcbiAgICAgICAgdHJhbnNjbHVkZShmdW5jdGlvbiAoY2xvbmUsIHRyYW5zY2x1c2lvblNjb3BlKSB7XHJcbiAgICAgICAgICAgIHZhciB0ZW1wbGF0ZXMgPSBjbG9uZS5maWx0ZXIoX3RoaXMudGVtcGxhdGVTZWxlY3RvclZhbHVlKTtcclxuICAgICAgICAgICAgdGVtcGxhdGVzLmVhY2goZnVuY3Rpb24gKGluZGV4LCB0ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlRWxlbWVudCA9IGFuZ3VsYXIuZWxlbWVudCh0ZW1wbGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGVIdG1sID0gdGVtcGxhdGVFbGVtZW50Lmh0bWwoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0cmlnZ2VyQXR0cmlidXRlID0gdGVtcGxhdGVFbGVtZW50LmF0dHIoJ3doZW4tc2VsZWN0b3InKTtcclxuICAgICAgICAgICAgICAgIGlmICghX3RoaXMub2JqZWN0VXRpbGl0eS5pc051bGxPcldoaXRlc3BhY2UodHJpZ2dlckF0dHJpYnV0ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJpZ2dlciA9IF90aGlzLiRpbnRlcnBvbGF0ZSh0cmlnZ2VyQXR0cmlidXRlKSh0cmFuc2NsdXNpb25TY29wZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnRlbXBsYXRlc1t0cmlnZ2VyXSA9IHRlbXBsYXRlSHRtbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBpc0RlZmF1bHQgPSB0ZW1wbGF0ZUVsZW1lbnQuYXR0cignZGVmYXVsdCcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfLmlzVW5kZWZpbmVkKGlzRGVmYXVsdCkgJiYgaXNEZWZhdWx0LnRvTG93ZXJDYXNlKCkgIT09ICdmYWxzZScpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZGVmYXVsdCA9IHRlbXBsYXRlSHRtbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJlc3VsdC50cmFuc2NsdXNpb25TY29wZSA9IHRyYW5zY2x1c2lvblNjb3BlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgVGVtcGxhdGVMb2FkZXIuJGluamVjdCA9IFsnJGludGVycG9sYXRlJywgJ3RlbXBsYXRlU2VsZWN0b3JWYWx1ZScsIF9fb2JqZWN0LnNlcnZpY2VOYW1lXTtcclxuICAgIHJldHVybiBUZW1wbGF0ZUxvYWRlcjtcclxufSgpKTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbX19vYmplY3QubW9kdWxlTmFtZV0pXHJcbiAgICAudmFsdWUoJ3RlbXBsYXRlU2VsZWN0b3JWYWx1ZScsICd0ZW1wbGF0ZScpXHJcbiAgICAuc2VydmljZShleHBvcnRzLnNlcnZpY2VOYW1lLCBUZW1wbGF0ZUxvYWRlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWRHVnRjR3hoZEdWTWIyRmtaWEl1YzJWeWRtbGpaUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkluUmxiWEJzWVhSbFRHOWhaR1Z5TG5ObGNuWnBZMlV1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNLMFJCUVN0RU8wRkJSUzlFTEZsQlFWa3NRMEZCUXp0QlFVVmlMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlEyNURMRWxCUVZrc1EwRkJReXhYUVVGTkxGRkJRVkVzUTBGQlF5eERRVUZCTzBGQlJUVkNMRFpEUVVGNVFpdzRRa0ZCT0VJc1EwRkJReXhEUVVGQk8wRkJRM2hFTEVsQlFVOHNVVUZCVVN4SFFVRkhMSFZEUVVGUkxFTkJRVU1zVFVGQlRTeERRVUZETzBGQlJYWkNMR3RDUVVGVkxFZEJRVmNzYzBOQlFYTkRMRU5CUVVNN1FVRkROVVFzYlVKQlFWY3NSMEZCVnl4blFrRkJaMElzUTBGQlF6dEJRVmxzUkR0SlFVVkRMSGRDUVVGdlFpeFpRVUY1UXl4RlFVTnNSQ3h4UWtGQmNVSXNSVUZEY2tJc1lVRkJjME03VVVGR04wSXNhVUpCUVZrc1IwRkJXaXhaUVVGWkxFTkJRVFpDTzFGQlEyeEVMREJDUVVGeFFpeEhRVUZ5UWl4eFFrRkJjVUlzUTBGQlFUdFJRVU55UWl4clFrRkJZU3hIUVVGaUxHRkJRV0VzUTBGQmVVSTdTVUZCU1N4RFFVRkRPMGxCUlhSRUxITkRRVUZoTEVkQlFXSXNWVUZCWXl4VlFVRjFRenRSUVVGeVJDeHBRa0ZwUTBNN1VVRm9RMEVzU1VGQlNTeE5RVUZOTEVkQlFXMUNPMWxCUXpWQ0xGTkJRVk1zUlVGQlJTeEZRVUZGTzFsQlEySXNUMEZCVHl4RlFVRkZMRWxCUVVrN1dVRkRZaXhwUWtGQmFVSXNSVUZCUlN4SlFVRkpPMU5CUTNaQ0xFTkJRVU03VVVGRlJpdzRRa0ZCT0VJN1VVRkRPVUlzVlVGQlZTeERRVUZETEZWQlFVTXNTMEZCSzBJc1JVRkRlRU1zYVVKQlFXbERPMWxCUTI1RExFbEJRVWtzVTBGQlV5eEhRVUZYTEV0QlFVc3NRMEZCUXl4TlFVRk5MRU5CUVVNc1MwRkJTU3hEUVVGRExIRkNRVUZ4UWl4RFFVRkRMRU5CUVVNN1dVRkZha1VzVTBGQlV5eERRVUZETEVsQlFVa3NRMEZCUXl4VlFVRkRMRXRCUVdFc1JVRkRla0lzVVVGQmFVSTdaMEpCUTNCQ0xFbEJRVWtzWlVGQlpTeEhRVUUyUWl4UFFVRlBMRU5CUVVNc1QwRkJUeXhEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzJkQ1FVTXhSU3hKUVVGSkxGbEJRVmtzUjBGQlZ5eGxRVUZsTEVOQlFVTXNTVUZCU1N4RlFVRkZMRU5CUVVNN1owSkJSV3hFTEVsQlFVa3NaMEpCUVdkQ0xFZEJRVmNzWlVGQlpTeERRVUZETEVsQlFVa3NRMEZCUXl4bFFVRmxMRU5CUVVNc1EwRkJRenRuUWtGRGNrVXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhMUVVGSkxFTkJRVU1zWVVGQllTeERRVUZETEd0Q1FVRnJRaXhEUVVGRExHZENRVUZuUWl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8yOUNRVU01UkN4SlFVRkpMRTlCUVU4c1IwRkJWeXhMUVVGSkxFTkJRVU1zV1VGQldTeERRVUZETEdkQ1FVRm5RaXhEUVVGRExFTkJRVU1zYVVKQlFXbENMRU5CUVVNc1EwRkJRenR2UWtGRE4wVXNUVUZCVFN4RFFVRkRMRk5CUVZNc1EwRkJReXhQUVVGUExFTkJRVU1zUjBGQlJ5eFpRVUZaTEVOQlFVTTdaMEpCUXpGRExFTkJRVU03WjBKQlJVUXNTVUZCU1N4VFFVRlRMRWRCUVZjc1pVRkJaU3hEUVVGRExFbEJRVWtzUTBGQlF5eFRRVUZUTEVOQlFVTXNRMEZCUXp0blFrRkRlRVFzUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1YwRkJWeXhEUVVGRExGTkJRVk1zUTBGQlF5eEpRVUZKTEZOQlFWTXNRMEZCUXl4WFFVRlhMRVZCUVVVc1MwRkJTeXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETzI5Q1FVTjBSU3hOUVVGTkxFTkJRVU1zVDBGQlR5eEhRVUZITEZsQlFWa3NRMEZCUXp0blFrRkRMMElzUTBGQlF6dFpRVU5HTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUlVnc1RVRkJUU3hEUVVGRExHbENRVUZwUWl4SFFVRkhMR2xDUVVGcFFpeERRVUZETzFGQlF6bERMRU5CUVVNc1EwRkJReXhEUVVGRE8xRkJSVWdzVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXp0SlFVTm1MRU5CUVVNN1NVRjBRMDBzYzBKQlFVOHNSMEZCWVN4RFFVRkRMR05CUVdNc1JVRkJSU3gxUWtGQmRVSXNSVUZCUlN4UlFVRlJMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU03U1VGMVF6VkdMSEZDUVVGRE8wRkJRVVFzUTBGQlF5eEJRWGhEUkN4SlFYZERRenRCUVVWRUxFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNhMEpCUVZVc1JVRkJSU3hEUVVGRExGRkJRVkVzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXp0TFFVTXZReXhMUVVGTExFTkJRVU1zZFVKQlFYVkNMRVZCUVVVc1ZVRkJWU3hEUVVGRE8wdEJRekZETEU5QlFVOHNRMEZCUXl4dFFrRkJWeXhGUVVGRkxHTkJRV01zUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2Uvc2VydmljZXMvdGVtcGxhdGVMb2FkZXIvdGVtcGxhdGVMb2FkZXIuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMubGF6eUxvYWQnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxMYXp5TG9hZCc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnTGF6eUxvYWRDb250cm9sbGVyJztcclxudmFyIExhenlMb2FkQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBMYXp5TG9hZENvbnRyb2xsZXIoJHNjb3BlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLmluaXQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgdW5iaW5kID0gJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zaG93OyB9LCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5pbml0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHVuYmluZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBMYXp5TG9hZENvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJ107XHJcbiAgICByZXR1cm4gTGF6eUxvYWRDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLkxhenlMb2FkQ29udHJvbGxlciA9IExhenlMb2FkQ29udHJvbGxlcjtcclxudmFyIGxhenlMb2FkID0ge1xyXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgIHRlbXBsYXRlOiBcIlxcblxcdFxcdDxkaXYgbmctaWY9XFxcImxhenlMb2FkLmluaXRcXFwiPlxcblxcdFxcdFxcdDxkaXYgbmctc2hvdz1cXFwibGF6eUxvYWQuc2hvd1xcXCI+XFxuXFx0XFx0XFx0XFx0PGRpdiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcblxcdFxcdFxcdDwvZGl2PlxcblxcdFxcdDwvZGl2PlxcblxcdFwiLFxyXG4gICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgIGNvbnRyb2xsZXJBczogJ2xhenlMb2FkJyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgc2hvdzogJz0nLFxyXG4gICAgfSxcclxufTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBsYXp5TG9hZClcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIExhenlMb2FkQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWJHRjZlVXh2WVdRdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUpzWVhwNVRHOWhaQzUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdRVUZGWWl4SlFVRlpMRTlCUVU4c1YwRkJUU3hUUVVGVExFTkJRVU1zUTBGQlFUdEJRVVY0UWl4clFrRkJWU3hIUVVGWExESkNRVUV5UWl4RFFVRkRPMEZCUTJwRUxIRkNRVUZoTEVkQlFWY3NXVUZCV1N4RFFVRkRPMEZCUTNKRExITkNRVUZqTEVkQlFWY3NiMEpCUVc5Q0xFTkJRVU03UVVGRmVrUTdTVUZMUXl3MFFrRkJXU3hOUVVGelFqdFJRVXh1UXl4cFFrRmhRenRSUVZoQkxGTkJRVWtzUjBGQldTeExRVUZMTEVOQlFVTTdVVUZKY2tJc1NVRkJTU3hOUVVGTkxFZEJRV0VzVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4alFVRnBRaXhOUVVGTkxFTkJRVU1zUzBGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hWUVVGRExFdEJRV003V1VGRGVrWXNSVUZCUlN4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zUTBGQlF6dG5Ra0ZEV0N4TFFVRkpMRU5CUVVNc1NVRkJTU3hIUVVGSExFbEJRVWtzUTBGQlF6dG5Ra0ZEYWtJc1RVRkJUU3hGUVVGRkxFTkJRVU03V1VGRFZpeERRVUZETzFGQlEwWXNRMEZCUXl4RFFVRkRMRU5CUVVNN1NVRkRTaXhEUVVGRE8wbEJVazBzTUVKQlFVOHNSMEZCWVN4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8wbEJVM1pETEhsQ1FVRkRPMEZCUVVRc1EwRkJReXhCUVdKRUxFbEJZVU03UVVGaVdTd3dRa0ZCYTBJc2NVSkJZVGxDTEVOQlFVRTdRVUZGUkN4SlFVRkpMRkZCUVZFc1IwRkJPRUk3U1VGRGVrTXNWVUZCVlN4RlFVRkZMRWxCUVVrN1NVRkRhRUlzVVVGQlVTeEZRVUZGTERaSlFVMVVPMGxCUTBRc1ZVRkJWU3hGUVVGRkxITkNRVUZqTzBsQlF6RkNMRmxCUVZrc1JVRkJSU3hWUVVGVk8wbEJRM2hDTEZGQlFWRXNSVUZCUlR0UlFVTlVMRWxCUVVrc1JVRkJSU3hIUVVGSE8wdEJRMVE3UTBGRFJDeERRVUZETzBGQlJVWXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVWQlFVVXNRMEZCUXp0TFFVTTFRaXhUUVVGVExFTkJRVU1zY1VKQlFXRXNSVUZCUlN4UlFVRlJMRU5CUVVNN1MwRkRiRU1zVlVGQlZTeERRVUZETEhOQ1FVRmpMRVZCUVVVc2EwSkJRV3RDTEVOQlFVTXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9sYXp5TG9hZC9sYXp5TG9hZC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19wcm9taXNlID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnByb21pc2U7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbnZhciBidXR0b25fMSA9IHJlcXVpcmUoJy4uL2J1dHRvbi9idXR0b24nKTtcclxudmFyIGJ1dHRvbkFzeW5jXzEgPSByZXF1aXJlKCcuLi9idXR0b25Bc3luYy9idXR0b25Bc3luYycpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5sb25nQ2xpY2tCdXR0b24nO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxMb25nQ2xpY2tCdXR0b24nO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ0xvbmdDbGlja0J1dHRvbkNvbnRyb2xsZXInO1xyXG52YXIgTG9uZ0NsaWNrQnV0dG9uQ29udHJvbGxlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoTG9uZ0NsaWNrQnV0dG9uQ29udHJvbGxlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIExvbmdDbGlja0J1dHRvbkNvbnRyb2xsZXIoJHNjb3BlLCAkaW50ZXJ2YWwsICR0aW1lb3V0LCBvYmplY3RVdGlsaXR5LCBwcm9taXNlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCBwcm9taXNlKTtcclxuICAgICAgICB0aGlzLiRpbnRlcnZhbCA9ICRpbnRlcnZhbDtcclxuICAgICAgICB0aGlzLiR0aW1lb3V0ID0gJHRpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy5vYmplY3RVdGlsaXR5ID0gb2JqZWN0VXRpbGl0eTtcclxuICAgICAgICB0aGlzLmludGVydmFsID0gMjU7XHJcbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IDE1MDA7XHJcbiAgICAgICAgdGhpcy5idXR0b25UZXh0ID0gdGhpcy50ZXh0O1xyXG4gICAgICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuYnV0dG9uVGV4dDsgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy53aWR0aCA9ICQoJyNhY3Rpb25CdXR0b24nKS5vdXRlcldpZHRoKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgTG9uZ0NsaWNrQnV0dG9uQ29udHJvbGxlci5wcm90b3R5cGUuc3RhcnRBY3Rpb24gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUgfHwgdGhpcy5idXN5KSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hY3Rpb25Qcm9ncmVzcyA9IDA7XHJcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYWN0aW9uSW50ZXJ2YWwgPSB0aGlzLiRpbnRlcnZhbChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmFjdGlvblByb2dyZXNzICs9IF90aGlzLmludGVydmFsO1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuYWN0aW9uUHJvZ3Jlc3MgPj0gX3RoaXMuZHVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmNsZWFudXAoKTtcclxuICAgICAgICAgICAgICAgIF90aGlzLmJ1dHRvblRleHQgPSBfdGhpcy50ZXh0O1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudHJpZ2dlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5pbnRlcnZhbCk7XHJcbiAgICB9O1xyXG4gICAgTG9uZ0NsaWNrQnV0dG9uQ29udHJvbGxlci5wcm90b3R5cGUuc3RvcEFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aW9uUHJvZ3Jlc3MgPCB0aGlzLmR1cmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndhcm4oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmNsZWFudXAoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgTG9uZ0NsaWNrQnV0dG9uQ29udHJvbGxlci5wcm90b3R5cGUuY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLiRpbnRlcnZhbC5jYW5jZWwodGhpcy5hY3Rpb25JbnRlcnZhbCk7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25Qcm9ncmVzcyA9IDA7XHJcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH07XHJcbiAgICBMb25nQ2xpY2tCdXR0b25Db250cm9sbGVyLnByb3RvdHlwZS53YXJuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLm9iamVjdFV0aWxpdHkuaXNOdWxsT3JFbXB0eSh0aGlzLm9uU2hvcnRDbGlja1RleHQpID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvblRleHQgPSB0aGlzLm9uU2hvcnRDbGlja1RleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIExvbmdDbGlja0J1dHRvbkNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRpbnRlcnZhbCcsICckdGltZW91dCcsIF9fb2JqZWN0LnNlcnZpY2VOYW1lLCBfX3Byb21pc2Uuc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIExvbmdDbGlja0J1dHRvbkNvbnRyb2xsZXI7XHJcbn0oYnV0dG9uQXN5bmNfMS5CdXR0b25Bc3luY0NvbnRyb2xsZXIpKTtcclxuZXhwb3J0cy5Mb25nQ2xpY2tCdXR0b25Db250cm9sbGVyID0gTG9uZ0NsaWNrQnV0dG9uQ29udHJvbGxlcjtcclxudmFyIGxvbmdDbGlja0J1dHRvbiA9IGJ1dHRvbl8xLmJ1aWxkQnV0dG9uKHtcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL2xvbmdDbGlja0J1dHRvbi5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICB0ZXh0OiAnQCcsXHJcbiAgICAgICAgb25TaG9ydENsaWNrVGV4dDogJ0AnLFxyXG4gICAgICAgIGljb246ICdAJyxcclxuICAgICAgICBidXN5OiAnPD8nLFxyXG4gICAgICAgIHJpZ2h0QWxpZ25lZDogJzw/JyxcclxuICAgIH0sXHJcbn0pO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtfX29iamVjdC5tb2R1bGVOYW1lXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBsb25nQ2xpY2tCdXR0b24pXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBMb25nQ2xpY2tCdXR0b25Db250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYkc5dVowTnNhV05yUW5WMGRHOXVMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWJHOXVaME5zYVdOclFuVjBkRzl1TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMREJFUVVFd1JEdEJRVVV4UkN4WlFVRlpMRU5CUVVNN096czdPenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUTI1RExFbEJRVmtzUTBGQlF5eFhRVUZOTEZGQlFWRXNRMEZCUXl4RFFVRkJPMEZCUlRWQ0xEWkRRVUY1UWl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlEzaEVMRWxCUVU4c1UwRkJVeXhIUVVGSExIVkRRVUZSTEVOQlFVTXNUMEZCVHl4RFFVRkRPMEZCUTNCRExFbEJRVThzVVVGQlVTeEhRVUZITEhWRFFVRlJMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJSV3hETEhWQ1FVRTBRaXhyUWtGQmEwSXNRMEZCUXl4RFFVRkJPMEZCUXk5RExEUkNRVUZ6UXl3MFFrRkJORUlzUTBGQlF5eERRVUZCTzBGQlJYaEVMR3RDUVVGVkxFZEJRVmNzYTBOQlFXdERMRU5CUVVNN1FVRkRlRVFzY1VKQlFXRXNSMEZCVnl4dFFrRkJiVUlzUTBGQlF6dEJRVU0xUXl4elFrRkJZeXhIUVVGWExESkNRVUV5UWl4RFFVRkRPMEZCUldoRk8wbEJRU3RETERaRFFVRnhRanRKUVdWdVJTeHRRMEZCV1N4TlFVRnpRaXhGUVVOMFFpeFRRVUZ0UXl4RlFVTnVReXhSUVVGcFF5eEZRVU5xUXl4aFFVRnpReXhGUVVNNVF5eFBRVUZyUXp0UlFXNUNka01zYVVKQmNVVkRPMUZCYWtSRExHdENRVUZOTEU5QlFVOHNRMEZCUXl4RFFVRkRPMUZCU2tvc1kwRkJVeXhIUVVGVUxGTkJRVk1zUTBGQk1FSTdVVUZEYmtNc1lVRkJVU3hIUVVGU0xGRkJRVkVzUTBGQmVVSTdVVUZEYWtNc2EwSkJRV0VzUjBGQllpeGhRVUZoTEVOQlFYbENPMUZCV2pGRExHRkJRVkVzUjBGQlZ5eEZRVUZGTEVOQlFVTTdVVUZET1VJc1lVRkJVU3hIUVVGWExFbEJRVWtzUTBGQlF6dFJRV04yUWl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hIUVVGSExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTTdVVUZGTlVJc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF5eGpRVUZuUWl4TlFVRk5MRU5CUVVNc1MwRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNSVUZCUlR0WlFVTjRSQ3hSUVVGUkxFTkJRVU03WjBKQlExSXNTMEZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhEUVVGRExFTkJRVU1zWlVGQlpTeERRVUZETEVOQlFVTXNWVUZCVlN4RlFVRkZMRU5CUVVNN1dVRkRPVU1zUTBGQlF5eERRVUZETEVOQlFVTTdVVUZEU2l4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGRlJDd3JRMEZCVnl4SFFVRllPMUZCUVVFc2FVSkJaMEpETzFGQlprRXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzU1VGQlNTeEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVNNVFpeE5RVUZOTEVOQlFVTTdVVUZEVWl4RFFVRkRPMUZCUlVRc1NVRkJTU3hEUVVGRExHTkJRV01zUjBGQlJ5eERRVUZETEVOQlFVTTdVVUZEZUVJc1NVRkJTU3hEUVVGRExFMUJRVTBzUjBGQlJ5eEpRVUZKTEVOQlFVTTdVVUZGYmtJc1NVRkJTU3hEUVVGRExHTkJRV01zUjBGQlJ5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRPMWxCUTNCRExFdEJRVWtzUTBGQlF5eGpRVUZqTEVsQlFVa3NTMEZCU1N4RFFVRkRMRkZCUVZFc1EwRkJRenRaUVVOeVF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4TFFVRkpMRU5CUVVNc1kwRkJZeXhKUVVGSkxFdEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNRMEZCUXl4RFFVRkRPMmRDUVVNeFF5eExRVUZKTEVOQlFVTXNUMEZCVHl4RlFVRkZMRU5CUVVNN1owSkJRMllzUzBGQlNTeERRVUZETEZWQlFWVXNSMEZCUnl4TFFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRE8yZENRVU0xUWl4TFFVRkpMRU5CUVVNc1QwRkJUeXhGUVVGRkxFTkJRVU03V1VGRGFFSXNRMEZCUXp0UlFVTkdMRU5CUVVNc1JVRkJSU3hKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTTdTVUZEYmtJc1EwRkJRenRKUVVWRUxEaERRVUZWTEVkQlFWWTdVVUZEUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTnFRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNZMEZCWXl4SFFVRkhMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTjZReXhKUVVGSkxFTkJRVU1zU1VGQlNTeEZRVUZGTEVOQlFVTTdXVUZEWWl4RFFVRkRPMWxCUlVRc1NVRkJTU3hEUVVGRExFOUJRVThzUlVGQlJTeERRVUZETzFGQlEyaENMRU5CUVVNN1NVRkRSaXhEUVVGRE8wbEJSVThzTWtOQlFVOHNSMEZCWmp0UlFVTkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4alFVRmpMRU5CUVVNc1EwRkJRenRSUVVNelF5eEpRVUZKTEVOQlFVTXNZMEZCWXl4SFFVRkhMRU5CUVVNc1EwRkJRenRSUVVONFFpeEpRVUZKTEVOQlFVTXNUVUZCVFN4SFFVRkhMRXRCUVVzc1EwRkJRenRKUVVOeVFpeERRVUZETzBsQlJVOHNkME5CUVVrc1IwRkJXanRSUVVORExFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1lVRkJZU3hEUVVGRExFbEJRVWtzUTBGQlF5eG5Ra0ZCWjBJc1EwRkJReXhMUVVGTExFdEJRVXNzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEZGtVc1NVRkJTU3hEUVVGRExGVkJRVlVzUjBGQlJ5eEpRVUZKTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU03VVVGRGVrTXNRMEZCUXp0SlFVTkdMRU5CUVVNN1NVRjBSRTBzYVVOQlFVOHNSMEZCWVN4RFFVRkRMRkZCUVZFc1JVRkJSU3hYUVVGWExFVkJRVVVzVlVGQlZTeEZRVUZGTEZGQlFWRXNRMEZCUXl4WFFVRlhMRVZCUVVVc1UwRkJVeXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETzBsQmRVUTNSeXhuUTBGQlF6dEJRVUZFTEVOQlFVTXNRVUZ5UlVRc1EwRkJLME1zYlVOQlFYRkNMRWRCY1VWdVJUdEJRWEpGV1N4cFEwRkJlVUlzTkVKQmNVVnlReXhEUVVGQk8wRkJSVVFzU1VGQlNTeGxRVUZsTEVkQlFUaENMRzlDUVVGWExFTkJRVU03U1VGRE5VUXNVVUZCVVN4RlFVRkZMRTlCUVU4c1EwRkJReXgzUWtGQmQwSXNRMEZCUXp0SlFVTXpReXhWUVVGVkxFVkJRVVVzYzBKQlFXTTdTVUZETVVJc1VVRkJVU3hGUVVGRk8xRkJRMVFzU1VGQlNTeEZRVUZGTEVkQlFVYzdVVUZEVkN4blFrRkJaMElzUlVGQlJTeEhRVUZITzFGQlEzSkNMRWxCUVVrc1JVRkJSU3hIUVVGSE8xRkJRMVFzU1VGQlNTeEZRVUZGTEVsQlFVazdVVUZEVml4WlFVRlpMRVZCUVVVc1NVRkJTVHRMUVVOc1FqdERRVU5FTEVOQlFVTXNRMEZCUXp0QlFVVklMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFWVXNSVUZCUlN4RFFVRkRMRkZCUVZFc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dExRVU12UXl4VFFVRlRMRU5CUVVNc2NVSkJRV0VzUlVGQlJTeGxRVUZsTEVOQlFVTTdTMEZEZWtNc1ZVRkJWU3hEUVVGRExITkNRVUZqTEVWQlFVVXNlVUpCUVhsQ0xFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvbG9uZ0NsaWNrQnV0dG9uL2xvbmdDbGlja0J1dHRvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDEzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxzcGFuIGNsYXNzPVxcXCJsb25nLWNsaWNrLWJ1dHRvblxcXCI+XFxyXFxuXFx0PGJ1dHRvbiBpZD1cXFwiYWN0aW9uQnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi17e2J1dHRvbi50eXBlfX0ge3tidXR0b24uY29uZmlndXJlZFNpemV9fVxcXCIgbmctbW91c2Vkb3duPVxcXCJidXR0b24uc3RhcnRBY3Rpb24oKVxcXCIgbmctbW91c2VsZWF2ZT1cXFwiYnV0dG9uLnN0b3BBY3Rpb24oKVxcXCIgbmctbW91c2V1cD1cXFwiYnV0dG9uLnN0b3BBY3Rpb24oKVxcXCIgbmctZGlzYWJsZWQ9XFxcImJ1dHRvbi5idXN5IHx8IGJ1dHRvbi5uZ0Rpc2FibGVkXFxcIj5cXHJcXG5cXHRcXHQ8cmwtYnVzeSBsb2FkaW5nPVxcXCJidXR0b24uYnVzeVxcXCIgbmctaWY9XFxcImJ1dHRvbi5yaWdodEFsaWduZWRcXFwiPjwvcmwtYnVzeT5cXHJcXG5cXHRcXHQ8aSBuZy1zaG93PVxcXCJidXR0b24uaWNvbiAhPSBudWxsXFxcIiBjbGFzcz1cXFwiZmEgZmEte3tidXR0b24uaWNvbn19XFxcIj48L2k+IHt7YnV0dG9uLmJ1dHRvblRleHR9fVxcclxcblxcdFxcdDxybC1idXN5IGxvYWRpbmc9XFxcImJ1dHRvbi5idXN5XFxcIiBuZy1pZj1cXFwiIWJ1dHRvbi5yaWdodEFsaWduZWRcXFwiPjwvcmwtYnVzeT5cXHJcXG5cXHQ8L2J1dHRvbj5cXHJcXG5cXHQ8cmwtcmF0aW5nLWJhciBuZy1pZj1cXFwiYnV0dG9uLmFjdGl2ZVxcXCIgd2lkdGg9XFxcImJ1dHRvbi53aWR0aFxcXCIgaGVpZ2h0PVxcXCI1XFxcIiBtaW49XFxcIjBcXFwiIG1heD1cXFwiYnV0dG9uLmR1cmF0aW9uXFxcIlxcclxcblxcdFxcdFxcdFxcdHZhbHVlPVxcXCJidXR0b24uYWN0aW9uUHJvZ3Jlc3NcXFwiIGJhY2tncm91bmQ9XFxcInRyYW5zcGFyZW50XFxcIj48L3JsLXJhdGluZy1iYXI+XFxyXFxuPC9zcGFuPlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL2xvbmdDbGlja0J1dHRvbi9sb25nQ2xpY2tCdXR0b24uaHRtbFxuICoqIG1vZHVsZSBpZCA9IDEzNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmICghZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbnZhciBqcXVlcnlfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvanF1ZXJ5L2pxdWVyeS5zZXJ2aWNlJyk7XHJcbnZhciBtZXNzYWdlTG9nX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4vbWVzc2FnZUxvZy5zZXJ2aWNlJyk7XHJcbnZhciBtZXNzYWdlTG9nX2RpcmVjdGl2ZV8xID0gcmVxdWlyZSgnLi9tZXNzYWdlTG9nLmRpcmVjdGl2ZScpO1xyXG52YXIgZWRpdGFibGVNZXNzYWdlTG9nXzEgPSByZXF1aXJlKCcuL2VkaXRhYmxlTWVzc2FnZUxvZycpO1xyXG52YXIgY29tcG9uZW50U2VydmljZXMgPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9zZXJ2aWNlcy5tb2R1bGUnKTtcclxudmFyIF9fZGlhbG9nID0gY29tcG9uZW50U2VydmljZXMuZGlhbG9nO1xyXG52YXIgdGVtcGxhdGVMb2FkZXJfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvdGVtcGxhdGVMb2FkZXIvdGVtcGxhdGVMb2FkZXIuc2VydmljZScpO1xyXG5fX2V4cG9ydChyZXF1aXJlKCcuL21lc3NhZ2VMb2cuc2VydmljZScpKTtcclxuX19leHBvcnQocmVxdWlyZSgnLi9tZXNzYWdlTG9nLmRpcmVjdGl2ZScpKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMubWVzc2FnZUxvZyc7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW19fb2JqZWN0Lm1vZHVsZU5hbWUsIGpxdWVyeV9zZXJ2aWNlXzEubW9kdWxlTmFtZSwgdGVtcGxhdGVMb2FkZXJfc2VydmljZV8xLm1vZHVsZU5hbWUsIF9fZGlhbG9nLm1vZHVsZU5hbWVdKVxyXG4gICAgLmZhY3RvcnkobWVzc2FnZUxvZ19zZXJ2aWNlXzEuZmFjdG9yeU5hbWUsIG1lc3NhZ2VMb2dfc2VydmljZV8xLm1lc3NhZ2VMb2dGYWN0b3J5KVxyXG4gICAgLmRpcmVjdGl2ZShtZXNzYWdlTG9nX2RpcmVjdGl2ZV8xLmRpcmVjdGl2ZU5hbWUsIG1lc3NhZ2VMb2dfZGlyZWN0aXZlXzEubWVzc2FnZUxvZylcclxuICAgIC5jb250cm9sbGVyKG1lc3NhZ2VMb2dfZGlyZWN0aXZlXzEuY29udHJvbGxlck5hbWUsIG1lc3NhZ2VMb2dfZGlyZWN0aXZlXzEuTWVzc2FnZUxvZ0NvbnRyb2xsZXIpXHJcbiAgICAuZGlyZWN0aXZlKGVkaXRhYmxlTWVzc2FnZUxvZ18xLmRpcmVjdGl2ZU5hbWUsIGVkaXRhYmxlTWVzc2FnZUxvZ18xLmVkaXRhYmxlTWVzc2FnZUxvZylcclxuICAgIC5jb250cm9sbGVyKGVkaXRhYmxlTWVzc2FnZUxvZ18xLmNvbnRyb2xsZXJOYW1lLCBlZGl0YWJsZU1lc3NhZ2VMb2dfMS5FZGl0YWJsZU1lc3NhZ2VMb2dDb250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYldWemMyRm5aVXh2Wnk1dGIyUjFiR1V1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SnRaWE56WVdkbFRHOW5MbTF2WkhWc1pTNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4WlFVRlpMRU5CUVVNN096czdRVUZGWWl4SlFVRlpMRTlCUVU4c1YwRkJUU3hUUVVGVExFTkJRVU1zUTBGQlFUdEJRVVZ1UXl3MlEwRkJlVUlzT0VKQlFUaENMRU5CUVVNc1EwRkJRVHRCUVVONFJDeEpRVUZQTEZGQlFWRXNSMEZCUnl4MVEwRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF6dEJRVVZzUXl3clFrRkJLME1zYzBOQlFYTkRMRU5CUVVNc1EwRkJRVHRCUVVWMFJpeHRRMEZCSzBNc2MwSkJRWE5DTEVOQlFVTXNRMEZCUVR0QlFVTjBSU3h4UTBGQmIwZ3NkMEpCUVhkQ0xFTkJRVU1zUTBGQlFUdEJRVU0zU1N4dFEwRkxUeXh6UWtGQmMwSXNRMEZCUXl4RFFVRkJPMEZCUlRsQ0xFbEJRVmtzYVVKQlFXbENMRmRCUVUwc1owTkJRV2RETEVOQlFVTXNRMEZCUVR0QlFVTndSU3hKUVVGUExGRkJRVkVzUjBGQlJ5eHBRa0ZCYVVJc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRk0wTXNkVU5CUVcxRUxITkVRVUZ6UkN4RFFVRkRMRU5CUVVFN1FVRkZNVWNzYVVKQlFXTXNjMEpCUVhOQ0xFTkJRVU1zUlVGQlFUdEJRVU55UXl4cFFrRkJZeXgzUWtGQmQwSXNRMEZCUXl4RlFVRkJPMEZCUlRWQ0xHdENRVUZWTEVkQlFWY3NOa0pCUVRaQ0xFTkJRVU03UVVGRk9VUXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVOQlFVTXNVVUZCVVN4RFFVRkRMRlZCUVZVc1JVRkJSU3d5UWtGQlowSXNSVUZCUlN4dFEwRkJiMElzUlVGQlJTeFJRVUZSTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNN1MwRkROVWNzVDBGQlR5eERRVUZETEdkRFFVRlhMRVZCUVVVc2MwTkJRV2xDTEVOQlFVTTdTMEZEZGtNc1UwRkJVeXhEUVVGRExHOURRVUZoTEVWQlFVVXNhVU5CUVZVc1EwRkJRenRMUVVOd1F5eFZRVUZWTEVOQlFVTXNjVU5CUVdNc1JVRkJSU3d5UTBGQmIwSXNRMEZCUXp0TFFVTm9SQ3hUUVVGVExFTkJRVU1zYTBOQlFUaENMRVZCUVVVc2RVTkJRV3RDTEVOQlFVTTdTMEZETjBRc1ZVRkJWU3hEUVVGRExHMURRVUZuUXl4RlFVRkZMR2xFUVVFMFFpeERRVUZETEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL21lc3NhZ2VMb2cvbWVzc2FnZUxvZy5tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuZXhwb3J0cy5mYWN0b3J5TmFtZSA9ICdtZXNzYWdlTG9nJztcclxuZXhwb3J0cy5kZWZhdWx0UGFnZVNpemUgPSAxMDtcclxudmFyIE1lc3NhZ2VMb2cgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTWVzc2FnZUxvZygpIHtcclxuICAgICAgICB0aGlzLmN1cnJlbnRTdGFydGluZ01lc3NhZ2UgPSAwO1xyXG4gICAgICAgIHRoaXMuX2hhc0ZvcndhcmRNZXNzYWdlcyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2hhc0JhY2t3YXJkTWVzc2FnZXMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9wYWdlU2l6ZSA9IGV4cG9ydHMuZGVmYXVsdFBhZ2VTaXplO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc3NhZ2VMb2cucHJvdG90eXBlLCBcInBhZ2VTaXplXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhZ2VTaXplO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyogdHNsaW50OmRpc2FibGUgKi9cclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9wYWdlU2l6ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUN1cnJlbnRQYWdlKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzc2FnZUxvZy5wcm90b3R5cGUsIFwiaGFzRm9yd2FyZE1lc3NhZ2VzXCIsIHtcclxuICAgICAgICAvKiB0c2xpbnQ6ZW5hYmxlICovXHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oYXNGb3J3YXJkTWVzc2FnZXM7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoTWVzc2FnZUxvZy5wcm90b3R5cGUsIFwiaGFzQmFja3dhcmRNZXNzYWdlc1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oYXNCYWNrd2FyZE1lc3NhZ2VzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KE1lc3NhZ2VMb2cucHJvdG90eXBlLCBcImRhdGFTZXJ2aWNlXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RhdGFTZXJ2aWNlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLyogdHNsaW50OmRpc2FibGUgKi9cclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLl9kYXRhU2VydmljZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlTWVzc2FnZXMgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDdXJyZW50UGFnZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICAvKiB0c2xpbnQ6ZW5hYmxlICovXHJcbiAgICBNZXNzYWdlTG9nLnByb3RvdHlwZS5hZGRNZXNzYWdlID0gZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLnNhdmVNZXNzYWdlKG1lc3NhZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5nZXRUb3BQYWdlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVzc2FnZUxvZy5wcm90b3R5cGUudXBkYXRlTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS51cGRhdGVNZXNzYWdlKG1lc3NhZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5nZXRUb3BQYWdlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVzc2FnZUxvZy5wcm90b3R5cGUuZGVsZXRlTWVzc2FnZSA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5kYXRhU2VydmljZS5kZWxldGVNZXNzYWdlKG1lc3NhZ2UpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTWVzc2FnZUxvZy5wcm90b3R5cGUuZ2V0TmV4dFBhZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhc0ZvcndhcmRNZXNzYWdlcykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY3VycmVudFN0YXJ0aW5nTWVzc2FnZSArPSB0aGlzLnBhZ2VTaXplO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUN1cnJlbnRQYWdlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVzc2FnZUxvZy5wcm90b3R5cGUuZ2V0UHJldmlvdXNQYWdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5oYXNCYWNrd2FyZE1lc3NhZ2VzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50U3RhcnRpbmdNZXNzYWdlIC09IHRoaXMucGFnZVNpemU7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0YXJ0aW5nTWVzc2FnZSA8IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RhcnRpbmdNZXNzYWdlID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQ3VycmVudFBhZ2UoKTtcclxuICAgIH07XHJcbiAgICBNZXNzYWdlTG9nLnByb3RvdHlwZS5nZXRUb3BQYWdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY3VycmVudFN0YXJ0aW5nTWVzc2FnZSA9IDA7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQ3VycmVudFBhZ2UoKTtcclxuICAgIH07XHJcbiAgICBNZXNzYWdlTG9nLnByb3RvdHlwZS5yZWZyZXNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZUN1cnJlbnRQYWdlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVzc2FnZUxvZy5wcm90b3R5cGUudXBkYXRlQ3VycmVudFBhZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5kYXRhU2VydmljZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmJ1c3kgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFTZXJ2aWNlLmdldE1lc3NhZ2VzKHRoaXMuY3VycmVudFN0YXJ0aW5nTWVzc2FnZSwgdGhpcy5wYWdlU2l6ZSkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgIF90aGlzLnZpc2libGVNZXNzYWdlcyA9IHJlc3VsdC5tZXNzYWdlcztcclxuICAgICAgICAgICAgX3RoaXMuX2hhc0ZvcndhcmRNZXNzYWdlcyA9IHJlc3VsdC5oYXNNb3JlTWVzc2FnZXM7XHJcbiAgICAgICAgICAgIF90aGlzLl9oYXNCYWNrd2FyZE1lc3NhZ2VzID0gKF90aGlzLmN1cnJlbnRTdGFydGluZ01lc3NhZ2UgPiAwKTtcclxuICAgICAgICAgICAgX3RoaXMuYnVzeSA9IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBNZXNzYWdlTG9nO1xyXG59KCkpO1xyXG5leHBvcnRzLk1lc3NhZ2VMb2cgPSBNZXNzYWdlTG9nO1xyXG5mdW5jdGlvbiBtZXNzYWdlTG9nRmFjdG9yeSgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNZXNzYWdlTG9nKCk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5tZXNzYWdlTG9nRmFjdG9yeSA9IG1lc3NhZ2VMb2dGYWN0b3J5O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2liV1Z6YzJGblpVeHZaeTV6WlhKMmFXTmxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWJXVnpjMkZuWlV4dlp5NXpaWEoyYVdObExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEZsQlFWa3NRMEZCUXp0QlFVOUdMRzFDUVVGWExFZEJRVmNzV1VGQldTeERRVUZETzBGQlJXNURMSFZDUVVGbExFZEJRVmNzUlVGQlJTeERRVUZETzBGQmJVUjRRenRKUVVGQk8xRkJRMU1zTWtKQlFYTkNMRWRCUVZjc1EwRkJReXhEUVVGRE8xRkJRMjVETEhkQ1FVRnRRaXhIUVVGWkxFdEJRVXNzUTBGQlF6dFJRVU55UXl4NVFrRkJiMElzUjBGQldTeExRVUZMTEVOQlFVTTdVVUZEZEVNc1kwRkJVeXhIUVVGWExIVkNRVUZsTEVOQlFVTTdTVUYxUnpkRExFTkJRVU03U1VGc1IwRXNjMEpCUVVrc1owTkJRVkU3WVVGQldqdFpRVU5ETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1UwRkJVeXhEUVVGRE8xRkJRM1pDTEVOQlFVTTdVVUZGUkN4dlFrRkJiMEk3WVVGRGNFSXNWVUZCWVN4TFFVRmhPMWxCUTNwQ0xFbEJRVWtzUTBGQlF5eFRRVUZUTEVkQlFVY3NTMEZCU3l4RFFVRkRPMWxCUTNaQ0xFbEJRVWtzUTBGQlF5eHBRa0ZCYVVJc1JVRkJSU3hEUVVGRE8xRkJRekZDTEVOQlFVTTdPenRQUVU1Qk8wbEJVMFFzYzBKQlFVa3NNRU5CUVd0Q08xRkJSblJDTEcxQ1FVRnRRanRoUVVWdVFqdFpRVU5ETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTTdVVUZEYWtNc1EwRkJRenM3TzA5QlFVRTdTVUZGUkN4elFrRkJTU3d5UTBGQmJVSTdZVUZCZGtJN1dVRkRReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEc5Q1FVRnZRaXhEUVVGRE8xRkJRMnhETEVOQlFVTTdPenRQUVVGQk8wbEJSVVFzYzBKQlFVa3NiVU5CUVZjN1lVRkJaanRaUVVORExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNXVUZCV1N4RFFVRkRPMUZCUXpGQ0xFTkJRVU03VVVGRlJDeHZRa0ZCYjBJN1lVRkRjRUlzVlVGQlowSXNTMEZCTmtJN1dVRkROVU1zU1VGQlNTeERRVUZETEZsQlFWa3NSMEZCUnl4TFFVRkxMRU5CUVVNN1dVRkZNVUlzUlVGQlJTeERRVUZETEVOQlFVTXNTMEZCU3l4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEyNUNMRWxCUVVrc1EwRkJReXhsUVVGbExFZEJRVWNzU1VGQlNTeERRVUZETzJkQ1FVTTFRaXhKUVVGSkxFTkJRVU1zYVVKQlFXbENMRVZCUVVVc1EwRkJRenRaUVVNeFFpeERRVUZETzFGQlEwWXNRMEZCUXpzN08wOUJWa0U3U1VGWFJDeHRRa0ZCYlVJN1NVRkZia0lzSzBKQlFWVXNSMEZCVml4VlFVRlhMRTlCUVdsQ08xRkJRVFZDTEdsQ1FVbERPMUZCU0VFc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNWMEZCVnl4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF6dFpRVU5xUkN4TFFVRkpMRU5CUVVNc1ZVRkJWU3hGUVVGRkxFTkJRVU03VVVGRGJrSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1NVRkRTaXhEUVVGRE8wbEJSVVFzYTBOQlFXRXNSMEZCWWl4VlFVRmpMRTlCUVdsQ08xRkJRUzlDTEdsQ1FVbERPMUZCU0VFc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNZVUZCWVN4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF6dFpRVU51UkN4TFFVRkpMRU5CUVVNc1ZVRkJWU3hGUVVGRkxFTkJRVU03VVVGRGJrSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1NVRkRTaXhEUVVGRE8wbEJSVVFzYTBOQlFXRXNSMEZCWWl4VlFVRmpMRTlCUVdsQ08xRkJRUzlDTEdsQ1FVbERPMUZCU0VFc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNZVUZCWVN4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF6dFpRVU51UkN4TFFVRkpMRU5CUVVNc1QwRkJUeXhGUVVGRkxFTkJRVU03VVVGRGFFSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1NVRkRTaXhEUVVGRE8wbEJSVVFzWjBOQlFWY3NSMEZCV0R0UlFVTkRMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEd0Q1FVRnJRaXhEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU01UWl4TlFVRk5MRU5CUVVNN1VVRkRVaXhEUVVGRE8xRkJSVVFzU1VGQlNTeERRVUZETEhOQ1FVRnpRaXhKUVVGSkxFbEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTTdVVUZETjBNc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eHBRa0ZCYVVJc1JVRkJSU3hEUVVGRE8wbEJRMnBETEVOQlFVTTdTVUZGUkN4dlEwRkJaU3hIUVVGbU8xRkJRME1zUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUXk5Q0xFMUJRVTBzUTBGQlF6dFJRVU5TTEVOQlFVTTdVVUZGUkN4SlFVRkpMRU5CUVVNc2MwSkJRWE5DTEVsQlFVa3NTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJRenRSUVVVM1F5eEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc2MwSkJRWE5DTEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOeVF5eEpRVUZKTEVOQlFVTXNjMEpCUVhOQ0xFZEJRVWNzUTBGQlF5eERRVUZETzFGQlEycERMRU5CUVVNN1VVRkZSQ3hOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEdsQ1FVRnBRaXhGUVVGRkxFTkJRVU03U1VGRGFrTXNRMEZCUXp0SlFVVkVMQ3RDUVVGVkxFZEJRVlk3VVVGRFF5eEpRVUZKTEVOQlFVTXNjMEpCUVhOQ0xFZEJRVWNzUTBGQlF5eERRVUZETzFGQlEyaERMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zYVVKQlFXbENMRVZCUVVVc1EwRkJRenRKUVVOcVF5eERRVUZETzBsQlJVUXNORUpCUVU4c1IwRkJVRHRSUVVORExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNhVUpCUVdsQ0xFVkJRVVVzUTBGQlF6dEpRVU5xUXl4RFFVRkRPMGxCUlU4c2MwTkJRV2xDTEVkQlFYcENPMUZCUVVFc2FVSkJZVU03VVVGYVFTeEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1YwRkJWeXhKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZET1VJc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF6dFJRVU5pTEVOQlFVTTdVVUZGUkN4SlFVRkpMRU5CUVVNc1NVRkJTU3hIUVVGSExFbEJRVWtzUTBGQlF6dFJRVVZxUWl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExGZEJRVmNzUTBGQlF5eFhRVUZYTEVOQlFVTXNTVUZCU1N4RFFVRkRMSE5DUVVGelFpeEZRVUZGTEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlF5eE5RVUV3UWp0WlFVTXZSeXhMUVVGSkxFTkJRVU1zWlVGQlpTeEhRVUZITEUxQlFVMHNRMEZCUXl4UlFVRlJMRU5CUVVNN1dVRkRka01zUzBGQlNTeERRVUZETEcxQ1FVRnRRaXhIUVVGSExFMUJRVTBzUTBGQlF5eGxRVUZsTEVOQlFVTTdXVUZEYkVRc1MwRkJTU3hEUVVGRExHOUNRVUZ2UWl4SFFVRkhMRU5CUVVNc1MwRkJTU3hEUVVGRExITkNRVUZ6UWl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRemxFTEV0QlFVa3NRMEZCUXl4SlFVRkpMRWRCUVVjc1MwRkJTeXhEUVVGRE8xRkJRMjVDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMGxCUTBvc1EwRkJRenRKUVVOR0xHbENRVUZETzBGQlFVUXNRMEZCUXl4QlFUTkhSQ3hKUVRKSFF6dEJRVE5IV1N4clFrRkJWU3hoUVRKSGRFSXNRMEZCUVR0QlFVMUVPMGxCUTBNc1dVRkJXU3hEUVVGRE8wbEJRMklzVFVGQlRTeERRVUZETzFGQlEwNHNWMEZCVnp0WlFVTldMRTFCUVUwc1EwRkJReXhKUVVGSkxGVkJRVlVzUlVGQlJTeERRVUZETzFGQlEzcENMRU5CUVVNN1MwRkRSQ3hEUVVGRE8wRkJRMGdzUTBGQlF6dEJRVkJsTEhsQ1FVRnBRaXh2UWtGUGFFTXNRMEZCUVNKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9tZXNzYWdlTG9nL21lc3NhZ2VMb2cuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29iamVjdCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYmplY3Q7XHJcbnZhciBqcXVlcnlfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvanF1ZXJ5L2pxdWVyeS5zZXJ2aWNlJyk7XHJcbnZhciBtZXNzYWdlTG9nX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4vbWVzc2FnZUxvZy5zZXJ2aWNlJyk7XHJcbnZhciBjb21wb25lbnRTZXJ2aWNlcyA9IHJlcXVpcmUoJy4uLy4uL3NlcnZpY2VzL3NlcnZpY2VzLm1vZHVsZScpO1xyXG52YXIgX19kaWFsb2cgPSBjb21wb25lbnRTZXJ2aWNlcy5kaWFsb2c7XHJcbnZhciB0ZW1wbGF0ZUxvYWRlcl9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy90ZW1wbGF0ZUxvYWRlci90ZW1wbGF0ZUxvYWRlci5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMuZGlyZWN0aXZlTmFtZSA9ICdybE1lc3NhZ2VMb2cnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ01lc3NhZ2VMb2dDb250cm9sbGVyJztcclxuKGZ1bmN0aW9uIChEZWxldGVQZXJtaXNzaW9ucykge1xyXG4gICAgRGVsZXRlUGVybWlzc2lvbnNbRGVsZXRlUGVybWlzc2lvbnNbXCJkZWxldGVNaW5lXCJdID0gMF0gPSBcImRlbGV0ZU1pbmVcIjtcclxuICAgIERlbGV0ZVBlcm1pc3Npb25zW0RlbGV0ZVBlcm1pc3Npb25zW1wiZGVsZXRlQWxsXCJdID0gMV0gPSBcImRlbGV0ZUFsbFwiO1xyXG4gICAgRGVsZXRlUGVybWlzc2lvbnNbRGVsZXRlUGVybWlzc2lvbnNbXCJkZWxldGVOb25lXCJdID0gMl0gPSBcImRlbGV0ZU5vbmVcIjtcclxufSkoZXhwb3J0cy5EZWxldGVQZXJtaXNzaW9ucyB8fCAoZXhwb3J0cy5EZWxldGVQZXJtaXNzaW9ucyA9IHt9KSk7XHJcbnZhciBEZWxldGVQZXJtaXNzaW9ucyA9IGV4cG9ydHMuRGVsZXRlUGVybWlzc2lvbnM7XHJcbihmdW5jdGlvbiAoRWRpdFBlcm1pc3Npb25zKSB7XHJcbiAgICBFZGl0UGVybWlzc2lvbnNbRWRpdFBlcm1pc3Npb25zW1wiZWRpdE1pbmVcIl0gPSAwXSA9IFwiZWRpdE1pbmVcIjtcclxuICAgIEVkaXRQZXJtaXNzaW9uc1tFZGl0UGVybWlzc2lvbnNbXCJlZGl0QWxsXCJdID0gMV0gPSBcImVkaXRBbGxcIjtcclxuICAgIEVkaXRQZXJtaXNzaW9uc1tFZGl0UGVybWlzc2lvbnNbXCJlZGl0Tm9uZVwiXSA9IDJdID0gXCJlZGl0Tm9uZVwiO1xyXG59KShleHBvcnRzLkVkaXRQZXJtaXNzaW9ucyB8fCAoZXhwb3J0cy5FZGl0UGVybWlzc2lvbnMgPSB7fSkpO1xyXG52YXIgRWRpdFBlcm1pc3Npb25zID0gZXhwb3J0cy5FZGl0UGVybWlzc2lvbnM7XHJcbnZhciBNZXNzYWdlTG9nQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBNZXNzYWdlTG9nQ29udHJvbGxlcihkaWFsb2csICRzY29wZSwgbWVzc2FnZUxvZ0ZhY3RvcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuZGlhbG9nID0gZGlhbG9nO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxvZyA9IHRoaXMubWVzc2FnZUxvZ0JpbmRpbmcgfHwgbWVzc2FnZUxvZ0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm1lc3NhZ2VMb2cudmlzaWJsZU1lc3NhZ2VzOyB9LCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgX3RoaXMubWVzc2FnZXMgPSB2YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm1lc3NhZ2VMb2cuaGFzRm9yd2FyZE1lc3NhZ2VzOyB9LCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgX3RoaXMuaGFzTmV4dFBhZ2UgPSB2YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLm1lc3NhZ2VMb2cuaGFzQmFja3dhcmRNZXNzYWdlczsgfSwgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhhc1ByZXZpb3VzUGFnZSA9IHZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubWVzc2FnZUxvZy5idXN5OyB9LCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZ0luaXRpYWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5zZXJ2aWNlOyB9LCBmdW5jdGlvbiAoc2VydmljZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5tZXNzYWdlTG9nLmRhdGFTZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICAgICAgX3RoaXMubG9hZGluZ0luaXRpYWwgPSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZUxvZy5wYWdlU2l6ZSA9IHRoaXMucGFnZVNpemUgIT0gbnVsbCA/IHRoaXMucGFnZVNpemUgOiA4O1xyXG4gICAgICAgIHRoaXMudG9vbHRpcFRlbXBsYXRlID0gcmVxdWlyZSgnLi9lZGl0ZWRCeVBvcG92ZXIuaHRtbCcpO1xyXG4gICAgfVxyXG4gICAgTWVzc2FnZUxvZ0NvbnRyb2xsZXIucHJvdG90eXBlLmdldEVudHJ5U2VsZWN0b3IgPSBmdW5jdGlvbiAoZW50cnkpIHtcclxuICAgICAgICBpZiAoXy5pc1N0cmluZyh0aGlzLnNlbGVjdG9yKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZW50cnlbdGhpcy5zZWxlY3Rvcl07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKF8uaXNGdW5jdGlvbih0aGlzLnNlbGVjdG9yKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWxlY3RvcihlbnRyeSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIE1lc3NhZ2VMb2dDb250cm9sbGVyLnByb3RvdHlwZS5nZXRPbGRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlTG9nLmdldE5leHRQYWdlKCk7XHJcbiAgICB9O1xyXG4gICAgTWVzc2FnZUxvZ0NvbnRyb2xsZXIucHJvdG90eXBlLmdldFRvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlTG9nLmdldFRvcFBhZ2UoKTtcclxuICAgIH07XHJcbiAgICBNZXNzYWdlTG9nQ29udHJvbGxlci5wcm90b3R5cGUuY2FuRGVsZXRlRW50cnkgPSBmdW5jdGlvbiAoZW50cnkpIHtcclxuICAgICAgICBpZiAoZW50cnkuaXNTeXN0ZW1Ob3RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLmNhbkRlbGV0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIERlbGV0ZVBlcm1pc3Npb25zLmRlbGV0ZUFsbDpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICBjYXNlIERlbGV0ZVBlcm1pc3Npb25zLmRlbGV0ZU1pbmU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuY3VycmVudFVzZXIgPT0gbnVsbCB8fCB0aGlzLmN1cnJlbnRVc2VyLmlkID09PSBlbnRyeS5jcmVhdGVkQnkuaWQpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNZXNzYWdlTG9nQ29udHJvbGxlci5wcm90b3R5cGUuY2FuRWRpdEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5KSB7XHJcbiAgICAgICAgaWYgKGVudHJ5LmlzU3lzdGVtTm90ZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5jYW5FZGl0KSB7XHJcbiAgICAgICAgICAgIGNhc2UgRWRpdFBlcm1pc3Npb25zLmVkaXRBbGw6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgY2FzZSBFZGl0UGVybWlzc2lvbnMuZWRpdE1pbmU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKHRoaXMuY3VycmVudFVzZXIgPT0gbnVsbCB8fCB0aGlzLmN1cnJlbnRVc2VyLmlkID09PSBlbnRyeS5jcmVhdGVkQnkuaWQpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNZXNzYWdlTG9nQ29udHJvbGxlci5wcm90b3R5cGUuZWRpdE1lc3NhZ2UgPSBmdW5jdGlvbiAoZW50cnkpIHtcclxuICAgICAgICB2YXIgZWRpdGVkRW50cnkgPSBfLmNsb25lKGVudHJ5KTtcclxuICAgICAgICB0aGlzLmRpYWxvZy5vcGVuRm9ybSh7XHJcbiAgICAgICAgICAgIHNhdmU6IHRoaXMudXBkYXRlTm90ZS5iaW5kKHRoaXMpLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeTogZWRpdGVkRW50cnksXHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVudHJ5OiBlbnRyeSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vbWVzc2FnZUxvZ0VkaXREaWFsb2cuaHRtbCcpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE1lc3NhZ2VMb2dDb250cm9sbGVyLnByb3RvdHlwZS51cGRhdGVOb3RlID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlTG9nLnVwZGF0ZU1lc3NhZ2UoZGF0YS5lbnRyeSk7XHJcbiAgICB9O1xyXG4gICAgTWVzc2FnZUxvZ0NvbnRyb2xsZXIucHJvdG90eXBlLnNhdmVOb3RlID0gZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlTG9nLmFkZE1lc3NhZ2UoZGF0YS5lbnRyeSk7XHJcbiAgICB9O1xyXG4gICAgTWVzc2FnZUxvZ0NvbnRyb2xsZXIuJGluamVjdCA9IFtfX2RpYWxvZy5zZXJ2aWNlTmFtZSwgJyRzY29wZScsIG1lc3NhZ2VMb2dfc2VydmljZV8xLmZhY3RvcnlOYW1lXTtcclxuICAgIHJldHVybiBNZXNzYWdlTG9nQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5NZXNzYWdlTG9nQ29udHJvbGxlciA9IE1lc3NhZ2VMb2dDb250cm9sbGVyO1xyXG5tZXNzYWdlTG9nLiRpbmplY3QgPSBbXHJcbiAgICAnJGludGVycG9sYXRlJyxcclxuICAgIGpxdWVyeV9zZXJ2aWNlXzEuc2VydmljZU5hbWUsXHJcbiAgICB0ZW1wbGF0ZUxvYWRlcl9zZXJ2aWNlXzEuc2VydmljZU5hbWUsXHJcbiAgICBfX29iamVjdC5zZXJ2aWNlTmFtZSxcclxuXTtcclxuZnVuY3Rpb24gbWVzc2FnZUxvZygkaW50ZXJwb2xhdGUsIGpxdWVyeSwgdGVtcGxhdGVMb2FkZXIsIG9iamVjdCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL21lc3NhZ2VMb2cuaHRtbCcpLFxyXG4gICAgICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICAgICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgICAgICBjb250cm9sbGVyQXM6ICdsb2cnLFxyXG4gICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRhOiBcIj1cIixcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHtcclxuICAgICAgICAgICAgc2VydmljZTogJz0nLFxyXG4gICAgICAgICAgICBzZWxlY3RvcjogJz0nLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogJz0nLFxyXG4gICAgICAgICAgICBtZXNzYWdlTG9nQmluZGluZzogJz1tZXNzYWdlTG9nJyxcclxuICAgICAgICAgICAgbWVzc2FnZUFzOiBcIkBcIixcclxuICAgICAgICAgICAgY3VycmVudFVzZXI6ICc9PycsXHJcbiAgICAgICAgICAgIGNhbkRlbGV0ZTogJz0/JyxcclxuICAgICAgICAgICAgY2FuRWRpdDogJz0/JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cmlidXRlcywgY29udHJvbGxlciwgdHJhbnNjbHVkZSkge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyLnRlbXBsYXRlcyA9IHRlbXBsYXRlTG9hZGVyLmxvYWRUZW1wbGF0ZXModHJhbnNjbHVkZSkudGVtcGxhdGVzO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5tZXNzYWdlTG9nID0gbWVzc2FnZUxvZztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYldWemMyRm5aVXh2Wnk1a2FYSmxZM1JwZG1VdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUp0WlhOellXZGxURzluTG1ScGNtVmpkR2wyWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3d3UkVGQk1FUTdRVUZGTVVRc1dVRkJXU3hEUVVGRE8wRkJTV0lzTmtOQlFYbENMRGhDUVVFNFFpeERRVUZETEVOQlFVRTdRVUZEZUVRc1NVRkJUeXhSUVVGUkxFZEJRVWNzZFVOQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkhiRU1zSzBKQlNVOHNjME5CUVhORExFTkJRVU1zUTBGQlFUdEJRVVU1UXl4dFEwRkJjMGNzYzBKQlFYTkNMRU5CUVVNc1EwRkJRVHRCUVVNM1NDeEpRVUZaTEdsQ1FVRnBRaXhYUVVGTkxHZERRVUZuUXl4RFFVRkRMRU5CUVVFN1FVRkRjRVVzU1VGQlR5eFJRVUZSTEVkQlFVY3NhVUpCUVdsQ0xFTkJRVU1zVFVGQlRTeERRVUZETzBGQlJUTkRMSFZEUVVGelJTeHpSRUZCYzBRc1EwRkJReXhEUVVGQk8wRkJSV3hJTEhGQ1FVRmhMRWRCUVZjc1kwRkJZeXhEUVVGRE8wRkJRM1pETEhOQ1FVRmpMRWRCUVZjc2MwSkJRWE5DTEVOQlFVTTdRVUZGTTBRc1YwRkJXU3hwUWtGQmFVSTdTVUZETlVJc2NVVkJRV01zUTBGQlFUdEpRVU5rTEcxRlFVRmhMRU5CUVVFN1NVRkRZaXh4UlVGQll5eERRVUZCTzBGQlEyWXNRMEZCUXl4RlFVcFhMSGxDUVVGcFFpeExRVUZxUWl4NVFrRkJhVUlzVVVGSk5VSTdRVUZLUkN4SlFVRlpMR2xDUVVGcFFpeEhRVUZxUWl4NVFrRkpXQ3hEUVVGQk8wRkJSVVFzVjBGQldTeGxRVUZsTzBsQlF6RkNMRFpFUVVGWkxFTkJRVUU3U1VGRFdpd3lSRUZCVnl4RFFVRkJPMGxCUTFnc05rUkJRVmtzUTBGQlFUdEJRVU5pTEVOQlFVTXNSVUZLVnl4MVFrRkJaU3hMUVVGbUxIVkNRVUZsTEZGQlNURkNPMEZCU2tRc1NVRkJXU3hsUVVGbExFZEJRV1lzZFVKQlNWZ3NRMEZCUVR0QlFXTkVPMGxCZDBKRExEaENRVUZ2UWl4TlFVRnZReXhGUVVGRkxFMUJRV2xDTEVWQlFVVXNhVUpCUVhGRE8xRkJlRUp1U0N4cFFrRTBTRU03VVVGd1IyOUNMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRVGhDTzFGQlEzWkVMRWxCUVVrc1EwRkJReXhWUVVGVkxFZEJRVWNzU1VGQlNTeERRVUZETEdsQ1FVRnBRaXhKUVVGSkxHbENRVUZwUWl4RFFVRkRMRmRCUVZjc1JVRkJSU3hEUVVGRE8xRkJSVFZGTEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1kwRkJiMElzVFVGQlRTeERRVUZETEV0QlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1pVRkJaU3hEUVVGRExFTkJRVU1zUTBGQlF5eEZRVU40UlN4VlFVRkRMRXRCUVdsQ08xbEJRMjVDTEV0QlFVa3NRMEZCUXl4UlFVRlJMRWRCUVVjc1MwRkJTeXhEUVVGRE8xRkJRM1pDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMUZCUlVvc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF5eGpRVUZwUWl4TlFVRk5MRU5CUVVNc1MwRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eHJRa0ZCYTBJc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeFZRVUZETEV0QlFXTTdXVUZETTBZc1MwRkJTU3hEUVVGRExGZEJRVmNzUjBGQlJ5eExRVUZMTEVOQlFVTTdVVUZETVVJc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRlNDeE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMR05CUVdsQ0xFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRzFDUVVGdFFpeERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRlZCUVVNc1MwRkJZenRaUVVNMVJpeExRVUZKTEVOQlFVTXNaVUZCWlN4SFFVRkhMRXRCUVVzc1EwRkJRenRSUVVNNVFpeERRVUZETEVOQlFVTXNRMEZCUXp0UlFVVklMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU1zWTBGQmFVSXNUVUZCVFN4RFFVRkRMRXRCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRlZCUVVNc1MwRkJZenRaUVVNM1JTeEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlExb3NTMEZCU1N4RFFVRkRMRTlCUVU4c1IwRkJSeXhMUVVGTExFTkJRVU03WjBKQlEzSkNMRXRCUVVrc1EwRkJReXhqUVVGakxFZEJRVWNzUzBGQlN5eERRVUZETzFsQlF6ZENMRU5CUVVNN1dVRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6dG5Ra0ZEVUN4TFFVRkpMRU5CUVVNc1QwRkJUeXhIUVVGSExFbEJRVWtzUTBGQlF6dFpRVU55UWl4RFFVRkRPMUZCUTBZc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRlNDeE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMR05CUVdkRExFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxGVkJRVU1zVDBGQkswSTdXVUZEY2tjc1MwRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eFhRVUZYTEVkQlFVY3NUMEZCVHl4RFFVRkRPMWxCUTNSRExFdEJRVWtzUTBGQlF5eGpRVUZqTEVkQlFVY3NTVUZCU1N4RFFVRkRPMUZCUXpWQ0xFTkJRVU1zUTBGQlF5eERRVUZETzFGQlJVZ3NTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhSUVVGUkxFZEJRVWNzU1VGQlNTeERRVUZETEZGQlFWRXNTVUZCU1N4SlFVRkpMRWRCUVVjc1NVRkJTU3hEUVVGRExGRkJRVkVzUjBGQlJ5eERRVUZETEVOQlFVTTdVVUZGY2tVc1NVRkJTU3hEUVVGRExHVkJRV1VzUjBGQlJ5eFBRVUZQTEVOQlFVTXNkMEpCUVhkQ0xFTkJRVU1zUTBGQlF6dEpRVU14UkN4RFFVRkRPMGxCUlVRc0swTkJRV2RDTEVkQlFXaENMRlZCUVdsQ0xFdEJRV1U3VVVGREwwSXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJReTlDTEUxQlFVMHNRMEZCUXl4TFFVRkxMRU5CUVZNc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFGQlEzSkRMRU5CUVVNN1VVRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNoRExFMUJRVTBzUTBGQmRVSXNTVUZCU1N4RFFVRkRMRkZCUVZNc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF6dFJRVU53UkN4RFFVRkRPMGxCUTBZc1EwRkJRenRKUVVWRUxIVkRRVUZSTEVkQlFWSTdVVUZEUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eFhRVUZYTEVWQlFVVXNRMEZCUXp0SlFVTjBReXhEUVVGRE8wbEJSVVFzY1VOQlFVMHNSMEZCVGp0UlFVTkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEZWQlFWVXNSVUZCUlN4RFFVRkRPMGxCUTNKRExFTkJRVU03U1VGRlJDdzJRMEZCWXl4SFFVRmtMRlZCUVdVc1MwRkJaVHRSUVVNM1FpeEZRVUZGTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1dVRkJXU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU40UWl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRE8xRkJRMlFzUTBGQlF6dFJRVVZFTEUxQlFVMHNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEzaENMRXRCUVVzc2FVSkJRV2xDTEVOQlFVTXNVMEZCVXp0blFrRkRMMElzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXp0WlFVTmlMRXRCUVVzc2FVSkJRV2xDTEVOQlFVTXNWVUZCVlR0blFrRkRhRU1zVFVGQlRTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMRmRCUVZjc1NVRkJTU3hKUVVGSkxFbEJRVWtzU1VGQlNTeERRVUZETEZkQlFWY3NRMEZCUXl4RlFVRkZMRXRCUVVzc1MwRkJTeXhEUVVGRExGTkJRVk1zUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXp0WlFVTnFSanRuUWtGRFF5eE5RVUZOTEVOQlFVTXNTMEZCU3l4RFFVRkRPMUZCUTJZc1EwRkJRenRKUVVOR0xFTkJRVU03U1VGRFJDd3lRMEZCV1N4SFFVRmFMRlZCUVdFc1MwRkJaVHRSUVVNelFpeEZRVUZGTEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1dVRkJXU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU40UWl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRE8xRkJRMlFzUTBGQlF6dFJRVVZFTEUxQlFVMHNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEzUkNMRXRCUVVzc1pVRkJaU3hEUVVGRExFOUJRVTg3WjBKQlF6TkNMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU03V1VGRFlpeExRVUZMTEdWQlFXVXNRMEZCUXl4UlFVRlJPMmRDUVVNMVFpeE5RVUZOTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1YwRkJWeXhKUVVGSkxFbEJRVWtzU1VGQlNTeEpRVUZKTEVOQlFVTXNWMEZCVnl4RFFVRkRMRVZCUVVVc1MwRkJTeXhMUVVGTExFTkJRVU1zVTBGQlV5eERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRPMWxCUTJwR08yZENRVU5ETEUxQlFVMHNRMEZCUXl4TFFVRkxMRU5CUVVNN1VVRkRaaXhEUVVGRE8wbEJRMFlzUTBGQlF6dEpRVVZFTERCRFFVRlhMRWRCUVZnc1ZVRkJXU3hMUVVGbE8xRkJRekZDTEVsQlFVa3NWMEZCVnl4SFFVRmhMRU5CUVVNc1EwRkJReXhMUVVGTExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTTdVVUZGTTBNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFJRVUZSTEVOQlFVTTdXVUZEY0VJc1NVRkJTU3hGUVVGRkxFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJRenRaUVVOb1F5eEpRVUZKTEVWQlFVVTdaMEpCUTB3c1MwRkJTeXhGUVVGRkxGZEJRVmM3WjBKQlEyeENMR0ZCUVdFc1JVRkJSU3hMUVVGTE8yRkJRM0JDTzFsQlEwUXNVVUZCVVN4RlFVRkZMRTlCUVU4c1EwRkJReXcyUWtGQk5rSXNRMEZCUXp0VFFVTm9SQ3hEUVVGRExFTkJRVU03U1VGRFNpeERRVUZETzBsQlJVUXNlVU5CUVZVc1IwRkJWaXhWUVVGWExFbEJRVk03VVVGRGJrSXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zWVVGQllTeERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRKUVVOc1JDeERRVUZETzBsQlJVUXNkVU5CUVZFc1IwRkJVaXhWUVVGVExFbEJRVk03VVVGRGFrSXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRKUVVNdlF5eERRVUZETzBsQmNFZE5MRFJDUVVGUExFZEJRV0VzUTBGQlF5eFJRVUZSTEVOQlFVTXNWMEZCVnl4RlFVRkZMRkZCUVZFc1JVRkJSU3huUTBGQlZ5eERRVUZETEVOQlFVTTdTVUZ4UnpGRkxESkNRVUZETzBGQlFVUXNRMEZCUXl4QlFUVklSQ3hKUVRSSVF6dEJRVFZJV1N3MFFrRkJiMElzZFVKQk5FaG9ReXhEUVVGQk8wRkJSVVFzVlVGQlZTeERRVUZETEU5QlFVOHNSMEZCUnp0SlFVTndRaXhqUVVGak8wbEJRMlFzTkVKQlFXbENPMGxCUTJwQ0xHOURRVUZ4UWp0SlFVTnlRaXhSUVVGUkxFTkJRVU1zVjBGQlZ6dERRVU53UWl4RFFVRkRPMEZCUTBZc2IwSkJRVEpDTEZsQlFYbERMRVZCUTI1RkxFMUJRWE5DTEVWQlEzUkNMR05CUVN0Q0xFVkJReTlDTEUxQlFTdENPMGxCUXk5Q0xGbEJRVmtzUTBGQlF6dEpRVU5pTEUxQlFVMHNRMEZCUXp0UlFVTk9MRkZCUVZFc1JVRkJSU3hIUVVGSE8xRkJRMklzVVVGQlVTeEZRVUZGTEU5QlFVOHNRMEZCUXl4dFFrRkJiVUlzUTBGQlF6dFJRVU4wUXl4VlFVRlZMRVZCUVVVc1NVRkJTVHRSUVVOb1FpeFZRVUZWTEVWQlFVVXNjMEpCUVdNN1VVRkRNVUlzV1VGQldTeEZRVUZGTEV0QlFVczdVVUZEYmtJc1MwRkJTeXhGUVVGRk8xbEJRMDRzVjBGQlZ5eEZRVUZGTEVkQlFVYzdVMEZEYUVJN1VVRkRSQ3huUWtGQlowSXNSVUZCUlR0WlFVTnFRaXhQUVVGUExFVkJRVVVzUjBGQlJ6dFpRVU5hTEZGQlFWRXNSVUZCUlN4SFFVRkhPMWxCUTJJc1VVRkJVU3hGUVVGRkxFZEJRVWM3V1VGRFlpeHBRa0ZCYVVJc1JVRkJSU3hoUVVGaE8xbEJRMmhETEZOQlFWTXNSVUZCUlN4SFFVRkhPMWxCUTJRc1YwRkJWeXhGUVVGRkxFbEJRVWs3V1VGRGFrSXNVMEZCVXl4RlFVRkZMRWxCUVVrN1dVRkRaaXhQUVVGUExFVkJRVVVzU1VGQlNUdFRRVU5pTzFGQlEwUXNTVUZCU1N4RlFVRkZMRlZCUVVNc1MwRkJjVUlzUlVGRE0wSXNUMEZCYVVNc1JVRkRha01zVlVGQkswSXNSVUZETDBJc1ZVRkJaME1zUlVGRGFFTXNWVUZCZFVNN1dVRkRka01zVlVGQlZTeERRVUZETEZOQlFWTXNSMEZCUnl4alFVRmpMRU5CUVVNc1lVRkJZU3hEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEZOQlFWTXNRMEZCUXp0UlFVTXpSU3hEUVVGRE8wdEJRMFFzUTBGQlF6dEJRVU5JTEVOQlFVTTdRVUZvUTJVc2EwSkJRVlVzWVVGblEzcENMRU5CUVVFaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvbWVzc2FnZUxvZy9tZXNzYWdlTG9nLmRpcmVjdGl2ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIGF1dG9zYXZlID0gcmVxdWlyZSgnLi9hdXRvc2F2ZS9hdXRvc2F2ZS5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMuYXV0b3NhdmUgPSBhdXRvc2F2ZTtcclxudmFyIGF1dG9zYXZlQWN0aW9uID0gcmVxdWlyZSgnLi9hdXRvc2F2ZUFjdGlvbi9hdXRvc2F2ZUFjdGlvbi5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMuYXV0b3NhdmVBY3Rpb24gPSBhdXRvc2F2ZUFjdGlvbjtcclxudmFyIGJyZWFrcG9pbnRzID0gcmVxdWlyZSgnLi9icmVha3BvaW50cy9icmVha3BvaW50cy5tb2R1bGUnKTtcclxuZXhwb3J0cy5icmVha3BvaW50cyA9IGJyZWFrcG9pbnRzO1xyXG52YXIgY29tcG9uZW50VmFsaWRhdG9yID0gcmVxdWlyZSgnLi9jb21wb25lbnRWYWxpZGF0b3IvY29tcG9uZW50VmFsaWRhdG9yLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5jb21wb25lbnRWYWxpZGF0b3IgPSBjb21wb25lbnRWYWxpZGF0b3I7XHJcbnZhciBjb250ZW50UHJvdmlkZXIgPSByZXF1aXJlKCcuL2NvbnRlbnRQcm92aWRlci9jb250ZW50UHJvdmlkZXIuc2VydmljZScpO1xyXG5leHBvcnRzLmNvbnRlbnRQcm92aWRlciA9IGNvbnRlbnRQcm92aWRlcjtcclxudmFyIGRpYWxvZyA9IHJlcXVpcmUoJy4vZGlhbG9nL2RpYWxvZy5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMuZGlhbG9nID0gZGlhbG9nO1xyXG52YXIgZG9jdW1lbnRXcmFwcGVyID0gcmVxdWlyZSgnLi9kb2N1bWVudFdyYXBwZXIvZG9jdW1lbnRXcmFwcGVyLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5kb2N1bWVudFdyYXBwZXIgPSBkb2N1bWVudFdyYXBwZXI7XHJcbnZhciBmb3JtID0gcmVxdWlyZSgnLi9mb3JtL2Zvcm0uc2VydmljZScpO1xyXG5leHBvcnRzLmZvcm0gPSBmb3JtO1xyXG52YXIganF1ZXJ5ID0gcmVxdWlyZSgnLi9qcXVlcnkvanF1ZXJ5LnNlcnZpY2UnKTtcclxuZXhwb3J0cy5qcXVlcnkgPSBqcXVlcnk7XHJcbnZhciB0ZW1wbGF0ZUxvYWRlciA9IHJlcXVpcmUoJy4vdGVtcGxhdGVMb2FkZXIvdGVtcGxhdGVMb2FkZXIuc2VydmljZScpO1xyXG5leHBvcnRzLnRlbXBsYXRlTG9hZGVyID0gdGVtcGxhdGVMb2FkZXI7XHJcbnZhciB3aW5kb3dXcmFwcGVyID0gcmVxdWlyZSgnLi93aW5kb3dXcmFwcGVyL3dpbmRvd1dyYXBwZXIuc2VydmljZScpO1xyXG5leHBvcnRzLndpbmRvd1dyYXBwZXIgPSB3aW5kb3dXcmFwcGVyO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuc2VydmljZXMnO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgIGF1dG9zYXZlLm1vZHVsZU5hbWUsXHJcbiAgICBhdXRvc2F2ZUFjdGlvbi5tb2R1bGVOYW1lLFxyXG4gICAgYnJlYWtwb2ludHMubW9kdWxlTmFtZSxcclxuICAgIGNvbXBvbmVudFZhbGlkYXRvci5tb2R1bGVOYW1lLFxyXG4gICAgY29udGVudFByb3ZpZGVyLm1vZHVsZU5hbWUsXHJcbiAgICBkaWFsb2cubW9kdWxlTmFtZSxcclxuICAgIGRvY3VtZW50V3JhcHBlci5tb2R1bGVOYW1lLFxyXG4gICAgZm9ybS5tb2R1bGVOYW1lLFxyXG4gICAganF1ZXJ5Lm1vZHVsZU5hbWUsXHJcbiAgICB0ZW1wbGF0ZUxvYWRlci5tb2R1bGVOYW1lLFxyXG4gICAgd2luZG93V3JhcHBlci5tb2R1bGVOYW1lLFxyXG5dKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYzJWeWRtbGpaWE11Ylc5a2RXeGxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWMyVnlkbWxqWlhNdWJXOWtkV3hsTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUlc1RExFbEJRVmtzVVVGQlVTeFhRVUZOTERaQ1FVRTJRaXhEUVVGRExFTkJRVUU3UVVGaGRrUXNaMEpCUVZFN1FVRmFWQ3hKUVVGWkxHTkJRV01zVjBGQlRTeDVRMEZCZVVNc1EwRkJReXhEUVVGQk8wRkJZWHBGTEhOQ1FVRmpPMEZCV21Zc1NVRkJXU3hYUVVGWExGZEJRVTBzYTBOQlFXdERMRU5CUVVNc1EwRkJRVHRCUVdFdlJDeHRRa0ZCVnp0QlFWcGFMRWxCUVZrc2EwSkJRV3RDTEZkQlFVMHNhVVJCUVdsRUxFTkJRVU1zUTBGQlFUdEJRV0Z5Uml3d1FrRkJhMEk3UVVGYWJrSXNTVUZCV1N4bFFVRmxMRmRCUVUwc01rTkJRVEpETEVOQlFVTXNRMEZCUVR0QlFXRTFSU3gxUWtGQlpUdEJRVnBvUWl4SlFVRlpMRTFCUVUwc1YwRkJUU3g1UWtGQmVVSXNRMEZCUXl4RFFVRkJPMEZCWVdwRUxHTkJRVTA3UVVGYVVDeEpRVUZaTEdWQlFXVXNWMEZCVFN3eVEwRkJNa01zUTBGQlF5eERRVUZCTzBGQllUVkZMSFZDUVVGbE8wRkJXbWhDTEVsQlFWa3NTVUZCU1N4WFFVRk5MSEZDUVVGeFFpeERRVUZETEVOQlFVRTdRVUZoTTBNc1dVRkJTVHRCUVZwTUxFbEJRVmtzVFVGQlRTeFhRVUZOTEhsQ1FVRjVRaXhEUVVGRExFTkJRVUU3UVVGaGFrUXNZMEZCVFR0QlFWcFFMRWxCUVZrc1kwRkJZeXhYUVVGTkxIbERRVUY1UXl4RFFVRkRMRU5CUVVFN1FVRmhla1VzYzBKQlFXTTdRVUZhWml4SlFVRlpMR0ZCUVdFc1YwRkJUU3gxUTBGQmRVTXNRMEZCUXl4RFFVRkJPMEZCWVhSRkxIRkNRVUZoTzBGQlIwZ3NhMEpCUVZVc1IwRkJWeXhuUWtGQlowSXNRMEZCUXp0QlFVVnFSQ3hQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVN1NVRkRNVUlzVVVGQlVTeERRVUZETEZWQlFWVTdTVUZEYmtJc1kwRkJZeXhEUVVGRExGVkJRVlU3U1VGRGVrSXNWMEZCVnl4RFFVRkRMRlZCUVZVN1NVRkRkRUlzYTBKQlFXdENMRU5CUVVNc1ZVRkJWVHRKUVVNM1FpeGxRVUZsTEVOQlFVTXNWVUZCVlR0SlFVTXhRaXhOUVVGTkxFTkJRVU1zVlVGQlZUdEpRVU5xUWl4bFFVRmxMRU5CUVVNc1ZVRkJWVHRKUVVNeFFpeEpRVUZKTEVOQlFVTXNWVUZCVlR0SlFVTm1MRTFCUVUwc1EwRkJReXhWUVVGVk8wbEJRMnBDTEdOQlFXTXNRMEZCUXl4VlFVRlZPMGxCUTNwQ0xHRkJRV0VzUTBGQlF5eFZRVUZWTzBOQlEzaENMRU5CUVVNc1EwRkJReUo5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9zZXJ2aWNlcy9zZXJ2aWNlcy5tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgd2luZG93V3JhcHBlcl9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi93aW5kb3dXcmFwcGVyL3dpbmRvd1dyYXBwZXIuc2VydmljZScpO1xyXG52YXIgdmlzaWJsZUJyZWFrcG9pbnRfc2VydmljZV8xID0gcmVxdWlyZSgnLi92aXNpYmxlQnJlYWtwb2ludC5zZXJ2aWNlJyk7XHJcbnZhciBicmVha3BvaW50c19zZXJ2aWNlXzEgPSByZXF1aXJlKCcuL2JyZWFrcG9pbnRzLnNlcnZpY2UnKTtcclxuX19leHBvcnQocmVxdWlyZSgnLi9icmVha3BvaW50JykpO1xyXG5fX2V4cG9ydChyZXF1aXJlKCcuL3Zpc2libGVCcmVha3BvaW50LnNlcnZpY2UnKSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoJy4vYnJlYWtwb2ludHMuc2VydmljZScpKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLnNlcnZpY2VzLmJyZWFrcG9pbnRzJztcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXHJcbiAgICB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JzZXJ2YWJsZS5tb2R1bGVOYW1lLFxyXG4gICAgd2luZG93V3JhcHBlcl9zZXJ2aWNlXzEubW9kdWxlTmFtZSxcclxuXSlcclxuICAgIC5jb25zdGFudCgncmVzaXplRGVib3VuY2VNaWxsaXNlY29uZHMnLCA1MDApXHJcbiAgICAuc2VydmljZSh2aXNpYmxlQnJlYWtwb2ludF9zZXJ2aWNlXzEudmlzaWJsZUJyZWFrcG9pbnRTZXJ2aWNlTmFtZSwgdmlzaWJsZUJyZWFrcG9pbnRfc2VydmljZV8xLlZpc2libGVCcmVha3BvaW50U2VydmljZSlcclxuICAgIC5zZXJ2aWNlKGJyZWFrcG9pbnRzX3NlcnZpY2VfMS5icmVha3BvaW50U2VydmljZU5hbWUsIGJyZWFrcG9pbnRzX3NlcnZpY2VfMS5CcmVha3BvaW50U2VydmljZSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVluSmxZV3R3YjJsdWRITXViVzlrZFd4bExtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpWW5KbFlXdHdiMmx1ZEhNdWJXOWtkV3hsTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenM3T3p0QlFVVmlMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlJXNURMRFpEUVVGNVFpdzRRa0ZCT0VJc1EwRkJReXhEUVVGQk8wRkJSWGhFTEhORFFVRnpSQ3gzUTBGQmQwTXNRMEZCUXl4RFFVRkJPMEZCUXk5R0xEQkRRVUYxUlN3MlFrRkJOa0lzUTBGQlF5eERRVUZCTzBGQlEzSkhMRzlEUVVGNVJDeDFRa0ZCZFVJc1EwRkJReXhEUVVGQk8wRkJSV3BHTEdsQ1FVRmpMR05CUVdNc1EwRkJReXhGUVVGQk8wRkJRemRDTEdsQ1FVRmpMRFpDUVVFMlFpeERRVUZETEVWQlFVRTdRVUZETlVNc2FVSkJRV01zZFVKQlFYVkNMRU5CUVVNc1JVRkJRVHRCUVVVelFpeHJRa0ZCVlN4SFFVRlhMRFJDUVVFMFFpeERRVUZETzBGQlJUZEVMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFWVXNSVUZCUlR0SlFVTXhRaXgxUTBGQlVTeERRVUZETEZWQlFWVXNRMEZCUXl4VlFVRlZPMGxCUXpsQ0xHdERRVUYxUWp0RFFVTjJRaXhEUVVGRE8wdEJRMEVzVVVGQlVTeERRVUZETERSQ1FVRTBRaXhGUVVGRkxFZEJRVWNzUTBGQlF6dExRVU16UXl4UFFVRlBMRU5CUVVNc2QwUkJRVFJDTEVWQlFVVXNiMFJCUVhkQ0xFTkJRVU03UzBGREwwUXNUMEZCVHl4RFFVRkRMREpEUVVGeFFpeEZRVUZGTEhWRFFVRnBRaXhEUVVGRExFTkJRVU1pZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2Uvc2VydmljZXMvYnJlYWtwb2ludHMvYnJlYWtwb2ludHMubW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMTM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuc2VydmljZXMud2luZG93V3JhcHBlcic7XHJcbmV4cG9ydHMuc2VydmljZU5hbWUgPSAnd2luZG93V3JhcHBlcic7XHJcbnZhciBXaW5kb3dTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFdpbmRvd1NlcnZpY2UoKSB7XHJcbiAgICAgICAgdGhpcy53aW5kb3dDb250cm9sID0gJCh3aW5kb3cpO1xyXG4gICAgfVxyXG4gICAgV2luZG93U2VydmljZS5wcm90b3R5cGUucmVzaXplID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy53aW5kb3dDb250cm9sLnJlc2l6ZShjYWxsYmFjayk7XHJcbiAgICB9O1xyXG4gICAgV2luZG93U2VydmljZS5wcm90b3R5cGUuc2Nyb2xsVG9wID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvd0NvbnRyb2wuc2Nyb2xsVG9wKCk7XHJcbiAgICB9O1xyXG4gICAgV2luZG93U2VydmljZS5wcm90b3R5cGUuc2Nyb2xsID0gZnVuY3Rpb24gKGhhbmRsZXIpIHtcclxuICAgICAgICB0aGlzLndpbmRvd0NvbnRyb2wuc2Nyb2xsKGhhbmRsZXIpO1xyXG4gICAgfTtcclxuICAgIFdpbmRvd1NlcnZpY2UucHJvdG90eXBlLmhlaWdodCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3dDb250cm9sLmhlaWdodCgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBXaW5kb3dTZXJ2aWNlO1xyXG59KCkpO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLnNlcnZpY2UoZXhwb3J0cy5zZXJ2aWNlTmFtZSwgV2luZG93U2VydmljZSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWQybHVaRzkzVjNKaGNIQmxjaTV6WlhKMmFXTmxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWQybHVaRzkzVjNKaGNIQmxjaTV6WlhKMmFXTmxMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxGbEJRVmtzUTBGQlF6dEJRVVZpTEVsQlFWa3NUMEZCVHl4WFFVRk5MRk5CUVZNc1EwRkJReXhEUVVGQk8wRkJRMjVETEVsQlFWa3NRMEZCUXl4WFFVRk5MRkZCUVZFc1EwRkJReXhEUVVGQk8wRkJSV3BDTEd0Q1FVRlZMRWRCUVZjc09FSkJRVGhDTEVOQlFVTTdRVUZEY0VRc2JVSkJRVmNzUjBGQlZ5eGxRVUZsTEVOQlFVTTdRVUZoYWtRN1NVRkJRVHRSUVVOVExHdENRVUZoTEVkQlFWY3NRMEZCUXl4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRE8wbEJhVUl6UXl4RFFVRkRPMGxCWmtFc09FSkJRVTBzUjBGQlRpeFZRVUZQTEZGQlFUWkRPMUZCUTI1RUxFbEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNUVUZCVFN4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8wbEJRM0pETEVOQlFVTTdTVUZGUkN4cFEwRkJVeXhIUVVGVU8xRkJRME1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1UwRkJVeXhGUVVGRkxFTkJRVU03U1VGRGRrTXNRMEZCUXp0SlFVVkVMRGhDUVVGTkxFZEJRVTRzVlVGQlR5eFBRVUYxUWp0UlFVTTNRaXhKUVVGSkxFTkJRVU1zWVVGQllTeERRVUZETEUxQlFVMHNRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJRenRKUVVOd1F5eERRVUZETzBsQlJVUXNPRUpCUVUwc1IwRkJUanRSUVVORExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNZVUZCWVN4RFFVRkRMRTFCUVUwc1JVRkJSU3hEUVVGRE8wbEJRM0JETEVOQlFVTTdTVUZEUml4dlFrRkJRenRCUVVGRUxFTkJRVU1zUVVGc1FrUXNTVUZyUWtNN1FVRkZSQ3hQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEd0Q1FVRlZMRVZCUVVVc1JVRkJSU3hEUVVGRE8wdEJRelZDTEU5QlFVOHNRMEZCUXl4dFFrRkJWeXhGUVVGRkxHRkJRV0VzUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2Uvc2VydmljZXMvd2luZG93V3JhcHBlci93aW5kb3dXcmFwcGVyLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuLypcclxuICogSW1wbGVtZW50YXRpb24gYWxzbyByZXF1aXJlcyB0aGUgZm9sbG93aW5nIGVsZW1lbnRzIHRvIGJlIGluc2VydGVkIG9uIHRoZSBwYWdlOlxyXG4gKiAgIDxkaXYgY2xhc3M9XCJkZXZpY2UteHMgdmlzaWJsZS14c1wiPjwvZGl2PlxyXG4gKiAgIDxkaXYgY2xhc3M9XCJkZXZpY2Utc20gdmlzaWJsZS1zbVwiPjwvZGl2PlxyXG4gKiAgIDxkaXYgY2xhc3M9XCJkZXZpY2UtbWQgdmlzaWJsZS1tZFwiPjwvZGl2PlxyXG4gKiAgIDxkaXYgY2xhc3M9XCJkZXZpY2UtbGcgdmlzaWJsZS1sZ1wiPjwvZGl2PlxyXG4gKiBUaGV5IGhhdmUgYmVlbiBpbnNlcnRlZCBpbnRvIGluZGV4Lmh0bWwgZm9yIHlvdXIgY29udmVuaWVuY2UuXHJcbiAqL1xyXG5leHBvcnRzLnZpc2libGVCcmVha3BvaW50U2VydmljZU5hbWUgPSAndmlzaWJsZUJyZWFrcG9pbnQnO1xyXG52YXIgVmlzaWJsZUJyZWFrcG9pbnRTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFZpc2libGVCcmVha3BvaW50U2VydmljZSgpIHtcclxuICAgIH1cclxuICAgIFZpc2libGVCcmVha3BvaW50U2VydmljZS5wcm90b3R5cGUuaXNWaXNpYmxlID0gZnVuY3Rpb24gKGJyZWFrcG9pbnQpIHtcclxuICAgICAgICAvLyBqcXVlcnkgZ2V0cyB0aGUgYnJlYWtwb2ludCB0cmlnZ2VyIGRpcmVjdGl2ZXMgbGlzdGVkIGFib3ZlIG9uIGxpbmUgM1xyXG4gICAgICAgIHJldHVybiAkKCcuZGV2aWNlLScgKyBicmVha3BvaW50KS5pcygnOnZpc2libGUnKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gVmlzaWJsZUJyZWFrcG9pbnRTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLlZpc2libGVCcmVha3BvaW50U2VydmljZSA9IFZpc2libGVCcmVha3BvaW50U2VydmljZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pZG1semFXSnNaVUp5WldGcmNHOXBiblF1YzJWeWRtbGpaUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkluWnBjMmxpYkdWQ2NtVmhhM0J2YVc1MExuTmxjblpwWTJVdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzV1VGQldTeERRVUZETzBGQlJXSXNTVUZCV1N4RFFVRkRMRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGRk5VSTdPenM3T3pzN1IwRlBSenRCUVVWUkxHOURRVUUwUWl4SFFVRlhMRzFDUVVGdFFpeERRVUZETzBGQlRYUkZPMGxCUVVFN1NVRkxRU3hEUVVGRE8wbEJTa0VzTkVOQlFWTXNSMEZCVkN4VlFVRlZMRlZCUVd0Q08xRkJRek5DTEhWRlFVRjFSVHRSUVVOMlJTeE5RVUZOTEVOQlFVTXNRMEZCUXl4RFFVRkRMRlZCUVZVc1IwRkJSeXhWUVVGVkxFTkJRVU1zUTBGQlF5eEZRVUZGTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNN1NVRkRiRVFzUTBGQlF6dEpRVU5HTEN0Q1FVRkRPMEZCUVVRc1EwRkJReXhCUVV4RUxFbEJTME03UVVGTVdTeG5RMEZCZDBJc01rSkJTM0JETEVOQlFVRWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9zZXJ2aWNlcy9icmVha3BvaW50cy92aXNpYmxlQnJlYWtwb2ludC5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gMTQxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciB3aW5kb3dXcmFwcGVyX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uL3dpbmRvd1dyYXBwZXIvd2luZG93V3JhcHBlci5zZXJ2aWNlJyk7XHJcbnZhciB2aXNpYmxlQnJlYWtwb2ludF9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuL3Zpc2libGVCcmVha3BvaW50LnNlcnZpY2UnKTtcclxudmFyIGJyZWFrcG9pbnRfMSA9IHJlcXVpcmUoJy4vYnJlYWtwb2ludCcpO1xyXG5leHBvcnRzLmJyZWFrcG9pbnRTZXJ2aWNlTmFtZSA9ICdicmVha3BvaW50cyc7XHJcbnZhciBfX29ic2VydmFibGUgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JzZXJ2YWJsZTtcclxudmFyIEJyZWFrcG9pbnRTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJyZWFrcG9pbnRTZXJ2aWNlKCRyb290U2NvcGUsIHZpc2libGVCcmVha3BvaW50cywgcmVzaXplRGVib3VuY2VNaWxsaXNlY29uZHMsIHdpbmRvd1NlcnZpY2UsIG9ic2VydmFibGVGYWN0b3J5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLiRyb290U2NvcGUgPSAkcm9vdFNjb3BlO1xyXG4gICAgICAgIHRoaXMudmlzaWJsZUJyZWFrcG9pbnRzID0gdmlzaWJsZUJyZWFrcG9pbnRzO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQnJlYWtwb2ludCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIG5ld0JyZWFrUG9pbnQgPSBfdGhpcy5nZXRCcmVha3BvaW50KCk7XHJcbiAgICAgICAgICAgIGlmIChuZXdCcmVha1BvaW50ICE9PSBfdGhpcy5jdXJyZW50QnJlYWtwb2ludCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuJHJvb3RTY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmN1cnJlbnRCcmVha3BvaW50ID0gbmV3QnJlYWtQb2ludDtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vYnNlcnZhYmxlLmZpcmUoJ3dpbmRvdy5icmVha3BvaW50Q2hhbmdlZCcsIF90aGlzLmN1cnJlbnRCcmVha3BvaW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmN1cnJlbnRCcmVha3BvaW50ID0gdGhpcy5nZXRCcmVha3BvaW50KCk7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlID0gb2JzZXJ2YWJsZUZhY3RvcnkuZ2V0SW5zdGFuY2UoKTtcclxuICAgICAgICB2YXIgZWZmaWNpZW50UmVzaXplID0gXy5kZWJvdW5jZSh0aGlzLnVwZGF0ZUJyZWFrcG9pbnQsIHJlc2l6ZURlYm91bmNlTWlsbGlzZWNvbmRzLCB7XHJcbiAgICAgICAgICAgIGxlYWRpbmc6IHRydWUsXHJcbiAgICAgICAgICAgIHRyYWlsaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICBtYXhXYWl0OiByZXNpemVEZWJvdW5jZU1pbGxpc2Vjb25kcyxcclxuICAgICAgICB9KTtcclxuICAgICAgICB3aW5kb3dTZXJ2aWNlLnJlc2l6ZShlZmZpY2llbnRSZXNpemUpO1xyXG4gICAgfVxyXG4gICAgQnJlYWtwb2ludFNlcnZpY2UucHJvdG90eXBlLmdldEJyZWFrcG9pbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudmlzaWJsZUJyZWFrcG9pbnRzLmlzVmlzaWJsZShicmVha3BvaW50XzEubGcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBicmVha3BvaW50XzEubGc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudmlzaWJsZUJyZWFrcG9pbnRzLmlzVmlzaWJsZShicmVha3BvaW50XzEubWQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBicmVha3BvaW50XzEubWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMudmlzaWJsZUJyZWFrcG9pbnRzLmlzVmlzaWJsZShicmVha3BvaW50XzEuc20pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBicmVha3BvaW50XzEuc207XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYnJlYWtwb2ludF8xLnhzO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCcmVha3BvaW50U2VydmljZS5wcm90b3R5cGUuaXNCcmVha3BvaW50ID0gZnVuY3Rpb24gKGJyZWFrcG9pbnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50QnJlYWtwb2ludCA9PT0gYnJlYWtwb2ludDtcclxuICAgIH07XHJcbiAgICBCcmVha3BvaW50U2VydmljZS5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2YWJsZS5yZWdpc3RlcihhY3Rpb24sICd3aW5kb3cuYnJlYWtwb2ludENoYW5nZWQnKTtcclxuICAgIH07XHJcbiAgICBCcmVha3BvaW50U2VydmljZS4kaW5qZWN0ID0gWyckcm9vdFNjb3BlJywgdmlzaWJsZUJyZWFrcG9pbnRfc2VydmljZV8xLnZpc2libGVCcmVha3BvaW50U2VydmljZU5hbWUsICdyZXNpemVEZWJvdW5jZU1pbGxpc2Vjb25kcycsIHdpbmRvd1dyYXBwZXJfc2VydmljZV8xLnNlcnZpY2VOYW1lLCBfX29ic2VydmFibGUuZmFjdG9yeU5hbWVdO1xyXG4gICAgcmV0dXJuIEJyZWFrcG9pbnRTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLkJyZWFrcG9pbnRTZXJ2aWNlID0gQnJlYWtwb2ludFNlcnZpY2U7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVluSmxZV3R3YjJsdWRITXVjMlZ5ZG1salpTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW1KeVpXRnJjRzlwYm5SekxuTmxjblpwWTJVdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzV1VGQldTeERRVUZETzBGQlIySXNTVUZCV1N4RFFVRkRMRmRCUVUwc1VVRkJVU3hEUVVGRExFTkJRVUU3UVVGRk5VSXNOa05CUVhsQ0xEaENRVUU0UWl4RFFVRkRMRU5CUVVFN1FVRkZlRVFzYzBOQlFYZEZMSGREUVVGM1F5eERRVUZETEVOQlFVRTdRVUZEYWtnc01FTkJRWGRGTERaQ1FVRTJRaXhEUVVGRExFTkJRVUU3UVVGRmRFY3NNa0pCUVN0Q0xHTkJRV01zUTBGQlF5eERRVUZCTzBGQlJXNURMRFpDUVVGeFFpeEhRVUZYTEdGQlFXRXNRMEZCUXp0QlFVVjZSQ3hKUVVGUExGbEJRVmtzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRlZCUVZVc1EwRkJRenRCUVZFeFF6dEpRVVZETERKQ1FVRnZRaXhWUVVGblF5eEZRVU40UXl4clFrRkJOa01zUlVGRGNrUXNNRUpCUVd0RExFVkJRMnhETEdGQlFUWkNMRVZCUXpkQ0xHbENRVUY1UkR0UlFVNDVSQ3hwUWtGdlJFTTdVVUZzUkc5Q0xHVkJRVlVzUjBGQlZpeFZRVUZWTEVOQlFYTkNPMUZCUTNoRExIVkNRVUZyUWl4SFFVRnNRaXhyUWtGQmEwSXNRMEZCTWtJN1VVRjFRMnBFTEhGQ1FVRm5RaXhIUVVGbE8xbEJRM1JETEVsQlFVa3NZVUZCWVN4SFFVRlhMRXRCUVVrc1EwRkJReXhoUVVGaExFVkJRVVVzUTBGQlF6dFpRVVZxUkN4RlFVRkZMRU5CUVVNc1EwRkJReXhoUVVGaExFdEJRVXNzUzBGQlNTeERRVUZETEdsQ1FVRnBRaXhEUVVGRExFTkJRVU1zUTBGQlF6dG5Ra0ZET1VNc1MwRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eE5RVUZOTEVOQlFVTTdiMEpCUTNSQ0xFdEJRVWtzUTBGQlF5eHBRa0ZCYVVJc1IwRkJSeXhoUVVGaExFTkJRVU03YjBKQlEzWkRMRXRCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zU1VGQlNTeERRVUZETERCQ1FVRXdRaXhGUVVGRkxFdEJRVWtzUTBGQlF5eHBRa0ZCYVVJc1EwRkJReXhEUVVGRE8yZENRVU14UlN4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOS0xFTkJRVU03VVVGRFJpeERRVUZETEVOQlFVRTdVVUUxUTBFc1NVRkJTU3hEUVVGRExHbENRVUZwUWl4SFFVRkhMRWxCUVVrc1EwRkJReXhoUVVGaExFVkJRVVVzUTBGQlF6dFJRVVU1UXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hIUVVGSExHbENRVUZwUWl4RFFVRkRMRmRCUVZjc1JVRkJSU3hEUVVGRE8xRkJSV3hFTEVsQlFVa3NaVUZCWlN4SFFVRmxMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEdkQ1FVRm5RaXhGUVVGRkxEQkNRVUV3UWl4RlFVRkZPMWxCUXk5R0xFOUJRVThzUlVGQlJTeEpRVUZKTzFsQlEySXNVVUZCVVN4RlFVRkZMRWxCUVVrN1dVRkRaQ3hQUVVGUExFVkJRVVVzTUVKQlFUQkNPMU5CUTI1RExFTkJRVU1zUTBGQlF6dFJRVU5JTEdGQlFXRXNRMEZCUXl4TlFVRk5MRU5CUVVNc1pVRkJaU3hEUVVGRExFTkJRVU03U1VGRGRrTXNRMEZCUXp0SlFVdFBMSGxEUVVGaExFZEJRWEpDTzFGQlEwTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExHdENRVUZyUWl4RFFVRkRMRk5CUVZNc1EwRkJReXhsUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTTdXVUZETTBNc1RVRkJUU3hEUVVGRExHVkJRVVVzUTBGQlF6dFJRVU5ZTEVOQlFVTTdVVUZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEd0Q1FVRnJRaXhEUVVGRExGTkJRVk1zUTBGQlF5eGxRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRiRVFzVFVGQlRTeERRVUZETEdWQlFVVXNRMEZCUXp0UlFVTllMRU5CUVVNN1VVRkJReXhKUVVGSkxFTkJRVU1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMR3RDUVVGclFpeERRVUZETEZOQlFWTXNRMEZCUXl4bFFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGJFUXNUVUZCVFN4RFFVRkRMR1ZCUVVVc1EwRkJRenRSUVVOWUxFTkJRVU03VVVGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0WlFVTlFMRTFCUVUwc1EwRkJReXhsUVVGRkxFTkJRVU03VVVGRFdDeERRVUZETzBsQlEwWXNRMEZCUXp0SlFVVkVMSGREUVVGWkxFZEJRVm9zVlVGQllTeFZRVUZyUWp0UlFVTTVRaXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEdsQ1FVRnBRaXhMUVVGTExGVkJRVlVzUTBGQlF6dEpRVU01UXl4RFFVRkRPMGxCUlVRc2IwTkJRVkVzUjBGQlVpeFZRVUZUTEUxQlFYTkRPMUZCUXpsRExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRkZCUVZFc1EwRkJReXhOUVVGTkxFVkJRVVVzTUVKQlFUQkNMRU5CUVVNc1EwRkJRenRKUVVOeVJTeERRVUZETzBsQmRrTk5MSGxDUVVGUExFZEJRV0VzUTBGQlF5eFpRVUZaTEVWQlFVVXNkMFJCUVRSQ0xFVkJRVVVzTkVKQlFUUkNMRVZCUVVVc2JVTkJRWGRDTEVWQlFVVXNXVUZCV1N4RFFVRkRMRmRCUVZjc1EwRkJReXhEUVVGQk8wbEJiVVF4U2l4M1FrRkJRenRCUVVGRUxFTkJRVU1zUVVGd1JFUXNTVUZ2UkVNN1FVRndSRmtzZVVKQlFXbENMRzlDUVc5RU4wSXNRMEZCUVNKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2Uvc2VydmljZXMvYnJlYWtwb2ludHMvYnJlYWtwb2ludHMuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL3R5cGluZ3MvanF1ZXJ5L2pxdWVyeS5kLnRzXCIgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgbmcgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29ic2VydmFibGUgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JzZXJ2YWJsZTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnV0aWxpdGllcy5zZXJ2aWNlcy5jb250ZW50UHJvdmlkZXInO1xyXG5leHBvcnRzLnNlcnZpY2VOYW1lID0gJ2NvbnRlbnRQcm92aWRlckZhY3RvcnknO1xyXG52YXIgQ29udGVudFByb3ZpZGVyU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb250ZW50UHJvdmlkZXJTZXJ2aWNlKG9ic2VydmFibGVGYWN0b3J5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnNldFRyYW5zY2x1ZGVDb250ZW50ID0gZnVuY3Rpb24gKHRyYW5zY2x1ZGVGdW5jdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgc2NvcGUgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRyYW5zY2x1ZGVGdW5jdGlvbikpIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zY2x1ZGVGdW5jdGlvbihmdW5jdGlvbiAoY2xvbmUsIHRyYW5zY2x1ZGVTY29wZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnNldENvbnRlbnQoY2xvbmUsIHRyYW5zY2x1ZGVTY29wZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLnNldENvbnRlbnQobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGVGYWN0b3J5LmdldEluc3RhbmNlKCk7XHJcbiAgICB9XHJcbiAgICBDb250ZW50UHJvdmlkZXJTZXJ2aWNlLnByb3RvdHlwZS5zZXRDb250ZW50ID0gZnVuY3Rpb24gKGNvbnRlbnQsIHNjb3BlKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLnNjb3BlID0gc2NvcGU7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlLmZpcmUoJ2NvbnRlbnRDaGFuZ2VkJyk7XHJcbiAgICB9O1xyXG4gICAgQ29udGVudFByb3ZpZGVyU2VydmljZS5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAoYWN0aW9uLCBzZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMuY29udGVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbih0aGlzLmdldENvbnRlbnQoc2VsZWN0b3IpLCB0aGlzLnNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2YWJsZS5yZWdpc3RlcihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGFjdGlvbihfdGhpcy5nZXRDb250ZW50KHNlbGVjdG9yKSwgX3RoaXMuc2NvcGUpO1xyXG4gICAgICAgIH0sICdjb250ZW50Q2hhbmdlZCcpO1xyXG4gICAgfTtcclxuICAgIENvbnRlbnRQcm92aWRlclNlcnZpY2UucHJvdG90eXBlLmdldENvbnRlbnQgPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcclxuICAgICAgICBpZiAoc2VsZWN0b3IgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50LmZpbHRlcihzZWxlY3Rvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQ7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvbnRlbnRQcm92aWRlclNlcnZpY2U7XHJcbn0oKSk7XHJcbmNvbnRlbnRQcm92aWRlclNlcnZpY2VGYWN0b3J5LiRpbmplY3QgPSBbX19vYnNlcnZhYmxlLmZhY3RvcnlOYW1lXTtcclxuZnVuY3Rpb24gY29udGVudFByb3ZpZGVyU2VydmljZUZhY3Rvcnkob2JzZXJ2YWJsZUZhY3RvcnkpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0SW5zdGFuY2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb250ZW50UHJvdmlkZXJTZXJ2aWNlKG9ic2VydmFibGVGYWN0b3J5KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbm5nLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtfX29ic2VydmFibGUubW9kdWxlTmFtZV0pXHJcbiAgICAuZmFjdG9yeShleHBvcnRzLnNlcnZpY2VOYW1lLCBjb250ZW50UHJvdmlkZXJTZXJ2aWNlRmFjdG9yeSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVkyOXVkR1Z1ZEZCeWIzWnBaR1Z5TG5ObGNuWnBZMlV1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5SmpiMjUwWlc1MFVISnZkbWxrWlhJdWMyVnlkbWxqWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3dyUkVGQkswUTdRVUZGTDBRc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeEZRVUZGTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkRPVUlzU1VGQldTeERRVUZETEZkQlFVMHNVVUZCVVN4RFFVRkRMRU5CUVVFN1FVRkZOVUlzTmtOQlFYbENMRGhDUVVFNFFpeERRVUZETEVOQlFVRTdRVUZGZUVRc1NVRkJUeXhaUVVGWkxFZEJRVWNzZFVOQlFWRXNRMEZCUXl4VlFVRlZMRU5CUVVNN1FVRkZMMElzYTBKQlFWVXNSMEZCVnl4MVEwRkJkVU1zUTBGQlF6dEJRVU0zUkN4dFFrRkJWeXhIUVVGWExIZENRVUYzUWl4RFFVRkRPMEZCVXpGRU8wbEJRME1zWjBOQlFWa3NhVUpCUVhsRU8xRkJSSFJGTEdsQ1FUSkRRenRSUVRWQ1FTeDVRa0ZCYjBJc1IwRkJlVVFzVlVGQlF5eHJRa0ZCTUVNN1dVRkRka2dzU1VGQlNTeExRVUZMTEVkQlFXTXNTVUZCU1N4RFFVRkRPMWxCUXpWQ0xFVkJRVVVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc2EwSkJRV3RDTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1owSkJRM1JETEd0Q1FVRnJRaXhEUVVGRExGVkJRVU1zUzBGQllTeEZRVUZGTEdWQlFUQkNPMjlDUVVNMVJDeExRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRXRCUVVzc1JVRkJSU3hsUVVGbExFTkJRVU1zUTBGQlF6dG5Ra0ZEZWtNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRFNpeERRVUZETzFsQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1owSkJRMUFzUzBGQlNTeERRVUZETEZWQlFWVXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRaUVVOMlFpeERRVUZETzFGQlEwWXNRMEZCUXl4RFFVRkJPMUZCZEVKQkxFbEJRVWtzUTBGQlF5eFZRVUZWTEVkQlFVY3NhVUpCUVdsQ0xFTkJRVU1zVjBGQlZ5eEZRVUZGTEVOQlFVTTdTVUZEYmtRc1EwRkJRenRKUVUxRUxESkRRVUZWTEVkQlFWWXNWVUZCVnl4UFFVRmxMRVZCUVVVc1MwRkJhVUk3VVVGRE5VTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1IwRkJSeXhQUVVGUExFTkJRVU03VVVGRGRrSXNTVUZCU1N4RFFVRkRMRXRCUVVzc1IwRkJSeXhMUVVGTExFTkJRVU03VVVGRGJrSXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVU1zWjBKQlFXZENMRU5CUVVNc1EwRkJRenRKUVVONFF5eERRVUZETzBsQllVUXNlVU5CUVZFc1IwRkJVaXhWUVVGVExFMUJRVFJFTEVWQlFVVXNVVUZCYVVJN1VVRkJlRVlzYVVKQlVVTTdVVUZRUVN4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVDBGQlR5eEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRNVUlzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1VVRkJVU3hEUVVGRExFVkJRVVVzU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRPMUZCUXk5RExFTkJRVU03VVVGRlJDeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhSUVVGUkxFTkJRVU03V1VGREwwSXNUVUZCVFN4RFFVRkRMRXRCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zVVVGQlVTeERRVUZETEVWQlFVVXNTMEZCU1N4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRE8xRkJReTlETEVOQlFVTXNSVUZCUlN4blFrRkJaMElzUTBGQlF5eERRVUZETzBsQlEzUkNMRU5CUVVNN1NVRkZSQ3d5UTBGQlZTeEhRVUZXTEZWQlFWY3NVVUZCYVVJN1VVRkRNMElzUlVGQlJTeERRVUZETEVOQlFVTXNVVUZCVVN4SlFVRkpMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGRFSXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zVFVGQlRTeERRVUZETEZGQlFWRXNRMEZCUXl4RFFVRkRPMUZCUTNSRExFTkJRVU03VVVGRlJDeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJRenRKUVVOeVFpeERRVUZETzBsQlEwWXNOa0pCUVVNN1FVRkJSQ3hEUVVGRExFRkJNME5FTEVsQk1rTkRPMEZCVFVRc05rSkJRVFpDTEVOQlFVTXNUMEZCVHl4SFFVRkhMRU5CUVVNc1dVRkJXU3hEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETzBGQlEyNUZMSFZEUVVGMVF5eHBRa0ZCZVVRN1NVRkRMMFlzV1VGQldTeERRVUZETzBsQlJXSXNUVUZCVFN4RFFVRkRPMUZCUTA0c1YwRkJWenRaUVVOV0xFMUJRVTBzUTBGQlF5eEpRVUZKTEhOQ1FVRnpRaXhEUVVGRExHbENRVUZwUWl4RFFVRkRMRU5CUVVNN1VVRkRkRVFzUTBGQlF6dExRVU5FTEVOQlFVTTdRVUZEU0N4RFFVRkRPMEZCUlVRc1JVRkJSU3hEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZMRU5CUVVNc1dVRkJXU3hEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETzB0QlF6bERMRTlCUVU4c1EwRkJReXh0UWtGQlZ5eEZRVUZGTERaQ1FVRTJRaXhEUVVGRExFTkJRVU1pZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2Uvc2VydmljZXMvY29udGVudFByb3ZpZGVyL2NvbnRlbnRQcm92aWRlci5zZXJ2aWNlLmpzXG4gKiogbW9kdWxlIGlkID0gMTQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuc2VydmljZXMuZG9jdW1lbnRXcmFwcGVyJztcclxuZXhwb3J0cy5zZXJ2aWNlTmFtZSA9ICdkb2N1bWVudFdyYXBwZXInO1xyXG52YXIgRG9jdW1lbnRTZXJ2aWNlID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIERvY3VtZW50U2VydmljZSgpIHtcclxuICAgICAgICB0aGlzLmRvY3VtZW50Q29udHJvbCA9ICQoZG9jdW1lbnQpO1xyXG4gICAgfVxyXG4gICAgRG9jdW1lbnRTZXJ2aWNlLnByb3RvdHlwZS5oZWlnaHQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRDb250cm9sLmhlaWdodCgpO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBEb2N1bWVudFNlcnZpY2U7XHJcbn0oKSk7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuc2VydmljZShleHBvcnRzLnNlcnZpY2VOYW1lLCBEb2N1bWVudFNlcnZpY2UpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2laRzlqZFcxbGJuUlhjbUZ3Y0dWeUxuTmxjblpwWTJVdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUprYjJOMWJXVnVkRmR5WVhCd1pYSXVjMlZ5ZG1salpTNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4WlFVRlpMRU5CUVVNN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVTnVReXhKUVVGWkxFTkJRVU1zVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVVnFRaXhyUWtGQlZTeEhRVUZYTEdkRFFVRm5ReXhEUVVGRE8wRkJRM1JFTEcxQ1FVRlhMRWRCUVZjc2FVSkJRV2xDTEVOQlFVTTdRVUZOYmtRN1NVRkJRVHRSUVVOVExHOUNRVUZsTEVkQlFWY3NRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8wbEJTeTlETEVOQlFVTTdTVUZJUVN4blEwRkJUU3hIUVVGT08xRkJRME1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4bFFVRmxMRU5CUVVNc1RVRkJUU3hGUVVGRkxFTkJRVU03U1VGRGRFTXNRMEZCUXp0SlFVTkdMSE5DUVVGRE8wRkJRVVFzUTBGQlF5eEJRVTVFTEVsQlRVTTdRVUZGUkN4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVXNSVUZCUlN4RFFVRkRPMHRCUXpWQ0xFOUJRVThzUTBGQlF5eHRRa0ZCVnl4RlFVRkZMR1ZCUVdVc1EwRkJReXhEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL3NlcnZpY2VzL2RvY3VtZW50V3JhcHBlci9kb2N1bWVudFdyYXBwZXIuc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXY+TGFzdCBlZGl0ZWQgYnk6IHt7ZW50cnkubGFzdFVwZGF0ZWRCeS5uYW1lfX08L2Rpdj5cXHJcXG48ZGl2PjxybC1kYXRlLXRpbWUtc3RhdGljIGRhdGUtdmFsdWU9XFxcImVudHJ5Lmxhc3RVcGRhdGVkRGF0ZVxcXCIgaW5jbHVkZS10aW1lPVxcXCJ0cnVlXFxcIj48L3JsLWRhdGUtdGltZS1zdGF0aWM+PC9kaXY+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvbWVzc2FnZUxvZy9lZGl0ZWRCeVBvcG92ZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxybC1kaWFsb2cgYXV0b3NhdmU9XFxcInRydWVcXFwiPlxcclxcblxcdDxybC1kaWFsb2ctY29udGVudD5cXHJcXG5cXHRcXHQ8bmctZm9ybSBuYW1lPVxcXCJub3RlRm9ybVxcXCI+XFxyXFxuXFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiZm9ybS1ncm91cFxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0PHJsLXRleHRib3ggbmctbW9kZWw9XFxcImRpYWxvZy5lbnRyeS5tZXNzYWdlXFxcIiBsYWJlbD1cXFwiTWVzc2FnZTpcXFwiIG1heGxlbmd0aD1cXFwiMjUwXFxcIj48L3JsLXRleHRib3g+XFxyXFxuXFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0PC9uZy1mb3JtPlxcclxcblxcdDwvcmwtZGlhbG9nLWNvbnRlbnQ+XFxyXFxuPC9ybC1kaWFsb2c+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvbWVzc2FnZUxvZy9tZXNzYWdlTG9nRWRpdERpYWxvZy5odG1sXG4gKiogbW9kdWxlIGlkID0gMTQ2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdj5cXHJcXG5cXHQ8cmwtYnVzeSBsb2FkaW5nPVxcXCJsb2cubG9hZGluZ0luaXRpYWxcXFwiIHNpemU9XFxcIjJ4XFxcIj48L3JsLWJ1c3k+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiY29udGVudC1ncm91cFxcXCIgbmctcmVwZWF0PVxcXCJlbnRyeSBpbiBsb2cubWVzc2FnZXNcXFwiIHJsLWFsaWFzPVxcXCJlbnRyeSBhcyB7e2xvZy5tZXNzYWdlQXN9fVxcXCIgbmctY2xhc3M9XFxcInsgJ3N5c3RlbS1ub3RlJzogZW50cnkuaXNTeXN0ZW1Ob3RlIH1cXFwiPlxcclxcblxcdFxcdDxybC1nZW5lcmljLWNvbnRhaW5lciBzZWxlY3Rvcj1cXFwibG9nLmdldEVudHJ5U2VsZWN0b3IoZW50cnkpXFxcIiB0ZW1wbGF0ZXM9XFxcImxvZy50ZW1wbGF0ZXNcXFwiPlxcclxcblxcdFxcdFxcdDx0ZW1wbGF0ZSBkZWZhdWx0PlxcclxcblxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcIm1lc3NhZ2UtYm9keVxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwibWVzc2FnZS1jb250ZW50XFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8ZGl2IG5nLWJpbmQtaHRtbD1cXFwiZW50cnkubWVzc2FnZVxcXCI+PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PHNwYW4gY2xhc3M9XFxcIm1lc3NhZ2UtYnV0dG9uXFxcIiBuZy1pZj1cXFwibG9nLmNhbkVkaXRFbnRyeShlbnRyeSlcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdDxybC1idXR0b24tYXN5bmMgdHlwZT1cXFwibWVzc2FnZS1kZWZhdWx0IGZsYXRcXFwiIGFjdGlvbj1cXFwibG9nLmVkaXRNZXNzYWdlKGVudHJ5KVxcXCIgc2l6ZT1cXFwieHNcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1lZGl0XFxcIj48L2k+PC9ybC1idXR0b24tYXN5bmM+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PC9zcGFuPlxcclxcblxcdFxcdFxcdFxcdFxcdDxzcGFuIGNsYXNzPVxcXCJtZXNzYWdlLWJ1dHRvblxcXCIgbmctaWY9XFxcImxvZy5jYW5EZWxldGVFbnRyeShlbnRyeSlcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdDxybC1idXR0b24tYXN5bmMgdHlwZT1cXFwibWVzc2FnZS1kYW5nZXIgZmxhdFxcXCIgYWN0aW9uPVxcXCJsb2cubWVzc2FnZUxvZy5kZWxldGVNZXNzYWdlKGVudHJ5KVxcXCIgc2l6ZT1cXFwieHNcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1yZW1vdmVcXFwiPjwvaT48L3JsLWJ1dHRvbi1hc3luYz5cXHJcXG5cXHRcXHRcXHRcXHRcXHQ8L3NwYW4+XFxyXFxuXFx0XFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwibWVzc2FnZS1ieWxpbmVcXFwiPlxcclxcblxcdFxcdFxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImJ5bGluZVxcXCI+e3tlbnRyeS5jcmVhdGVkQnkubmFtZX19PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiYnlsaW5lXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8cmwtZGF0ZS10aW1lLXN0YXRpYyBkYXRlLXZhbHVlPVxcXCJlbnRyeS5jcmVhdGVkRGF0ZVxcXCIgaW5jbHVkZS10aW1lPVxcXCJ0cnVlXFxcIj48L3JsLWRhdGUtdGltZS1zdGF0aWM+XFxyXFxuXFx0XFx0XFx0XFx0XFx0XFx0PHNwYW4gIG5nLWlmPVxcXCJlbnRyeS5lZGl0ZWRcXFwiIGNsYXNzPVxcXCJlZGl0ZWQtbm90ZVxcXCIgcmwtcG9wb3Zlcj1cXFwibG9nLnRvb2x0aXBUZW1wbGF0ZVxcXCIgcG9wb3Zlci10cmlnZ2VyPVxcXCJtb3VzZWVudGVyXFxcIj4oZWRpdGVkKTwvc3Bhbj48L2Rpdj5cXHJcXG5cXHRcXHRcXHRcXHQ8L2Rpdj5cXHJcXG5cXHRcXHRcXHQ8L3RlbXBsYXRlPlxcclxcblxcdFxcdDwvcmwtZ2VuZXJpYy1jb250YWluZXI+XFxyXFxuXFx0PC9kaXY+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiY29udGVudC1ncm91cFxcXCIgbmctaWY9XFxcIihsb2cubWVzc2FnZXMgfCBpc0VtcHR5KSAmJiAhbG9nLmxvYWRpbmdJbml0aWFsXFxcIj5ObyBleGlzdGluZyBtZXNzYWdlczwvZGl2PlxcclxcblxcdDxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XFxyXFxuXFx0XFx0PGRpdiBjbGFzcz1cXFwiY29sLXhzLTEyXFxcIj5cXHJcXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJ0ZXh0LWNlbnRlclxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0PHJsLWJ1dHRvbi1hc3luYyBhY3Rpb249XFxcImxvZy5nZXRUb3AoKVxcXCIgbmctZGlzYWJsZWQ9XFxcImxvZy5sb2FkaW5nXFxcIiBidXR0b24tcmlnaHQtYWxpZ25lZD1cXFwidHJ1ZVxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0XFx0PHNwYW4gbmctc2hvdz1cXFwibG9nLmhhc1ByZXZpb3VzUGFnZVxcXCI+VG9wIDxpIGNsYXNzPVxcXCJmYSBmYS1jYXJldC11cFxcXCI+PC9pPjwvc3Bhbj5cXHJcXG5cXHRcXHRcXHRcXHRcXHQ8c3BhbiBuZy1oaWRlPVxcXCJsb2cuaGFzUHJldmlvdXNQYWdlXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtcmVmcmVzaFxcXCI+PC9pPiBSZWZyZXNoPC9zcGFuPlxcclxcblxcdFxcdFxcdFxcdDwvcmwtYnV0dG9uLWFzeW5jPlxcclxcblxcdFxcdFxcdFxcdDxybC1idXR0b24tYXN5bmMgbmctZGlzYWJsZWQ9XFxcImxvZy5oYXNOZXh0UGFnZSA9PSBmYWxzZSB8fCBsb2cubG9hZGluZ1xcXCIgYWN0aW9uPVxcXCJsb2cuZ2V0T2xkZXIoKVxcXCI+XFxyXFxuXFx0XFx0XFx0XFx0XFx0T2xkZXIgPGkgY2xhc3M9XFxcImZhIGZhLWNhcmV0LXJpZ2h0XFxcIj48L2k+XFxyXFxuXFx0XFx0XFx0XFx0PC9ybC1idXR0b24tYXN5bmM+XFxyXFxuXFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0PC9kaXY+XFxyXFxuXFx0PC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuXCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvbWVzc2FnZUxvZy9tZXNzYWdlTG9nLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIG1lc3NhZ2VMb2dfc2VydmljZV8xID0gcmVxdWlyZSgnLi9tZXNzYWdlTG9nLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5kaXJlY3RpdmVOYW1lID0gJ3JsRWRpdGFibGVNZXNzYWdlTG9nJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdFZGl0YWJsZU1lc3NhZ2VMb2dDb250cm9sbGVyJztcclxudmFyIF9fb2JqZWN0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxuO1xyXG52YXIgRWRpdGFibGVNZXNzYWdlTG9nQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBFZGl0YWJsZU1lc3NhZ2VMb2dDb250cm9sbGVyKCRzY29wZSwgbWVzc2FnZUxvZ0ZhY3RvcnksIG9iamVjdCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlTG9nU2VydmljZSA9IG1lc3NhZ2VMb2dGYWN0b3J5LmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5tZXNzYWdlTG9nU2VydmljZS5idXN5OyB9LCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYnVzeSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2F2aW5nTWVzc2FnZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuYnVzeSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIEVkaXRhYmxlTWVzc2FnZUxvZ0NvbnRyb2xsZXIucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAodGhpcy5vYmplY3QuaXNOdWxsT3JXaGl0ZXNwYWNlKHRoaXMubmV3TWVzc2FnZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2F2aW5nTWVzc2FnZSA9IHRydWU7XHJcbiAgICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLm5ld01lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5uZXdNZXNzYWdlID0gJyc7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZUxvZ1NlcnZpY2UuYWRkTWVzc2FnZSh7IG1lc3NhZ2U6IG1lc3NhZ2UgfSk7XHJcbiAgICB9O1xyXG4gICAgRWRpdGFibGVNZXNzYWdlTG9nQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCBtZXNzYWdlTG9nX3NlcnZpY2VfMS5mYWN0b3J5TmFtZSwgX19vYmplY3Quc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIEVkaXRhYmxlTWVzc2FnZUxvZ0NvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuRWRpdGFibGVNZXNzYWdlTG9nQ29udHJvbGxlciA9IEVkaXRhYmxlTWVzc2FnZUxvZ0NvbnRyb2xsZXI7XHJcbmZ1bmN0aW9uIGVkaXRhYmxlTWVzc2FnZUxvZygpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdFJyxcclxuICAgICAgICB0ZW1wbGF0ZTogXCJcXG5cXHRcXHRcXHQ8Zm9ybSBuZy1zdWJtaXQ9XFxcImxvZy5hZGQoKVxcXCI+XFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiaW5wdXQtZ3JvdXBcXFwiPlxcblxcdFxcdFxcdFxcdFxcdDxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIiBuZy1tb2RlbD1cXFwibG9nLm5ld01lc3NhZ2VcXFwiIHBsYWNlaG9sZGVyPVxcXCJFbnRlciBsb2cgbWVzc2FnZVxcXCIgLz5cXG5cXHRcXHRcXHRcXHRcXHQ8c3BhbiBjbGFzcz1cXFwiaW5wdXQtZ3JvdXAtYnRuXFxcIj5cXG5cXHRcXHRcXHRcXHRcXHRcXHQ8YnV0dG9uIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHRcXFwiIHR5cGU9XFxcInN1Ym1pdFxcXCIgbmctZGlzYWJsZWQ9XFxcImxvZy5idXN5XFxcIj5cXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHQ8cmwtYnVzeSBsb2FkaW5nPVxcXCJsb2cuc2F2aW5nTWVzc2FnZVxcXCI+PC9ybC1idXN5PiBBZGRcXG5cXHRcXHRcXHRcXHRcXHRcXHQ8L2J1dHRvbj5cXG5cXHRcXHRcXHRcXHRcXHQ8L3NwYW4+XFxuXFx0XFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwibWVzc2FnZS1sb2dcXFwiPlxcblxcdFxcdFxcdFxcdFxcdDxybC1tZXNzYWdlLWxvZyBzZXJ2aWNlPVxcXCJsb2cuc2VydmljZVxcXCIgcGFnZS1zaXplPVxcXCJsb2cucGFnZVNpemVcXFwiIG1lc3NhZ2UtbG9nPVxcXCJsb2cubWVzc2FnZUxvZ1NlcnZpY2VcXFwiXFxuXFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0XFx0Y3VycmVudC11c2VyPVxcXCJsb2cuY3VycmVudFVzZXJcXFwiIGNhbi1kZWxldGU9XFxcImxvZy5jYW5EZWxldGVcXFwiPjwvcmwtbWVzc2FnZS1sb2c+XFxuXFx0XFx0XFx0XFx0PC9kaXY+XFxuXFx0XFx0XFx0PC9mb3JtPlxcblxcdFxcdFwiLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICAgICAgY29udHJvbGxlckFzOiAnbG9nJyxcclxuICAgICAgICBzY29wZToge30sXHJcbiAgICAgICAgYmluZFRvQ29udHJvbGxlcjoge1xyXG4gICAgICAgICAgICBzZXJ2aWNlOiAnPScsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiAnPScsXHJcbiAgICAgICAgICAgIGN1cnJlbnRVc2VyOiAnPT8nLFxyXG4gICAgICAgICAgICBjYW5EZWxldGU6ICc9PycsXHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5lZGl0YWJsZU1lc3NhZ2VMb2cgPSBlZGl0YWJsZU1lc3NhZ2VMb2c7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVpXUnBkR0ZpYkdWTlpYTnpZV2RsVEc5bkxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpWldScGRHRmliR1ZOWlhOellXZGxURzluTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenRCUVVsaUxEWkRRVUY1UWl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlJYaEVMRzFEUVUxUExITkNRVUZ6UWl4RFFVRkRMRU5CUVVFN1FVRkZia0lzY1VKQlFXRXNSMEZCVnl4elFrRkJjMElzUTBGQlF6dEJRVU12UXl4elFrRkJZeXhIUVVGWExEaENRVUU0UWl4RFFVRkJPMEZCUld4RkxFbEJRVThzVVVGQlVTeEhRVUZITEhWRFFVRlJMRU5CUVVNc1RVRkJUU3hEUVVGRE8wRkJRVUVzUTBGQlF6dEJRVk51UXp0SlFXRkRMSE5EUVVGWkxFMUJRWE5DTEVWQlF5OUNMR2xDUVVGeFF5eEZRVU0zUWl4TlFVRXJRanRSUVdZelF5eHBRa0Z6UTBNN1VVRjJRbGNzVjBGQlRTeEhRVUZPTEUxQlFVMHNRMEZCZVVJN1VVRkRla01zU1VGQlNTeERRVUZETEdsQ1FVRnBRaXhIUVVGSExHbENRVUZwUWl4RFFVRkRMRmRCUVZjc1JVRkJSU3hEUVVGRE8xRkJSWHBFTEUxQlFVMHNRMEZCUXl4TlFVRk5MRU5CUVVNc1kwRkJhVUlzVFVGQlRTeERRVUZETEV0QlFVa3NRMEZCUXl4cFFrRkJhVUlzUTBGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1ZVRkJReXhMUVVGak8xbEJRM0JHTEVWQlFVVXNRMEZCUXl4RFFVRkRMRXRCUVVzc1MwRkJTeXhMUVVGTExFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTnlRaXhMUVVGSkxFTkJRVU1zU1VGQlNTeEhRVUZITEV0QlFVc3NRMEZCUXp0blFrRkRiRUlzUzBGQlNTeERRVUZETEdGQlFXRXNSMEZCUnl4TFFVRkxMRU5CUVVNN1dVRkROVUlzUTBGQlF6dFpRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMmRDUVVOUUxFdEJRVWtzUTBGQlF5eEpRVUZKTEVkQlFVY3NTVUZCU1N4RFFVRkRPMWxCUTJ4Q0xFTkJRVU03VVVGRFJpeERRVUZETEVOQlFVTXNRMEZCUXp0SlFVTktMRU5CUVVNN1NVRkZSQ3d3UTBGQlJ5eEhRVUZJTzFGQlEwTXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCYTBJc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNKRUxFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTTdVVUZEWWl4RFFVRkRPMUZCUlVRc1NVRkJTU3hEUVVGRExHRkJRV0VzUjBGQlJ5eEpRVUZKTEVOQlFVTTdVVUZETVVJc1NVRkJTU3hQUVVGUExFZEJRVmNzU1VGQlNTeERRVUZETEZWQlFWVXNRMEZCUXp0UlFVTjBReXhKUVVGSkxFTkJRVU1zVlVGQlZTeEhRVUZITEVWQlFVVXNRMEZCUXp0UlFVTnlRaXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEdsQ1FVRnBRaXhEUVVGRExGVkJRVlVzUTBGQlF5eEZRVUZGTEU5QlFVOHNSVUZCUlN4UFFVRlBMRVZCUVVVc1EwRkJReXhEUVVGRE8wbEJRMmhGTEVOQlFVTTdTVUY2UWswc2IwTkJRVThzUjBGQllTeERRVUZETEZGQlFWRXNSVUZCUlN4blEwRkJjVUlzUlVGQlJTeFJRVUZSTEVOQlFVTXNWMEZCVnl4RFFVRkRMRU5CUVVNN1NVRXdRbkJHTEcxRFFVRkRPMEZCUVVRc1EwRkJReXhCUVhSRFJDeEpRWE5EUXp0QlFYUkRXU3h2UTBGQk5FSXNLMEpCYzBONFF5eERRVUZCTzBGQlJVUTdTVUZEUXl4WlFVRlpMRU5CUVVNN1NVRkRZaXhOUVVGTkxFTkJRVU03VVVGRFRpeFJRVUZSTEVWQlFVVXNSMEZCUnp0UlFVTmlMRkZCUVZFc1JVRkJSU3d3ZFVKQlpWUTdVVUZEUkN4VlFVRlZMRVZCUVVVc2MwSkJRV003VVVGRE1VSXNXVUZCV1N4RlFVRkZMRXRCUVVzN1VVRkRia0lzUzBGQlN5eEZRVUZGTEVWQlFVVTdVVUZEVkN4blFrRkJaMElzUlVGQlJUdFpRVU5xUWl4UFFVRlBMRVZCUVVVc1IwRkJSenRaUVVOYUxGRkJRVkVzUlVGQlJTeEhRVUZITzFsQlEySXNWMEZCVnl4RlFVRkZMRWxCUVVrN1dVRkRha0lzVTBGQlV5eEZRVUZGTEVsQlFVazdVMEZEWmp0TFFVTkVMRU5CUVVNN1FVRkRTQ3hEUVVGRE8wRkJPVUpsTERCQ1FVRnJRaXh4UWtFNFFtcERMRU5CUVVFaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvbWVzc2FnZUxvZy9lZGl0YWJsZU1lc3NhZ2VMb2cuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3MvY29tbW9uanMuZC50cycgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMubXVsdGlTdGVwSW5kaWNhdG9yJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsTXVsdGlTdGVwSW5kaWNhdG9yJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdNdWx0aVN0ZXBJbmRpY2F0b3JDb250cm9sbGVyJztcclxudmFyIF9fb2JqZWN0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxudmFyIE11bHRpU3RlcEluZGljYXRvckNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTXVsdGlTdGVwSW5kaWNhdG9yQ29udHJvbGxlcigkc3RhdGUsICRxLCBvYmplY3QpIHtcclxuICAgICAgICB0aGlzLiRzdGF0ZSA9ICRzdGF0ZTtcclxuICAgICAgICB0aGlzLiRxID0gJHE7XHJcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgdGhpcy5jb25maWd1cmVTdGVwcygpO1xyXG4gICAgfVxyXG4gICAgTXVsdGlTdGVwSW5kaWNhdG9yQ29udHJvbGxlci5wcm90b3R5cGUub25DbGljayA9IGZ1bmN0aW9uIChzdGVwKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFueUxvYWRpbmcoKSkge1xyXG4gICAgICAgICAgICBzdGVwLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLiRxLndoZW4oc3RlcC5vbkNsaWNrKCkpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc3RlcC5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNdWx0aVN0ZXBJbmRpY2F0b3JDb250cm9sbGVyLnByb3RvdHlwZS5hbnlMb2FkaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBfLnNvbWUodGhpcy5zdGVwcywgZnVuY3Rpb24gKHN0ZXApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ZXAubG9hZGluZztcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBNdWx0aVN0ZXBJbmRpY2F0b3JDb250cm9sbGVyLnByb3RvdHlwZS5jb25maWd1cmVTdGVwcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIF8uZWFjaCh0aGlzLnN0ZXBzLCBmdW5jdGlvbiAoc3RlcCkge1xyXG4gICAgICAgICAgICBzdGVwLmhhc0NvdW50ID0gXy5pc0Z1bmN0aW9uKHN0ZXAuY291bnQpO1xyXG4gICAgICAgICAgICBzdGVwLmdldENvbXBsZXRlZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLmdldElzQ29tcGxldGVkKHN0ZXApOyB9O1xyXG4gICAgICAgICAgICBzdGVwLmdldFZhbGlkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMuZ2V0SXNWYWxpZChzdGVwKTsgfTtcclxuICAgICAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24oc3RlcC5vbkNsaWNrKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLm9iamVjdC5pc051bGxPcldoaXRlc3BhY2Uoc3RlcC5zdGF0ZU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RlcC5pbmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGVwLm9uQ2xpY2sgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5yZWRpcmVjdFRvU3RhdGUoc3RlcCk7IH07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLiRzdGF0ZS5pbmNsdWRlcyhzdGVwLnN0YXRlTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RlcC5pc0N1cnJlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIE11bHRpU3RlcEluZGljYXRvckNvbnRyb2xsZXIucHJvdG90eXBlLnJlZGlyZWN0VG9TdGF0ZSA9IGZ1bmN0aW9uIChzdGVwKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy4kc3RhdGUuZ28oc3RlcC5zdGF0ZU5hbWUpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5jbGVhckN1cnJlbnRTdGF0ZSgpO1xyXG4gICAgICAgICAgICBzdGVwLmlzQ3VycmVudCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTXVsdGlTdGVwSW5kaWNhdG9yQ29udHJvbGxlci5wcm90b3R5cGUuY2xlYXJDdXJyZW50U3RhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXy5lYWNoKHRoaXMuc3RlcHMsIGZ1bmN0aW9uIChzdGVwKSB7XHJcbiAgICAgICAgICAgIHN0ZXAuaXNDdXJyZW50ID0gZmFsc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgTXVsdGlTdGVwSW5kaWNhdG9yQ29udHJvbGxlci5wcm90b3R5cGUuZ2V0SXNDb21wbGV0ZWQgPSBmdW5jdGlvbiAoc3RlcCkge1xyXG4gICAgICAgIHJldHVybiBfLmlzRnVuY3Rpb24oc3RlcC5pc0NvbXBsZXRlZClcclxuICAgICAgICAgICAgPyBzdGVwLmlzQ29tcGxldGVkKClcclxuICAgICAgICAgICAgOiBzdGVwLmlzQ29tcGxldGVkO1xyXG4gICAgfTtcclxuICAgIE11bHRpU3RlcEluZGljYXRvckNvbnRyb2xsZXIucHJvdG90eXBlLnNldElzQ29tcGxldGVkID0gZnVuY3Rpb24gKHN0ZXAsIGlzQ29tcGxldGVkKSB7XHJcbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24oc3RlcC5pc0NvbXBsZXRlZCkpIHtcclxuICAgICAgICAgICAgc3RlcC5pc0NvbXBsZXRlZCA9IGlzQ29tcGxldGVkO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNdWx0aVN0ZXBJbmRpY2F0b3JDb250cm9sbGVyLnByb3RvdHlwZS5nZXRJc1ZhbGlkID0gZnVuY3Rpb24gKHN0ZXApIHtcclxuICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHN0ZXAuaXNWYWxpZCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ZXAuaXNWYWxpZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghXy5pc1VuZGVmaW5lZChzdGVwLmlzVmFsaWQgIT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN0ZXAuaXNWYWxpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBNdWx0aVN0ZXBJbmRpY2F0b3JDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzdGF0ZScsICckcScsIF9fb2JqZWN0LnNlcnZpY2VOYW1lXTtcclxuICAgIHJldHVybiBNdWx0aVN0ZXBJbmRpY2F0b3JDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLk11bHRpU3RlcEluZGljYXRvckNvbnRyb2xsZXIgPSBNdWx0aVN0ZXBJbmRpY2F0b3JDb250cm9sbGVyO1xyXG52YXIgbXVsdGlTdGVwSW5kaWNhdG9yID0ge1xyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vbXVsdGlTdGVwSW5kaWNhdG9yLmh0bWwnKSxcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdicmVhZGNydW1iJyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgc3RlcHM6ICc9JyxcclxuICAgICAgICBudW1iZXJlZDogJz0nLFxyXG4gICAgfSxcclxufTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbX19vYmplY3QubW9kdWxlTmFtZV0pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgbXVsdGlTdGVwSW5kaWNhdG9yKVxyXG4gICAgLmNvbnRyb2xsZXIoZXhwb3J0cy5jb250cm9sbGVyTmFtZSwgTXVsdGlTdGVwSW5kaWNhdG9yQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWJYVnNkR2xUZEdWd1NXNWthV05oZEc5eUxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpYlhWc2RHbFRkR1Z3U1c1a2FXTmhkRzl5TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMREJFUVVFd1JEdEJRVVV4UkN4WlFVRlpMRU5CUVVNN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVTnVReXhKUVVGWkxFTkJRVU1zVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVVTFRaXcyUTBGQmVVSXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlFUdEJRVVUzUXl4clFrRkJWU3hIUVVGWExIRkRRVUZ4UXl4RFFVRkRPMEZCUXpORUxIRkNRVUZoTEVkQlFWY3NjMEpCUVhOQ0xFTkJRVU03UVVGREwwTXNjMEpCUVdNc1IwRkJWeXc0UWtGQk9FSXNRMEZCUXp0QlFVVnVSU3hKUVVGUExGRkJRVkVzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVhGQ2JFTTdTVUZKUXl4elEwRkJiMElzVFVGQlowTXNSVUZEZUVNc1JVRkJjVUlzUlVGRGNrSXNUVUZCSzBJN1VVRkdka0lzVjBGQlRTeEhRVUZPTEUxQlFVMHNRMEZCTUVJN1VVRkRlRU1zVDBGQlJTeEhRVUZHTEVWQlFVVXNRMEZCYlVJN1VVRkRja0lzVjBGQlRTeEhRVUZPTEUxQlFVMHNRMEZCZVVJN1VVRkRNVU1zU1VGQlNTeERRVUZETEdOQlFXTXNSVUZCUlN4RFFVRkRPMGxCUTNaQ0xFTkJRVU03U1VGRlJDdzRRMEZCVHl4SFFVRlFMRlZCUVZFc1NVRkJjVUk3VVVGRE5VSXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVlVGQlZTeEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUTNoQ0xFbEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NTVUZCU1N4RFFVRkRPMWxCUTNCQ0xFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXp0blFrRkRha01zU1VGQlNTeERRVUZETEU5QlFVOHNSMEZCUnl4TFFVRkxMRU5CUVVNN1dVRkRkRUlzUTBGQlF5eERRVUZETEVOQlFVTTdVVUZEU2l4RFFVRkRPMGxCUTBZc1EwRkJRenRKUVVWRUxHbEVRVUZWTEVkQlFWWTdVVUZEUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RlFVRkZMRlZCUVVNc1NVRkJjVUk3V1VGREwwTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU03VVVGRGNrSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1NVRkRTaXhEUVVGRE8wbEJSVThzY1VSQlFXTXNSMEZCZEVJN1VVRkJRU3hwUWtGclFrTTdVVUZxUWtFc1EwRkJReXhEUVVGRExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTMEZCU3l4RlFVRkZMRlZCUVVNc1NVRkJjVUk3V1VGRGVFTXNTVUZCU1N4RFFVRkRMRkZCUVZFc1IwRkJSeXhEUVVGRExFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenRaUVVONlF5eEpRVUZKTEVOQlFVTXNXVUZCV1N4SFFVRkhMR05CUVdsQ0xFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNZMEZCWXl4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEzcEZMRWxCUVVrc1EwRkJReXhSUVVGUkxFZEJRVWNzWTBGQmFVSXNUVUZCVFN4RFFVRkRMRXRCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkZha1VzUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1ZVRkJWU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1owSkJRMnBETEVWQlFVVXNRMEZCUXl4RFFVRkRMRXRCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFXdENMRU5CUVVNc1NVRkJTU3hEUVVGRExGTkJRVk1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0dlFrRkRjRVFzU1VGQlNTeERRVUZETEZGQlFWRXNSMEZCUnl4SlFVRkpMRU5CUVVNN1owSkJRM1JDTEVOQlFVTTdaMEpCUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03YjBKQlExQXNTVUZCU1N4RFFVRkRMRTlCUVU4c1IwRkJSeXhqUVVGblF5eE5RVUZOTEVOQlFVTXNTMEZCU1N4RFFVRkRMR1ZCUVdVc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0dlFrRkZjRVlzUlVGQlJTeERRVUZETEVOQlFVTXNTMEZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhSUVVGUkxFTkJRVU1zU1VGQlNTeERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenQzUWtGRE1VTXNTVUZCU1N4RFFVRkRMRk5CUVZNc1IwRkJSeXhKUVVGSkxFTkJRVU03YjBKQlEzWkNMRU5CUVVNN1owSkJRMFlzUTBGQlF6dFpRVU5HTEVOQlFVTTdVVUZEUml4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGRlR5eHpSRUZCWlN4SFFVRjJRaXhWUVVGM1FpeEpRVUZ4UWp0UlFVRTNReXhwUWtGTFF6dFJRVXBCTEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFVkJRVVVzUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNc1NVRkJTU3hEUVVGRE8xbEJRekZETEV0QlFVa3NRMEZCUXl4cFFrRkJhVUlzUlVGQlJTeERRVUZETzFsQlEzcENMRWxCUVVrc1EwRkJReXhUUVVGVExFZEJRVWNzU1VGQlNTeERRVUZETzFGQlEzWkNMRU5CUVVNc1EwRkJReXhEUVVGRE8wbEJRMG9zUTBGQlF6dEpRVVZQTEhkRVFVRnBRaXhIUVVGNlFqdFJRVU5ETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVXNzUlVGQlJTeFZRVUZETEVsQlFWYzdXVUZET1VJc1NVRkJTU3hEUVVGRExGTkJRVk1zUjBGQlJ5eExRVUZMTEVOQlFVTTdVVUZEZUVJc1EwRkJReXhEUVVGRExFTkJRVU03U1VGRFNpeERRVUZETzBsQlJVOHNjVVJCUVdNc1IwRkJkRUlzVlVGQmRVSXNTVUZCY1VJN1VVRkRNME1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4VlFVRlZMRU5CUVVNc1NVRkJTU3hEUVVGRExGZEJRVmNzUTBGQlF6dGpRVU5zUWl4SlFVRkpMRU5CUVVNc1YwRkJXU3hGUVVGRk8yTkJRekZDTEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNN1NVRkRPVUlzUTBGQlF6dEpRVVZQTEhGRVFVRmpMRWRCUVhSQ0xGVkJRWFZDTEVsQlFYRkNMRVZCUVVVc1YwRkJiMEk3VVVGRGFrVXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGNrTXNTVUZCU1N4RFFVRkRMRmRCUVZjc1IwRkJSeXhYUVVGWExFTkJRVU03VVVGRGFFTXNRMEZCUXp0SlFVTkdMRU5CUVVNN1NVRkZUeXhwUkVGQlZTeEhRVUZzUWl4VlFVRnRRaXhKUVVGeFFqdFJRVU4yUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVlVGQlZTeERRVUZETEVsQlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGFFTXNUVUZCVFN4RFFVRnBRaXhKUVVGSkxFTkJRVU1zVDBGQlVTeEZRVUZGTEVOQlFVTTdVVUZEZUVNc1EwRkJRenRSUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhYUVVGWExFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGFrUXNUVUZCVFN4RFFVRlZMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU03VVVGRE9VSXNRMEZCUXp0UlFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRE8xbEJRMUFzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXp0UlFVTmlMRU5CUVVNN1NVRkRSaXhEUVVGRE8wbEJNMFZOTEc5RFFVRlBMRWRCUVdFc1EwRkJReXhSUVVGUkxFVkJRVVVzU1VGQlNTeEZRVUZGTEZGQlFWRXNRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJRenRKUVRSRmJrVXNiVU5CUVVNN1FVRkJSQ3hEUVVGRExFRkJMMFZFTEVsQkswVkRPMEZCTDBWWkxHOURRVUUwUWl3clFrRXJSWGhETEVOQlFVRTdRVUZGUkN4SlFVRkpMR3RDUVVGclFpeEhRVUU0UWp0SlFVTnVSQ3hSUVVGUkxFVkJRVVVzVDBGQlR5eERRVUZETERKQ1FVRXlRaXhEUVVGRE8wbEJRemxETEZWQlFWVXNSVUZCUlN4elFrRkJZenRKUVVNeFFpeFpRVUZaTEVWQlFVVXNXVUZCV1R0SlFVTXhRaXhSUVVGUkxFVkJRVVU3VVVGRFZDeExRVUZMTEVWQlFVVXNSMEZCUnp0UlFVTldMRkZCUVZFc1JVRkJSU3hIUVVGSE8wdEJRMkk3UTBGRFJDeERRVUZETzBGQlJVWXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVOQlFVTXNVVUZCVVN4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRE8wdEJReTlETEZOQlFWTXNRMEZCUXl4eFFrRkJZU3hGUVVGRkxHdENRVUZyUWl4RFFVRkRPMHRCUXpWRExGVkJRVlVzUTBGQlF5eHpRa0ZCWXl4RlFVRkZMRFJDUVVFMFFpeERRVUZETEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL211bHRpU3RlcEluZGljYXRvci9tdWx0aVN0ZXBJbmRpY2F0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJtdWx0aS1zdGVwIGNoZWNrZWRcXFwiIG5nLWNsYXNzPVxcXCJ7ICdudW1iZXJlZCc6IGJyZWFkY3J1bWIubnVtYmVyZWQgfVxcXCI+XFxyXFxuXFx0PG9sPlxcclxcblxcdFxcdDxsaSBuZy1yZXBlYXQ9XFxcInN0ZXAgaW4gYnJlYWRjcnVtYi5zdGVwc1xcXCIgbmctY2xpY2s9XFxcImJyZWFkY3J1bWIub25DbGljayhzdGVwKVxcXCJcXHJcXG5cXHRcXHRcXHRuZy1jbGFzcz1cXFwieyAnY29tcGxldGVkJzogc3RlcC5nZXRDb21wbGV0ZWQoKSwgJ2N1cnJlbnQnOiBzdGVwLmlzQ3VycmVudCwgJ2FjdGl2ZSc6ICFzdGVwLmluYWN0aXZlICYmICFicmVhZGNydW1iLmFueUxvYWRpbmcoKSB9XFxcIj5cXHJcXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJ3cmFwXFxcIj5cXHJcXG5cXHRcXHRcXHRcXHQ8cCBjbGFzcz1cXFwiYmFkZ2VcXFwiIG5nLXNob3c9XFxcInN0ZXAuaGFzQ291bnRcXFwiPnt7c3RlcC5jb3VudCgpfX08L3A+XFxyXFxuXFx0XFx0XFx0XFx0PHAgY2xhc3M9XFxcImVycm9yXFxcIiBuZy1pZj1cXFwiIXN0ZXAuZ2V0VmFsaWQoKVxcXCI+PC9wPlxcclxcblxcdFxcdFxcdFxcdDxwIGNsYXNzPVxcXCJ0aXRsZVxcXCI+e3tzdGVwLnRpdGxlfX0gPHJsLWJ1c3kgbG9hZGluZz1cXFwic3RlcC5sb2FkaW5nXFxcIj48L3JsLWJ1c3k+PC9wPlxcclxcblxcdFxcdFxcdFxcdDxwIGNsYXNzPVxcXCJzdWJ0aXRsZVxcXCI+e3tzdGVwLnN1YnRpdGxlfX08L3A+XFxyXFxuXFx0XFx0XFx0PC9kaXY+XFxyXFxuXFx0XFx0PC9saT5cXHJcXG5cXHQ8L29sPlxcclxcbjwvZGl2PlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL211bHRpU3RlcEluZGljYXRvci9tdWx0aVN0ZXBJbmRpY2F0b3IuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fb2JqZWN0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxudmFyIHJhZGlvR3JvdXBfMSA9IHJlcXVpcmUoJy4vcmFkaW9Hcm91cCcpO1xyXG5leHBvcnRzLnJhZGlvR3JvdXBEaXJlY3RpdmVOYW1lID0gcmFkaW9Hcm91cF8xLmRpcmVjdGl2ZU5hbWU7XHJcbmV4cG9ydHMucmFkaW9Hcm91cCA9IHJhZGlvR3JvdXBfMS5yYWRpb0dyb3VwO1xyXG5leHBvcnRzLnJhZGlvR3JvdXBDb250cm9sbGVyTmFtZSA9IHJhZGlvR3JvdXBfMS5jb250cm9sbGVyTmFtZTtcclxuZXhwb3J0cy5SYWRpb0dyb3VwQ29udHJvbGxlciA9IHJhZGlvR3JvdXBfMS5SYWRpb0dyb3VwQ29udHJvbGxlcjtcclxudmFyIHJhZGlvXzEgPSByZXF1aXJlKCcuL3JhZGlvJyk7XHJcbmV4cG9ydHMucmFkaW9Db21wb25lbnROYW1lID0gcmFkaW9fMS5jb21wb25lbnROYW1lO1xyXG5leHBvcnRzLnJhZGlvID0gcmFkaW9fMS5yYWRpbztcclxuZXhwb3J0cy5yYWRpb0NvbnRyb2xsZXJOYW1lID0gcmFkaW9fMS5jb250cm9sbGVyTmFtZTtcclxuZXhwb3J0cy5SYWRpb0NvbnRyb2xsZXIgPSByYWRpb18xLlJhZGlvQ29udHJvbGxlcjtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsMjEuY29tcG9uZW50cy5yYWRpbyc7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW19fb2JqZWN0Lm1vZHVsZU5hbWVdKVxyXG4gICAgLmRpcmVjdGl2ZShyYWRpb0dyb3VwXzEuZGlyZWN0aXZlTmFtZSwgcmFkaW9Hcm91cF8xLnJhZGlvR3JvdXApXHJcbiAgICAuY29udHJvbGxlcihyYWRpb0dyb3VwXzEuY29udHJvbGxlck5hbWUsIHJhZGlvR3JvdXBfMS5SYWRpb0dyb3VwQ29udHJvbGxlcilcclxuICAgIC5jb21wb25lbnQocmFkaW9fMS5jb21wb25lbnROYW1lLCByYWRpb18xLnJhZGlvKVxyXG4gICAgLmNvbnRyb2xsZXIocmFkaW9fMS5jb250cm9sbGVyTmFtZSwgcmFkaW9fMS5SYWRpb0NvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljbUZrYVc4dWJXOWtkV3hsTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2ljbUZrYVc4dWJXOWtkV3hsTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUlc1RExEWkRRVUY1UWl3NFFrRkJPRUlzUTBGQlF5eERRVUZCTzBGQlEzaEVMRWxCUVU4c1VVRkJVU3hIUVVGSExIVkRRVUZSTEVOQlFVTXNUVUZCVFN4RFFVRkRPMEZCUld4RExESkNRVXRQTEdOQlFXTXNRMEZCUXl4RFFVRkJPMEZCVTNKQ0xDdENRVUYxUWp0QlFVTjJRaXhyUWtGQlZUdEJRVU5XTEdkRFFVRjNRanRCUVVONFFpdzBRa0ZCYjBJN1FVRllja0lzYzBKQlMwOHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRlBhRUlzTUVKQlFXdENPMEZCUTJ4Q0xHRkJRVXM3UVVGRFRDd3lRa0ZCYlVJN1FVRkRia0lzZFVKQlFXVTdRVUZIVEN4clFrRkJWU3hIUVVGWExIVkNRVUYxUWl4RFFVRkRPMEZCUlhoRUxFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNhMEpCUVZVc1JVRkJSU3hEUVVGRExGRkJRVkVzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXp0TFFVTXZReXhUUVVGVExFTkJRVU1zTUVKQlFYVkNMRVZCUVVVc2RVSkJRVlVzUTBGQlF6dExRVU01UXl4VlFVRlZMRU5CUVVNc01rSkJRWGRDTEVWQlFVVXNhVU5CUVc5Q0xFTkJRVU03UzBGRE1VUXNVMEZCVXl4RFFVRkRMSEZDUVVGclFpeEZRVUZGTEdGQlFVc3NRMEZCUXp0TFFVTndReXhWUVVGVkxFTkJRVU1zYzBKQlFXMUNMRVZCUVVVc2RVSkJRV1VzUTBGQlF5eERRVUZESW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9yYWRpby9yYWRpby5tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fb2JqZWN0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxudmFyIF9fZ3VpZCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5ndWlkO1xyXG5leHBvcnRzLmRpcmVjdGl2ZU5hbWUgPSAncmxSYWRpb0dyb3VwJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdSYWRpb0dyb3VwQ29udHJvbGxlcic7XHJcbnZhciBSYWRpb0dyb3VwID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJhZGlvR3JvdXAobmdNb2RlbCwgbmFtZSkge1xyXG4gICAgICAgIHRoaXMubmdNb2RlbCA9IG5nTW9kZWw7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShSYWRpb0dyb3VwLnByb3RvdHlwZSwgXCJzZWxlY3Rpb25cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZ01vZGVsLiR2aWV3VmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLm5nTW9kZWwuJHNldFZpZXdWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUmFkaW9Hcm91cDtcclxufSgpKTtcclxuZXhwb3J0cy5SYWRpb0dyb3VwID0gUmFkaW9Hcm91cDtcclxudmFyIFJhZGlvR3JvdXBDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJhZGlvR3JvdXBDb250cm9sbGVyKCRzY29wZSwgJGF0dHJzLCBvYmplY3QpIHtcclxuICAgICAgICB0aGlzLiRzY29wZSA9ICRzY29wZTtcclxuICAgICAgICB0aGlzLiRhdHRycyA9ICRhdHRycztcclxuICAgICAgICB0aGlzLm9iamVjdCA9IG9iamVjdDtcclxuICAgIH1cclxuICAgIFJhZGlvR3JvdXBDb250cm9sbGVyLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBuYW1lO1xyXG4gICAgICAgIGlmICghdGhpcy5vYmplY3QuaXNOdWxsT3JXaGl0ZXNwYWNlKHRoaXMuJGF0dHJzLnJsUmFkaW9Hcm91cCkpIHtcclxuICAgICAgICAgICAgbmFtZSA9IHRoaXMuJGF0dHJzLnJsUmFkaW9Hcm91cDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoIXRoaXMub2JqZWN0LmlzTnVsbE9yV2hpdGVzcGFjZSh0aGlzLiRhdHRycy5uYW1lKSkge1xyXG4gICAgICAgICAgICBuYW1lID0gdGhpcy4kYXR0cnMubmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG5hbWUgPSAnUmFkaW9Hcm91cC0nICsgX19ndWlkLmd1aWQucmFuZG9tKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZ3JvdXAgPSBuZXcgUmFkaW9Hcm91cCh0aGlzLm5nTW9kZWwsIG5hbWUpO1xyXG4gICAgfTtcclxuICAgIFJhZGlvR3JvdXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckYXR0cnMnLCBfX29iamVjdC5zZXJ2aWNlTmFtZV07XHJcbiAgICByZXR1cm4gUmFkaW9Hcm91cENvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuUmFkaW9Hcm91cENvbnRyb2xsZXIgPSBSYWRpb0dyb3VwQ29udHJvbGxlcjtcclxuZnVuY3Rpb24gcmFkaW9Hcm91cCgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBRScsXHJcbiAgICAgICAgcmVxdWlyZTogeyBuZ01vZGVsOiAnbmdNb2RlbCcgfSxcclxuICAgICAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWUsXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMucmFkaW9Hcm91cCA9IHJhZGlvR3JvdXA7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWNtRmthVzlIY205MWNDNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW5KaFpHbHZSM0p2ZFhBdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzV1VGQldTeERRVUZETzBGQlNXSXNOa05CUVhsQ0xEaENRVUU0UWl4RFFVRkRMRU5CUVVFN1FVRkRlRVFzU1VGQlR5eFJRVUZSTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRGJFTXNTVUZCVHl4TlFVRk5MRWRCUVVjc2RVTkJRVkVzUTBGQlF5eEpRVUZKTEVOQlFVTTdRVUZGYmtJc2NVSkJRV0VzUjBGQlZ5eGpRVUZqTEVOQlFVTTdRVUZEZGtNc2MwSkJRV01zUjBGQlZ5eHpRa0ZCYzBJc1EwRkJRenRCUVU4elJEdEpRVk5ETEc5Q1FVRnZRaXhQUVVFNFFpeEZRVUZUTEVsQlFXRTdVVUZCY0VRc1dVRkJUeXhIUVVGUUxFOUJRVThzUTBGQmRVSTdVVUZCVXl4VFFVRkpMRWRCUVVvc1NVRkJTU3hEUVVGVE8wbEJRVWNzUTBGQlF6dEpRVkkxUlN4elFrRkJTU3hwUTBGQlV6dGhRVUZpTzFsQlEwTXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zVlVGQlZTeERRVUZETzFGQlEyaERMRU5CUVVNN1lVRkZSQ3hWUVVGakxFdEJRVlU3V1VGRGRrSXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhoUVVGaExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTTdVVUZEYmtNc1EwRkJRenM3TzA5QlNrRTdTVUZQUml4cFFrRkJRenRCUVVGRUxFTkJRVU1zUVVGV1JDeEpRVlZETzBGQlZsa3NhMEpCUVZVc1lVRlZkRUlzUTBGQlFUdEJRVVZFTzBsQlMwTXNPRUpCUVc5Q0xFMUJRV2xDTEVWQlEzcENMRTFCUVRaQ0xFVkJRemRDTEUxQlFTdENPMUZCUm5aQ0xGZEJRVTBzUjBGQlRpeE5RVUZOTEVOQlFWYzdVVUZEZWtJc1YwRkJUU3hIUVVGT0xFMUJRVTBzUTBGQmRVSTdVVUZETjBJc1YwRkJUU3hIUVVGT0xFMUJRVTBzUTBGQmVVSTdTVUZCUnl4RFFVRkRPMGxCUlM5RExITkRRVUZQTEVkQlFWQTdVVUZEUXl4SlFVRkpMRWxCUVZrc1EwRkJRenRSUVVOcVFpeEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFXdENMRU5CUVVNc1NVRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eFpRVUZaTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRMMFFzU1VGQlNTeEhRVUZITEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1dVRkJXU3hEUVVGRE8xRkJRMnBETEVOQlFVTTdVVUZCUXl4SlFVRkpMRU5CUVVNc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMR3RDUVVGclFpeERRVUZETEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6bEVMRWxCUVVrc1IwRkJSeXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXp0UlFVTjZRaXhEUVVGRE8xRkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdXVUZEVUN4SlFVRkpMRWRCUVVjc1lVRkJZU3hIUVVGSExFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4RlFVRkZMRU5CUVVNN1VVRkROME1zUTBGQlF6dFJRVVZFTEVsQlFVa3NRMEZCUXl4TFFVRkxMRWRCUVVjc1NVRkJTU3hWUVVGVkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNSVUZCUlN4SlFVRkpMRU5CUVVNc1EwRkJRenRKUVVOcVJDeERRVUZETzBsQmFFSk5MRFJDUVVGUExFZEJRV0VzUTBGQlF5eFJRVUZSTEVWQlFVVXNVVUZCVVN4RlFVRkZMRkZCUVZFc1EwRkJReXhYUVVGWExFTkJRVU1zUTBGQlF6dEpRV2xDZGtVc01rSkJRVU03UVVGQlJDeERRVUZETEVGQmNrSkVMRWxCY1VKRE8wRkJja0paTERSQ1FVRnZRaXgxUWtGeFFtaERMRU5CUVVFN1FVRkZSRHRKUVVORExGbEJRVmtzUTBGQlF6dEpRVU5pTEUxQlFVMHNRMEZCUXp0UlFVTk9MRkZCUVZFc1JVRkJSU3hKUVVGSk8xRkJRMlFzVDBGQlR5eEZRVUZGTEVWQlFVVXNUMEZCVHl4RlFVRkZMRk5CUVZNc1JVRkJSVHRSUVVNdlFpeFZRVUZWTEVWQlFVVXNjMEpCUVdNN1VVRkRNVUlzWjBKQlFXZENMRVZCUVVVc1NVRkJTVHRMUVVOMFFpeERRVUZETzBGQlEwZ3NRMEZCUXp0QlFWSmxMR3RDUVVGVkxHRkJVWHBDTEVOQlFVRWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3JhZGlvL3JhZGlvR3JvdXAuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIHJhZGlvR3JvdXBfMSA9IHJlcXVpcmUoJy4vcmFkaW9Hcm91cCcpO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxSYWRpbyc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnUmFkaW9Db250cm9sbGVyJztcclxudmFyIFJhZGlvQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSYWRpb0NvbnRyb2xsZXIoJHNjb3BlKSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICB9XHJcbiAgICBSYWRpb0NvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZ3JvdXBDb250cm9sbGVyICE9IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yYWRpb0dyb3VwID0gdGhpcy5ncm91cENvbnRyb2xsZXIuZ3JvdXA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJhZGlvR3JvdXAgPSBuZXcgcmFkaW9Hcm91cF8xLlJhZGlvR3JvdXAodGhpcy5uZ01vZGVsKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgUmFkaW9Db250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZSddO1xyXG4gICAgcmV0dXJuIFJhZGlvQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5SYWRpb0NvbnRyb2xsZXIgPSBSYWRpb0NvbnRyb2xsZXI7XHJcbmV4cG9ydHMucmFkaW8gPSB7XHJcbiAgICByZXF1aXJlOiB7XHJcbiAgICAgICAgZ3JvdXBDb250cm9sbGVyOiAnP15ecmxSYWRpb0dyb3VwJyxcclxuICAgICAgICBuZ01vZGVsOiAnP25nTW9kZWwnLFxyXG4gICAgfSxcclxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXHJcbiAgICB0ZW1wbGF0ZTogXCJcXG5cXHRcXHQ8bGFiZWw+XFxuXFx0XFx0XFx0PGlucHV0IGlkPVxcXCJyYWRpb1xcXCIgdHlwZT1cXFwicmFkaW9cXFwiIG5hbWU9XFxcInt7OjpyYWRpby5yYWRpb0dyb3VwLm5hbWV9fVxcXCIgbmctbW9kZWw9XFxcInJhZGlvLnJhZGlvR3JvdXAuc2VsZWN0aW9uXFxcIiBuZy12YWx1ZT1cXFwiOjpyYWRpby52YWx1ZVxcXCIgLz5cXG5cXHRcXHRcXHQ8c3BhbiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcblxcdFxcdDwvbGFiZWw+XFxuXFx0XCIsXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAncmFkaW8nLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICB2YWx1ZTogJzwnLFxyXG4gICAgfSxcclxufTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pY21Ga2FXOHVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKeVlXUnBieTUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTTdRVUZKWWl3eVFrRkJhVVFzWTBGQll5eERRVUZETEVOQlFVRTdRVUZGY2tRc2NVSkJRV0VzUjBGQlZ5eFRRVUZUTEVOQlFVTTdRVUZEYkVNc2MwSkJRV01zUjBGQlZ5eHBRa0ZCYVVJc1EwRkJRenRCUVVWMFJEdEpRVTFETEhsQ1FVRnZRaXhOUVVGcFFqdFJRVUZxUWl4WFFVRk5MRWRCUVU0c1RVRkJUU3hEUVVGWE8wbEJRVWtzUTBGQlF6dEpRVVV4UXl4cFEwRkJUeXhIUVVGUU8xRkJRME1zUlVGQlJTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRMR1ZCUVdVc1NVRkJTU3hKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEyeERMRWxCUVVrc1EwRkJReXhWUVVGVkxFZEJRVWNzU1VGQlNTeERRVUZETEdWQlFXVXNRMEZCUXl4TFFVRkxMRU5CUVVNN1VVRkRPVU1zUTBGQlF6dFJRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTFBc1NVRkJTU3hEUVVGRExGVkJRVlVzUjBGQlJ5eEpRVUZKTEhWQ1FVRlZMRU5CUVVNc1NVRkJTU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETzFGQlEyaEVMRU5CUVVNN1NVRkRSaXhEUVVGRE8wbEJWRTBzZFVKQlFVOHNSMEZCWVN4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8wbEJWWFpETEhOQ1FVRkRPMEZCUVVRc1EwRkJReXhCUVdaRUxFbEJaVU03UVVGbVdTeDFRa0ZCWlN4clFrRmxNMElzUTBGQlFUdEJRVVZWTEdGQlFVc3NSMEZCZVVJN1NVRkRlRU1zVDBGQlR5eEZRVUZGTzFGQlExSXNaVUZCWlN4RlFVRkZMR2xDUVVGcFFqdFJRVU5zUXl4UFFVRlBMRVZCUVVVc1ZVRkJWVHRMUVVOdVFqdEpRVU5FTEZWQlFWVXNSVUZCUlN4SlFVRkpPMGxCUTJoQ0xGRkJRVkVzUlVGQlJTeDNUa0ZMVkR0SlFVTkVMRlZCUVZVc1JVRkJSU3h6UWtGQll6dEpRVU14UWl4WlFVRlpMRVZCUVVVc1QwRkJUenRKUVVOeVFpeFJRVUZSTEVWQlFVVTdVVUZEVkN4TFFVRkxMRVZCUVVVc1IwRkJSenRMUVVOV08wTkJRMFFzUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvcmFkaW8vcmFkaW8uanNcbiAqKiBtb2R1bGUgaWQgPSAxNTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxucmVxdWlyZSgnLi9yYXRpbmdCYXIuY3NzJyk7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgY29tcG9uZW50c0RlZmF1bHRUaGVtZV8xID0gcmVxdWlyZSgnLi4vY29tcG9uZW50c0RlZmF1bHRUaGVtZScpO1xyXG52YXIgcmF0aW5nQmFyQmFja2dyb3VuZHNfc2VydmljZV8xID0gcmVxdWlyZSgnLi9yYXRpbmdCYXJCYWNrZ3JvdW5kcy5zZXJ2aWNlJyk7XHJcbnZhciByYXRpbmdCYXJDbGFzc19zZXJ2aWNlXzEgPSByZXF1aXJlKCcuL3JhdGluZ0JhckNsYXNzLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMucmF0aW5nQmFyJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsUmF0aW5nQmFyJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdSYXRpbmdCYXJDb250cm9sbGVyJztcclxudmFyIFJhdGluZ0JhckNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gUmF0aW5nQmFyQ29udHJvbGxlcigkc2NvcGUsIHVzZURlZmF1bHRUaGVtZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy51c2VEZWZhdWx0VGhlbWUgPSB1c2VEZWZhdWx0VGhlbWU7XHJcbiAgICAgICAgdmFyIHJhdGluZ0JhckJhY2tncm91bmRzID0gbmV3IHJhdGluZ0JhckJhY2tncm91bmRzX3NlcnZpY2VfMS5SYXRpbmdCYXJCYWNrZ3JvdW5kU2VydmljZTtcclxuICAgICAgICB0aGlzLnJhdGluZ0JhckNsYXNzID0gbmV3IHJhdGluZ0JhckNsYXNzX3NlcnZpY2VfMS5SYXRpbmdCYXJDbGFzc1NlcnZpY2U7XHJcbiAgICAgICAgdGhpcy5iYWNrZ3JvdW5kQ2xhc3MgPSByYXRpbmdCYXJCYWNrZ3JvdW5kcy5nZXRCYWNrZ3JvdW5kKHRoaXMuYmFja2dyb3VuZCk7XHJcbiAgICAgICAgaWYgKHRoaXMudmFsdWUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy52YWx1ZTsgfSwgZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVZhbHVlKG5ld1ZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnRvdGFsV2lkdGg7IH0sIGZ1bmN0aW9uIChuZXdXaWR0aCkge1xyXG4gICAgICAgICAgICBfdGhpcy5kaW1lbnNpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IG5ld1dpZHRoICsgMixcclxuICAgICAgICAgICAgICAgIGhlaWdodDogX3RoaXMuaGVpZ2h0ICsgMixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlVmFsdWUoX3RoaXMudmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgUmF0aW5nQmFyQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlVmFsdWUgPSBmdW5jdGlvbiAobmV3VmFsdWUpIHtcclxuICAgICAgICB2YXIgY29uZmlkZW5jZVNjb3JlID0gKG5ld1ZhbHVlIC0gdGhpcy5taW4pIC8gKHRoaXMubWF4IC0gdGhpcy5taW4pO1xyXG4gICAgICAgIHRoaXMuYmFyQ2xhc3MgPSB0aGlzLnJhdGluZ0JhckNsYXNzLmdldENsYXNzKGNvbmZpZGVuY2VTY29yZSk7XHJcbiAgICAgICAgdGhpcy53aWR0aCA9IE1hdGgucm91bmQoY29uZmlkZW5jZVNjb3JlICogdGhpcy50b3RhbFdpZHRoKTtcclxuICAgIH07XHJcbiAgICBSYXRpbmdCYXJDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsIGNvbXBvbmVudHNEZWZhdWx0VGhlbWVfMS5kZWZhdWx0VGhlbWVWYWx1ZU5hbWVdO1xyXG4gICAgcmV0dXJuIFJhdGluZ0JhckNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuUmF0aW5nQmFyQ29udHJvbGxlciA9IFJhdGluZ0JhckNvbnRyb2xsZXI7XHJcbnZhciByYXRpbmdCYXIgPSB7XHJcbiAgICB0ZW1wbGF0ZTogXCJcXG5cXHRcXHQ8ZGl2IGNsYXNzPVxcXCJyYXRpbmctYmFyXFxcIj5cXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJ7e3JhdGluZ0Jhci5iYWNrZ3JvdW5kQ2xhc3N9fVxcXCIgbmctY2xhc3M9XFxcInsgZW1wdHk6IHJhdGluZ0Jhci52YWx1ZSA9PSByYXRpbmdCYXIubWluLCAnZGVmYXVsdC10aGVtZSc6IHJhdGluZ0Jhci51c2VEZWZhdWx0VGhlbWUgfVxcXCIgbmctc3R5bGU9XFxcInJhdGluZ0Jhci5kaW1lbnNpb25zXFxcIj5cXG5cXHRcXHRcXHRcXHQ8ZGl2IG5nLWNsYXNzPVxcXCJyYXRpbmdCYXIuYmFyQ2xhc3NcXFwiIG5nLXN0eWxlPVxcXCJ7IHdpZHRoOiByYXRpbmdCYXIud2lkdGgsIGhlaWdodDogcmF0aW5nQmFyLmhlaWdodCB9XFxcIj48L2Rpdj5cXG5cXHRcXHRcXHQ8L2Rpdj5cXG5cXHRcXHQ8L2Rpdj5cXG5cXHRcIixcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdyYXRpbmdCYXInLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICB0b3RhbFdpZHRoOiAnPHdpZHRoJyxcclxuICAgICAgICBoZWlnaHQ6ICc8JyxcclxuICAgICAgICB2YWx1ZTogJzwnLFxyXG4gICAgICAgIG1pbjogJzwnLFxyXG4gICAgICAgIG1heDogJzwnLFxyXG4gICAgICAgIGJhY2tncm91bmQ6ICc8JyxcclxuICAgIH0sXHJcbn07XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgcmF0aW5nQmFyKVxyXG4gICAgLmNvbnRyb2xsZXIoZXhwb3J0cy5jb250cm9sbGVyTmFtZSwgUmF0aW5nQmFyQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWNtRjBhVzVuUW1GeUxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpY21GMGFXNW5RbUZ5TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMRmxCUVZrc1EwRkJRenRCUVVWaUxGRkJRVThzYVVKQlFXbENMRU5CUVVNc1EwRkJRVHRCUVVWNlFpeEpRVUZaTEU5QlFVOHNWMEZCVFN4VFFVRlRMRU5CUVVNc1EwRkJRVHRCUVVWdVF5eDFRMEZCYzBNc01rSkJRVEpDTEVOQlFVTXNRMEZCUVR0QlFVVnNSU3cyUTBGQmVVVXNaME5CUVdkRExFTkJRVU1zUTBGQlFUdEJRVU14Unl4MVEwRkJPRVFzTUVKQlFUQkNMRU5CUVVNc1EwRkJRVHRCUVVVNVJTeHJRa0ZCVlN4SFFVRlhMRFJDUVVFMFFpeERRVUZETzBGQlEyeEVMSEZDUVVGaExFZEJRVmNzWVVGQllTeERRVUZETzBGQlEzUkRMSE5DUVVGakxFZEJRVmNzY1VKQlFYRkNMRU5CUVVNN1FVRm5RakZFTzBsQmFVSkRMRFpDUVVGdlFpeE5RVUZ6UWl4RlFVRlRMR1ZCUVhkQ08xRkJha0kxUlN4cFFrRTJRME03VVVFMVFtOUNMRmRCUVUwc1IwRkJUaXhOUVVGTkxFTkJRV2RDTzFGQlFWTXNiMEpCUVdVc1IwRkJaaXhsUVVGbExFTkJRVk03VVVGRE1VVXNTVUZCU1N4dlFrRkJiMElzUjBGQmFVTXNTVUZCU1N4NVJFRkJNRUlzUTBGQlF6dFJRVU40Uml4SlFVRkpMRU5CUVVNc1kwRkJZeXhIUVVGSExFbEJRVWtzT0VOQlFYRkNMRU5CUVVNN1VVRkZhRVFzU1VGQlNTeERRVUZETEdWQlFXVXNSMEZCUnl4dlFrRkJiMElzUTBGQlF5eGhRVUZoTEVOQlFVTXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRE8xRkJSVE5GTEVWQlFVVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTjRRaXhKUVVGSkxFTkJRVU1zUzBGQlN5eEhRVUZITEVOQlFVTXNRMEZCUXp0UlFVTm9RaXhEUVVGRE8xRkJSVVFzVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4alFVRm5RaXhOUVVGTkxFTkJRVU1zUzBGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRU5CUVVNc1JVRkJSU3hWUVVGRExGRkJRV2RDTzFsQlEzQkZMRXRCUVVrc1EwRkJReXhYUVVGWExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTTdVVUZETlVJc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRlNDeE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMR05CUVdkQ0xFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxGVkJRVU1zVVVGQlowSTdXVUZEZWtVc1MwRkJTU3hEUVVGRExGVkJRVlVzUjBGQlJ6dG5Ra0ZEYWtJc1MwRkJTeXhGUVVGRkxGRkJRVkVzUjBGQlJ5eERRVUZETzJkQ1FVTnVRaXhOUVVGTkxFVkJRVVVzUzBGQlNTeERRVUZETEUxQlFVMHNSMEZCUnl4RFFVRkRPMkZCUTNaQ0xFTkJRVU03V1VGRFJpeExRVUZKTEVOQlFVTXNWMEZCVnl4RFFVRkRMRXRCUVVrc1EwRkJReXhMUVVGTExFTkJRVU1zUTBGQlF6dFJRVU01UWl4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGRlR5eDVRMEZCVnl4SFFVRnVRaXhWUVVGdlFpeFJRVUZuUWp0UlFVTnVReXhKUVVGSkxHVkJRV1VzUjBGQlZ5eERRVUZETEZGQlFWRXNSMEZCUnl4SlFVRkpMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF5eEpRVUZKTEVOQlFVTXNSMEZCUnl4SFFVRkhMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF6dFJRVU0xUlN4SlFVRkpMRU5CUVVNc1VVRkJVU3hIUVVGSExFbEJRVWtzUTBGQlF5eGpRVUZqTEVOQlFVTXNVVUZCVVN4RFFVRkRMR1ZCUVdVc1EwRkJReXhEUVVGRE8xRkJRemxFTEVsQlFVa3NRMEZCUXl4TFFVRkxMRWRCUVVjc1NVRkJTU3hEUVVGRExFdEJRVXNzUTBGQlF5eGxRVUZsTEVkQlFVY3NTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRE8wbEJRelZFTEVOQlFVTTdTVUUxUWswc01rSkJRVThzUjBGQllTeERRVUZETEZGQlFWRXNSVUZCUlN3NFEwRkJjVUlzUTBGQlF5eERRVUZETzBsQk5rSTVSQ3d3UWtGQlF6dEJRVUZFTEVOQlFVTXNRVUUzUTBRc1NVRTJRME03UVVFM1Exa3NNa0pCUVcxQ0xITkNRVFpETDBJc1EwRkJRVHRCUVVWRUxFbEJRVWtzVTBGQlV5eEhRVUU0UWp0SlFVTXhReXhSUVVGUkxFVkJRVVVzYlZoQlRWUTdTVUZEUkN4VlFVRlZMRVZCUVVVc2MwSkJRV003U1VGRE1VSXNXVUZCV1N4RlFVRkZMRmRCUVZjN1NVRkRla0lzVVVGQlVTeEZRVUZGTzFGQlExUXNWVUZCVlN4RlFVRkZMRkZCUVZFN1VVRkRjRUlzVFVGQlRTeEZRVUZGTEVkQlFVYzdVVUZEV0N4TFFVRkxMRVZCUVVVc1IwRkJSenRSUVVOV0xFZEJRVWNzUlVGQlJTeEhRVUZITzFGQlExSXNSMEZCUnl4RlFVRkZMRWRCUVVjN1VVRkRVaXhWUVVGVkxFVkJRVVVzUjBGQlJ6dExRVU5tTzBOQlEwUXNRMEZCUXp0QlFVVkdMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFWVXNSVUZCUlN4RlFVRkZMRU5CUVVNN1MwRkROVUlzVTBGQlV5eERRVUZETEhGQ1FVRmhMRVZCUVVVc1UwRkJVeXhEUVVGRE8wdEJRMjVETEZWQlFWVXNRMEZCUXl4elFrRkJZeXhGUVVGRkxHMUNRVUZ0UWl4RFFVRkRMRU5CUVVNaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvcmF0aW5nQmFyL3JhdGluZ0Jhci5qc1xuICoqIG1vZHVsZSBpZCA9IDE1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9yYXRpbmdCYXIuY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL3JhdGluZ0Jhci5jc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9yYXRpbmdCYXIuY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvcmF0aW5nQmFyL3JhdGluZ0Jhci5jc3NcbiAqKiBtb2R1bGUgaWQgPSAxNTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLnJhdGluZy1iYXIgLmRlZmF1bHQtdGhlbWUuYmFja2dyb3VuZCB7XFxyXFxuXFx0YmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcXHJcXG5cXHRib3JkZXI6IDFweCBzb2xpZCAjYWFhYWFhO1xcclxcbn1cXHJcXG4ucmF0aW5nLWJhciAuZGVmYXVsdC10aGVtZS5iYWNrZ3JvdW5kLmVtcHR5IHtcXHJcXG5cXHRib3JkZXI6IDFweCBzb2xpZCByZWQ7XFxyXFxufVxcclxcbi5yYXRpbmctYmFyIC5kZWZhdWx0LXRoZW1lIC52ZXJ5LWhpZ2ggeyBiYWNrZ3JvdW5kLWNvbG9yOiAjMjBEMDAwIH1cXHJcXG4ucmF0aW5nLWJhciAuZGVmYXVsdC10aGVtZSAuaGlnaCB7IGJhY2tncm91bmQtY29sb3I6ICMwMGEwMDAgfVxcclxcbi5yYXRpbmctYmFyIC5kZWZhdWx0LXRoZW1lIC5tZWRpdW0geyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3MDAwIH1cXHJcXG4ucmF0aW5nLWJhciAuZGVmYXVsdC10aGVtZSAubG93IHsgYmFja2dyb3VuZC1jb2xvcjogI2FhMDAwMCB9XFxyXFxuLnJhdGluZy1iYXIgLmRlZmF1bHQtdGhlbWUgLnZlcnktbG93IHsgYmFja2dyb3VuZC1jb2xvcjogI2ZmMDAwMCB9XFxyXFxuXCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL3NvdXJjZS9jb21wb25lbnRzL3JhdGluZ0Jhci9yYXRpbmdCYXIuY3NzXG4gKiogbW9kdWxlIGlkID0gMTU2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBSYXRpbmdCYXJCYWNrZ3JvdW5kU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSYXRpbmdCYXJCYWNrZ3JvdW5kU2VydmljZSgpIHtcclxuICAgICAgICB0aGlzLnN0YW5kYXJkID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnc3RhbmRhcmQnLFxyXG4gICAgICAgICAgICBjbGFzczogJ2JhY2tncm91bmQnLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kYXJrID0ge1xyXG4gICAgICAgICAgICB0eXBlOiAnZGFyaycsXHJcbiAgICAgICAgICAgIGNsYXNzOiAnYmFja2dyb3VuZC1kYXJrJyxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMudHJhbnNwYXJlbnQgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICd0cmFuc3BhcmVudCcsXHJcbiAgICAgICAgICAgIGNsYXNzOiAnYmFja2dyb3VuZC10cmFuc3BhcmVudCcsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIFJhdGluZ0JhckJhY2tncm91bmRTZXJ2aWNlLnByb3RvdHlwZS5nZXRCYWNrZ3JvdW5kID0gZnVuY3Rpb24gKHR5cGUpIHtcclxuICAgICAgICBpZiAodHlwZSA9PT0gdGhpcy5kYXJrLnR5cGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGFyay5jbGFzcztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gdGhpcy50cmFuc3BhcmVudC50eXBlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zcGFyZW50LmNsYXNzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhbmRhcmQuY2xhc3M7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHJldHVybiBSYXRpbmdCYXJCYWNrZ3JvdW5kU2VydmljZTtcclxufSgpKTtcclxuZXhwb3J0cy5SYXRpbmdCYXJCYWNrZ3JvdW5kU2VydmljZSA9IFJhdGluZ0JhckJhY2tncm91bmRTZXJ2aWNlO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljbUYwYVc1blFtRnlRbUZqYTJkeWIzVnVaSE11YzJWeWRtbGpaUzVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkluSmhkR2x1WjBKaGNrSmhZMnRuY205MWJtUnpMbk5sY25acFkyVXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE8wRkJZMkk3U1VGQlFUdFJRVU5ETEdGQlFWRXNSMEZCYjBJN1dVRkRNMElzU1VGQlNTeEZRVUZGTEZWQlFWVTdXVUZEYUVJc1MwRkJTeXhGUVVGRkxGbEJRVms3VTBGRGJrSXNRMEZCUXp0UlFVTkdMRk5CUVVrc1IwRkJiMEk3V1VGRGRrSXNTVUZCU1N4RlFVRkZMRTFCUVUwN1dVRkRXaXhMUVVGTExFVkJRVVVzYVVKQlFXbENPMU5CUTNoQ0xFTkJRVU03VVVGRFJpeG5Ra0ZCVnl4SFFVRnZRanRaUVVNNVFpeEpRVUZKTEVWQlFVVXNZVUZCWVR0WlFVTnVRaXhMUVVGTExFVkJRVVVzZDBKQlFYZENPMU5CUXk5Q0xFTkJRVU03U1VGWFNDeERRVUZETzBsQlZFRXNhMFJCUVdFc1IwRkJZaXhWUVVGakxFbEJRVms3VVVGRGVrSXNSVUZCUlN4RFFVRkRMRU5CUVVNc1NVRkJTU3hMUVVGTExFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVNM1FpeE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFTkJRVU03VVVGRGVFSXNRMEZCUXp0UlFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEV0QlFVc3NTVUZCU1N4RFFVRkRMRmRCUVZjc1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6TkRMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEV0QlFVc3NRMEZCUXp0UlFVTXZRaXhEUVVGRE8xRkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdXVUZEVUN4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eExRVUZMTEVOQlFVTTdVVUZETlVJc1EwRkJRenRKUVVOR0xFTkJRVU03U1VGRFJpeHBRMEZCUXp0QlFVRkVMRU5CUVVNc1FVRjJRa1FzU1VGMVFrTTdRVUYyUWxrc2EwTkJRVEJDTERaQ1FYVkNkRU1zUTBGQlFTSjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvcmF0aW5nQmFyL3JhdGluZ0JhckJhY2tncm91bmRzLnNlcnZpY2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIFJhdGluZ0JhckNsYXNzU2VydmljZSA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBSYXRpbmdCYXJDbGFzc1NlcnZpY2UoKSB7XHJcbiAgICB9XHJcbiAgICBSYXRpbmdCYXJDbGFzc1NlcnZpY2UucHJvdG90eXBlLmdldENsYXNzID0gZnVuY3Rpb24gKGNvbmZpZGVuY2UpIHtcclxuICAgICAgICBpZiAoY29uZmlkZW5jZSA+PSAwLjgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICd2ZXJ5LWhpZ2gnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjb25maWRlbmNlID49IDAuNikge1xyXG4gICAgICAgICAgICByZXR1cm4gJ2hpZ2gnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjb25maWRlbmNlID49IDAuNCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJ21lZGl1bSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGNvbmZpZGVuY2UgPj0gMC4yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnbG93JztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAndmVyeS1sb3cnO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXR1cm4gUmF0aW5nQmFyQ2xhc3NTZXJ2aWNlO1xyXG59KCkpO1xyXG5leHBvcnRzLlJhdGluZ0JhckNsYXNzU2VydmljZSA9IFJhdGluZ0JhckNsYXNzU2VydmljZTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pY21GMGFXNW5RbUZ5UTJ4aGMzTXVjMlZ5ZG1salpTNXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW5KaGRHbHVaMEpoY2tOc1lYTnpMbk5sY25acFkyVXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE8wRkJUV0k3U1VGQlFUdEpRV05CTEVOQlFVTTdTVUZpUVN4M1EwRkJVU3hIUVVGU0xGVkJRVk1zVlVGQmEwSTdVVUZETVVJc1JVRkJSU3hEUVVGRExFTkJRVU1zVlVGQlZTeEpRVUZKTEVkQlFVY3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRka0lzVFVGQlRTeERRVUZETEZkQlFWY3NRMEZCUXp0UlFVTndRaXhEUVVGRE8xRkJRVU1zU1VGQlNTeERRVUZETEVWQlFVVXNRMEZCUXl4RFFVRkRMRlZCUVZVc1NVRkJTU3hIUVVGSExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6bENMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU03VVVGRFppeERRVUZETzFGQlFVTXNTVUZCU1N4RFFVRkRMRVZCUVVVc1EwRkJReXhEUVVGRExGVkJRVlVzU1VGQlNTeEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUXpsQ0xFMUJRVTBzUTBGQlF5eFJRVUZSTEVOQlFVTTdVVUZEYWtJc1EwRkJRenRSUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4VlFVRlZMRWxCUVVrc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU01UWl4TlFVRk5MRU5CUVVNc1MwRkJTeXhEUVVGRE8xRkJRMlFzUTBGQlF6dFJRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTFBc1RVRkJUU3hEUVVGRExGVkJRVlVzUTBGQlF6dFJRVU51UWl4RFFVRkRPMGxCUTBZc1EwRkJRenRKUVVOR0xEUkNRVUZETzBGQlFVUXNRMEZCUXl4QlFXUkVMRWxCWTBNN1FVRmtXU3cyUWtGQmNVSXNkMEpCWTJwRExFTkJRVUVpZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9yYXRpbmdCYXIvcmF0aW5nQmFyQ2xhc3Muc2VydmljZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnJlcXVpcmUoJ25nLXdpZy9kaXN0L2Nzcy9uZy13aWcuY3NzJyk7XHJcbnJlcXVpcmUoJ25nLXdpZy9kaXN0L25nLXdpZycpO1xyXG5yZXF1aXJlKCcuL2VkaXRvckJ1dHRvbnMuY3NzJyk7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG52YXIgcmljaFRleHRFZGl0b3JfY29uZmlnXzEgPSByZXF1aXJlKCcuL3JpY2hUZXh0RWRpdG9yLmNvbmZpZycpO1xyXG52YXIgaGVhZGVyQnV0dG9uXzEgPSByZXF1aXJlKCcuL2hlYWRlckJ1dHRvbicpO1xyXG52YXIgcGFyYWdyYXBoQnV0dG9uXzEgPSByZXF1aXJlKCcuL3BhcmFncmFwaEJ1dHRvbicpO1xyXG52YXIgZXh0ZXJuYWxQcm92aWRlck5hbWUgPSByaWNoVGV4dEVkaXRvcl9jb25maWdfMS5wcm92aWRlck5hbWUgKyAnUHJvdmlkZXInO1xyXG5leHBvcnRzLnByb3ZpZGVyTmFtZSA9IGV4dGVybmFsUHJvdmlkZXJOYW1lO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5yaWNoVGV4dEVkaXRvcic7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybFJpY2hUZXh0RWRpdG9yJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdSaWNoVGV4dEVkaXRvckNvbnRyb2xsZXInO1xyXG52YXIgUmljaFRleHRFZGl0b3JDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFJpY2hUZXh0RWRpdG9yQ29udHJvbGxlcihvYmplY3QsIHByb3ZpZGVyKSB7XHJcbiAgICAgICAgdGhpcy50b29sYmFyID0gJ2gxLCBwYXJhZ3JhcGgsIGJvbGQsIGl0YWxpYywgdW5kZXJsaW5lLCBsaXN0MSwgbGlzdDIsIGluZGVudCwgb3V0ZGVudCc7XHJcbiAgICAgICAgaWYgKCFvYmplY3QuaXNOdWxsT3JFbXB0eSh0aGlzLmN1c3RvbUJ1dHRvbnMpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudG9vbGJhciArPSAnLCAnICsgdGhpcy5jdXN0b21CdXR0b25zO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFJpY2hUZXh0RWRpdG9yQ29udHJvbGxlci4kaW5qZWN0ID0gW19fb2JqZWN0LnNlcnZpY2VOYW1lLCByaWNoVGV4dEVkaXRvcl9jb25maWdfMS5wcm92aWRlck5hbWVdO1xyXG4gICAgcmV0dXJuIFJpY2hUZXh0RWRpdG9yQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5SaWNoVGV4dEVkaXRvckNvbnRyb2xsZXIgPSBSaWNoVGV4dEVkaXRvckNvbnRyb2xsZXI7XHJcbnZhciByaWNoVGV4dEVkaXRvciA9IHtcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3JpY2hUZXh0RWRpdG9yLmh0bWwnKSxcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdlZGl0b3InLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBuZ01vZGVsOiAnPScsXHJcbiAgICAgICAgY3VzdG9tQnV0dG9uczogJz0nLFxyXG4gICAgICAgIG5nRGlzYWJsZWQ6ICc9JyxcclxuICAgIH0sXHJcbn07XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgWyduZ1dpZycsIF9fb2JqZWN0Lm1vZHVsZU5hbWVdKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIHJpY2hUZXh0RWRpdG9yKVxyXG4gICAgLmNvbnRyb2xsZXIoZXhwb3J0cy5jb250cm9sbGVyTmFtZSwgUmljaFRleHRFZGl0b3JDb250cm9sbGVyKVxyXG4gICAgLmRpcmVjdGl2ZShoZWFkZXJCdXR0b25fMS5oZWFkZXJCdXR0b25EaXJlY3RpdmVOYW1lLCBoZWFkZXJCdXR0b25fMS5oZWFkZXJCdXR0b24pXHJcbiAgICAuZGlyZWN0aXZlKHBhcmFncmFwaEJ1dHRvbl8xLnBhcmFncmFwaEJ1dHRvbkRpcmVjdGl2ZU5hbWUsIHBhcmFncmFwaEJ1dHRvbl8xLnBhcmFncmFwaEJ1dHRvbilcclxuICAgIC5wcm92aWRlcihyaWNoVGV4dEVkaXRvcl9jb25maWdfMS5wcm92aWRlck5hbWUsIHJpY2hUZXh0RWRpdG9yX2NvbmZpZ18xLnJpY2hUZXh0RWRpdG9yUHJvdmlkZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljbWxqYUZSbGVIUkZaR2wwYjNJdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUp5YVdOb1ZHVjRkRVZrYVhSdmNpNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN3d1JFRkJNRVE3UVVGRk1VUXNXVUZCV1N4RFFVRkRPMEZCUldJc1VVRkJUeXcwUWtGQk5FSXNRMEZCUXl4RFFVRkJPMEZCUTNCRExGRkJRVThzYjBKQlFXOUNMRU5CUVVNc1EwRkJRVHRCUVVNMVFpeFJRVUZQTEhGQ1FVRnhRaXhEUVVGRExFTkJRVUU3UVVGRk4wSXNTVUZCV1N4UFFVRlBMRmRCUVUwc1UwRkJVeXhEUVVGRExFTkJRVUU3UVVGSGJrTXNOa05CUVhsQ0xEaENRVUU0UWl4RFFVRkRMRU5CUVVFN1FVRkRlRVFzU1VGQlR5eFJRVUZSTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGRmJFTXNjME5CUVRoRkxIbENRVUY1UWl4RFFVRkRMRU5CUVVFN1FVRkRlRWNzTmtKQlFYbEVMR2RDUVVGblFpeERRVUZETEVOQlFVRTdRVUZETVVVc1owTkJRU3RFTEcxQ1FVRnRRaXhEUVVGRExFTkJRVUU3UVVGRmJrWXNTVUZCU1N4dlFrRkJiMElzUjBGQlZ5eHZRMEZCV1N4SFFVRkhMRlZCUVZVN1FVRkRNMElzYjBKQlFWa3NkMEpCUkdkQ08wRkJSMnhFTEd0Q1FVRlZMRWRCUVZjc2FVTkJRV2xETEVOQlFVTTdRVUZEZGtRc2NVSkJRV0VzUjBGQlZ5eHJRa0ZCYTBJc1EwRkJRenRCUVVNelF5eHpRa0ZCWXl4SFFVRlhMREJDUVVFd1FpeERRVUZETzBGQlVTOUVPMGxCVTBNc2EwTkJRVmtzVFVGQkswSXNSVUZCUlN4UlFVRmpPMUZCUXpGRUxFbEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NkVVZCUVhWRkxFTkJRVU03VVVGRmRrWXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zWVVGQllTeERRVUZETEVsQlFVa3NRMEZCUXl4aFFVRmhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGREwwTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1NVRkJTU3hKUVVGSkxFZEJRVWNzU1VGQlNTeERRVUZETEdGQlFXRXNRMEZCUXp0UlFVTXpReXhEUVVGRE8wbEJRMFlzUTBGQlF6dEpRVkJOTEdkRFFVRlBMRWRCUVdFc1EwRkJReXhSUVVGUkxFTkJRVU1zVjBGQlZ5eEZRVUZGTEc5RFFVRlpMRU5CUVVNc1EwRkJRenRKUVZGcVJTd3JRa0ZCUXp0QlFVRkVMRU5CUVVNc1FVRm9Ra1FzU1VGblFrTTdRVUZvUWxrc1owTkJRWGRDTERKQ1FXZENjRU1zUTBGQlFUdEJRVVZFTEVsQlFVa3NZMEZCWXl4SFFVRTRRanRKUVVNdlF5eFJRVUZSTEVWQlFVVXNUMEZCVHl4RFFVRkRMSFZDUVVGMVFpeERRVUZETzBsQlF6RkRMRlZCUVZVc1JVRkJSU3h6UWtGQll6dEpRVU14UWl4WlFVRlpMRVZCUVVVc1VVRkJVVHRKUVVOMFFpeFJRVUZSTEVWQlFVVTdVVUZEVkN4UFFVRlBMRVZCUVVVc1IwRkJSenRSUVVOYUxHRkJRV0VzUlVGQlJTeEhRVUZITzFGQlEyeENMRlZCUVZVc1JVRkJSU3hIUVVGSE8wdEJRMlk3UTBGRFJDeERRVUZETzBGQlJVWXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVOQlFVTXNUMEZCVHl4RlFVRkZMRkZCUVZFc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dExRVU40UkN4VFFVRlRMRU5CUVVNc2NVSkJRV0VzUlVGQlJTeGpRVUZqTEVOQlFVTTdTMEZEZUVNc1ZVRkJWU3hEUVVGRExITkNRVUZqTEVWQlFVVXNkMEpCUVhkQ0xFTkJRVU03UzBGRGNFUXNVMEZCVXl4RFFVRkRMSGREUVVGNVFpeEZRVUZGTERKQ1FVRlpMRU5CUVVNN1MwRkRiRVFzVTBGQlV5eERRVUZETERoRFFVRTBRaXhGUVVGRkxHbERRVUZsTEVOQlFVTTdTMEZEZUVRc1VVRkJVU3hEUVVGRExHOURRVUZaTEVWQlFVVXNPRU5CUVhOQ0xFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvcmljaFRleHRFZGl0b3IvcmljaFRleHRFZGl0b3IuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9uZy13aWcuY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9uZy13aWcuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9uZy13aWcuY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9uZy13aWcvZGlzdC9jc3Mvbmctd2lnLmNzc1xuICoqIG1vZHVsZSBpZCA9IDE2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkBpbXBvcnQgdXJsKGh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vZm9udC1hd2Vzb21lLzQuNC4wL2Nzcy9mb250LWF3ZXNvbWUubWluLmNzcyk7XCIsIFwiXCJdKTtcblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKiAtLS0tLS0tLSBORy1XSUcgLS0tLS0tLS0gKi9cXG4vKipcXG4gKlxcbiAqICBSRVNFVCBCT1ggTU9ERUxcXG4gKlxcbiAqL1xcbi5uZy13aWcsXFxuW2NsYXNzXj1cXFwibnctXFxcIl0ge1xcbiAgLXdlYmtpdC1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgLW8tYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIC1tcy1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG59XFxuXFxuXFxuLyoqXFxuICogICBtYWluIHdyYXBwZXIgZm9yIHRoZSBlZGl0b3JcXG4gKlxcbiAqICAubmctd2lnXFxuICpcXG4gKi9cXG4ubmctd2lnIHtcXG4gIGRpc3BsYXk6IGJsb2NrO1xcbiAgcGFkZGluZzogMDtcXG4gIG1hcmdpbjogMDtcXG59XFxuXFxuXFxuLyoqXFxuICogIHN0eWxpbmcgZm9yIHRvb2xiYXIgYW5kIGl0cyBpdGVtc1xcbiAqXFxuICogIC5udy10b29sYmFyXFxuICogICAgJl9faXRlbVxcbiAqXFxuICovXFxuLm53LXRvb2xiYXIge1xcbiAgZGlzcGxheTogYmxvY2s7XFxuICBtYXJnaW46IDAgIWltcG9ydGFudDtcXG4gIHBhZGRpbmc6IDAgIWltcG9ydGFudDtcXG4gIGxpc3Qtc3R5bGU6IG5vbmUgIWltcG9ydGFudDtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIGNvbG9yOiAjNkI3Mjc3O1xcblxcbiAgYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQoOTBkZWcsICNmZmZmZmYgMCUsICNmOWY5ZjkgMTAwJSk7XFxuICBiYWNrZ3JvdW5kOiAgICAtbW96LWxpbmVhci1ncmFkaWVudCg5MGRlZywgI2ZmZmZmZiAwJSwgI2Y5ZjlmOSAxMDAlKTtcXG4gIGJhY2tncm91bmQ6ICAgICAgICAgbGluZWFyLWdyYWRpZW50KDE4MGRlZywgI2ZmZmZmZiAwJSwgI2Y5ZjlmOSAxMDAlKTtcXG4gIGJvcmRlcjogMXB4IHNvbGlkICNDQ0NDQ0M7XFxuICBib3JkZXItcmFkaXVzOiAzcHggM3B4IDAgMDtcXG59XFxuXFxuLm53LXRvb2xiYXJfX2l0ZW0ge1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgdmVydGljYWwtYWxpZ246IHRvcDtcXG4gIG1hcmdpbjogMDtcXG5cXG4gIGJvcmRlci1yaWdodDogMXB4IHNvbGlkICNERURFREU7XFxufVxcblxcbi5udy10b29sYmFyIGxhYmVsIHtcXG4gIGxpbmUtaGVpZ2h0OiAzMHB4O1xcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xcbiAgcGFkZGluZzogMCA2cHggMCAzcHg7XFxufVxcblxcbi5udy10b29sYmFyIGlucHV0W3R5cGU9Y2hlY2tib3hdIHtcXG4gIHZlcnRpY2FsLWFsaWduOiAtM3B4O1xcbiAgbWFyZ2luLXJpZ2h0OiAtMXB4O1xcbn1cXG5cXG4vKipcXG4gKiAgc3R5bGluZyBmb3IgdGhlIGVkaXRvciBwYXJ0OiBzb3VyY2UgY29kZSAob3JpZ2luYWwgdGV4dGFyZWEpIGFuZCByZXN1bHRpbmcgZGl2XFxuICpcXG4gKiAgLm53LWVkaXRvclxcbiAqICAgICZfX3NyY1xcbiAqICAgICZfX3Jlc1xcbiAqXFxuICovXFxuLm53LWVkaXRvciB7XFxuICBkaXNwbGF5OiB0YWJsZTtcXG4gIC8qIERlZmF1bHQgd2hlbiBoZWlnaHQgaXMgbm90IHNldCAqL1xcbiAgaGVpZ2h0OiAzMDBweDtcXG4gIGJhY2tncm91bmQ6ICNmZmY7XFxuICBjdXJzb3I6IHRleHQ7XFxuICB3aWR0aDoxMDAlO1xcbn1cXG5cXG4ubnctZWRpdG9yLWNvbnRhaW5lciB7XFxuICBib3JkZXI6IDFweCBzb2xpZCAjQ0NDQ0NDO1xcbiAgYm9yZGVyLXRvcDogbm9uZTtcXG4gIGJvcmRlci1yYWRpdXM6IDAgMCAzcHggM3B4O1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbn1cXG5cXG4ubnctZWRpdG9yX19yZXMge1xcbiAgbWluLWhlaWdodDogMTAwJTtcXG4gIHBhZGRpbmc6IDAgOHB4O1xcbiAgZGlzcGxheTogdGFibGUtY2VsbDtcXG59XFxuXFxuLm53LWVkaXRvcl9fc3JjLFxcbi5udy1lZGl0b3JfX3JlcyB7XFxuICB3aWR0aDogMTAwJTtcXG4gIG91dGxpbmU6IG5vbmU7XFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xcbiAgYm9yZGVyOiBub25lO1xcbiAgbWFyZ2luOiAwO1xcbn1cXG5cXG4ubnctZWRpdG9yX19zcmMtY29udGFpbmVyIHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDA7XFxuICB0b3A6IDA7XFxuICByaWdodDogMDtcXG4gIGJvdHRvbTogMDtcXG59XFxuXFxuLm53LWVkaXRvcl9fc3JjIHtcXG4gIGhlaWdodDogMTAwJTtcXG4gIHJlc2l6ZTogbm9uZTtcXG4gIHBhZGRpbmc6IDAgOHB4O1xcbn1cXG5cXG4ubnctZWRpdG9yLS1maXhlZCAubnctZWRpdG9yIHtcXG4gIGRpc3BsYXk6YmxvY2s7XFxuICBvdmVyZmxvdy15OiBhdXRvO1xcbn1cXG5cXG4ubnctZWRpdG9yLS1maXhlZCAubnctZWRpdG9yX19yZXMge1xcbiAgcGFkZGluZzogMXB4IDhweDtcXG4gIGRpc3BsYXk6YmxvY2s7XFxufVxcblxcbi5udy1pbnZpc2libGUge1xcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xcbn1cXG5cXG4ubnctZWRpdG9yLS1maXhlZCAubnctaW52aXNpYmxlIHtcXG4gIGRpc3BsYXk6IG5vbmU7XFxufVxcblxcbi5udy1lZGl0b3IubnctZGlzYWJsZWQge1xcblxcdGN1cnNvcjogZGVmYXVsdDtcXG59XFxuXFxuLyoqXFxuICogIHN0eWxpbmcgZm9yIHRvb2xiYXIgYnV0dG9uLCBoYXMgdHdvIG1vZGlmaWVyczogYWN0aXZlIGFuZCB0eXBlIG9mIGljb24gZm9yIGJhY2tncm91bmRcXG4gKlxcbiAqICAubnctYnV0dG9uXFxuICogICAgJi0tYWN0aXZlXFxuICogICAgJi0te2J1dHRvbiB0eXBlfVxcbiAqXFxuICovXFxuLm53LWJ1dHRvbiB7XFxuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XFxuICAtbW96LWFwcGVhcmFuY2U6ICAgIG5vbmU7XFxuICBhcHBlYXJhbmNlOiAgICAgICAgIG5vbmU7XFxuXFxuICBkaXNwbGF5OiBibG9jaztcXG4gIHdpZHRoOiAzMHB4O1xcbiAgaGVpZ2h0OiAzMHB4O1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIG9wYWNpdHk6IDAuNTtcXG5cXG4gIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyIGNlbnRlcjtcXG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XFxuICBib3JkZXI6IG5vbmU7XFxuICBib3JkZXItcmFkaXVzOiAycHg7XFxuXFxuICBmb250LXNpemU6IDA7XFxuXFxuICBjdXJzb3I6IHBvaW50ZXI7XFxufVxcblxcbi5udy1idXR0b246YmVmb3JlIHtcXG4gIGZvbnQtc2l6ZTogMTJweDtcXG4gIGZvbnQtZmFtaWx5OiBGb250QXdlc29tZTtcXG59XFxuXFxuLm53LWJ1dHRvbi5ib2xkOmJlZm9yZSB7XFxuICBjb250ZW50OiAnXFxcXEYwMzInO1xcbn1cXG5cXG4ubnctYnV0dG9uLml0YWxpYzpiZWZvcmUge1xcbiAgY29udGVudDogJ1xcXFxGMDMzJztcXG59XFxuXFxuLm53LWJ1dHRvbi5saXN0LXVsOmJlZm9yZSB7XFxuICBjb250ZW50OiAnXFxcXEYwQ0EnO1xcbn1cXG5cXG4ubnctYnV0dG9uLmxpc3Qtb2w6YmVmb3JlIHtcXG4gIGNvbnRlbnQ6ICdcXFxcRjBDQic7XFxufVxcblxcbi5udy1idXR0b24ubGluazpiZWZvcmUge1xcbiAgY29udGVudDogJ1xcXFxGMEMxJztcXG59XFxuXFxuLm53LWJ1dHRvbi5mb250LWNvbG9yOmJlZm9yZSB7XFxuICBjb250ZW50OiAnXFxcXEYwMzEnO1xcbn1cXG5cXG4ubnctYnV0dG9uLm53LWJ1dHRvbi0tc291cmNlOmJlZm9yZSB7XFxuICBjb250ZW50OiAnXFxcXEYwNDAnO1xcbn1cXG5cXG4ubnctYnV0dG9uOmZvY3VzIHtcXG4gIG91dGxpbmU6IG5vbmU7XFxufVxcblxcbi5udy1idXR0b246aG92ZXIsXFxuLm53LWJ1dHRvbi5udy1idXR0b24tLWFjdGl2ZSB7XFxuICBvcGFjaXR5OiAxXFxufVxcblxcbi5udy1idXR0b24tLWFjdGl2ZSB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUVFRUVFO1xcbn1cXG5cXG4ubnctYnV0dG9uOmRpc2FibGVkIHtcXG4gIGN1cnNvcjogZGVmYXVsdDtcXG59XFxuLm53LWJ1dHRvbjpkaXNhYmxlZDpob3ZlciB7XFxuICBvcGFjaXR5OiAwLjU7XFxufVxcblxcbi8qKlxcbiAqICBzdHlsaW5nICYgZm9ybWF0dGluZyBvZiBjb250ZW50IGluc2lkZSBjb250ZW50ZWRpdGFibGUgZGl2XFxuICpcXG4gKiAgLm53LWNvbnRlbnRcXG4gKlxcbiAqL1xcbi5udy1jb250ZW50IHtcXG4gIHBhZGRpbmc6IDEycHg7XFxuICBtYXJnaW46IDA7XFxuXFxuICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcXG4gIGZvbnQtc2l6ZTogMTRweDtcXG4gIGxpbmUtaGVpZ2h0OiAyNHB4O1xcbn1cXG5cXG4ubnctc2VsZWN0IHtcXG4gIGhlaWdodDogMzBweDtcXG4gIHBhZGRpbmc6IDZweDtcXG4gIGNvbG9yOiAjNTU1O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogaW5oZXJpdDtcXG4gIGJvcmRlcjogMDtcXG59XFxuXFxuLm53LXNlbGVjdDpkaXNhYmxlZCB7XFxuXFx0b3BhY2l0eTogMC41O1xcbn1cXG5cXG4ubnctc2VsZWN0OmZvY3VzIHsgb3V0bGluZTogbm9uZTsgfVxcblxcblwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L25nLXdpZy9kaXN0L2Nzcy9uZy13aWcuY3NzXG4gKiogbW9kdWxlIGlkID0gMTYxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIHZlcnNpb246IDIuMy40XG4gKi9cbmFuZ3VsYXIubW9kdWxlKCduZ1dpZycsIFsnbmd3aWctYXBwLXRlbXBsYXRlcyddKTtcblxuYW5ndWxhci5tb2R1bGUoJ25nV2lnJylcbiAgLmRpcmVjdGl2ZSgnbmdXaWcnLCBbXCIkd2luZG93XCIsIFwiJGRvY3VtZW50XCIsIFwibmdXaWdUb29sYmFyXCIsIGZ1bmN0aW9uICgkd2luZG93LCAkZG9jdW1lbnQsIG5nV2lnVG9vbGJhcikge1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHNjb3BlOiB7XG4gICAgICAgIGNvbnRlbnQ6ICc9bmdXaWcnLFxuICAgICAgICBvblBhc3RlOiAnPSdcbiAgICAgIH0sXG4gICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgIHRlbXBsYXRlVXJsOiAnbmctd2lnL3ZpZXdzL25nLXdpZy5odG1sJyxcbiAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMpIHtcbiAgICAgICAgc2NvcGUuZm9ybUVsZW1lbnROYW1lID0gYXR0cnMubmFtZTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVBdHRyKCduYW1lJyk7XG5cbiAgICAgICAgc2NvcGUuaXNSZXF1aXJlZCA9ICEhYXR0cnMucmVxdWlyZWQ7XG4gICAgICAgIHNjb3BlLmlzU291cmNlTW9kZUFsbG93ZWQgPSBPYmplY3Qua2V5cyhhdHRycykuaW5kZXhPZignc291cmNlTW9kZUFsbG93ZWQnKSAhPT0gLTEgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHNjb3BlLmVkaXRNb2RlID0gZmFsc2U7XG4gICAgICAgIHNjb3BlLnRvb2xiYXJCdXR0b25zID0gbmdXaWdUb29sYmFyLmdldFRvb2xiYXJCdXR0b25zKGF0dHJzLmJ1dHRvbnMgJiYgc3RyaW5nMmFycmF5KGF0dHJzLmJ1dHRvbnMpKTtcblxuICAgICAgICBmdW5jdGlvbiBzdHJpbmcyYXJyYXkoa2V5c1N0cmluZyl7XG4gICAgICAgICAgcmV0dXJuIGtleXNTdHJpbmcuc3BsaXQoJywnKS5tYXAoRnVuY3Rpb24ucHJvdG90eXBlLmNhbGwsIFN0cmluZy5wcm90b3R5cGUudHJpbSk7XG4gICAgICAgIH1cblxuICAgICAgICBzY29wZS50b2dnbGVFZGl0TW9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzY29wZS5lZGl0TW9kZSA9ICFzY29wZS5lZGl0TW9kZTtcblxuICAgICAgICAgIGlmICgkd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcykge1xuICAgICAgICAgICAgJHdpbmRvdy5nZXRTZWxlY3Rpb24oKS5yZW1vdmVBbGxSYW5nZXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2NvcGUuZXhlY0NvbW1hbmQgPSBmdW5jdGlvbiAoY29tbWFuZCwgb3B0aW9ucykge1xuICAgICAgICAgIGlmKHNjb3BlLmVkaXRNb2RlICkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgaWYgKGNvbW1hbmQgPT09ICdjcmVhdGVsaW5rJykge1xuICAgICAgICAgICAgb3B0aW9ucyA9IHByb21wdCgnUGxlYXNlIGVudGVyIHRoZSBVUkwnLCAnaHR0cDovLycpO1xuICAgICAgICAgICAgaWYoIW9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBzY29wZS4kYnJvYWRjYXN0KCdleGVjQ29tbWFuZCcsIHtjb21tYW5kOiBjb21tYW5kLCBvcHRpb25zOiBvcHRpb25zfSk7XG4gICAgICAgIH07XG5cdFx0XG5cdFx0aWYgKGF0dHJzLm5nRGlzYWJsZWQgIT0gbnVsbCB8fCBhdHRycy5kaXNhYmxlZCAhPSBudWxsKSB7XG5cdFx0XHRzY29wZS4kd2F0Y2goZnVuY3Rpb24oKSB7IHJldHVybiAhIWF0dHJzLmRpc2FibGVkOyB9LCBmdW5jdGlvbihpc0Rpc2FibGVkKSB7XG5cdFx0XHRcdHNjb3BlLmlzRGlzYWJsZWQgPSBpc0Rpc2FibGVkO1xuXHRcdFx0XHRzY29wZS4kYnJvYWRjYXN0KCdudy1kaXNhYmxlZCcsIGlzRGlzYWJsZWQpO1xuXHRcdFx0fSk7XHRcblx0XHR9XG4gICAgICB9XG4gICAgfVxuICB9XVxuKTtcblxuXG5hbmd1bGFyLm1vZHVsZSgnbmdXaWcnKVxuICAuZGlyZWN0aXZlKCduZ1dpZ0VkaXRhYmxlJywgW1wiJGRvY3VtZW50XCIsIGZ1bmN0aW9uICgkZG9jdW1lbnQpIHtcbiAgICBmdW5jdGlvbiBpbml0KHNjb3BlLCAkZWxlbWVudCwgYXR0cnMsIG5nTW9kZWxDb250cm9sbGVyKSB7XG5cbiAgICAgICRlbGVtZW50LmF0dHIoJ2NvbnRlbnRlZGl0YWJsZScsIHRydWUpO1xuXG4gICAgICAvL21vZGVsIC0tPiB2aWV3XG4gICAgICBuZ01vZGVsQ29udHJvbGxlci4kcmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAkZWxlbWVudC5odG1sKG5nTW9kZWxDb250cm9sbGVyLiR2aWV3VmFsdWUgfHwgJycpO1xuICAgICAgfTtcblxuICAgICAgLy92aWV3IC0tPiBtb2RlbFxuICAgICAgZnVuY3Rpb24gdmlld1RvTW9kZWwoKSB7XG4gICAgICAgIG5nTW9kZWxDb250cm9sbGVyLiRzZXRWaWV3VmFsdWUoJGVsZW1lbnQuaHRtbCgpKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGV2ZW50c1RvQmluZCA9IFtcbiAgICAgICAgJ2JsdXInLFxuICAgICAgICAna2V5dXAnLFxuICAgICAgICAnY2hhbmdlJyxcbiAgICAgICAgJ2ZvY3VzJyxcbiAgICAgICAgJ2NsaWNrJ1xuICAgICAgXTtcblxuICAgICAgaWYgKGFuZ3VsYXIuaXNGdW5jdGlvbihzY29wZS5vblBhc3RlKSkge1xuICAgICAgICAkZWxlbWVudC5vbigncGFzdGUnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgc2NvcGUub25QYXN0ZShlLCAkZWxlbWVudC5odG1sKCkpLnRoZW4oZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICAkZWxlbWVudC5odG1sKHZhbCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgZXZlbnRzVG9CaW5kLnB1c2goJ3Bhc3RlJyk7XG4gICAgICB9XG5cbiAgICAgICRlbGVtZW50LmJpbmQoZXZlbnRzVG9CaW5kLmpvaW4oJyAnKSwgZnVuY3Rpb24oKSB7XG4gICAgICAgIHZpZXdUb01vZGVsKCk7XG4gICAgICAgIHNjb3BlLiRhcHBseUFzeW5jKCk7XG4gICAgICB9KTtcblxuICAgICAgc2NvcGUuaXNFZGl0b3JBY3RpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAkZWxlbWVudFswXSA9PT0gJGRvY3VtZW50WzBdLmFjdGl2ZUVsZW1lbnQ7XG4gICAgICB9O1xuXG4gICAgICBzY29wZS4kb24oJ2V4ZWNDb21tYW5kJywgZnVuY3Rpb24gKGV2ZW50LCBwYXJhbXMpIHtcbiAgICAgICAgJGVsZW1lbnRbMF0uZm9jdXMoKTtcblxuICAgICAgICB2YXIgaWVTdHlsZVRleHRTZWxlY3Rpb24gPSAkZG9jdW1lbnRbMF0uc2VsZWN0aW9uLFxuICAgICAgICAgIGNvbW1hbmQgPSBwYXJhbXMuY29tbWFuZCxcbiAgICAgICAgICBvcHRpb25zID0gcGFyYW1zLm9wdGlvbnM7XG5cbiAgICAgICAgaWYgKGllU3R5bGVUZXh0U2VsZWN0aW9uKSB7XG4gICAgICAgICAgdmFyIHRleHRSYW5nZSA9IGllU3R5bGVUZXh0U2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoJGRvY3VtZW50WzBdLnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZCAmJiAhJGRvY3VtZW50WzBdLnF1ZXJ5Q29tbWFuZFN1cHBvcnRlZChjb21tYW5kKSkge1xuICAgICAgICAgIHRocm93ICdUaGUgY29tbWFuZCBcIicgKyBjb21tYW5kICsgJ1wiIGlzIG5vdCBzdXBwb3J0ZWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgJGRvY3VtZW50WzBdLmV4ZWNDb21tYW5kKGNvbW1hbmQsIGZhbHNlLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAoaWVTdHlsZVRleHRTZWxlY3Rpb24pIHtcbiAgICAgICAgICB0ZXh0UmFuZ2UuY29sbGFwc2UoZmFsc2UpO1xuICAgICAgICAgIHRleHRSYW5nZS5zZWxlY3QoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZpZXdUb01vZGVsKCk7XG4gICAgICB9KTtcblx0ICBcblx0ICBzY29wZS4kb24oJ253LWRpc2FibGVkJywgZnVuY3Rpb24oZXZlbnQsIGlzRGlzYWJsZWQpIHtcblx0XHQgICRlbGVtZW50LmF0dHIoJ2NvbnRlbnRlZGl0YWJsZScsICFpc0Rpc2FibGVkKTtcblx0ICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICBsaW5rOiBpbml0XG4gICAgfVxuICB9XVxuKTtcblxuYW5ndWxhci5tb2R1bGUoJ25nV2lnJylcbiAgICAuZGlyZWN0aXZlKCduZ1dpZ1BsdWdpbicsIFtcIiRjb21waWxlXCIsIGZ1bmN0aW9uICgkY29tcGlsZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gJzwnICsgc2NvcGUuYnV0dG9uLnBsdWdpbk5hbWUgKyAnIC8+JyxcbiAgICAgICAgICAgICAgICAgICAgY29tcGlsZWQgPSAkY29tcGlsZSh0ZW1wbGF0ZSkoc2NvcGUpO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZXBsYWNlV2l0aChjb21waWxlZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCduZ1dpZycpLnByb3ZpZGVyKCduZ1dpZ1Rvb2xiYXInLCBmdW5jdGlvbiAoKSB7XG5cbiAgdmFyIGJ1dHRvbkxpYnJhcnkgPSB7XG4gICAgbGlzdDE6IHt0aXRsZTogJ1Vub3JkZXJlZCBMaXN0JywgY29tbWFuZDogJ2luc2VydHVub3JkZXJlZGxpc3QnLCBzdHlsZUNsYXNzOiAnbGlzdC11bCd9LFxuICAgIGxpc3QyOiB7dGl0bGU6ICdPcmRlcmVkIExpc3QnLCBjb21tYW5kOiAnaW5zZXJ0b3JkZXJlZGxpc3QnLCBzdHlsZUNsYXNzOiAnbGlzdC1vbCd9LFxuICAgIGJvbGQ6IHt0aXRsZTogJ0JvbGQnLCBjb21tYW5kOiAnYm9sZCcsIHN0eWxlQ2xhc3M6ICdib2xkJ30sXG4gICAgaXRhbGljOiB7dGl0bGU6ICdJdGFsaWMnLCBjb21tYW5kOiAnaXRhbGljJywgc3R5bGVDbGFzczogJ2l0YWxpYyd9LFxuICAgIGxpbms6IHt0aXRsZTogJ0xpbmsnLCBjb21tYW5kOiAnY3JlYXRlbGluaycsIHN0eWxlQ2xhc3M6ICdsaW5rJ31cbiAgfTtcblxuICB2YXIgZGVmYXVsdEJ1dHRvbnNMaXN0ID0gWydsaXN0MScsICdsaXN0MicsICdib2xkJywgJ2l0YWxpYycsICdsaW5rJ107XG5cbiAgdmFyIGlzQnV0dG9uQWN0aXZlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmNvbW1hbmQgJiYgZG9jdW1lbnQucXVlcnlDb21tYW5kU3RhdGUodGhpcy5jb21tYW5kKTtcbiAgfTtcblxuICB0aGlzLnNldEJ1dHRvbnMgPSBmdW5jdGlvbihidXR0b25zKSB7XG4gICAgaWYoIWFuZ3VsYXIuaXNBcnJheShidXR0b25zKSkge1xuICAgICAgdGhyb3cgJ0FyZ3VtZW50IFwiYnV0dG9uc1wiIHNob3VsZCBiZSBhbiBhcnJheSc7XG4gICAgfVxuXG4gICAgZGVmYXVsdEJ1dHRvbnNMaXN0ID0gYnV0dG9ucztcbiAgfTtcblxuICB0aGlzLmFkZFN0YW5kYXJkQnV0dG9uID0gZnVuY3Rpb24gKG5hbWUsIHRpdGxlLCBjb21tYW5kLCBzdHlsZUNsYXNzKSB7XG4gICAgaWYoIW5hbWUgfHwgIXRpdGxlIHx8ICFjb21tYW5kKSB7XG4gICAgICB0aHJvdyAnQXJndW1lbnRzIFwibmFtZVwiLCBcInRpdGxlXCIgYW5kIFwiY29tbWFuZFwiIGFyZSByZXF1aXJlZCc7XG4gICAgfVxuXG4gICAgc3R5bGVDbGFzcyA9IHN0eWxlQ2xhc3MgfHwgJyc7XG4gICAgYnV0dG9uTGlicmFyeVtuYW1lXSA9IHt0aXRsZTogdGl0bGUsIGNvbW1hbmQ6IGNvbW1hbmQsIHN0eWxlQ2xhc3M6IHN0eWxlQ2xhc3N9XG4gICAgZGVmYXVsdEJ1dHRvbnNMaXN0LnB1c2gobmFtZSk7XG4gIH07XG5cbiAgdGhpcy5hZGRDdXN0b21CdXR0b24gPSBmdW5jdGlvbiAobmFtZSwgcGx1Z2luTmFtZSkge1xuICAgIGlmKCFuYW1lIHx8ICFwbHVnaW5OYW1lKSB7XG4gICAgICB0aHJvdyAnQXJndW1lbnRzIFwibmFtZVwiIGFuZCBcInBsdWdpbk5hbWVcIiBhcmUgcmVxdWlyZWQnO1xuICAgIH1cblxuICAgIGJ1dHRvbkxpYnJhcnlbbmFtZV0gPSB7cGx1Z2luTmFtZTogcGx1Z2luTmFtZSwgaXNDb21wbGV4OiB0cnVlfTtcbiAgICBkZWZhdWx0QnV0dG9uc0xpc3QucHVzaChuYW1lKTtcbiAgfTtcblxuICB0aGlzLiRnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGdldFRvb2xiYXJCdXR0b25zOiBmdW5jdGlvbihsaXN0KSB7XG4gICAgICAgIHZhciB0b29sYmFyQnV0dG9ucyA9IFtdO1xuICAgICAgICAobGlzdCB8fCBkZWZhdWx0QnV0dG9uc0xpc3QpLmZvckVhY2goZnVuY3Rpb24oYnV0dG9uS2V5KSB7XG4gICAgICAgICAgaWYoIWJ1dHRvbkxpYnJhcnlbYnV0dG9uS2V5XSkge1xuICAgICAgICAgICAgdGhyb3cgJ1RoZXJlIGlzIG5vIFwiJyArIGJ1dHRvbktleSArICdcIiBpbiB5b3VyIGxpYnJhcnkuIFBvc3NpYmxlIHZhcmlhbnRzOiAnICsgT2JqZWN0LmtleXMoYnV0dG9uTGlicmFyeSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIGJ1dHRvbiA9IGFuZ3VsYXIuY29weShidXR0b25MaWJyYXJ5W2J1dHRvbktleV0pO1xuXG4gICAgICAgICAgaWYoIWFuZ3VsYXIuaXNGdW5jdGlvbihidXR0b24uaXNBY3RpdmUpKSB7XG4gICAgICAgICAgICBidXR0b24uaXNBY3RpdmUgPSBpc0J1dHRvbkFjdGl2ZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0b29sYmFyQnV0dG9ucy5wdXNoKGJ1dHRvbik7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdG9vbGJhckJ1dHRvbnM7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuXG59KTtcbmFuZ3VsYXIubW9kdWxlKCduZ1dpZycpXG4gICAgLmNvbmZpZyhbJ25nV2lnVG9vbGJhclByb3ZpZGVyJywgZnVuY3Rpb24gKG5nV2lnVG9vbGJhclByb3ZpZGVyKSB7XG4gICAgICAgbmdXaWdUb29sYmFyUHJvdmlkZXIuYWRkQ3VzdG9tQnV0dG9uKCdmb3JtYXRzJywgJ253LWZvcm1hdHMtYnV0dG9uJyk7XG4gICAgfV0pXG4gICAgLmRpcmVjdGl2ZSgnbndGb3JtYXRzQnV0dG9uJywgZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiAnPHNlbGVjdCBjbGFzcz1cIm53LXNlbGVjdFwiIG5nLW1vZGVsPVwiZm9ybWF0XCIgbmctY2hhbmdlPVwiZXhlY0NvbW1hbmQoXFwnZm9ybWF0YmxvY2tcXCcsIGZvcm1hdC52YWx1ZSlcIiBuZy1vcHRpb25zPVwiZm9ybWF0Lm5hbWUgZm9yIGZvcm1hdCBpbiBmb3JtYXRzXCIgbmctZGlzYWJsZWQ9XCJlZGl0TW9kZSB8fCBpc0Rpc2FibGVkXCI+PC9zZWxlY3Q+JyxcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xuICAgICAgICAgICAgICAgIHNjb3BlLmZvcm1hdHMgPSBbXG4gICAgICAgICAgICAgICAgICAgIHtuYW1lOiAnTm9ybWFsIHRleHQnLCB2YWx1ZTogJ3AnfSxcbiAgICAgICAgICAgICAgICAgICAge25hbWU6ICdIZWFkZXIgMScsIHZhbHVlOiAnaDEnfSxcbiAgICAgICAgICAgICAgICAgICAge25hbWU6ICdIZWFkZXIgMicsIHZhbHVlOiAnaDInfSxcbiAgICAgICAgICAgICAgICAgICAge25hbWU6ICdIZWFkZXIgMycsIHZhbHVlOiAnaDMnfVxuICAgICAgICAgICAgICAgIF07XG5cbiAgICAgICAgICAgICAgICBzY29wZS5mb3JtYXQgPSBzY29wZS5mb3JtYXRzWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pO1xuXG5cbmFuZ3VsYXIubW9kdWxlKCduZ3dpZy1hcHAtdGVtcGxhdGVzJywgWyduZy13aWcvdmlld3Mvbmctd2lnLmh0bWwnXSk7XG5cbmFuZ3VsYXIubW9kdWxlKFwibmctd2lnL3ZpZXdzL25nLXdpZy5odG1sXCIsIFtdKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHtcbiAgJHRlbXBsYXRlQ2FjaGUucHV0KFwibmctd2lnL3ZpZXdzL25nLXdpZy5odG1sXCIsXG4gICAgXCI8ZGl2IGNsYXNzPVxcXCJuZy13aWdcXFwiPlxcblwiICtcbiAgICBcIiAgPHVsIGNsYXNzPVxcXCJudy10b29sYmFyXFxcIj5cXG5cIiArXG4gICAgXCIgICAgPGxpIGNsYXNzPVxcXCJudy10b29sYmFyX19pdGVtXFxcIiBuZy1yZXBlYXQ9XFxcImJ1dHRvbiBpbiB0b29sYmFyQnV0dG9uc1xcXCIgPlxcblwiICtcbiAgICBcIiAgICAgICAgPGRpdiBuZy1pZj1cXFwiIWJ1dHRvbi5pc0NvbXBsZXhcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcIm53LWJ1dHRvbiB7e2J1dHRvbi5zdHlsZUNsYXNzfX1cXFwiIHRpdGxlPVxcXCJ7e2J1dHRvbi50aXRsZX19XFxcIiBuZy1jbGljaz1cXFwiZXhlY0NvbW1hbmQoYnV0dG9uLmNvbW1hbmQpXFxcIiBuZy1jbGFzcz1cXFwieyAnbnctYnV0dG9uLS1hY3RpdmUnOiBpc0VkaXRvckFjdGl2ZSgpICYmIGJ1dHRvbi5pc0FjdGl2ZSgpIH1cXFwiIG5nLWRpc2FibGVkPVxcXCJlZGl0TW9kZSB8fCBpc0Rpc2FibGVkXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgICAgICB7eyBidXR0b24udGl0bGUgfX1cXG5cIiArXG4gICAgXCIgICAgICAgICAgPC9idXR0b24+XFxuXCIgK1xuICAgIFwiICAgICAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgICAgIDxkaXYgbmctaWY9XFxcImJ1dHRvbi5pc0NvbXBsZXhcXFwiPlxcblwiICtcbiAgICBcIiAgICAgICAgICA8bmctd2lnLXBsdWdpbiBwbHVnaW49XFxcInt7YnV0dG9ufX1cXFwiPjwvbmctd2lnLXBsdWdpbj5cXG5cIiArXG4gICAgXCIgICAgICAgIDwvZGl2PlxcblwiICtcbiAgICBcIiAgICA8L2xpPjwhLS1cXG5cIiArXG4gICAgXCIgICAgLS0+PGxpIGNsYXNzPVxcXCJudy10b29sYmFyX19pdGVtXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICA8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcIm53LWJ1dHRvbiBudy1idXR0b24tLXNvdXJjZVxcXCIgdGl0bGU9XFxcIkVkaXQgSFRNTFxcXCIgbmctY2xhc3M9XFxcInsgJ253LWJ1dHRvbi0tYWN0aXZlJzogZWRpdE1vZGUgfVxcXCIgbmctc2hvdz1cXFwiaXNTb3VyY2VNb2RlQWxsb3dlZFxcXCIgbmctY2xpY2s9XFxcInRvZ2dsZUVkaXRNb2RlKClcXFwiIG5nLWRpc2FibGVkPVxcXCJpc0Rpc2FibGVkXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICAgIEVkaXQgSFRNTFxcblwiICtcbiAgICBcIiAgICAgIDwvYnV0dG9uPlxcblwiICtcbiAgICBcIiAgICA8L2xpPlxcblwiICtcbiAgICBcIiAgPC91bD5cXG5cIiArXG4gICAgXCJcXG5cIiArXG4gICAgXCIgIDxkaXYgY2xhc3M9XFxcIm53LWVkaXRvci1jb250YWluZXJcXFwiPlxcblwiICtcbiAgICBcIiAgICA8ZGl2IGNsYXNzPVxcXCJudy1lZGl0b3JfX3NyYy1jb250YWluZXJcXFwiIG5nLXNob3c9XFxcImVkaXRNb2RlXFxcIj5cXG5cIiArXG4gICAgXCIgICAgICA8dGV4dGFyZWEgbmctcmVxdWlyZWQ9XFxcImlzUmVxdWlyZWRcXFwiIG5nLWRpc2FibGVkPVxcXCJpc0Rpc2FibGVkXFxcIiBjbGFzcz1cXFwibnctZWRpdG9yX19zcmNcXFwiIG5nLW1vZGVsPVxcXCJjb250ZW50XFxcIj48L3RleHRhcmVhPlxcblwiICtcbiAgICBcIiAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgICAgPGRpdiBjbGFzcz1cXFwibnctZWRpdG9yXFxcIiBuZy1jbGFzcz1cXFwieyAnbnctZGlzYWJsZWQnOiBpc0Rpc2FibGVkIH1cXFwiPlxcblwiICtcbiAgICBcIiAgICAgIDxkaXYgbmFtZT1cXFwie3tmb3JtRWxlbWVudE5hbWV9fVxcXCIgbmctcmVxdWlyZWQ9XFxcImlzUmVxdWlyZWRcXFwiIHRhYmluZGV4PVxcXCItMVxcXCIgbmctY2xhc3M9XFxcInsnbnctaW52aXNpYmxlJzogZWRpdE1vZGV9XFxcIiBjbGFzcz1cXFwibnctZWRpdG9yX19yZXNcXFwiIG5nLW1vZGVsPVxcXCJjb250ZW50XFxcIiBuZy13aWctZWRpdGFibGUgb24tcGFzdGU9XFxcIm9uUGFzdGVcXFwiPjwvZGl2PlxcblwiICtcbiAgICBcIiAgICA8L2Rpdj5cXG5cIiArXG4gICAgXCIgIDwvZGl2PlxcblwiICtcbiAgICBcIjwvZGl2PlxcblwiICtcbiAgICBcIlwiKTtcbn1dKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L25nLXdpZy9kaXN0L25nLXdpZy5qc1xuICoqIG1vZHVsZSBpZCA9IDE2MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9lZGl0b3JCdXR0b25zLmNzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9lZGl0b3JCdXR0b25zLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2VkaXRvckJ1dHRvbnMuY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvcmljaFRleHRFZGl0b3IvZWRpdG9yQnV0dG9ucy5jc3NcbiAqKiBtb2R1bGUgaWQgPSAxNjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLm53LWJ1dHRvbi5oZWFkZXI6YmVmb3JlIHtcXHJcXG4gIGNvbnRlbnQ6ICdcXFxcRjFEQyc7IC8qIGZhLWhlYWRlciAqL1xcclxcbn1cXHJcXG5cXHJcXG4ubnctYnV0dG9uLnBhcmFncmFwaDpiZWZvcmUge1xcclxcbiAgY29udGVudDogJ1xcXFxGMUREJzsgLyogZmEtcGFyYWdyYXBoICovXFxyXFxufVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9zb3VyY2UvY29tcG9uZW50cy9yaWNoVGV4dEVkaXRvci9lZGl0b3JCdXR0b25zLmNzc1xuICoqIG1vZHVsZSBpZCA9IDE2NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG5leHBvcnRzLnByb3ZpZGVyTmFtZSA9ICdyaWNoVGV4dEVkaXRvcic7XHJcbnJpY2hUZXh0RWRpdG9yUHJvdmlkZXIuJGluamVjdCA9IFsnbmdXaWdUb29sYmFyUHJvdmlkZXInXTtcclxuZnVuY3Rpb24gcmljaFRleHRFZGl0b3JQcm92aWRlcihuZ1dpZ1Rvb2xiYXJQcm92aWRlcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBhZGRDdXN0b21CdXR0b246IGZ1bmN0aW9uIChuYW1lLCBjb21wb25lbnQpIHtcclxuICAgICAgICAgICAgbmdXaWdUb29sYmFyUHJvdmlkZXIuYWRkQ3VzdG9tQnV0dG9uKG5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBhZGRTdGFuZGFyZEJ1dHRvbjogZnVuY3Rpb24gKG5hbWUsIHRvb2x0aXAsIGNvbW1hbmQsIGljb24pIHtcclxuICAgICAgICAgICAgbmdXaWdUb29sYmFyUHJvdmlkZXIuYWRkU3RhbmRhcmRCdXR0b24obmFtZSwgdG9vbGJhciwgY29tbWFuZCwgJ2ZhLScgKyBpY29uKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgICRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbmdXaWdUb29sYmFyUHJvdmlkZXIuYWRkQ3VzdG9tQnV0dG9uKCdwYXJhZ3JhcGgnLCAncmwtcGFyYWdyYXBoLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICBuZ1dpZ1Rvb2xiYXJQcm92aWRlci5hZGRDdXN0b21CdXR0b24oJ2gxJywgJ3JsLWhlYWRlci1idXR0b24nKTtcclxuICAgICAgICAgICAgbmdXaWdUb29sYmFyUHJvdmlkZXIuYWRkU3RhbmRhcmRCdXR0b24oJ3VuZGVybGluZScsICdVbmRlcmxpbmUnLCAndW5kZXJsaW5lJywgJ2ZhLXVuZGVybGluZScpO1xyXG4gICAgICAgICAgICBuZ1dpZ1Rvb2xiYXJQcm92aWRlci5hZGRTdGFuZGFyZEJ1dHRvbignaW5kZW50JywgJ0luZGVudCcsICdpbmRlbnQnLCAnZmEtaW5kZW50Jyk7XHJcbiAgICAgICAgICAgIG5nV2lnVG9vbGJhclByb3ZpZGVyLmFkZFN0YW5kYXJkQnV0dG9uKCdvdXRkZW50JywgJ091dGRlbnQnLCAnb3V0ZGVudCcsICdmYS1vdXRkZW50Jyk7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5yaWNoVGV4dEVkaXRvclByb3ZpZGVyID0gcmljaFRleHRFZGl0b3JQcm92aWRlcjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pY21samFGUmxlSFJGWkdsMGIzSXVZMjl1Wm1sbkxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpY21samFGUmxlSFJGWkdsMGIzSXVZMjl1Wm1sbkxuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEZsQlFWa3NRMEZCUXp0QlFVVkdMRzlDUVVGWkxFZEJRVmNzWjBKQlFXZENMRU5CUVVNN1FVRlJia1FzYzBKQlFYTkNMRU5CUVVNc1QwRkJUeXhIUVVGSExFTkJRVU1zYzBKQlFYTkNMRU5CUVVNc1EwRkJRenRCUVVNeFJDeG5RMEZCZFVNc2IwSkJRWGxDTzBsQlF5OUVMRmxCUVZrc1EwRkJRenRKUVVWaUxFMUJRVTBzUTBGQlF6dFJRVU5PTEdWQlFXVXNXVUZCUXl4SlFVRlpMRVZCUVVVc1UwRkJhVUk3V1VGRE9VTXNiMEpCUVc5Q0xFTkJRVU1zWlVGQlpTeERRVUZETEVsQlFVa3NSVUZCUlN4VFFVRlRMRU5CUVVNc1EwRkJRenRSUVVOMlJDeERRVUZETzFGQlEwUXNhVUpCUVdsQ0xGbEJRVU1zU1VGQldTeEZRVUZGTEU5QlFXVXNSVUZCUlN4UFFVRmxMRVZCUVVVc1NVRkJXVHRaUVVNM1JTeHZRa0ZCYjBJc1EwRkJReXhwUWtGQmFVSXNRMEZCUXl4SlFVRkpMRVZCUVVVc1QwRkJUeXhGUVVGRkxFOUJRVThzUlVGQlJTeExRVUZMTEVkQlFVY3NTVUZCU1N4RFFVRkRMRU5CUVVNN1VVRkRPVVVzUTBGQlF6dFJRVU5FTEVsQlFVazdXVUZEU0N4dlFrRkJiMElzUTBGQlF5eGxRVUZsTEVOQlFVTXNWMEZCVnl4RlFVRkZMSEZDUVVGeFFpeERRVUZETEVOQlFVTTdXVUZEZWtVc2IwSkJRVzlDTEVOQlFVTXNaVUZCWlN4RFFVRkRMRWxCUVVrc1JVRkJSU3hyUWtGQmEwSXNRMEZCUXl4RFFVRkRPMWxCUXk5RUxHOUNRVUZ2UWl4RFFVRkRMR2xDUVVGcFFpeERRVUZETEZkQlFWY3NSVUZCUlN4WFFVRlhMRVZCUVVVc1YwRkJWeXhGUVVGRkxHTkJRV01zUTBGQlF5eERRVUZETzFsQlF6bEdMRzlDUVVGdlFpeERRVUZETEdsQ1FVRnBRaXhEUVVGRExGRkJRVkVzUlVGQlJTeFJRVUZSTEVWQlFVVXNVVUZCVVN4RlFVRkZMRmRCUVZjc1EwRkJReXhEUVVGRE8xbEJRMnhHTEc5Q1FVRnZRaXhEUVVGRExHbENRVUZwUWl4RFFVRkRMRk5CUVZNc1JVRkJSU3hUUVVGVExFVkJRVVVzVTBGQlV5eEZRVUZGTEZsQlFWa3NRMEZCUXl4RFFVRkRPMUZCUTNaR0xFTkJRVU03UzBGRFJDeERRVUZETzBGQlEwZ3NRMEZCUXp0QlFXeENaU3c0UWtGQmMwSXNlVUpCYTBKeVF5eERRVUZCSW4wPVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9yaWNoVGV4dEVkaXRvci9yaWNoVGV4dEVkaXRvci5jb25maWcuanNcbiAqKiBtb2R1bGUgaWQgPSAxNjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3MvY29tbW9uanMuZC50cycgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG5leHBvcnRzLmhlYWRlckJ1dHRvbkRpcmVjdGl2ZU5hbWUgPSAncmxIZWFkZXJCdXR0b24nO1xyXG5mdW5jdGlvbiBoZWFkZXJCdXR0b24oKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgdGVtcGxhdGU6IFwiXFxuXFx0XFx0XFx0PGJ1dHRvbiB0eXBlPVxcXCJidXR0b25cXFwiIGNsYXNzPVxcXCJudy1idXR0b24gaGVhZGVyXFxcIiBuZy1jbGljaz1cXFwidHJpZ2dlcigpXFxcIiBuZy1kaXNhYmxlZD1cXFwiZWRpdE1vZGUgfHwgaXNEaXNhYmxlZFxcXCIgdGl0bGU9XFxcIkhlYWRlciAxXFxcIj48L2J1dHRvbj5cXG5cXHRcXHRcIixcclxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUpIHtcclxuICAgICAgICAgICAgc2NvcGUudHJpZ2dlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLmV4ZWNDb21tYW5kKCdmb3JtYXRibG9jaycsICdoMScpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuaGVhZGVyQnV0dG9uID0gaGVhZGVyQnV0dG9uO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lhR1ZoWkdWeVFuVjBkRzl1TG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2lhR1ZoWkdWeVFuVjBkRzl1TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMREJFUVVFd1JEdEJRVVV4UkN4WlFVRlpMRU5CUVVNN1FVRkpSaXhwUTBGQmVVSXNSMEZCVnl4blFrRkJaMElzUTBGQlF6dEJRVTlvUlR0SlFVTkRMRmxCUVZrc1EwRkJRenRKUVVOaUxFMUJRVTBzUTBGQlF6dFJRVU5PTEZGQlFWRXNSVUZCUlN4SFFVRkhPMUZCUTJJc1VVRkJVU3hGUVVGRkxEWktRVVZVTzFGQlEwUXNTVUZCU1N4WlFVRkRMRXRCUVhsQ08xbEJRemRDTEV0QlFVc3NRMEZCUXl4UFFVRlBMRWRCUVVjN1owSkJRMllzUzBGQlN5eERRVUZETEZkQlFWY3NRMEZCUXl4aFFVRmhMRVZCUVVVc1NVRkJTU3hEUVVGRExFTkJRVU03V1VGRGVFTXNRMEZCUXl4RFFVRkRPMUZCUTBnc1EwRkJRenRMUVVORUxFTkJRVU03UVVGRFNDeERRVUZETzBGQlltVXNiMEpCUVZrc1pVRmhNMElzUTBGQlFTSjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvcmljaFRleHRFZGl0b3IvaGVhZGVyQnV0dG9uLmpzXG4gKiogbW9kdWxlIGlkID0gMTY2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi90eXBpbmdzL2NvbW1vbmpzLmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxuZXhwb3J0cy5wYXJhZ3JhcGhCdXR0b25EaXJlY3RpdmVOYW1lID0gJ3JsUGFyYWdyYXBoQnV0dG9uJztcclxuZnVuY3Rpb24gcGFyYWdyYXBoQnV0dG9uKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgIHRlbXBsYXRlOiBcIlxcblxcdFxcdFxcdDxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwibnctYnV0dG9uIHBhcmFncmFwaFxcXCIgbmctY2xpY2s9XFxcInRyaWdnZXIoKVxcXCIgbmctZGlzYWJsZWQ9XFxcImVkaXRNb2RlIHx8IGlzRGlzYWJsZWRcXFwiIHRpdGxlPVxcXCJwYXJhZ3JhcGhcXFwiPjwvYnV0dG9uPlxcblxcdFxcdFwiLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSkge1xyXG4gICAgICAgICAgICBzY29wZS50cmlnZ2VyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgc2NvcGUuZXhlY0NvbW1hbmQoJ2Zvcm1hdGJsb2NrJywgJ3AnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9LFxyXG4gICAgfTtcclxufVxyXG5leHBvcnRzLnBhcmFncmFwaEJ1dHRvbiA9IHBhcmFncmFwaEJ1dHRvbjtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pY0dGeVlXZHlZWEJvUW5WMGRHOXVMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWNHRnlZV2R5WVhCb1FuVjBkRzl1TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMREJFUVVFd1JEdEJRVVV4UkN4WlFVRlpMRU5CUVVNN1FVRkpSaXh2UTBGQk5FSXNSMEZCVnl4dFFrRkJiVUlzUTBGQlF6dEJRVTkwUlR0SlFVTkRMRmxCUVZrc1EwRkJRenRKUVVOaUxFMUJRVTBzUTBGQlF6dFJRVU5PTEZGQlFWRXNSVUZCUlN4SFFVRkhPMUZCUTJJc1VVRkJVU3hGUVVGRkxHbExRVVZVTzFGQlEwUXNTVUZCU1N4WlFVRkRMRXRCUVRSQ08xbEJRMmhETEV0QlFVc3NRMEZCUXl4UFFVRlBMRWRCUVVjN1owSkJRMllzUzBGQlN5eERRVUZETEZkQlFWY3NRMEZCUXl4aFFVRmhMRVZCUVVVc1IwRkJSeXhEUVVGRExFTkJRVU03V1VGRGRrTXNRMEZCUXl4RFFVRkRPMUZCUTBnc1EwRkJRenRMUVVORUxFTkJRVU03UVVGRFNDeERRVUZETzBGQlltVXNkVUpCUVdVc2EwSkJZVGxDTEVOQlFVRWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3JpY2hUZXh0RWRpdG9yL3BhcmFncmFwaEJ1dHRvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDE2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjx0ZXh0YXJlYSBjbGFzcz1cXFwicmljaC10ZXh0LWVkaXRvclxcXCIgbmctd2lnPVxcXCJlZGl0b3IubmdNb2RlbFxcXCIgYnV0dG9ucz1cXFwie3tlZGl0b3IudG9vbGJhcn19XFxcIiBuZy1kaXNhYmxlZD1cXFwiZWRpdG9yLm5nRGlzYWJsZWRcXFwiPjwvdGV4dGFyZWE+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvcmljaFRleHRFZGl0b3IvcmljaFRleHRFZGl0b3IuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE2OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnJlcXVpcmUoJ3VpLXNlbGVjdCcpO1xyXG5yZXF1aXJlKCd1aS1zZWxlY3QvZGlzdC9zZWxlY3QuY3NzJyk7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG52YXIgX190cmFuc2Zvcm0gPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMudHJhbnNmb3JtLnRyYW5zZm9ybTtcclxudmFyIGlucHV0XzEgPSByZXF1aXJlKCcuLi9pbnB1dC9pbnB1dCcpO1xyXG52YXIgY29tcG9uZW50VmFsaWRhdG9yX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uLy4uL3NlcnZpY2VzL2NvbXBvbmVudFZhbGlkYXRvci9jb21wb25lbnRWYWxpZGF0b3Iuc2VydmljZScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5zZWxlY3QnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxTZWxlY3QnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ1NlbGVjdENvbnRyb2xsZXInO1xyXG52YXIgU2VsZWN0Q29udHJvbGxlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoU2VsZWN0Q29udHJvbGxlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFNlbGVjdENvbnRyb2xsZXIoJHNjb3BlLCAkYXR0cnMsICRxLCBvYmplY3QsIGNvbXBvbmVudFZhbGlkYXRvckZhY3RvcnkpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAkc2NvcGUsICRhdHRycywgY29tcG9uZW50VmFsaWRhdG9yRmFjdG9yeSk7XHJcbiAgICAgICAgdGhpcy4kcSA9ICRxO1xyXG4gICAgICAgIHRoaXMub2JqZWN0ID0gb2JqZWN0O1xyXG4gICAgICAgIHRoaXMuX251bGxPcHRpb24gPSB7XHJcbiAgICAgICAgICAgIF9faXNOdWxsT3B0aW9uOiB0cnVlLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5pbnB1dFR5cGUgPSAnc2VsZWN0JztcclxuICAgIH1cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTZWxlY3RDb250cm9sbGVyLnByb3RvdHlwZSwgXCJzZWxlY3Rpb25cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5uZ01vZGVsLiR2aWV3VmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUuX19pc051bGxPcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubmdNb2RlbC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZ01vZGVsLiRzZXRWaWV3VmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBTZWxlY3RDb250cm9sbGVyLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgX3N1cGVyLnByb3RvdHlwZS4kb25Jbml0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQodGhpcy5vcHRpb25zKSkge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRJdGVtcygpLnRoZW4oZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHRoaXMuY29uZmlndXJlT3B0aW9ucyh0aGlzLm9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTZWxlY3RDb250cm9sbGVyLnByb3RvdHlwZS5nZXREaXNwbGF5TmFtZSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgaWYgKGl0ZW0gIT0gbnVsbCAmJiBpdGVtLl9faXNOdWxsT3B0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm51bGxPcHRpb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfX3RyYW5zZm9ybS5nZXRWYWx1ZShpdGVtLCB0aGlzLnNlbGVjdG9yKTtcclxuICAgIH07XHJcbiAgICBTZWxlY3RDb250cm9sbGVyLnByb3RvdHlwZS5sb2FkSXRlbXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB2YXIgcHJvbWlzZTtcclxuICAgICAgICBwcm9taXNlID0gdGhpcy5nZXRPcHRpb25zKCk7XHJcbiAgICAgICAgaWYgKHByb21pc2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBwcm9taXNlID0gdGhpcy4kcS53aGVuKHRoaXMub3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKG9wdGlvbnMpIHsgcmV0dXJuIF90aGlzLmNvbmZpZ3VyZU9wdGlvbnMob3B0aW9ucyk7IH0pO1xyXG4gICAgfTtcclxuICAgIFNlbGVjdENvbnRyb2xsZXIucHJvdG90eXBlLmNvbmZpZ3VyZU9wdGlvbnMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIGlmICghdGhpcy5vYmplY3QuaXNOdWxsT3JXaGl0ZXNwYWNlKHRoaXMubnVsbE9wdGlvbikpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy51bnNoaWZ0KHRoaXMuX251bGxPcHRpb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3B0aW9ucztcclxuICAgIH07XHJcbiAgICBTZWxlY3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckYXR0cnMnLCAnJHEnLCBfX29iamVjdC5zZXJ2aWNlTmFtZSwgY29tcG9uZW50VmFsaWRhdG9yX3NlcnZpY2VfMS5mYWN0b3J5TmFtZV07XHJcbiAgICByZXR1cm4gU2VsZWN0Q29udHJvbGxlcjtcclxufShpbnB1dF8xLklucHV0Q29udHJvbGxlcikpO1xyXG5leHBvcnRzLlNlbGVjdENvbnRyb2xsZXIgPSBTZWxlY3RDb250cm9sbGVyO1xyXG52YXIgc2VsZWN0ID0gaW5wdXRfMS5idWlsZElucHV0KHtcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3NlbGVjdC5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnc2VsZWN0JyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgb3B0aW9uczogJzw/JyxcclxuICAgICAgICBnZXRPcHRpb25zOiAnJicsXHJcbiAgICAgICAgc2VsZWN0b3I6ICc8PycsXHJcbiAgICAgICAgbmdEaXNhYmxlZDogJzw/JyxcclxuICAgICAgICBudWxsT3B0aW9uOiAnQCcsXHJcbiAgICB9LFxyXG59KTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbJ3VpLnNlbGVjdCcsIF9fb2JqZWN0Lm1vZHVsZU5hbWUsIGlucHV0XzEubW9kdWxlTmFtZV0pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgc2VsZWN0KVxyXG4gICAgLmNvbnRyb2xsZXIoZXhwb3J0cy5jb250cm9sbGVyTmFtZSwgU2VsZWN0Q29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWMyVnNaV04wTG1weklpd2ljMjkxY21ObFVtOXZkQ0k2SWlJc0luTnZkWEpqWlhNaU9sc2ljMlZzWldOMExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTERCRVFVRXdSRHRCUVVVeFJDeFpRVUZaTEVOQlFVTTdPenM3T3p0QlFVVmlMRkZCUVU4c1YwRkJWeXhEUVVGRExFTkJRVUU3UVVGRGJrSXNVVUZCVHl3eVFrRkJNa0lzUTBGQlF5eERRVUZCTzBGQlJXNURMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlEyNURMRWxCUVZrc1EwRkJReXhYUVVGTkxGRkJRVkVzUTBGQlF5eERRVUZCTzBGQlJUVkNMRFpEUVVGNVFpdzRRa0ZCT0VJc1EwRkJReXhEUVVGQk8wRkJRM2hFTEVsQlFVOHNVVUZCVVN4SFFVRkhMSFZEUVVGUkxFTkJRVU1zVFVGQlRTeERRVUZETzBGQlEyeERMRWxCUVU4c1YwRkJWeXhIUVVGSExIVkRRVUZSTEVOQlFVTXNVMEZCVXl4RFFVRkRMRk5CUVZNc1EwRkJRenRCUVVWc1JDeHpRa0ZCZFVVc1owSkJRV2RDTEVOQlFVTXNRMEZCUVR0QlFVTjRSaXd5UTBGQmVVWXNPRVJCUVRoRUxFTkJRVU1zUTBGQlFUdEJRVVUzU1N4clFrRkJWU3hIUVVGWExIbENRVUY1UWl4RFFVRkRPMEZCUXk5RExIRkNRVUZoTEVkQlFWY3NWVUZCVlN4RFFVRkRPMEZCUTI1RExITkNRVUZqTEVkQlFWY3NhMEpCUVd0Q0xFTkJRVU03UVVGRmRrUTdTVUZCYzBNc2IwTkJRV1U3U1VFeVFuQkVMREJDUVVGWkxFMUJRWE5DTEVWQlF6bENMRTFCUVRKQ0xFVkJRMjVDTEVWQlFYRkNMRVZCUTNKQ0xFMUJRU3RDTEVWQlEzWkRMSGxDUVVGeFJEdFJRVU40UkN4clFrRkJUU3hOUVVGTkxFVkJRVThzVFVGQlRTeEZRVUZGTEhsQ1FVRjVRaXhEUVVGRExFTkJRVU03VVVGSU0wTXNUMEZCUlN4SFFVRkdMRVZCUVVVc1EwRkJiVUk3VVVGRGNrSXNWMEZCVFN4SFFVRk9MRTFCUVUwc1EwRkJlVUk3VVVGd1FtNURMR2RDUVVGWExFZEJRVkU3V1VGRE1VSXNZMEZCWXl4RlFVRkZMRWxCUVVrN1UwRkRjRUlzUTBGQlF6dFJRWEZDUkN4SlFVRkpMRU5CUVVNc1UwRkJVeXhIUVVGSExGRkJRVkVzUTBGQlF6dEpRVU16UWl4RFFVRkRPMGxCY0VKRUxITkNRVUZKTEhWRFFVRlRPMkZCUVdJN1dVRkRReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4VlFVRlZMRU5CUVVNN1VVRkRhRU1zUTBGQlF6dGhRVVZFTEZWQlFXTXNTMEZCVlR0WlFVTjJRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNZMEZCWXl4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRE1VSXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhoUVVGaExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdXVUZEYkVNc1EwRkJRenRaUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzJkQ1FVTlFMRWxCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zWVVGQllTeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRPMWxCUTI1RExFTkJRVU03VVVGRFJpeERRVUZET3pzN1QwRlNRVHRKUVc5Q1JDeHJRMEZCVHl4SFFVRlFPMUZCUVVFc2FVSkJXVU03VVVGWVFTeG5Ra0ZCU3l4RFFVRkRMRTlCUVU4c1YwRkJSU3hEUVVGRE8xRkJSV2hDTEVWQlFVVXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhYUVVGWExFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOcVF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4SFFVRkhMRWxCUVVrc1EwRkJRenRaUVVOd1FpeEpRVUZKTEVOQlFVTXNVMEZCVXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVU1zVDBGQll6dG5Ra0ZEY0VNc1MwRkJTU3hEUVVGRExFOUJRVThzUjBGQlJ5eFBRVUZQTEVOQlFVTTdaMEpCUTNaQ0xFdEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NTMEZCU3l4RFFVRkRPMWxCUTNSQ0xFTkJRVU1zUTBGQlF5eERRVUZETzFGQlEwb3NRMEZCUXp0UlFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRE8xbEJRMUFzU1VGQlNTeERRVUZETEU5QlFVOHNSMEZCUnl4SlFVRkpMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhEUVVGRE8xRkJRM0JFTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCUlVRc2VVTkJRV01zUjBGQlpDeFZRVUZsTEVsQlFWTTdVVUZEZGtJc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeEpRVUZKTEVsQlFVa3NTVUZCU1N4SlFVRkpMRU5CUVVNc1kwRkJZeXhEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU42UXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF6dFJRVU40UWl4RFFVRkRPMUZCUlVRc1RVRkJUU3hEUVVGRExGZEJRVmNzUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RlFVRkZMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF6dEpRVU5zUkN4RFFVRkRPMGxCUlVRc2IwTkJRVk1zUjBGQlZEdFJRVUZCTEdsQ1FVOURPMUZCVGtFc1NVRkJTU3hQUVVGblF5eERRVUZETzFGQlEzSkRMRTlCUVU4c1IwRkJSeXhKUVVGSkxFTkJRVU1zVlVGQlZTeEZRVUZGTEVOQlFVTTdVVUZETlVJc1JVRkJSU3hEUVVGRExFTkJRVU1zVDBGQlR5eEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRja0lzVDBGQlR5eEhRVUZITEVsQlFVa3NRMEZCUXl4RlFVRkZMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXp0UlFVTjBReXhEUVVGRE8xRkJRMFFzVFVGQlRTeERRVUZETEU5QlFVOHNRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJReXhQUVVGakxFbEJRV01zVFVGQlRTeERRVUZETEV0QlFVa3NRMEZCUXl4blFrRkJaMElzUTBGQlF5eFBRVUZQTEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8wbEJRelZHTEVOQlFVTTdTVUZGUkN3eVEwRkJaMElzUjBGQmFFSXNWVUZCYVVJc1QwRkJZenRSUVVNNVFpeEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFXdENMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTjBSQ3hQUVVGUExFTkJRVU1zVDBGQlR5eERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJRenRSUVVOdVF5eERRVUZETzFGQlJVUXNUVUZCVFN4RFFVRkRMRTlCUVU4c1EwRkJRenRKUVVOb1FpeERRVUZETzBsQkwwTk5MSGRDUVVGUExFZEJRV0VzUTBGQlF5eFJRVUZSTEVWQlFVVXNVVUZCVVN4RlFVRkZMRWxCUVVrc1JVRkJSU3hSUVVGUkxFTkJRVU1zVjBGQlZ5eEZRVUZGTEhkRFFVRTJRaXhEUVVGRExFTkJRVU03U1VGblJEVkhMSFZDUVVGRE8wRkJRVVFzUTBGQlF5eEJRVEZGUkN4RFFVRnpReXgxUWtGQlpTeEhRVEJGY0VRN1FVRXhSVmtzZDBKQlFXZENMRzFDUVRCRk5VSXNRMEZCUVR0QlFVVkVMRWxCUVVrc1RVRkJUU3hIUVVFNFFpeHJRa0ZCVlN4RFFVRkRPMGxCUTJ4RUxGRkJRVkVzUlVGQlJTeFBRVUZQTEVOQlFVTXNaVUZCWlN4RFFVRkRPMGxCUTJ4RExGVkJRVlVzUlVGQlJTeHpRa0ZCWXp0SlFVTXhRaXhaUVVGWkxFVkJRVVVzVVVGQlVUdEpRVU4wUWl4UlFVRlJMRVZCUVVVN1VVRkRWQ3hQUVVGUExFVkJRVVVzU1VGQlNUdFJRVU5pTEZWQlFWVXNSVUZCUlN4SFFVRkhPMUZCUTJZc1VVRkJVU3hGUVVGRkxFbEJRVWs3VVVGRFpDeFZRVUZWTEVWQlFVVXNTVUZCU1R0UlFVTm9RaXhWUVVGVkxFVkJRVVVzUjBGQlJ6dExRVU5tTzBOQlEwUXNRMEZCUXl4RFFVRkRPMEZCUlVnc1QwRkJUeXhEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZMRU5CUVVNc1YwRkJWeXhGUVVGRkxGRkJRVkVzUTBGQlF5eFZRVUZWTEVWQlFVVXNhMEpCUVZjc1EwRkJReXhEUVVGRE8wdEJRM3BGTEZOQlFWTXNRMEZCUXl4eFFrRkJZU3hGUVVGRkxFMUJRVTBzUTBGQlF6dExRVU5vUXl4VlFVRlZMRU5CUVVNc2MwSkJRV01zUlVGQlJTeG5Ra0ZCWjBJc1EwRkJReXhEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvc2VsZWN0L3NlbGVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDE2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwicmVxdWlyZSgnLi9kaXN0L3NlbGVjdC5qcycpO1xubW9kdWxlLmV4cG9ydHMgPSAndWkuc2VsZWN0JztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3VpLXNlbGVjdC9pbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDE3MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiB1aS1zZWxlY3RcbiAqIGh0dHA6Ly9naXRodWIuY29tL2FuZ3VsYXItdWkvdWktc2VsZWN0XG4gKiBWZXJzaW9uOiAwLjE0LjYgLSAyMDE2LTAyLTE4VDIxOjAxOjM2Ljg5M1pcbiAqIExpY2Vuc2U6IE1JVFxuICovXG5cblxuKGZ1bmN0aW9uICgpIHsgXG5cInVzZSBzdHJpY3RcIjtcbnZhciBLRVkgPSB7XG4gICAgVEFCOiA5LFxuICAgIEVOVEVSOiAxMyxcbiAgICBFU0M6IDI3LFxuICAgIFNQQUNFOiAzMixcbiAgICBMRUZUOiAzNyxcbiAgICBVUDogMzgsXG4gICAgUklHSFQ6IDM5LFxuICAgIERPV046IDQwLFxuICAgIFNISUZUOiAxNixcbiAgICBDVFJMOiAxNyxcbiAgICBBTFQ6IDE4LFxuICAgIFBBR0VfVVA6IDMzLFxuICAgIFBBR0VfRE9XTjogMzQsXG4gICAgSE9NRTogMzYsXG4gICAgRU5EOiAzNSxcbiAgICBCQUNLU1BBQ0U6IDgsXG4gICAgREVMRVRFOiA0NixcbiAgICBDT01NQU5EOiA5MSxcblxuICAgIE1BUDogeyA5MSA6IFwiQ09NTUFORFwiLCA4IDogXCJCQUNLU1BBQ0VcIiAsIDkgOiBcIlRBQlwiICwgMTMgOiBcIkVOVEVSXCIgLCAxNiA6IFwiU0hJRlRcIiAsIDE3IDogXCJDVFJMXCIgLCAxOCA6IFwiQUxUXCIgLCAxOSA6IFwiUEFVU0VCUkVBS1wiICwgMjAgOiBcIkNBUFNMT0NLXCIgLCAyNyA6IFwiRVNDXCIgLCAzMiA6IFwiU1BBQ0VcIiAsIDMzIDogXCJQQUdFX1VQXCIsIDM0IDogXCJQQUdFX0RPV05cIiAsIDM1IDogXCJFTkRcIiAsIDM2IDogXCJIT01FXCIgLCAzNyA6IFwiTEVGVFwiICwgMzggOiBcIlVQXCIgLCAzOSA6IFwiUklHSFRcIiAsIDQwIDogXCJET1dOXCIgLCA0MyA6IFwiK1wiICwgNDQgOiBcIlBSSU5UU0NSRUVOXCIgLCA0NSA6IFwiSU5TRVJUXCIgLCA0NiA6IFwiREVMRVRFXCIsIDQ4IDogXCIwXCIgLCA0OSA6IFwiMVwiICwgNTAgOiBcIjJcIiAsIDUxIDogXCIzXCIgLCA1MiA6IFwiNFwiICwgNTMgOiBcIjVcIiAsIDU0IDogXCI2XCIgLCA1NSA6IFwiN1wiICwgNTYgOiBcIjhcIiAsIDU3IDogXCI5XCIgLCA1OSA6IFwiO1wiLCA2MSA6IFwiPVwiICwgNjUgOiBcIkFcIiAsIDY2IDogXCJCXCIgLCA2NyA6IFwiQ1wiICwgNjggOiBcIkRcIiAsIDY5IDogXCJFXCIgLCA3MCA6IFwiRlwiICwgNzEgOiBcIkdcIiAsIDcyIDogXCJIXCIgLCA3MyA6IFwiSVwiICwgNzQgOiBcIkpcIiAsIDc1IDogXCJLXCIgLCA3NiA6IFwiTFwiLCA3NyA6IFwiTVwiICwgNzggOiBcIk5cIiAsIDc5IDogXCJPXCIgLCA4MCA6IFwiUFwiICwgODEgOiBcIlFcIiAsIDgyIDogXCJSXCIgLCA4MyA6IFwiU1wiICwgODQgOiBcIlRcIiAsIDg1IDogXCJVXCIgLCA4NiA6IFwiVlwiICwgODcgOiBcIldcIiAsIDg4IDogXCJYXCIgLCA4OSA6IFwiWVwiICwgOTAgOiBcIlpcIiwgOTYgOiBcIjBcIiAsIDk3IDogXCIxXCIgLCA5OCA6IFwiMlwiICwgOTkgOiBcIjNcIiAsIDEwMCA6IFwiNFwiICwgMTAxIDogXCI1XCIgLCAxMDIgOiBcIjZcIiAsIDEwMyA6IFwiN1wiICwgMTA0IDogXCI4XCIgLCAxMDUgOiBcIjlcIiwgMTA2IDogXCIqXCIgLCAxMDcgOiBcIitcIiAsIDEwOSA6IFwiLVwiICwgMTEwIDogXCIuXCIgLCAxMTEgOiBcIi9cIiwgMTEyIDogXCJGMVwiICwgMTEzIDogXCJGMlwiICwgMTE0IDogXCJGM1wiICwgMTE1IDogXCJGNFwiICwgMTE2IDogXCJGNVwiICwgMTE3IDogXCJGNlwiICwgMTE4IDogXCJGN1wiICwgMTE5IDogXCJGOFwiICwgMTIwIDogXCJGOVwiICwgMTIxIDogXCJGMTBcIiAsIDEyMiA6IFwiRjExXCIgLCAxMjMgOiBcIkYxMlwiLCAxNDQgOiBcIk5VTUxPQ0tcIiAsIDE0NSA6IFwiU0NST0xMTE9DS1wiICwgMTg2IDogXCI7XCIgLCAxODcgOiBcIj1cIiAsIDE4OCA6IFwiLFwiICwgMTg5IDogXCItXCIgLCAxOTAgOiBcIi5cIiAsIDE5MSA6IFwiL1wiICwgMTkyIDogXCJgXCIgLCAyMTkgOiBcIltcIiAsIDIyMCA6IFwiXFxcXFwiICwgMjIxIDogXCJdXCIgLCAyMjIgOiBcIidcIlxuICAgIH0sXG5cbiAgICBpc0NvbnRyb2w6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciBrID0gZS53aGljaDtcbiAgICAgICAgc3dpdGNoIChrKSB7XG4gICAgICAgIGNhc2UgS0VZLkNPTU1BTkQ6XG4gICAgICAgIGNhc2UgS0VZLlNISUZUOlxuICAgICAgICBjYXNlIEtFWS5DVFJMOlxuICAgICAgICBjYXNlIEtFWS5BTFQ6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlLm1ldGFLZXkpIHJldHVybiB0cnVlO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuICAgIGlzRnVuY3Rpb25LZXk6IGZ1bmN0aW9uIChrKSB7XG4gICAgICAgIGsgPSBrLndoaWNoID8gay53aGljaCA6IGs7XG4gICAgICAgIHJldHVybiBrID49IDExMiAmJiBrIDw9IDEyMztcbiAgICB9LFxuICAgIGlzVmVydGljYWxNb3ZlbWVudDogZnVuY3Rpb24gKGspe1xuICAgICAgcmV0dXJuIH5bS0VZLlVQLCBLRVkuRE9XTl0uaW5kZXhPZihrKTtcbiAgICB9LFxuICAgIGlzSG9yaXpvbnRhbE1vdmVtZW50OiBmdW5jdGlvbiAoayl7XG4gICAgICByZXR1cm4gfltLRVkuTEVGVCxLRVkuUklHSFQsS0VZLkJBQ0tTUEFDRSxLRVkuREVMRVRFXS5pbmRleE9mKGspO1xuICAgIH0sXG4gICAgdG9TZXBhcmF0b3I6IGZ1bmN0aW9uIChrKSB7XG4gICAgICB2YXIgc2VwID0ge0VOVEVSOlwiXFxuXCIsVEFCOlwiXFx0XCIsU1BBQ0U6XCIgXCJ9W2tdO1xuICAgICAgaWYgKHNlcCkgcmV0dXJuIHNlcDtcbiAgICAgIC8vIHJldHVybiB1bmRlZmluZWQgZm9yIHNwZWNpYWwga2V5cyBvdGhlciB0aGFuIGVudGVyLCB0YWIgb3Igc3BhY2UuXG4gICAgICAvLyBubyB3YXkgdG8gdXNlIHRoZW0gdG8gY3V0IHN0cmluZ3MuXG4gICAgICByZXR1cm4gS0VZW2tdID8gdW5kZWZpbmVkIDogaztcbiAgICB9XG4gIH07XG5cbi8qKlxuICogQWRkIHF1ZXJ5U2VsZWN0b3JBbGwoKSB0byBqcUxpdGUuXG4gKlxuICoganFMaXRlIGZpbmQoKSBpcyBsaW1pdGVkIHRvIGxvb2t1cHMgYnkgdGFnIG5hbWUuXG4gKiBUT0RPIFRoaXMgd2lsbCBjaGFuZ2Ugd2l0aCBmdXR1cmUgdmVyc2lvbnMgb2YgQW5ndWxhckpTLCB0byBiZSByZW1vdmVkIHdoZW4gdGhpcyBoYXBwZW5zXG4gKlxuICogU2VlIGpxTGl0ZS5maW5kIC0gd2h5IG5vdCB1c2UgcXVlcnlTZWxlY3RvckFsbD8gaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9pc3N1ZXMvMzU4NlxuICogU2VlIGZlYXQoanFMaXRlKTogdXNlIHF1ZXJ5U2VsZWN0b3JBbGwgaW5zdGVhZCBvZiBnZXRFbGVtZW50c0J5VGFnTmFtZSBpbiBqcUxpdGUuZmluZCBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL3B1bGwvMzU5OFxuICovXG5pZiAoYW5ndWxhci5lbGVtZW50LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsID09PSB1bmRlZmluZWQpIHtcbiAgYW5ndWxhci5lbGVtZW50LnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gYW5ndWxhci5lbGVtZW50KHRoaXNbMF0ucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcikpO1xuICB9O1xufVxuXG4vKipcbiAqIEFkZCBjbG9zZXN0KCkgdG8ganFMaXRlLlxuICovXG5pZiAoYW5ndWxhci5lbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgYW5ndWxhci5lbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0ID0gZnVuY3Rpb24oIHNlbGVjdG9yKSB7XG4gICAgdmFyIGVsZW0gPSB0aGlzWzBdO1xuICAgIHZhciBtYXRjaGVzU2VsZWN0b3IgPSBlbGVtLm1hdGNoZXMgfHwgZWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgZWxlbS5tb3pNYXRjaGVzU2VsZWN0b3IgfHwgZWxlbS5tc01hdGNoZXNTZWxlY3RvcjtcblxuICAgIHdoaWxlIChlbGVtKSB7XG4gICAgICBpZiAobWF0Y2hlc1NlbGVjdG9yLmJpbmQoZWxlbSkoc2VsZWN0b3IpKSB7XG4gICAgICAgIHJldHVybiBlbGVtO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbSA9IGVsZW0ucGFyZW50RWxlbWVudDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xufVxuXG52YXIgbGF0ZXN0SWQgPSAwO1xuXG52YXIgdWlzID0gYW5ndWxhci5tb2R1bGUoJ3VpLnNlbGVjdCcsIFtdKVxuXG4uY29uc3RhbnQoJ3VpU2VsZWN0Q29uZmlnJywge1xuICB0aGVtZTogJ2Jvb3RzdHJhcCcsXG4gIHNlYXJjaEVuYWJsZWQ6IHRydWUsXG4gIHNvcnRhYmxlOiBmYWxzZSxcbiAgcGxhY2Vob2xkZXI6ICcnLCAvLyBFbXB0eSBieSBkZWZhdWx0LCBsaWtlIEhUTUwgdGFnIDxzZWxlY3Q+XG4gIHJlZnJlc2hEZWxheTogMTAwMCwgLy8gSW4gbWlsbGlzZWNvbmRzXG4gIGNsb3NlT25TZWxlY3Q6IHRydWUsXG4gIGRyb3Bkb3duUG9zaXRpb246ICdhdXRvJyxcbiAgZ2VuZXJhdGVJZDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGxhdGVzdElkKys7XG4gIH0sXG4gIGFwcGVuZFRvQm9keTogZmFsc2Vcbn0pXG5cbi8vIFNlZSBSZW5hbWUgbWluRXJyIGFuZCBtYWtlIGl0IGFjY2Vzc2libGUgZnJvbSBvdXRzaWRlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyL2FuZ3VsYXIuanMvaXNzdWVzLzY5MTNcbi5zZXJ2aWNlKCd1aVNlbGVjdE1pbkVycicsIGZ1bmN0aW9uKCkge1xuICB2YXIgbWluRXJyID0gYW5ndWxhci4kJG1pbkVycigndWkuc2VsZWN0Jyk7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZXJyb3IgPSBtaW5FcnIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB2YXIgbWVzc2FnZSA9IGVycm9yLm1lc3NhZ2UucmVwbGFjZShuZXcgUmVnRXhwKCdcXG5odHRwOi8vZXJyb3JzLmFuZ3VsYXJqcy5vcmcvLionKSwgJycpO1xuICAgIHJldHVybiBuZXcgRXJyb3IobWVzc2FnZSk7XG4gIH07XG59KVxuXG4vLyBSZWNyZWF0ZXMgb2xkIGJlaGF2aW9yIG9mIG5nLXRyYW5zY2x1ZGUuIFVzZWQgaW50ZXJuYWxseS5cbi5kaXJlY3RpdmUoJ3Vpc1RyYW5zY2x1ZGVBcHBlbmQnLCBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB7XG4gICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybCwgdHJhbnNjbHVkZSkge1xuICAgICAgICB0cmFuc2NsdWRlKHNjb3BlLCBmdW5jdGlvbiAoY2xvbmUpIHtcbiAgICAgICAgICBlbGVtZW50LmFwcGVuZChjbG9uZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG59KVxuXG4vKipcbiAqIEhpZ2hsaWdodHMgdGV4dCB0aGF0IG1hdGNoZXMgJHNlbGVjdC5zZWFyY2guXG4gKlxuICogVGFrZW4gZnJvbSBBbmd1bGFyVUkgQm9vdHN0cmFwIFR5cGVhaGVhZFxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL2Jvb3RzdHJhcC9ibG9iLzAuMTAuMC9zcmMvdHlwZWFoZWFkL3R5cGVhaGVhZC5qcyNMMzQwXG4gKi9cbi5maWx0ZXIoJ2hpZ2hsaWdodCcsIGZ1bmN0aW9uKCkge1xuICBmdW5jdGlvbiBlc2NhcGVSZWdleHAocXVlcnlUb0VzY2FwZSkge1xuICAgIHJldHVybiAoJycgKyBxdWVyeVRvRXNjYXBlKS5yZXBsYWNlKC8oWy4/KiteJFtcXF1cXFxcKCl7fXwtXSkvZywgJ1xcXFwkMScpO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKG1hdGNoSXRlbSwgcXVlcnkpIHtcbiAgICByZXR1cm4gcXVlcnkgJiYgbWF0Y2hJdGVtID8gKCcnICsgbWF0Y2hJdGVtKS5yZXBsYWNlKG5ldyBSZWdFeHAoZXNjYXBlUmVnZXhwKHF1ZXJ5KSwgJ2dpJyksICc8c3BhbiBjbGFzcz1cInVpLXNlbGVjdC1oaWdobGlnaHRcIj4kJjwvc3Bhbj4nKSA6IG1hdGNoSXRlbTtcbiAgfTtcbn0pXG5cbi8qKlxuICogQSByZWFkLW9ubHkgZXF1aXZhbGVudCBvZiBqUXVlcnkncyBvZmZzZXQgZnVuY3Rpb246IGh0dHA6Ly9hcGkuanF1ZXJ5LmNvbS9vZmZzZXQvXG4gKlxuICogVGFrZW4gZnJvbSBBbmd1bGFyVUkgQm9vdHN0cmFwIFBvc2l0aW9uOlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL2Jvb3RzdHJhcC9ibG9iL21hc3Rlci9zcmMvcG9zaXRpb24vcG9zaXRpb24uanMjTDcwXG4gKi9cbi5mYWN0b3J5KCd1aXNPZmZzZXQnLFxuICBbJyRkb2N1bWVudCcsICckd2luZG93JyxcbiAgZnVuY3Rpb24gKCRkb2N1bWVudCwgJHdpbmRvdykge1xuXG4gIHJldHVybiBmdW5jdGlvbihlbGVtZW50KSB7XG4gICAgdmFyIGJvdW5kaW5nQ2xpZW50UmVjdCA9IGVsZW1lbnRbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHdpZHRoOiBib3VuZGluZ0NsaWVudFJlY3Qud2lkdGggfHwgZWxlbWVudC5wcm9wKCdvZmZzZXRXaWR0aCcpLFxuICAgICAgaGVpZ2h0OiBib3VuZGluZ0NsaWVudFJlY3QuaGVpZ2h0IHx8IGVsZW1lbnQucHJvcCgnb2Zmc2V0SGVpZ2h0JyksXG4gICAgICB0b3A6IGJvdW5kaW5nQ2xpZW50UmVjdC50b3AgKyAoJHdpbmRvdy5wYWdlWU9mZnNldCB8fCAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCksXG4gICAgICBsZWZ0OiBib3VuZGluZ0NsaWVudFJlY3QubGVmdCArICgkd2luZG93LnBhZ2VYT2Zmc2V0IHx8ICRkb2N1bWVudFswXS5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdClcbiAgICB9O1xuICB9O1xufV0pO1xuXG51aXMuZGlyZWN0aXZlKCd1aVNlbGVjdENob2ljZXMnLFxuICBbJ3VpU2VsZWN0Q29uZmlnJywgJ3Vpc1JlcGVhdFBhcnNlcicsICd1aVNlbGVjdE1pbkVycicsICckY29tcGlsZScsXG4gIGZ1bmN0aW9uKHVpU2VsZWN0Q29uZmlnLCBSZXBlYXRQYXJzZXIsIHVpU2VsZWN0TWluRXJyLCAkY29tcGlsZSkge1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgcmVxdWlyZTogJ151aVNlbGVjdCcsXG4gICAgcmVwbGFjZTogdHJ1ZSxcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxuICAgIHRlbXBsYXRlVXJsOiBmdW5jdGlvbih0RWxlbWVudCkge1xuICAgICAgLy8gTmVlZGVkIHNvIHRoZSB1aVNlbGVjdCBjYW4gZGV0ZWN0IHRoZSB0cmFuc2NsdWRlZCBjb250ZW50XG4gICAgICB0RWxlbWVudC5hZGRDbGFzcygndWktc2VsZWN0LWNob2ljZXMnKTtcblxuICAgICAgLy8gR2V0cyB0aGVtZSBhdHRyaWJ1dGUgZnJvbSBwYXJlbnQgKHVpLXNlbGVjdClcbiAgICAgIHZhciB0aGVtZSA9IHRFbGVtZW50LnBhcmVudCgpLmF0dHIoJ3RoZW1lJykgfHwgdWlTZWxlY3RDb25maWcudGhlbWU7XG4gICAgICByZXR1cm4gdGhlbWUgKyAnL2Nob2ljZXMudHBsLmh0bWwnO1xuICAgIH0sXG5cbiAgICBjb21waWxlOiBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7XG5cbiAgICAgIGlmICghdEF0dHJzLnJlcGVhdCkgdGhyb3cgdWlTZWxlY3RNaW5FcnIoJ3JlcGVhdCcsIFwiRXhwZWN0ZWQgJ3JlcGVhdCcgZXhwcmVzc2lvbi5cIik7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtZW50LCBhdHRycywgJHNlbGVjdCwgdHJhbnNjbHVkZUZuKSB7XG5cbiAgICAgICAgLy8gdmFyIHJlcGVhdCA9IFJlcGVhdFBhcnNlci5wYXJzZShhdHRycy5yZXBlYXQpO1xuICAgICAgICB2YXIgZ3JvdXBCeUV4cCA9IGF0dHJzLmdyb3VwQnk7XG4gICAgICAgIHZhciBncm91cEZpbHRlckV4cCA9IGF0dHJzLmdyb3VwRmlsdGVyO1xuXG4gICAgICAgICRzZWxlY3QucGFyc2VSZXBlYXRBdHRyKGF0dHJzLnJlcGVhdCwgZ3JvdXBCeUV4cCwgZ3JvdXBGaWx0ZXJFeHApOyAvL1Jlc3VsdCByZWFkeSBhdCAkc2VsZWN0LnBhcnNlclJlc3VsdFxuXG4gICAgICAgICRzZWxlY3QuZGlzYWJsZUNob2ljZUV4cHJlc3Npb24gPSBhdHRycy51aURpc2FibGVDaG9pY2U7XG4gICAgICAgICRzZWxlY3Qub25IaWdobGlnaHRDYWxsYmFjayA9IGF0dHJzLm9uSGlnaGxpZ2h0O1xuXG4gICAgICAgICRzZWxlY3QuZHJvcGRvd25Qb3NpdGlvbiA9IGF0dHJzLnBvc2l0aW9uID8gYXR0cnMucG9zaXRpb24udG9Mb3dlckNhc2UoKSA6IHVpU2VsZWN0Q29uZmlnLmRyb3Bkb3duUG9zaXRpb247XG5cbiAgICAgICAgaWYoZ3JvdXBCeUV4cCkge1xuICAgICAgICAgIHZhciBncm91cHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51aS1zZWxlY3QtY2hvaWNlcy1ncm91cCcpO1xuICAgICAgICAgIGlmIChncm91cHMubGVuZ3RoICE9PSAxKSB0aHJvdyB1aVNlbGVjdE1pbkVycigncm93cycsIFwiRXhwZWN0ZWQgMSAudWktc2VsZWN0LWNob2ljZXMtZ3JvdXAgYnV0IGdvdCAnezB9Jy5cIiwgZ3JvdXBzLmxlbmd0aCk7XG4gICAgICAgICAgZ3JvdXBzLmF0dHIoJ25nLXJlcGVhdCcsIFJlcGVhdFBhcnNlci5nZXRHcm91cE5nUmVwZWF0RXhwcmVzc2lvbigpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjaG9pY2VzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudWktc2VsZWN0LWNob2ljZXMtcm93Jyk7XG4gICAgICAgIGlmIChjaG9pY2VzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgIHRocm93IHVpU2VsZWN0TWluRXJyKCdyb3dzJywgXCJFeHBlY3RlZCAxIC51aS1zZWxlY3QtY2hvaWNlcy1yb3cgYnV0IGdvdCAnezB9Jy5cIiwgY2hvaWNlcy5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hvaWNlcy5hdHRyKCduZy1yZXBlYXQnLCAkc2VsZWN0LnBhcnNlclJlc3VsdC5yZXBlYXRFeHByZXNzaW9uKGdyb3VwQnlFeHApKVxuICAgICAgICAgICAgLmF0dHIoJ25nLWlmJywgJyRzZWxlY3Qub3BlbicpIC8vUHJldmVudCB1bm5lY2Vzc2FyeSB3YXRjaGVzIHdoZW4gZHJvcGRvd24gaXMgY2xvc2VkXG4gICAgICAgICAgICAuYXR0cignbmctY2xpY2snLCAnJHNlbGVjdC5zZWxlY3QoJyArICRzZWxlY3QucGFyc2VyUmVzdWx0Lml0ZW1OYW1lICsgJyxmYWxzZSwkZXZlbnQpJyk7XG5cbiAgICAgICAgdmFyIHJvd3NJbm5lciA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVpLXNlbGVjdC1jaG9pY2VzLXJvdy1pbm5lcicpO1xuICAgICAgICBpZiAocm93c0lubmVyLmxlbmd0aCAhPT0gMSkgdGhyb3cgdWlTZWxlY3RNaW5FcnIoJ3Jvd3MnLCBcIkV4cGVjdGVkIDEgLnVpLXNlbGVjdC1jaG9pY2VzLXJvdy1pbm5lciBidXQgZ290ICd7MH0nLlwiLCByb3dzSW5uZXIubGVuZ3RoKTtcbiAgICAgICAgcm93c0lubmVyLmF0dHIoJ3Vpcy10cmFuc2NsdWRlLWFwcGVuZCcsICcnKTsgLy9BZGRpbmcgdWlzVHJhbnNjbHVkZUFwcGVuZCBkaXJlY3RpdmUgdG8gcm93IGVsZW1lbnQgYWZ0ZXIgY2hvaWNlcyBlbGVtZW50IGhhcyBuZ1JlcGVhdFxuXG4gICAgICAgICRjb21waWxlKGVsZW1lbnQsIHRyYW5zY2x1ZGVGbikoc2NvcGUpOyAvL1Bhc3NpbmcgY3VycmVudCB0cmFuc2NsdWRlRm4gdG8gYmUgYWJsZSB0byBhcHBlbmQgZWxlbWVudHMgY29ycmVjdGx5IGZyb20gdWlzVHJhbnNjbHVkZUFwcGVuZFxuXG4gICAgICAgIHNjb3BlLiR3YXRjaCgnJHNlbGVjdC5zZWFyY2gnLCBmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgICAgICAgIGlmKG5ld1ZhbHVlICYmICEkc2VsZWN0Lm9wZW4gJiYgJHNlbGVjdC5tdWx0aXBsZSkgJHNlbGVjdC5hY3RpdmF0ZShmYWxzZSwgdHJ1ZSk7XG4gICAgICAgICAgJHNlbGVjdC5hY3RpdmVJbmRleCA9ICRzZWxlY3QudGFnZ2luZy5pc0FjdGl2YXRlZCA/IC0xIDogMDtcbiAgICAgICAgICBpZiAoIWF0dHJzLm1pbmltdW1JbnB1dExlbmd0aCB8fCAkc2VsZWN0LnNlYXJjaC5sZW5ndGggPj0gYXR0cnMubWluaW11bUlucHV0TGVuZ3RoKSB7XG4gICAgICAgICAgICAkc2VsZWN0LnJlZnJlc2goYXR0cnMucmVmcmVzaCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRzZWxlY3QuaXRlbXMgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCdyZWZyZXNoRGVsYXknLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAvLyAkZXZhbCgpIGlzIG5lZWRlZCBvdGhlcndpc2Ugd2UgZ2V0IGEgc3RyaW5nIGluc3RlYWQgb2YgYSBudW1iZXJcbiAgICAgICAgICB2YXIgcmVmcmVzaERlbGF5ID0gc2NvcGUuJGV2YWwoYXR0cnMucmVmcmVzaERlbGF5KTtcbiAgICAgICAgICAkc2VsZWN0LnJlZnJlc2hEZWxheSA9IHJlZnJlc2hEZWxheSAhPT0gdW5kZWZpbmVkID8gcmVmcmVzaERlbGF5IDogdWlTZWxlY3RDb25maWcucmVmcmVzaERlbGF5O1xuICAgICAgICB9KTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufV0pO1xuXG4vKipcbiAqIENvbnRhaW5zIHVpLXNlbGVjdCBcImludGVsbGlnZW5jZVwiLlxuICpcbiAqIFRoZSBnb2FsIGlzIHRvIGxpbWl0IGRlcGVuZGVuY3kgb24gdGhlIERPTSB3aGVuZXZlciBwb3NzaWJsZSBhbmRcbiAqIHB1dCBhcyBtdWNoIGxvZ2ljIGluIHRoZSBjb250cm9sbGVyIChpbnN0ZWFkIG9mIHRoZSBsaW5rIGZ1bmN0aW9ucykgYXMgcG9zc2libGUgc28gaXQgY2FuIGJlIGVhc2lseSB0ZXN0ZWQuXG4gKi9cbnVpcy5jb250cm9sbGVyKCd1aVNlbGVjdEN0cmwnLFxuICBbJyRzY29wZScsICckZWxlbWVudCcsICckdGltZW91dCcsICckZmlsdGVyJywgJ3Vpc1JlcGVhdFBhcnNlcicsICd1aVNlbGVjdE1pbkVycicsICd1aVNlbGVjdENvbmZpZycsICckcGFyc2UnLCAnJGluamVjdG9yJyxcbiAgZnVuY3Rpb24oJHNjb3BlLCAkZWxlbWVudCwgJHRpbWVvdXQsICRmaWx0ZXIsIFJlcGVhdFBhcnNlciwgdWlTZWxlY3RNaW5FcnIsIHVpU2VsZWN0Q29uZmlnLCAkcGFyc2UsICRpbmplY3Rvcikge1xuXG4gIHZhciBjdHJsID0gdGhpcztcblxuICB2YXIgRU1QVFlfU0VBUkNIID0gJyc7XG5cbiAgY3RybC5wbGFjZWhvbGRlciA9IHVpU2VsZWN0Q29uZmlnLnBsYWNlaG9sZGVyO1xuICBjdHJsLnNlYXJjaEVuYWJsZWQgPSB1aVNlbGVjdENvbmZpZy5zZWFyY2hFbmFibGVkO1xuICBjdHJsLnNvcnRhYmxlID0gdWlTZWxlY3RDb25maWcuc29ydGFibGU7XG4gIGN0cmwucmVmcmVzaERlbGF5ID0gdWlTZWxlY3RDb25maWcucmVmcmVzaERlbGF5O1xuICBjdHJsLnBhc3RlID0gdWlTZWxlY3RDb25maWcucGFzdGU7XG5cbiAgY3RybC5yZW1vdmVTZWxlY3RlZCA9IGZhbHNlOyAvL0lmIHNlbGVjdGVkIGl0ZW0ocykgc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSBkcm9wZG93biBsaXN0XG4gIGN0cmwuY2xvc2VPblNlbGVjdCA9IHRydWU7IC8vSW5pdGlhbGl6ZWQgaW5zaWRlIHVpU2VsZWN0IGRpcmVjdGl2ZSBsaW5rIGZ1bmN0aW9uXG4gIGN0cmwuc2VhcmNoID0gRU1QVFlfU0VBUkNIO1xuXG4gIGN0cmwuYWN0aXZlSW5kZXggPSAwOyAvL0Ryb3Bkb3duIG9mIGNob2ljZXNcbiAgY3RybC5pdGVtcyA9IFtdOyAvL0FsbCBhdmFpbGFibGUgY2hvaWNlc1xuXG4gIGN0cmwub3BlbiA9IGZhbHNlO1xuICBjdHJsLmZvY3VzID0gZmFsc2U7XG4gIGN0cmwuZGlzYWJsZWQgPSBmYWxzZTtcbiAgY3RybC5zZWxlY3RlZCA9IHVuZGVmaW5lZDtcblxuICBjdHJsLmRyb3Bkb3duUG9zaXRpb24gPSAnYXV0byc7XG5cbiAgY3RybC5mb2N1c3NlciA9IHVuZGVmaW5lZDsgLy9SZWZlcmVuY2UgdG8gaW5wdXQgZWxlbWVudCB1c2VkIHRvIGhhbmRsZSBmb2N1cyBldmVudHNcbiAgY3RybC5yZXNldFNlYXJjaElucHV0ID0gdHJ1ZTtcbiAgY3RybC5tdWx0aXBsZSA9IHVuZGVmaW5lZDsgLy8gSW5pdGlhbGl6ZWQgaW5zaWRlIHVpU2VsZWN0IGRpcmVjdGl2ZSBsaW5rIGZ1bmN0aW9uXG4gIGN0cmwuZGlzYWJsZUNob2ljZUV4cHJlc3Npb24gPSB1bmRlZmluZWQ7IC8vIEluaXRpYWxpemVkIGluc2lkZSB1aVNlbGVjdENob2ljZXMgZGlyZWN0aXZlIGxpbmsgZnVuY3Rpb25cbiAgY3RybC50YWdnaW5nID0ge2lzQWN0aXZhdGVkOiBmYWxzZSwgZmN0OiB1bmRlZmluZWR9O1xuICBjdHJsLnRhZ2dpbmdUb2tlbnMgPSB7aXNBY3RpdmF0ZWQ6IGZhbHNlLCB0b2tlbnM6IHVuZGVmaW5lZH07XG4gIGN0cmwubG9ja0Nob2ljZUV4cHJlc3Npb24gPSB1bmRlZmluZWQ7IC8vIEluaXRpYWxpemVkIGluc2lkZSB1aVNlbGVjdE1hdGNoIGRpcmVjdGl2ZSBsaW5rIGZ1bmN0aW9uXG4gIGN0cmwuY2xpY2tUcmlnZ2VyZWRTZWxlY3QgPSBmYWxzZTtcbiAgY3RybC4kZmlsdGVyID0gJGZpbHRlcjtcblxuICAvLyBVc2UgJGluamVjdG9yIHRvIGNoZWNrIGZvciAkYW5pbWF0ZSBhbmQgc3RvcmUgYSByZWZlcmVuY2UgdG8gaXRcbiAgY3RybC4kYW5pbWF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAkaW5qZWN0b3IuZ2V0KCckYW5pbWF0ZScpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgLy8gJGFuaW1hdGUgZG9lcyBub3QgZXhpc3RcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSkoKTtcblxuICBjdHJsLnNlYXJjaElucHV0ID0gJGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQudWktc2VsZWN0LXNlYXJjaCcpO1xuICBpZiAoY3RybC5zZWFyY2hJbnB1dC5sZW5ndGggIT09IDEpIHtcbiAgICB0aHJvdyB1aVNlbGVjdE1pbkVycignc2VhcmNoSW5wdXQnLCBcIkV4cGVjdGVkIDEgaW5wdXQudWktc2VsZWN0LXNlYXJjaCBidXQgZ290ICd7MH0nLlwiLCBjdHJsLnNlYXJjaElucHV0Lmxlbmd0aCk7XG4gIH1cblxuICBjdHJsLmlzRW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gYW5ndWxhci5pc1VuZGVmaW5lZChjdHJsLnNlbGVjdGVkKSB8fCBjdHJsLnNlbGVjdGVkID09PSBudWxsIHx8IGN0cmwuc2VsZWN0ZWQgPT09ICcnIHx8IChjdHJsLm11bHRpcGxlICYmIGN0cmwuc2VsZWN0ZWQubGVuZ3RoID09PSAwKTtcbiAgfTtcblxuICBmdW5jdGlvbiBfZmluZEluZGV4KGNvbGxlY3Rpb24sIHByZWRpY2F0ZSwgdGhpc0FyZyl7XG4gICAgaWYgKGNvbGxlY3Rpb24uZmluZEluZGV4KXtcbiAgICAgIHJldHVybiBjb2xsZWN0aW9uLmZpbmRJbmRleChwcmVkaWNhdGUsIHRoaXNBcmcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgbGlzdCA9IE9iamVjdChjb2xsZWN0aW9uKTtcbiAgICAgIHZhciBsZW5ndGggPSBsaXN0Lmxlbmd0aCA+Pj4gMDtcbiAgICAgIHZhciB2YWx1ZTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZSA9IGxpc3RbaV07XG4gICAgICAgIGlmIChwcmVkaWNhdGUuY2FsbCh0aGlzQXJnLCB2YWx1ZSwgaSwgbGlzdCkpIHtcbiAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfVxuXG4gIC8vIE1vc3Qgb2YgdGhlIHRpbWUgdGhlIHVzZXIgZG9lcyBub3Qgd2FudCB0byBlbXB0eSB0aGUgc2VhcmNoIGlucHV0IHdoZW4gaW4gdHlwZWFoZWFkIG1vZGVcbiAgZnVuY3Rpb24gX3Jlc2V0U2VhcmNoSW5wdXQoKSB7XG4gICAgaWYgKGN0cmwucmVzZXRTZWFyY2hJbnB1dCB8fCAoY3RybC5yZXNldFNlYXJjaElucHV0ID09PSB1bmRlZmluZWQgJiYgdWlTZWxlY3RDb25maWcucmVzZXRTZWFyY2hJbnB1dCkpIHtcbiAgICAgIGN0cmwuc2VhcmNoID0gRU1QVFlfU0VBUkNIO1xuICAgICAgLy9yZXNldCBhY3RpdmVJbmRleFxuICAgICAgaWYgKGN0cmwuc2VsZWN0ZWQgJiYgY3RybC5pdGVtcy5sZW5ndGggJiYgIWN0cmwubXVsdGlwbGUpIHtcbiAgICAgICAgY3RybC5hY3RpdmVJbmRleCA9IF9maW5kSW5kZXgoY3RybC5pdGVtcywgZnVuY3Rpb24oaXRlbSl7XG4gICAgICAgICAgcmV0dXJuIGFuZ3VsYXIuZXF1YWxzKHRoaXMsIGl0ZW0pO1xuICAgICAgICB9LCBjdHJsLnNlbGVjdGVkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAgIGZ1bmN0aW9uIF9ncm91cHNGaWx0ZXIoZ3JvdXBzLCBncm91cE5hbWVzKSB7XG4gICAgICB2YXIgaSwgaiwgcmVzdWx0ID0gW107XG4gICAgICBmb3IoaSA9IDA7IGkgPCBncm91cE5hbWVzLmxlbmd0aCA7aSsrKXtcbiAgICAgICAgZm9yKGogPSAwOyBqIDwgZ3JvdXBzLmxlbmd0aCA7aisrKXtcbiAgICAgICAgICBpZihncm91cHNbal0ubmFtZSA9PSBbZ3JvdXBOYW1lc1tpXV0pe1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goZ3JvdXBzW2pdKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gIC8vIFdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIHVpLXNlbGVjdCwgZGlzcGxheXMgdGhlIGRyb3Bkb3duIGxpc3RcbiAgY3RybC5hY3RpdmF0ZSA9IGZ1bmN0aW9uKGluaXRTZWFyY2hWYWx1ZSwgYXZvaWRSZXNldCkge1xuICAgIGlmICghY3RybC5kaXNhYmxlZCAgJiYgIWN0cmwub3Blbikge1xuICAgICAgaWYoIWF2b2lkUmVzZXQpIF9yZXNldFNlYXJjaElucHV0KCk7XG5cbiAgICAgICRzY29wZS4kYnJvYWRjYXN0KCd1aXM6YWN0aXZhdGUnKTtcblxuICAgICAgY3RybC5vcGVuID0gdHJ1ZTtcblxuICAgICAgY3RybC5hY3RpdmVJbmRleCA9IGN0cmwuYWN0aXZlSW5kZXggPj0gY3RybC5pdGVtcy5sZW5ndGggPyAwIDogY3RybC5hY3RpdmVJbmRleDtcblxuICAgICAgLy8gZW5zdXJlIHRoYXQgdGhlIGluZGV4IGlzIHNldCB0byB6ZXJvIGZvciB0YWdnaW5nIHZhcmlhbnRzXG4gICAgICAvLyB0aGF0IHdoZXJlIGZpcnN0IG9wdGlvbiBpcyBhdXRvLXNlbGVjdGVkXG4gICAgICBpZiAoIGN0cmwuYWN0aXZlSW5kZXggPT09IC0xICYmIGN0cmwudGFnZ2luZ0xhYmVsICE9PSBmYWxzZSApIHtcbiAgICAgICAgY3RybC5hY3RpdmVJbmRleCA9IDA7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250YWluZXIgPSAkZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudWktc2VsZWN0LWNob2ljZXMtY29udGVudCcpO1xuICAgICAgaWYgKGN0cmwuJGFuaW1hdGUgJiYgY3RybC4kYW5pbWF0ZS5lbmFibGVkKGNvbnRhaW5lclswXSkpIHtcbiAgICAgICAgY3RybC4kYW5pbWF0ZS5vbignZW50ZXInLCBjb250YWluZXJbMF0sIGZ1bmN0aW9uIChlbGVtLCBwaGFzZSkge1xuICAgICAgICAgIGlmIChwaGFzZSA9PT0gJ2Nsb3NlJykge1xuICAgICAgICAgICAgLy8gT25seSBmb2N1cyBpbnB1dCBhZnRlciB0aGUgYW5pbWF0aW9uIGhhcyBmaW5pc2hlZFxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjdHJsLmZvY3VzU2VhcmNoSW5wdXQoaW5pdFNlYXJjaFZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgY3RybC5mb2N1c1NlYXJjaElucHV0KGluaXRTZWFyY2hWYWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBjdHJsLmZvY3VzU2VhcmNoSW5wdXQgPSBmdW5jdGlvbiAoaW5pdFNlYXJjaFZhbHVlKSB7XG4gICAgY3RybC5zZWFyY2ggPSBpbml0U2VhcmNoVmFsdWUgfHwgY3RybC5zZWFyY2g7XG4gICAgY3RybC5zZWFyY2hJbnB1dFswXS5mb2N1cygpO1xuICAgIGlmKCFjdHJsLnRhZ2dpbmcuaXNBY3RpdmF0ZWQgJiYgY3RybC5pdGVtcy5sZW5ndGggPiAxKSB7XG4gICAgIF9lbnN1cmVIaWdobGlnaHRWaXNpYmxlKCk7XG4gICAgfVxuICB9O1xuXG4gIGN0cmwuZmluZEdyb3VwQnlOYW1lID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiBjdHJsLmdyb3VwcyAmJiBjdHJsLmdyb3Vwcy5maWx0ZXIoZnVuY3Rpb24oZ3JvdXApIHtcbiAgICAgIHJldHVybiBncm91cC5uYW1lID09PSBuYW1lO1xuICAgIH0pWzBdO1xuICB9O1xuXG4gIGN0cmwucGFyc2VSZXBlYXRBdHRyID0gZnVuY3Rpb24ocmVwZWF0QXR0ciwgZ3JvdXBCeUV4cCwgZ3JvdXBGaWx0ZXJFeHApIHtcbiAgICBmdW5jdGlvbiB1cGRhdGVHcm91cHMoaXRlbXMpIHtcbiAgICAgIHZhciBncm91cEZuID0gJHNjb3BlLiRldmFsKGdyb3VwQnlFeHApO1xuICAgICAgY3RybC5ncm91cHMgPSBbXTtcbiAgICAgIGFuZ3VsYXIuZm9yRWFjaChpdGVtcywgZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICB2YXIgZ3JvdXBOYW1lID0gYW5ndWxhci5pc0Z1bmN0aW9uKGdyb3VwRm4pID8gZ3JvdXBGbihpdGVtKSA6IGl0ZW1bZ3JvdXBGbl07XG4gICAgICAgIHZhciBncm91cCA9IGN0cmwuZmluZEdyb3VwQnlOYW1lKGdyb3VwTmFtZSk7XG4gICAgICAgIGlmKGdyb3VwKSB7XG4gICAgICAgICAgZ3JvdXAuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjdHJsLmdyb3Vwcy5wdXNoKHtuYW1lOiBncm91cE5hbWUsIGl0ZW1zOiBbaXRlbV19KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZihncm91cEZpbHRlckV4cCl7XG4gICAgICAgIHZhciBncm91cEZpbHRlckZuID0gJHNjb3BlLiRldmFsKGdyb3VwRmlsdGVyRXhwKTtcbiAgICAgICAgaWYoIGFuZ3VsYXIuaXNGdW5jdGlvbihncm91cEZpbHRlckZuKSl7XG4gICAgICAgICAgY3RybC5ncm91cHMgPSBncm91cEZpbHRlckZuKGN0cmwuZ3JvdXBzKTtcbiAgICAgICAgfSBlbHNlIGlmKGFuZ3VsYXIuaXNBcnJheShncm91cEZpbHRlckZuKSl7XG4gICAgICAgICAgY3RybC5ncm91cHMgPSBfZ3JvdXBzRmlsdGVyKGN0cmwuZ3JvdXBzLCBncm91cEZpbHRlckZuKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY3RybC5pdGVtcyA9IFtdO1xuICAgICAgY3RybC5ncm91cHMuZm9yRWFjaChmdW5jdGlvbihncm91cCkge1xuICAgICAgICBjdHJsLml0ZW1zID0gY3RybC5pdGVtcy5jb25jYXQoZ3JvdXAuaXRlbXMpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0UGxhaW5JdGVtcyhpdGVtcykge1xuICAgICAgY3RybC5pdGVtcyA9IGl0ZW1zO1xuICAgIH1cblxuICAgIGN0cmwuc2V0SXRlbXNGbiA9IGdyb3VwQnlFeHAgPyB1cGRhdGVHcm91cHMgOiBzZXRQbGFpbkl0ZW1zO1xuXG4gICAgY3RybC5wYXJzZXJSZXN1bHQgPSBSZXBlYXRQYXJzZXIucGFyc2UocmVwZWF0QXR0cik7XG5cbiAgICBjdHJsLmlzR3JvdXBlZCA9ICEhZ3JvdXBCeUV4cDtcbiAgICBjdHJsLml0ZW1Qcm9wZXJ0eSA9IGN0cmwucGFyc2VyUmVzdWx0Lml0ZW1OYW1lO1xuXG4gICAgLy9JZiBjb2xsZWN0aW9uIGlzIGFuIE9iamVjdCwgY29udmVydCBpdCB0byBBcnJheVxuXG4gICAgdmFyIG9yaWdpbmFsU291cmNlID0gY3RybC5wYXJzZXJSZXN1bHQuc291cmNlO1xuXG4gICAgLy9XaGVuIGFuIG9iamVjdCBpcyB1c2VkIGFzIHNvdXJjZSwgd2UgYmV0dGVyIGNyZWF0ZSBhbiBhcnJheSBhbmQgdXNlIGl0IGFzICdzb3VyY2UnXG4gICAgdmFyIGNyZWF0ZUFycmF5RnJvbU9iamVjdCA9IGZ1bmN0aW9uKCl7XG4gICAgICB2YXIgb3JpZ1NyYyA9IG9yaWdpbmFsU291cmNlKCRzY29wZSk7XG4gICAgICAkc2NvcGUuJHVpc1NvdXJjZSA9IE9iamVjdC5rZXlzKG9yaWdTcmMpLm1hcChmdW5jdGlvbih2KXtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgICByZXN1bHRbY3RybC5wYXJzZXJSZXN1bHQua2V5TmFtZV0gPSB2O1xuICAgICAgICByZXN1bHQudmFsdWUgPSBvcmlnU3JjW3ZdO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmIChjdHJsLnBhcnNlclJlc3VsdC5rZXlOYW1lKXsgLy8gQ2hlY2sgZm9yIChrZXksdmFsdWUpIHN5bnRheFxuICAgICAgY3JlYXRlQXJyYXlGcm9tT2JqZWN0KCk7XG4gICAgICBjdHJsLnBhcnNlclJlc3VsdC5zb3VyY2UgPSAkcGFyc2UoJyR1aXNTb3VyY2UnICsgY3RybC5wYXJzZXJSZXN1bHQuZmlsdGVycyk7XG4gICAgICAkc2NvcGUuJHdhdGNoKG9yaWdpbmFsU291cmNlLCBmdW5jdGlvbihuZXdWYWwsIG9sZFZhbCl7XG4gICAgICAgIGlmIChuZXdWYWwgIT09IG9sZFZhbCkgY3JlYXRlQXJyYXlGcm9tT2JqZWN0KCk7XG4gICAgICB9LCB0cnVlKTtcbiAgICB9XG5cbiAgICBjdHJsLnJlZnJlc2hJdGVtcyA9IGZ1bmN0aW9uIChkYXRhKXtcbiAgICAgIGRhdGEgPSBkYXRhIHx8IGN0cmwucGFyc2VyUmVzdWx0LnNvdXJjZSgkc2NvcGUpO1xuICAgICAgdmFyIHNlbGVjdGVkSXRlbXMgPSBjdHJsLnNlbGVjdGVkO1xuICAgICAgLy9UT0RPIHNob3VsZCBpbXBsZW1lbnQgZm9yIHNpbmdsZSBtb2RlIHJlbW92ZVNlbGVjdGVkXG4gICAgICBpZiAoY3RybC5pc0VtcHR5KCkgfHwgKGFuZ3VsYXIuaXNBcnJheShzZWxlY3RlZEl0ZW1zKSAmJiAhc2VsZWN0ZWRJdGVtcy5sZW5ndGgpIHx8ICFjdHJsLnJlbW92ZVNlbGVjdGVkKSB7XG4gICAgICAgIGN0cmwuc2V0SXRlbXNGbihkYXRhKTtcbiAgICAgIH1lbHNle1xuICAgICAgICBpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICB2YXIgZmlsdGVyZWRJdGVtcyA9IGRhdGEuZmlsdGVyKGZ1bmN0aW9uKGkpIHtyZXR1cm4gc2VsZWN0ZWRJdGVtcyAmJiBzZWxlY3RlZEl0ZW1zLmluZGV4T2YoaSkgPCAwO30pO1xuICAgICAgICAgIGN0cmwuc2V0SXRlbXNGbihmaWx0ZXJlZEl0ZW1zKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGN0cmwuZHJvcGRvd25Qb3NpdGlvbiA9PT0gJ2F1dG8nIHx8IGN0cmwuZHJvcGRvd25Qb3NpdGlvbiA9PT0gJ3VwJyl7XG4gICAgICAgICRzY29wZS5jYWxjdWxhdGVEcm9wZG93blBvcygpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXIvYW5ndWxhci5qcy9ibG9iL3YxLjIuMTUvc3JjL25nL2RpcmVjdGl2ZS9uZ1JlcGVhdC5qcyNMMjU5XG4gICAgJHNjb3BlLiR3YXRjaENvbGxlY3Rpb24oY3RybC5wYXJzZXJSZXN1bHQuc291cmNlLCBmdW5jdGlvbihpdGVtcykge1xuICAgICAgaWYgKGl0ZW1zID09PSB1bmRlZmluZWQgfHwgaXRlbXMgPT09IG51bGwpIHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgc3BlY2lmaWVzIHVuZGVmaW5lZCBvciBudWxsID0+IHJlc2V0IHRoZSBjb2xsZWN0aW9uXG4gICAgICAgIC8vIFNwZWNpYWwgY2FzZTogaXRlbXMgY2FuIGJlIHVuZGVmaW5lZCBpZiB0aGUgdXNlciBkaWQgbm90IGluaXRpYWxpemVkIHRoZSBjb2xsZWN0aW9uIG9uIHRoZSBzY29wZVxuICAgICAgICAvLyBpLmUgJHNjb3BlLmFkZHJlc3NlcyA9IFtdIGlzIG1pc3NpbmdcbiAgICAgICAgY3RybC5pdGVtcyA9IFtdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFhbmd1bGFyLmlzQXJyYXkoaXRlbXMpKSB7XG4gICAgICAgICAgdGhyb3cgdWlTZWxlY3RNaW5FcnIoJ2l0ZW1zJywgXCJFeHBlY3RlZCBhbiBhcnJheSBidXQgZ290ICd7MH0nLlwiLCBpdGVtcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy9SZW1vdmUgYWxyZWFkeSBzZWxlY3RlZCBpdGVtcyAoZXg6IHdoaWxlIHNlYXJjaGluZylcbiAgICAgICAgICAvL1RPRE8gU2hvdWxkIGFkZCBhIHRlc3RcbiAgICAgICAgICBjdHJsLnJlZnJlc2hJdGVtcyhpdGVtcyk7XG4gICAgICAgICAgY3RybC5uZ01vZGVsLiRtb2RlbFZhbHVlID0gbnVsbDsgLy9Gb3JjZSBzY29wZSBtb2RlbCB2YWx1ZSBhbmQgbmdNb2RlbCB2YWx1ZSB0byBiZSBvdXQgb2Ygc3luYyB0byByZS1ydW4gZm9ybWF0dGVyc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgfTtcblxuICB2YXIgX3JlZnJlc2hEZWxheVByb21pc2U7XG5cbiAgLyoqXG4gICAqIFR5cGVhaGVhZCBtb2RlOiBsZXRzIHRoZSB1c2VyIHJlZnJlc2ggdGhlIGNvbGxlY3Rpb24gdXNpbmcgaGlzIG93biBmdW5jdGlvbi5cbiAgICpcbiAgICogU2VlIEV4cG9zZSAkc2VsZWN0LnNlYXJjaCBmb3IgZXh0ZXJuYWwgLyByZW1vdGUgZmlsdGVyaW5nIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL3VpLXNlbGVjdC9wdWxsLzMxXG4gICAqL1xuICBjdHJsLnJlZnJlc2ggPSBmdW5jdGlvbihyZWZyZXNoQXR0cikge1xuICAgIGlmIChyZWZyZXNoQXR0ciAhPT0gdW5kZWZpbmVkKSB7XG5cbiAgICAgIC8vIERlYm91bmNlXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXItdWkvYm9vdHN0cmFwL2Jsb2IvMC4xMC4wL3NyYy90eXBlYWhlYWQvdHlwZWFoZWFkLmpzI0wxNTVcbiAgICAgIC8vIEZZSSBBbmd1bGFyU3RyYXAgdHlwZWFoZWFkIGRvZXMgbm90IGhhdmUgZGVib3VuY2luZzogaHR0cHM6Ly9naXRodWIuY29tL21nY3JlYS9hbmd1bGFyLXN0cmFwL2Jsb2IvdjIuMC4wLXJjLjQvc3JjL3R5cGVhaGVhZC90eXBlYWhlYWQuanMjTDE3N1xuICAgICAgaWYgKF9yZWZyZXNoRGVsYXlQcm9taXNlKSB7XG4gICAgICAgICR0aW1lb3V0LmNhbmNlbChfcmVmcmVzaERlbGF5UHJvbWlzZSk7XG4gICAgICB9XG4gICAgICBfcmVmcmVzaERlbGF5UHJvbWlzZSA9ICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuJGV2YWwocmVmcmVzaEF0dHIpO1xuICAgICAgfSwgY3RybC5yZWZyZXNoRGVsYXkpO1xuICAgIH1cbiAgfTtcblxuICBjdHJsLmlzQWN0aXZlID0gZnVuY3Rpb24oaXRlbVNjb3BlKSB7XG4gICAgaWYgKCAhY3RybC5vcGVuICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB2YXIgaXRlbUluZGV4ID0gY3RybC5pdGVtcy5pbmRleE9mKGl0ZW1TY29wZVtjdHJsLml0ZW1Qcm9wZXJ0eV0pO1xuICAgIHZhciBpc0FjdGl2ZSA9ICBpdGVtSW5kZXggPT0gY3RybC5hY3RpdmVJbmRleDtcblxuICAgIGlmICggIWlzQWN0aXZlIHx8ICggaXRlbUluZGV4IDwgMCAmJiBjdHJsLnRhZ2dpbmdMYWJlbCAhPT0gZmFsc2UgKSB8fCggaXRlbUluZGV4IDwgMCAmJiBjdHJsLnRhZ2dpbmdMYWJlbCA9PT0gZmFsc2UpICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChpc0FjdGl2ZSAmJiAhYW5ndWxhci5pc1VuZGVmaW5lZChjdHJsLm9uSGlnaGxpZ2h0Q2FsbGJhY2spKSB7XG4gICAgICBpdGVtU2NvcGUuJGV2YWwoY3RybC5vbkhpZ2hsaWdodENhbGxiYWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaXNBY3RpdmU7XG4gIH07XG5cbiAgY3RybC5pc0Rpc2FibGVkID0gZnVuY3Rpb24oaXRlbVNjb3BlKSB7XG5cbiAgICBpZiAoIWN0cmwub3BlbikgcmV0dXJuO1xuXG4gICAgdmFyIGl0ZW1JbmRleCA9IGN0cmwuaXRlbXMuaW5kZXhPZihpdGVtU2NvcGVbY3RybC5pdGVtUHJvcGVydHldKTtcbiAgICB2YXIgaXNEaXNhYmxlZCA9IGZhbHNlO1xuICAgIHZhciBpdGVtO1xuXG4gICAgaWYgKGl0ZW1JbmRleCA+PSAwICYmICFhbmd1bGFyLmlzVW5kZWZpbmVkKGN0cmwuZGlzYWJsZUNob2ljZUV4cHJlc3Npb24pKSB7XG4gICAgICBpdGVtID0gY3RybC5pdGVtc1tpdGVtSW5kZXhdO1xuICAgICAgaXNEaXNhYmxlZCA9ICEhKGl0ZW1TY29wZS4kZXZhbChjdHJsLmRpc2FibGVDaG9pY2VFeHByZXNzaW9uKSk7IC8vIGZvcmNlIHRoZSBib29sZWFuIHZhbHVlXG4gICAgICBpdGVtLl91aVNlbGVjdENob2ljZURpc2FibGVkID0gaXNEaXNhYmxlZDsgLy8gc3RvcmUgdGhpcyBmb3IgbGF0ZXIgcmVmZXJlbmNlXG4gICAgfVxuXG4gICAgcmV0dXJuIGlzRGlzYWJsZWQ7XG4gIH07XG5cblxuICAvLyBXaGVuIHRoZSB1c2VyIHNlbGVjdHMgYW4gaXRlbSB3aXRoIEVOVEVSIG9yIGNsaWNrcyB0aGUgZHJvcGRvd25cbiAgY3RybC5zZWxlY3QgPSBmdW5jdGlvbihpdGVtLCBza2lwRm9jdXNzZXIsICRldmVudCkge1xuICAgIGlmIChpdGVtID09PSB1bmRlZmluZWQgfHwgIWl0ZW0uX3VpU2VsZWN0Q2hvaWNlRGlzYWJsZWQpIHtcblxuICAgICAgaWYgKCAhIGN0cmwuaXRlbXMgJiYgISBjdHJsLnNlYXJjaCAmJiAhIGN0cmwudGFnZ2luZy5pc0FjdGl2YXRlZCkgcmV0dXJuO1xuXG4gICAgICBpZiAoIWl0ZW0gfHwgIWl0ZW0uX3VpU2VsZWN0Q2hvaWNlRGlzYWJsZWQpIHtcbiAgICAgICAgaWYoY3RybC50YWdnaW5nLmlzQWN0aXZhdGVkKSB7XG4gICAgICAgICAgLy8gaWYgdGFnZ2luZ0xhYmVsIGlzIGRpc2FibGVkLCB3ZSBwdWxsIGZyb20gY3RybC5zZWFyY2ggdmFsXG4gICAgICAgICAgaWYgKCBjdHJsLnRhZ2dpbmdMYWJlbCA9PT0gZmFsc2UgKSB7XG4gICAgICAgICAgICBpZiAoIGN0cmwuYWN0aXZlSW5kZXggPCAwICkge1xuICAgICAgICAgICAgICBpdGVtID0gY3RybC50YWdnaW5nLmZjdCAhPT0gdW5kZWZpbmVkID8gY3RybC50YWdnaW5nLmZjdChjdHJsLnNlYXJjaCkgOiBjdHJsLnNlYXJjaDtcbiAgICAgICAgICAgICAgaWYgKCFpdGVtIHx8IGFuZ3VsYXIuZXF1YWxzKCBjdHJsLml0ZW1zWzBdLCBpdGVtICkgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBrZXlib2FyZCBuYXYgaGFwcGVuZWQgZmlyc3QsIHVzZXIgc2VsZWN0ZWQgZnJvbSBkcm9wZG93blxuICAgICAgICAgICAgICBpdGVtID0gY3RybC5pdGVtc1tjdHJsLmFjdGl2ZUluZGV4XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gdGFnZ2luZyBhbHdheXMgb3BlcmF0ZXMgYXQgaW5kZXggemVybywgdGFnZ2luZ0xhYmVsID09PSBmYWxzZSBwdXNoZXNcbiAgICAgICAgICAgIC8vIHRoZSBjdHJsLnNlYXJjaCB2YWx1ZSB3aXRob3V0IGhhdmluZyBpdCBpbmplY3RlZFxuICAgICAgICAgICAgaWYgKCBjdHJsLmFjdGl2ZUluZGV4ID09PSAwICkge1xuICAgICAgICAgICAgICAvLyBjdHJsLnRhZ2dpbmcgcHVzaGVzIGl0ZW1zIHRvIGN0cmwuaXRlbXMsIHNvIHdlIG9ubHkgaGF2ZSBlbXB0eSB2YWxcbiAgICAgICAgICAgICAgLy8gZm9yIGBpdGVtYCBpZiBpdCBpcyBhIGRldGVjdGVkIGR1cGxpY2F0ZVxuICAgICAgICAgICAgICBpZiAoIGl0ZW0gPT09IHVuZGVmaW5lZCApIHJldHVybjtcblxuICAgICAgICAgICAgICAvLyBjcmVhdGUgbmV3IGl0ZW0gb24gdGhlIGZseSBpZiB3ZSBkb24ndCBhbHJlYWR5IGhhdmUgb25lO1xuICAgICAgICAgICAgICAvLyB1c2UgdGFnZ2luZyBmdW5jdGlvbiBpZiB3ZSBoYXZlIG9uZVxuICAgICAgICAgICAgICBpZiAoIGN0cmwudGFnZ2luZy5mY3QgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgaXRlbSA9PT0gJ3N0cmluZycgKSB7XG4gICAgICAgICAgICAgICAgaXRlbSA9IGN0cmwudGFnZ2luZy5mY3QoaXRlbSk7XG4gICAgICAgICAgICAgICAgaWYgKCFpdGVtKSByZXR1cm47XG4gICAgICAgICAgICAgIC8vIGlmIGl0ZW0gdHlwZSBpcyAnc3RyaW5nJywgYXBwbHkgdGhlIHRhZ2dpbmcgbGFiZWxcbiAgICAgICAgICAgICAgfSBlbHNlIGlmICggdHlwZW9mIGl0ZW0gPT09ICdzdHJpbmcnICkge1xuICAgICAgICAgICAgICAgIC8vIHRyaW0gdGhlIHRyYWlsaW5nIHNwYWNlXG4gICAgICAgICAgICAgICAgaXRlbSA9IGl0ZW0ucmVwbGFjZShjdHJsLnRhZ2dpbmdMYWJlbCwnJykudHJpbSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHNlYXJjaCBjdHJsLnNlbGVjdGVkIGZvciBkdXBlcyBwb3RlbnRpYWxseSBjYXVzZWQgYnkgdGFnZ2luZyBhbmQgcmV0dXJuIGVhcmx5IGlmIGZvdW5kXG4gICAgICAgICAgaWYgKCBjdHJsLnNlbGVjdGVkICYmIGFuZ3VsYXIuaXNBcnJheShjdHJsLnNlbGVjdGVkKSAmJiBjdHJsLnNlbGVjdGVkLmZpbHRlciggZnVuY3Rpb24gKHNlbGVjdGlvbikgeyByZXR1cm4gYW5ndWxhci5lcXVhbHMoc2VsZWN0aW9uLCBpdGVtKTsgfSkubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgIGN0cmwuY2xvc2Uoc2tpcEZvY3Vzc2VyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAkc2NvcGUuJGJyb2FkY2FzdCgndWlzOnNlbGVjdCcsIGl0ZW0pO1xuXG4gICAgICAgIHZhciBsb2NhbHMgPSB7fTtcbiAgICAgICAgbG9jYWxzW2N0cmwucGFyc2VyUmVzdWx0Lml0ZW1OYW1lXSA9IGl0ZW07XG5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICBjdHJsLm9uU2VsZWN0Q2FsbGJhY2soJHNjb3BlLCB7XG4gICAgICAgICAgICAkaXRlbTogaXRlbSxcbiAgICAgICAgICAgICRtb2RlbDogY3RybC5wYXJzZXJSZXN1bHQubW9kZWxNYXBwZXIoJHNjb3BlLCBsb2NhbHMpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChjdHJsLmNsb3NlT25TZWxlY3QpIHtcbiAgICAgICAgICBjdHJsLmNsb3NlKHNraXBGb2N1c3Nlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRldmVudCAmJiAkZXZlbnQudHlwZSA9PT0gJ2NsaWNrJykge1xuICAgICAgICAgIGN0cmwuY2xpY2tUcmlnZ2VyZWRTZWxlY3QgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIENsb3NlcyB0aGUgZHJvcGRvd25cbiAgY3RybC5jbG9zZSA9IGZ1bmN0aW9uKHNraXBGb2N1c3Nlcikge1xuICAgIGlmICghY3RybC5vcGVuKSByZXR1cm47XG4gICAgaWYgKGN0cmwubmdNb2RlbCAmJiBjdHJsLm5nTW9kZWwuJHNldFRvdWNoZWQpIGN0cmwubmdNb2RlbC4kc2V0VG91Y2hlZCgpO1xuICAgIF9yZXNldFNlYXJjaElucHV0KCk7XG4gICAgY3RybC5vcGVuID0gZmFsc2U7XG5cbiAgICAkc2NvcGUuJGJyb2FkY2FzdCgndWlzOmNsb3NlJywgc2tpcEZvY3Vzc2VyKTtcblxuICB9O1xuXG4gIGN0cmwuc2V0Rm9jdXMgPSBmdW5jdGlvbigpe1xuICAgIGlmICghY3RybC5mb2N1cykgY3RybC5mb2N1c0lucHV0WzBdLmZvY3VzKCk7XG4gIH07XG5cbiAgY3RybC5jbGVhciA9IGZ1bmN0aW9uKCRldmVudCkge1xuICAgIGN0cmwuc2VsZWN0KHVuZGVmaW5lZCk7XG4gICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgY3RybC5mb2N1c3NlclswXS5mb2N1cygpO1xuICAgIH0sIDAsIGZhbHNlKTtcbiAgfTtcblxuICAvLyBUb2dnbGUgZHJvcGRvd25cbiAgY3RybC50b2dnbGUgPSBmdW5jdGlvbihlKSB7XG4gICAgaWYgKGN0cmwub3Blbikge1xuICAgICAgY3RybC5jbG9zZSgpO1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3RybC5hY3RpdmF0ZSgpO1xuICAgIH1cbiAgfTtcblxuICBjdHJsLmlzTG9ja2VkID0gZnVuY3Rpb24oaXRlbVNjb3BlLCBpdGVtSW5kZXgpIHtcbiAgICAgIHZhciBpc0xvY2tlZCwgaXRlbSA9IGN0cmwuc2VsZWN0ZWRbaXRlbUluZGV4XTtcblxuICAgICAgaWYgKGl0ZW0gJiYgIWFuZ3VsYXIuaXNVbmRlZmluZWQoY3RybC5sb2NrQ2hvaWNlRXhwcmVzc2lvbikpIHtcbiAgICAgICAgICBpc0xvY2tlZCA9ICEhKGl0ZW1TY29wZS4kZXZhbChjdHJsLmxvY2tDaG9pY2VFeHByZXNzaW9uKSk7IC8vIGZvcmNlIHRoZSBib29sZWFuIHZhbHVlXG4gICAgICAgICAgaXRlbS5fdWlTZWxlY3RDaG9pY2VMb2NrZWQgPSBpc0xvY2tlZDsgLy8gc3RvcmUgdGhpcyBmb3IgbGF0ZXIgcmVmZXJlbmNlXG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpc0xvY2tlZDtcbiAgfTtcblxuICB2YXIgc2l6ZVdhdGNoID0gbnVsbDtcbiAgY3RybC5zaXplU2VhcmNoSW5wdXQgPSBmdW5jdGlvbigpIHtcblxuICAgIHZhciBpbnB1dCA9IGN0cmwuc2VhcmNoSW5wdXRbMF0sXG4gICAgICAgIGNvbnRhaW5lciA9IGN0cmwuc2VhcmNoSW5wdXQucGFyZW50KCkucGFyZW50KClbMF0sXG4gICAgICAgIGNhbGN1bGF0ZUNvbnRhaW5lcldpZHRoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gUmV0dXJuIHRoZSBjb250YWluZXIgd2lkdGggb25seSBpZiB0aGUgc2VhcmNoIGlucHV0IGlzIHZpc2libGVcbiAgICAgICAgICByZXR1cm4gY29udGFpbmVyLmNsaWVudFdpZHRoICogISFpbnB1dC5vZmZzZXRQYXJlbnQ7XG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZUlmVmlzaWJsZSA9IGZ1bmN0aW9uKGNvbnRhaW5lcldpZHRoKSB7XG4gICAgICAgICAgaWYgKGNvbnRhaW5lcldpZHRoID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciBpbnB1dFdpZHRoID0gY29udGFpbmVyV2lkdGggLSBpbnB1dC5vZmZzZXRMZWZ0IC0gMTA7XG4gICAgICAgICAgaWYgKGlucHV0V2lkdGggPCA1MCkgaW5wdXRXaWR0aCA9IGNvbnRhaW5lcldpZHRoO1xuICAgICAgICAgIGN0cmwuc2VhcmNoSW5wdXQuY3NzKCd3aWR0aCcsIGlucHV0V2lkdGgrJ3B4Jyk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH07XG5cbiAgICBjdHJsLnNlYXJjaElucHV0LmNzcygnd2lkdGgnLCAnMTBweCcpO1xuICAgICR0aW1lb3V0KGZ1bmN0aW9uKCkgeyAvL0dpdmUgdGFncyB0aW1lIHRvIHJlbmRlciBjb3JyZWN0bHlcbiAgICAgIGlmIChzaXplV2F0Y2ggPT09IG51bGwgJiYgIXVwZGF0ZUlmVmlzaWJsZShjYWxjdWxhdGVDb250YWluZXJXaWR0aCgpKSkge1xuICAgICAgICBzaXplV2F0Y2ggPSAkc2NvcGUuJHdhdGNoKGNhbGN1bGF0ZUNvbnRhaW5lcldpZHRoLCBmdW5jdGlvbihjb250YWluZXJXaWR0aCkge1xuICAgICAgICAgIGlmICh1cGRhdGVJZlZpc2libGUoY29udGFpbmVyV2lkdGgpKSB7XG4gICAgICAgICAgICBzaXplV2F0Y2goKTtcbiAgICAgICAgICAgIHNpemVXYXRjaCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBmdW5jdGlvbiBfaGFuZGxlRHJvcERvd25TZWxlY3Rpb24oa2V5KSB7XG4gICAgdmFyIHByb2Nlc3NlZCA9IHRydWU7XG4gICAgc3dpdGNoIChrZXkpIHtcbiAgICAgIGNhc2UgS0VZLkRPV046XG4gICAgICAgIGlmICghY3RybC5vcGVuICYmIGN0cmwubXVsdGlwbGUpIGN0cmwuYWN0aXZhdGUoZmFsc2UsIHRydWUpOyAvL0luIGNhc2UgaXRzIHRoZSBzZWFyY2ggaW5wdXQgaW4gJ211bHRpcGxlJyBtb2RlXG4gICAgICAgIGVsc2UgaWYgKGN0cmwuYWN0aXZlSW5kZXggPCBjdHJsLml0ZW1zLmxlbmd0aCAtIDEpIHsgY3RybC5hY3RpdmVJbmRleCsrOyB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLRVkuVVA6XG4gICAgICAgIGlmICghY3RybC5vcGVuICYmIGN0cmwubXVsdGlwbGUpIGN0cmwuYWN0aXZhdGUoZmFsc2UsIHRydWUpOyAvL0luIGNhc2UgaXRzIHRoZSBzZWFyY2ggaW5wdXQgaW4gJ211bHRpcGxlJyBtb2RlXG4gICAgICAgIGVsc2UgaWYgKGN0cmwuYWN0aXZlSW5kZXggPiAwIHx8IChjdHJsLnNlYXJjaC5sZW5ndGggPT09IDAgJiYgY3RybC50YWdnaW5nLmlzQWN0aXZhdGVkICYmIGN0cmwuYWN0aXZlSW5kZXggPiAtMSkpIHsgY3RybC5hY3RpdmVJbmRleC0tOyB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLRVkuVEFCOlxuICAgICAgICBpZiAoIWN0cmwubXVsdGlwbGUgfHwgY3RybC5vcGVuKSBjdHJsLnNlbGVjdChjdHJsLml0ZW1zW2N0cmwuYWN0aXZlSW5kZXhdLCB0cnVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEtFWS5FTlRFUjpcbiAgICAgICAgaWYoY3RybC5vcGVuICYmIChjdHJsLnRhZ2dpbmcuaXNBY3RpdmF0ZWQgfHwgY3RybC5hY3RpdmVJbmRleCA+PSAwKSl7XG4gICAgICAgICAgY3RybC5zZWxlY3QoY3RybC5pdGVtc1tjdHJsLmFjdGl2ZUluZGV4XSk7IC8vIE1ha2Ugc3VyZSBhdCBsZWFzdCBvbmUgZHJvcGRvd24gaXRlbSBpcyBoaWdobGlnaHRlZCBiZWZvcmUgYWRkaW5nIGlmIG5vdCBpbiB0YWdnaW5nIG1vZGVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdHJsLmFjdGl2YXRlKGZhbHNlLCB0cnVlKTsgLy9JbiBjYXNlIGl0cyB0aGUgc2VhcmNoIGlucHV0IGluICdtdWx0aXBsZScgbW9kZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLRVkuRVNDOlxuICAgICAgICBjdHJsLmNsb3NlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcHJvY2Vzc2VkID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBwcm9jZXNzZWQ7XG4gIH1cblxuICAvLyBCaW5kIHRvIGtleWJvYXJkIHNob3J0Y3V0c1xuICBjdHJsLnNlYXJjaElucHV0Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZSkge1xuXG4gICAgdmFyIGtleSA9IGUud2hpY2g7XG5cbiAgICAvLyBpZih+W0tFWS5FU0MsS0VZLlRBQl0uaW5kZXhPZihrZXkpKXtcbiAgICAvLyAgIC8vVE9ETzogU0VHVVJPP1xuICAgIC8vICAgY3RybC5jbG9zZSgpO1xuICAgIC8vIH1cblxuICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG5cbiAgICAgIHZhciB0YWdnZWQgPSBmYWxzZTtcblxuICAgICAgaWYgKGN0cmwuaXRlbXMubGVuZ3RoID4gMCB8fCBjdHJsLnRhZ2dpbmcuaXNBY3RpdmF0ZWQpIHtcbiAgICAgICAgX2hhbmRsZURyb3BEb3duU2VsZWN0aW9uKGtleSk7XG4gICAgICAgIGlmICggY3RybC50YWdnaW5nVG9rZW5zLmlzQWN0aXZhdGVkICkge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3RybC50YWdnaW5nVG9rZW5zLnRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKCBjdHJsLnRhZ2dpbmdUb2tlbnMudG9rZW5zW2ldID09PSBLRVkuTUFQW2Uua2V5Q29kZV0gKSB7XG4gICAgICAgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGVyZSBpcyBhIG5ldyB2YWx1ZSB0byBwdXNoIHZpYSB0YWdnaW5nXG4gICAgICAgICAgICAgIGlmICggY3RybC5zZWFyY2gubGVuZ3RoID4gMCApIHtcbiAgICAgICAgICAgICAgICB0YWdnZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggdGFnZ2VkICkge1xuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIGN0cmwuc2VhcmNoSW5wdXQudHJpZ2dlckhhbmRsZXIoJ3RhZ2dlZCcpO1xuICAgICAgICAgICAgICB2YXIgbmV3SXRlbSA9IGN0cmwuc2VhcmNoLnJlcGxhY2UoS0VZLk1BUFtlLmtleUNvZGVdLCcnKS50cmltKCk7XG4gICAgICAgICAgICAgIGlmICggY3RybC50YWdnaW5nLmZjdCApIHtcbiAgICAgICAgICAgICAgICBuZXdJdGVtID0gY3RybC50YWdnaW5nLmZjdCggbmV3SXRlbSApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChuZXdJdGVtKSBjdHJsLnNlbGVjdChuZXdJdGVtLCB0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBpZihLRVkuaXNWZXJ0aWNhbE1vdmVtZW50KGtleSkgJiYgY3RybC5pdGVtcy5sZW5ndGggPiAwKXtcbiAgICAgIF9lbnN1cmVIaWdobGlnaHRWaXNpYmxlKCk7XG4gICAgfVxuXG4gICAgaWYgKGtleSA9PT0gS0VZLkVOVEVSIHx8IGtleSA9PT0gS0VZLkVTQykge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgY3RybC5zZWFyY2hJbnB1dC5vbigncGFzdGUnLCBmdW5jdGlvbiAoZSkge1xuICAgIHZhciBkYXRhO1xuXG4gICAgaWYgKHdpbmRvdy5jbGlwYm9hcmREYXRhICYmIHdpbmRvdy5jbGlwYm9hcmREYXRhLmdldERhdGEpIHsgLy8gSUVcbiAgICAgIGRhdGEgPSB3aW5kb3cuY2xpcGJvYXJkRGF0YS5nZXREYXRhKCdUZXh0Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRhdGEgPSAoZS5vcmlnaW5hbEV2ZW50IHx8IGUpLmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpO1xuICAgIH1cblxuICAgIC8vIFByZXBlbmQgdGhlIGN1cnJlbnQgaW5wdXQgZmllbGQgdGV4dCB0byB0aGUgcGFzdGUgYnVmZmVyLlxuICAgIGRhdGEgPSBjdHJsLnNlYXJjaCArIGRhdGE7XG5cbiAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIElmIHRhZ2dpbmcgdHJ5IHRvIHNwbGl0IGJ5IHRva2VucyBhbmQgYWRkIGl0ZW1zXG4gICAgICBpZiAoY3RybC50YWdnaW5nVG9rZW5zLmlzQWN0aXZhdGVkKSB7XG4gICAgICAgIHZhciBzZXBhcmF0b3IgPSBLRVkudG9TZXBhcmF0b3IoY3RybC50YWdnaW5nVG9rZW5zLnRva2Vuc1swXSk7XG4gICAgICAgIHZhciBpdGVtcyA9IGRhdGEuc3BsaXQoc2VwYXJhdG9yIHx8IGN0cmwudGFnZ2luZ1Rva2Vucy50b2tlbnNbMF0pOyAvLyBzcGxpdCBieSBmaXJzdCB0b2tlbiBvbmx5XG4gICAgICAgIGlmIChpdGVtcyAmJiBpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciBvbGRzZWFyY2ggPSBjdHJsLnNlYXJjaDtcbiAgICAgICAgICBhbmd1bGFyLmZvckVhY2goaXRlbXMsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgbmV3SXRlbSA9IGN0cmwudGFnZ2luZy5mY3QgPyBjdHJsLnRhZ2dpbmcuZmN0KGl0ZW0pIDogaXRlbTtcbiAgICAgICAgICAgIGlmIChuZXdJdGVtKSB7XG4gICAgICAgICAgICAgIGN0cmwuc2VsZWN0KG5ld0l0ZW0sIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGN0cmwuc2VhcmNoID0gb2xkc2VhcmNoIHx8IEVNUFRZX1NFQVJDSDtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjdHJsLnBhc3RlKSB7XG4gICAgICAgIGN0cmwucGFzdGUoZGF0YSk7XG4gICAgICAgIGN0cmwuc2VhcmNoID0gRU1QVFlfU0VBUkNIO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICBjdHJsLnNlYXJjaElucHV0Lm9uKCd0YWdnZWQnLCBmdW5jdGlvbigpIHtcbiAgICAkdGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIF9yZXNldFNlYXJjaElucHV0KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vaXZheW5iZXJnL3NlbGVjdDIvYmxvYi8zLjQuNi9zZWxlY3QyLmpzI0wxNDMxXG4gIGZ1bmN0aW9uIF9lbnN1cmVIaWdobGlnaHRWaXNpYmxlKCkge1xuICAgIHZhciBjb250YWluZXIgPSAkZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudWktc2VsZWN0LWNob2ljZXMtY29udGVudCcpO1xuICAgIHZhciBjaG9pY2VzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy51aS1zZWxlY3QtY2hvaWNlcy1yb3cnKTtcbiAgICBpZiAoY2hvaWNlcy5sZW5ndGggPCAxKSB7XG4gICAgICB0aHJvdyB1aVNlbGVjdE1pbkVycignY2hvaWNlcycsIFwiRXhwZWN0ZWQgbXVsdGlwbGUgLnVpLXNlbGVjdC1jaG9pY2VzLXJvdyBidXQgZ290ICd7MH0nLlwiLCBjaG9pY2VzLmxlbmd0aCk7XG4gICAgfVxuXG4gICAgaWYgKGN0cmwuYWN0aXZlSW5kZXggPCAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGhpZ2hsaWdodGVkID0gY2hvaWNlc1tjdHJsLmFjdGl2ZUluZGV4XTtcbiAgICB2YXIgcG9zWSA9IGhpZ2hsaWdodGVkLm9mZnNldFRvcCArIGhpZ2hsaWdodGVkLmNsaWVudEhlaWdodCAtIGNvbnRhaW5lclswXS5zY3JvbGxUb3A7XG4gICAgdmFyIGhlaWdodCA9IGNvbnRhaW5lclswXS5vZmZzZXRIZWlnaHQ7XG5cbiAgICBpZiAocG9zWSA+IGhlaWdodCkge1xuICAgICAgY29udGFpbmVyWzBdLnNjcm9sbFRvcCArPSBwb3NZIC0gaGVpZ2h0O1xuICAgIH0gZWxzZSBpZiAocG9zWSA8IGhpZ2hsaWdodGVkLmNsaWVudEhlaWdodCkge1xuICAgICAgaWYgKGN0cmwuaXNHcm91cGVkICYmIGN0cmwuYWN0aXZlSW5kZXggPT09IDApXG4gICAgICAgIGNvbnRhaW5lclswXS5zY3JvbGxUb3AgPSAwOyAvL1RvIG1ha2UgZ3JvdXAgaGVhZGVyIHZpc2libGUgd2hlbiBnb2luZyBhbGwgdGhlIHdheSB1cFxuICAgICAgZWxzZVxuICAgICAgICBjb250YWluZXJbMF0uc2Nyb2xsVG9wIC09IGhpZ2hsaWdodGVkLmNsaWVudEhlaWdodCAtIHBvc1k7XG4gICAgfVxuICB9XG5cbiAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICBjdHJsLnNlYXJjaElucHV0Lm9mZigna2V5dXAga2V5ZG93biB0YWdnZWQgYmx1ciBwYXN0ZScpO1xuICB9KTtcblxufV0pO1xuXG51aXMuZGlyZWN0aXZlKCd1aVNlbGVjdCcsXG4gIFsnJGRvY3VtZW50JywgJ3VpU2VsZWN0Q29uZmlnJywgJ3VpU2VsZWN0TWluRXJyJywgJ3Vpc09mZnNldCcsICckY29tcGlsZScsICckcGFyc2UnLCAnJHRpbWVvdXQnLFxuICBmdW5jdGlvbigkZG9jdW1lbnQsIHVpU2VsZWN0Q29uZmlnLCB1aVNlbGVjdE1pbkVyciwgdWlzT2Zmc2V0LCAkY29tcGlsZSwgJHBhcnNlLCAkdGltZW91dCkge1xuXG4gIHJldHVybiB7XG4gICAgcmVzdHJpY3Q6ICdFQScsXG4gICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKHRFbGVtZW50LCB0QXR0cnMpIHtcbiAgICAgIHZhciB0aGVtZSA9IHRBdHRycy50aGVtZSB8fCB1aVNlbGVjdENvbmZpZy50aGVtZTtcbiAgICAgIHJldHVybiB0aGVtZSArIChhbmd1bGFyLmlzRGVmaW5lZCh0QXR0cnMubXVsdGlwbGUpID8gJy9zZWxlY3QtbXVsdGlwbGUudHBsLmh0bWwnIDogJy9zZWxlY3QudHBsLmh0bWwnKTtcbiAgICB9LFxuICAgIHJlcGxhY2U6IHRydWUsXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcbiAgICByZXF1aXJlOiBbJ3VpU2VsZWN0JywgJ15uZ01vZGVsJ10sXG4gICAgc2NvcGU6IHRydWUsXG5cbiAgICBjb250cm9sbGVyOiAndWlTZWxlY3RDdHJsJyxcbiAgICBjb250cm9sbGVyQXM6ICckc2VsZWN0JyxcbiAgICBjb21waWxlOiBmdW5jdGlvbih0RWxlbWVudCwgdEF0dHJzKSB7XG5cbiAgICAgIC8vIEFsbG93IHNldHRpbmcgbmdDbGFzcyBvbiB1aVNlbGVjdFxuICAgICAgdmFyIG1hdGNoID0gL3soLiopfVxccyp7KC4qKX0vLmV4ZWModEF0dHJzLm5nQ2xhc3MpO1xuICAgICAgaWYobWF0Y2gpIHtcbiAgICAgICAgdmFyIGNvbWJpbmVkID0gJ3snKyBtYXRjaFsxXSArJywgJysgbWF0Y2hbMl0gKyd9JztcbiAgICAgICAgdEF0dHJzLm5nQ2xhc3MgPSBjb21iaW5lZDtcbiAgICAgICAgdEVsZW1lbnQuYXR0cignbmctY2xhc3MnLCBjb21iaW5lZCk7XG4gICAgICB9XG5cbiAgICAgIC8vTXVsdGlwbGUgb3IgU2luZ2xlIGRlcGVuZGluZyBpZiBtdWx0aXBsZSBhdHRyaWJ1dGUgcHJlc2VuY2VcbiAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZCh0QXR0cnMubXVsdGlwbGUpKVxuICAgICAgICB0RWxlbWVudC5hcHBlbmQoJzx1aS1zZWxlY3QtbXVsdGlwbGUvPicpLnJlbW92ZUF0dHIoJ211bHRpcGxlJyk7XG4gICAgICBlbHNlXG4gICAgICAgIHRFbGVtZW50LmFwcGVuZCgnPHVpLXNlbGVjdC1zaW5nbGUvPicpO1xuXG4gICAgICBpZiAodEF0dHJzLmlucHV0SWQpXG4gICAgICAgIHRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0LnVpLXNlbGVjdC1zZWFyY2gnKVswXS5pZCA9IHRBdHRycy5pbnB1dElkO1xuXG4gICAgICByZXR1cm4gZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscywgdHJhbnNjbHVkZUZuKSB7XG5cbiAgICAgICAgdmFyICRzZWxlY3QgPSBjdHJsc1swXTtcbiAgICAgICAgdmFyIG5nTW9kZWwgPSBjdHJsc1sxXTtcblxuICAgICAgICAkc2VsZWN0LmdlbmVyYXRlZElkID0gdWlTZWxlY3RDb25maWcuZ2VuZXJhdGVJZCgpO1xuICAgICAgICAkc2VsZWN0LmJhc2VUaXRsZSA9IGF0dHJzLnRpdGxlIHx8ICdTZWxlY3QgYm94JztcbiAgICAgICAgJHNlbGVjdC5mb2N1c3NlclRpdGxlID0gJHNlbGVjdC5iYXNlVGl0bGUgKyAnIGZvY3VzJztcbiAgICAgICAgJHNlbGVjdC5mb2N1c3NlcklkID0gJ2ZvY3Vzc2VyLScgKyAkc2VsZWN0LmdlbmVyYXRlZElkO1xuXG4gICAgICAgICRzZWxlY3QuY2xvc2VPblNlbGVjdCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChhdHRycy5jbG9zZU9uU2VsZWN0KSkge1xuICAgICAgICAgICAgcmV0dXJuICRwYXJzZShhdHRycy5jbG9zZU9uU2VsZWN0KSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdWlTZWxlY3RDb25maWcuY2xvc2VPblNlbGVjdDtcbiAgICAgICAgICB9XG4gICAgICAgIH0oKTtcblxuICAgICAgICAkc2VsZWN0Lm9uU2VsZWN0Q2FsbGJhY2sgPSAkcGFyc2UoYXR0cnMub25TZWxlY3QpO1xuICAgICAgICAkc2VsZWN0Lm9uUmVtb3ZlQ2FsbGJhY2sgPSAkcGFyc2UoYXR0cnMub25SZW1vdmUpO1xuXG4gICAgICAgIC8vTGltaXQgdGhlIG51bWJlciBvZiBzZWxlY3Rpb25zIGFsbG93ZWRcbiAgICAgICAgJHNlbGVjdC5saW1pdCA9IChhbmd1bGFyLmlzRGVmaW5lZChhdHRycy5saW1pdCkpID8gcGFyc2VJbnQoYXR0cnMubGltaXQsIDEwKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAvL1NldCByZWZlcmVuY2UgdG8gbmdNb2RlbCBmcm9tIHVpU2VsZWN0Q3RybFxuICAgICAgICAkc2VsZWN0Lm5nTW9kZWwgPSBuZ01vZGVsO1xuXG4gICAgICAgICRzZWxlY3QuY2hvaWNlR3JvdXBlZCA9IGZ1bmN0aW9uKGdyb3VwKXtcbiAgICAgICAgICByZXR1cm4gJHNlbGVjdC5pc0dyb3VwZWQgJiYgZ3JvdXAgJiYgZ3JvdXAubmFtZTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZihhdHRycy50YWJpbmRleCl7XG4gICAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3RhYmluZGV4JywgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgICRzZWxlY3QuZm9jdXNJbnB1dC5hdHRyKCd0YWJpbmRleCcsIHZhbHVlKTtcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQXR0cigndGFiaW5kZXgnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLiR3YXRjaCgnc2VhcmNoRW5hYmxlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHNlYXJjaEVuYWJsZWQgPSBzY29wZS4kZXZhbChhdHRycy5zZWFyY2hFbmFibGVkKTtcbiAgICAgICAgICAgICRzZWxlY3Quc2VhcmNoRW5hYmxlZCA9IHNlYXJjaEVuYWJsZWQgIT09IHVuZGVmaW5lZCA/IHNlYXJjaEVuYWJsZWQgOiB1aVNlbGVjdENvbmZpZy5zZWFyY2hFbmFibGVkO1xuICAgICAgICB9KTtcblxuICAgICAgICBzY29wZS4kd2F0Y2goJ3NvcnRhYmxlJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc29ydGFibGUgPSBzY29wZS4kZXZhbChhdHRycy5zb3J0YWJsZSk7XG4gICAgICAgICAgICAkc2VsZWN0LnNvcnRhYmxlID0gc29ydGFibGUgIT09IHVuZGVmaW5lZCA/IHNvcnRhYmxlIDogdWlTZWxlY3RDb25maWcuc29ydGFibGU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCdkaXNhYmxlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIE5vIG5lZWQgdG8gdXNlICRldmFsKCkgKHRoYW5rcyB0byBuZy1kaXNhYmxlZCkgc2luY2Ugd2UgYWxyZWFkeSBnZXQgYSBib29sZWFuIGluc3RlYWQgb2YgYSBzdHJpbmdcbiAgICAgICAgICAkc2VsZWN0LmRpc2FibGVkID0gYXR0cnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCA/IGF0dHJzLmRpc2FibGVkIDogZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCdyZXNldFNlYXJjaElucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgLy8gJGV2YWwoKSBpcyBuZWVkZWQgb3RoZXJ3aXNlIHdlIGdldCBhIHN0cmluZyBpbnN0ZWFkIG9mIGEgYm9vbGVhblxuICAgICAgICAgIHZhciByZXNldFNlYXJjaElucHV0ID0gc2NvcGUuJGV2YWwoYXR0cnMucmVzZXRTZWFyY2hJbnB1dCk7XG4gICAgICAgICAgJHNlbGVjdC5yZXNldFNlYXJjaElucHV0ID0gcmVzZXRTZWFyY2hJbnB1dCAhPT0gdW5kZWZpbmVkID8gcmVzZXRTZWFyY2hJbnB1dCA6IHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCdwYXN0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRzZWxlY3QucGFzdGUgPSBzY29wZS4kZXZhbChhdHRycy5wYXN0ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGF0dHJzLiRvYnNlcnZlKCd0YWdnaW5nJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYoYXR0cnMudGFnZ2luZyAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIC8vICRldmFsKCkgaXMgbmVlZGVkIG90aGVyd2lzZSB3ZSBnZXQgYSBzdHJpbmcgaW5zdGVhZCBvZiBhIGJvb2xlYW5cbiAgICAgICAgICAgIHZhciB0YWdnaW5nRXZhbCA9IHNjb3BlLiRldmFsKGF0dHJzLnRhZ2dpbmcpO1xuICAgICAgICAgICAgJHNlbGVjdC50YWdnaW5nID0ge2lzQWN0aXZhdGVkOiB0cnVlLCBmY3Q6IHRhZ2dpbmdFdmFsICE9PSB0cnVlID8gdGFnZ2luZ0V2YWwgOiB1bmRlZmluZWR9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlXG4gICAgICAgICAge1xuICAgICAgICAgICAgJHNlbGVjdC50YWdnaW5nID0ge2lzQWN0aXZhdGVkOiBmYWxzZSwgZmN0OiB1bmRlZmluZWR9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3RhZ2dpbmdMYWJlbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmKGF0dHJzLnRhZ2dpbmcgIT09IHVuZGVmaW5lZCApXG4gICAgICAgICAge1xuICAgICAgICAgICAgLy8gY2hlY2sgZXZhbCBmb3IgRkFMU0UsIGluIHRoaXMgY2FzZSwgd2UgZGlzYWJsZSB0aGUgbGFiZWxzXG4gICAgICAgICAgICAvLyBhc3NvY2lhdGVkIHdpdGggdGFnZ2luZ1xuICAgICAgICAgICAgaWYgKCBhdHRycy50YWdnaW5nTGFiZWwgPT09ICdmYWxzZScgKSB7XG4gICAgICAgICAgICAgICRzZWxlY3QudGFnZ2luZ0xhYmVsID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICRzZWxlY3QudGFnZ2luZ0xhYmVsID0gYXR0cnMudGFnZ2luZ0xhYmVsICE9PSB1bmRlZmluZWQgPyBhdHRycy50YWdnaW5nTGFiZWwgOiAnKG5ldyknO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgYXR0cnMuJG9ic2VydmUoJ3RhZ2dpbmdUb2tlbnMnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoYXR0cnMudGFnZ2luZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YXIgdG9rZW5zID0gYXR0cnMudGFnZ2luZ1Rva2VucyAhPT0gdW5kZWZpbmVkID8gYXR0cnMudGFnZ2luZ1Rva2Vucy5zcGxpdCgnfCcpIDogWycsJywnRU5URVInXTtcbiAgICAgICAgICAgICRzZWxlY3QudGFnZ2luZ1Rva2VucyA9IHtpc0FjdGl2YXRlZDogdHJ1ZSwgdG9rZW5zOiB0b2tlbnMgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vQXV0b21hdGljYWxseSBnZXRzIGZvY3VzIHdoZW4gbG9hZGVkXG4gICAgICAgIGlmIChhbmd1bGFyLmlzRGVmaW5lZChhdHRycy5hdXRvZm9jdXMpKXtcbiAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgJHNlbGVjdC5zZXRGb2N1cygpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9HZXRzIGZvY3VzIGJhc2VkIG9uIHNjb3BlIGV2ZW50IG5hbWUgKGUuZy4gZm9jdXMtb249J1NvbWVFdmVudE5hbWUnKVxuICAgICAgICBpZiAoYW5ndWxhci5pc0RlZmluZWQoYXR0cnMuZm9jdXNPbikpe1xuICAgICAgICAgIHNjb3BlLiRvbihhdHRycy5mb2N1c09uLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAkc2VsZWN0LnNldEZvY3VzKCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gb25Eb2N1bWVudENsaWNrKGUpIHtcbiAgICAgICAgICBpZiAoISRzZWxlY3Qub3BlbikgcmV0dXJuOyAvL1NraXAgaXQgaWYgZHJvcGRvd24gaXMgY2xvc2VcblxuICAgICAgICAgIHZhciBjb250YWlucyA9IGZhbHNlO1xuXG4gICAgICAgICAgaWYgKHdpbmRvdy5qUXVlcnkpIHtcbiAgICAgICAgICAgIC8vIEZpcmVmb3ggMy42IGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudC5jb250YWlucygpXG4gICAgICAgICAgICAvLyBTZWUgTm9kZS5jb250YWlucyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvTm9kZS5jb250YWluc1xuICAgICAgICAgICAgY29udGFpbnMgPSB3aW5kb3cualF1ZXJ5LmNvbnRhaW5zKGVsZW1lbnRbMF0sIGUudGFyZ2V0KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29udGFpbnMgPSBlbGVtZW50WzBdLmNvbnRhaW5zKGUudGFyZ2V0KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIWNvbnRhaW5zICYmICEkc2VsZWN0LmNsaWNrVHJpZ2dlcmVkU2VsZWN0KSB7XG4gICAgICAgICAgICAvL1dpbGwgbG9zZSBmb2N1cyBvbmx5IHdpdGggY2VydGFpbiB0YXJnZXRzXG4gICAgICAgICAgICB2YXIgZm9jdXNhYmxlQ29udHJvbHMgPSBbJ2lucHV0JywnYnV0dG9uJywndGV4dGFyZWEnLCdzZWxlY3QnXTtcbiAgICAgICAgICAgIHZhciB0YXJnZXRDb250cm9sbGVyID0gYW5ndWxhci5lbGVtZW50KGUudGFyZ2V0KS5jb250cm9sbGVyKCd1aVNlbGVjdCcpOyAvL1RvIGNoZWNrIGlmIHRhcmdldCBpcyBvdGhlciB1aS1zZWxlY3RcbiAgICAgICAgICAgIHZhciBza2lwRm9jdXNzZXIgPSB0YXJnZXRDb250cm9sbGVyICYmIHRhcmdldENvbnRyb2xsZXIgIT09ICRzZWxlY3Q7IC8vVG8gY2hlY2sgaWYgdGFyZ2V0IGlzIG90aGVyIHVpLXNlbGVjdFxuICAgICAgICAgICAgaWYgKCFza2lwRm9jdXNzZXIpIHNraXBGb2N1c3NlciA9ICB+Zm9jdXNhYmxlQ29udHJvbHMuaW5kZXhPZihlLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpOyAvL0NoZWNrIGlmIHRhcmdldCBpcyBpbnB1dCwgYnV0dG9uIG9yIHRleHRhcmVhXG4gICAgICAgICAgICAkc2VsZWN0LmNsb3NlKHNraXBGb2N1c3Nlcik7XG4gICAgICAgICAgICBzY29wZS4kZGlnZXN0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgICRzZWxlY3QuY2xpY2tUcmlnZ2VyZWRTZWxlY3QgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNlZSBDbGljayBldmVyeXdoZXJlIGJ1dCBoZXJlIGV2ZW50IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTI5MzEzNjlcbiAgICAgICAgJGRvY3VtZW50Lm9uKCdjbGljaycsIG9uRG9jdW1lbnRDbGljayk7XG5cbiAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICRkb2N1bWVudC5vZmYoJ2NsaWNrJywgb25Eb2N1bWVudENsaWNrKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTW92ZSB0cmFuc2NsdWRlZCBlbGVtZW50cyB0byB0aGVpciBjb3JyZWN0IHBvc2l0aW9uIGluIG1haW4gdGVtcGxhdGVcbiAgICAgICAgdHJhbnNjbHVkZUZuKHNjb3BlLCBmdW5jdGlvbihjbG9uZSkge1xuICAgICAgICAgIC8vIFNlZSBUcmFuc2NsdWRlIGluIEFuZ3VsYXJKUyBodHRwOi8vYmxvZy5vbWthcnBhdGlsLmNvbS8yMDEyLzExL3RyYW5zY2x1ZGUtaW4tYW5ndWxhcmpzLmh0bWxcblxuICAgICAgICAgIC8vIE9uZSBkYXkganFMaXRlIHdpbGwgYmUgcmVwbGFjZWQgYnkgalF1ZXJ5IGFuZCB3ZSB3aWxsIGJlIGFibGUgdG8gd3JpdGU6XG4gICAgICAgICAgLy8gdmFyIHRyYW5zY2x1ZGVkRWxlbWVudCA9IGNsb25lLmZpbHRlcignLm15LWNsYXNzJylcbiAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGNyZWF0aW5nIGEgaGFja2lzaCBET00gZWxlbWVudDpcbiAgICAgICAgICB2YXIgdHJhbnNjbHVkZWQgPSBhbmd1bGFyLmVsZW1lbnQoJzxkaXY+JykuYXBwZW5kKGNsb25lKTtcblxuICAgICAgICAgIHZhciB0cmFuc2NsdWRlZE1hdGNoID0gdHJhbnNjbHVkZWQucXVlcnlTZWxlY3RvckFsbCgnLnVpLXNlbGVjdC1tYXRjaCcpO1xuICAgICAgICAgIHRyYW5zY2x1ZGVkTWF0Y2gucmVtb3ZlQXR0cigndWktc2VsZWN0LW1hdGNoJyk7IC8vVG8gYXZvaWQgbG9vcCBpbiBjYXNlIGRpcmVjdGl2ZSBhcyBhdHRyXG4gICAgICAgICAgdHJhbnNjbHVkZWRNYXRjaC5yZW1vdmVBdHRyKCdkYXRhLXVpLXNlbGVjdC1tYXRjaCcpOyAvLyBQcm9wZXJseSBoYW5kbGUgSFRNTDUgZGF0YS1hdHRyaWJ1dGVzXG4gICAgICAgICAgaWYgKHRyYW5zY2x1ZGVkTWF0Y2gubGVuZ3RoICE9PSAxKSB7XG4gICAgICAgICAgICB0aHJvdyB1aVNlbGVjdE1pbkVycigndHJhbnNjbHVkZWQnLCBcIkV4cGVjdGVkIDEgLnVpLXNlbGVjdC1tYXRjaCBidXQgZ290ICd7MH0nLlwiLCB0cmFuc2NsdWRlZE1hdGNoLmxlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVpLXNlbGVjdC1tYXRjaCcpLnJlcGxhY2VXaXRoKHRyYW5zY2x1ZGVkTWF0Y2gpO1xuXG4gICAgICAgICAgdmFyIHRyYW5zY2x1ZGVkQ2hvaWNlcyA9IHRyYW5zY2x1ZGVkLnF1ZXJ5U2VsZWN0b3JBbGwoJy51aS1zZWxlY3QtY2hvaWNlcycpO1xuICAgICAgICAgIHRyYW5zY2x1ZGVkQ2hvaWNlcy5yZW1vdmVBdHRyKCd1aS1zZWxlY3QtY2hvaWNlcycpOyAvL1RvIGF2b2lkIGxvb3AgaW4gY2FzZSBkaXJlY3RpdmUgYXMgYXR0clxuICAgICAgICAgIHRyYW5zY2x1ZGVkQ2hvaWNlcy5yZW1vdmVBdHRyKCdkYXRhLXVpLXNlbGVjdC1jaG9pY2VzJyk7IC8vIFByb3Blcmx5IGhhbmRsZSBIVE1MNSBkYXRhLWF0dHJpYnV0ZXNcbiAgICAgICAgICBpZiAodHJhbnNjbHVkZWRDaG9pY2VzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgICAgICAgdGhyb3cgdWlTZWxlY3RNaW5FcnIoJ3RyYW5zY2x1ZGVkJywgXCJFeHBlY3RlZCAxIC51aS1zZWxlY3QtY2hvaWNlcyBidXQgZ290ICd7MH0nLlwiLCB0cmFuc2NsdWRlZENob2ljZXMubGVuZ3RoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudWktc2VsZWN0LWNob2ljZXMnKS5yZXBsYWNlV2l0aCh0cmFuc2NsdWRlZENob2ljZXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTdXBwb3J0IGZvciBhcHBlbmRpbmcgdGhlIHNlbGVjdCBmaWVsZCB0byB0aGUgYm9keSB3aGVuIGl0cyBvcGVuXG4gICAgICAgIHZhciBhcHBlbmRUb0JvZHkgPSBzY29wZS4kZXZhbChhdHRycy5hcHBlbmRUb0JvZHkpO1xuICAgICAgICBpZiAoYXBwZW5kVG9Cb2R5ICE9PSB1bmRlZmluZWQgPyBhcHBlbmRUb0JvZHkgOiB1aVNlbGVjdENvbmZpZy5hcHBlbmRUb0JvZHkpIHtcbiAgICAgICAgICBzY29wZS4kd2F0Y2goJyRzZWxlY3Qub3BlbicsIGZ1bmN0aW9uKGlzT3Blbikge1xuICAgICAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgICBwb3NpdGlvbkRyb3Bkb3duKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZXNldERyb3Bkb3duKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBNb3ZlIHRoZSBkcm9wZG93biBiYWNrIHRvIGl0cyBvcmlnaW5hbCBsb2NhdGlvbiB3aGVuIHRoZSBzY29wZSBpcyBkZXN0cm95ZWQuIE90aGVyd2lzZVxuICAgICAgICAgIC8vIGl0IG1pZ2h0IHN0aWNrIGFyb3VuZCB3aGVuIHRoZSB1c2VyIHJvdXRlcyBhd2F5IG9yIHRoZSBzZWxlY3QgZmllbGQgaXMgb3RoZXJ3aXNlIHJlbW92ZWRcbiAgICAgICAgICBzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXNldERyb3Bkb3duKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIb2xkIG9uIHRvIGEgcmVmZXJlbmNlIHRvIHRoZSAudWktc2VsZWN0LWNvbnRhaW5lciBlbGVtZW50IGZvciBhcHBlbmRUb0JvZHkgc3VwcG9ydFxuICAgICAgICB2YXIgcGxhY2Vob2xkZXIgPSBudWxsLFxuICAgICAgICAgICAgb3JpZ2luYWxXaWR0aCA9ICcnO1xuXG4gICAgICAgIGZ1bmN0aW9uIHBvc2l0aW9uRHJvcGRvd24oKSB7XG4gICAgICAgICAgLy8gUmVtZW1iZXIgdGhlIGFic29sdXRlIHBvc2l0aW9uIG9mIHRoZSBlbGVtZW50XG4gICAgICAgICAgdmFyIG9mZnNldCA9IHVpc09mZnNldChlbGVtZW50KTtcblxuICAgICAgICAgIC8vIENsb25lIHRoZSBlbGVtZW50IGludG8gYSBwbGFjZWhvbGRlciBlbGVtZW50IHRvIHRha2UgaXRzIG9yaWdpbmFsIHBsYWNlIGluIHRoZSBET01cbiAgICAgICAgICBwbGFjZWhvbGRlciA9IGFuZ3VsYXIuZWxlbWVudCgnPGRpdiBjbGFzcz1cInVpLXNlbGVjdC1wbGFjZWhvbGRlclwiPjwvZGl2PicpO1xuICAgICAgICAgIHBsYWNlaG9sZGVyWzBdLnN0eWxlLndpZHRoID0gb2Zmc2V0LndpZHRoICsgJ3B4JztcbiAgICAgICAgICBwbGFjZWhvbGRlclswXS5zdHlsZS5oZWlnaHQgPSBvZmZzZXQuaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgICBlbGVtZW50LmFmdGVyKHBsYWNlaG9sZGVyKTtcblxuICAgICAgICAgIC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZSBvZiB0aGUgZWxlbWVudCB3aWR0aCBpbmxpbmUgc3R5bGUsIHNvIGl0IGNhbiBiZSByZXN0b3JlZFxuICAgICAgICAgIC8vIHdoZW4gdGhlIGRyb3Bkb3duIGlzIGNsb3NlZFxuICAgICAgICAgIG9yaWdpbmFsV2lkdGggPSBlbGVtZW50WzBdLnN0eWxlLndpZHRoO1xuXG4gICAgICAgICAgLy8gTm93IG1vdmUgdGhlIGFjdHVhbCBkcm9wZG93biBlbGVtZW50IHRvIHRoZSBlbmQgb2YgdGhlIGJvZHlcbiAgICAgICAgICAkZG9jdW1lbnQuZmluZCgnYm9keScpLmFwcGVuZChlbGVtZW50KTtcblxuICAgICAgICAgIGVsZW1lbnRbMF0uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgIGVsZW1lbnRbMF0uc3R5bGUubGVmdCA9IG9mZnNldC5sZWZ0ICsgJ3B4JztcbiAgICAgICAgICBlbGVtZW50WzBdLnN0eWxlLnRvcCA9IG9mZnNldC50b3AgKyAncHgnO1xuICAgICAgICAgIGVsZW1lbnRbMF0uc3R5bGUud2lkdGggPSBvZmZzZXQud2lkdGggKyAncHgnO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVzZXREcm9wZG93bigpIHtcbiAgICAgICAgICBpZiAocGxhY2Vob2xkZXIgPT09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFRoZSBkcm9wZG93biBoYXMgbm90IGFjdHVhbGx5IGJlZW4gZGlzcGxheSB5ZXQsIHNvIHRoZXJlJ3Mgbm90aGluZyB0byByZXNldFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIE1vdmUgdGhlIGRyb3Bkb3duIGVsZW1lbnQgYmFjayB0byBpdHMgb3JpZ2luYWwgbG9jYXRpb24gaW4gdGhlIERPTVxuICAgICAgICAgIHBsYWNlaG9sZGVyLnJlcGxhY2VXaXRoKGVsZW1lbnQpO1xuICAgICAgICAgIHBsYWNlaG9sZGVyID0gbnVsbDtcblxuICAgICAgICAgIGVsZW1lbnRbMF0uc3R5bGUucG9zaXRpb24gPSAnJztcbiAgICAgICAgICBlbGVtZW50WzBdLnN0eWxlLmxlZnQgPSAnJztcbiAgICAgICAgICBlbGVtZW50WzBdLnN0eWxlLnRvcCA9ICcnO1xuICAgICAgICAgIGVsZW1lbnRbMF0uc3R5bGUud2lkdGggPSBvcmlnaW5hbFdpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSG9sZCBvbiB0byBhIHJlZmVyZW5jZSB0byB0aGUgLnVpLXNlbGVjdC1kcm9wZG93biBlbGVtZW50IGZvciBkaXJlY3Rpb24gc3VwcG9ydC5cbiAgICAgICAgdmFyIGRyb3Bkb3duID0gbnVsbCxcbiAgICAgICAgICAgIGRpcmVjdGlvblVwQ2xhc3NOYW1lID0gJ2RpcmVjdGlvbi11cCc7XG5cbiAgICAgICAgLy8gU3VwcG9ydCBjaGFuZ2luZyB0aGUgZGlyZWN0aW9uIG9mIHRoZSBkcm9wZG93biBpZiB0aGVyZSBpc24ndCBlbm91Z2ggc3BhY2UgdG8gcmVuZGVyIGl0LlxuICAgICAgICBzY29wZS4kd2F0Y2goJyRzZWxlY3Qub3BlbicsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgaWYgKCRzZWxlY3QuZHJvcGRvd25Qb3NpdGlvbiA9PT0gJ2F1dG8nIHx8ICRzZWxlY3QuZHJvcGRvd25Qb3NpdGlvbiA9PT0gJ3VwJyl7XG4gICAgICAgICAgICBzY29wZS5jYWxjdWxhdGVEcm9wZG93blBvcygpO1xuICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgc2V0RHJvcGRvd25Qb3NVcCA9IGZ1bmN0aW9uKG9mZnNldCwgb2Zmc2V0RHJvcGRvd24pe1xuXG4gICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IHVpc09mZnNldChlbGVtZW50KTtcbiAgICAgICAgICBvZmZzZXREcm9wZG93biA9IG9mZnNldERyb3Bkb3duIHx8IHVpc09mZnNldChkcm9wZG93bik7XG5cbiAgICAgICAgICBkcm9wZG93blswXS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgZHJvcGRvd25bMF0uc3R5bGUudG9wID0gKG9mZnNldERyb3Bkb3duLmhlaWdodCAqIC0xKSArICdweCc7XG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhkaXJlY3Rpb25VcENsYXNzTmFtZSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgc2V0RHJvcGRvd25Qb3NEb3duID0gZnVuY3Rpb24ob2Zmc2V0LCBvZmZzZXREcm9wZG93bil7XG5cbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGRpcmVjdGlvblVwQ2xhc3NOYW1lKTtcblxuICAgICAgICAgIG9mZnNldCA9IG9mZnNldCB8fCB1aXNPZmZzZXQoZWxlbWVudCk7XG4gICAgICAgICAgb2Zmc2V0RHJvcGRvd24gPSBvZmZzZXREcm9wZG93biB8fCB1aXNPZmZzZXQoZHJvcGRvd24pO1xuXG4gICAgICAgICAgZHJvcGRvd25bMF0uc3R5bGUucG9zaXRpb24gPSAnJztcbiAgICAgICAgICBkcm9wZG93blswXS5zdHlsZS50b3AgPSAnJztcblxuICAgICAgICB9O1xuXG4gICAgICAgIHNjb3BlLmNhbGN1bGF0ZURyb3Bkb3duUG9zID0gZnVuY3Rpb24oKXtcblxuICAgICAgICAgIGlmICgkc2VsZWN0Lm9wZW4pIHtcbiAgICAgICAgICAgIGRyb3Bkb3duID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnQpLnF1ZXJ5U2VsZWN0b3JBbGwoJy51aS1zZWxlY3QtZHJvcGRvd24nKTtcbiAgICAgICAgICAgIGlmIChkcm9wZG93bi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBIaWRlIHRoZSBkcm9wZG93biBzbyB0aGVyZSBpcyBubyBmbGlja2VyIHVudGlsICR0aW1lb3V0IGlzIGRvbmUgZXhlY3V0aW5nLlxuICAgICAgICAgICAgZHJvcGRvd25bMF0uc3R5bGUub3BhY2l0eSA9IDA7XG5cbiAgICAgICAgICAgIC8vIERlbGF5IHBvc2l0aW9uaW5nIHRoZSBkcm9wZG93biB1bnRpbCBhbGwgY2hvaWNlcyBoYXZlIGJlZW4gYWRkZWQgc28gaXRzIGhlaWdodCBpcyBjb3JyZWN0LlxuICAgICAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgICBpZiAoJHNlbGVjdC5kcm9wZG93blBvc2l0aW9uID09PSAndXAnKXtcbiAgICAgICAgICAgICAgICAgIC8vR28gVVBcbiAgICAgICAgICAgICAgICAgIHNldERyb3Bkb3duUG9zVXAoKTtcblxuICAgICAgICAgICAgICB9ZWxzZXsgLy9BVVRPXG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGRpcmVjdGlvblVwQ2xhc3NOYW1lKTtcblxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSB1aXNPZmZzZXQoZWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldERyb3Bkb3duID0gdWlzT2Zmc2V0KGRyb3Bkb3duKTtcblxuICAgICAgICAgICAgICAgIC8vaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTM0MjMwNyNjNFxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgPSAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCAkZG9jdW1lbnRbMF0uYm9keS5zY3JvbGxUb3A7IC8vVG8gbWFrZSBpdCBjcm9zcyBicm93c2VyIChibGluaywgd2Via2l0LCBJRSwgRmlyZWZveCkuXG5cbiAgICAgICAgICAgICAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIGRpcmVjdGlvbiBvZiB0aGUgZHJvcGRvd24gbmVlZHMgdG8gYmUgY2hhbmdlZC5cbiAgICAgICAgICAgICAgICBpZiAob2Zmc2V0LnRvcCArIG9mZnNldC5oZWlnaHQgKyBvZmZzZXREcm9wZG93bi5oZWlnaHQgPiBzY3JvbGxUb3AgKyAkZG9jdW1lbnRbMF0uZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgLy9HbyBVUFxuICAgICAgICAgICAgICAgICAgc2V0RHJvcGRvd25Qb3NVcChvZmZzZXQsIG9mZnNldERyb3Bkb3duKTtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgIC8vR28gRE9XTlxuICAgICAgICAgICAgICAgICAgc2V0RHJvcGRvd25Qb3NEb3duKG9mZnNldCwgb2Zmc2V0RHJvcGRvd24pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gRGlzcGxheSB0aGUgZHJvcGRvd24gb25jZSBpdCBoYXMgYmVlbiBwb3NpdGlvbmVkLlxuICAgICAgICAgICAgICBkcm9wZG93blswXS5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmIChkcm9wZG93biA9PT0gbnVsbCB8fCBkcm9wZG93bi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgcG9zaXRpb24gb2YgdGhlIGRyb3Bkb3duLlxuICAgICAgICAgICAgICBkcm9wZG93blswXS5zdHlsZS5wb3NpdGlvbiA9ICcnO1xuICAgICAgICAgICAgICBkcm9wZG93blswXS5zdHlsZS50b3AgPSAnJztcbiAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhkaXJlY3Rpb25VcENsYXNzTmFtZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfTtcbiAgICB9XG4gIH07XG59XSk7XG5cbnVpcy5kaXJlY3RpdmUoJ3VpU2VsZWN0TWF0Y2gnLCBbJ3VpU2VsZWN0Q29uZmlnJywgZnVuY3Rpb24odWlTZWxlY3RDb25maWcpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXF1aXJlOiAnXnVpU2VsZWN0JyxcbiAgICByZXBsYWNlOiB0cnVlLFxuICAgIHRyYW5zY2x1ZGU6IHRydWUsXG4gICAgdGVtcGxhdGVVcmw6IGZ1bmN0aW9uKHRFbGVtZW50KSB7XG4gICAgICAvLyBOZWVkZWQgc28gdGhlIHVpU2VsZWN0IGNhbiBkZXRlY3QgdGhlIHRyYW5zY2x1ZGVkIGNvbnRlbnRcbiAgICAgIHRFbGVtZW50LmFkZENsYXNzKCd1aS1zZWxlY3QtbWF0Y2gnKTtcblxuICAgICAgLy8gR2V0cyB0aGVtZSBhdHRyaWJ1dGUgZnJvbSBwYXJlbnQgKHVpLXNlbGVjdClcbiAgICAgIHZhciB0aGVtZSA9IHRFbGVtZW50LnBhcmVudCgpLmF0dHIoJ3RoZW1lJykgfHwgdWlTZWxlY3RDb25maWcudGhlbWU7XG4gICAgICB2YXIgbXVsdGkgPSB0RWxlbWVudC5wYXJlbnQoKS5hdHRyKCdtdWx0aXBsZScpO1xuICAgICAgcmV0dXJuIHRoZW1lICsgKG11bHRpID8gJy9tYXRjaC1tdWx0aXBsZS50cGwuaHRtbCcgOiAnL21hdGNoLnRwbC5odG1sJyk7XG4gICAgfSxcbiAgICBsaW5rOiBmdW5jdGlvbihzY29wZSwgZWxlbWVudCwgYXR0cnMsICRzZWxlY3QpIHtcbiAgICAgICRzZWxlY3QubG9ja0Nob2ljZUV4cHJlc3Npb24gPSBhdHRycy51aUxvY2tDaG9pY2U7XG4gICAgICBhdHRycy4kb2JzZXJ2ZSgncGxhY2Vob2xkZXInLCBmdW5jdGlvbihwbGFjZWhvbGRlcikge1xuICAgICAgICAkc2VsZWN0LnBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXIgIT09IHVuZGVmaW5lZCA/IHBsYWNlaG9sZGVyIDogdWlTZWxlY3RDb25maWcucGxhY2Vob2xkZXI7XG4gICAgICB9KTtcblxuICAgICAgZnVuY3Rpb24gc2V0QWxsb3dDbGVhcihhbGxvdykge1xuICAgICAgICAkc2VsZWN0LmFsbG93Q2xlYXIgPSAoYW5ndWxhci5pc0RlZmluZWQoYWxsb3cpKSA/IChhbGxvdyA9PT0gJycpID8gdHJ1ZSA6IChhbGxvdy50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScpIDogZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGF0dHJzLiRvYnNlcnZlKCdhbGxvd0NsZWFyJywgc2V0QWxsb3dDbGVhcik7XG4gICAgICBzZXRBbGxvd0NsZWFyKGF0dHJzLmFsbG93Q2xlYXIpO1xuXG4gICAgICBpZigkc2VsZWN0Lm11bHRpcGxlKXtcbiAgICAgICAgJHNlbGVjdC5zaXplU2VhcmNoSW5wdXQoKTtcbiAgICAgIH1cblxuICAgIH1cbiAgfTtcbn1dKTtcblxudWlzLmRpcmVjdGl2ZSgndWlTZWxlY3RNdWx0aXBsZScsIFsndWlTZWxlY3RNaW5FcnInLCckdGltZW91dCcsIGZ1bmN0aW9uKHVpU2VsZWN0TWluRXJyLCAkdGltZW91dCkge1xuICByZXR1cm4ge1xuICAgIHJlc3RyaWN0OiAnRUEnLFxuICAgIHJlcXVpcmU6IFsnXnVpU2VsZWN0JywgJ15uZ01vZGVsJ10sXG5cbiAgICBjb250cm9sbGVyOiBbJyRzY29wZScsJyR0aW1lb3V0JywgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCl7XG5cbiAgICAgIHZhciBjdHJsID0gdGhpcyxcbiAgICAgICAgICAkc2VsZWN0ID0gJHNjb3BlLiRzZWxlY3QsXG4gICAgICAgICAgbmdNb2RlbDtcblxuICAgICAgLy9XYWl0IGZvciBsaW5rIGZuIHRvIGluamVjdCBpdCBcbiAgICAgICRzY29wZS4kZXZhbEFzeW5jKGZ1bmN0aW9uKCl7IG5nTW9kZWwgPSAkc2NvcGUubmdNb2RlbDsgfSk7XG5cbiAgICAgIGN0cmwuYWN0aXZlTWF0Y2hJbmRleCA9IC0xO1xuXG4gICAgICBjdHJsLnVwZGF0ZU1vZGVsID0gZnVuY3Rpb24oKXtcbiAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKERhdGUubm93KCkpOyAvL1NldCB0aW1lc3RhbXAgYXMgYSB1bmlxdWUgc3RyaW5nIHRvIGZvcmNlIGNoYW5nZXNcbiAgICAgICAgY3RybC5yZWZyZXNoQ29tcG9uZW50KCk7XG4gICAgICB9O1xuXG4gICAgICBjdHJsLnJlZnJlc2hDb21wb25lbnQgPSBmdW5jdGlvbigpe1xuICAgICAgICAvL1JlbW92ZSBhbHJlYWR5IHNlbGVjdGVkIGl0ZW1zXG4gICAgICAgIC8vZS5nLiBXaGVuIHVzZXIgY2xpY2tzIG9uIGEgc2VsZWN0aW9uLCB0aGUgc2VsZWN0ZWQgYXJyYXkgY2hhbmdlcyBhbmQgXG4gICAgICAgIC8vdGhlIGRyb3Bkb3duIHNob3VsZCByZW1vdmUgdGhhdCBpdGVtXG4gICAgICAgICRzZWxlY3QucmVmcmVzaEl0ZW1zKCk7XG4gICAgICAgICRzZWxlY3Quc2l6ZVNlYXJjaElucHV0KCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBSZW1vdmUgaXRlbSBmcm9tIG11bHRpcGxlIHNlbGVjdFxuICAgICAgY3RybC5yZW1vdmVDaG9pY2UgPSBmdW5jdGlvbihpbmRleCl7XG5cbiAgICAgICAgdmFyIHJlbW92ZWRDaG9pY2UgPSAkc2VsZWN0LnNlbGVjdGVkW2luZGV4XTtcblxuICAgICAgICAvLyBpZiB0aGUgY2hvaWNlIGlzIGxvY2tlZCwgY2FuJ3QgcmVtb3ZlIGl0XG4gICAgICAgIGlmKHJlbW92ZWRDaG9pY2UuX3VpU2VsZWN0Q2hvaWNlTG9ja2VkKSByZXR1cm47XG5cbiAgICAgICAgdmFyIGxvY2FscyA9IHt9O1xuICAgICAgICBsb2NhbHNbJHNlbGVjdC5wYXJzZXJSZXN1bHQuaXRlbU5hbWVdID0gcmVtb3ZlZENob2ljZTtcblxuICAgICAgICAkc2VsZWN0LnNlbGVjdGVkLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIGN0cmwuYWN0aXZlTWF0Y2hJbmRleCA9IC0xO1xuICAgICAgICAkc2VsZWN0LnNpemVTZWFyY2hJbnB1dCgpO1xuXG4gICAgICAgIC8vIEdpdmUgc29tZSB0aW1lIGZvciBzY29wZSBwcm9wYWdhdGlvbi5cbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAkc2VsZWN0Lm9uUmVtb3ZlQ2FsbGJhY2soJHNjb3BlLCB7XG4gICAgICAgICAgICAkaXRlbTogcmVtb3ZlZENob2ljZSxcbiAgICAgICAgICAgICRtb2RlbDogJHNlbGVjdC5wYXJzZXJSZXN1bHQubW9kZWxNYXBwZXIoJHNjb3BlLCBsb2NhbHMpXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN0cmwudXBkYXRlTW9kZWwoKTtcblxuICAgICAgfTtcblxuICAgICAgY3RybC5nZXRQbGFjZWhvbGRlciA9IGZ1bmN0aW9uKCl7XG4gICAgICAgIC8vUmVmYWN0b3Igc2luZ2xlP1xuICAgICAgICBpZigkc2VsZWN0LnNlbGVjdGVkICYmICRzZWxlY3Quc2VsZWN0ZWQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIHJldHVybiAkc2VsZWN0LnBsYWNlaG9sZGVyO1xuICAgICAgfTtcblxuXG4gICAgfV0sXG4gICAgY29udHJvbGxlckFzOiAnJHNlbGVjdE11bHRpcGxlJyxcblxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcblxuICAgICAgdmFyICRzZWxlY3QgPSBjdHJsc1swXTtcbiAgICAgIHZhciBuZ01vZGVsID0gc2NvcGUubmdNb2RlbCA9IGN0cmxzWzFdO1xuICAgICAgdmFyICRzZWxlY3RNdWx0aXBsZSA9IHNjb3BlLiRzZWxlY3RNdWx0aXBsZTtcblxuICAgICAgLy8kc2VsZWN0LnNlbGVjdGVkID0gcmF3IHNlbGVjdGVkIG9iamVjdHMgKGlnbm9yaW5nIGFueSBwcm9wZXJ0eSBiaW5kaW5nKVxuXG4gICAgICAkc2VsZWN0Lm11bHRpcGxlID0gdHJ1ZTtcbiAgICAgICRzZWxlY3QucmVtb3ZlU2VsZWN0ZWQgPSB0cnVlO1xuXG4gICAgICAvL0lucHV0IHRoYXQgd2lsbCBoYW5kbGUgZm9jdXNcbiAgICAgICRzZWxlY3QuZm9jdXNJbnB1dCA9ICRzZWxlY3Quc2VhcmNoSW5wdXQ7XG5cbiAgICAgIC8vRnJvbSB2aWV3IC0tPiBtb2RlbFxuICAgICAgbmdNb2RlbC4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxvY2FscyA9IHt9LFxuICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgcmVzdWx0TXVsdGlwbGUgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaiA9ICRzZWxlY3Quc2VsZWN0ZWQubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICBsb2NhbHMgPSB7fTtcbiAgICAgICAgICBsb2NhbHNbJHNlbGVjdC5wYXJzZXJSZXN1bHQuaXRlbU5hbWVdID0gJHNlbGVjdC5zZWxlY3RlZFtqXTtcbiAgICAgICAgICByZXN1bHQgPSAkc2VsZWN0LnBhcnNlclJlc3VsdC5tb2RlbE1hcHBlcihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICByZXN1bHRNdWx0aXBsZS51bnNoaWZ0KHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdE11bHRpcGxlO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEZyb20gbW9kZWwgLS0+IHZpZXdcbiAgICAgIG5nTW9kZWwuJGZvcm1hdHRlcnMudW5zaGlmdChmdW5jdGlvbiAoaW5wdXRWYWx1ZSkge1xuICAgICAgICB2YXIgZGF0YSA9ICRzZWxlY3QucGFyc2VyUmVzdWx0LnNvdXJjZSAoc2NvcGUsIHsgJHNlbGVjdCA6IHtzZWFyY2g6Jyd9fSksIC8vT3ZlcndyaXRlICRzZWFyY2hcbiAgICAgICAgICAgIGxvY2FscyA9IHt9LFxuICAgICAgICAgICAgcmVzdWx0O1xuICAgICAgICBpZiAoIWRhdGEpIHJldHVybiBpbnB1dFZhbHVlO1xuICAgICAgICB2YXIgcmVzdWx0TXVsdGlwbGUgPSBbXTtcbiAgICAgICAgdmFyIGNoZWNrRm5NdWx0aXBsZSA9IGZ1bmN0aW9uKGxpc3QsIHZhbHVlKXtcbiAgICAgICAgICBpZiAoIWxpc3QgfHwgIWxpc3QubGVuZ3RoKSByZXR1cm47XG4gICAgICAgICAgZm9yICh2YXIgcCA9IGxpc3QubGVuZ3RoIC0gMTsgcCA+PSAwOyBwLS0pIHtcbiAgICAgICAgICAgIGxvY2Fsc1skc2VsZWN0LnBhcnNlclJlc3VsdC5pdGVtTmFtZV0gPSBsaXN0W3BdO1xuICAgICAgICAgICAgcmVzdWx0ID0gJHNlbGVjdC5wYXJzZXJSZXN1bHQubW9kZWxNYXBwZXIoc2NvcGUsIGxvY2Fscyk7XG4gICAgICAgICAgICBpZigkc2VsZWN0LnBhcnNlclJlc3VsdC50cmFja0J5RXhwKXtcbiAgICAgICAgICAgICAgICB2YXIgcHJvcHNJdGVtTmFtZU1hdGNoZXMgPSAvKFxcdyopXFwuLy5leGVjKCRzZWxlY3QucGFyc2VyUmVzdWx0LnRyYWNrQnlFeHApO1xuICAgICAgICAgICAgICAgIHZhciBtYXRjaGVzID0gL1xcLihbXlxcc10rKS8uZXhlYygkc2VsZWN0LnBhcnNlclJlc3VsdC50cmFja0J5RXhwKTtcbiAgICAgICAgICAgICAgICBpZihwcm9wc0l0ZW1OYW1lTWF0Y2hlcyAmJiBwcm9wc0l0ZW1OYW1lTWF0Y2hlcy5sZW5ndGggPiAwICYmIHByb3BzSXRlbU5hbWVNYXRjaGVzWzFdID09ICRzZWxlY3QucGFyc2VyUmVzdWx0Lml0ZW1OYW1lKXtcbiAgICAgICAgICAgICAgICAgIGlmKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGg+MCAmJiByZXN1bHRbbWF0Y2hlc1sxXV0gPT0gdmFsdWVbbWF0Y2hlc1sxXV0pe1xuICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdE11bHRpcGxlLnVuc2hpZnQobGlzdFtwXSk7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGFuZ3VsYXIuZXF1YWxzKHJlc3VsdCx2YWx1ZSkpe1xuICAgICAgICAgICAgICByZXN1bHRNdWx0aXBsZS51bnNoaWZ0KGxpc3RbcF0pO1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoIWlucHV0VmFsdWUpIHJldHVybiByZXN1bHRNdWx0aXBsZTsgLy9JZiBuZ01vZGVsIHdhcyB1bmRlZmluZWRcbiAgICAgICAgZm9yICh2YXIgayA9IGlucHV0VmFsdWUubGVuZ3RoIC0gMTsgayA+PSAwOyBrLS0pIHtcbiAgICAgICAgICAvL0NoZWNrIG1vZGVsIGFycmF5IG9mIGN1cnJlbnRseSBzZWxlY3RlZCBpdGVtcyBcbiAgICAgICAgICBpZiAoIWNoZWNrRm5NdWx0aXBsZSgkc2VsZWN0LnNlbGVjdGVkLCBpbnB1dFZhbHVlW2tdKSl7XG4gICAgICAgICAgICAvL0NoZWNrIG1vZGVsIGFycmF5IG9mIGFsbCBpdGVtcyBhdmFpbGFibGVcbiAgICAgICAgICAgIGlmICghY2hlY2tGbk11bHRpcGxlKGRhdGEsIGlucHV0VmFsdWVba10pKXtcbiAgICAgICAgICAgICAgLy9JZiBub3QgZm91bmQgb24gcHJldmlvdXMgbGlzdHMsIGp1c3QgYWRkIGl0IGRpcmVjdGx5IHRvIHJlc3VsdE11bHRpcGxlXG4gICAgICAgICAgICAgIHJlc3VsdE11bHRpcGxlLnVuc2hpZnQoaW5wdXRWYWx1ZVtrXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHRNdWx0aXBsZTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvL1dhdGNoIGZvciBleHRlcm5hbCBtb2RlbCBjaGFuZ2VzIFxuICAgICAgc2NvcGUuJHdhdGNoQ29sbGVjdGlvbihmdW5jdGlvbigpeyByZXR1cm4gbmdNb2RlbC4kbW9kZWxWYWx1ZTsgfSwgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIGlmIChvbGRWYWx1ZSAhPSBuZXdWYWx1ZSl7XG4gICAgICAgICAgbmdNb2RlbC4kbW9kZWxWYWx1ZSA9IG51bGw7IC8vRm9yY2Ugc2NvcGUgbW9kZWwgdmFsdWUgYW5kIG5nTW9kZWwgdmFsdWUgdG8gYmUgb3V0IG9mIHN5bmMgdG8gcmUtcnVuIGZvcm1hdHRlcnNcbiAgICAgICAgICAkc2VsZWN0TXVsdGlwbGUucmVmcmVzaENvbXBvbmVudCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbmdNb2RlbC4kcmVuZGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IG1vZGVsIHZhbHVlIGlzIGFycmF5XG4gICAgICAgIGlmKCFhbmd1bGFyLmlzQXJyYXkobmdNb2RlbC4kdmlld1ZhbHVlKSl7XG4gICAgICAgICAgLy8gSGF2ZSB0b2xlcmFuY2UgZm9yIG51bGwgb3IgdW5kZWZpbmVkIHZhbHVlc1xuICAgICAgICAgIGlmKGFuZ3VsYXIuaXNVbmRlZmluZWQobmdNb2RlbC4kdmlld1ZhbHVlKSB8fCBuZ01vZGVsLiR2aWV3VmFsdWUgPT09IG51bGwpe1xuICAgICAgICAgICAgJHNlbGVjdC5zZWxlY3RlZCA9IFtdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyB1aVNlbGVjdE1pbkVycignbXVsdGlhcnInLCBcIkV4cGVjdGVkIG1vZGVsIHZhbHVlIHRvIGJlIGFycmF5IGJ1dCBnb3QgJ3swfSdcIiwgbmdNb2RlbC4kdmlld1ZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJHNlbGVjdC5zZWxlY3RlZCA9IG5nTW9kZWwuJHZpZXdWYWx1ZTtcbiAgICAgICAgc2NvcGUuJGV2YWxBc3luYygpOyAvL1RvIGZvcmNlICRkaWdlc3RcbiAgICAgIH07XG5cbiAgICAgIHNjb3BlLiRvbigndWlzOnNlbGVjdCcsIGZ1bmN0aW9uIChldmVudCwgaXRlbSkge1xuICAgICAgICBpZigkc2VsZWN0LnNlbGVjdGVkLmxlbmd0aCA+PSAkc2VsZWN0LmxpbWl0KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgICRzZWxlY3Quc2VsZWN0ZWQucHVzaChpdGVtKTtcbiAgICAgICAgJHNlbGVjdE11bHRpcGxlLnVwZGF0ZU1vZGVsKCk7XG4gICAgICB9KTtcblxuICAgICAgc2NvcGUuJG9uKCd1aXM6YWN0aXZhdGUnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICRzZWxlY3RNdWx0aXBsZS5hY3RpdmVNYXRjaEluZGV4ID0gLTE7XG4gICAgICB9KTtcblxuICAgICAgc2NvcGUuJHdhdGNoKCckc2VsZWN0LmRpc2FibGVkJywgZnVuY3Rpb24obmV3VmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgICAgIC8vIEFzIHRoZSBzZWFyY2ggaW5wdXQgZmllbGQgbWF5IG5vdyBiZWNvbWUgdmlzaWJsZSwgaXQgbWF5IGJlIG5lY2Vzc2FyeSB0byByZWNvbXB1dGUgaXRzIHNpemVcbiAgICAgICAgaWYgKG9sZFZhbHVlICYmICFuZXdWYWx1ZSkgJHNlbGVjdC5zaXplU2VhcmNoSW5wdXQoKTtcbiAgICAgIH0pO1xuXG4gICAgICAkc2VsZWN0LnNlYXJjaElucHV0Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZSkge1xuICAgICAgICB2YXIga2V5ID0gZS53aGljaDtcbiAgICAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHZhciBwcm9jZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgICAvLyB2YXIgdGFnZ2VkID0gZmFsc2U7IC8vQ2hlY2ttZVxuICAgICAgICAgIGlmKEtFWS5pc0hvcml6b250YWxNb3ZlbWVudChrZXkpKXtcbiAgICAgICAgICAgIHByb2Nlc3NlZCA9IF9oYW5kbGVNYXRjaFNlbGVjdGlvbihrZXkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocHJvY2Vzc2VkICAmJiBrZXkgIT0gS0VZLlRBQikge1xuICAgICAgICAgICAgLy9UT0RPIENoZWNrIHNpIGVsIHRhYiBzZWxlY2Npb25hIGF1biBjb3JyZWN0YW1lbnRlXG4gICAgICAgICAgICAvL0NyZWFyIHRlc3RcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZnVuY3Rpb24gX2dldENhcmV0UG9zaXRpb24oZWwpIHtcbiAgICAgICAgaWYoYW5ndWxhci5pc051bWJlcihlbC5zZWxlY3Rpb25TdGFydCkpIHJldHVybiBlbC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgLy8gc2VsZWN0aW9uU3RhcnQgaXMgbm90IHN1cHBvcnRlZCBpbiBJRTggYW5kIHdlIGRvbid0IHdhbnQgaGFja3kgd29ya2Fyb3VuZHMgc28gd2UgY29tcHJvbWlzZVxuICAgICAgICBlbHNlIHJldHVybiBlbC52YWx1ZS5sZW5ndGg7XG4gICAgICB9XG4gICAgICAvLyBIYW5kbGVzIHNlbGVjdGVkIG9wdGlvbnMgaW4gXCJtdWx0aXBsZVwiIG1vZGVcbiAgICAgIGZ1bmN0aW9uIF9oYW5kbGVNYXRjaFNlbGVjdGlvbihrZXkpe1xuICAgICAgICB2YXIgY2FyZXRQb3NpdGlvbiA9IF9nZXRDYXJldFBvc2l0aW9uKCRzZWxlY3Quc2VhcmNoSW5wdXRbMF0pLFxuICAgICAgICAgICAgbGVuZ3RoID0gJHNlbGVjdC5zZWxlY3RlZC5sZW5ndGgsXG4gICAgICAgICAgICAvLyBub25lICA9IC0xLFxuICAgICAgICAgICAgZmlyc3QgPSAwLFxuICAgICAgICAgICAgbGFzdCAgPSBsZW5ndGgtMSxcbiAgICAgICAgICAgIGN1cnIgID0gJHNlbGVjdE11bHRpcGxlLmFjdGl2ZU1hdGNoSW5kZXgsXG4gICAgICAgICAgICBuZXh0ICA9ICRzZWxlY3RNdWx0aXBsZS5hY3RpdmVNYXRjaEluZGV4KzEsXG4gICAgICAgICAgICBwcmV2ICA9ICRzZWxlY3RNdWx0aXBsZS5hY3RpdmVNYXRjaEluZGV4LTEsXG4gICAgICAgICAgICBuZXdJbmRleCA9IGN1cnI7XG5cbiAgICAgICAgaWYoY2FyZXRQb3NpdGlvbiA+IDAgfHwgKCRzZWxlY3Quc2VhcmNoLmxlbmd0aCAmJiBrZXkgPT0gS0VZLlJJR0hUKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICRzZWxlY3QuY2xvc2UoKTtcblxuICAgICAgICBmdW5jdGlvbiBnZXROZXdBY3RpdmVNYXRjaEluZGV4KCl7XG4gICAgICAgICAgc3dpdGNoKGtleSl7XG4gICAgICAgICAgICBjYXNlIEtFWS5MRUZUOlxuICAgICAgICAgICAgICAvLyBTZWxlY3QgcHJldmlvdXMvZmlyc3QgaXRlbVxuICAgICAgICAgICAgICBpZih+JHNlbGVjdE11bHRpcGxlLmFjdGl2ZU1hdGNoSW5kZXgpIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICAvLyBTZWxlY3QgbGFzdCBpdGVtXG4gICAgICAgICAgICAgIGVsc2UgcmV0dXJuIGxhc3Q7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBLRVkuUklHSFQ6XG4gICAgICAgICAgICAgIC8vIE9wZW4gZHJvcC1kb3duXG4gICAgICAgICAgICAgIGlmKCF+JHNlbGVjdE11bHRpcGxlLmFjdGl2ZU1hdGNoSW5kZXggfHwgY3VyciA9PT0gbGFzdCl7XG4gICAgICAgICAgICAgICAgJHNlbGVjdC5hY3RpdmF0ZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAvLyBTZWxlY3QgbmV4dC9sYXN0IGl0ZW1cbiAgICAgICAgICAgICAgZWxzZSByZXR1cm4gbmV4dDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtFWS5CQUNLU1BBQ0U6XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSBzZWxlY3RlZCBpdGVtIGFuZCBzZWxlY3QgcHJldmlvdXMvZmlyc3RcbiAgICAgICAgICAgICAgaWYofiRzZWxlY3RNdWx0aXBsZS5hY3RpdmVNYXRjaEluZGV4KXtcbiAgICAgICAgICAgICAgICAkc2VsZWN0TXVsdGlwbGUucmVtb3ZlQ2hvaWNlKGN1cnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vIFNlbGVjdCBsYXN0IGl0ZW1cbiAgICAgICAgICAgICAgZWxzZSByZXR1cm4gbGFzdDtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIEtFWS5ERUxFVEU6XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSBzZWxlY3RlZCBpdGVtIGFuZCBzZWxlY3QgbmV4dCBpdGVtXG4gICAgICAgICAgICAgIGlmKH4kc2VsZWN0TXVsdGlwbGUuYWN0aXZlTWF0Y2hJbmRleCl7XG4gICAgICAgICAgICAgICAgJHNlbGVjdE11bHRpcGxlLnJlbW92ZUNob2ljZSgkc2VsZWN0TXVsdGlwbGUuYWN0aXZlTWF0Y2hJbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbmV3SW5kZXggPSBnZXROZXdBY3RpdmVNYXRjaEluZGV4KCk7XG5cbiAgICAgICAgaWYoISRzZWxlY3Quc2VsZWN0ZWQubGVuZ3RoIHx8IG5ld0luZGV4ID09PSBmYWxzZSkgJHNlbGVjdE11bHRpcGxlLmFjdGl2ZU1hdGNoSW5kZXggPSAtMTtcbiAgICAgICAgZWxzZSAkc2VsZWN0TXVsdGlwbGUuYWN0aXZlTWF0Y2hJbmRleCA9IE1hdGgubWluKGxhc3QsTWF0aC5tYXgoZmlyc3QsbmV3SW5kZXgpKTtcblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgJHNlbGVjdC5zZWFyY2hJbnB1dC5vbigna2V5dXAnLCBmdW5jdGlvbihlKSB7XG5cbiAgICAgICAgaWYgKCAhIEtFWS5pc1ZlcnRpY2FsTW92ZW1lbnQoZS53aGljaCkgKSB7XG4gICAgICAgICAgc2NvcGUuJGV2YWxBc3luYyggZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNlbGVjdC5hY3RpdmVJbmRleCA9ICRzZWxlY3QudGFnZ2luZ0xhYmVsID09PSBmYWxzZSA/IC0xIDogMDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBQdXNoIGEgXCJjcmVhdGUgbmV3XCIgaXRlbSBpbnRvIGFycmF5IGlmIHRoZXJlIGlzIGEgc2VhcmNoIHN0cmluZ1xuICAgICAgICBpZiAoICRzZWxlY3QudGFnZ2luZy5pc0FjdGl2YXRlZCAmJiAkc2VsZWN0LnNlYXJjaC5sZW5ndGggPiAwICkge1xuXG4gICAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGggdGhlc2Uga2V5c1xuICAgICAgICAgIGlmIChlLndoaWNoID09PSBLRVkuVEFCIHx8IEtFWS5pc0NvbnRyb2woZSkgfHwgS0VZLmlzRnVuY3Rpb25LZXkoZSkgfHwgZS53aGljaCA9PT0gS0VZLkVTQyB8fCBLRVkuaXNWZXJ0aWNhbE1vdmVtZW50KGUud2hpY2gpICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBhbHdheXMgcmVzZXQgdGhlIGFjdGl2ZUluZGV4IHRvIHRoZSBmaXJzdCBpdGVtIHdoZW4gdGFnZ2luZ1xuICAgICAgICAgICRzZWxlY3QuYWN0aXZlSW5kZXggPSAkc2VsZWN0LnRhZ2dpbmdMYWJlbCA9PT0gZmFsc2UgPyAtMSA6IDA7XG4gICAgICAgICAgLy8gdGFnZ2luZ0xhYmVsID09PSBmYWxzZSBieXBhc3NlcyBhbGwgb2YgdGhpc1xuICAgICAgICAgIGlmICgkc2VsZWN0LnRhZ2dpbmdMYWJlbCA9PT0gZmFsc2UpIHJldHVybjtcblxuICAgICAgICAgIHZhciBpdGVtcyA9IGFuZ3VsYXIuY29weSggJHNlbGVjdC5pdGVtcyApO1xuICAgICAgICAgIHZhciBzdGFzaEFyciA9IGFuZ3VsYXIuY29weSggJHNlbGVjdC5pdGVtcyApO1xuICAgICAgICAgIHZhciBuZXdJdGVtO1xuICAgICAgICAgIHZhciBpdGVtO1xuICAgICAgICAgIHZhciBoYXNUYWcgPSBmYWxzZTtcbiAgICAgICAgICB2YXIgZHVwZUluZGV4ID0gLTE7XG4gICAgICAgICAgdmFyIHRhZ0l0ZW1zO1xuICAgICAgICAgIHZhciB0YWdJdGVtO1xuXG4gICAgICAgICAgLy8gY2FzZSBmb3Igb2JqZWN0IHRhZ2dpbmcgdmlhIHRyYW5zZm9ybSBgJHNlbGVjdC50YWdnaW5nLmZjdGAgZnVuY3Rpb25cbiAgICAgICAgICBpZiAoICRzZWxlY3QudGFnZ2luZy5mY3QgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGFnSXRlbXMgPSAkc2VsZWN0LiRmaWx0ZXIoJ2ZpbHRlcicpKGl0ZW1zLHsnaXNUYWcnOiB0cnVlfSk7XG4gICAgICAgICAgICBpZiAoIHRhZ0l0ZW1zLmxlbmd0aCA+IDAgKSB7XG4gICAgICAgICAgICAgIHRhZ0l0ZW0gPSB0YWdJdGVtc1swXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgZmlyc3QgZWxlbWVudCwgaWYgaXQgaGFzIHRoZSBgaXNUYWdgIHByb3Agd2UgZ2VuZXJhdGUgYSBuZXcgb25lIHdpdGggZWFjaCBrZXl1cCwgc2hhdmluZyB0aGUgcHJldmlvdXNcbiAgICAgICAgICAgIGlmICggaXRlbXMubGVuZ3RoID4gMCAmJiB0YWdJdGVtICkge1xuICAgICAgICAgICAgICBoYXNUYWcgPSB0cnVlO1xuICAgICAgICAgICAgICBpdGVtcyA9IGl0ZW1zLnNsaWNlKDEsaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgc3Rhc2hBcnIgPSBzdGFzaEFyci5zbGljZSgxLHN0YXNoQXJyLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdJdGVtID0gJHNlbGVjdC50YWdnaW5nLmZjdCgkc2VsZWN0LnNlYXJjaCk7XG4gICAgICAgICAgICBuZXdJdGVtLmlzVGFnID0gdHJ1ZTtcbiAgICAgICAgICAgIC8vIHZlcmlmeSB0aGUgdGhlIHRhZyBkb2Vzbid0IG1hdGNoIHRoZSB2YWx1ZSBvZiBhbiBleGlzdGluZyBpdGVtXG4gICAgICAgICAgICBpZiAoIHN0YXNoQXJyLmZpbHRlciggZnVuY3Rpb24gKG9yaWdJdGVtKSB7IHJldHVybiBhbmd1bGFyLmVxdWFscyggb3JpZ0l0ZW0sICRzZWxlY3QudGFnZ2luZy5mY3QoJHNlbGVjdC5zZWFyY2gpICk7IH0gKS5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdJdGVtLmlzVGFnID0gdHJ1ZTtcbiAgICAgICAgICAvLyBoYW5kbGUgbmV3SXRlbSBzdHJpbmcgYW5kIHN0cmlwcGluZyBkdXBlcyBpbiB0YWdnaW5nIHN0cmluZyBjb250ZXh0XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGZpbmQgYW55IHRhZ2dpbmcgaXRlbXMgYWxyZWFkeSBpbiB0aGUgJHNlbGVjdC5pdGVtcyBhcnJheSBhbmQgc3RvcmUgdGhlbVxuICAgICAgICAgICAgdGFnSXRlbXMgPSAkc2VsZWN0LiRmaWx0ZXIoJ2ZpbHRlcicpKGl0ZW1zLGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpdGVtLm1hdGNoKCRzZWxlY3QudGFnZ2luZ0xhYmVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCB0YWdJdGVtcy5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICB0YWdJdGVtID0gdGFnSXRlbXNbMF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtID0gaXRlbXNbMF07XG4gICAgICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmcgdGFnIGl0ZW0gaWYgZm91bmQgKHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIHRhZyBpdGVtKVxuICAgICAgICAgICAgaWYgKCBpdGVtICE9PSB1bmRlZmluZWQgJiYgaXRlbXMubGVuZ3RoID4gMCAmJiB0YWdJdGVtICkge1xuICAgICAgICAgICAgICBoYXNUYWcgPSB0cnVlO1xuICAgICAgICAgICAgICBpdGVtcyA9IGl0ZW1zLnNsaWNlKDEsaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgc3Rhc2hBcnIgPSBzdGFzaEFyci5zbGljZSgxLHN0YXNoQXJyLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZXdJdGVtID0gJHNlbGVjdC5zZWFyY2grJyAnKyRzZWxlY3QudGFnZ2luZ0xhYmVsO1xuICAgICAgICAgICAgaWYgKCBfZmluZEFwcHJveER1cGUoJHNlbGVjdC5zZWxlY3RlZCwgJHNlbGVjdC5zZWFyY2gpID4gLTEgKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHZlcmlmeSB0aGUgdGhlIHRhZyBkb2Vzbid0IG1hdGNoIHRoZSB2YWx1ZSBvZiBhbiBleGlzdGluZyBpdGVtIGZyb21cbiAgICAgICAgICAgIC8vIHRoZSBzZWFyY2hlZCBkYXRhIHNldCBvciB0aGUgaXRlbXMgYWxyZWFkeSBzZWxlY3RlZFxuICAgICAgICAgICAgaWYgKCBfZmluZENhc2VJbnNlbnNpdGl2ZUR1cGUoc3Rhc2hBcnIuY29uY2F0KCRzZWxlY3Quc2VsZWN0ZWQpKSApIHtcbiAgICAgICAgICAgICAgLy8gaWYgdGhlcmUgaXMgYSB0YWcgZnJvbSBwcmV2IGl0ZXJhdGlvbiwgc3RyaXAgaXQgLyBxdWV1ZSB0aGUgY2hhbmdlXG4gICAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gZWFybHlcbiAgICAgICAgICAgICAgaWYgKCBoYXNUYWcgKSB7XG4gICAgICAgICAgICAgICAgaXRlbXMgPSBzdGFzaEFycjtcbiAgICAgICAgICAgICAgICBzY29wZS4kZXZhbEFzeW5jKCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAkc2VsZWN0LmFjdGl2ZUluZGV4ID0gMDtcbiAgICAgICAgICAgICAgICAgICRzZWxlY3QuaXRlbXMgPSBpdGVtcztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIF9maW5kQ2FzZUluc2Vuc2l0aXZlRHVwZShzdGFzaEFycikgKSB7XG4gICAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGEgdGFnIGZyb20gcHJldiBpdGVyYXRpb24sIHN0cmlwIGl0XG4gICAgICAgICAgICAgIGlmICggaGFzVGFnICkge1xuICAgICAgICAgICAgICAgICRzZWxlY3QuaXRlbXMgPSBzdGFzaEFyci5zbGljZSgxLHN0YXNoQXJyLmxlbmd0aCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIGhhc1RhZyApIGR1cGVJbmRleCA9IF9maW5kQXBwcm94RHVwZSgkc2VsZWN0LnNlbGVjdGVkLCBuZXdJdGVtKTtcbiAgICAgICAgICAvLyBkdXBlIGZvdW5kLCBzaGF2ZSB0aGUgZmlyc3QgaXRlbVxuICAgICAgICAgIGlmICggZHVwZUluZGV4ID4gLTEgKSB7XG4gICAgICAgICAgICBpdGVtcyA9IGl0ZW1zLnNsaWNlKGR1cGVJbmRleCsxLGl0ZW1zLmxlbmd0aC0xKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaXRlbXMgPSBbXTtcbiAgICAgICAgICAgIGl0ZW1zLnB1c2gobmV3SXRlbSk7XG4gICAgICAgICAgICBpdGVtcyA9IGl0ZW1zLmNvbmNhdChzdGFzaEFycik7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNjb3BlLiRldmFsQXN5bmMoIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzZWxlY3QuYWN0aXZlSW5kZXggPSAwO1xuICAgICAgICAgICAgJHNlbGVjdC5pdGVtcyA9IGl0ZW1zO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGZ1bmN0aW9uIF9maW5kQ2FzZUluc2Vuc2l0aXZlRHVwZShhcnIpIHtcbiAgICAgICAgaWYgKCBhcnIgPT09IHVuZGVmaW5lZCB8fCAkc2VsZWN0LnNlYXJjaCA9PT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFzRHVwZSA9IGFyci5maWx0ZXIoIGZ1bmN0aW9uIChvcmlnSXRlbSkge1xuICAgICAgICAgIGlmICggJHNlbGVjdC5zZWFyY2gudG9VcHBlckNhc2UoKSA9PT0gdW5kZWZpbmVkIHx8IG9yaWdJdGVtID09PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBvcmlnSXRlbS50b1VwcGVyQ2FzZSgpID09PSAkc2VsZWN0LnNlYXJjaC50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9KS5sZW5ndGggPiAwO1xuXG4gICAgICAgIHJldHVybiBoYXNEdXBlO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gX2ZpbmRBcHByb3hEdXBlKGhheXN0YWNrLCBuZWVkbGUpIHtcbiAgICAgICAgdmFyIGR1cGVJbmRleCA9IC0xO1xuICAgICAgICBpZihhbmd1bGFyLmlzQXJyYXkoaGF5c3RhY2spKSB7XG4gICAgICAgICAgdmFyIHRlbXBBcnIgPSBhbmd1bGFyLmNvcHkoaGF5c3RhY2spO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDx0ZW1wQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyBoYW5kbGUgdGhlIHNpbXBsZSBzdHJpbmcgdmVyc2lvbiBvZiB0YWdnaW5nXG4gICAgICAgICAgICBpZiAoICRzZWxlY3QudGFnZ2luZy5mY3QgPT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgICAgICAgLy8gc2VhcmNoIHRoZSBhcnJheSBmb3IgdGhlIG1hdGNoXG4gICAgICAgICAgICAgIGlmICggdGVtcEFycltpXSsnICcrJHNlbGVjdC50YWdnaW5nTGFiZWwgPT09IG5lZWRsZSApIHtcbiAgICAgICAgICAgICAgZHVwZUluZGV4ID0gaTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaGFuZGxlIHRoZSBvYmplY3QgdGFnZ2luZyBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIG1vY2tPYmogPSB0ZW1wQXJyW2ldO1xuICAgICAgICAgICAgICBpZiAoYW5ndWxhci5pc09iamVjdChtb2NrT2JqKSkge1xuICAgICAgICAgICAgICAgIG1vY2tPYmouaXNUYWcgPSB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICggYW5ndWxhci5lcXVhbHMobW9ja09iaiwgbmVlZGxlKSApIHtcbiAgICAgICAgICAgICAgICBkdXBlSW5kZXggPSBpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkdXBlSW5kZXg7XG4gICAgICB9XG5cbiAgICAgICRzZWxlY3Quc2VhcmNoSW5wdXQub24oJ2JsdXInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHNlbGVjdE11bHRpcGxlLmFjdGl2ZU1hdGNoSW5kZXggPSAtMTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIH1cbiAgfTtcbn1dKTtcblxudWlzLmRpcmVjdGl2ZSgndWlTZWxlY3RTaW5nbGUnLCBbJyR0aW1lb3V0JywnJGNvbXBpbGUnLCBmdW5jdGlvbigkdGltZW91dCwgJGNvbXBpbGUpIHtcbiAgcmV0dXJuIHtcbiAgICByZXN0cmljdDogJ0VBJyxcbiAgICByZXF1aXJlOiBbJ151aVNlbGVjdCcsICdebmdNb2RlbCddLFxuICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcblxuICAgICAgdmFyICRzZWxlY3QgPSBjdHJsc1swXTtcbiAgICAgIHZhciBuZ01vZGVsID0gY3RybHNbMV07XG5cbiAgICAgIC8vRnJvbSB2aWV3IC0tPiBtb2RlbFxuICAgICAgbmdNb2RlbC4kcGFyc2Vycy51bnNoaWZ0KGZ1bmN0aW9uIChpbnB1dFZhbHVlKSB7XG4gICAgICAgIHZhciBsb2NhbHMgPSB7fSxcbiAgICAgICAgICAgIHJlc3VsdDtcbiAgICAgICAgbG9jYWxzWyRzZWxlY3QucGFyc2VyUmVzdWx0Lml0ZW1OYW1lXSA9IGlucHV0VmFsdWU7XG4gICAgICAgIHJlc3VsdCA9ICRzZWxlY3QucGFyc2VyUmVzdWx0Lm1vZGVsTWFwcGVyKHNjb3BlLCBsb2NhbHMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG5cbiAgICAgIC8vRnJvbSBtb2RlbCAtLT4gdmlld1xuICAgICAgbmdNb2RlbC4kZm9ybWF0dGVycy51bnNoaWZ0KGZ1bmN0aW9uIChpbnB1dFZhbHVlKSB7XG4gICAgICAgIHZhciBkYXRhID0gJHNlbGVjdC5wYXJzZXJSZXN1bHQuc291cmNlIChzY29wZSwgeyAkc2VsZWN0IDoge3NlYXJjaDonJ319KSwgLy9PdmVyd3JpdGUgJHNlYXJjaFxuICAgICAgICAgICAgbG9jYWxzID0ge30sXG4gICAgICAgICAgICByZXN1bHQ7XG4gICAgICAgIGlmIChkYXRhKXtcbiAgICAgICAgICB2YXIgY2hlY2tGblNpbmdsZSA9IGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgbG9jYWxzWyRzZWxlY3QucGFyc2VyUmVzdWx0Lml0ZW1OYW1lXSA9IGQ7XG4gICAgICAgICAgICByZXN1bHQgPSAkc2VsZWN0LnBhcnNlclJlc3VsdC5tb2RlbE1hcHBlcihzY29wZSwgbG9jYWxzKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQgPT0gaW5wdXRWYWx1ZTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIC8vSWYgcG9zc2libGUgcGFzcyBzYW1lIG9iamVjdCBzdG9yZWQgaW4gJHNlbGVjdC5zZWxlY3RlZFxuICAgICAgICAgIGlmICgkc2VsZWN0LnNlbGVjdGVkICYmIGNoZWNrRm5TaW5nbGUoJHNlbGVjdC5zZWxlY3RlZCkpIHtcbiAgICAgICAgICAgIHJldHVybiAkc2VsZWN0LnNlbGVjdGVkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKHZhciBpID0gZGF0YS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgaWYgKGNoZWNrRm5TaW5nbGUoZGF0YVtpXSkpIHJldHVybiBkYXRhW2ldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZTtcbiAgICAgIH0pO1xuXG4gICAgICAvL1VwZGF0ZSB2aWV3VmFsdWUgaWYgbW9kZWwgY2hhbmdlXG4gICAgICBzY29wZS4kd2F0Y2goJyRzZWxlY3Quc2VsZWN0ZWQnLCBmdW5jdGlvbihuZXdWYWx1ZSkge1xuICAgICAgICBpZiAobmdNb2RlbC4kdmlld1ZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICAgIG5nTW9kZWwuJHNldFZpZXdWYWx1ZShuZXdWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNlbGVjdC5zZWxlY3RlZCA9IG5nTW9kZWwuJHZpZXdWYWx1ZTtcbiAgICAgIH07XG5cbiAgICAgIHNjb3BlLiRvbigndWlzOnNlbGVjdCcsIGZ1bmN0aW9uIChldmVudCwgaXRlbSkge1xuICAgICAgICAkc2VsZWN0LnNlbGVjdGVkID0gaXRlbTtcbiAgICAgIH0pO1xuXG4gICAgICBzY29wZS4kb24oJ3VpczpjbG9zZScsIGZ1bmN0aW9uIChldmVudCwgc2tpcEZvY3Vzc2VyKSB7XG4gICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgJHNlbGVjdC5mb2N1c3Nlci5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgICBpZiAoIXNraXBGb2N1c3NlcikgJHNlbGVjdC5mb2N1c3NlclswXS5mb2N1cygpO1xuICAgICAgICB9LDAsZmFsc2UpO1xuICAgICAgfSk7XG5cbiAgICAgIHNjb3BlLiRvbigndWlzOmFjdGl2YXRlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBmb2N1c3Nlci5wcm9wKCdkaXNhYmxlZCcsIHRydWUpOyAvL1dpbGwgcmVhY3RpdmF0ZSBpdCBvbiAuY2xvc2UoKVxuICAgICAgfSk7XG5cbiAgICAgIC8vSWRlYSBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaXZheW5iZXJnL3NlbGVjdDIvYmxvYi83OWI1YmY2ZGI5MThkNzU2MGJkZDk1OTEwOWI3YmNmYjQ3ZWRhZjQzL3NlbGVjdDIuanMjTDE5NTRcbiAgICAgIHZhciBmb2N1c3NlciA9IGFuZ3VsYXIuZWxlbWVudChcIjxpbnB1dCBuZy1kaXNhYmxlZD0nJHNlbGVjdC5kaXNhYmxlZCcgY2xhc3M9J3VpLXNlbGVjdC1mb2N1c3NlciB1aS1zZWxlY3Qtb2Zmc2NyZWVuJyB0eXBlPSd0ZXh0JyBpZD0ne3sgJHNlbGVjdC5mb2N1c3NlcklkIH19JyBhcmlhLWxhYmVsPSd7eyAkc2VsZWN0LmZvY3Vzc2VyVGl0bGUgfX0nIGFyaWEtaGFzcG9wdXA9J3RydWUnIHJvbGU9J2J1dHRvbicgLz5cIik7XG4gICAgICAkY29tcGlsZShmb2N1c3Nlcikoc2NvcGUpO1xuICAgICAgJHNlbGVjdC5mb2N1c3NlciA9IGZvY3Vzc2VyO1xuXG4gICAgICAvL0lucHV0IHRoYXQgd2lsbCBoYW5kbGUgZm9jdXNcbiAgICAgICRzZWxlY3QuZm9jdXNJbnB1dCA9IGZvY3Vzc2VyO1xuXG4gICAgICBlbGVtZW50LnBhcmVudCgpLmFwcGVuZChmb2N1c3Nlcik7XG4gICAgICBmb2N1c3Nlci5iaW5kKFwiZm9jdXNcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgc2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpe1xuICAgICAgICAgICRzZWxlY3QuZm9jdXMgPSB0cnVlO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgICAgZm9jdXNzZXIuYmluZChcImJsdXJcIiwgZnVuY3Rpb24oKXtcbiAgICAgICAgc2NvcGUuJGV2YWxBc3luYyhmdW5jdGlvbigpe1xuICAgICAgICAgICRzZWxlY3QuZm9jdXMgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIGZvY3Vzc2VyLmJpbmQoXCJrZXlkb3duXCIsIGZ1bmN0aW9uKGUpe1xuXG4gICAgICAgIGlmIChlLndoaWNoID09PSBLRVkuQkFDS1NQQUNFKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgJHNlbGVjdC5zZWxlY3QodW5kZWZpbmVkKTtcbiAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS53aGljaCA9PT0gS0VZLlRBQiB8fCBLRVkuaXNDb250cm9sKGUpIHx8IEtFWS5pc0Z1bmN0aW9uS2V5KGUpIHx8IGUud2hpY2ggPT09IEtFWS5FU0MpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS53aGljaCA9PSBLRVkuRE9XTiAgfHwgZS53aGljaCA9PSBLRVkuVVAgfHwgZS53aGljaCA9PSBLRVkuRU5URVIgfHwgZS53aGljaCA9PSBLRVkuU1BBQ0Upe1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICRzZWxlY3QuYWN0aXZhdGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcbiAgICAgIH0pO1xuXG4gICAgICBmb2N1c3Nlci5iaW5kKFwia2V5dXAgaW5wdXRcIiwgZnVuY3Rpb24oZSl7XG5cbiAgICAgICAgaWYgKGUud2hpY2ggPT09IEtFWS5UQUIgfHwgS0VZLmlzQ29udHJvbChlKSB8fCBLRVkuaXNGdW5jdGlvbktleShlKSB8fCBlLndoaWNoID09PSBLRVkuRVNDIHx8IGUud2hpY2ggPT0gS0VZLkVOVEVSIHx8IGUud2hpY2ggPT09IEtFWS5CQUNLU1BBQ0UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAkc2VsZWN0LmFjdGl2YXRlKGZvY3Vzc2VyLnZhbCgpKTsgLy9Vc2VyIHByZXNzZWQgc29tZSByZWd1bGFyIGtleSwgc28gd2UgcGFzcyBpdCB0byB0aGUgc2VhcmNoIGlucHV0XG4gICAgICAgIGZvY3Vzc2VyLnZhbCgnJyk7XG4gICAgICAgIHNjb3BlLiRkaWdlc3QoKTtcblxuICAgICAgfSk7XG5cblxuICAgIH1cbiAgfTtcbn1dKTtcbi8vIE1ha2UgbXVsdGlwbGUgbWF0Y2hlcyBzb3J0YWJsZVxudWlzLmRpcmVjdGl2ZSgndWlTZWxlY3RTb3J0JywgWyckdGltZW91dCcsICd1aVNlbGVjdENvbmZpZycsICd1aVNlbGVjdE1pbkVycicsIGZ1bmN0aW9uKCR0aW1lb3V0LCB1aVNlbGVjdENvbmZpZywgdWlTZWxlY3RNaW5FcnIpIHtcbiAgcmV0dXJuIHtcbiAgICByZXF1aXJlOiAnXl51aVNlbGVjdCcsXG4gICAgbGluazogZnVuY3Rpb24oc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCAkc2VsZWN0KSB7XG4gICAgICBpZiAoc2NvcGVbYXR0cnMudWlTZWxlY3RTb3J0XSA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyB1aVNlbGVjdE1pbkVycignc29ydCcsICdFeHBlY3RlZCBhIGxpc3QgdG8gc29ydCcpO1xuICAgICAgfVxuXG4gICAgICB2YXIgb3B0aW9ucyA9IGFuZ3VsYXIuZXh0ZW5kKHtcbiAgICAgICAgICBheGlzOiAnaG9yaXpvbnRhbCdcbiAgICAgICAgfSxcbiAgICAgICAgc2NvcGUuJGV2YWwoYXR0cnMudWlTZWxlY3RTb3J0T3B0aW9ucykpO1xuXG4gICAgICB2YXIgYXhpcyA9IG9wdGlvbnMuYXhpcztcbiAgICAgIHZhciBkcmFnZ2luZ0NsYXNzTmFtZSA9ICdkcmFnZ2luZyc7XG4gICAgICB2YXIgZHJvcHBpbmdDbGFzc05hbWUgPSAnZHJvcHBpbmcnO1xuICAgICAgdmFyIGRyb3BwaW5nQmVmb3JlQ2xhc3NOYW1lID0gJ2Ryb3BwaW5nLWJlZm9yZSc7XG4gICAgICB2YXIgZHJvcHBpbmdBZnRlckNsYXNzTmFtZSA9ICdkcm9wcGluZy1hZnRlcic7XG5cbiAgICAgIHNjb3BlLiR3YXRjaChmdW5jdGlvbigpe1xuICAgICAgICByZXR1cm4gJHNlbGVjdC5zb3J0YWJsZTtcbiAgICAgIH0sIGZ1bmN0aW9uKG5ld1ZhbHVlKXtcbiAgICAgICAgaWYgKG5ld1ZhbHVlKSB7XG4gICAgICAgICAgZWxlbWVudC5hdHRyKCdkcmFnZ2FibGUnLCB0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUF0dHIoJ2RyYWdnYWJsZScpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgZWxlbWVudC5vbignZHJhZ3N0YXJ0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhkcmFnZ2luZ0NsYXNzTmFtZSk7XG5cbiAgICAgICAgKGV2ZW50LmRhdGFUcmFuc2ZlciB8fCBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlcikuc2V0RGF0YSgndGV4dC9wbGFpbicsIHNjb3BlLiRpbmRleCk7XG4gICAgICB9KTtcblxuICAgICAgZWxlbWVudC5vbignZHJhZ2VuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGRyYWdnaW5nQ2xhc3NOYW1lKTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgbW92ZSA9IGZ1bmN0aW9uKGZyb20sIHRvKSB7XG4gICAgICAgIC8qanNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgICAgICB0aGlzLnNwbGljZSh0bywgMCwgdGhpcy5zcGxpY2UoZnJvbSwgMSlbMF0pO1xuICAgICAgfTtcblxuICAgICAgdmFyIGRyYWdPdmVySGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIG9mZnNldCA9IGF4aXMgPT09ICd2ZXJ0aWNhbCcgPyBldmVudC5vZmZzZXRZIHx8IGV2ZW50LmxheWVyWSB8fCAoZXZlbnQub3JpZ2luYWxFdmVudCA/IGV2ZW50Lm9yaWdpbmFsRXZlbnQub2Zmc2V0WSA6IDApIDogZXZlbnQub2Zmc2V0WCB8fCBldmVudC5sYXllclggfHwgKGV2ZW50Lm9yaWdpbmFsRXZlbnQgPyBldmVudC5vcmlnaW5hbEV2ZW50Lm9mZnNldFggOiAwKTtcblxuICAgICAgICBpZiAob2Zmc2V0IDwgKHRoaXNbYXhpcyA9PT0gJ3ZlcnRpY2FsJyA/ICdvZmZzZXRIZWlnaHQnIDogJ29mZnNldFdpZHRoJ10gLyAyKSkge1xuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoZHJvcHBpbmdBZnRlckNsYXNzTmFtZSk7XG4gICAgICAgICAgZWxlbWVudC5hZGRDbGFzcyhkcm9wcGluZ0JlZm9yZUNsYXNzTmFtZSk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGRyb3BwaW5nQmVmb3JlQ2xhc3NOYW1lKTtcbiAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKGRyb3BwaW5nQWZ0ZXJDbGFzc05hbWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgZHJvcFRpbWVvdXQ7XG5cbiAgICAgIHZhciBkcm9wSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGRyb3BwZWRJdGVtSW5kZXggPSBwYXJzZUludCgoZXZlbnQuZGF0YVRyYW5zZmVyIHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyKS5nZXREYXRhKCd0ZXh0L3BsYWluJyksIDEwKTtcblxuICAgICAgICAvLyBwcmV2ZW50IGV2ZW50IGZpcmluZyBtdWx0aXBsZSB0aW1lcyBpbiBmaXJlZm94XG4gICAgICAgICR0aW1lb3V0LmNhbmNlbChkcm9wVGltZW91dCk7XG4gICAgICAgIGRyb3BUaW1lb3V0ID0gJHRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX2Ryb3BIYW5kbGVyKGRyb3BwZWRJdGVtSW5kZXgpO1xuICAgICAgICB9LCAyMCk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgX2Ryb3BIYW5kbGVyID0gZnVuY3Rpb24oZHJvcHBlZEl0ZW1JbmRleCkge1xuICAgICAgICB2YXIgdGhlTGlzdCA9IHNjb3BlLiRldmFsKGF0dHJzLnVpU2VsZWN0U29ydCk7XG4gICAgICAgIHZhciBpdGVtVG9Nb3ZlID0gdGhlTGlzdFtkcm9wcGVkSXRlbUluZGV4XTtcbiAgICAgICAgdmFyIG5ld0luZGV4ID0gbnVsbDtcblxuICAgICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcyhkcm9wcGluZ0JlZm9yZUNsYXNzTmFtZSkpIHtcbiAgICAgICAgICBpZiAoZHJvcHBlZEl0ZW1JbmRleCA8IHNjb3BlLiRpbmRleCkge1xuICAgICAgICAgICAgbmV3SW5kZXggPSBzY29wZS4kaW5kZXggLSAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdJbmRleCA9IHNjb3BlLiRpbmRleDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGRyb3BwZWRJdGVtSW5kZXggPCBzY29wZS4kaW5kZXgpIHtcbiAgICAgICAgICAgIG5ld0luZGV4ID0gc2NvcGUuJGluZGV4O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdJbmRleCA9IHNjb3BlLiRpbmRleCArIDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbW92ZS5hcHBseSh0aGVMaXN0LCBbZHJvcHBlZEl0ZW1JbmRleCwgbmV3SW5kZXhdKTtcblxuICAgICAgICBzY29wZS4kYXBwbHkoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2NvcGUuJGVtaXQoJ3VpU2VsZWN0U29ydDpjaGFuZ2UnLCB7XG4gICAgICAgICAgICBhcnJheTogdGhlTGlzdCxcbiAgICAgICAgICAgIGl0ZW06IGl0ZW1Ub01vdmUsXG4gICAgICAgICAgICBmcm9tOiBkcm9wcGVkSXRlbUluZGV4LFxuICAgICAgICAgICAgdG86IG5ld0luZGV4XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoZHJvcHBpbmdDbGFzc05hbWUpO1xuICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGRyb3BwaW5nQmVmb3JlQ2xhc3NOYW1lKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhkcm9wcGluZ0FmdGVyQ2xhc3NOYW1lKTtcblxuICAgICAgICBlbGVtZW50Lm9mZignZHJvcCcsIGRyb3BIYW5kbGVyKTtcbiAgICAgIH07XG5cbiAgICAgIGVsZW1lbnQub24oJ2RyYWdlbnRlcicsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoZWxlbWVudC5oYXNDbGFzcyhkcmFnZ2luZ0NsYXNzTmFtZSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LmFkZENsYXNzKGRyb3BwaW5nQ2xhc3NOYW1lKTtcblxuICAgICAgICBlbGVtZW50Lm9uKCdkcmFnb3ZlcicsIGRyYWdPdmVySGFuZGxlcik7XG4gICAgICAgIGVsZW1lbnQub24oJ2Ryb3AnLCBkcm9wSGFuZGxlcik7XG4gICAgICB9KTtcblxuICAgICAgZWxlbWVudC5vbignZHJhZ2xlYXZlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgaWYgKGV2ZW50LnRhcmdldCAhPSBlbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoZHJvcHBpbmdDbGFzc05hbWUpO1xuICAgICAgICBlbGVtZW50LnJlbW92ZUNsYXNzKGRyb3BwaW5nQmVmb3JlQ2xhc3NOYW1lKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhkcm9wcGluZ0FmdGVyQ2xhc3NOYW1lKTtcblxuICAgICAgICBlbGVtZW50Lm9mZignZHJhZ292ZXInLCBkcmFnT3ZlckhhbmRsZXIpO1xuICAgICAgICBlbGVtZW50Lm9mZignZHJvcCcsIGRyb3BIYW5kbGVyKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1dKTtcblxuLyoqXG4gKiBQYXJzZXMgXCJyZXBlYXRcIiBhdHRyaWJ1dGUuXG4gKlxuICogVGFrZW4gZnJvbSBBbmd1bGFySlMgbmdSZXBlYXQgc291cmNlIGNvZGVcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci9hbmd1bGFyLmpzL2Jsb2IvdjEuMi4xNS9zcmMvbmcvZGlyZWN0aXZlL25nUmVwZWF0LmpzI0wyMTFcbiAqXG4gKiBPcmlnaW5hbCBkaXNjdXNzaW9uIGFib3V0IHBhcnNpbmcgXCJyZXBlYXRcIiBhdHRyaWJ1dGUgaW5zdGVhZCBvZiBmdWxseSByZWx5aW5nIG9uIG5nLXJlcGVhdDpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9hbmd1bGFyLXVpL3VpLXNlbGVjdC9jb21taXQvNWRkNjNhZCNjb21taXRjb21tZW50LTU1MDQ2OTdcbiAqL1xuXG51aXMuc2VydmljZSgndWlzUmVwZWF0UGFyc2VyJywgWyd1aVNlbGVjdE1pbkVycicsJyRwYXJzZScsIGZ1bmN0aW9uKHVpU2VsZWN0TWluRXJyLCAkcGFyc2UpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gIC8qKlxuICAgKiBFeGFtcGxlOlxuICAgKiBleHByZXNzaW9uID0gXCJhZGRyZXNzIGluIGFkZHJlc3NlcyB8IGZpbHRlcjoge3N0cmVldDogJHNlbGVjdC5zZWFyY2h9IHRyYWNrIGJ5ICRpbmRleFwiXG4gICAqIGl0ZW1OYW1lID0gXCJhZGRyZXNzXCIsXG4gICAqIHNvdXJjZSA9IFwiYWRkcmVzc2VzIHwgZmlsdGVyOiB7c3RyZWV0OiAkc2VsZWN0LnNlYXJjaH1cIixcbiAgICogdHJhY2tCeUV4cCA9IFwiJGluZGV4XCIsXG4gICAqL1xuICBzZWxmLnBhcnNlID0gZnVuY3Rpb24oZXhwcmVzc2lvbikge1xuXG5cbiAgICB2YXIgbWF0Y2g7XG4gICAgdmFyIGlzT2JqZWN0Q29sbGVjdGlvbiA9IC9cXChcXHMqKFtcXCRcXHddW1xcJFxcd10qKVxccyosXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqXFwpLy50ZXN0KGV4cHJlc3Npb24pO1xuICAgIC8vIElmIGFuIGFycmF5IGlzIHVzZWQgYXMgY29sbGVjdGlvblxuXG4gICAgLy8gaWYgKGlzT2JqZWN0Q29sbGVjdGlvbil7XG4gICAgICAvLzAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTExMTExMTExMDAwMDAwMDAwMDAwMDAwMjIyMjIyMjIyMjIyMjIwMDMzMzMzMzMzMzMzMzMzMzMzMzMzMzMwMDAwNDQ0NDQ0NDQ0NDQ0NDQ0NDQ0MDAwMDAwMDAwMDAwMDAwNTU2NjY2NjYwMDAwMDc3Nzc3Nzc3Nzc3NzU1MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODgwMDAwMDAwXG4gICAgbWF0Y2ggPSBleHByZXNzaW9uLm1hdGNoKC9eXFxzKig/OihbXFxzXFxTXSs/KVxccythc1xccyspPyg/OihbXFwkXFx3XVtcXCRcXHddKil8KD86XFwoXFxzKihbXFwkXFx3XVtcXCRcXHddKilcXHMqLFxccyooW1xcJFxcd11bXFwkXFx3XSopXFxzKlxcKSkpXFxzK2luXFxzKygoW1xcd1xcLl0rKT9cXHMqKHxcXHMqW1xcc1xcU10rPykpPyg/Olxccyt0cmFja1xccytieVxccysoW1xcc1xcU10rPykpP1xccyokLyk7ICAgICAgXG5cbiAgICAvLyAxIEFsaWFzXG4gICAgLy8gMiBJdGVtXG4gICAgLy8gMyBLZXkgb24gKGtleSx2YWx1ZSlcbiAgICAvLyA0IFZhbHVlIG9uIChrZXksdmFsdWUpXG4gICAgLy8gNSBDb2xsZWN0aW9uIGV4cHJlc2lvbiAob25seSB1c2VkIHdoZW4gdXNpbmcgYW4gYXJyYXkgY29sbGVjdGlvbilcbiAgICAvLyA2IE9iamVjdCB0aGF0IHdpbGwgYmUgY29udmVydGVkIHRvIEFycmF5IHdoZW4gdXNpbmcgKGtleSx2YWx1ZSkgc3ludGF4XG4gICAgLy8gNyBGaWx0ZXJzIHRoYXQgd2lsbCBiZSBhcHBsaWVkIHRvICM2IHdoZW4gdXNpbmcgKGtleSx2YWx1ZSkgc3ludGF4XG4gICAgLy8gOCBUcmFjayBieVxuXG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgdGhyb3cgdWlTZWxlY3RNaW5FcnIoJ2lleHAnLCBcIkV4cGVjdGVkIGV4cHJlc3Npb24gaW4gZm9ybSBvZiAnX2l0ZW1fIGluIF9jb2xsZWN0aW9uX1sgdHJhY2sgYnkgX2lkX10nIGJ1dCBnb3QgJ3swfScuXCIsXG4gICAgICAgICAgICAgIGV4cHJlc3Npb24pO1xuICAgIH1cbiAgICBpZiAoIW1hdGNoWzZdICYmIGlzT2JqZWN0Q29sbGVjdGlvbikge1xuICAgICAgdGhyb3cgdWlTZWxlY3RNaW5FcnIoJ2lleHAnLCBcIkV4cGVjdGVkIGV4cHJlc3Npb24gaW4gZm9ybSBvZiAnX2l0ZW1fIGFzIChfa2V5XywgX2l0ZW1fKSBpbiBfT2JqQ29sbGVjdGlvbl8gWyB0cmFjayBieSBfaWRfXScgYnV0IGdvdCAnezB9Jy5cIixcbiAgICAgICAgICAgICAgZXhwcmVzc2lvbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGl0ZW1OYW1lOiBtYXRjaFs0XSB8fCBtYXRjaFsyXSwgLy8gKGxocykgTGVmdC1oYW5kIHNpZGUsXG4gICAgICBrZXlOYW1lOiBtYXRjaFszXSwgLy9mb3IgKGtleSwgdmFsdWUpIHN5bnRheFxuICAgICAgc291cmNlOiAkcGFyc2UoIW1hdGNoWzNdID8gbWF0Y2hbNV0gOiBtYXRjaFs2XSksXG4gICAgICBzb3VyY2VOYW1lOiBtYXRjaFs2XSxcbiAgICAgIGZpbHRlcnM6IG1hdGNoWzddLFxuICAgICAgdHJhY2tCeUV4cDogbWF0Y2hbOF0sXG4gICAgICBtb2RlbE1hcHBlcjogJHBhcnNlKG1hdGNoWzFdIHx8IG1hdGNoWzRdIHx8IG1hdGNoWzJdKSxcbiAgICAgIHJlcGVhdEV4cHJlc3Npb246IGZ1bmN0aW9uIChncm91cGVkKSB7XG4gICAgICAgIHZhciBleHByZXNzaW9uID0gdGhpcy5pdGVtTmFtZSArICcgaW4gJyArIChncm91cGVkID8gJyRncm91cC5pdGVtcycgOiAnJHNlbGVjdC5pdGVtcycpO1xuICAgICAgICBpZiAodGhpcy50cmFja0J5RXhwKSB7XG4gICAgICAgICAgZXhwcmVzc2lvbiArPSAnIHRyYWNrIGJ5ICcgKyB0aGlzLnRyYWNrQnlFeHA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV4cHJlc3Npb247XG4gICAgICB9IFxuICAgIH07XG5cbiAgfTtcblxuICBzZWxmLmdldEdyb3VwTmdSZXBlYXRFeHByZXNzaW9uID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICckZ3JvdXAgaW4gJHNlbGVjdC5ncm91cHMnO1xuICB9O1xuXG59XSk7XG5cbn0oKSk7XG5hbmd1bGFyLm1vZHVsZShcInVpLnNlbGVjdFwiKS5ydW4oW1wiJHRlbXBsYXRlQ2FjaGVcIiwgZnVuY3Rpb24oJHRlbXBsYXRlQ2FjaGUpIHskdGVtcGxhdGVDYWNoZS5wdXQoXCJib290c3RyYXAvY2hvaWNlcy50cGwuaHRtbFwiLFwiPHVsIGNsYXNzPVxcXCJ1aS1zZWxlY3QtY2hvaWNlcyB1aS1zZWxlY3QtY2hvaWNlcy1jb250ZW50IHVpLXNlbGVjdC1kcm9wZG93biBkcm9wZG93bi1tZW51XFxcIiByb2xlPVxcXCJsaXN0Ym94XFxcIiBuZy1zaG93PVxcXCIkc2VsZWN0Lml0ZW1zLmxlbmd0aCA+IDBcXFwiPjxsaSBjbGFzcz1cXFwidWktc2VsZWN0LWNob2ljZXMtZ3JvdXBcXFwiIGlkPVxcXCJ1aS1zZWxlY3QtY2hvaWNlcy17eyAkc2VsZWN0LmdlbmVyYXRlZElkIH19XFxcIj48ZGl2IGNsYXNzPVxcXCJkaXZpZGVyXFxcIiBuZy1zaG93PVxcXCIkc2VsZWN0LmlzR3JvdXBlZCAmJiAkaW5kZXggPiAwXFxcIj48L2Rpdj48ZGl2IG5nLXNob3c9XFxcIiRzZWxlY3QuaXNHcm91cGVkXFxcIiBjbGFzcz1cXFwidWktc2VsZWN0LWNob2ljZXMtZ3JvdXAtbGFiZWwgZHJvcGRvd24taGVhZGVyXFxcIiBuZy1iaW5kPVxcXCIkZ3JvdXAubmFtZVxcXCI+PC9kaXY+PGRpdiBpZD1cXFwidWktc2VsZWN0LWNob2ljZXMtcm93LXt7ICRzZWxlY3QuZ2VuZXJhdGVkSWQgfX0te3skaW5kZXh9fVxcXCIgY2xhc3M9XFxcInVpLXNlbGVjdC1jaG9pY2VzLXJvd1xcXCIgbmctY2xhc3M9XFxcInthY3RpdmU6ICRzZWxlY3QuaXNBY3RpdmUodGhpcyksIGRpc2FibGVkOiAkc2VsZWN0LmlzRGlzYWJsZWQodGhpcyl9XFxcIiByb2xlPVxcXCJvcHRpb25cXFwiPjxhIGhyZWY9XFxcIlxcXCIgY2xhc3M9XFxcInVpLXNlbGVjdC1jaG9pY2VzLXJvdy1pbm5lclxcXCI+PC9hPjwvZGl2PjwvbGk+PC91bD5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJib290c3RyYXAvbWF0Y2gtbXVsdGlwbGUudHBsLmh0bWxcIixcIjxzcGFuIGNsYXNzPVxcXCJ1aS1zZWxlY3QtbWF0Y2hcXFwiPjxzcGFuIG5nLXJlcGVhdD1cXFwiJGl0ZW0gaW4gJHNlbGVjdC5zZWxlY3RlZFxcXCI+PHNwYW4gY2xhc3M9XFxcInVpLXNlbGVjdC1tYXRjaC1pdGVtIGJ0biBidG4tZGVmYXVsdCBidG4teHNcXFwiIHRhYmluZGV4PVxcXCItMVxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBuZy1kaXNhYmxlZD1cXFwiJHNlbGVjdC5kaXNhYmxlZFxcXCIgbmctY2xpY2s9XFxcIiRzZWxlY3RNdWx0aXBsZS5hY3RpdmVNYXRjaEluZGV4ID0gJGluZGV4O1xcXCIgbmctY2xhc3M9XFxcIntcXCdidG4tcHJpbWFyeVxcJzokc2VsZWN0TXVsdGlwbGUuYWN0aXZlTWF0Y2hJbmRleCA9PT0gJGluZGV4LCBcXCdzZWxlY3QtbG9ja2VkXFwnOiRzZWxlY3QuaXNMb2NrZWQodGhpcywgJGluZGV4KX1cXFwiIHVpLXNlbGVjdC1zb3J0PVxcXCIkc2VsZWN0LnNlbGVjdGVkXFxcIj48c3BhbiBjbGFzcz1cXFwiY2xvc2UgdWktc2VsZWN0LW1hdGNoLWNsb3NlXFxcIiBuZy1oaWRlPVxcXCIkc2VsZWN0LmRpc2FibGVkXFxcIiBuZy1jbGljaz1cXFwiJHNlbGVjdE11bHRpcGxlLnJlbW92ZUNob2ljZSgkaW5kZXgpXFxcIj4mbmJzcDsmdGltZXM7PC9zcGFuPiA8c3BhbiB1aXMtdHJhbnNjbHVkZS1hcHBlbmQ9XFxcIlxcXCI+PC9zcGFuPjwvc3Bhbj48L3NwYW4+PC9zcGFuPlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcImJvb3RzdHJhcC9tYXRjaC50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwidWktc2VsZWN0LW1hdGNoXFxcIiBuZy1oaWRlPVxcXCIkc2VsZWN0Lm9wZW5cXFwiIG5nLWRpc2FibGVkPVxcXCIkc2VsZWN0LmRpc2FibGVkXFxcIiBuZy1jbGFzcz1cXFwie1xcJ2J0bi1kZWZhdWx0LWZvY3VzXFwnOiRzZWxlY3QuZm9jdXN9XFxcIj48c3BhbiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJidG4gYnRuLWRlZmF1bHQgZm9ybS1jb250cm9sIHVpLXNlbGVjdC10b2dnbGVcXFwiIGFyaWEtbGFiZWw9XFxcInt7ICRzZWxlY3QuYmFzZVRpdGxlIH19IGFjdGl2YXRlXFxcIiBuZy1kaXNhYmxlZD1cXFwiJHNlbGVjdC5kaXNhYmxlZFxcXCIgbmctY2xpY2s9XFxcIiRzZWxlY3QuYWN0aXZhdGUoKVxcXCIgc3R5bGU9XFxcIm91dGxpbmU6IDA7XFxcIj48c3BhbiBuZy1zaG93PVxcXCIkc2VsZWN0LmlzRW1wdHkoKVxcXCIgY2xhc3M9XFxcInVpLXNlbGVjdC1wbGFjZWhvbGRlciB0ZXh0LW11dGVkXFxcIj57eyRzZWxlY3QucGxhY2Vob2xkZXJ9fTwvc3Bhbj4gPHNwYW4gbmctaGlkZT1cXFwiJHNlbGVjdC5pc0VtcHR5KClcXFwiIGNsYXNzPVxcXCJ1aS1zZWxlY3QtbWF0Y2gtdGV4dCBwdWxsLWxlZnRcXFwiIG5nLWNsYXNzPVxcXCJ7XFwndWktc2VsZWN0LWFsbG93LWNsZWFyXFwnOiAkc2VsZWN0LmFsbG93Q2xlYXIgJiYgISRzZWxlY3QuaXNFbXB0eSgpfVxcXCIgbmctdHJhbnNjbHVkZT1cXFwiXFxcIj48L3NwYW4+IDxpIGNsYXNzPVxcXCJjYXJldCBwdWxsLXJpZ2h0XFxcIiBuZy1jbGljaz1cXFwiJHNlbGVjdC50b2dnbGUoJGV2ZW50KVxcXCI+PC9pPiA8YSBuZy1zaG93PVxcXCIkc2VsZWN0LmFsbG93Q2xlYXIgJiYgISRzZWxlY3QuaXNFbXB0eSgpXFxcIiBhcmlhLWxhYmVsPVxcXCJ7eyAkc2VsZWN0LmJhc2VUaXRsZSB9fSBjbGVhclxcXCIgc3R5bGU9XFxcIm1hcmdpbi1yaWdodDogMTBweFxcXCIgbmctY2xpY2s9XFxcIiRzZWxlY3QuY2xlYXIoJGV2ZW50KVxcXCIgY2xhc3M9XFxcImJ0biBidG4teHMgYnRuLWxpbmsgcHVsbC1yaWdodFxcXCI+PGkgY2xhc3M9XFxcImdseXBoaWNvbiBnbHlwaGljb24tcmVtb3ZlXFxcIiBhcmlhLWhpZGRlbj1cXFwidHJ1ZVxcXCI+PC9pPjwvYT48L3NwYW4+PC9kaXY+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwiYm9vdHN0cmFwL3NlbGVjdC1tdWx0aXBsZS50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwidWktc2VsZWN0LWNvbnRhaW5lciB1aS1zZWxlY3QtbXVsdGlwbGUgdWktc2VsZWN0LWJvb3RzdHJhcCBkcm9wZG93biBmb3JtLWNvbnRyb2xcXFwiIG5nLWNsYXNzPVxcXCJ7b3BlbjogJHNlbGVjdC5vcGVufVxcXCI+PGRpdj48ZGl2IGNsYXNzPVxcXCJ1aS1zZWxlY3QtbWF0Y2hcXFwiPjwvZGl2PjxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBhdXRvY29tcGxldGU9XFxcImZhbHNlXFxcIiBhdXRvY29ycmVjdD1cXFwib2ZmXFxcIiBhdXRvY2FwaXRhbGl6ZT1cXFwib2ZmXFxcIiBzcGVsbGNoZWNrPVxcXCJmYWxzZVxcXCIgY2xhc3M9XFxcInVpLXNlbGVjdC1zZWFyY2ggaW5wdXQteHNcXFwiIHBsYWNlaG9sZGVyPVxcXCJ7eyRzZWxlY3RNdWx0aXBsZS5nZXRQbGFjZWhvbGRlcigpfX1cXFwiIG5nLWRpc2FibGVkPVxcXCIkc2VsZWN0LmRpc2FibGVkXFxcIiBuZy1oaWRlPVxcXCIkc2VsZWN0LmRpc2FibGVkXFxcIiBuZy1jbGljaz1cXFwiJHNlbGVjdC5hY3RpdmF0ZSgpXFxcIiBuZy1tb2RlbD1cXFwiJHNlbGVjdC5zZWFyY2hcXFwiIHJvbGU9XFxcImNvbWJvYm94XFxcIiBhcmlhLWxhYmVsPVxcXCJ7eyAkc2VsZWN0LmJhc2VUaXRsZSB9fVxcXCIgb25kcm9wPVxcXCJyZXR1cm4gZmFsc2U7XFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJ1aS1zZWxlY3QtY2hvaWNlc1xcXCI+PC9kaXY+PC9kaXY+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwiYm9vdHN0cmFwL3NlbGVjdC50cGwuaHRtbFwiLFwiPGRpdiBjbGFzcz1cXFwidWktc2VsZWN0LWNvbnRhaW5lciB1aS1zZWxlY3QtYm9vdHN0cmFwIGRyb3Bkb3duXFxcIiBuZy1jbGFzcz1cXFwie29wZW46ICRzZWxlY3Qub3Blbn1cXFwiPjxkaXYgY2xhc3M9XFxcInVpLXNlbGVjdC1tYXRjaFxcXCI+PC9kaXY+PGlucHV0IHR5cGU9XFxcInRleHRcXFwiIGF1dG9jb21wbGV0ZT1cXFwiZmFsc2VcXFwiIHRhYmluZGV4PVxcXCItMVxcXCIgYXJpYS1leHBhbmRlZD1cXFwidHJ1ZVxcXCIgYXJpYS1sYWJlbD1cXFwie3sgJHNlbGVjdC5iYXNlVGl0bGUgfX1cXFwiIGFyaWEtb3ducz1cXFwidWktc2VsZWN0LWNob2ljZXMte3sgJHNlbGVjdC5nZW5lcmF0ZWRJZCB9fVxcXCIgYXJpYS1hY3RpdmVkZXNjZW5kYW50PVxcXCJ1aS1zZWxlY3QtY2hvaWNlcy1yb3cte3sgJHNlbGVjdC5nZW5lcmF0ZWRJZCB9fS17eyAkc2VsZWN0LmFjdGl2ZUluZGV4IH19XFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sIHVpLXNlbGVjdC1zZWFyY2hcXFwiIHBsYWNlaG9sZGVyPVxcXCJ7eyRzZWxlY3QucGxhY2Vob2xkZXJ9fVxcXCIgbmctbW9kZWw9XFxcIiRzZWxlY3Quc2VhcmNoXFxcIiBuZy1zaG93PVxcXCIkc2VsZWN0LnNlYXJjaEVuYWJsZWQgJiYgJHNlbGVjdC5vcGVuXFxcIj48ZGl2IGNsYXNzPVxcXCJ1aS1zZWxlY3QtY2hvaWNlc1xcXCI+PC9kaXY+PC9kaXY+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwic2VsZWN0Mi9jaG9pY2VzLnRwbC5odG1sXCIsXCI8dWwgY2xhc3M9XFxcInVpLXNlbGVjdC1jaG9pY2VzIHVpLXNlbGVjdC1jaG9pY2VzLWNvbnRlbnQgc2VsZWN0Mi1yZXN1bHRzXFxcIj48bGkgY2xhc3M9XFxcInVpLXNlbGVjdC1jaG9pY2VzLWdyb3VwXFxcIiBuZy1jbGFzcz1cXFwie1xcJ3NlbGVjdDItcmVzdWx0LXdpdGgtY2hpbGRyZW5cXCc6ICRzZWxlY3QuY2hvaWNlR3JvdXBlZCgkZ3JvdXApIH1cXFwiPjxkaXYgbmctc2hvdz1cXFwiJHNlbGVjdC5jaG9pY2VHcm91cGVkKCRncm91cClcXFwiIGNsYXNzPVxcXCJ1aS1zZWxlY3QtY2hvaWNlcy1ncm91cC1sYWJlbCBzZWxlY3QyLXJlc3VsdC1sYWJlbFxcXCIgbmctYmluZD1cXFwiJGdyb3VwLm5hbWVcXFwiPjwvZGl2Pjx1bCByb2xlPVxcXCJsaXN0Ym94XFxcIiBpZD1cXFwidWktc2VsZWN0LWNob2ljZXMte3sgJHNlbGVjdC5nZW5lcmF0ZWRJZCB9fVxcXCIgbmctY2xhc3M9XFxcIntcXCdzZWxlY3QyLXJlc3VsdC1zdWJcXCc6ICRzZWxlY3QuY2hvaWNlR3JvdXBlZCgkZ3JvdXApLCBcXCdzZWxlY3QyLXJlc3VsdC1zaW5nbGVcXCc6ICEkc2VsZWN0LmNob2ljZUdyb3VwZWQoJGdyb3VwKSB9XFxcIj48bGkgcm9sZT1cXFwib3B0aW9uXFxcIiBpZD1cXFwidWktc2VsZWN0LWNob2ljZXMtcm93LXt7ICRzZWxlY3QuZ2VuZXJhdGVkSWQgfX0te3skaW5kZXh9fVxcXCIgY2xhc3M9XFxcInVpLXNlbGVjdC1jaG9pY2VzLXJvd1xcXCIgbmctY2xhc3M9XFxcIntcXCdzZWxlY3QyLWhpZ2hsaWdodGVkXFwnOiAkc2VsZWN0LmlzQWN0aXZlKHRoaXMpLCBcXCdzZWxlY3QyLWRpc2FibGVkXFwnOiAkc2VsZWN0LmlzRGlzYWJsZWQodGhpcyl9XFxcIj48ZGl2IGNsYXNzPVxcXCJzZWxlY3QyLXJlc3VsdC1sYWJlbCB1aS1zZWxlY3QtY2hvaWNlcy1yb3ctaW5uZXJcXFwiPjwvZGl2PjwvbGk+PC91bD48L2xpPjwvdWw+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwic2VsZWN0Mi9tYXRjaC1tdWx0aXBsZS50cGwuaHRtbFwiLFwiPHNwYW4gY2xhc3M9XFxcInVpLXNlbGVjdC1tYXRjaFxcXCI+PGxpIGNsYXNzPVxcXCJ1aS1zZWxlY3QtbWF0Y2gtaXRlbSBzZWxlY3QyLXNlYXJjaC1jaG9pY2VcXFwiIG5nLXJlcGVhdD1cXFwiJGl0ZW0gaW4gJHNlbGVjdC5zZWxlY3RlZFxcXCIgbmctY2xhc3M9XFxcIntcXCdzZWxlY3QyLXNlYXJjaC1jaG9pY2UtZm9jdXNcXCc6JHNlbGVjdE11bHRpcGxlLmFjdGl2ZU1hdGNoSW5kZXggPT09ICRpbmRleCwgXFwnc2VsZWN0Mi1sb2NrZWRcXCc6JHNlbGVjdC5pc0xvY2tlZCh0aGlzLCAkaW5kZXgpfVxcXCIgdWktc2VsZWN0LXNvcnQ9XFxcIiRzZWxlY3Quc2VsZWN0ZWRcXFwiPjxzcGFuIHVpcy10cmFuc2NsdWRlLWFwcGVuZD1cXFwiXFxcIj48L3NwYW4+IDxhIGhyZWY9XFxcImphdmFzY3JpcHQ6O1xcXCIgY2xhc3M9XFxcInVpLXNlbGVjdC1tYXRjaC1jbG9zZSBzZWxlY3QyLXNlYXJjaC1jaG9pY2UtY2xvc2VcXFwiIG5nLWNsaWNrPVxcXCIkc2VsZWN0TXVsdGlwbGUucmVtb3ZlQ2hvaWNlKCRpbmRleClcXFwiIHRhYmluZGV4PVxcXCItMVxcXCI+PC9hPjwvbGk+PC9zcGFuPlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInNlbGVjdDIvbWF0Y2gudHBsLmh0bWxcIixcIjxhIGNsYXNzPVxcXCJzZWxlY3QyLWNob2ljZSB1aS1zZWxlY3QtbWF0Y2hcXFwiIG5nLWNsYXNzPVxcXCJ7XFwnc2VsZWN0Mi1kZWZhdWx0XFwnOiAkc2VsZWN0LmlzRW1wdHkoKX1cXFwiIG5nLWNsaWNrPVxcXCIkc2VsZWN0LnRvZ2dsZSgkZXZlbnQpXFxcIiBhcmlhLWxhYmVsPVxcXCJ7eyAkc2VsZWN0LmJhc2VUaXRsZSB9fSBzZWxlY3RcXFwiPjxzcGFuIG5nLXNob3c9XFxcIiRzZWxlY3QuaXNFbXB0eSgpXFxcIiBjbGFzcz1cXFwic2VsZWN0Mi1jaG9zZW5cXFwiPnt7JHNlbGVjdC5wbGFjZWhvbGRlcn19PC9zcGFuPiA8c3BhbiBuZy1oaWRlPVxcXCIkc2VsZWN0LmlzRW1wdHkoKVxcXCIgY2xhc3M9XFxcInNlbGVjdDItY2hvc2VuXFxcIiBuZy10cmFuc2NsdWRlPVxcXCJcXFwiPjwvc3Bhbj4gPGFiYnIgbmctaWY9XFxcIiRzZWxlY3QuYWxsb3dDbGVhciAmJiAhJHNlbGVjdC5pc0VtcHR5KClcXFwiIGNsYXNzPVxcXCJzZWxlY3QyLXNlYXJjaC1jaG9pY2UtY2xvc2VcXFwiIG5nLWNsaWNrPVxcXCIkc2VsZWN0LmNsZWFyKCRldmVudClcXFwiPjwvYWJicj4gPHNwYW4gY2xhc3M9XFxcInNlbGVjdDItYXJyb3cgdWktc2VsZWN0LXRvZ2dsZVxcXCI+PGI+PC9iPjwvc3Bhbj48L2E+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwic2VsZWN0Mi9zZWxlY3QtbXVsdGlwbGUudHBsLmh0bWxcIixcIjxkaXYgY2xhc3M9XFxcInVpLXNlbGVjdC1jb250YWluZXIgdWktc2VsZWN0LW11bHRpcGxlIHNlbGVjdDIgc2VsZWN0Mi1jb250YWluZXIgc2VsZWN0Mi1jb250YWluZXItbXVsdGlcXFwiIG5nLWNsYXNzPVxcXCJ7XFwnc2VsZWN0Mi1jb250YWluZXItYWN0aXZlIHNlbGVjdDItZHJvcGRvd24tb3BlbiBvcGVuXFwnOiAkc2VsZWN0Lm9wZW4sIFxcJ3NlbGVjdDItY29udGFpbmVyLWRpc2FibGVkXFwnOiAkc2VsZWN0LmRpc2FibGVkfVxcXCI+PHVsIGNsYXNzPVxcXCJzZWxlY3QyLWNob2ljZXNcXFwiPjxzcGFuIGNsYXNzPVxcXCJ1aS1zZWxlY3QtbWF0Y2hcXFwiPjwvc3Bhbj48bGkgY2xhc3M9XFxcInNlbGVjdDItc2VhcmNoLWZpZWxkXFxcIj48aW5wdXQgdHlwZT1cXFwidGV4dFxcXCIgYXV0b2NvbXBsZXRlPVxcXCJmYWxzZVxcXCIgYXV0b2NvcnJlY3Q9XFxcIm9mZlxcXCIgYXV0b2NhcGl0YWxpemU9XFxcIm9mZlxcXCIgc3BlbGxjaGVjaz1cXFwiZmFsc2VcXFwiIHJvbGU9XFxcImNvbWJvYm94XFxcIiBhcmlhLWV4cGFuZGVkPVxcXCJ0cnVlXFxcIiBhcmlhLW93bnM9XFxcInVpLXNlbGVjdC1jaG9pY2VzLXt7ICRzZWxlY3QuZ2VuZXJhdGVkSWQgfX1cXFwiIGFyaWEtbGFiZWw9XFxcInt7ICRzZWxlY3QuYmFzZVRpdGxlIH19XFxcIiBhcmlhLWFjdGl2ZWRlc2NlbmRhbnQ9XFxcInVpLXNlbGVjdC1jaG9pY2VzLXJvdy17eyAkc2VsZWN0LmdlbmVyYXRlZElkIH19LXt7ICRzZWxlY3QuYWN0aXZlSW5kZXggfX1cXFwiIGNsYXNzPVxcXCJzZWxlY3QyLWlucHV0IHVpLXNlbGVjdC1zZWFyY2hcXFwiIHBsYWNlaG9sZGVyPVxcXCJ7eyRzZWxlY3RNdWx0aXBsZS5nZXRQbGFjZWhvbGRlcigpfX1cXFwiIG5nLWRpc2FibGVkPVxcXCIkc2VsZWN0LmRpc2FibGVkXFxcIiBuZy1oaWRlPVxcXCIkc2VsZWN0LmRpc2FibGVkXFxcIiBuZy1tb2RlbD1cXFwiJHNlbGVjdC5zZWFyY2hcXFwiIG5nLWNsaWNrPVxcXCIkc2VsZWN0LmFjdGl2YXRlKClcXFwiIHN0eWxlPVxcXCJ3aWR0aDogMzRweDtcXFwiIG9uZHJvcD1cXFwicmV0dXJuIGZhbHNlO1xcXCI+PC9saT48L3VsPjxkaXYgY2xhc3M9XFxcInVpLXNlbGVjdC1kcm9wZG93biBzZWxlY3QyLWRyb3Agc2VsZWN0Mi13aXRoLXNlYXJjaGJveCBzZWxlY3QyLWRyb3AtYWN0aXZlXFxcIiBuZy1jbGFzcz1cXFwie1xcJ3NlbGVjdDItZGlzcGxheS1ub25lXFwnOiAhJHNlbGVjdC5vcGVufVxcXCI+PGRpdiBjbGFzcz1cXFwidWktc2VsZWN0LWNob2ljZXNcXFwiPjwvZGl2PjwvZGl2PjwvZGl2PlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInNlbGVjdDIvc2VsZWN0LnRwbC5odG1sXCIsXCI8ZGl2IGNsYXNzPVxcXCJ1aS1zZWxlY3QtY29udGFpbmVyIHNlbGVjdDIgc2VsZWN0Mi1jb250YWluZXJcXFwiIG5nLWNsYXNzPVxcXCJ7XFwnc2VsZWN0Mi1jb250YWluZXItYWN0aXZlIHNlbGVjdDItZHJvcGRvd24tb3BlbiBvcGVuXFwnOiAkc2VsZWN0Lm9wZW4sIFxcJ3NlbGVjdDItY29udGFpbmVyLWRpc2FibGVkXFwnOiAkc2VsZWN0LmRpc2FibGVkLCBcXCdzZWxlY3QyLWNvbnRhaW5lci1hY3RpdmVcXCc6ICRzZWxlY3QuZm9jdXMsIFxcJ3NlbGVjdDItYWxsb3djbGVhclxcJzogJHNlbGVjdC5hbGxvd0NsZWFyICYmICEkc2VsZWN0LmlzRW1wdHkoKX1cXFwiPjxkaXYgY2xhc3M9XFxcInVpLXNlbGVjdC1tYXRjaFxcXCI+PC9kaXY+PGRpdiBjbGFzcz1cXFwidWktc2VsZWN0LWRyb3Bkb3duIHNlbGVjdDItZHJvcCBzZWxlY3QyLXdpdGgtc2VhcmNoYm94IHNlbGVjdDItZHJvcC1hY3RpdmVcXFwiIG5nLWNsYXNzPVxcXCJ7XFwnc2VsZWN0Mi1kaXNwbGF5LW5vbmVcXCc6ICEkc2VsZWN0Lm9wZW59XFxcIj48ZGl2IGNsYXNzPVxcXCJzZWxlY3QyLXNlYXJjaFxcXCIgbmctc2hvdz1cXFwiJHNlbGVjdC5zZWFyY2hFbmFibGVkXFxcIj48aW5wdXQgdHlwZT1cXFwidGV4dFxcXCIgYXV0b2NvbXBsZXRlPVxcXCJmYWxzZVxcXCIgYXV0b2NvcnJlY3Q9XFxcImZhbHNlXFxcIiBhdXRvY2FwaXRhbGl6ZT1cXFwib2ZmXFxcIiBzcGVsbGNoZWNrPVxcXCJmYWxzZVxcXCIgcm9sZT1cXFwiY29tYm9ib3hcXFwiIGFyaWEtZXhwYW5kZWQ9XFxcInRydWVcXFwiIGFyaWEtb3ducz1cXFwidWktc2VsZWN0LWNob2ljZXMte3sgJHNlbGVjdC5nZW5lcmF0ZWRJZCB9fVxcXCIgYXJpYS1sYWJlbD1cXFwie3sgJHNlbGVjdC5iYXNlVGl0bGUgfX1cXFwiIGFyaWEtYWN0aXZlZGVzY2VuZGFudD1cXFwidWktc2VsZWN0LWNob2ljZXMtcm93LXt7ICRzZWxlY3QuZ2VuZXJhdGVkSWQgfX0te3sgJHNlbGVjdC5hY3RpdmVJbmRleCB9fVxcXCIgY2xhc3M9XFxcInVpLXNlbGVjdC1zZWFyY2ggc2VsZWN0Mi1pbnB1dFxcXCIgbmctbW9kZWw9XFxcIiRzZWxlY3Quc2VhcmNoXFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJ1aS1zZWxlY3QtY2hvaWNlc1xcXCI+PC9kaXY+PC9kaXY+PC9kaXY+XCIpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KFwic2VsZWN0aXplL2Nob2ljZXMudHBsLmh0bWxcIixcIjxkaXYgbmctc2hvdz1cXFwiJHNlbGVjdC5vcGVuXFxcIiBjbGFzcz1cXFwidWktc2VsZWN0LWNob2ljZXMgdWktc2VsZWN0LWRyb3Bkb3duIHNlbGVjdGl6ZS1kcm9wZG93biBzaW5nbGVcXFwiPjxkaXYgY2xhc3M9XFxcInVpLXNlbGVjdC1jaG9pY2VzLWNvbnRlbnQgc2VsZWN0aXplLWRyb3Bkb3duLWNvbnRlbnRcXFwiPjxkaXYgY2xhc3M9XFxcInVpLXNlbGVjdC1jaG9pY2VzLWdyb3VwIG9wdGdyb3VwXFxcIiByb2xlPVxcXCJsaXN0Ym94XFxcIj48ZGl2IG5nLXNob3c9XFxcIiRzZWxlY3QuaXNHcm91cGVkXFxcIiBjbGFzcz1cXFwidWktc2VsZWN0LWNob2ljZXMtZ3JvdXAtbGFiZWwgb3B0Z3JvdXAtaGVhZGVyXFxcIiBuZy1iaW5kPVxcXCIkZ3JvdXAubmFtZVxcXCI+PC9kaXY+PGRpdiByb2xlPVxcXCJvcHRpb25cXFwiIGNsYXNzPVxcXCJ1aS1zZWxlY3QtY2hvaWNlcy1yb3dcXFwiIG5nLWNsYXNzPVxcXCJ7YWN0aXZlOiAkc2VsZWN0LmlzQWN0aXZlKHRoaXMpLCBkaXNhYmxlZDogJHNlbGVjdC5pc0Rpc2FibGVkKHRoaXMpfVxcXCI+PGRpdiBjbGFzcz1cXFwib3B0aW9uIHVpLXNlbGVjdC1jaG9pY2VzLXJvdy1pbm5lclxcXCIgZGF0YS1zZWxlY3RhYmxlPVxcXCJcXFwiPjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PjwvZGl2PlwiKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dChcInNlbGVjdGl6ZS9tYXRjaC50cGwuaHRtbFwiLFwiPGRpdiBuZy1oaWRlPVxcXCIoJHNlbGVjdC5vcGVuIHx8ICRzZWxlY3QuaXNFbXB0eSgpKVxcXCIgY2xhc3M9XFxcInVpLXNlbGVjdC1tYXRjaFxcXCIgbmctdHJhbnNjbHVkZT1cXFwiXFxcIj48L2Rpdj5cIik7XG4kdGVtcGxhdGVDYWNoZS5wdXQoXCJzZWxlY3RpemUvc2VsZWN0LnRwbC5odG1sXCIsXCI8ZGl2IGNsYXNzPVxcXCJ1aS1zZWxlY3QtY29udGFpbmVyIHNlbGVjdGl6ZS1jb250cm9sIHNpbmdsZVxcXCIgbmctY2xhc3M9XFxcIntcXCdvcGVuXFwnOiAkc2VsZWN0Lm9wZW59XFxcIj48ZGl2IGNsYXNzPVxcXCJzZWxlY3RpemUtaW5wdXRcXFwiIG5nLWNsYXNzPVxcXCJ7XFwnZm9jdXNcXCc6ICRzZWxlY3Qub3BlbiwgXFwnZGlzYWJsZWRcXCc6ICRzZWxlY3QuZGlzYWJsZWQsIFxcJ3NlbGVjdGl6ZS1mb2N1c1xcJyA6ICRzZWxlY3QuZm9jdXN9XFxcIiBuZy1jbGljaz1cXFwiJHNlbGVjdC5vcGVuICYmICEkc2VsZWN0LnNlYXJjaEVuYWJsZWQgPyAkc2VsZWN0LnRvZ2dsZSgkZXZlbnQpIDogJHNlbGVjdC5hY3RpdmF0ZSgpXFxcIj48ZGl2IGNsYXNzPVxcXCJ1aS1zZWxlY3QtbWF0Y2hcXFwiPjwvZGl2PjxpbnB1dCB0eXBlPVxcXCJ0ZXh0XFxcIiBhdXRvY29tcGxldGU9XFxcImZhbHNlXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiIGNsYXNzPVxcXCJ1aS1zZWxlY3Qtc2VhcmNoIHVpLXNlbGVjdC10b2dnbGVcXFwiIG5nLWNsaWNrPVxcXCIkc2VsZWN0LnRvZ2dsZSgkZXZlbnQpXFxcIiBwbGFjZWhvbGRlcj1cXFwie3skc2VsZWN0LnBsYWNlaG9sZGVyfX1cXFwiIG5nLW1vZGVsPVxcXCIkc2VsZWN0LnNlYXJjaFxcXCIgbmctaGlkZT1cXFwiISRzZWxlY3Quc2VhcmNoRW5hYmxlZCB8fCAoJHNlbGVjdC5zZWxlY3RlZCAmJiAhJHNlbGVjdC5vcGVuKVxcXCIgbmctZGlzYWJsZWQ9XFxcIiRzZWxlY3QuZGlzYWJsZWRcXFwiIGFyaWEtbGFiZWw9XFxcInt7ICRzZWxlY3QuYmFzZVRpdGxlIH19XFxcIj48L2Rpdj48ZGl2IGNsYXNzPVxcXCJ1aS1zZWxlY3QtY2hvaWNlc1xcXCI+PC9kaXY+PC9kaXY+XCIpO31dKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi91aS1zZWxlY3QvZGlzdC9zZWxlY3QuanNcbiAqKiBtb2R1bGUgaWQgPSAxNzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zZWxlY3QuY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uL3N0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zZWxlY3QuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uL2Nzcy1sb2FkZXIvaW5kZXguanMhLi9zZWxlY3QuY3NzXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi91aS1zZWxlY3QvZGlzdC9zZWxlY3QuY3NzXG4gKiogbW9kdWxlIGlkID0gMTcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLyohXFxuICogdWktc2VsZWN0XFxuICogaHR0cDovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1zZWxlY3RcXG4gKiBWZXJzaW9uOiAwLjE0LjYgLSAyMDE2LTAyLTE4VDIxOjAxOjM2Ljk3MlpcXG4gKiBMaWNlbnNlOiBNSVRcXG4gKi9cXG5cXG5cXG4vKiBTdHlsZSB3aGVuIGhpZ2hsaWdodGluZyBhIHNlYXJjaC4gKi9cXG4udWktc2VsZWN0LWhpZ2hsaWdodCB7XFxuICBmb250LXdlaWdodDogYm9sZDtcXG59XFxuXFxuLnVpLXNlbGVjdC1vZmZzY3JlZW4ge1xcbiAgY2xpcDogcmVjdCgwIDAgMCAwKSAhaW1wb3J0YW50O1xcbiAgd2lkdGg6IDFweCAhaW1wb3J0YW50O1xcbiAgaGVpZ2h0OiAxcHggIWltcG9ydGFudDtcXG4gIGJvcmRlcjogMCAhaW1wb3J0YW50O1xcbiAgbWFyZ2luOiAwICFpbXBvcnRhbnQ7XFxuICBwYWRkaW5nOiAwICFpbXBvcnRhbnQ7XFxuICBvdmVyZmxvdzogaGlkZGVuICFpbXBvcnRhbnQ7XFxuICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDtcXG4gIG91dGxpbmU6IDAgIWltcG9ydGFudDtcXG4gIGxlZnQ6IDBweCAhaW1wb3J0YW50O1xcbiAgdG9wOiAwcHggIWltcG9ydGFudDtcXG59XFxuXFxuXFxuLnVpLXNlbGVjdC1jaG9pY2VzLXJvdzpob3ZlciB7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xcbn1cXG5cXG4vKiBTZWxlY3QyIHRoZW1lICovXFxuXFxuLyogTWFyayBpbnZhbGlkIFNlbGVjdDIgKi9cXG4ubmctZGlydHkubmctaW52YWxpZCA+IGEuc2VsZWN0Mi1jaG9pY2Uge1xcbiAgICBib3JkZXItY29sb3I6ICNENDQ5NTA7XFxufVxcblxcbi5zZWxlY3QyLXJlc3VsdC1zaW5nbGUge1xcbiAgcGFkZGluZy1sZWZ0OiAwO1xcbn1cXG5cXG4uc2VsZWN0Mi1sb2NrZWQgPiAuc2VsZWN0Mi1zZWFyY2gtY2hvaWNlLWNsb3Nle1xcbiAgZGlzcGxheTpub25lO1xcbn1cXG5cXG4uc2VsZWN0LWxvY2tlZCA+IC51aS1zZWxlY3QtbWF0Y2gtY2xvc2V7XFxuICAgIGRpc3BsYXk6bm9uZTtcXG59XFxuXFxuYm9keSA+IC5zZWxlY3QyLWNvbnRhaW5lci5vcGVuIHtcXG4gIHotaW5kZXg6IDk5OTk7IC8qIFRoZSB6LWluZGV4IFNlbGVjdDIgYXBwbGllcyB0byB0aGUgc2VsZWN0Mi1kcm9wICovXFxufVxcblxcbi8qIEhhbmRsZSB1cCBkaXJlY3Rpb24gU2VsZWN0MiAqL1xcbi51aS1zZWxlY3QtY29udGFpbmVyW3RoZW1lPVxcXCJzZWxlY3QyXFxcIl0uZGlyZWN0aW9uLXVwIC51aS1zZWxlY3QtbWF0Y2gge1xcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7IC8qIEZJWE1FIGhhcmRjb2RlZCB2YWx1ZSA6LS8gKi9cXG4gICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogMDtcXG4gICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDA7XFxufVxcbi51aS1zZWxlY3QtY29udGFpbmVyW3RoZW1lPVxcXCJzZWxlY3QyXFxcIl0uZGlyZWN0aW9uLXVwIC51aS1zZWxlY3QtZHJvcGRvd24ge1xcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7IC8qIEZJWE1FIGhhcmRjb2RlZCB2YWx1ZSA6LS8gKi9cXG4gICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogMDtcXG4gICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDA7XFxuXFxuICAgIGJvcmRlci10b3Atd2lkdGg6IDFweDsgIC8qIEZJWE1FIGhhcmRjb2RlZCB2YWx1ZSA6LS8gKi9cXG4gICAgYm9yZGVyLXRvcC1zdHlsZTogc29saWQ7XFxuXFxuICAgIGJveC1zaGFkb3c6IDAgLTRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjI1KTtcXG5cXG4gICAgbWFyZ2luLXRvcDogLTRweDsgLyogRklYTUUgaGFyZGNvZGVkIHZhbHVlIDotLyAqL1xcbn1cXG4udWktc2VsZWN0LWNvbnRhaW5lclt0aGVtZT1cXFwic2VsZWN0MlxcXCJdLmRpcmVjdGlvbi11cCAudWktc2VsZWN0LWRyb3Bkb3duIC5zZWxlY3QyLXNlYXJjaCB7XFxuICAgIG1hcmdpbi10b3A6IDRweDsgLyogRklYTUUgaGFyZGNvZGVkIHZhbHVlIDotLyAqL1xcbn1cXG4udWktc2VsZWN0LWNvbnRhaW5lclt0aGVtZT1cXFwic2VsZWN0MlxcXCJdLmRpcmVjdGlvbi11cC5zZWxlY3QyLWRyb3Bkb3duLW9wZW4gLnVpLXNlbGVjdC1tYXRjaCB7XFxuICAgIGJvcmRlci1ib3R0b20tY29sb3I6ICM1ODk3ZmI7XFxufVxcblxcbi8qIFNlbGVjdGl6ZSB0aGVtZSAqL1xcblxcbi8qIEhlbHBlciBjbGFzcyB0byBzaG93IHN0eWxlcyB3aGVuIGZvY3VzICovXFxuLnNlbGVjdGl6ZS1pbnB1dC5zZWxlY3RpemUtZm9jdXN7XFxuICBib3JkZXItY29sb3I6ICMwMDdGQkIgIWltcG9ydGFudDtcXG59XFxuXFxuLyogRml4IGlucHV0IHdpZHRoIGZvciBTZWxlY3RpemUgdGhlbWUgKi9cXG4uc2VsZWN0aXplLWNvbnRyb2wgPiAuc2VsZWN0aXplLWlucHV0ID4gaW5wdXQge1xcbiAgd2lkdGg6IDEwMCU7XFxufVxcblxcbi8qIEZpeCBkcm9wZG93biB3aWR0aCBmb3IgU2VsZWN0aXplIHRoZW1lICovXFxuLnNlbGVjdGl6ZS1jb250cm9sID4gLnNlbGVjdGl6ZS1kcm9wZG93biB7XFxuICB3aWR0aDogMTAwJTtcXG59XFxuXFxuLyogTWFyayBpbnZhbGlkIFNlbGVjdGl6ZSAqL1xcbi5uZy1kaXJ0eS5uZy1pbnZhbGlkID4gZGl2LnNlbGVjdGl6ZS1pbnB1dCB7XFxuICAgIGJvcmRlci1jb2xvcjogI0Q0NDk1MDtcXG59XFxuXFxuLyogSGFuZGxlIHVwIGRpcmVjdGlvbiBTZWxlY3RpemUgKi9cXG4udWktc2VsZWN0LWNvbnRhaW5lclt0aGVtZT1cXFwic2VsZWN0aXplXFxcIl0uZGlyZWN0aW9uLXVwIC51aS1zZWxlY3QtZHJvcGRvd24ge1xcbiAgICBib3gtc2hhZG93OiAwIC00cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4yNSk7XFxuXFxuICAgIG1hcmdpbi10b3A6IC0ycHg7IC8qIEZJWE1FIGhhcmRjb2RlZCB2YWx1ZSA6LS8gKi9cXG59XFxuXFxuLyogQm9vdHN0cmFwIHRoZW1lICovXFxuXFxuLyogSGVscGVyIGNsYXNzIHRvIHNob3cgc3R5bGVzIHdoZW4gZm9jdXMgKi9cXG4uYnRuLWRlZmF1bHQtZm9jdXMge1xcbiAgY29sb3I6ICMzMzM7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUJFQkVCO1xcbiAgYm9yZGVyLWNvbG9yOiAjQURBREFEO1xcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgb3V0bGluZTogNXB4IGF1dG8gLXdlYmtpdC1mb2N1cy1yaW5nLWNvbG9yO1xcbiAgb3V0bGluZS1vZmZzZXQ6IC0ycHg7XFxuICBib3gtc2hhZG93OiBpbnNldCAwIDFweCAxcHggcmdiYSgwLCAwLCAwLCAwLjA3NSksIDAgMCA4cHggcmdiYSgxMDIsIDE3NSwgMjMzLCAwLjYpO1xcbn1cXG5cXG4udWktc2VsZWN0LWJvb3RzdHJhcCAudWktc2VsZWN0LXRvZ2dsZSB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblxcbi51aS1zZWxlY3QtYm9vdHN0cmFwIC51aS1zZWxlY3QtdG9nZ2xlID4gLmNhcmV0IHtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGhlaWdodDogMTBweDtcXG4gIHRvcDogNTAlO1xcbiAgcmlnaHQ6IDEwcHg7XFxuICBtYXJnaW4tdG9wOiAtMnB4O1xcbn1cXG5cXG4vKiBGaXggQm9vdHN0cmFwIGRyb3Bkb3duIHBvc2l0aW9uIHdoZW4gaW5zaWRlIGEgaW5wdXQtZ3JvdXAgKi9cXG4uaW5wdXQtZ3JvdXAgPiAudWktc2VsZWN0LWJvb3RzdHJhcC5kcm9wZG93biB7XFxuICAvKiBJbnN0ZWFkIG9mIHJlbGF0aXZlICovXFxuICBwb3NpdGlvbjogc3RhdGljO1xcbn1cXG5cXG4uaW5wdXQtZ3JvdXAgPiAudWktc2VsZWN0LWJvb3RzdHJhcCA+IGlucHV0LnVpLXNlbGVjdC1zZWFyY2guZm9ybS1jb250cm9sIHtcXG4gIGJvcmRlci1yYWRpdXM6IDRweDsgLyogRklYTUUgaGFyZGNvZGVkIHZhbHVlIDotLyAqL1xcbiAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDA7XFxuICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMDtcXG59XFxuLmlucHV0LWdyb3VwID4gLnVpLXNlbGVjdC1ib290c3RyYXAgPiBpbnB1dC51aS1zZWxlY3Qtc2VhcmNoLmZvcm0tY29udHJvbC5kaXJlY3Rpb24tdXAge1xcbiAgYm9yZGVyLXJhZGl1czogNHB4ICFpbXBvcnRhbnQ7IC8qIEZJWE1FIGhhcmRjb2RlZCB2YWx1ZSA6LS8gKi9cXG4gIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAwICFpbXBvcnRhbnQ7XFxuICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogMCAhaW1wb3J0YW50O1xcbn1cXG5cXG4udWktc2VsZWN0LWJvb3RzdHJhcCA+IC51aS1zZWxlY3QtbWF0Y2ggPiAuYnRue1xcbiAgLyogSW5zdGVhZCBvZiBjZW50ZXIgYmVjYXVzZSBvZiAuYnRuICovXFxuICB0ZXh0LWFsaWduOiBsZWZ0ICFpbXBvcnRhbnQ7XFxufVxcblxcbi51aS1zZWxlY3QtYm9vdHN0cmFwID4gLnVpLXNlbGVjdC1tYXRjaCA+IC5jYXJldCB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDQ1JTtcXG4gIHJpZ2h0OiAxNXB4O1xcbn1cXG5cXG4vKiBTZWUgU2Nyb2xsYWJsZSBNZW51IHdpdGggQm9vdHN0cmFwIDMgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xOTIyNzQ5NiAqL1xcbi51aS1zZWxlY3QtYm9vdHN0cmFwID4gLnVpLXNlbGVjdC1jaG9pY2VzIHtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgaGVpZ2h0OiBhdXRvO1xcbiAgbWF4LWhlaWdodDogMjAwcHg7XFxuICBvdmVyZmxvdy14OiBoaWRkZW47XFxuICBtYXJnaW4tdG9wOiAtMXB4O1xcbn1cXG5cXG5ib2R5ID4gLnVpLXNlbGVjdC1ib290c3RyYXAub3BlbiB7XFxuICB6LWluZGV4OiAxMDAwOyAvKiBTdGFuZGFyZCBCb290c3RyYXAgZHJvcGRvd24gei1pbmRleCAqL1xcbn1cXG5cXG4udWktc2VsZWN0LW11bHRpcGxlLnVpLXNlbGVjdC1ib290c3RyYXAge1xcbiAgaGVpZ2h0OiBhdXRvO1xcbiAgcGFkZGluZzogM3B4IDNweCAwIDNweDtcXG59XFxuXFxuLnVpLXNlbGVjdC1tdWx0aXBsZS51aS1zZWxlY3QtYm9vdHN0cmFwIGlucHV0LnVpLXNlbGVjdC1zZWFyY2gge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDsgLyogVG8gcHJldmVudCBkb3VibGUgYmFja2dyb3VuZCB3aGVuIGRpc2FibGVkICovXFxuICBib3JkZXI6IG5vbmU7XFxuICBvdXRsaW5lOiBub25lO1xcbiAgaGVpZ2h0OiAxLjY2NjY2NmVtO1xcbiAgbWFyZ2luLWJvdHRvbTogM3B4O1xcbn1cXG5cXG4udWktc2VsZWN0LW11bHRpcGxlLnVpLXNlbGVjdC1ib290c3RyYXAgLnVpLXNlbGVjdC1tYXRjaCAuY2xvc2Uge1xcbiAgZm9udC1zaXplOiAxLjZlbTtcXG4gIGxpbmUtaGVpZ2h0OiAwLjc1O1xcbn1cXG5cXG4udWktc2VsZWN0LW11bHRpcGxlLnVpLXNlbGVjdC1ib290c3RyYXAgLnVpLXNlbGVjdC1tYXRjaC1pdGVtIHtcXG4gIG91dGxpbmU6IDA7XFxuICBtYXJnaW46IDAgM3B4IDNweCAwO1xcbn1cXG5cXG4udWktc2VsZWN0LW11bHRpcGxlIC51aS1zZWxlY3QtbWF0Y2gtaXRlbSB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblxcbi51aS1zZWxlY3QtbXVsdGlwbGUgLnVpLXNlbGVjdC1tYXRjaC1pdGVtLmRyb3BwaW5nLWJlZm9yZTpiZWZvcmUge1xcbiAgY29udGVudDogXFxcIlxcXCI7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDA7XFxuICByaWdodDogMTAwJTtcXG4gIGhlaWdodDogMTAwJTtcXG4gIG1hcmdpbi1yaWdodDogMnB4O1xcbiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjNDI4YmNhO1xcbn1cXG5cXG4udWktc2VsZWN0LW11bHRpcGxlIC51aS1zZWxlY3QtbWF0Y2gtaXRlbS5kcm9wcGluZy1hZnRlcjphZnRlciB7XFxuICBjb250ZW50OiBcXFwiXFxcIjtcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIHRvcDogMDtcXG4gIGxlZnQ6IDEwMCU7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICBtYXJnaW4tbGVmdDogMnB4O1xcbiAgYm9yZGVyLXJpZ2h0OiAxcHggc29saWQgIzQyOGJjYTtcXG59XFxuXFxuLnVpLXNlbGVjdC1ib290c3RyYXAgLnVpLXNlbGVjdC1jaG9pY2VzLXJvdz5hIHtcXG4gICAgZGlzcGxheTogYmxvY2s7XFxuICAgIHBhZGRpbmc6IDNweCAyMHB4O1xcbiAgICBjbGVhcjogYm90aDtcXG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcXG4gICAgbGluZS1oZWlnaHQ6IDEuNDI4NTcxNDM7XFxuICAgIGNvbG9yOiAjMzMzO1xcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xcbn1cXG5cXG4udWktc2VsZWN0LWJvb3RzdHJhcCAudWktc2VsZWN0LWNob2ljZXMtcm93PmE6aG92ZXIsIC51aS1zZWxlY3QtYm9vdHN0cmFwIC51aS1zZWxlY3QtY2hvaWNlcy1yb3c+YTpmb2N1cyB7XFxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG4gICAgY29sb3I6ICMyNjI2MjY7XFxuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7XFxufVxcblxcbi51aS1zZWxlY3QtYm9vdHN0cmFwIC51aS1zZWxlY3QtY2hvaWNlcy1yb3cuYWN0aXZlPmEge1xcbiAgICBjb2xvcjogI2ZmZjtcXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xcbiAgICBvdXRsaW5lOiAwO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDI4YmNhO1xcbn1cXG5cXG4udWktc2VsZWN0LWJvb3RzdHJhcCAudWktc2VsZWN0LWNob2ljZXMtcm93LmRpc2FibGVkPmEsXFxuLnVpLXNlbGVjdC1ib290c3RyYXAgLnVpLXNlbGVjdC1jaG9pY2VzLXJvdy5hY3RpdmUuZGlzYWJsZWQ+YSB7XFxuICAgIGNvbG9yOiAjNzc3O1xcbiAgICBjdXJzb3I6IG5vdC1hbGxvd2VkO1xcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmO1xcbn1cXG5cXG4vKiBmaXggaGlkZS9zaG93IGFuZ3VsYXIgYW5pbWF0aW9uICovXFxuLnVpLXNlbGVjdC1tYXRjaC5uZy1oaWRlLWFkZCxcXG4udWktc2VsZWN0LXNlYXJjaC5uZy1oaWRlLWFkZCB7XFxuICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcXG59XFxuXFxuLyogTWFyayBpbnZhbGlkIEJvb3RzdHJhcCAqL1xcbi51aS1zZWxlY3QtYm9vdHN0cmFwLm5nLWRpcnR5Lm5nLWludmFsaWQgPiBidXR0b24uYnRuLnVpLXNlbGVjdC1tYXRjaCB7XFxuICAgIGJvcmRlci1jb2xvcjogI0Q0NDk1MDtcXG59XFxuXFxuLyogSGFuZGxlIHVwIGRpcmVjdGlvbiBCb290c3RyYXAgKi9cXG4udWktc2VsZWN0LWNvbnRhaW5lclt0aGVtZT1cXFwiYm9vdHN0cmFwXFxcIl0uZGlyZWN0aW9uLXVwIC51aS1zZWxlY3QtZHJvcGRvd24ge1xcbiAgICBib3gtc2hhZG93OiAwIC00cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4yNSk7XFxufVxcblwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3VpLXNlbGVjdC9kaXN0L3NlbGVjdC5jc3NcbiAqKiBtb2R1bGUgaWQgPSAxNzNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJmaWVsZFxcXCIgbmctY2xhc3M9XFxcInsgJ2hhcy1lcnJvcic6IHNlbGVjdC5uZ01vZGVsLiRpbnZhbGlkIH1cXFwiPlxcclxcblxcdDxsYWJlbCBuZy1zaG93PVxcXCJzZWxlY3Quc2VsZWN0aW9uXFxcIiBjbGFzcz1cXFwic2hvdy1oaWRlIGFuZ3VsYXItYW5pbWF0ZVxcXCI+XFxyXFxuXFx0XFx0e3s6OnNlbGVjdC5sYWJlbH19XFxyXFxuXFx0PC9sYWJlbD5cXHJcXG5cXHQ8dWktc2VsZWN0IG5nLW1vZGVsPVxcXCJzZWxlY3Quc2VsZWN0aW9uXFxcIiBzZWFyY2gtZW5hYmxlZD1cXFwiZmFsc2VcXFwiIHRoZW1lPVxcXCJib290c3RyYXBcXFwiIG5nLWRpc2FibGVkPVxcXCJzZWxlY3QubmdEaXNhYmxlZFxcXCI+XFxyXFxuXFx0XFx0PHVpLXNlbGVjdC1tYXRjaCBwbGFjZWhvbGRlcj1cXFwie3s6OnNlbGVjdC5sYWJlbH19XFxcIj57e3NlbGVjdC5nZXREaXNwbGF5TmFtZSgkc2VsZWN0LnNlbGVjdGVkKX19PC91aS1zZWxlY3QtbWF0Y2g+XFxyXFxuXFx0XFx0PHVpLXNlbGVjdC1jaG9pY2VzIHJlcGVhdD1cXFwib3B0aW9uIGluIHNlbGVjdC5vcHRpb25zXFxcIj5cXHJcXG5cXHRcXHRcXHR7e3NlbGVjdC5nZXREaXNwbGF5TmFtZShvcHRpb24pfX1cXHJcXG5cXHRcXHQ8L3VpLXNlbGVjdC1jaG9pY2VzPlxcclxcblxcdDwvdWktc2VsZWN0PlxcclxcblxcdDxzcGFuIGNsYXNzPVxcXCJlcnJvci1zdHJpbmdcXFwiIG5nLWlmPVxcXCJzZWxlY3QuaW5wdXRWYWxpZGF0b3IuZXJyb3IgfCBpc0VtcHR5OmZhbHNlXFxcIj57e3NlbGVjdC5pbnB1dFZhbGlkYXRvci5lcnJvcn19PC9zcGFuPlxcclxcblxcdDxybC1idXN5IGxvYWRpbmc9XFxcInNlbGVjdC5sb2FkaW5nXFxcIj48L3JsLWJ1c3k+XFxyXFxuPC9kaXY+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvc2VsZWN0L3NlbGVjdC5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgU2lnbmF0dXJlUGFkID0gcmVxdWlyZSgnc2lnbmF0dXJlX3BhZCcpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5zaWduYXR1cmVQYWQnO1xyXG5leHBvcnRzLmRpcmVjdGl2ZU5hbWUgPSAncmxTaWduYXR1cmVQYWQnO1xyXG5mdW5jdGlvbiBzaWduYXR1cmVQYWQoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgIHRlbXBsYXRlOiBcIlxcblxcdFxcdFxcdDxjYW52YXMgY2xhc3M9XFxcInNpZ25hdHVyZS1wYWRcXFwiIG5nLWlmPVxcXCIhbmdEaXNhYmxlZFxcXCI+PC9jYW52YXM+XFxuXFx0XFx0XFx0PGltZyBuZy1zcmM9XFxcInt7bmdNb2RlbC4kdmlld1ZhbHVlfX1cXFwiIG5nLXN0eWxlPVxcXCJzdHlsZVxcXCIgbmctaWY9XFxcIm5nRGlzYWJsZWRcXFwiIC8+XFxuXFx0XFx0XCIsXHJcbiAgICAgICAgc2NvcGU6IHtcclxuICAgICAgICAgICAgcGFkOiAnPT8nLFxyXG4gICAgICAgICAgICBoZWlnaHQ6ICc9JyxcclxuICAgICAgICAgICAgd2lkdGg6ICc9JyxcclxuICAgICAgICAgICAgbmdEaXNhYmxlZDogJz0nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgbmdNb2RlbCkge1xyXG4gICAgICAgICAgICBzY29wZS4kd2F0Y2goJ25nRGlzYWJsZWQnLCBmdW5jdGlvbiAoZGlzYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIHNjb3BlLm5nTW9kZWwgPSBuZ01vZGVsO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuc3R5bGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogc2NvcGUuaGVpZ2h0ICE9IG51bGwgPyBzY29wZS5oZWlnaHQgOiAxMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBzY29wZS53aWR0aCAhPSBudWxsID8gc2NvcGUud2lkdGggOiAyMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYW52YXMgPSBlbGVtZW50LmZpbmQoJy5zaWduYXR1cmUtcGFkJykuZ2V0KDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdyZ2IoMjU1LCAyNTUsIDI1NSknLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUucGFkID0gbmV3IFNpZ25hdHVyZVBhZChjYW52YXMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBzY29wZS5oZWlnaHQgIT0gbnVsbCA/IHNjb3BlLmhlaWdodCA6IDEwMDtcclxuICAgICAgICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBzY29wZS53aWR0aCAhPSBudWxsID8gc2NvcGUud2lkdGggOiAyMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIG5nTW9kZWwuJHZpZXdWYWx1ZTsgfSwgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY29wZS5wYWQuZnJvbURhdGFVUkwodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHNjb3BlLnBhZC50b0RhdGFVUkwoKTsgfSwgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuc2lnbmF0dXJlUGFkID0gc2lnbmF0dXJlUGFkO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmRpcmVjdGl2ZShleHBvcnRzLmRpcmVjdGl2ZU5hbWUsIHNpZ25hdHVyZVBhZCk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWMybG5ibUYwZFhKbFVHRmtMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWMybG5ibUYwZFhKbFVHRmtMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxGbEJRVmtzUTBGQlF6dEJRVVZpTEVsQlFWa3NUMEZCVHl4WFFVRk5MRk5CUVZNc1EwRkJReXhEUVVGQk8wRkJSVzVETEVsQlFWa3NXVUZCV1N4WFFVRk5MR1ZCUVdVc1EwRkJReXhEUVVGQk8wRkJSVzVETEd0Q1FVRlZMRWRCUVZjc0swSkJRU3RDTEVOQlFVTTdRVUZEY2tRc2NVSkJRV0VzUjBGQlZ5eG5Ra0ZCWjBJc1EwRkJRenRCUVZsd1JEdEpRVU5ETEZsQlFWa3NRMEZCUXp0SlFVTmlMRTFCUVUwc1EwRkJRenRSUVVOT0xGRkJRVkVzUlVGQlJTeEhRVUZITzFGQlEySXNUMEZCVHl4RlFVRkZMRk5CUVZNN1VVRkRiRUlzVVVGQlVTeEZRVUZGTEhkTFFVZFVPMUZCUTBRc1MwRkJTeXhGUVVGRk8xbEJRMDRzUjBGQlJ5eEZRVUZGTEVsQlFVazdXVUZEVkN4TlFVRk5MRVZCUVVVc1IwRkJSenRaUVVOWUxFdEJRVXNzUlVGQlJTeEhRVUZITzFsQlExWXNWVUZCVlN4RlFVRkZMRWRCUVVjN1UwRkRaanRSUVVORUxFbEJRVWtzV1VGQlF5eExRVUY1UWl4RlFVTXpRaXhQUVVGcFF5eEZRVU5xUXl4TFFVRlZMRVZCUTFZc1QwRkJiVU03V1VGRGNrTXNTMEZCU3l4RFFVRkRMRTFCUVUwc1EwRkJReXhaUVVGWkxFVkJRVVVzVlVGQlF5eFJRVUZwUWp0blFrRkROVU1zUzBGQlN5eERRVUZETEU5QlFVOHNSMEZCUnl4UFFVRlBMRU5CUVVNN1owSkJRM2hDTEVWQlFVVXNRMEZCUXl4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRExFTkJRVU03YjBKQlEyUXNTMEZCU3l4RFFVRkRMRXRCUVVzc1IwRkJSenQzUWtGRFlpeE5RVUZOTEVWQlFVVXNTMEZCU3l4RFFVRkRMRTFCUVUwc1NVRkJTU3hKUVVGSkxFZEJRVWNzUzBGQlN5eERRVUZETEUxQlFVMHNSMEZCUnl4SFFVRkhPM2RDUVVOcVJDeExRVUZMTEVWQlFVVXNTMEZCU3l4RFFVRkRMRXRCUVVzc1NVRkJTU3hKUVVGSkxFZEJRVWNzUzBGQlN5eERRVUZETEV0QlFVc3NSMEZCUnl4SFFVRkhPM0ZDUVVNNVF5eERRVUZETzJkQ1FVTklMRU5CUVVNN1owSkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdiMEpCUTFBc1NVRkJTU3hOUVVGTkxFZEJRWGxETEU5QlFVOHNRMEZCUXl4SlFVRkpMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03YjBKQlEzcEdMRWxCUVVrc1QwRkJUeXhIUVVGUk8zZENRVU5zUWl4bFFVRmxMRVZCUVVVc2IwSkJRVzlDTzNGQ1FVTnlReXhEUVVGRE8yOUNRVVZHTEV0QlFVc3NRMEZCUXl4SFFVRkhMRWRCUVVjc1NVRkJTU3haUVVGWkxFTkJRVU1zVFVGQlRTeEZRVUZGTEU5QlFVOHNRMEZCUXl4RFFVRkRPMjlDUVVVNVF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4SFFVRkhMRXRCUVVzc1EwRkJReXhOUVVGTkxFbEJRVWtzU1VGQlNTeEhRVUZITEV0QlFVc3NRMEZCUXl4TlFVRk5MRWRCUVVjc1IwRkJSeXhEUVVGRE8yOUNRVU14UkN4TlFVRk5MRU5CUVVNc1MwRkJTeXhIUVVGSExFdEJRVXNzUTBGQlF5eExRVUZMTEVsQlFVa3NTVUZCU1N4SFFVRkhMRXRCUVVzc1EwRkJReXhMUVVGTExFZEJRVWNzUjBGQlJ5eERRVUZETzI5Q1FVVjJSQ3hMUVVGTExFTkJRVU1zVFVGQlRTeERRVUZETEdOQlFXZENMRTFCUVUwc1EwRkJReXhQUVVGUExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXl4RlFVRkZMRlZCUVVNc1MwRkJZVHQzUWtGRGVFVXNSVUZCUlN4RFFVRkRMRU5CUVVNc1MwRkJTeXhKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdORUpCUTI1Q0xFdEJRVXNzUTBGQlF5eEhRVUZITEVOQlFVTXNWMEZCVnl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRE8zZENRVU01UWl4RFFVRkRPMjlDUVVOR0xFTkJRVU1zUTBGQlF5eERRVUZETzI5Q1FVVklMRXRCUVVzc1EwRkJReXhOUVVGTkxFTkJRVU1zWTBGQlowSXNUVUZCVFN4RFFVRkRMRXRCUVVzc1EwRkJReXhIUVVGSExFTkJRVU1zVTBGQlV5eEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRVZCUVVVc1ZVRkJReXhMUVVGaE8zZENRVU16UlN4RlFVRkZMRU5CUVVNc1EwRkJReXhMUVVGTExFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXpzMFFrRkRia0lzVDBGQlR5eERRVUZETEdGQlFXRXNRMEZCUXl4TFFVRkxMRU5CUVVNc1EwRkJRenQzUWtGRE9VSXNRMEZCUXp0dlFrRkRSaXhEUVVGRExFTkJRVU1zUTBGQlF6dG5Ra0ZEU2l4RFFVRkRPMWxCUTBZc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRFNpeERRVUZETzB0QlEwUXNRMEZCUXp0QlFVTklMRU5CUVVNN1FVRndSR1VzYjBKQlFWa3NaVUZ2UkROQ0xFTkJRVUU3UVVGRlJDeFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMR3RDUVVGVkxFVkJRVVVzUlVGQlJTeERRVUZETzB0QlF6VkNMRk5CUVZNc1EwRkJReXh4UWtGQllTeEZRVUZGTEZsQlFWa3NRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3NpZ25hdHVyZVBhZC9zaWduYXR1cmVQYWQuanNcbiAqKiBtb2R1bGUgaWQgPSAxNzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX29ic2VydmFibGUgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JzZXJ2YWJsZTtcclxudmFyIF9fcGFyZW50Q2hpbGQgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMucGFyZW50Q2hpbGRCZWhhdmlvcjtcclxudmFyIGNhcmQgPSByZXF1aXJlKCcuL3NpbXBsZUNhcmQnKTtcclxuZXhwb3J0cy5zaW1wbGVDYXJkID0gY2FyZDtcclxudmFyIGxpc3QgPSByZXF1aXJlKCcuL3NpbXBsZUNhcmRMaXN0Jyk7XHJcbmV4cG9ydHMuc2ltcGxlQ2FyZExpc3QgPSBsaXN0O1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5zaW1wbGVDYXJkTGlzdCc7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW19fb2JzZXJ2YWJsZS5tb2R1bGVOYW1lLCBfX3BhcmVudENoaWxkLm1vZHVsZU5hbWVdKVxyXG4gICAgLmRpcmVjdGl2ZShsaXN0LmRpcmVjdGl2ZU5hbWUsIGxpc3Quc2ltcGxlQ2FyZExpc3QpXHJcbiAgICAuY29udHJvbGxlcihsaXN0LmNvbnRyb2xsZXJOYW1lLCBsaXN0LlNpbXBsZUNhcmRMaXN0Q29udHJvbGxlcilcclxuICAgIC5jb21wb25lbnQoY2FyZC5jb21wb25lbnROYW1lLCBjYXJkLnNpbXBsZUNhcmQpXHJcbiAgICAuY29udHJvbGxlcihjYXJkLmNvbnRyb2xsZXJOYW1lLCBjYXJkLlNpbXBsZUNhcmRDb250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYzJsdGNHeGxRMkZ5WkV4cGMzUXViVzlrZFd4bExtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpYzJsdGNHeGxRMkZ5WkV4cGMzUXViVzlrZFd4bExuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEZsQlFWa3NRMEZCUXp0QlFVVmlMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlJXNURMRFpEUVVGNVFpdzRRa0ZCT0VJc1EwRkJReXhEUVVGQk8wRkJRM2hFTEVsQlFVOHNXVUZCV1N4SFFVRkhMSFZEUVVGUkxFTkJRVU1zVlVGQlZTeERRVUZETzBGQlF6RkRMRWxCUVU4c1lVRkJZU3hIUVVGSExIVkRRVUZSTEVOQlFVTXNiVUpCUVcxQ0xFTkJRVU03UVVGRmNFUXNTVUZCV1N4SlFVRkpMRmRCUVUwc1kwRkJZeXhEUVVGRExFTkJRVUU3UVVGSk5VSXNhMEpCUVZVN1FVRklia0lzU1VGQldTeEpRVUZKTEZkQlFVMHNhMEpCUVd0Q0xFTkJRVU1zUTBGQlFUdEJRVWxvUXl4elFrRkJZenRCUVVkYUxHdENRVUZWTEVkQlFWY3NhVU5CUVdsRExFTkJRVU03UVVGSGJFVXNUMEZCVHl4RFFVRkRMRTFCUVUwc1EwRkJReXhyUWtGQlZTeEZRVUZGTEVOQlFVTXNXVUZCV1N4RFFVRkRMRlZCUVZVc1JVRkJSU3hoUVVGaExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTTdTMEZETjBVc1UwRkJVeXhEUVVGRExFbEJRVWtzUTBGQlF5eGhRVUZoTEVWQlFVVXNTVUZCU1N4RFFVRkRMR05CUVdNc1EwRkJRenRMUVVOc1JDeFZRVUZWTEVOQlFVTXNTVUZCU1N4RFFVRkRMR05CUVdNc1JVRkJSU3hKUVVGSkxFTkJRVU1zZDBKQlFYZENMRU5CUVVNN1MwRkRPVVFzVTBGQlV5eERRVUZETEVsQlFVa3NRMEZCUXl4aFFVRmhMRVZCUVVVc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF6dExRVU01UXl4VlFVRlZMRU5CUVVNc1NVRkJTU3hEUVVGRExHTkJRV01zUlVGQlJTeEpRVUZKTEVOQlFVTXNiMEpCUVc5Q0xFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvc2ltcGxlQ2FyZExpc3Qvc2ltcGxlQ2FyZExpc3QubW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMTc2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi90eXBpbmdzL2NvbW1vbmpzLmQudHMnIC8+XHJcbi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3MvanF1ZXJ5L2pxdWVyeS5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX3BhcmVudENoaWxkID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnBhcmVudENoaWxkQmVoYXZpb3I7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybFNpbXBsZUNhcmQnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ1NpbXBsZUNhcmRDb250cm9sbGVyJztcclxudmFyIFNpbXBsZUNhcmRDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFNpbXBsZUNhcmRDb250cm9sbGVyKCRzY29wZSwgcGFyZW50Q2hpbGQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMucGFyZW50Q2hpbGQgPSBwYXJlbnRDaGlsZDtcclxuICAgICAgICB0aGlzLnNob3dDb250ZW50ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hdXRvc2F2ZUxpbmsgPSB7fTtcclxuICAgICAgICB0aGlzLmNsb3NlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoX3RoaXMuc2hvd0NvbnRlbnQgPT09IGZhbHNlIHx8IF90aGlzLmFsd2F5c09wZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfdGhpcy5hdXRvc2F2ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBTaW1wbGVDYXJkQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh0aGlzLmNhbk9wZW4gPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbk9wZW4gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5saXN0Q29udHJvbGxlciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdENvbnRyb2xsZXIgPSB0aGlzLm5vTGlzdCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmVoYXZpb3IgPSB7XHJcbiAgICAgICAgICAgIGF1dG9zYXZlOiB0aGlzLmF1dG9zYXZlLmJpbmQodGhpcyksXHJcbiAgICAgICAgICAgIGNsb3NlOiB0aGlzLmNsb3NlLFxyXG4gICAgICAgICAgICBzZXRBbHdheXNPcGVuOiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIF90aGlzLmFsd2F5c09wZW4gPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMubGlzdENvbnRyb2xsZXIucmVnaXN0ZXJDYXJkKGJlaGF2aW9yKTtcclxuICAgICAgICB0aGlzLnBhcmVudENoaWxkLnJlZ2lzdGVyQ2hpbGRCZWhhdmlvcih0aGlzLmNoaWxkTGluaywgYmVoYXZpb3IpO1xyXG4gICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiBfdGhpcy5hbHdheXNPcGVuOyB9LCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zaG93Q29udGVudCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlQ2FyZENvbnRyb2xsZXIucHJvdG90eXBlLnRvZ2dsZUNvbnRlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvd0NvbnRlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFNpbXBsZUNhcmRDb250cm9sbGVyLnByb3RvdHlwZS5vcGVuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmNhbk9wZW4gJiYgdGhpcy5saXN0Q29udHJvbGxlci5vcGVuQ2FyZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0NvbnRlbnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBTaW1wbGVDYXJkQ29udHJvbGxlci5wcm90b3R5cGUuYXV0b3NhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnRDaGlsZC50cmlnZ2VyQ2hpbGRCZWhhdmlvcih0aGlzLmF1dG9zYXZlTGluaywgZnVuY3Rpb24gKGJlaGF2aW9yKSB7XHJcbiAgICAgICAgICAgIHZhciBjYW5DbG9zZSA9IGJlaGF2aW9yLmF1dG9zYXZlKCk7XHJcbiAgICAgICAgICAgIGlmIChjYW5DbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2hvd0NvbnRlbnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY2FuQ2xvc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlQ2FyZENvbnRyb2xsZXIucHJvdG90eXBlLm5vTGlzdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvcGVuQ2FyZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHJlZ2lzdGVyQ2FyZDogZnVuY3Rpb24gKGJlaGF2aW9yKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIFNpbXBsZUNhcmRDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsIF9fcGFyZW50Q2hpbGQuc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIFNpbXBsZUNhcmRDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLlNpbXBsZUNhcmRDb250cm9sbGVyID0gU2ltcGxlQ2FyZENvbnRyb2xsZXI7XHJcbmV4cG9ydHMuc2ltcGxlQ2FyZCA9IHtcclxuICAgIHRyYW5zY2x1ZGU6IHtcclxuICAgICAgICAnaGVhZGVyU2xvdCc6ICc/cmxDYXJkSGVhZGVyJyxcclxuICAgICAgICAnY29udGVudFNsb3QnOiAnP3JsQ2FyZENvbnRlbnQnLFxyXG4gICAgICAgICdmb290ZXJTbG90JzogJz9ybENhcmRGb290ZXInLFxyXG4gICAgfSxcclxuICAgIHJlcXVpcmU6IHsgbGlzdENvbnRyb2xsZXI6ICc/Xl5ybFNpbXBsZUNhcmRMaXN0JyB9LFxyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vc2ltcGxlQ2FyZC5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnY2FyZCcsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIG9uT3BlbjogJyYnLFxyXG4gICAgICAgIGNhbk9wZW46ICc9PycsXHJcbiAgICAgICAgYWx3YXlzT3BlbjogJz0/JyxcclxuICAgICAgICBjaGlsZExpbms6ICc9PycsXHJcbiAgICAgICAgc2F2ZTogJyYnLFxyXG4gICAgICAgIHNhdmVXaGVuSW52YWxpZDogJzw/JyxcclxuICAgICAgICBjYXJkVHlwZTogJ0AnLFxyXG4gICAgfSxcclxufTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYzJsdGNHeGxRMkZ5WkM1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJbk5wYlhCc1pVTmhjbVF1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWtGQlFVRXNNRVJCUVRCRU8wRkJRekZFTEN0RVFVRXJSRHRCUVVVdlJDeFpRVUZaTEVOQlFVTTdRVUZKWWl3MlEwRkJlVUlzT0VKQlFUaENMRU5CUVVNc1EwRkJRVHRCUVVONFJDeEpRVUZQTEdGQlFXRXNSMEZCUnl4MVEwRkJVU3hEUVVGRExHMUNRVUZ0UWl4RFFVRkRPMEZCVFhwRExIRkNRVUZoTEVkQlFWY3NZMEZCWXl4RFFVRkRPMEZCUTNaRExITkNRVUZqTEVkQlFWY3NjMEpCUVhOQ0xFTkJRVU03UVVGeFFqTkVPMGxCWlVNc09FSkJRVzlDTEUxQlFYTkNMRVZCUXpsQ0xGZEJRWE5FTzFGQmFFSnVSU3hwUWtFMlJrTTdVVUU1Ulc5Q0xGZEJRVTBzUjBGQlRpeE5RVUZOTEVOQlFXZENPMUZCUXpsQ0xHZENRVUZYTEVkQlFWZ3NWMEZCVnl4RFFVRXlRenRSUVU1c1JTeG5Ra0ZCVnl4SFFVRlpMRXRCUVVzc1EwRkJRenRSUVVNM1FpeHBRa0ZCV1N4SFFVRnBSQ3hGUVVGRkxFTkJRVU03VVVGdlJHaEZMRlZCUVVzc1IwRkJiMEk3V1VGRGVFSXNSVUZCUlN4RFFVRkRMRU5CUVVNc1MwRkJTU3hEUVVGRExGZEJRVmNzUzBGQlN5eExRVUZMTEVsQlFVa3NTMEZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEyNUVMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU03V1VGRFlpeERRVUZETzFsQlJVUXNUVUZCVFN4RFFVRkRMRXRCUVVrc1EwRkJReXhSUVVGUkxFVkJRVVVzUTBGQlF6dFJRVU40UWl4RFFVRkRMRU5CUVVFN1NVRnlSRzlGTEVOQlFVTTdTVUZGZEVVc2MwTkJRVThzUjBGQlVEdFJRVUZCTEdsQ1FUUkNRenRSUVROQ1FTeEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1QwRkJUeXhKUVVGSkxFbEJRVWtzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZETVVJc1NVRkJTU3hEUVVGRExFOUJRVThzUjBGQlJ5eEpRVUZKTEVOQlFVTTdVVUZEY2tJc1EwRkJRenRSUVVWRUxFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4alFVRmpMRWxCUVVrc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlF6dFpRVU5xUXl4SlFVRkpMRU5CUVVNc1kwRkJZeXhIUVVGSExFbEJRVWtzUTBGQlF5eE5RVUZOTEVWQlFVVXNRMEZCUXp0UlFVTnlReXhEUVVGRE8xRkJSVVFzU1VGQlNTeFJRVUZSTEVkQlFYZENPMWxCUTI1RExGRkJRVkVzUlVGQlJTeEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU03V1VGRGJFTXNTMEZCU3l4RlFVRkZMRWxCUVVrc1EwRkJReXhMUVVGTE8xbEJRMnBDTEdGQlFXRXNSVUZCUlN4VlFVRkRMRXRCUVdNN1owSkJRemRDTEV0QlFVa3NRMEZCUXl4VlFVRlZMRWRCUVVjc1MwRkJTeXhEUVVGRE8xbEJRM3BDTEVOQlFVTTdVMEZEUkN4RFFVRkRPMUZCUlVZc1NVRkJTU3hEUVVGRExHTkJRV01zUTBGQlF5eFpRVUZaTEVOQlFVTXNVVUZCVVN4RFFVRkRMRU5CUVVNN1VVRkZNME1zU1VGQlNTeERRVUZETEZkQlFWY3NRMEZCUXl4eFFrRkJjVUlzUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RlFVRkZMRkZCUVZFc1EwRkJReXhEUVVGRE8xRkJSV3BGTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExHTkJRV2xDTEUxQlFVMHNRMEZCUXl4TFFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU1zUTBGQlF5eEZRVUZGTEZWQlFVTXNTMEZCWXp0WlFVTTNSU3hGUVVGRkxFTkJRVU1zUTBGQlF5eExRVUZMTEVOQlFVTXNRMEZCUXl4RFFVRkRPMmRDUVVOWUxFdEJRVWtzUTBGQlF5eFhRVUZYTEVkQlFVY3NTVUZCU1N4RFFVRkRPMWxCUTNwQ0xFTkJRVU03V1VGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0blFrRkRVQ3hMUVVGSkxFTkJRVU1zUzBGQlN5eEZRVUZGTEVOQlFVTTdXVUZEWkN4RFFVRkRPMUZCUTBZc1EwRkJReXhEUVVGRExFTkJRVU03U1VGRFNpeERRVUZETzBsQlJVUXNORU5CUVdFc1IwRkJZanRSUVVORExFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4WFFVRlhMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRM1JDTEVsQlFVa3NRMEZCUXl4TFFVRkxMRVZCUVVVc1EwRkJRenRSUVVOa0xFTkJRVU03VVVGQlF5eEpRVUZKTEVOQlFVTXNRMEZCUXp0WlFVTlFMRWxCUVVrc1EwRkJReXhKUVVGSkxFVkJRVVVzUTBGQlF6dFJRVU5pTEVOQlFVTTdTVUZEUml4RFFVRkRPMGxCUlVRc2JVTkJRVWtzUjBGQlNqdFJRVU5ETEVWQlFVVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhQUVVGUExFbEJRVWtzU1VGQlNTeERRVUZETEdOQlFXTXNRMEZCUXl4UlFVRlJMRVZCUVVVc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGNFUXNTVUZCU1N4RFFVRkRMRmRCUVZjc1IwRkJSeXhKUVVGSkxFTkJRVU03V1VGRGVFSXNTVUZCU1N4RFFVRkRMRTFCUVUwc1JVRkJSU3hEUVVGRE8xRkJRMllzUTBGQlF6dEpRVU5HTEVOQlFVTTdTVUZWVHl4MVEwRkJVU3hIUVVGb1FqdFJRVUZCTEdsQ1FWVkRPMUZCVkVFc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNiMEpCUVc5Q0xFTkJRVU1zU1VGQlNTeERRVUZETEZsQlFWa3NSVUZCUlN4VlFVRkRMRkZCUVRKQ08xbEJRek5HTEVsQlFVa3NVVUZCVVN4SFFVRlpMRkZCUVZFc1EwRkJReXhSUVVGUkxFVkJRVVVzUTBGQlF6dFpRVVUxUXl4RlFVRkZMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eERRVUZETzJkQ1FVTmtMRXRCUVVrc1EwRkJReXhYUVVGWExFZEJRVWNzUzBGQlN5eERRVUZETzFsQlF6RkNMRU5CUVVNN1dVRkZSQ3hOUVVGTkxFTkJRVU1zVVVGQlVTeERRVUZETzFGQlEycENMRU5CUVVNc1EwRkJReXhEUVVGRE8wbEJRMG9zUTBGQlF6dEpRVVZQTEhGRFFVRk5MRWRCUVdRN1VVRkRReXhOUVVGTkxFTkJRVU03V1VGRFRpeFJRVUZSTzJkQ1FVTlFMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU03V1VGRFlpeERRVUZETzFsQlEwUXNXVUZCV1N4WlFVRkRMRkZCUVdFN1owSkJRM3BDTEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNN1dVRkRZaXhEUVVGRE8xTkJRMFFzUTBGQlF6dEpRVU5JTEVOQlFVTTdTVUU1UlUwc05FSkJRVThzUjBGQllTeERRVUZETEZGQlFWRXNSVUZCUlN4aFFVRmhMRU5CUVVNc1YwRkJWeXhEUVVGRExFTkJRVU03U1VFclJXeEZMREpDUVVGRE8wRkJRVVFzUTBGQlF5eEJRVGRHUkN4SlFUWkdRenRCUVRkR1dTdzBRa0ZCYjBJc2RVSkJOa1pvUXl4RFFVRkJPMEZCUlZVc2EwSkJRVlVzUjBGQk9FSTdTVUZEYkVRc1ZVRkJWU3hGUVVGUE8xRkJRMmhDTEZsQlFWa3NSVUZCUlN4bFFVRmxPMUZCUXpkQ0xHRkJRV0VzUlVGQlJTeG5Ra0ZCWjBJN1VVRkRMMElzV1VGQldTeEZRVUZGTEdWQlFXVTdTMEZETjBJN1NVRkRSQ3hQUVVGUExFVkJRVVVzUlVGQlJTeGpRVUZqTEVWQlFVVXNjVUpCUVhGQ0xFVkJRVVU3U1VGRGJFUXNVVUZCVVN4RlFVRkZMRTlCUVU4c1EwRkJReXh0UWtGQmJVSXNRMEZCUXp0SlFVTjBReXhWUVVGVkxFVkJRVVVzYzBKQlFXTTdTVUZETVVJc1dVRkJXU3hGUVVGRkxFMUJRVTA3U1VGRGNFSXNVVUZCVVN4RlFVRkZPMUZCUTFRc1RVRkJUU3hGUVVGRkxFZEJRVWM3VVVGRFdDeFBRVUZQTEVWQlFVVXNTVUZCU1R0UlFVTmlMRlZCUVZVc1JVRkJSU3hKUVVGSk8xRkJRMmhDTEZOQlFWTXNSVUZCUlN4SlFVRkpPMUZCUTJZc1NVRkJTU3hGUVVGRkxFZEJRVWM3VVVGRFZDeGxRVUZsTEVWQlFVVXNTVUZCU1R0UlFVTnlRaXhSUVVGUkxFVkJRVVVzUjBGQlJ6dExRVU5pTzBOQlEwUXNRMEZCUXlKOVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9zaW1wbGVDYXJkTGlzdC9zaW1wbGVDYXJkLmpzXG4gKiogbW9kdWxlIGlkID0gMTc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiY2FyZCBjb2wteHMtMTIge3tjYXJkLmNhcmRUeXBlfX1cXFwiPlxcclxcblxcdDxkaXYgY2xhc3M9XFxcImhlYWRlciByb3dcXFwiIG5nLWNsYXNzPVxcXCJ7ICdhY3RpdmUnOiBjYXJkLmNhbk9wZW4gJiYgIWNhcmQuYWx3YXlzT3BlbiwgJ2Vycm9yJzogY2FyZEZvcm0uJGludmFsaWQgfVxcXCIgbmctY2xpY2s9XFxcImNhcmQudG9nZ2xlQ29udGVudCgpXFxcIj5cXHJcXG5cXHRcXHQ8ZGl2IG5nLXRyYW5zY2x1ZGU9XFxcImhlYWRlclNsb3RcXFwiPjwvZGl2PlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcImNsZWFyZml4XFxcIj48L2Rpdj5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG5cXHJcXG5cXHQ8bmctZm9ybSBuYW1lPVxcXCJjYXJkRm9ybVxcXCIgcmwtYXV0b3NhdmU9XFxcImNhcmQuYXV0b3NhdmVMaW5rXFxcIiBzYXZlPVxcXCJjYXJkLnNhdmUoKVxcXCIgc2F2ZS13aGVuLWludmFsaWQ9XFxcImNhcmQuc2F2ZVdoZW5JbnZhbGlkXFxcIj5cXHJcXG5cXHRcXHQ8ZGl2IG5nLXNob3c9XFxcImNhcmQuc2hvd0NvbnRlbnQgfHwgY2FyZC5hbHdheXNPcGVuXFxcIj5cXHJcXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJib2R5IHJvd1xcXCI+XFxyXFxuXFx0XFx0XFx0XFx0PGRpdiBuZy10cmFuc2NsdWRlPVxcXCJjb250ZW50U2xvdFxcXCI+PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiY2xlYXJmaXhcXFwiPjwvZGl2PlxcclxcblxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdFxcdDxkaXYgY2xhc3M9XFxcImZvb3RlciByb3dcXFwiPlxcclxcblxcdFxcdFxcdFxcdDxkaXYgbmctdHJhbnNjbHVkZT1cXFwiZm9vdGVyU2xvdFxcXCI+PC9kaXY+XFxyXFxuXFx0XFx0XFx0XFx0PGRpdiBjbGFzcz1cXFwiY2xlYXJmaXhcXFwiPjwvZGl2PlxcclxcblxcdFxcdFxcdDwvZGl2PlxcclxcblxcdFxcdDwvZGl2PlxcclxcblxcdDwvbmctZm9ybT5cXHJcXG48L2Rpdj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy9zaW1wbGVDYXJkTGlzdC9zaW1wbGVDYXJkLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fb2JzZXJ2YWJsZSA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5vYnNlcnZhYmxlO1xyXG5leHBvcnRzLmRpcmVjdGl2ZU5hbWUgPSAncmxTaW1wbGVDYXJkTGlzdCc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnU2ltcGxlQ2FyZExpc3RDb250cm9sbGVyJztcclxudmFyIFNpbXBsZUNhcmRMaXN0Q29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaW1wbGVDYXJkTGlzdENvbnRyb2xsZXIoJHNjb3BlLCAkYXR0cnMsICRwYXJzZSwgb2JzZXJ2YWJsZUZhY3RvcnkpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZSA9IG9ic2VydmFibGVGYWN0b3J5LmdldEluc3RhbmNlKCk7XHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7IHJldHVybiAkcGFyc2UoJGF0dHJzLmFsd2F5c09wZW4pKCRzY29wZSk7IH0sIGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBfdGhpcy5hbHdheXNPcGVuID0gdmFsdWU7XHJcbiAgICAgICAgICAgIF90aGlzLm9ic2VydmFibGUuZmlyZSgnYWx3YXlzT3BlbicsIHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFNpbXBsZUNhcmRMaXN0Q29udHJvbGxlci5wcm90b3R5cGUucmVnaXN0ZXJDYXJkID0gZnVuY3Rpb24gKGJlaGF2aW9yKSB7XHJcbiAgICAgICAgYmVoYXZpb3Iuc2V0QWx3YXlzT3Blbih0aGlzLmFsd2F5c09wZW4pO1xyXG4gICAgICAgIHZhciB1bnJlZ2lzdGVyRnVuY3Rpb25zID0gW107XHJcbiAgICAgICAgdW5yZWdpc3RlckZ1bmN0aW9ucy5wdXNoKHRoaXMub2JzZXJ2YWJsZS5yZWdpc3RlcihiZWhhdmlvci5jbG9zZSwgJ2Nsb3NlJykpO1xyXG4gICAgICAgIHVucmVnaXN0ZXJGdW5jdGlvbnMucHVzaCh0aGlzLm9ic2VydmFibGUucmVnaXN0ZXIoYmVoYXZpb3Iuc2V0QWx3YXlzT3BlbiwgJ2Fsd2F5c09wZW4nKSk7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgXy5lYWNoKHVucmVnaXN0ZXJGdW5jdGlvbnMsIGZ1bmN0aW9uICh1bnJlZ2lzdGVyKSB7XHJcbiAgICAgICAgICAgICAgICB1bnJlZ2lzdGVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlQ2FyZExpc3RDb250cm9sbGVyLnByb3RvdHlwZS5vcGVuQ2FyZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gXy5ldmVyeSh0aGlzLm9ic2VydmFibGUuZmlyZSgnY2xvc2UnKSk7XHJcbiAgICB9O1xyXG4gICAgU2ltcGxlQ2FyZExpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckYXR0cnMnLCAnJHBhcnNlJywgX19vYnNlcnZhYmxlLmZhY3RvcnlOYW1lXTtcclxuICAgIHJldHVybiBTaW1wbGVDYXJkTGlzdENvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuU2ltcGxlQ2FyZExpc3RDb250cm9sbGVyID0gU2ltcGxlQ2FyZExpc3RDb250cm9sbGVyO1xyXG5mdW5jdGlvbiBzaW1wbGVDYXJkTGlzdCgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgcmVzdHJpY3Q6ICdBRScsXHJcbiAgICAgICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5zaW1wbGVDYXJkTGlzdCA9IHNpbXBsZUNhcmRMaXN0O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljMmx0Y0d4bFEyRnlaRXhwYzNRdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUp6YVcxd2JHVkRZWEprVEdsemRDNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4WlFVRlpMRU5CUVVNN1FVRkhZaXhKUVVGWkxFTkJRVU1zVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVVTFRaXcyUTBGQmVVSXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlFUdEJRVU40UkN4SlFVRlBMRmxCUVZrc1IwRkJSeXgxUTBGQlVTeERRVUZETEZWQlFWVXNRMEZCUXp0QlFVa3ZRaXh4UWtGQllTeEhRVUZYTEd0Q1FVRnJRaXhEUVVGRE8wRkJRek5ETEhOQ1FVRmpMRWRCUVZjc01FSkJRVEJDTEVOQlFVTTdRVUZYTDBRN1NVRkxReXhyUTBGQldTeE5RVUZ6UWl4RlFVTXZRaXhOUVVGcFF5eEZRVU5xUXl4TlFVRTJRaXhGUVVNM1FpeHBRa0ZCZVVRN1VVRlNOMFFzYVVKQmJVTkRPMUZCTVVKRExFbEJRVWtzUTBGQlF5eFZRVUZWTEVkQlFVY3NhVUpCUVdsQ0xFTkJRVU1zVjBGQlZ5eEZRVUZGTEVOQlFVTTdVVUZGYkVRc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF5eGpRVUZwUWl4TlFVRk5MRU5CUVVNc1RVRkJUU3hEUVVGRExFMUJRVTBzUTBGQlF5eFZRVUZWTEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeFZRVUZETEV0QlFXTTdXVUZETVVZc1MwRkJTU3hEUVVGRExGVkJRVlVzUjBGQlJ5eExRVUZMTEVOQlFVTTdXVUZEZUVJc1MwRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eEpRVUZKTEVOQlFVTXNXVUZCV1N4RlFVRkZMRXRCUVVzc1EwRkJReXhEUVVGRE8xRkJRek5ETEVOQlFVTXNRMEZCUXl4RFFVRkRPMGxCUTBvc1EwRkJRenRKUVVWRUxDdERRVUZaTEVkQlFWb3NWVUZCWVN4UlFVRTJRanRSUVVONlF5eFJRVUZSTEVOQlFVTXNZVUZCWVN4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dFJRVVY0UXl4SlFVRkpMRzFDUVVGdFFpeEhRVUYxUXl4RlFVRkZMRU5CUVVNN1VVRkZha1VzYlVKQlFXMUNMRU5CUVVNc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTXNVVUZCVVN4RFFVRkRMRkZCUVZFc1EwRkJReXhMUVVGTExFVkJRVVVzVDBGQlR5eERRVUZETEVOQlFVTXNRMEZCUXp0UlFVTTFSU3h0UWtGQmJVSXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eFJRVUZSTEVOQlFVTXNVVUZCVVN4RFFVRkRMR0ZCUVdFc1JVRkJSU3haUVVGWkxFTkJRVU1zUTBGQlF5eERRVUZETzFGQlJYcEdMRTFCUVUwc1EwRkJRenRaUVVOT0xFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNiVUpCUVcxQ0xFVkJRVVVzVlVGQlF5eFZRVUUwUXp0blFrRkRlRVVzVlVGQlZTeEZRVUZGTEVOQlFVTTdXVUZEWkN4RFFVRkRMRU5CUVVNc1EwRkJRenRSUVVOS0xFTkJRVU1zUTBGQlF6dEpRVU5JTEVOQlFVTTdTVUZGUkN3eVEwRkJVU3hIUVVGU08xRkJRME1zVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4TFFVRkxMRU5CUVZrc1NVRkJTU3hEUVVGRExGVkJRVlVzUTBGQlF5eEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVNeFJDeERRVUZETzBsQk9VSk5MR2REUVVGUExFZEJRV0VzUTBGQlF5eFJRVUZSTEVWQlFVVXNVVUZCVVN4RlFVRkZMRkZCUVZFc1JVRkJSU3haUVVGWkxFTkJRVU1zVjBGQlZ5eERRVUZETEVOQlFVTTdTVUVyUW5KR0xDdENRVUZETzBGQlFVUXNRMEZCUXl4QlFXNURSQ3hKUVcxRFF6dEJRVzVEV1N4blEwRkJkMElzTWtKQmJVTndReXhEUVVGQk8wRkJSVVE3U1VGRFF5eFpRVUZaTEVOQlFVTTdTVUZEWWl4TlFVRk5MRU5CUVVNN1VVRkRUaXhSUVVGUkxFVkJRVVVzU1VGQlNUdFJRVU5rTEZWQlFWVXNSVUZCUlN4elFrRkJZenRMUVVNeFFpeERRVUZETzBGQlEwZ3NRMEZCUXp0QlFVNWxMSE5DUVVGakxHbENRVTAzUWl4RFFVRkJJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3NpbXBsZUNhcmRMaXN0L3NpbXBsZUNhcmRMaXN0LmpzXG4gKiogbW9kdWxlIGlkID0gMTc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi90eXBpbmdzL2Jvb3RzdHJhcC10b3VjaHNwaW4vYm9vdHN0cmFwLXRvdWNoc3Bpbi5kLnRzJyAvPlxyXG4vLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi90eXBpbmdzL2pxdWVyeS9qcXVlcnkuZC50cycgLz5cclxuLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnJlcXVpcmUoJy4uLy4uLy4uL2xpYnJhcmllcy9ib290c3RyYXAtdG91Y2hzcGluL2luZGV4Jyk7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19zdHJpbmcgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMuc3RyaW5nO1xyXG52YXIgX19udW1iZXIgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMubnVtYmVyO1xyXG52YXIgaW5wdXRfMSA9IHJlcXVpcmUoJy4uL2lucHV0L2lucHV0Jyk7XHJcbnZhciBjb21wb25lbnRWYWxpZGF0b3Jfc2VydmljZV8xID0gcmVxdWlyZSgnLi4vLi4vc2VydmljZXMvY29tcG9uZW50VmFsaWRhdG9yL2NvbXBvbmVudFZhbGlkYXRvci5zZXJ2aWNlJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLnNwaW5uZXInO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxTcGlubmVyJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdTcGlubmVyQ29udHJvbGxlcic7XHJcbmV4cG9ydHMuZGVmYXVsdE1heFZhbHVlID0gMTAwMDAwMDAwMDAwMDAwMDAwMDAwO1xyXG52YXIgU3Bpbm5lckNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKFNwaW5uZXJDb250cm9sbGVyLCBfc3VwZXIpO1xyXG4gICAgZnVuY3Rpb24gU3Bpbm5lckNvbnRyb2xsZXIoJHNjb3BlLCAkYXR0cnMsIGNvbXBvbmVudFZhbGlkYXRvckZhY3RvcnksICRlbGVtZW50LCAkdGltZW91dCkge1xyXG4gICAgICAgIF9zdXBlci5jYWxsKHRoaXMsICRzY29wZSwgJGF0dHJzLCBjb21wb25lbnRWYWxpZGF0b3JGYWN0b3J5KTtcclxuICAgICAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgdGhpcy4kdGltZW91dCA9ICR0aW1lb3V0O1xyXG4gICAgICAgIHRoaXMuaW5wdXRUeXBlID0gJ3NwaW5uZXInO1xyXG4gICAgfVxyXG4gICAgU3Bpbm5lckNvbnRyb2xsZXIucHJvdG90eXBlLiRwb3N0TGluayA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHZhciB1bmJpbmRXYXRjaGVzO1xyXG4gICAgICAgIHRoaXMuJHNjb3BlLiR3YXRjaCgnc3Bpbm5lci5uZ0Rpc2FibGVkJywgZnVuY3Rpb24gKGRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIGlmIChkaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih1bmJpbmRXYXRjaGVzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVuYmluZFdhdGNoZXMoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHNwaW5uZXIgYWZ0ZXIgJHRpbWVvdXQgdG8gZ2l2ZSBhbmd1bGFyIGEgY2hhbmNlIGluaXRpYWxpemUgbmdNb2RlbFxyXG4gICAgICAgICAgICAgICAgX3RoaXMuJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3VjaHNwaW4gPSBfdGhpcy4kZWxlbWVudC5maW5kKCdpbnB1dC5zcGlubmVyJykuVG91Y2hTcGluKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluOiAoX3RoaXMubWluICE9IG51bGwgPyBfdGhpcy5taW4gOiAwKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4OiAoX3RoaXMubWF4ICE9IG51bGwgPyBfdGhpcy5tYXggOiBleHBvcnRzLmRlZmF1bHRNYXhWYWx1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXA6IF90aGlzLnN0ZXAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeDogX3RoaXMucHJlZml4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0Zml4OiBfdGhpcy5wb3N0Zml4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWNpbWFsczogX3RoaXMuZGVjaW1hbHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXR2YWw6IF90aGlzLm5nTW9kZWwuJHZpZXdWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VzdGVwZGl2aXNpYmlsaXR5OiBfdGhpcy5yb3VuZFRvU3RlcCA/ICdyb3VuZCcgOiAnbm9uZScsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG91Y2hzcGluLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwaW5WYWx1ZSA9IHRvdWNoc3Bpbi52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm5nTW9kZWwuJHNldFZpZXdWYWx1ZShfX3N0cmluZy5zdHJpbmdVdGlsaXR5LnRvTnVtYmVyKHNwaW5WYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdW5iaW5kVmlld1dhdGNoID0gX3RoaXMuJHNjb3BlLiR3YXRjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5uZ01vZGVsLiR2aWV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdWNoc3Bpbi52YWwobmV3VmFsdWUgIT0gbnVsbCA/IG5ld1ZhbHVlLnRvU3RyaW5nKCkgOiAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVuYmluZE1vZGVsV2F0Y2ggPSBfdGhpcy4kc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLm5nTW9kZWwuJG1vZGVsVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKG5ld01vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm5nTW9kZWwuJG1vZGVsVmFsdWUgPSBfdGhpcy5yb3VuZChuZXdNb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdW5iaW5kV2F0Y2hlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdW5iaW5kVmlld1dhdGNoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuYmluZE1vZGVsV2F0Y2goKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBTcGlubmVyQ29udHJvbGxlci5wcm90b3R5cGUucm91bmQgPSBmdW5jdGlvbiAobnVtKSB7XHJcbiAgICAgICAgaWYgKG51bSAhPSBudWxsICYmIHRoaXMucm91bmRUb1N0ZXApIHtcclxuICAgICAgICAgICAgbnVtID0gX19udW1iZXIubnVtYmVyVXRpbGl0eS5yb3VuZFRvU3RlcChudW0sIHRoaXMuc3RlcCk7XHJcbiAgICAgICAgICAgIG51bSA9IF9fbnVtYmVyLm51bWJlclV0aWxpdHkucHJlY2lzZVJvdW5kKG51bSwgdGhpcy5kZWNpbWFscyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudW07XHJcbiAgICB9O1xyXG4gICAgU3Bpbm5lckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRhdHRycycsIGNvbXBvbmVudFZhbGlkYXRvcl9zZXJ2aWNlXzEuZmFjdG9yeU5hbWUsICckZWxlbWVudCcsICckdGltZW91dCddO1xyXG4gICAgcmV0dXJuIFNwaW5uZXJDb250cm9sbGVyO1xyXG59KGlucHV0XzEuSW5wdXRDb250cm9sbGVyKSk7XHJcbmV4cG9ydHMuU3Bpbm5lckNvbnRyb2xsZXIgPSBTcGlubmVyQ29udHJvbGxlcjtcclxudmFyIHNwaW5uZXIgPSBpbnB1dF8xLmJ1aWxkSW5wdXQoe1xyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vc3Bpbm5lci5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnc3Bpbm5lcicsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIG1pbjogJzw/JyxcclxuICAgICAgICBtYXg6ICc8PycsXHJcbiAgICAgICAgc3RlcDogJzw/JyxcclxuICAgICAgICBkZWNpbWFsczogJzw/JyxcclxuICAgICAgICBwcmVmaXg6ICdAJyxcclxuICAgICAgICBwb3N0Zml4OiAnQCcsXHJcbiAgICAgICAgcm91bmRUb1N0ZXA6ICc8PycsXHJcbiAgICAgICAgbmdEaXNhYmxlZDogJzw/JyxcclxuICAgICAgICBzcGlubmVySWQ6ICdAJyxcclxuICAgIH0sXHJcbn0pO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtpbnB1dF8xLm1vZHVsZU5hbWVdKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIHNwaW5uZXIpXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBTcGlubmVyQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWMzQnBibTVsY2k1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJbk53YVc1dVpYSXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc2VVWkJRWGxHTzBGQlEzcEdMQ3RFUVVFclJEdEJRVU12UkN3d1JFRkJNRVE3UVVGRk1VUXNXVUZCV1N4RFFVRkRPenM3T3pzN1FVRkZZaXhSUVVGUExEaERRVUU0UXl4RFFVRkRMRU5CUVVFN1FVRkhkRVFzU1VGQldTeFBRVUZQTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkZia01zTmtOQlFYbENMRGhDUVVFNFFpeERRVUZETEVOQlFVRTdRVUZGZUVRc1NVRkJUeXhSUVVGUkxFZEJRVWNzZFVOQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkRiRU1zU1VGQlR5eFJRVUZSTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhOUVVGTkxFTkJRVU03UVVGSGJFTXNjMEpCUVhsR0xHZENRVUZuUWl4RFFVRkRMRU5CUVVFN1FVRkRNVWNzTWtOQlFYbEdMRGhFUVVFNFJDeERRVUZETEVOQlFVRTdRVUZMTjBrc2EwSkJRVlVzUjBGQlZ5d3dRa0ZCTUVJc1EwRkJRenRCUVVOb1JDeHhRa0ZCWVN4SFFVRlhMRmRCUVZjc1EwRkJRenRCUVVOd1F5eHpRa0ZCWXl4SFFVRlhMRzFDUVVGdFFpeERRVUZETzBGQlJUZERMSFZDUVVGbExFZEJRVmNzY1VKQlFYRkNMRU5CUVVNN1FVRnRRak5FTzBsQlFYVkRMSEZEUVVGbE8wbEJXWEpFTERKQ1FVRlpMRTFCUVhOQ0xFVkJRemxDTEUxQlFYZENMRVZCUTNoQ0xIbENRVUZ4UkN4RlFVTTNReXhSUVVGclF5eEZRVU5zUXl4UlFVRnBRenRSUVVNMVF5eHJRa0ZCVFN4TlFVRk5MRVZCUVVVc1RVRkJUU3hGUVVGRkxIbENRVUY1UWl4RFFVRkRMRU5CUVVNN1VVRkdkRU1zWVVGQlVTeEhRVUZTTEZGQlFWRXNRMEZCTUVJN1VVRkRiRU1zWVVGQlVTeEhRVUZTTEZGQlFWRXNRMEZCZVVJN1VVRkhOVU1zU1VGQlNTeERRVUZETEZOQlFWTXNSMEZCUnl4VFFVRlRMRU5CUVVNN1NVRkROVUlzUTBGQlF6dEpRVVZFTEhGRFFVRlRMRWRCUVZRN1VVRkJRU3hwUWtFclEwTTdVVUU1UTBFc1NVRkJTU3hoUVVGMVFpeERRVUZETzFGQlF6VkNMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEc5Q1FVRnZRaXhGUVVGRkxGVkJRVU1zVVVGQmFVSTdXVUZETVVRc1JVRkJSU3hEUVVGRExFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNRMEZCUXp0blFrRkRaQ3hGUVVGRkxFTkJRVU1zUTBGQlF5eERRVUZETEVOQlFVTXNWVUZCVlN4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRExFTkJRVU1zUTBGQlF6dHZRa0ZEYWtNc1lVRkJZU3hGUVVGRkxFTkJRVU03WjBKQlEycENMRU5CUVVNN1dVRkRSaXhEUVVGRE8xbEJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdaMEpCUTFBc2IwWkJRVzlHTzJkQ1FVTndSaXhMUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETzI5Q1FVTmlMRWxCUVVrc1UwRkJVeXhIUVVGWExFdEJRVWtzUTBGQlF5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMR1ZCUVdVc1EwRkJReXhEUVVGRExGTkJRVk1zUTBGQlF6dDNRa0ZEY2tVc1IwRkJSeXhGUVVGRkxFTkJRVU1zUzBGQlNTeERRVUZETEVkQlFVY3NTVUZCU1N4SlFVRkpMRWRCUVVjc1MwRkJTU3hEUVVGRExFZEJRVWNzUjBGQlJ5eERRVUZETEVOQlFVTTdkMEpCUTNSRExFZEJRVWNzUlVGQlJTeERRVUZETEV0QlFVa3NRMEZCUXl4SFFVRkhMRWxCUVVrc1NVRkJTU3hIUVVGSExFdEJRVWtzUTBGQlF5eEhRVUZITEVkQlFVY3NkVUpCUVdVc1EwRkJRenQzUWtGRGNFUXNTVUZCU1N4RlFVRkZMRXRCUVVrc1EwRkJReXhKUVVGSk8zZENRVU5tTEUxQlFVMHNSVUZCUlN4TFFVRkpMRU5CUVVNc1RVRkJUVHQzUWtGRGJrSXNUMEZCVHl4RlFVRkZMRXRCUVVrc1EwRkJReXhQUVVGUE8zZENRVU55UWl4UlFVRlJMRVZCUVVVc1MwRkJTU3hEUVVGRExGRkJRVkU3ZDBKQlEzWkNMRTlCUVU4c1JVRkJSU3hMUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEZWQlFWVTdkMEpCUTJoRExIRkNRVUZ4UWl4RlFVRkZMRXRCUVVrc1EwRkJReXhYUVVGWExFZEJRVWNzVDBGQlR5eEhRVUZITEUxQlFVMDdjVUpCUXpGRUxFTkJRVU1zUTBGQlF6dHZRa0ZGU0N4VFFVRlRMRU5CUVVNc1JVRkJSU3hEUVVGRExGRkJRVkVzUlVGQlJUdDNRa0ZEZEVJc1MwRkJTU3hEUVVGRExFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTTdORUpCUTJ4Q0xFbEJRVWtzVTBGQlV5eEhRVUZYTEZOQlFWTXNRMEZCUXl4SFFVRkhMRVZCUVVVc1EwRkJRenMwUWtGRGVFTXNTMEZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhoUVVGaExFTkJRVU1zVVVGQlVTeERRVUZETEdGQlFXRXNRMEZCUXl4UlFVRlJMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVU1zUTBGQlF6dDNRa0ZEZUVVc1EwRkJReXhEUVVGRExFTkJRVU03YjBKQlEwb3NRMEZCUXl4RFFVRkRMRU5CUVVNN2IwSkJSVWdzU1VGQlNTeGxRVUZsTEVkQlFVY3NTMEZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU03ZDBKQlEzaERMRTFCUVUwc1EwRkJReXhMUVVGSkxFTkJRVU1zVDBGQlR5eERRVUZETEZWQlFWVXNRMEZCUXp0dlFrRkRhRU1zUTBGQlF5eEZRVUZGTEZWQlFVTXNVVUZCWVR0M1FrRkRhRUlzVTBGQlV5eERRVUZETEVkQlFVY3NRMEZCUXl4UlFVRlJMRWxCUVVrc1NVRkJTU3hIUVVGSExGRkJRVkVzUTBGQlF5eFJRVUZSTEVWQlFVVXNSMEZCUnl4RlFVRkZMRU5CUVVNc1EwRkJRenR2UWtGRE5VUXNRMEZCUXl4RFFVRkRMRU5CUVVNN2IwSkJSVWdzU1VGQlNTeG5Ra0ZCWjBJc1IwRkJSeXhMUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXp0M1FrRkRla01zVFVGQlRTeERRVUZETEV0QlFVa3NRMEZCUXl4UFFVRlBMRU5CUVVNc1YwRkJWeXhEUVVGRE8yOUNRVU5xUXl4RFFVRkRMRVZCUVVVc1ZVRkJReXhSUVVGaE8zZENRVU5vUWl4TFFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExGZEJRVmNzUjBGQlJ5eExRVUZKTEVOQlFVTXNTMEZCU3l4RFFVRkRMRkZCUVZFc1EwRkJReXhEUVVGRE8yOUNRVU5xUkN4RFFVRkRMRU5CUVVNc1EwRkJRenR2UWtGRlNDeGhRVUZoTEVkQlFVYzdkMEpCUTJZc1pVRkJaU3hGUVVGRkxFTkJRVU03ZDBKQlEyeENMR2RDUVVGblFpeEZRVUZGTEVOQlFVTTdiMEpCUTNCQ0xFTkJRVU1zUTBGQlFUdG5Ra0ZEUml4RFFVRkRMRU5CUVVNc1EwRkJRenRaUVVOS0xFTkJRVU03VVVGRFJpeERRVUZETEVOQlFVTXNRMEZCUXp0SlFVTktMRU5CUVVNN1NVRkZUeXhwUTBGQlN5eEhRVUZpTEZWQlFXTXNSMEZCVnp0UlFVTjRRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eEhRVUZITEVsQlFVa3NTVUZCU1N4SlFVRkpMRWxCUVVrc1EwRkJReXhYUVVGWExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEzSkRMRWRCUVVjc1IwRkJSeXhSUVVGUkxFTkJRVU1zWVVGQllTeERRVUZETEZkQlFWY3NRMEZCUXl4SFFVRkhMRVZCUVVVc1NVRkJTU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzFsQlEzcEVMRWRCUVVjc1IwRkJSeXhSUVVGUkxFTkJRVU1zWVVGQllTeERRVUZETEZsQlFWa3NRMEZCUXl4SFFVRkhMRVZCUVVVc1NVRkJTU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFGQlF5OUVMRU5CUVVNN1VVRkZSQ3hOUVVGTkxFTkJRVU1zUjBGQlJ5eERRVUZETzBsQlExb3NRMEZCUXp0SlFXNUZUU3g1UWtGQlR5eEhRVUZoTEVOQlFVTXNVVUZCVVN4RlFVRkZMRkZCUVZFc1JVRkJSU3gzUTBGQk5rSXNSVUZCUlN4VlFVRlZMRVZCUVVVc1ZVRkJWU3hEUVVGRExFTkJRVU03U1VGdlJYaEhMSGRDUVVGRE8wRkJRVVFzUTBGQlF5eEJRUzlGUkN4RFFVRjFReXgxUWtGQlpTeEhRU3RGY2tRN1FVRXZSVmtzZVVKQlFXbENMRzlDUVN0Rk4wSXNRMEZCUVR0QlFVVkVMRWxCUVVrc1QwRkJUeXhIUVVFNFFpeHJRa0ZCVlN4RFFVRkRPMGxCUTI1RUxGRkJRVkVzUlVGQlJTeFBRVUZQTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU03U1VGRGJrTXNWVUZCVlN4RlFVRkZMSE5DUVVGak8wbEJRekZDTEZsQlFWa3NSVUZCUlN4VFFVRlRPMGxCUTNaQ0xGRkJRVkVzUlVGQlJUdFJRVU5VTEVkQlFVY3NSVUZCUlN4SlFVRkpPMUZCUTFRc1IwRkJSeXhGUVVGRkxFbEJRVWs3VVVGRFZDeEpRVUZKTEVWQlFVVXNTVUZCU1R0UlFVTldMRkZCUVZFc1JVRkJSU3hKUVVGSk8xRkJRMlFzVFVGQlRTeEZRVUZGTEVkQlFVYzdVVUZEV0N4UFFVRlBMRVZCUVVVc1IwRkJSenRSUVVOYUxGZEJRVmNzUlVGQlJTeEpRVUZKTzFGQlEycENMRlZCUVZVc1JVRkJSU3hKUVVGSk8xRkJRMmhDTEZOQlFWTXNSVUZCUlN4SFFVRkhPMHRCUTJRN1EwRkRSQ3hEUVVGRExFTkJRVU03UVVGRlNDeFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMR3RDUVVGVkxFVkJRVVVzUTBGQlF5eHJRa0ZCVnl4RFFVRkRMRU5CUVVNN1MwRkRka01zVTBGQlV5eERRVUZETEhGQ1FVRmhMRVZCUVVVc1QwRkJUeXhEUVVGRE8wdEJRMnBETEZWQlFWVXNRMEZCUXl4elFrRkJZeXhGUVVGRkxHbENRVUZwUWl4RFFVRkRMRU5CUVVNaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvc3Bpbm5lci9zcGlubmVyLmpzXG4gKiogbW9kdWxlIGlkID0gMTgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJqUXVlcnkgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuXHJcbnJlcXVpcmUoJy4vanF1ZXJ5LmJvb3RzdHJhcC10b3VjaHNwaW4uY3NzJyk7XHJcbnJlcXVpcmUoJy4vanF1ZXJ5LmJvb3RzdHJhcC10b3VjaHNwaW4nKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vbGlicmFyaWVzL2Jvb3RzdHJhcC10b3VjaHNwaW4vaW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxODFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vanF1ZXJ5LmJvb3RzdHJhcC10b3VjaHNwaW4uY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2pxdWVyeS5ib290c3RyYXAtdG91Y2hzcGluLmNzc1wiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL2pxdWVyeS5ib290c3RyYXAtdG91Y2hzcGluLmNzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2xpYnJhcmllcy9ib290c3RyYXAtdG91Y2hzcGluL2pxdWVyeS5ib290c3RyYXAtdG91Y2hzcGluLmNzc1xuICoqIG1vZHVsZSBpZCA9IDE4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIvKlxcclxcbiAqICBCb290c3RyYXAgVG91Y2hTcGluIC0gdjMuMC4xXFxyXFxuICogIEEgbW9iaWxlIGFuZCB0b3VjaCBmcmllbmRseSBpbnB1dCBzcGlubmVyIGNvbXBvbmVudCBmb3IgQm9vdHN0cmFwIDMuXFxyXFxuICogIGh0dHA6Ly93d3cudmlydHVvc29mdC5ldS9jb2RlL2Jvb3RzdHJhcC10b3VjaHNwaW4vXFxyXFxuICpcXHJcXG4gKiAgTWFkZSBieSBJc3R2w6FuIFVqai1Nw6lzesOhcm9zXFxyXFxuICogIFVuZGVyIEFwYWNoZSBMaWNlbnNlIHYyLjAgTGljZW5zZVxcclxcbiAqL1xcclxcblxcclxcbi5ib290c3RyYXAtdG91Y2hzcGluIC5pbnB1dC1ncm91cC1idG4tdmVydGljYWwge1xcclxcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcXHJcXG4gIHdpZHRoOiAxJTtcXHJcXG4gIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XFxyXFxuICBkaXNwbGF5OiB0YWJsZS1jZWxsO1xcclxcbn1cXHJcXG5cXHJcXG4uYm9vdHN0cmFwLXRvdWNoc3BpbiAuaW5wdXQtZ3JvdXAtYnRuLXZlcnRpY2FsID4gLmJ0biB7XFxyXFxuICBkaXNwbGF5OiBibG9jaztcXHJcXG4gIGZsb2F0OiBub25lO1xcclxcbiAgd2lkdGg6IDEwMCU7XFxyXFxuICBtYXgtd2lkdGg6IDEwMCU7XFxyXFxuICBwYWRkaW5nOiA4cHggMTBweDtcXHJcXG4gIG1hcmdpbi1sZWZ0OiAtMXB4O1xcclxcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcclxcbn1cXHJcXG5cXHJcXG4uYm9vdHN0cmFwLXRvdWNoc3BpbiAuaW5wdXQtZ3JvdXAtYnRuLXZlcnRpY2FsIC5ib290c3RyYXAtdG91Y2hzcGluLXVwIHtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IDA7XFxyXFxuICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uYm9vdHN0cmFwLXRvdWNoc3BpbiAuaW5wdXQtZ3JvdXAtYnRuLXZlcnRpY2FsIC5ib290c3RyYXAtdG91Y2hzcGluLWRvd24ge1xcclxcbiAgbWFyZ2luLXRvcDogLTJweDtcXHJcXG4gIGJvcmRlci1yYWRpdXM6IDA7XFxyXFxuICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogNHB4O1xcclxcbn1cXHJcXG5cXHJcXG4uYm9vdHN0cmFwLXRvdWNoc3BpbiAuaW5wdXQtZ3JvdXAtYnRuLXZlcnRpY2FsIGkge1xcclxcbiAgcG9zaXRpb246IGFic29sdXRlO1xcclxcbiAgdG9wOiAzcHg7XFxyXFxuICBsZWZ0OiA1cHg7XFxyXFxuICBmb250LXNpemU6IDlweDtcXHJcXG4gIGZvbnQtd2VpZ2h0OiBub3JtYWw7XFxyXFxufVxcclxcblwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9saWJyYXJpZXMvYm9vdHN0cmFwLXRvdWNoc3Bpbi9qcXVlcnkuYm9vdHN0cmFwLXRvdWNoc3Bpbi5jc3NcbiAqKiBtb2R1bGUgaWQgPSAxODNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qXHJcbiAqICBCb290c3RyYXAgVG91Y2hTcGluIC0gdjMuMC4xXHJcbiAqICBBIG1vYmlsZSBhbmQgdG91Y2ggZnJpZW5kbHkgaW5wdXQgc3Bpbm5lciBjb21wb25lbnQgZm9yIEJvb3RzdHJhcCAzLlxyXG4gKiAgaHR0cDovL3d3dy52aXJ0dW9zb2Z0LmV1L2NvZGUvYm9vdHN0cmFwLXRvdWNoc3Bpbi9cclxuICpcclxuICogIE1hZGUgYnkgSXN0dsOhbiBVamotTcOpc3rDoXJvc1xyXG4gKiAgVW5kZXIgQXBhY2hlIExpY2Vuc2UgdjIuMCBMaWNlbnNlXHJcbiAqL1xyXG4oZnVuY3Rpb24oJCkge1xyXG4gICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgdmFyIF9jdXJyZW50U3Bpbm5lcklkID0gMDtcclxuXHJcbiAgZnVuY3Rpb24gX3Njb3BlZEV2ZW50TmFtZShuYW1lLCBpZCkge1xyXG4gICAgcmV0dXJuIG5hbWUgKyAnLnRvdWNoc3Bpbl8nICsgaWQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBfc2NvcGVFdmVudE5hbWVzKG5hbWVzLCBpZCkge1xyXG4gICAgcmV0dXJuICQubWFwKG5hbWVzLCBmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgIHJldHVybiBfc2NvcGVkRXZlbnROYW1lKG5hbWUsIGlkKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgJC5mbi5Ub3VjaFNwaW4gPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcblxyXG4gICAgaWYgKG9wdGlvbnMgPT09ICdkZXN0cm95Jykge1xyXG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIG9yaWdpbmFsaW5wdXQgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICBvcmlnaW5hbGlucHV0X2RhdGEgPSBvcmlnaW5hbGlucHV0LmRhdGEoKTtcclxuICAgICAgICAkKGRvY3VtZW50KS5vZmYoX3Njb3BlRXZlbnROYW1lcyhbXHJcbiAgICAgICAgICAnbW91c2V1cCcsXHJcbiAgICAgICAgICAndG91Y2hlbmQnLFxyXG4gICAgICAgICAgJ3RvdWNoY2FuY2VsJyxcclxuICAgICAgICAgICdtb3VzZW1vdmUnLFxyXG4gICAgICAgICAgJ3RvdWNobW92ZScsXHJcbiAgICAgICAgICAnc2Nyb2xsJyxcclxuICAgICAgICAgICdzY3JvbGxzdGFydCddLCBvcmlnaW5hbGlucHV0X2RhdGEuc3Bpbm5lcmlkKS5qb2luKCcgJykpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBkZWZhdWx0cyA9IHtcclxuICAgICAgbWluOiAwLFxyXG4gICAgICBtYXg6IDEwMCxcclxuICAgICAgaW5pdHZhbDogJycsXHJcbiAgICAgIHN0ZXA6IDEsXHJcbiAgICAgIGRlY2ltYWxzOiAwLFxyXG4gICAgICBzdGVwaW50ZXJ2YWw6IDEwMCxcclxuICAgICAgZm9yY2VzdGVwZGl2aXNpYmlsaXR5OiAncm91bmQnLCAvLyBub25lIHwgZmxvb3IgfCByb3VuZCB8IGNlaWxcclxuICAgICAgc3RlcGludGVydmFsZGVsYXk6IDUwMCxcclxuICAgICAgdmVydGljYWxidXR0b25zOiBmYWxzZSxcclxuICAgICAgdmVydGljYWx1cGNsYXNzOiAnZ2x5cGhpY29uIGdseXBoaWNvbi1jaGV2cm9uLXVwJyxcclxuICAgICAgdmVydGljYWxkb3duY2xhc3M6ICdnbHlwaGljb24gZ2x5cGhpY29uLWNoZXZyb24tZG93bicsXHJcbiAgICAgIHByZWZpeDogJycsXHJcbiAgICAgIHBvc3RmaXg6ICcnLFxyXG4gICAgICBwcmVmaXhfZXh0cmFjbGFzczogJycsXHJcbiAgICAgIHBvc3RmaXhfZXh0cmFjbGFzczogJycsXHJcbiAgICAgIGJvb3N0ZXI6IHRydWUsXHJcbiAgICAgIGJvb3N0YXQ6IDEwLFxyXG4gICAgICBtYXhib29zdGVkc3RlcDogZmFsc2UsXHJcbiAgICAgIG1vdXNld2hlZWw6IHRydWUsXHJcbiAgICAgIGJ1dHRvbmRvd25fY2xhc3M6ICdidG4gYnRuLWRlZmF1bHQnLFxyXG4gICAgICBidXR0b251cF9jbGFzczogJ2J0biBidG4tZGVmYXVsdCcsXHJcblx0ICBidXR0b25kb3duX3R4dDogJy0nLFxyXG5cdCAgYnV0dG9udXBfdHh0OiAnKydcclxuICAgIH07XHJcblxyXG4gICAgdmFyIGF0dHJpYnV0ZU1hcCA9IHtcclxuICAgICAgbWluOiAnbWluJyxcclxuICAgICAgbWF4OiAnbWF4JyxcclxuICAgICAgaW5pdHZhbDogJ2luaXQtdmFsJyxcclxuICAgICAgc3RlcDogJ3N0ZXAnLFxyXG4gICAgICBkZWNpbWFsczogJ2RlY2ltYWxzJyxcclxuICAgICAgc3RlcGludGVydmFsOiAnc3RlcC1pbnRlcnZhbCcsXHJcbiAgICAgIHZlcnRpY2FsYnV0dG9uczogJ3ZlcnRpY2FsLWJ1dHRvbnMnLFxyXG4gICAgICB2ZXJ0aWNhbHVwY2xhc3M6ICd2ZXJ0aWNhbC11cC1jbGFzcycsXHJcbiAgICAgIHZlcnRpY2FsZG93bmNsYXNzOiAndmVydGljYWwtZG93bi1jbGFzcycsXHJcbiAgICAgIGZvcmNlc3RlcGRpdmlzaWJpbGl0eTogJ2ZvcmNlLXN0ZXAtZGl2aXNpYmlsaXR5JyxcclxuICAgICAgc3RlcGludGVydmFsZGVsYXk6ICdzdGVwLWludGVydmFsLWRlbGF5JyxcclxuICAgICAgcHJlZml4OiAncHJlZml4JyxcclxuICAgICAgcG9zdGZpeDogJ3Bvc3RmaXgnLFxyXG4gICAgICBwcmVmaXhfZXh0cmFjbGFzczogJ3ByZWZpeC1leHRyYS1jbGFzcycsXHJcbiAgICAgIHBvc3RmaXhfZXh0cmFjbGFzczogJ3Bvc3RmaXgtZXh0cmEtY2xhc3MnLFxyXG4gICAgICBib29zdGVyOiAnYm9vc3RlcicsXHJcbiAgICAgIGJvb3N0YXQ6ICdib29zdGF0JyxcclxuICAgICAgbWF4Ym9vc3RlZHN0ZXA6ICdtYXgtYm9vc3RlZC1zdGVwJyxcclxuICAgICAgbW91c2V3aGVlbDogJ21vdXNlLXdoZWVsJyxcclxuICAgICAgYnV0dG9uZG93bl9jbGFzczogJ2J1dHRvbi1kb3duLWNsYXNzJyxcclxuICAgICAgYnV0dG9udXBfY2xhc3M6ICdidXR0b24tdXAtY2xhc3MnLFxyXG5cdCAgYnV0dG9uZG93bl90eHQ6ICdidXR0b24tZG93bi10eHQnLFxyXG5cdCAgYnV0dG9udXBfdHh0OiAnYnV0dG9uLXVwLXR4dCdcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgIHZhciBzZXR0aW5ncyxcclxuICAgICAgICAgIG9yaWdpbmFsaW5wdXQgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgb3JpZ2luYWxpbnB1dF9kYXRhID0gb3JpZ2luYWxpbnB1dC5kYXRhKCksXHJcbiAgICAgICAgICBjb250YWluZXIsXHJcbiAgICAgICAgICBlbGVtZW50cyxcclxuICAgICAgICAgIHZhbHVlLFxyXG4gICAgICAgICAgZG93blNwaW5UaW1lcixcclxuICAgICAgICAgIHVwU3BpblRpbWVyLFxyXG4gICAgICAgICAgZG93bkRlbGF5VGltZW91dCxcclxuICAgICAgICAgIHVwRGVsYXlUaW1lb3V0LFxyXG4gICAgICAgICAgc3BpbmNvdW50ID0gMCxcclxuICAgICAgICAgIHNwaW5uaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICBpbml0KCk7XHJcblxyXG5cclxuICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICBpZiAob3JpZ2luYWxpbnB1dC5kYXRhKCdhbHJlYWR5aW5pdGlhbGl6ZWQnKSkge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgb3JpZ2luYWxpbnB1dC5kYXRhKCdhbHJlYWR5aW5pdGlhbGl6ZWQnLCB0cnVlKTtcclxuICAgICAgICBfY3VycmVudFNwaW5uZXJJZCArPSAxO1xyXG4gICAgICAgIG9yaWdpbmFsaW5wdXQuZGF0YSgnc3Bpbm5lcmlkJywgX2N1cnJlbnRTcGlubmVySWQpO1xyXG5cclxuXHJcbiAgICAgICAgaWYgKCFvcmlnaW5hbGlucHV0LmlzKCdpbnB1dCcpKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTXVzdCBiZSBhbiBpbnB1dC4nKTtcclxuICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9pbml0U2V0dGluZ3MoKTtcclxuICAgICAgICBfc2V0SW5pdHZhbCgpO1xyXG4gICAgICAgIF9jaGVja1ZhbHVlKCk7XHJcbiAgICAgICAgX2J1aWxkSHRtbCgpO1xyXG4gICAgICAgIF9pbml0RWxlbWVudHMoKTtcclxuICAgICAgICBfaGlkZUVtcHR5UHJlZml4UG9zdGZpeCgpO1xyXG4gICAgICAgIF9iaW5kRXZlbnRzKCk7XHJcbiAgICAgICAgX2JpbmRFdmVudHNJbnRlcmZhY2UoKTtcclxuICAgICAgICBlbGVtZW50cy5pbnB1dC5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gX3NldEluaXR2YWwoKSB7XHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmluaXR2YWwgIT09ICcnICYmIG9yaWdpbmFsaW5wdXQudmFsKCkgPT09ICcnKSB7XHJcbiAgICAgICAgICBvcmlnaW5hbGlucHV0LnZhbChzZXR0aW5ncy5pbml0dmFsKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIGNoYW5nZVNldHRpbmdzKG5ld3NldHRpbmdzKSB7XHJcbiAgICAgICAgX3VwZGF0ZVNldHRpbmdzKG5ld3NldHRpbmdzKTtcclxuICAgICAgICBfY2hlY2tWYWx1ZSgpO1xyXG5cclxuICAgICAgICB2YXIgdmFsdWUgPSBlbGVtZW50cy5pbnB1dC52YWwoKTtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlICE9PSAnJykge1xyXG4gICAgICAgICAgdmFsdWUgPSBOdW1iZXIoZWxlbWVudHMuaW5wdXQudmFsKCkpO1xyXG4gICAgICAgICAgZWxlbWVudHMuaW5wdXQudmFsKHZhbHVlLnRvRml4ZWQoc2V0dGluZ3MuZGVjaW1hbHMpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9pbml0U2V0dGluZ3MoKSB7XHJcbiAgICAgICAgc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9yaWdpbmFsaW5wdXRfZGF0YSwgX3BhcnNlQXR0cmlidXRlcygpLCBvcHRpb25zKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gX3BhcnNlQXR0cmlidXRlcygpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHt9O1xyXG4gICAgICAgICQuZWFjaChhdHRyaWJ1dGVNYXAsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgIHZhciBhdHRyTmFtZSA9ICdidHMtJyArIHZhbHVlICsgJyc7XHJcbiAgICAgICAgICBpZiAob3JpZ2luYWxpbnB1dC5pcygnW2RhdGEtJyArIGF0dHJOYW1lICsgJ10nKSkge1xyXG4gICAgICAgICAgICBkYXRhW2tleV0gPSBvcmlnaW5hbGlucHV0LmRhdGEoYXR0ck5hbWUpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBfdXBkYXRlU2V0dGluZ3MobmV3c2V0dGluZ3MpIHtcclxuICAgICAgICBzZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCBzZXR0aW5ncywgbmV3c2V0dGluZ3MpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBfYnVpbGRIdG1sKCkge1xyXG4gICAgICAgIHZhciBpbml0dmFsID0gb3JpZ2luYWxpbnB1dC52YWwoKSxcclxuICAgICAgICAgICAgcGFyZW50ZWxlbWVudCA9IG9yaWdpbmFsaW5wdXQucGFyZW50KCk7XHJcblxyXG4gICAgICAgIGlmIChpbml0dmFsICE9PSAnJykge1xyXG4gICAgICAgICAgaW5pdHZhbCA9IE51bWJlcihpbml0dmFsKS50b0ZpeGVkKHNldHRpbmdzLmRlY2ltYWxzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9yaWdpbmFsaW5wdXQuZGF0YSgnaW5pdHZhbHVlJywgaW5pdHZhbCkudmFsKGluaXR2YWwpO1xyXG4gICAgICAgIG9yaWdpbmFsaW5wdXQuYWRkQ2xhc3MoJ2Zvcm0tY29udHJvbCcpO1xyXG5cclxuICAgICAgICBpZiAocGFyZW50ZWxlbWVudC5oYXNDbGFzcygnaW5wdXQtZ3JvdXAnKSkge1xyXG4gICAgICAgICAgX2FkdmFuY2VJbnB1dEdyb3VwKHBhcmVudGVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIF9idWlsZElucHV0R3JvdXAoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9hZHZhbmNlSW5wdXRHcm91cChwYXJlbnRlbGVtZW50KSB7XHJcbiAgICAgICAgcGFyZW50ZWxlbWVudC5hZGRDbGFzcygnYm9vdHN0cmFwLXRvdWNoc3BpbicpO1xyXG5cclxuICAgICAgICB2YXIgcHJldiA9IG9yaWdpbmFsaW5wdXQucHJldigpLFxyXG4gICAgICAgICAgICBuZXh0ID0gb3JpZ2luYWxpbnB1dC5uZXh0KCk7XHJcblxyXG4gICAgICAgIHZhciBkb3duaHRtbCxcclxuICAgICAgICAgICAgdXBodG1sLFxyXG4gICAgICAgICAgICBwcmVmaXhodG1sID0gJzxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYWRkb24gYm9vdHN0cmFwLXRvdWNoc3Bpbi1wcmVmaXhcIj4nICsgc2V0dGluZ3MucHJlZml4ICsgJzwvc3Bhbj4nLFxyXG4gICAgICAgICAgICBwb3N0Zml4aHRtbCA9ICc8c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWFkZG9uIGJvb3RzdHJhcC10b3VjaHNwaW4tcG9zdGZpeFwiPicgKyBzZXR0aW5ncy5wb3N0Zml4ICsgJzwvc3Bhbj4nO1xyXG5cclxuICAgICAgICBpZiAocHJldi5oYXNDbGFzcygnaW5wdXQtZ3JvdXAtYnRuJykpIHtcclxuICAgICAgICAgIGRvd25odG1sID0gJzxidXR0b24gY2xhc3M9XCInICsgc2V0dGluZ3MuYnV0dG9uZG93bl9jbGFzcyArICcgYm9vdHN0cmFwLXRvdWNoc3Bpbi1kb3duXCIgdHlwZT1cImJ1dHRvblwiPicgKyBzZXR0aW5ncy5idXR0b25kb3duX3R4dCArICc8L2J1dHRvbj4nO1xyXG4gICAgICAgICAgcHJldi5hcHBlbmQoZG93bmh0bWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGRvd25odG1sID0gJzxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYnRuXCI+PGJ1dHRvbiBjbGFzcz1cIicgKyBzZXR0aW5ncy5idXR0b25kb3duX2NsYXNzICsgJyBib290c3RyYXAtdG91Y2hzcGluLWRvd25cIiB0eXBlPVwiYnV0dG9uXCI+JyArIHNldHRpbmdzLmJ1dHRvbmRvd25fdHh0ICsgJzwvYnV0dG9uPjwvc3Bhbj4nO1xyXG4gICAgICAgICAgJChkb3duaHRtbCkuaW5zZXJ0QmVmb3JlKG9yaWdpbmFsaW5wdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5leHQuaGFzQ2xhc3MoJ2lucHV0LWdyb3VwLWJ0bicpKSB7XHJcbiAgICAgICAgICB1cGh0bWwgPSAnPGJ1dHRvbiBjbGFzcz1cIicgKyBzZXR0aW5ncy5idXR0b251cF9jbGFzcyArICcgYm9vdHN0cmFwLXRvdWNoc3Bpbi11cFwiIHR5cGU9XCJidXR0b25cIj4nICsgc2V0dGluZ3MuYnV0dG9udXBfdHh0ICsgJzwvYnV0dG9uPic7XHJcbiAgICAgICAgICBuZXh0LnByZXBlbmQodXBodG1sKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICB1cGh0bWwgPSAnPHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1idG5cIj48YnV0dG9uIGNsYXNzPVwiJyArIHNldHRpbmdzLmJ1dHRvbnVwX2NsYXNzICsgJyBib290c3RyYXAtdG91Y2hzcGluLXVwXCIgdHlwZT1cImJ1dHRvblwiPicgKyBzZXR0aW5ncy5idXR0b251cF90eHQgKyAnPC9idXR0b24+PC9zcGFuPic7XHJcbiAgICAgICAgICAkKHVwaHRtbCkuaW5zZXJ0QWZ0ZXIob3JpZ2luYWxpbnB1dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKHByZWZpeGh0bWwpLmluc2VydEJlZm9yZShvcmlnaW5hbGlucHV0KTtcclxuICAgICAgICAkKHBvc3RmaXhodG1sKS5pbnNlcnRBZnRlcihvcmlnaW5hbGlucHV0KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyID0gcGFyZW50ZWxlbWVudDtcclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gX2J1aWxkSW5wdXRHcm91cCgpIHtcclxuICAgICAgICB2YXIgaHRtbDtcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLnZlcnRpY2FsYnV0dG9ucykge1xyXG4gICAgICAgICAgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgYm9vdHN0cmFwLXRvdWNoc3BpblwiPjxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYWRkb24gYm9vdHN0cmFwLXRvdWNoc3Bpbi1wcmVmaXhcIj4nICsgc2V0dGluZ3MucHJlZml4ICsgJzwvc3Bhbj48c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWFkZG9uIGJvb3RzdHJhcC10b3VjaHNwaW4tcG9zdGZpeFwiPicgKyBzZXR0aW5ncy5wb3N0Zml4ICsgJzwvc3Bhbj48c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWJ0bi12ZXJ0aWNhbFwiPjxidXR0b24gY2xhc3M9XCInICsgc2V0dGluZ3MuYnV0dG9uZG93bl9jbGFzcyArICcgYm9vdHN0cmFwLXRvdWNoc3Bpbi11cFwiIHR5cGU9XCJidXR0b25cIj48aSBjbGFzcz1cIicgKyBzZXR0aW5ncy52ZXJ0aWNhbHVwY2xhc3MgKyAnXCI+PC9pPjwvYnV0dG9uPjxidXR0b24gY2xhc3M9XCInICsgc2V0dGluZ3MuYnV0dG9udXBfY2xhc3MgKyAnIGJvb3RzdHJhcC10b3VjaHNwaW4tZG93blwiIHR5cGU9XCJidXR0b25cIj48aSBjbGFzcz1cIicgKyBzZXR0aW5ncy52ZXJ0aWNhbGRvd25jbGFzcyArICdcIj48L2k+PC9idXR0b24+PC9zcGFuPjwvZGl2Pic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgaHRtbCA9ICc8ZGl2IGNsYXNzPVwiaW5wdXQtZ3JvdXAgYm9vdHN0cmFwLXRvdWNoc3BpblwiPjxzcGFuIGNsYXNzPVwiaW5wdXQtZ3JvdXAtYnRuXCI+PGJ1dHRvbiBjbGFzcz1cIicgKyBzZXR0aW5ncy5idXR0b25kb3duX2NsYXNzICsgJyBib290c3RyYXAtdG91Y2hzcGluLWRvd25cIiB0eXBlPVwiYnV0dG9uXCI+JyArIHNldHRpbmdzLmJ1dHRvbmRvd25fdHh0ICsgJzwvYnV0dG9uPjwvc3Bhbj48c3BhbiBjbGFzcz1cImlucHV0LWdyb3VwLWFkZG9uIGJvb3RzdHJhcC10b3VjaHNwaW4tcHJlZml4XCI+JyArIHNldHRpbmdzLnByZWZpeCArICc8L3NwYW4+PHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1hZGRvbiBib290c3RyYXAtdG91Y2hzcGluLXBvc3RmaXhcIj4nICsgc2V0dGluZ3MucG9zdGZpeCArICc8L3NwYW4+PHNwYW4gY2xhc3M9XCJpbnB1dC1ncm91cC1idG5cIj48YnV0dG9uIGNsYXNzPVwiJyArIHNldHRpbmdzLmJ1dHRvbnVwX2NsYXNzICsgJyBib290c3RyYXAtdG91Y2hzcGluLXVwXCIgdHlwZT1cImJ1dHRvblwiPicgKyBzZXR0aW5ncy5idXR0b251cF90eHQgKyAnPC9idXR0b24+PC9zcGFuPjwvZGl2Pic7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb250YWluZXIgPSAkKGh0bWwpLmluc2VydEJlZm9yZShvcmlnaW5hbGlucHV0KTtcclxuXHJcbiAgICAgICAgJCgnLmJvb3RzdHJhcC10b3VjaHNwaW4tcHJlZml4JywgY29udGFpbmVyKS5hZnRlcihvcmlnaW5hbGlucHV0KTtcclxuXHJcbiAgICAgICAgaWYgKG9yaWdpbmFsaW5wdXQuaGFzQ2xhc3MoJ2lucHV0LXNtJykpIHtcclxuICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygnaW5wdXQtZ3JvdXAtc20nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAob3JpZ2luYWxpbnB1dC5oYXNDbGFzcygnaW5wdXQtbGcnKSkge1xyXG4gICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdpbnB1dC1ncm91cC1sZycpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gX2luaXRFbGVtZW50cygpIHtcclxuICAgICAgICBlbGVtZW50cyA9IHtcclxuICAgICAgICAgIGRvd246ICQoJy5ib290c3RyYXAtdG91Y2hzcGluLWRvd24nLCBjb250YWluZXIpLFxyXG4gICAgICAgICAgdXA6ICQoJy5ib290c3RyYXAtdG91Y2hzcGluLXVwJywgY29udGFpbmVyKSxcclxuICAgICAgICAgIGlucHV0OiAkKCdpbnB1dCcsIGNvbnRhaW5lciksXHJcbiAgICAgICAgICBwcmVmaXg6ICQoJy5ib290c3RyYXAtdG91Y2hzcGluLXByZWZpeCcsIGNvbnRhaW5lcikuYWRkQ2xhc3Moc2V0dGluZ3MucHJlZml4X2V4dHJhY2xhc3MpLFxyXG4gICAgICAgICAgcG9zdGZpeDogJCgnLmJvb3RzdHJhcC10b3VjaHNwaW4tcG9zdGZpeCcsIGNvbnRhaW5lcikuYWRkQ2xhc3Moc2V0dGluZ3MucG9zdGZpeF9leHRyYWNsYXNzKVxyXG4gICAgICAgIH07XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9oaWRlRW1wdHlQcmVmaXhQb3N0Zml4KCkge1xyXG4gICAgICAgIGlmIChzZXR0aW5ncy5wcmVmaXggPT09ICcnKSB7XHJcbiAgICAgICAgICBlbGVtZW50cy5wcmVmaXguaGlkZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLnBvc3RmaXggPT09ICcnKSB7XHJcbiAgICAgICAgICBlbGVtZW50cy5wb3N0Zml4LmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9iaW5kRXZlbnRzKCkge1xyXG4gICAgICAgIG9yaWdpbmFsaW5wdXQub24oJ2tleWRvd24nLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgdmFyIGNvZGUgPSBldi5rZXlDb2RlIHx8IGV2LndoaWNoO1xyXG5cclxuICAgICAgICAgIGlmIChjb2RlID09PSAzOCkge1xyXG4gICAgICAgICAgICBpZiAoc3Bpbm5pbmcgIT09ICd1cCcpIHtcclxuICAgICAgICAgICAgICB1cE9uY2UoKTtcclxuICAgICAgICAgICAgICBzdGFydFVwU3BpbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmIChjb2RlID09PSA0MCkge1xyXG4gICAgICAgICAgICBpZiAoc3Bpbm5pbmcgIT09ICdkb3duJykge1xyXG4gICAgICAgICAgICAgIGRvd25PbmNlKCk7XHJcbiAgICAgICAgICAgICAgc3RhcnREb3duU3BpbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG9yaWdpbmFsaW5wdXQub24oJ2tleXVwJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIHZhciBjb2RlID0gZXYua2V5Q29kZSB8fCBldi53aGljaDtcclxuXHJcbiAgICAgICAgICBpZiAoY29kZSA9PT0gMzgpIHtcclxuICAgICAgICAgICAgc3RvcFNwaW4oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPT09IDQwKSB7XHJcbiAgICAgICAgICAgIHN0b3BTcGluKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG9yaWdpbmFsaW5wdXQub24oJ2JsdXInLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIF9jaGVja1ZhbHVlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLmRvd24ub24oJ2tleWRvd24nLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgdmFyIGNvZGUgPSBldi5rZXlDb2RlIHx8IGV2LndoaWNoO1xyXG5cclxuICAgICAgICAgIGlmIChjb2RlID09PSAzMiB8fCBjb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICBpZiAoc3Bpbm5pbmcgIT09ICdkb3duJykge1xyXG4gICAgICAgICAgICAgIGRvd25PbmNlKCk7XHJcbiAgICAgICAgICAgICAgc3RhcnREb3duU3BpbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLmRvd24ub24oJ2tleXVwJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIHZhciBjb2RlID0gZXYua2V5Q29kZSB8fCBldi53aGljaDtcclxuXHJcbiAgICAgICAgICBpZiAoY29kZSA9PT0gMzIgfHwgY29kZSA9PT0gMTMpIHtcclxuICAgICAgICAgICAgc3RvcFNwaW4oKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWxlbWVudHMudXAub24oJ2tleWRvd24nLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgdmFyIGNvZGUgPSBldi5rZXlDb2RlIHx8IGV2LndoaWNoO1xyXG5cclxuICAgICAgICAgIGlmIChjb2RlID09PSAzMiB8fCBjb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICBpZiAoc3Bpbm5pbmcgIT09ICd1cCcpIHtcclxuICAgICAgICAgICAgICB1cE9uY2UoKTtcclxuICAgICAgICAgICAgICBzdGFydFVwU3BpbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLnVwLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICB2YXIgY29kZSA9IGV2LmtleUNvZGUgfHwgZXYud2hpY2g7XHJcblxyXG4gICAgICAgICAgaWYgKGNvZGUgPT09IDMyIHx8IGNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgIHN0b3BTcGluKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLmRvd24ub24oJ21vdXNlZG93bi50b3VjaHNwaW4nLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgZWxlbWVudHMuZG93bi5vZmYoJ3RvdWNoc3RhcnQudG91Y2hzcGluJyk7ICAvLyBhbmRyb2lkIDQgd29ya2Fyb3VuZFxyXG5cclxuICAgICAgICAgIGlmIChvcmlnaW5hbGlucHV0LmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZG93bk9uY2UoKTtcclxuICAgICAgICAgIHN0YXJ0RG93blNwaW4oKTtcclxuXHJcbiAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLmRvd24ub24oJ3RvdWNoc3RhcnQudG91Y2hzcGluJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIGVsZW1lbnRzLmRvd24ub2ZmKCdtb3VzZWRvd24udG91Y2hzcGluJyk7ICAvLyBhbmRyb2lkIDQgd29ya2Fyb3VuZFxyXG5cclxuICAgICAgICAgIGlmIChvcmlnaW5hbGlucHV0LmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZG93bk9uY2UoKTtcclxuICAgICAgICAgIHN0YXJ0RG93blNwaW4oKTtcclxuXHJcbiAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLnVwLm9uKCdtb3VzZWRvd24udG91Y2hzcGluJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIGVsZW1lbnRzLnVwLm9mZigndG91Y2hzdGFydC50b3VjaHNwaW4nKTsgIC8vIGFuZHJvaWQgNCB3b3JrYXJvdW5kXHJcblxyXG4gICAgICAgICAgaWYgKG9yaWdpbmFsaW5wdXQuaXMoJzpkaXNhYmxlZCcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB1cE9uY2UoKTtcclxuICAgICAgICAgIHN0YXJ0VXBTcGluKCk7XHJcblxyXG4gICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBlbGVtZW50cy51cC5vbigndG91Y2hzdGFydC50b3VjaHNwaW4nLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgZWxlbWVudHMudXAub2ZmKCdtb3VzZWRvd24udG91Y2hzcGluJyk7ICAvLyBhbmRyb2lkIDQgd29ya2Fyb3VuZFxyXG5cclxuICAgICAgICAgIGlmIChvcmlnaW5hbGlucHV0LmlzKCc6ZGlzYWJsZWQnKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgdXBPbmNlKCk7XHJcbiAgICAgICAgICBzdGFydFVwU3BpbigpO1xyXG5cclxuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWxlbWVudHMudXAub24oJ21vdXNlb3V0IHRvdWNobGVhdmUgdG91Y2hlbmQgdG91Y2hjYW5jZWwnLCBmdW5jdGlvbihldikge1xyXG4gICAgICAgICAgaWYgKCFzcGlubmluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICBzdG9wU3BpbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBlbGVtZW50cy5kb3duLm9uKCdtb3VzZW91dCB0b3VjaGxlYXZlIHRvdWNoZW5kIHRvdWNoY2FuY2VsJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIGlmICghc3Bpbm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgc3RvcFNwaW4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZWxlbWVudHMuZG93bi5vbignbW91c2Vtb3ZlIHRvdWNobW92ZScsIGZ1bmN0aW9uKGV2KSB7XHJcbiAgICAgICAgICBpZiAoIXNwaW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBldi5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLnVwLm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIGlmICghc3Bpbm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oX3Njb3BlRXZlbnROYW1lcyhbJ21vdXNldXAnLCAndG91Y2hlbmQnLCAndG91Y2hjYW5jZWwnXSwgX2N1cnJlbnRTcGlubmVySWQpLmpvaW4oJyAnKSwgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIGlmICghc3Bpbm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBzdG9wU3BpbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihfc2NvcGVFdmVudE5hbWVzKFsnbW91c2Vtb3ZlJywgJ3RvdWNobW92ZScsICdzY3JvbGwnLCAnc2Nyb2xsc3RhcnQnXSwgX2N1cnJlbnRTcGlubmVySWQpLmpvaW4oJyAnKSwgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIGlmICghc3Bpbm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICBzdG9wU3BpbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBvcmlnaW5hbGlucHV0Lm9uKCdtb3VzZXdoZWVsIERPTU1vdXNlU2Nyb2xsJywgZnVuY3Rpb24oZXYpIHtcclxuICAgICAgICAgIGlmICghc2V0dGluZ3MubW91c2V3aGVlbCB8fCAhb3JpZ2luYWxpbnB1dC5pcygnOmZvY3VzJykpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIHZhciBkZWx0YSA9IGV2Lm9yaWdpbmFsRXZlbnQud2hlZWxEZWx0YSB8fCAtZXYub3JpZ2luYWxFdmVudC5kZWx0YVkgfHwgLWV2Lm9yaWdpbmFsRXZlbnQuZGV0YWlsO1xyXG5cclxuICAgICAgICAgIGV2LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICBpZiAoZGVsdGEgPCAwKSB7XHJcbiAgICAgICAgICAgIGRvd25PbmNlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdXBPbmNlKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9iaW5kRXZlbnRzSW50ZXJmYWNlKCkge1xyXG4gICAgICAgIG9yaWdpbmFsaW5wdXQub24oJ3RvdWNoc3Bpbi51cG9uY2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHN0b3BTcGluKCk7XHJcbiAgICAgICAgICB1cE9uY2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgb3JpZ2luYWxpbnB1dC5vbigndG91Y2hzcGluLmRvd25vbmNlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzdG9wU3BpbigpO1xyXG4gICAgICAgICAgZG93bk9uY2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgb3JpZ2luYWxpbnB1dC5vbigndG91Y2hzcGluLnN0YXJ0dXBzcGluJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzdGFydFVwU3BpbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBvcmlnaW5hbGlucHV0Lm9uKCd0b3VjaHNwaW4uc3RhcnRkb3duc3BpbicsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc3RhcnREb3duU3BpbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBvcmlnaW5hbGlucHV0Lm9uKCd0b3VjaHNwaW4uc3RvcHNwaW4nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHN0b3BTcGluKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG9yaWdpbmFsaW5wdXQub24oJ3RvdWNoc3Bpbi51cGRhdGVzZXR0aW5ncycsIGZ1bmN0aW9uKGUsIG5ld3NldHRpbmdzKSB7XHJcbiAgICAgICAgICBjaGFuZ2VTZXR0aW5ncyhuZXdzZXR0aW5ncyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9mb3JjZXN0ZXBkaXZpc2liaWxpdHkodmFsdWUpIHtcclxuICAgICAgICBzd2l0Y2ggKHNldHRpbmdzLmZvcmNlc3RlcGRpdmlzaWJpbGl0eSkge1xyXG4gICAgICAgICAgY2FzZSAncm91bmQnOlxyXG4gICAgICAgICAgICByZXR1cm4gKE1hdGgucm91bmQodmFsdWUgLyBzZXR0aW5ncy5zdGVwKSAqIHNldHRpbmdzLnN0ZXApLnRvRml4ZWQoc2V0dGluZ3MuZGVjaW1hbHMpO1xyXG4gICAgICAgICAgY2FzZSAnZmxvb3InOlxyXG4gICAgICAgICAgICByZXR1cm4gKE1hdGguZmxvb3IodmFsdWUgLyBzZXR0aW5ncy5zdGVwKSAqIHNldHRpbmdzLnN0ZXApLnRvRml4ZWQoc2V0dGluZ3MuZGVjaW1hbHMpO1xyXG4gICAgICAgICAgY2FzZSAnY2VpbCc6XHJcbiAgICAgICAgICAgIHJldHVybiAoTWF0aC5jZWlsKHZhbHVlIC8gc2V0dGluZ3Muc3RlcCkgKiBzZXR0aW5ncy5zdGVwKS50b0ZpeGVkKHNldHRpbmdzLmRlY2ltYWxzKTtcclxuICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9jaGVja1ZhbHVlKCkge1xyXG4gICAgICAgIHZhciB2YWwsIHBhcnNlZHZhbCwgcmV0dXJudmFsO1xyXG5cclxuICAgICAgICB2YWwgPSBvcmlnaW5hbGlucHV0LnZhbCgpO1xyXG5cclxuICAgICAgICBpZiAodmFsID09PSAnJykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmRlY2ltYWxzID4gMCAmJiB2YWwgPT09ICcuJykge1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGFyc2VkdmFsID0gcGFyc2VGbG9hdCh2YWwpO1xyXG5cclxuICAgICAgICBpZiAoaXNOYU4ocGFyc2VkdmFsKSkge1xyXG4gICAgICAgICAgcGFyc2VkdmFsID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybnZhbCA9IHBhcnNlZHZhbDtcclxuXHJcbiAgICAgICAgaWYgKHBhcnNlZHZhbC50b1N0cmluZygpICE9PSB2YWwpIHtcclxuICAgICAgICAgIHJldHVybnZhbCA9IHBhcnNlZHZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYXJzZWR2YWwgPCBzZXR0aW5ncy5taW4pIHtcclxuICAgICAgICAgIHJldHVybnZhbCA9IHNldHRpbmdzLm1pbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwYXJzZWR2YWwgPiBzZXR0aW5ncy5tYXgpIHtcclxuICAgICAgICAgIHJldHVybnZhbCA9IHNldHRpbmdzLm1heDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybnZhbCA9IF9mb3JjZXN0ZXBkaXZpc2liaWxpdHkocmV0dXJudmFsKTtcclxuXHJcbiAgICAgICAgaWYgKE51bWJlcih2YWwpLnRvU3RyaW5nKCkgIT09IHJldHVybnZhbC50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICBvcmlnaW5hbGlucHV0LnZhbChyZXR1cm52YWwpO1xyXG4gICAgICAgICAgb3JpZ2luYWxpbnB1dC50cmlnZ2VyKCdjaGFuZ2UnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIF9nZXRCb29zdGVkU3RlcCgpIHtcclxuICAgICAgICBpZiAoIXNldHRpbmdzLmJvb3N0ZXIpIHtcclxuICAgICAgICAgIHJldHVybiBzZXR0aW5ncy5zdGVwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIHZhciBib29zdGVkID0gTWF0aC5wb3coMiwgTWF0aC5mbG9vcihzcGluY291bnQgLyBzZXR0aW5ncy5ib29zdGF0KSkgKiBzZXR0aW5ncy5zdGVwO1xyXG5cclxuICAgICAgICAgIGlmIChzZXR0aW5ncy5tYXhib29zdGVkc3RlcCkge1xyXG4gICAgICAgICAgICBpZiAoYm9vc3RlZCA+IHNldHRpbmdzLm1heGJvb3N0ZWRzdGVwKSB7XHJcbiAgICAgICAgICAgICAgYm9vc3RlZCA9IHNldHRpbmdzLm1heGJvb3N0ZWRzdGVwO1xyXG4gICAgICAgICAgICAgIHZhbHVlID0gTWF0aC5yb3VuZCgodmFsdWUgLyBib29zdGVkKSkgKiBib29zdGVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgcmV0dXJuIE1hdGgubWF4KHNldHRpbmdzLnN0ZXAsIGJvb3N0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gdXBPbmNlKCkge1xyXG4gICAgICAgIF9jaGVja1ZhbHVlKCk7XHJcblxyXG4gICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdChlbGVtZW50cy5pbnB1dC52YWwoKSk7XHJcbiAgICAgICAgaWYgKGlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgdmFsdWUgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGluaXR2YWx1ZSA9IHZhbHVlLFxyXG4gICAgICAgICAgICBib29zdGVkc3RlcCA9IF9nZXRCb29zdGVkU3RlcCgpO1xyXG5cclxuICAgICAgICB2YWx1ZSA9IHZhbHVlICsgYm9vc3RlZHN0ZXA7XHJcblxyXG4gICAgICAgIGlmICh2YWx1ZSA+IHNldHRpbmdzLm1heCkge1xyXG4gICAgICAgICAgdmFsdWUgPSBzZXR0aW5ncy5tYXg7XHJcbiAgICAgICAgICBvcmlnaW5hbGlucHV0LnRyaWdnZXIoJ3RvdWNoc3Bpbi5vbi5tYXgnKTtcclxuICAgICAgICAgIHN0b3BTcGluKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBlbGVtZW50cy5pbnB1dC52YWwoTnVtYmVyKHZhbHVlKS50b0ZpeGVkKHNldHRpbmdzLmRlY2ltYWxzKSk7XHJcblxyXG4gICAgICAgIGlmIChpbml0dmFsdWUgIT09IHZhbHVlKSB7XHJcbiAgICAgICAgICBvcmlnaW5hbGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gZG93bk9uY2UoKSB7XHJcbiAgICAgICAgX2NoZWNrVmFsdWUoKTtcclxuXHJcbiAgICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KGVsZW1lbnRzLmlucHV0LnZhbCgpKTtcclxuICAgICAgICBpZiAoaXNOYU4odmFsdWUpKSB7XHJcbiAgICAgICAgICB2YWx1ZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgaW5pdHZhbHVlID0gdmFsdWUsXHJcbiAgICAgICAgICAgIGJvb3N0ZWRzdGVwID0gX2dldEJvb3N0ZWRTdGVwKCk7XHJcblxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUgLSBib29zdGVkc3RlcDtcclxuXHJcbiAgICAgICAgaWYgKHZhbHVlIDwgc2V0dGluZ3MubWluKSB7XHJcbiAgICAgICAgICB2YWx1ZSA9IHNldHRpbmdzLm1pbjtcclxuICAgICAgICAgIG9yaWdpbmFsaW5wdXQudHJpZ2dlcigndG91Y2hzcGluLm9uLm1pbicpO1xyXG4gICAgICAgICAgc3RvcFNwaW4oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLmlucHV0LnZhbCh2YWx1ZS50b0ZpeGVkKHNldHRpbmdzLmRlY2ltYWxzKSk7XHJcblxyXG4gICAgICAgIGlmIChpbml0dmFsdWUgIT09IHZhbHVlKSB7XHJcbiAgICAgICAgICBvcmlnaW5hbGlucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgZnVuY3Rpb24gc3RhcnREb3duU3BpbigpIHtcclxuICAgICAgICBzdG9wU3BpbigpO1xyXG5cclxuICAgICAgICBzcGluY291bnQgPSAwO1xyXG4gICAgICAgIHNwaW5uaW5nID0gJ2Rvd24nO1xyXG5cclxuICAgICAgICBvcmlnaW5hbGlucHV0LnRyaWdnZXIoJ3RvdWNoc3Bpbi5vbi5zdGFydHNwaW4nKTtcclxuICAgICAgICBvcmlnaW5hbGlucHV0LnRyaWdnZXIoJ3RvdWNoc3Bpbi5vbi5zdGFydGRvd25zcGluJyk7XHJcblxyXG4gICAgICAgIGRvd25EZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgZG93blNwaW5UaW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzcGluY291bnQrKztcclxuICAgICAgICAgICAgZG93bk9uY2UoKTtcclxuICAgICAgICAgIH0sIHNldHRpbmdzLnN0ZXBpbnRlcnZhbCk7XHJcbiAgICAgICAgfSwgc2V0dGluZ3Muc3RlcGludGVydmFsZGVsYXkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBmdW5jdGlvbiBzdGFydFVwU3BpbigpIHtcclxuICAgICAgICBzdG9wU3BpbigpO1xyXG5cclxuICAgICAgICBzcGluY291bnQgPSAwO1xyXG4gICAgICAgIHNwaW5uaW5nID0gJ3VwJztcclxuXHJcbiAgICAgICAgb3JpZ2luYWxpbnB1dC50cmlnZ2VyKCd0b3VjaHNwaW4ub24uc3RhcnRzcGluJyk7XHJcbiAgICAgICAgb3JpZ2luYWxpbnB1dC50cmlnZ2VyKCd0b3VjaHNwaW4ub24uc3RhcnR1cHNwaW4nKTtcclxuXHJcbiAgICAgICAgdXBEZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdXBTcGluVGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgc3BpbmNvdW50Kys7XHJcbiAgICAgICAgICAgIHVwT25jZSgpO1xyXG4gICAgICAgICAgfSwgc2V0dGluZ3Muc3RlcGludGVydmFsKTtcclxuICAgICAgICB9LCBzZXR0aW5ncy5zdGVwaW50ZXJ2YWxkZWxheSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGZ1bmN0aW9uIHN0b3BTcGluKCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dChkb3duRGVsYXlUaW1lb3V0KTtcclxuICAgICAgICBjbGVhclRpbWVvdXQodXBEZWxheVRpbWVvdXQpO1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoZG93blNwaW5UaW1lcik7XHJcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh1cFNwaW5UaW1lcik7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoc3Bpbm5pbmcpIHtcclxuICAgICAgICAgIGNhc2UgJ3VwJzpcclxuICAgICAgICAgICAgb3JpZ2luYWxpbnB1dC50cmlnZ2VyKCd0b3VjaHNwaW4ub24uc3RvcHVwc3BpbicpO1xyXG4gICAgICAgICAgICBvcmlnaW5hbGlucHV0LnRyaWdnZXIoJ3RvdWNoc3Bpbi5vbi5zdG9wc3BpbicpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgJ2Rvd24nOlxyXG4gICAgICAgICAgICBvcmlnaW5hbGlucHV0LnRyaWdnZXIoJ3RvdWNoc3Bpbi5vbi5zdG9wZG93bnNwaW4nKTtcclxuICAgICAgICAgICAgb3JpZ2luYWxpbnB1dC50cmlnZ2VyKCd0b3VjaHNwaW4ub24uc3RvcHNwaW4nKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzcGluY291bnQgPSAwO1xyXG4gICAgICAgIHNwaW5uaW5nID0gZmFsc2U7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcbiAgfTtcclxuXHJcbn0pKGpRdWVyeSk7XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9saWJyYXJpZXMvYm9vdHN0cmFwLXRvdWNoc3Bpbi9qcXVlcnkuYm9vdHN0cmFwLXRvdWNoc3Bpbi5qc1xuICoqIG1vZHVsZSBpZCA9IDE4NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxybC1nZW5lcmljLWNvbnRhaW5lciBzZWxlY3Rvcj1cXFwic3Bpbm5lci5uZ0Rpc2FibGVkXFxcIiBjbGFzcz1cXFwic3Bpbm5lci1jb250YWluZXJcXFwiPlxcclxcblxcdDx0ZW1wbGF0ZSBkZWZhdWx0PlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcImZpZWxkXFxcIiBuZy1jbGFzcz1cXFwieyAnZXJyb3InOiBzcGlubmVyLm5nTW9kZWwuJGludmFsaWQgfVxcXCI+XFxyXFxuXFx0XFx0XFx0PGlucHV0IG5hbWU9XFxcInt7OjpzcGlubmVyLm5hbWV9fVxcXCIgY2xhc3M9XFxcInNwaW5uZXJcXFwiIGlkPVxcXCJ7ezo6c3Bpbm5lci5zcGlubmVySWR9fVxcXCIgdHlwZT1cXFwidGV4dFxcXCIgLz5cXHJcXG5cXHRcXHRcXHQ8c3BhbiBjbGFzcz1cXFwiZXJyb3Itc3RyaW5nXFxcIiBuZy1pZj1cXFwic3Bpbm5lci5pbnB1dFZhbGlkYXRvci5lcnJvciB8IGlzRW1wdHk6ZmFsc2VcXFwiPnt7c3Bpbm5lci5pbnB1dFZhbGlkYXRvci5lcnJvcn19PC9zcGFuPlxcclxcblxcdFxcdDwvZGl2PlxcclxcblxcdDwvdGVtcGxhdGU+XFxyXFxuXFx0PHRlbXBsYXRlIHdoZW4tc2VsZWN0b3I9XFxcInRydWVcXFwiPlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcImlucHV0LWdyb3VwIGZpZWxkXFxcIiBuZy1pZj1cXFwiOjpzcGlubmVyLnByZWZpeCAhPSBudWxsICYmIHNwaW5uZXIucG9zdGZpeCAhPSBudWxsXFxcIj5cXHJcXG5cXHRcXHRcXHQ8c3BhbiBjbGFzcz1cXFwiaW5wdXQtZ3JvdXAtYWRkb25cXFwiPnt7OjpzcGlubmVyLnByZWZpeH19PC9zcGFuPlxcclxcblxcdFxcdFxcdDxpbnB1dCBkaXNhYmxlZD1cXFwidHJ1ZVxcXCIgdHlwZT1cXFwidGV4dFxcXCIgbmctbW9kZWw9XFxcInNwaW5uZXIubmdNb2RlbC4kdmlld1ZhbHVlXFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIiAvPlxcclxcblxcdFxcdFxcdDxzcGFuIGNsYXNzPVxcXCJpbnB1dC1ncm91cC1hZGRvblxcXCI+e3s6OnNwaW5uZXIucG9zdGZpeH19PC9zcGFuPlxcclxcblxcdFxcdDwvZGl2PlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcImlucHV0LWdyb3VwIGZpZWxkXFxcIiBuZy1pZj1cXFwiOjpzcGlubmVyLnByZWZpeCAhPSBudWxsICYmIHNwaW5uZXIucG9zdGZpeCA9PSBudWxsXFxcIj5cXHJcXG5cXHRcXHRcXHQ8c3BhbiBjbGFzcz1cXFwiaW5wdXQtZ3JvdXAtYWRkb25cXFwiPnt7OjpzcGlubmVyLnByZWZpeH19PC9zcGFuPlxcclxcblxcdFxcdFxcdDxpbnB1dCBkaXNhYmxlZD1cXFwidHJ1ZVxcXCIgdHlwZT1cXFwidGV4dFxcXCIgbmctbW9kZWw9XFxcInNwaW5uZXIubmdNb2RlbC4kdmlld1ZhbHVlXFxcIiBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIiAvPlxcclxcblxcdFxcdDwvZGl2PlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcImlucHV0LWdyb3VwIGZpZWxkXFxcIiBuZy1pZj1cXFwiOjpzcGlubmVyLnByZWZpeCA9PSBudWxsICYmIHNwaW5uZXIucG9zdGZpeCAhPSBudWxsXFxcIj5cXHJcXG5cXHRcXHRcXHQ8aW5wdXQgZGlzYWJsZWQ9XFxcInRydWVcXFwiIHR5cGU9XFxcInRleHRcXFwiIG5nLW1vZGVsPVxcXCJzcGlubmVyLm5nTW9kZWwuJHZpZXdWYWx1ZVxcXCIgY2xhc3M9XFxcImZvcm0tY29udHJvbFxcXCIgLz5cXHJcXG5cXHRcXHRcXHQ8c3BhbiBjbGFzcz1cXFwiaW5wdXQtZ3JvdXAtYWRkb25cXFwiPnt7OjpzcGlubmVyLnBvc3RmaXh9fTwvc3Bhbj5cXHJcXG5cXHRcXHQ8L2Rpdj5cXHJcXG5cXHRcXHQ8ZGl2IGNsYXNzPVxcXCJpbnB1dC1ncm91cCBmaWVsZFxcXCIgbmctaWY9XFxcIjo6c3Bpbm5lci5wcmVmaXggPT0gbnVsbCAmJiBzcGlubmVyLnBvc3RmaXggPT0gbnVsbFxcXCI+XFxyXFxuXFx0XFx0XFx0PGlucHV0IGRpc2FibGVkPVxcXCJ0cnVlXFxcIiB0eXBlPVxcXCJ0ZXh0XFxcIiBuZy1tb2RlbD1cXFwic3Bpbm5lci5uZ01vZGVsLiR2aWV3VmFsdWVcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2xcXFwiIC8+XFxyXFxuXFx0XFx0PC9kaXY+XFxyXFxuXFx0PC90ZW1wbGF0ZT5cXHJcXG48L3JsLWdlbmVyaWMtY29udGFpbmVyPlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3NwaW5uZXIvc3Bpbm5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19vYmplY3QgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMub2JqZWN0O1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy5zdHJpbmdXaXRoV2F0ZXJtYXJrJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsU3RyaW5nV2l0aFdhdGVybWFyayc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnU3RyaW5nV2l0aFdhdGVybWFya0NvbnRyb2xsZXInO1xyXG52YXIgU3RyaW5nV2l0aFdhdGVybWFya0NvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gU3RyaW5nV2l0aFdhdGVybWFya0NvbnRyb2xsZXIoJHNjb3BlLCBvYmplY3RVdGlsaXR5KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAkc2NvcGUuJHdhdGNoKGZ1bmN0aW9uICgpIHsgcmV0dXJuIF90aGlzLnN0cmluZzsgfSwgZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhhc1N0cmluZyA9IG9iamVjdFV0aWxpdHkuaXNOdWxsT3JFbXB0eSh2YWx1ZSkgPT09IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgU3RyaW5nV2l0aFdhdGVybWFya0NvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgX19vYmplY3Quc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIFN0cmluZ1dpdGhXYXRlcm1hcmtDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLlN0cmluZ1dpdGhXYXRlcm1hcmtDb250cm9sbGVyID0gU3RyaW5nV2l0aFdhdGVybWFya0NvbnRyb2xsZXI7XHJcbnZhciBzdHJpbmdXaXRoV2F0ZXJtYXJrID0ge1xyXG4gICAgdGVtcGxhdGU6IFwiXFxuXFx0XFx0PHNwYW4+XFxuXFx0XFx0XFx0PHNwYW4gbmctc2hvdz1cXFwiY29udHJvbGxlci5oYXNTdHJpbmdcXFwiPnt7Y29udHJvbGxlci5zdHJpbmd9fTwvc3Bhbj5cXG5cXHRcXHRcXHQ8c3BhbiBuZy1oaWRlPVxcXCJjb250cm9sbGVyLmhhc1N0cmluZ1xcXCIgY2xhc3M9XFxcIndhdGVybWFya1xcXCI+e3tjb250cm9sbGVyLndhdGVybWFya319PC9zcGFuPlxcblxcdFxcdDwvc3Bhbj5cXG5cXHRcIixcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdjb250cm9sbGVyJyxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgc3RyaW5nOiAnQCcsXHJcbiAgICAgICAgd2F0ZXJtYXJrOiAnQCcsXHJcbiAgICB9LFxyXG59O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtfX29iamVjdC5tb2R1bGVOYW1lXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCBzdHJpbmdXaXRoV2F0ZXJtYXJrKVxyXG4gICAgLmNvbnRyb2xsZXIoZXhwb3J0cy5jb250cm9sbGVyTmFtZSwgU3RyaW5nV2l0aFdhdGVybWFya0NvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2ljM1J5YVc1blYybDBhRmRoZEdWeWJXRnlheTVxY3lJc0luTnZkWEpqWlZKdmIzUWlPaUlpTENKemIzVnlZMlZ6SWpwYkluTjBjbWx1WjFkcGRHaFhZWFJsY20xaGNtc3VkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeFBRVUZQTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkZia01zTmtOQlFYbENMRGhDUVVFNFFpeERRVUZETEVOQlFVRTdRVUZEZUVRc1NVRkJUeXhSUVVGUkxFZEJRVWNzZFVOQlFWRXNRMEZCUXl4TlFVRk5MRU5CUVVNN1FVRkZka0lzYTBKQlFWVXNSMEZCVnl4elEwRkJjME1zUTBGQlF6dEJRVU0xUkN4eFFrRkJZU3hIUVVGWExIVkNRVUYxUWl4RFFVRkRPMEZCUTJoRUxITkNRVUZqTEVkQlFWY3NLMEpCUVN0Q0xFTkJRVU03UVVGUmNFVTdTVUZSUXl4MVEwRkJXU3hOUVVGelFpeEZRVUZGTEdGQlFYTkRPMUZCVWpORkxHbENRV0ZETzFGQlNrTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhqUVVGblFpeE5RVUZOTEVOQlFVTXNTMEZCU1N4RFFVRkRMRTFCUVUwc1EwRkJReXhEUVVGRExFTkJRVU1zUlVGQlJTeFZRVUZETEV0QlFXRTdXVUZEYkVVc1MwRkJTU3hEUVVGRExGTkJRVk1zUjBGQlJ5eGhRVUZoTEVOQlFVTXNZVUZCWVN4RFFVRkRMRXRCUVVzc1EwRkJReXhMUVVGTExFdEJRVXNzUTBGQlF6dFJRVU12UkN4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGTVRTeHhRMEZCVHl4SFFVRmhMRU5CUVVNc1VVRkJVU3hGUVVGRkxGRkJRVkVzUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXp0SlFVMDNSQ3h2UTBGQlF6dEJRVUZFTEVOQlFVTXNRVUZpUkN4SlFXRkRPMEZCWWxrc2NVTkJRVFpDTEdkRFFXRjZReXhEUVVGQk8wRkJSVVFzU1VGQlNTeHRRa0ZCYlVJc1IwRkJPRUk3U1VGRGNFUXNVVUZCVVN4RlFVRkZMRFJOUVV0VU8wbEJRMFFzVlVGQlZTeEZRVUZGTEhOQ1FVRmpPMGxCUXpGQ0xGbEJRVmtzUlVGQlJTeFpRVUZaTzBsQlF6RkNMRkZCUVZFc1JVRkJSVHRSUVVOVUxFMUJRVTBzUlVGQlJTeEhRVUZITzFGQlExZ3NVMEZCVXl4RlFVRkZMRWRCUVVjN1MwRkRaRHREUVVORUxFTkJRVU03UVVGRlJpeFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMR3RDUVVGVkxFVkJRVVVzUTBGQlF5eFJRVUZSTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNN1MwRkRMME1zVTBGQlV5eERRVUZETEhGQ1FVRmhMRVZCUVVVc2JVSkJRVzFDTEVOQlFVTTdTMEZETjBNc1ZVRkJWU3hEUVVGRExITkNRVUZqTEVWQlFVVXNOa0pCUVRaQ0xFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvc3RyaW5nV2l0aFdhdGVybWFyay9zdHJpbmdXaXRoV2F0ZXJtYXJrLmpzXG4gKiogbW9kdWxlIGlkID0gMTg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgdGFiXzEgPSByZXF1aXJlKCcuL3RhYicpO1xyXG5leHBvcnRzLnRhYkNvbXBvbmVudE5hbWUgPSB0YWJfMS5jb21wb25lbnROYW1lO1xyXG5leHBvcnRzLnRhYiA9IHRhYl8xLnRhYjtcclxuZXhwb3J0cy50YWJDb250cm9sbGVyTmFtZSA9IHRhYl8xLmNvbnRyb2xsZXJOYW1lO1xyXG5leHBvcnRzLlRhYkNvbnRyb2xsZXIgPSB0YWJfMS5UYWJDb250cm9sbGVyO1xyXG52YXIgdGFic2V0XzEgPSByZXF1aXJlKCcuL3RhYnNldCcpO1xyXG5leHBvcnRzLnRhYnNldENvbXBvbmVudE5hbWUgPSB0YWJzZXRfMS5jb21wb25lbnROYW1lO1xyXG5leHBvcnRzLnRhYnNldCA9IHRhYnNldF8xLnRhYnNldDtcclxuZXhwb3J0cy50YWJzZXRDb250cm9sbGVyTmFtZSA9IHRhYnNldF8xLmNvbnRyb2xsZXJOYW1lO1xyXG5leHBvcnRzLlRhYnNldENvbnRyb2xsZXIgPSB0YWJzZXRfMS5UYWJzZXRDb250cm9sbGVyO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy50YWJzJztcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbXSlcclxuICAgIC5jb21wb25lbnQodGFiXzEuY29tcG9uZW50TmFtZSwgdGFiXzEudGFiKVxyXG4gICAgLmNvbnRyb2xsZXIodGFiXzEuY29udHJvbGxlck5hbWUsIHRhYl8xLlRhYkNvbnRyb2xsZXIpXHJcbiAgICAuY29tcG9uZW50KHRhYnNldF8xLmNvbXBvbmVudE5hbWUsIHRhYnNldF8xLnRhYnNldClcclxuICAgIC5jb250cm9sbGVyKHRhYnNldF8xLmNvbnRyb2xsZXJOYW1lLCB0YWJzZXRfMS5UYWJzZXRDb250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pZEdGaWN5NXRiMlIxYkdVdWFuTWlMQ0p6YjNWeVkyVlNiMjkwSWpvaUlpd2ljMjkxY21ObGN5STZXeUowWVdKekxtMXZaSFZzWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3haUVVGWkxFTkJRVU03UVVGRllpeEpRVUZaTEU5QlFVOHNWMEZCVFN4VFFVRlRMRU5CUVVNc1EwRkJRVHRCUVVWdVF5eHZRa0ZMVHl4UFFVRlBMRU5CUVVNc1EwRkJRVHRCUVZWa0xIZENRVUZuUWp0QlFVTm9RaXhYUVVGSE8wRkJRMGdzZVVKQlFXbENPMEZCUTJwQ0xIRkNRVUZoTzBGQldtUXNkVUpCVFU4c1ZVRkJWU3hEUVVGRExFTkJRVUU3UVVGUGFrSXNNa0pCUVcxQ08wRkJRMjVDTEdOQlFVMDdRVUZEVGl3MFFrRkJiMEk3UVVGRGNFSXNkMEpCUVdkQ08wRkJTVTRzYTBKQlFWVXNSMEZCVnl4MVFrRkJkVUlzUTBGQlF6dEJRVVY0UkN4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVXNSVUZCUlN4RFFVRkRPMHRCUXpWQ0xGTkJRVk1zUTBGQlF5eHRRa0ZCWjBJc1JVRkJSU3hUUVVGSExFTkJRVU03UzBGRGFFTXNWVUZCVlN4RFFVRkRMRzlDUVVGcFFpeEZRVUZGTEcxQ1FVRmhMRU5CUVVNN1MwRkROVU1zVTBGQlV5eERRVUZETEhOQ1FVRnRRaXhGUVVGRkxHVkJRVTBzUTBGQlF6dExRVU4wUXl4VlFVRlZMRU5CUVVNc2RVSkJRVzlDTEVWQlFVVXNlVUpCUVdkQ0xFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvdGFicy90YWJzLm1vZHVsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE4N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnJlcXVpcmUoJy4vdGFiLmNzcycpO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxUYWInO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ3JsVGFiQ29udHJvbGxlcic7XHJcbnZhciBUYWJDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRhYkNvbnRyb2xsZXIoJHNjb3BlLCAkZWxlbWVudCwgJHRyYW5zY2x1ZGUpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcclxuICAgICAgICB0aGlzLiR0cmFuc2NsdWRlID0gJHRyYW5zY2x1ZGU7XHJcbiAgICAgICAgJHNjb3BlLiR3YXRjaCgndGFiRm9ybS4kdmFsaWQnLCBmdW5jdGlvbiAoaXNWYWxpZCkge1xyXG4gICAgICAgICAgICBfdGhpcy5oZWFkZXIuaXNWYWxpZCA9IGlzVmFsaWQgIT0gbnVsbCA/IGlzVmFsaWQgOiB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgVGFiQ29udHJvbGxlci5wcm90b3R5cGUuJHBvc3RMaW5rID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4kdHJhbnNjbHVkZShmdW5jdGlvbiAoaGVhZGVyKSB7XHJcbiAgICAgICAgICAgIF90aGlzLmhlYWRlciA9IHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBoZWFkZXIuaHRtbCgpLFxyXG4gICAgICAgICAgICAgICAgaXNWYWxpZDogdHJ1ZSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgX3RoaXMudGFic2V0LnJlZ2lzdGVyVGFiKF90aGlzLiRlbGVtZW50LCBfdGhpcy5oZWFkZXIpO1xyXG4gICAgICAgIH0sIG51bGwsICdoZWFkZXJTbG90Jyk7XHJcbiAgICB9O1xyXG4gICAgVGFiQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLCAnJGVsZW1lbnQnLCAnJHRyYW5zY2x1ZGUnXTtcclxuICAgIHJldHVybiBUYWJDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLlRhYkNvbnRyb2xsZXIgPSBUYWJDb250cm9sbGVyO1xyXG5leHBvcnRzLnRhYiA9IHtcclxuICAgIHRyYW5zY2x1ZGU6IHtcclxuICAgICAgICAnaGVhZGVyU2xvdCc6ICc/cmxUYWJIZWFkZXInLFxyXG4gICAgICAgICdjb250ZW50U2xvdCc6ICc/cmxUYWJDb250ZW50JyxcclxuICAgICAgICAnZm9vdGVyU2xvdCc6ICc/cmxUYWJGb290ZXInLFxyXG4gICAgfSxcclxuICAgIHJlcXVpcmU6IHsgdGFic2V0OiAnXl5ybFRhYnNldCcgfSxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3RhYi5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAndGFiJyxcclxufTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pZEdGaUxtcHpJaXdpYzI5MWNtTmxVbTl2ZENJNklpSXNJbk52ZFhKalpYTWlPbHNpZEdGaUxuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTERCRVFVRXdSRHRCUVVVeFJDeFpRVUZaTEVOQlFVTTdRVUZGWWl4UlFVRlBMRmRCUVZjc1EwRkJReXhEUVVGQk8wRkJUVklzY1VKQlFXRXNSMEZCVnl4UFFVRlBMRU5CUVVNN1FVRkRhRU1zYzBKQlFXTXNSMEZCVnl4cFFrRkJhVUlzUTBGQlF6dEJRVTEwUkR0SlFVMURMSFZDUVVGWkxFMUJRV2xDTEVWQlEycENMRkZCUVRaQ0xFVkJRemRDTEZkQlFXMURPMUZCVW1oRUxHbENRWFZDUXp0UlFXaENXU3hoUVVGUkxFZEJRVklzVVVGQlVTeERRVUZ4UWp0UlFVTTNRaXhuUWtGQlZ5eEhRVUZZTEZkQlFWY3NRMEZCZDBJN1VVRkRPVU1zVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4blFrRkJaMElzUlVGQlJTeFZRVUZETEU5QlFXZENPMWxCUTJoRUxFdEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNUMEZCVHl4SFFVRkhMRTlCUVU4c1NVRkJTU3hKUVVGSkxFZEJRVWNzVDBGQlR5eEhRVUZITEVsQlFVa3NRMEZCUXp0UlFVTjRSQ3hEUVVGRExFTkJRVU1zUTBGQlF6dEpRVU5LTEVOQlFVTTdTVUZGUkN4cFEwRkJVeXhIUVVGVU8xRkJRVUVzYVVKQlVVTTdVVUZRUVN4SlFVRkpMRU5CUVVNc1YwRkJWeXhEUVVGRExGVkJRVU1zVFVGQll6dFpRVU12UWl4TFFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSE8yZENRVU5pTEZGQlFWRXNSVUZCUlN4TlFVRk5MRU5CUVVNc1NVRkJTU3hGUVVGRk8yZENRVU4yUWl4UFFVRlBMRVZCUVVVc1NVRkJTVHRoUVVOaUxFTkJRVU03V1VGRFJpeExRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRmRCUVZjc1EwRkJReXhMUVVGSkxFTkJRVU1zVVVGQlVTeEZRVUZGTEV0QlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1EwRkJRenRSUVVOeVJDeERRVUZETEVWQlFVVXNTVUZCU1N4RlFVRkZMRmxCUVZrc1EwRkJReXhEUVVGRE8wbEJRM2hDTEVOQlFVTTdTVUZxUWswc2NVSkJRVThzUjBGQllTeERRVUZETEZGQlFWRXNSVUZCUlN4VlFVRlZMRVZCUVVVc1lVRkJZU3hEUVVGRExFTkJRVU03U1VGclFteEZMRzlDUVVGRE8wRkJRVVFzUTBGQlF5eEJRWFpDUkN4SlFYVkNRenRCUVhaQ1dTeHhRa0ZCWVN4blFrRjFRbnBDTEVOQlFVRTdRVUZGVlN4WFFVRkhMRWRCUVhsQ08wbEJRM1JETEZWQlFWVXNSVUZCVHp0UlFVTm9RaXhaUVVGWkxFVkJRVVVzWTBGQll6dFJRVU0xUWl4aFFVRmhMRVZCUVVVc1pVRkJaVHRSUVVNNVFpeFpRVUZaTEVWQlFVVXNZMEZCWXp0TFFVTTFRanRKUVVORUxFOUJRVThzUlVGQlJTeEZRVUZGTEUxQlFVMHNSVUZCUXl4WlFVRlpMRVZCUVVVN1NVRkRhRU1zVVVGQlVTeEZRVUZGTEU5QlFVOHNRMEZCUXl4WlFVRlpMRU5CUVVNN1NVRkRMMElzVlVGQlZTeEZRVUZGTEhOQ1FVRmpPMGxCUXpGQ0xGbEJRVmtzUlVGQlJTeExRVUZMTzBOQlEyNUNMRU5CUVVNaWZRPT1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvdGFicy90YWIuanNcbiAqKiBtb2R1bGUgaWQgPSAxODhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vdGFiLmNzc1wiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi90YWIuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vdGFiLmNzc1wiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3RhYnMvdGFiLmNzc1xuICoqIG1vZHVsZSBpZCA9IDE4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIudGFiLWNvbnRlbnQgLnRhYi1wYW5lIHsgZGlzcGxheTogbm9uZSB9XFxyXFxuLnRhYi1jb250ZW50IC50YWItcGFuZS5hY3RpdmUgeyBkaXNwbGF5OiBibG9jayB9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL3NvdXJjZS9jb21wb25lbnRzL3RhYnMvdGFiLmNzc1xuICoqIG1vZHVsZSBpZCA9IDE5MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9XFxcInRhYi1wYW5lXFxcIiBuZy1jbGFzcz1cXFwieyAnYWN0aXZlJzogdGFiLmhlYWRlci5pc1Zpc2libGUgfVxcXCI+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwidGFiLWJvZHlcXFwiPlxcclxcblxcdFxcdDxkaXYgbmctdHJhbnNjbHVkZT1cXFwiY29udGVudFNsb3RcXFwiIG5nLWZvcm09XFxcInRhYkZvcm1cXFwiPjwvZGl2PlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcImNsZWFyZml4XFxcIj48L2Rpdj5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG5cXHQ8ZGl2IGNsYXNzPVxcXCJ0YWItZm9vdGVyXFxcIj5cXHJcXG5cXHRcXHQ8ZGl2IG5nLXRyYW5zY2x1ZGU9XFxcImZvb3RlclNsb3RcXFwiPjwvZGl2PlxcclxcblxcdFxcdDxkaXYgY2xhc3M9XFxcImNsZWFyZml4XFxcIj48L2Rpdj5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG48L2Rpdj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy90YWJzL3RhYi5odG1sXG4gKiogbW9kdWxlIGlkID0gMTkxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi90eXBpbmdzL2NvbW1vbmpzLmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMSA9IHJlcXVpcmUoJ3R5cGVzY3JpcHQtYW5ndWxhci11dGlsaXRpZXMnKTtcclxudmFyIF9fYXJyYXkgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMuYXJyYXk7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybFRhYnNldCc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAncmxUYWJzZXRDb250cm9sbGVyJztcclxudmFyIFRhYnNldENvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVGFic2V0Q29udHJvbGxlcigkZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcclxuICAgICAgICB0aGlzLnRhYkhlYWRlcnMgPSBbXTtcclxuICAgIH1cclxuICAgIFRhYnNldENvbnRyb2xsZXIucHJvdG90eXBlLnJlZ2lzdGVyVGFiID0gZnVuY3Rpb24gKGVsZW1lbnQsIGhlYWRlcikge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuZmluZFBvc2l0aW9uKGVsZW1lbnQpO1xyXG4gICAgICAgIGlmIChfX2FycmF5LmFycmF5VXRpbGl0eS5oYXModGhpcy50YWJIZWFkZXJzLCBpbmRleCkpIHtcclxuICAgICAgICAgICAgaGVhZGVyLmlzVmlzaWJsZSA9IHRoaXMudGFiSGVhZGVyc1tpbmRleF0uaXNWaXNpYmxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGVhZGVyLmlzVmlzaWJsZSA9IChpbmRleCA9PT0gMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGFiSGVhZGVyc1tpbmRleF0gPSBoZWFkZXI7XHJcbiAgICB9O1xyXG4gICAgVGFic2V0Q29udHJvbGxlci5wcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24gKHRhYikge1xyXG4gICAgICAgIF8uZWFjaCh0aGlzLnRhYkhlYWRlcnMsIGZ1bmN0aW9uIChvdGhlclRhYikge1xyXG4gICAgICAgICAgICBvdGhlclRhYi5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0YWIuaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgIH07XHJcbiAgICBUYWJzZXRDb250cm9sbGVyLnByb3RvdHlwZS5maW5kUG9zaXRpb24gPSBmdW5jdGlvbiAodGFiRWxlbWVudCkge1xyXG4gICAgICAgIC8vIGZpbmQgdGhlIHBvc2l0aW9uIG9mIHRoZSBzcGVjaWZpZWQgZWxlbWVudCBieSBpdGVyYXRpbmcgb3ZlciB0aGUgdGFicyBhbmQgZmluZGluZyBhIG1hdGNoaW5nIGVsZW1lbnRcclxuICAgICAgICB2YXIgdGFicyA9IHRoaXMuJGVsZW1lbnQuZmluZCgncmwtdGFiJyk7XHJcbiAgICAgICAgdmFyIG51bTtcclxuICAgICAgICBfLmVhY2godGFicywgZnVuY3Rpb24gKGVsZW0sIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmICh0YWJFbGVtZW50WzBdID09PSBlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICBudW0gPSBpbmRleDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBudW07XHJcbiAgICB9O1xyXG4gICAgVGFic2V0Q29udHJvbGxlci4kaW5qZWN0ID0gWyckZWxlbWVudCddO1xyXG4gICAgcmV0dXJuIFRhYnNldENvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVGFic2V0Q29udHJvbGxlciA9IFRhYnNldENvbnRyb2xsZXI7XHJcbmV4cG9ydHMudGFic2V0ID0ge1xyXG4gICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3RhYnNldC5odG1sJyksXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAndGFic2V0JyxcclxufTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pZEdGaWMyVjBMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWRHRmljMlYwTG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMREJFUVVFd1JEdEJRVVV4UkN4WlFVRlpMRU5CUVVNN1FVRkhZaXhKUVVGWkxFTkJRVU1zVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVVTFRaXcyUTBGQmVVSXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlFUdEJRVU40UkN4SlFVRlBMRTlCUVU4c1IwRkJSeXgxUTBGQlVTeERRVUZETEV0QlFVc3NRMEZCUXp0QlFVVnlRaXh4UWtGQllTeEhRVUZYTEZWQlFWVXNRMEZCUXp0QlFVTnVReXh6UWtGQll5eEhRVUZYTEc5Q1FVRnZRaXhEUVVGRE8wRkJVWHBFTzBsQmRVSkRMREJDUVVGdlFpeFJRVUZyUXp0UlFVRnNReXhoUVVGUkxFZEJRVklzVVVGQlVTeERRVUV3UWp0UlFYUkNkRVFzWlVGQlZTeEhRVUZwUWl4RlFVRkZMRU5CUVVNN1NVRnpRakpDTEVOQlFVTTdTVUZ3UWpGRUxITkRRVUZYTEVkQlFWZ3NWVUZCV1N4UFFVRTBRaXhGUVVGRkxFMUJRV3RDTzFGQlF6TkVMRWxCUVVrc1MwRkJTeXhIUVVGWExFbEJRVWtzUTBGQlF5eFpRVUZaTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNN1VVRkZMME1zUlVGQlJTeERRVUZETEVOQlFVTXNUMEZCVHl4RFFVRkRMRmxCUVZrc1EwRkJReXhIUVVGSExFTkJRVU1zU1VGQlNTeERRVUZETEZWQlFWVXNSVUZCUlN4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGRFUXNUVUZCVFN4RFFVRkRMRk5CUVZNc1IwRkJSeXhKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEV0QlFVc3NRMEZCUXl4RFFVRkRMRk5CUVZNc1EwRkJRenRSUVVOeVJDeERRVUZETzFGQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1dVRkRVQ3hOUVVGTkxFTkJRVU1zVTBGQlV5eEhRVUZITEVOQlFVTXNTMEZCU3l4TFFVRkxMRU5CUVVNc1EwRkJReXhEUVVGRE8xRkJRMnhETEVOQlFVTTdVVUZGUkN4SlFVRkpMRU5CUVVNc1ZVRkJWU3hEUVVGRExFdEJRVXNzUTBGQlF5eEhRVUZITEUxQlFVMHNRMEZCUXp0SlFVTnFReXhEUVVGRE8wbEJSVVFzYVVOQlFVMHNSMEZCVGl4VlFVRlBMRWRCUVdVN1VVRkRja0lzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJWU3hGUVVGRkxGVkJRVU1zVVVGQmIwSTdXVUZETlVNc1VVRkJVU3hEUVVGRExGTkJRVk1zUjBGQlJ5eExRVUZMTEVOQlFVTTdVVUZETlVJc1EwRkJReXhEUVVGRExFTkJRVU03VVVGRFNDeEhRVUZITEVOQlFVTXNVMEZCVXl4SFFVRkhMRWxCUVVrc1EwRkJRenRKUVVOMFFpeERRVUZETzBsQlMwUXNkVU5CUVZrc1IwRkJXaXhWUVVGaExGVkJRU3RDTzFGQlF6TkRMSFZIUVVGMVJ6dFJRVU4yUnl4SlFVRkpMRWxCUVVrc1IwRkJkMElzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExFTkJRVU03VVVGRE4wUXNTVUZCU1N4SFFVRlhMRU5CUVVNN1VVRkRhRUlzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRVZCUVVVc1ZVRkJReXhKUVVGaExFVkJRVVVzUzBGQllUdFpRVU42UXl4RlFVRkZMRU5CUVVNc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF5eERRVUZETEV0QlFVc3NTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRE5VSXNSMEZCUnl4SFFVRkhMRXRCUVVzc1EwRkJRenRuUWtGRFdpeE5RVUZOTEVOQlFVTXNTMEZCU3l4RFFVRkRPMWxCUTJRc1EwRkJRenRSUVVOR0xFTkJRVU1zUTBGQlF5eERRVUZCTzFGQlEwWXNUVUZCVFN4RFFVRkRMRWRCUVVjc1EwRkJRenRKUVVOYUxFTkJRVU03U1VGa1RTeDNRa0ZCVHl4SFFVRmhMRU5CUVVNc1ZVRkJWU3hEUVVGRExFTkJRVU03U1VGbGVrTXNkVUpCUVVNN1FVRkJSQ3hEUVVGRExFRkJja05FTEVsQmNVTkRPMEZCY2tOWkxIZENRVUZuUWl4dFFrRnhRelZDTEVOQlFVRTdRVUZGVlN4alFVRk5MRWRCUVhsQ08wbEJRM3BETEZWQlFWVXNSVUZCUlN4SlFVRkpPMGxCUTJoQ0xGRkJRVkVzUlVGQlJTeFBRVUZQTEVOQlFVTXNaVUZCWlN4RFFVRkRPMGxCUTJ4RExGVkJRVlVzUlVGQlJTeHpRa0ZCWXp0SlFVTXhRaXhaUVVGWkxFVkJRVVVzVVVGQlVUdERRVU4wUWl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3RhYnMvdGFic2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTkyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwibmF2LXRhYnMtZHJvcHNoYWRvd1xcXCI+XFxyXFxuXFx0PHVsIGNsYXNzPVxcXCJuYXYgbmF2LXRhYnNcXFwiPlxcclxcblxcdFxcdDxsaSBuZy1yZXBlYXQ9XFxcInRhYkhlYWRlciBpbiB0YWJzZXQudGFiSGVhZGVyc1xcXCIgbmctY2xpY2s9XFxcInRhYnNldC5zZWxlY3QodGFiSGVhZGVyKVxcXCJcXHJcXG5cXHRcXHRcXHRuZy1jbGFzcz1cXFwieyAnYWN0aXZlJzogdGFiSGVhZGVyLmlzVmlzaWJsZSwgJ2Vycm9yJzogIXRhYkhlYWRlci5pc1ZhbGlkIH1cXFwiPlxcclxcblxcdFxcdFxcdDxhPjxzcGFuIG5nLWJpbmQtaHRtbD1cXFwidGFiSGVhZGVyLnRlbXBsYXRlXFxcIj48L3NwYW4+PC9hPlxcclxcblxcdFxcdDwvbGk+XFxyXFxuXFx0PC91bD5cXHJcXG5cXHQ8ZGl2IGNsYXNzPVxcXCJ0YWItY29udGVudFxcXCI+XFxyXFxuXFx0XFx0PGRpdiBuZy10cmFuc2NsdWRlPjwvZGl2PlxcclxcblxcdDwvZGl2PlxcclxcbjwvZGl2PlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3RhYnMvdGFic2V0Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxOTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3Mvbm9kZS9ub2RlLmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLnRlbXBsYXRlUmVuZGVyZXInO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxUZW1wbGF0ZVJlbmRlcmVyJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdUZW1wbGF0ZVJlbmRlcmVyQ29udHJvbGxlcic7XHJcbnZhciBUZW1wbGF0ZVJlbmRlcmVyQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUZW1wbGF0ZVJlbmRlcmVyQ29udHJvbGxlcigkY29tcGlsZSwgJGVsZW1lbnQpIHtcclxuICAgICAgICB2YXIgdGFyZ2V0ID0gJGVsZW1lbnQuZmluZCgnLnRlbXBsYXRlLXRhcmdldCcpO1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRhcmdldC5hcHBlbmQodGhpcy50ZW1wbGF0ZS50ZW1wbGF0ZSk7XHJcbiAgICAgICAgJGNvbXBpbGUodGVtcGxhdGUpKHRoaXMudGVtcGxhdGUuc2NvcGUpO1xyXG4gICAgfVxyXG4gICAgVGVtcGxhdGVSZW5kZXJlckNvbnRyb2xsZXIuJGluamVjdCA9IFsnJGNvbXBpbGUnLCAnJGVsZW1lbnQnXTtcclxuICAgIHJldHVybiBUZW1wbGF0ZVJlbmRlcmVyQ29udHJvbGxlcjtcclxufSgpKTtcclxuZXhwb3J0cy5UZW1wbGF0ZVJlbmRlcmVyQ29udHJvbGxlciA9IFRlbXBsYXRlUmVuZGVyZXJDb250cm9sbGVyO1xyXG52YXIgdGVtcGxhdGVSZW5kZXJlciA9IHtcclxuICAgIHRlbXBsYXRlOiAnPGRpdiBjbGFzcz1cInRlbXBsYXRlLXRhcmdldFwiPjwvZGl2PicsXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAnY29udHJvbGxlcicsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIHRlbXBsYXRlOiAnPCcsXHJcbiAgICB9LFxyXG59O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIHRlbXBsYXRlUmVuZGVyZXIpXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBUZW1wbGF0ZVJlbmRlcmVyQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWRHVnRjR3hoZEdWU1pXNWtaWEpsY2k1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJblJsYlhCc1lYUmxVbVZ1WkdWeVpYSXVkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc01rUkJRVEpFTzBGQlJUTkVMRmxCUVZrc1EwRkJRenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUlhoQ0xHdENRVUZWTEVkQlFWY3NiVU5CUVcxRExFTkJRVU03UVVGRGVrUXNjVUpCUVdFc1IwRkJWeXh2UWtGQmIwSXNRMEZCUXp0QlFVTTNReXh6UWtGQll5eEhRVUZYTERSQ1FVRTBRaXhEUVVGRE8wRkJWMnBGTzBsQlNVTXNiME5CUVZrc1VVRkJhVU1zUlVGQlJTeFJRVUZyUXp0UlFVTm9SaXhKUVVGSkxFMUJRVTBzUjBGQlZ5eFJRVUZSTEVOQlFVTXNTVUZCU1N4RFFVRkRMR3RDUVVGclFpeERRVUZETEVOQlFVTTdVVUZEZGtRc1NVRkJTU3hSUVVGUkxFZEJRVmNzVFVGQlRTeERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1VVRkJVU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFGQlF6ZEVMRkZCUVZFc1EwRkJReXhSUVVGUkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRE8wbEJRM3BETEVOQlFVTTdTVUZNVFN4clEwRkJUeXhIUVVGSExFTkJRVU1zVlVGQlZTeEZRVUZGTEZWQlFWVXNRMEZCUXl4RFFVRkRPMGxCVFRORExHbERRVUZETzBGQlFVUXNRMEZCUXl4QlFWUkVMRWxCVTBNN1FVRlVXU3hyUTBGQk1FSXNOa0pCVTNSRExFTkJRVUU3UVVGRlJDeEpRVUZKTEdkQ1FVRm5RaXhIUVVFNFFqdEpRVU5xUkN4UlFVRlJMRVZCUVVVc2NVTkJRWEZETzBsQlF5OURMRlZCUVZVc1JVRkJSU3h6UWtGQll6dEpRVU14UWl4WlFVRlpMRVZCUVVVc1dVRkJXVHRKUVVNeFFpeFJRVUZSTEVWQlFVVTdVVUZEVkN4UlFVRlJMRVZCUVVVc1IwRkJSenRMUVVOaU8wTkJRMFFzUTBGQlF6dEJRVVZHTEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc2EwSkJRVlVzUlVGQlJTeEZRVUZGTEVOQlFVTTdTMEZETlVJc1UwRkJVeXhEUVVGRExIRkNRVUZoTEVWQlFVVXNaMEpCUVdkQ0xFTkJRVU03UzBGRE1VTXNWVUZCVlN4RFFVRkRMSE5DUVVGakxFVkJRVVVzTUVKQlFUQkNMRU5CUVVNc1EwRkJReUo5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3RlbXBsYXRlUmVuZGVyZXIvdGVtcGxhdGVSZW5kZXJlci5qc1xuICoqIG1vZHVsZSBpZCA9IDE5NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9jb21tb25qcy5kLnRzJyAvPlxyXG4ndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgaW5wdXRfMSA9IHJlcXVpcmUoJy4uL2lucHV0L2lucHV0Jyk7XHJcbmV4cG9ydHMubW9kdWxlTmFtZSA9ICdybC51aS5jb21wb25lbnRzLnRleHRhcmVhJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsVGV4dGFyZWEnO1xyXG52YXIgdGV4dGFyZWEgPSBpbnB1dF8xLmJ1aWxkSW5wdXQoe1xyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vdGV4dGFyZWEuaHRtbCcpLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICByb3dzOiAnPD8nLFxyXG4gICAgICAgIG5nRGlzYWJsZWQ6ICc8PycsXHJcbiAgICAgICAgbWF4bGVuZ3RoOiAnPD8nLFxyXG4gICAgfSxcclxufSk7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW2lucHV0XzEubW9kdWxlTmFtZV0pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgdGV4dGFyZWEpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lkR1Y0ZEdGeVpXRXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKMFpYaDBZWEpsWVM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3d3UkVGQk1FUTdRVUZGTVVRc1dVRkJXU3hEUVVGRE8wRkJSV0lzU1VGQldTeFBRVUZQTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkZia01zYzBKQlFYTkVMR2RDUVVGblFpeERRVUZETEVOQlFVRTdRVUZGTlVRc2EwSkJRVlVzUjBGQlZ5d3lRa0ZCTWtJc1EwRkJRenRCUVVOcVJDeHhRa0ZCWVN4SFFVRlhMRmxCUVZrc1EwRkJRenRCUVVWb1JDeEpRVUZKTEZGQlFWRXNSMEZCT0VJc2EwSkJRVlVzUTBGQlF6dEpRVU53UkN4UlFVRlJMRVZCUVVVc1QwRkJUeXhEUVVGRExHbENRVUZwUWl4RFFVRkRPMGxCUTNCRExGRkJRVkVzUlVGQlJUdFJRVU5VTEVsQlFVa3NSVUZCUlN4SlFVRkpPMUZCUTFZc1ZVRkJWU3hGUVVGRkxFbEJRVWs3VVVGRGFFSXNVMEZCVXl4RlFVRkZMRWxCUVVrN1MwRkRaanREUVVORUxFTkJRVU1zUTBGQlF6dEJRVVZJTEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc2EwSkJRVlVzUlVGQlJTeERRVUZETEd0Q1FVRlhMRU5CUVVNc1EwRkJRenRMUVVOMlF5eFRRVUZUTEVOQlFVTXNjVUpCUVdFc1JVRkJSU3hSUVVGUkxFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvdGV4dGFyZWEvdGV4dGFyZWEuanNcbiAqKiBtb2R1bGUgaWQgPSAxOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPVxcXCJmaWVsZFxcXCIgbmctY2xhc3M9XFxcInsgJ2Vycm9yJzogaW5wdXQubmdNb2RlbC4kaW52YWxpZCB9XFxcIj5cXHJcXG5cXHQ8bGFiZWwgbmctc2hvdz1cXFwiaW5wdXQuaW5wdXRWYWx1ZSAmJiBpbnB1dC5sYWJlbFxcXCIgY2xhc3M9XFxcImxhYmVsLXNsaWRlIGFuZ3VsYXItYW5pbWF0ZVxcXCI+e3s6OmlucHV0LmxhYmVsfX08L2xhYmVsPlxcclxcblxcdDx0ZXh0YXJlYSBjbGFzcz1cXFwiZm9ybS1jb250cm9sXFxcIiBuZy1tb2RlbD1cXFwiaW5wdXQuaW5wdXRWYWx1ZVxcXCIgcm93cz1cXFwie3s6OmlucHV0LnJvd3N9fVxcXCIgbWF4bGVuZ3RoPVxcXCJ7ezo6aW5wdXQubWF4bGVuZ3RofX1cXFwiIG5nLWRpc2FibGVkPVxcXCJpbnB1dC5uZ0Rpc2FibGVkXFxcIiBwbGFjZWhvbGRlcj1cXFwie3s6OmlucHV0LmxhYmVsfX1cXFwiPjwvdGV4dGFyZWE+XFxyXFxuXFx0PHNwYW4gY2xhc3M9XFxcImVycm9yLXN0cmluZyBhbmd1bGFyLWFuaW1hdGVcXFwiIG5nLWlmPVxcXCJpbnB1dC5pbnB1dFZhbGlkYXRvci5lcnJvciB8IGlzRW1wdHk6ZmFsc2VcXFwiPnt7aW5wdXQuaW5wdXRWYWxpZGF0b3IuZXJyb3J9fTwvc3Bhbj5cXHJcXG48L2Rpdj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy90ZXh0YXJlYS90ZXh0YXJlYS5odG1sXG4gKiogbW9kdWxlIGlkID0gMTk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyAvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi90eXBpbmdzL2NvbW1vbmpzLmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBpbnB1dF8xID0gcmVxdWlyZSgnLi4vaW5wdXQvaW5wdXQnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMudGV4dGJveCc7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybFRleHRib3gnO1xyXG52YXIgdGV4dGJveCA9IGlucHV0XzEuYnVpbGRJbnB1dCh7XHJcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi90ZXh0Ym94Lmh0bWwnKSxcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgbWF4bGVuZ3RoOiAnPD8nLFxyXG4gICAgfSxcclxufSk7XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW2lucHV0XzEubW9kdWxlTmFtZV0pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgdGV4dGJveCk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWRHVjRkR0p2ZUM1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJblJsZUhSaWIzZ3VkSE1pWFN3aWJtRnRaWE1pT2x0ZExDSnRZWEJ3YVc1bmN5STZJa0ZCUVVFc01FUkJRVEJFTzBGQlJURkVMRmxCUVZrc1EwRkJRenRCUVVWaUxFbEJRVmtzVDBGQlR5eFhRVUZOTEZOQlFWTXNRMEZCUXl4RFFVRkJPMEZCUjI1RExITkNRVUZ6UkN4blFrRkJaMElzUTBGQlF5eERRVUZCTzBGQlJUVkVMR3RDUVVGVkxFZEJRVmNzTUVKQlFUQkNMRU5CUVVNN1FVRkRhRVFzY1VKQlFXRXNSMEZCVnl4WFFVRlhMRU5CUVVNN1FVRkZMME1zU1VGQlNTeFBRVUZQTEVkQlFUaENMR3RDUVVGVkxFTkJRVU03U1VGRGJrUXNVVUZCVVN4RlFVRkZMRTlCUVU4c1EwRkJReXhuUWtGQlowSXNRMEZCUXp0SlFVTnVReXhSUVVGUkxFVkJRVVU3VVVGRFZDeFRRVUZUTEVWQlFVVXNTVUZCU1R0TFFVTm1PME5CUTBRc1EwRkJReXhEUVVGRE8wRkJSVWdzVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4clFrRkJWU3hGUVVGRkxFTkJRVU1zYTBKQlFWY3NRMEZCUXl4RFFVRkRPMHRCUTNaRExGTkJRVk1zUTBGQlF5eHhRa0ZCWVN4RlFVRkZMRTlCUVU4c1EwRkJReXhEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvdGV4dGJveC90ZXh0Ym94LmpzXG4gKiogbW9kdWxlIGlkID0gMTk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZmllbGRcXFwiIG5nLWNsYXNzPVxcXCJ7ICdlcnJvcic6IGlucHV0Lm5nTW9kZWwuJGludmFsaWQgfVxcXCI+XFxyXFxuXFx0PGxhYmVsIG5nLXNob3c9XFxcImlucHV0LmlucHV0VmFsdWUgJiYgaW5wdXQubGFiZWxcXFwiIGNsYXNzPVxcXCJsYWJlbC1zbGlkZSBhbmd1bGFyLWFuaW1hdGVcXFwiPnt7OjppbnB1dC5sYWJlbH19PC9sYWJlbD5cXHJcXG5cXHQ8aW5wdXQgIHR5cGU9XFxcInRleHRcXFwiIGNsYXNzPVxcXCJmb3JtLWNvbnRyb2wgYW5ndWxhci1hbmltYXRlXFxcIiBuZy1tb2RlbD1cXFwiaW5wdXQuaW5wdXRWYWx1ZVxcXCIgcGxhY2Vob2xkZXI9XFxcInt7OjppbnB1dC5sYWJlbH19XFxcIiBtYXhsZW5ndGg9XFxcInt7OjppbnB1dC5tYXhsZW5ndGh9fVxcXCIgLz5cXHJcXG5cXHQ8c3BhbiBjbGFzcz1cXFwiZXJyb3Itc3RyaW5nIGFuZ3VsYXItYW5pbWF0ZVxcXCIgbmctaWY9XFxcImlucHV0LmlucHV0VmFsaWRhdG9yLmVycm9yIHwgaXNFbXB0eTpmYWxzZVxcXCI+e3tpbnB1dC5pbnB1dFZhbGlkYXRvci5lcnJvcn19PC9zcGFuPlxcclxcbjwvZGl2PlwiXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3RleHRib3gvdGV4dGJveC5odG1sXG4gKiogbW9kdWxlIGlkID0gMTk4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgIGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn07XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xyXG52YXIgdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xID0gcmVxdWlyZSgndHlwZXNjcmlwdC1hbmd1bGFyLXV0aWxpdGllcycpO1xyXG52YXIgX19wYXJlbnRDaGlsZCA9IHR5cGVzY3JpcHRfYW5ndWxhcl91dGlsaXRpZXNfMS5zZXJ2aWNlcy5wYXJlbnRDaGlsZEJlaGF2aW9yO1xyXG52YXIgX19zZWFyY2ggPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMuc2VhcmNoO1xyXG52YXIgX19vYmplY3RVdGlsaXR5ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxudmFyIF9fYXJyYXlVdGlsaXR5ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLmFycmF5O1xyXG52YXIgX190cmFuc2Zvcm0gPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMudHJhbnNmb3JtLnRyYW5zZm9ybTtcclxudmFyIGlucHV0XzEgPSByZXF1aXJlKCcuLi9pbnB1dC9pbnB1dCcpO1xyXG52YXIgY29tcG9uZW50VmFsaWRhdG9yX3NlcnZpY2VfMSA9IHJlcXVpcmUoJy4uLy4uL3NlcnZpY2VzL2NvbXBvbmVudFZhbGlkYXRvci9jb21wb25lbnRWYWxpZGF0b3Iuc2VydmljZScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy50eXBlYWhlYWQnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxUeXBlYWhlYWQnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ1R5cGVhaGVhZENvbnRyb2xsZXInO1xyXG52YXIgVHlwZWFoZWFkQ29udHJvbGxlciA9IChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoVHlwZWFoZWFkQ29udHJvbGxlciwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFR5cGVhaGVhZENvbnRyb2xsZXIoJHNjb3BlLCAkcSwgJGF0dHJzLCAkdGltZW91dCwgcGFyZW50Q2hpbGQsIG9iamVjdCwgYXJyYXksIGNvbXBvbmVudFZhbGlkYXRvckZhY3RvcnkpIHtcclxuICAgICAgICBfc3VwZXIuY2FsbCh0aGlzLCAkc2NvcGUsICRhdHRycywgY29tcG9uZW50VmFsaWRhdG9yRmFjdG9yeSk7XHJcbiAgICAgICAgdGhpcy4kcSA9ICRxO1xyXG4gICAgICAgIHRoaXMuJHRpbWVvdXQgPSAkdGltZW91dDtcclxuICAgICAgICB0aGlzLnBhcmVudENoaWxkID0gcGFyZW50Q2hpbGQ7XHJcbiAgICAgICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICAgICAgdGhpcy5hcnJheSA9IGFycmF5O1xyXG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29sbGFwc2VkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oYXNTZWFyY2hPcHRpb24gPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9zZWFyY2hPcHRpb24gPSB7XHJcbiAgICAgICAgICAgIF9faXNTZWFyY2hPcHRpb246IHRydWUsXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmlucHV0VHlwZSA9ICd0eXBlYWhlYWQnO1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFR5cGVhaGVhZENvbnRyb2xsZXIucHJvdG90eXBlLCBcInNlbGVjdGlvblwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5nTW9kZWwuJHZpZXdWYWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuX19pc1NlYXJjaE9wdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5jcmVhdGUoeyB2YWx1ZTogdmFsdWUudGV4dCB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KHsgdmFsdWU6IHZhbHVlIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY29sbGFwc2VPblNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm5nTW9kZWwuJHNldFZpZXdWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIFR5cGVhaGVhZENvbnRyb2xsZXIucHJvdG90eXBlLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBfc3VwZXIucHJvdG90eXBlLiRvbkluaXQuY2FsbCh0aGlzKTtcclxuICAgICAgICB0aGlzLmxvYWREZWxheSA9IHRoaXMudXNlQ2xpZW50U2VhcmNoaW5nID8gMTAwIDogNTAwO1xyXG4gICAgICAgIHRoaXMucHJlZml4ID0gdGhpcy5wcmVmaXggfHwgJ1NlYXJjaCBmb3InO1xyXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSB0aGlzLmxhYmVsICE9IG51bGwgPyB0aGlzLnByZWZpeCArICcgJyArIHRoaXMubGFiZWwudG9Mb3dlckNhc2UoKSA6ICdTZWFyY2gnO1xyXG4gICAgICAgIHZhciAkYXR0cnMgPSB0aGlzLiRhdHRycztcclxuICAgICAgICB0aGlzLmNvbGxhcHNlT25TZWxlY3QgPSB0aGlzLmFsbG93Q29sbGFwc2UgfHwgdGhpcy5vYmplY3QuaXNOdWxsT3JFbXB0eSgkYXR0cnMuc2VsZWN0KTtcclxuICAgICAgICB0aGlzLmFsbG93Q3VzdG9tT3B0aW9uID0gIXRoaXMub2JqZWN0LmlzTnVsbE9yRW1wdHkoJGF0dHJzLmNyZWF0ZSk7XHJcbiAgICAgICAgdGhpcy4kdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChfdGhpcy5jb2xsYXBzZU9uU2VsZWN0ICYmICFfdGhpcy5vYmplY3QuaXNOdWxsT3JFbXB0eShfdGhpcy5uZ01vZGVsLiR2aWV3VmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jb2xsYXBzZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRDaGlsZC5yZWdpc3RlckNoaWxkQmVoYXZpb3IodGhpcy5jaGlsZExpbmssIHtcclxuICAgICAgICAgICAgYWRkOiB0aGlzLmFkZEl0ZW0uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgcmVtb3ZlOiB0aGlzLnJlbW92ZUl0ZW0uYmluZCh0aGlzKSxcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLiRzY29wZS4kd2F0Y2goZnVuY3Rpb24gKCkgeyByZXR1cm4gX3RoaXMubmdNb2RlbC4kdmlld1ZhbHVlOyB9LCBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlICE9IG51bGwgJiYgX3RoaXMuY29sbGFwc2VPblNlbGVjdCkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuY29sbGFwc2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFR5cGVhaGVhZENvbnRyb2xsZXIucHJvdG90eXBlLmdldERpc3BsYXlOYW1lID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbSAhPSBudWxsICYmIGl0ZW0uX19pc1NlYXJjaE9wdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gaXRlbS50ZXh0O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gX190cmFuc2Zvcm0uZ2V0VmFsdWUoaXRlbSwgdGhpcy50cmFuc2Zvcm0pO1xyXG4gICAgfTtcclxuICAgIFR5cGVhaGVhZENvbnRyb2xsZXIucHJvdG90eXBlLnJlZnJlc2ggPSBmdW5jdGlvbiAoc2VhcmNoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAodGhpcy5vYmplY3QuaXNOdWxsT3JFbXB0eShzZWFyY2gpKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZUl0ZW1zID0gW107XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxvYWRJdGVtcyhzZWFyY2gpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIF90aGlzLl9zZWFyY2hPcHRpb24udGV4dCA9IHNlYXJjaDtcclxuICAgICAgICAgICAgaWYgKF90aGlzLnNob3dDdXN0b21TZWFyY2goc2VhcmNoKSkge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMuaGFzU2VhcmNoT3B0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIF90aGlzLnZpc2libGVJdGVtcy51bnNoaWZ0KF90aGlzLl9zZWFyY2hPcHRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVHlwZWFoZWFkQ29udHJvbGxlci5wcm90b3R5cGUubG9hZEl0ZW1zID0gZnVuY3Rpb24gKHNlYXJjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKCF0aGlzLnVzZUNsaWVudFNlYXJjaGluZykge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy4kcS53aGVuKHRoaXMuZ2V0SXRlbXMoe1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoOiBzZWFyY2gsXHJcbiAgICAgICAgICAgIH0pKS50aGVuKGZ1bmN0aW9uIChpdGVtcykge1xyXG4gICAgICAgICAgICAgICAgX3RoaXMudmlzaWJsZUl0ZW1zID0gaXRlbXM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY2FjaGVkSXRlbXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aXNpYmxlSXRlbXMgPSB0aGlzLmZpbHRlcih0aGlzLmNhY2hlZEl0ZW1zLCBzZWFyY2gpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHEud2hlbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJHEud2hlbih0aGlzLmdldEl0ZW1zKCkpLnRoZW4oZnVuY3Rpb24gKGl0ZW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2FjaGVkSXRlbXMgPSBpdGVtcztcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy52aXNpYmxlSXRlbXMgPSBfdGhpcy5maWx0ZXIoaXRlbXMsIHNlYXJjaCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUeXBlYWhlYWRDb250cm9sbGVyLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLm5nTW9kZWwuJHNldFZpZXdWYWx1ZShudWxsKTtcclxuICAgICAgICB0aGlzLmNvbGxhcHNlZCA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIFR5cGVhaGVhZENvbnRyb2xsZXIucHJvdG90eXBlLnNob3dDdXN0b21TZWFyY2ggPSBmdW5jdGlvbiAoc2VhcmNoKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICByZXR1cm4gdGhpcy5hbGxvd0N1c3RvbU9wdGlvblxyXG4gICAgICAgICAgICAmJiAhdGhpcy5oYXNTZWFyY2hPcHRpb25cclxuICAgICAgICAgICAgJiYgIV8uZmluZCh0aGlzLnZpc2libGVJdGVtcywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXREaXNwbGF5TmFtZShpdGVtKSA9PT0gc2VhcmNoO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBUeXBlYWhlYWRDb250cm9sbGVyLnByb3RvdHlwZS5maWx0ZXIgPSBmdW5jdGlvbiAobGlzdCwgc2VhcmNoKSB7XHJcbiAgICAgICAgcmV0dXJuIF8uZmlsdGVyKGxpc3QsIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBfX3NlYXJjaC5zZWFyY2hVdGlsaXR5LnRva2VuaXplZFNlYXJjaChpdGVtLCBzZWFyY2gpOyB9KTtcclxuICAgIH07XHJcbiAgICBUeXBlYWhlYWRDb250cm9sbGVyLnByb3RvdHlwZS5hZGRJdGVtID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAodGhpcy5jYWNoZWRJdGVtcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkSXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVHlwZWFoZWFkQ29udHJvbGxlci5wcm90b3R5cGUucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2FjaGVkSXRlbXMgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmFycmF5LnJlbW92ZSh0aGlzLmNhY2hlZEl0ZW1zLCBpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVHlwZWFoZWFkQ29udHJvbGxlci4kaW5qZWN0ID0gWyckc2NvcGUnLFxyXG4gICAgICAgICckcScsXHJcbiAgICAgICAgJyRhdHRycycsXHJcbiAgICAgICAgJyR0aW1lb3V0JyxcclxuICAgICAgICBfX3BhcmVudENoaWxkLnNlcnZpY2VOYW1lLFxyXG4gICAgICAgIF9fb2JqZWN0VXRpbGl0eS5zZXJ2aWNlTmFtZSxcclxuICAgICAgICBfX2FycmF5VXRpbGl0eS5zZXJ2aWNlTmFtZSxcclxuICAgICAgICBjb21wb25lbnRWYWxpZGF0b3Jfc2VydmljZV8xLmZhY3RvcnlOYW1lXTtcclxuICAgIHJldHVybiBUeXBlYWhlYWRDb250cm9sbGVyO1xyXG59KGlucHV0XzEuSW5wdXRDb250cm9sbGVyKSk7XHJcbmV4cG9ydHMuVHlwZWFoZWFkQ29udHJvbGxlciA9IFR5cGVhaGVhZENvbnRyb2xsZXI7XHJcbnZhciB0eXBlYWhlYWQgPSBpbnB1dF8xLmJ1aWxkSW5wdXQoe1xyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vdHlwZWFoZWFkLmh0bWwnKSxcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICd0eXBlYWhlYWQnLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBjaGlsZExpbms6ICc9PycsXHJcbiAgICAgICAgc2VsZWN0OiAnJicsXHJcbiAgICAgICAgY3JlYXRlOiAnJicsXHJcbiAgICAgICAgYWxsb3dDb2xsYXBzZTogJzw/JyxcclxuICAgICAgICB0cmFuc2Zvcm06ICc8PycsXHJcbiAgICAgICAgZ2V0SXRlbXM6ICcmJyxcclxuICAgICAgICBwcmVmaXg6ICdAJyxcclxuICAgICAgICB1c2VDbGllbnRTZWFyY2hpbmc6ICc8PycsXHJcbiAgICAgICAgbmdEaXNhYmxlZDogJzw/JyxcclxuICAgIH0sXHJcbn0pO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgIF9fcGFyZW50Q2hpbGQubW9kdWxlTmFtZSxcclxuICAgIF9fb2JqZWN0VXRpbGl0eS5tb2R1bGVOYW1lLFxyXG4gICAgX19hcnJheVV0aWxpdHkubW9kdWxlTmFtZSxcclxuICAgIGlucHV0XzEubW9kdWxlTmFtZVxyXG5dKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIHR5cGVhaGVhZClcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIFR5cGVhaGVhZENvbnRyb2xsZXIpO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lkSGx3WldGb1pXRmtMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWRIbHdaV0ZvWldGa0xuUnpJbDBzSW01aGJXVnpJanBiWFN3aWJXRndjR2x1WjNNaU9pSkJRVUZCTEZsQlFWa3NRMEZCUXpzN096czdPMEZCUldJc1NVRkJXU3hQUVVGUExGZEJRVTBzVTBGQlV5eERRVUZETEVOQlFVRTdRVUZEYmtNc1NVRkJXU3hEUVVGRExGZEJRVTBzVVVGQlVTeERRVUZETEVOQlFVRTdRVUZGTlVJc05rTkJRWGxDTERoQ1FVRTRRaXhEUVVGRExFTkJRVUU3UVVGRGVFUXNTVUZCVHl4aFFVRmhMRWRCUVVjc2RVTkJRVkVzUTBGQlF5eHRRa0ZCYlVJc1EwRkJRenRCUVVOd1JDeEpRVUZQTEZGQlFWRXNSMEZCUnl4MVEwRkJVU3hEUVVGRExFMUJRVTBzUTBGQlF6dEJRVU5zUXl4SlFVRlBMR1ZCUVdVc1IwRkJSeXgxUTBGQlVTeERRVUZETEUxQlFVMHNRMEZCUXp0QlFVTjZReXhKUVVGUExHTkJRV01zUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRXRCUVVzc1EwRkJRenRCUVVWMlF5eEpRVUZQTEZkQlFWY3NSMEZCUnl4MVEwRkJVU3hEUVVGRExGTkJRVk1zUTBGQlF5eFRRVUZUTEVOQlFVTTdRVUZGYkVRc2MwSkJRWFZGTEdkQ1FVRm5RaXhEUVVGRExFTkJRVUU3UVVGRGVFWXNNa05CUVhsR0xEaEVRVUU0UkN4RFFVRkRMRU5CUVVFN1FVRkZOMGtzYTBKQlFWVXNSMEZCVnl3MFFrRkJORUlzUTBGQlF6dEJRVU5zUkN4eFFrRkJZU3hIUVVGWExHRkJRV0VzUTBGQlF6dEJRVU4wUXl4elFrRkJZeXhIUVVGWExIRkNRVUZ4UWl4RFFVRkRPMEZCY1VZeFJEdEpRVUY1UXl4MVEwRkJaVHRKUVhORWRrUXNOa0pCUVZrc1RVRkJjMElzUlVGRGRrSXNSVUZCY1VJc1JVRkROMElzVFVGQmRVSXNSVUZEWml4UlFVRnBReXhGUVVOcVF5eFhRVUZ6UkN4RlFVTjBSQ3hOUVVGelF5eEZRVU4wUXl4TFFVRnRReXhGUVVNelF5eDVRa0ZCY1VRN1VVRkRkRVFzYTBKQlFVMHNUVUZCVFN4RlFVRlBMRTFCUVUwc1JVRkJSU3g1UWtGQmVVSXNRMEZCUXl4RFFVRkRPMUZCVURkRExFOUJRVVVzUjBGQlJpeEZRVUZGTEVOQlFXMUNPMUZCUlhKQ0xHRkJRVkVzUjBGQlVpeFJRVUZSTEVOQlFYbENPMUZCUTJwRExHZENRVUZYTEVkQlFWZ3NWMEZCVnl4RFFVRXlRenRSUVVOMFJDeFhRVUZOTEVkQlFVNHNUVUZCVFN4RFFVRm5RenRSUVVOMFF5eFZRVUZMTEVkQlFVd3NTMEZCU3l4RFFVRTRRanRSUVRkRE9VTXNXVUZCVHl4SFFVRlpMRXRCUVVzc1EwRkJRenRSUVV0NlFpeGpRVUZUTEVkQlFWa3NTMEZCU3l4RFFVRkRPMUZCUXpOQ0xHOUNRVUZsTEVkQlFWa3NTMEZCU3l4RFFVRkRPMUZCY1VKcVF5eHJRa0ZCWVN4SFFVRlJPMWxCUTNCQ0xHZENRVUZuUWl4RlFVRkZMRWxCUVVrN1UwRkRkRUlzUTBGQlF6dFJRVzFDUVN4SlFVRkpMRU5CUVVNc1UwRkJVeXhIUVVGSExGZEJRVmNzUTBGQlF6dEpRVU01UWl4RFFVRkRPMGxCZWtOR0xITkNRVUZKTERCRFFVRlRPMkZCUVdJN1dVRkRReXhOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4VlFVRlZMRU5CUVVNN1VVRkRhRU1zUTBGQlF6dGhRVVZFTEZWQlFXTXNTMEZCVlR0WlFVTjJRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eExRVUZMTEVsQlFVa3NTVUZCU1N4RFFVRkRMRU5CUVVNc1EwRkJRenRuUWtGRGJrSXNSVUZCUlN4RFFVRkRMRU5CUVVNc1MwRkJTeXhEUVVGRExHZENRVUZuUWl4RFFVRkRMRU5CUVVNc1EwRkJRenR2UWtGRE5VSXNTMEZCU3l4SFFVRkhMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zUlVGQlJTeExRVUZMTEVWQlFVVXNTMEZCU3l4RFFVRkRMRWxCUVVrc1JVRkJSU3hEUVVGRExFTkJRVU03WjBKQlF6VkRMRU5CUVVNN1owSkJSVVFzU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4RlFVRkZMRXRCUVVzc1JVRkJSU3hMUVVGTExFVkJRVVVzUTBGQlF5eERRVUZETzJkQ1FVVTVRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTXNaMEpCUVdkQ0xFTkJRVU1zUTBGQlF5eERRVUZETzI5Q1FVTXpRaXhKUVVGSkxFTkJRVU1zVTBGQlV5eEhRVUZITEVsQlFVa3NRMEZCUXp0dlFrRkRkRUlzU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4aFFVRmhMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU03WjBKQlEyNURMRU5CUVVNN1dVRkRSaXhEUVVGRE8xRkJRMFlzUTBGQlF6czdPMDlCWmtFN1NVRjVRMFFzY1VOQlFVOHNSMEZCVUR0UlFVRkJMR2xDUVRKQ1F6dFJRVEZDUVN4blFrRkJTeXhEUVVGRExFOUJRVThzVjBGQlJTeERRVUZETzFGQlJXaENMRWxCUVVrc1EwRkJReXhUUVVGVExFZEJRVWNzU1VGQlNTeERRVUZETEd0Q1FVRnJRaXhIUVVGSExFZEJRVWNzUjBGQlJ5eEhRVUZITEVOQlFVTTdVVUZEY2tRc1NVRkJTU3hEUVVGRExFMUJRVTBzUjBGQlJ5eEpRVUZKTEVOQlFVTXNUVUZCVFN4SlFVRkpMRmxCUVZrc1EwRkJRenRSUVVNeFF5eEpRVUZKTEVOQlFVTXNWMEZCVnl4SFFVRkhMRWxCUVVrc1EwRkJReXhMUVVGTExFbEJRVWtzU1VGQlNTeEhRVUZITEVsQlFVa3NRMEZCUXl4TlFVRk5MRWRCUVVjc1IwRkJSeXhIUVVGSExFbEJRVWtzUTBGQlF5eExRVUZMTEVOQlFVTXNWMEZCVnl4RlFVRkZMRWRCUVVjc1VVRkJVU3hEUVVGRE8xRkJSV2hITEVsQlFVa3NUVUZCVFN4SFFVRjVRaXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETzFGQlF5OURMRWxCUVVrc1EwRkJReXhuUWtGQlowSXNSMEZCUnl4SlFVRkpMRU5CUVVNc1lVRkJZU3hKUVVGSkxFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNZVUZCWVN4RFFVRkRMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF6dFJRVU4yUml4SlFVRkpMRU5CUVVNc2FVSkJRV2xDTEVkQlFVY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExHRkJRV0VzUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNN1VVRkZia1VzU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXp0WlFVTmlMRVZCUVVVc1EwRkJReXhEUVVGRExFdEJRVWtzUTBGQlF5eG5Ra0ZCWjBJc1NVRkJTU3hEUVVGRExFdEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNZVUZCWVN4RFFVRkRMRXRCUVVrc1EwRkJReXhQUVVGUExFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRPMmRDUVVOc1JpeExRVUZKTEVOQlFVTXNVMEZCVXl4SFFVRkhMRWxCUVVrc1EwRkJRenRaUVVOMlFpeERRVUZETzFGQlEwWXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkZTQ3hKUVVGSkxFTkJRVU1zVjBGQlZ5eERRVUZETEhGQ1FVRnhRaXhEUVVGRExFbEJRVWtzUTBGQlF5eFRRVUZUTEVWQlFVVTdXVUZEZEVRc1IwRkJSeXhGUVVGRkxFbEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJRenRaUVVNMVFpeE5RVUZOTEVWQlFVVXNTVUZCU1N4RFFVRkRMRlZCUVZVc1EwRkJReXhKUVVGSkxFTkJRVU1zU1VGQlNTeERRVUZETzFOQlEyeERMRU5CUVVNc1EwRkJRenRSUVVWSUxFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMR05CUVdFc1RVRkJUU3hEUVVGRExFdEJRVWtzUTBGQlF5eFBRVUZQTEVOQlFVTXNWVUZCVlN4RFFVRkRMRU5CUVVNc1EwRkJReXhGUVVGRkxGVkJRVU1zUzBGQlZUdFpRVU0zUlN4RlFVRkZMRU5CUVVNc1EwRkJReXhMUVVGTExFbEJRVWtzU1VGQlNTeEpRVUZKTEV0QlFVa3NRMEZCUXl4blFrRkJaMElzUTBGQlF5eERRVUZETEVOQlFVTTdaMEpCUXpWRExFdEJRVWtzUTBGQlF5eFRRVUZUTEVkQlFVY3NTVUZCU1N4RFFVRkRPMWxCUTNaQ0xFTkJRVU03VVVGRFJpeERRVUZETEVOQlFVTXNRMEZCUXp0SlFVTktMRU5CUVVNN1NVRkZSQ3cwUTBGQll5eEhRVUZrTEZWQlFXVXNTVUZCVXp0UlFVTjJRaXhGUVVGRkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVsQlFVa3NTVUZCU1N4SlFVRkpMRWxCUVVrc1EwRkJReXhuUWtGQlowSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRNME1zVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4SlFVRkpMRU5CUVVNN1VVRkRiRUlzUTBGQlF6dFJRVVZFTEUxQlFVMHNRMEZCUXl4WFFVRlhMRU5CUVVNc1VVRkJVU3hEUVVGRExFbEJRVWtzUlVGQlJTeEpRVUZKTEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNN1NVRkRia1FzUTBGQlF6dEpRVVZFTEhGRFFVRlBMRWRCUVZBc1ZVRkJVU3hOUVVGak8xRkJRWFJDTEdsQ1FXVkRPMUZCWkVFc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEUxQlFVMHNRMEZCUXl4aFFVRmhMRU5CUVVNc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETzFsQlEzWkRMRWxCUVVrc1EwRkJReXhaUVVGWkxFZEJRVWNzUlVGQlJTeERRVUZETzFsQlEzWkNMRTFCUVUwc1EwRkJReXhKUVVGSkxFTkJRVU03VVVGRFlpeERRVUZETzFGQlEwUXNTVUZCU1N4RFFVRkRMRTlCUVU4c1IwRkJSeXhKUVVGSkxFTkJRVU03VVVGRGNFSXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zVFVGQlRTeERRVUZETEVOQlFVTXNTVUZCU1N4RFFVRkRPMWxCUTJ4RExFdEJRVWtzUTBGQlF5eFBRVUZQTEVkQlFVY3NTMEZCU3l4RFFVRkRPMWxCUTNKQ0xFdEJRVWtzUTBGQlF5eGhRVUZoTEVOQlFVTXNTVUZCU1N4SFFVRkhMRTFCUVUwc1EwRkJRenRaUVVWcVF5eEZRVUZGTEVOQlFVTXNRMEZCUXl4TFFVRkpMRU5CUVVNc1owSkJRV2RDTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU51UXl4TFFVRkpMRU5CUVVNc1pVRkJaU3hIUVVGSExFbEJRVWtzUTBGQlF6dG5Ra0ZETlVJc1MwRkJTU3hEUVVGRExGbEJRVmtzUTBGQlF5eFBRVUZQTEVOQlFVTXNTMEZCU1N4RFFVRkRMR0ZCUVdFc1EwRkJReXhEUVVGRE8xbEJReTlETEVOQlFVTTdVVUZEUml4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGRlJDeDFRMEZCVXl4SFFVRlVMRlZCUVZVc1RVRkJZenRSUVVGNFFpeHBRa0ZyUWtNN1VVRnFRa0VzUlVGQlJTeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc2EwSkJRV3RDTEVOQlFVTXNRMEZCUXl4RFFVRkRPMWxCUXpsQ0xFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETzJkQ1FVTnFReXhOUVVGTkxFVkJRVVVzVFVGQlRUdGhRVU5rTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGRExFdEJRVms3WjBKQlEzSkNMRXRCUVVrc1EwRkJReXhaUVVGWkxFZEJRVWNzUzBGQlN5eERRVUZETzFsQlF6TkNMRU5CUVVNc1EwRkJReXhEUVVGRE8xRkJRMG9zUTBGQlF6dFJRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMWxCUTFBc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEZkQlFWY3NTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU01UWl4SlFVRkpMRU5CUVVNc1dVRkJXU3hIUVVGSExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNTVUZCU1N4RFFVRkRMRmRCUVZjc1JVRkJSU3hOUVVGTkxFTkJRVU1zUTBGQlF6dG5Ra0ZETVVRc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eEZRVUZGTEVOQlFVTXNTVUZCU1N4RlFVRkZMRU5CUVVNN1dVRkRka0lzUTBGQlF6dFpRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkRPMmRDUVVOUUxFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVVVGQlVTeEZRVUZGTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1ZVRkJReXhMUVVGWk8yOUNRVU4wUkN4TFFVRkpMRU5CUVVNc1YwRkJWeXhIUVVGSExFdEJRVXNzUTBGQlF6dHZRa0ZEZWtJc1MwRkJTU3hEUVVGRExGbEJRVmtzUjBGQlJ5eExRVUZKTEVOQlFVTXNUVUZCVFN4RFFVRkRMRXRCUVVzc1JVRkJSU3hOUVVGTkxFTkJRVU1zUTBGQlF6dG5Ra0ZEYUVRc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRFNpeERRVUZETzFGQlEwWXNRMEZCUXp0SlFVTkdMRU5CUVVNN1NVRkZSQ3h0UTBGQlN5eEhRVUZNTzFGQlEwTXNTVUZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhoUVVGaExFTkJRVU1zU1VGQlNTeERRVUZETEVOQlFVTTdVVUZEYWtNc1NVRkJTU3hEUVVGRExGTkJRVk1zUjBGQlJ5eExRVUZMTEVOQlFVTTdTVUZEZUVJc1EwRkJRenRKUVVWUExEaERRVUZuUWl4SFFVRjRRaXhWUVVGNVFpeE5RVUZqTzFGQlFYWkRMR2xDUVUxRE8xRkJURUVzVFVGQlRTeERRVUZETEVsQlFVa3NRMEZCUXl4cFFrRkJhVUk3WlVGRGVrSXNRMEZCUXl4SlFVRkpMRU5CUVVNc1pVRkJaVHRsUVVOeVFpeERRVUZETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExGbEJRVmtzUlVGQlJTeFZRVUZETEVsQlFWTTdaMEpCUTNoRExFMUJRVTBzUTBGQlF5eExRVUZKTEVOQlFVTXNZMEZCWXl4RFFVRkRMRWxCUVVrc1EwRkJReXhMUVVGTExFMUJRVTBzUTBGQlF6dFpRVU0zUXl4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGRlR5eHZRMEZCVFN4SFFVRmtMRlZCUVdVc1NVRkJWeXhGUVVGRkxFMUJRV003VVVGRGVrTXNUVUZCVFN4RFFVRkRMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zU1VGQlNTeEZRVUZGTEZWQlFVTXNTVUZCVXl4SlFVRm5RaXhOUVVGTkxFTkJRVU1zVVVGQlVTeERRVUZETEdGQlFXRXNRMEZCUXl4bFFVRmxMRU5CUVVNc1NVRkJTU3hGUVVGRkxFMUJRVTBzUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXl4RFFVRkRMRU5CUVVNN1NVRkRha2dzUTBGQlF6dEpRVVZQTEhGRFFVRlBMRWRCUVdZc1ZVRkJaMElzU1VGQlV6dFJRVU40UWl4RlFVRkZMRU5CUVVNc1EwRkJReXhKUVVGSkxFTkJRVU1zVjBGQlZ5eEpRVUZKTEVsQlFVa3NRMEZCUXl4RFFVRkRMRU5CUVVNN1dVRkRPVUlzU1VGQlNTeERRVUZETEZkQlFWY3NRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03VVVGRE4wSXNRMEZCUXp0SlFVTkdMRU5CUVVNN1NVRkZUeXgzUTBGQlZTeEhRVUZzUWl4VlFVRnRRaXhKUVVGVE8xRkJRek5DTEVWQlFVVXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhYUVVGWExFbEJRVWtzU1VGQlNTeERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTTVRaXhKUVVGSkxFTkJRVU1zUzBGQlN5eERRVUZETEUxQlFVMHNRMEZCUXl4SlFVRkpMRU5CUVVNc1YwRkJWeXhGUVVGRkxFbEJRVWtzUTBGQlF5eERRVUZETzFGQlF6TkRMRU5CUVVNN1NVRkRSaXhEUVVGRE8wbEJla2hOTERKQ1FVRlBMRWRCUVdFc1EwRkJReXhSUVVGUk8xRkJRMnBETEVsQlFVazdVVUZEU2l4UlFVRlJPMUZCUTFJc1ZVRkJWVHRSUVVOV0xHRkJRV0VzUTBGQlF5eFhRVUZYTzFGQlEzcENMR1ZCUVdVc1EwRkJReXhYUVVGWE8xRkJRek5DTEdOQlFXTXNRMEZCUXl4WFFVRlhPMUZCUXpGQ0xIZERRVUUyUWl4RFFVRkRMRU5CUVVNN1NVRnRTRzVETERCQ1FVRkRPMEZCUVVRc1EwRkJReXhCUVhoTFJDeERRVUY1UXl4MVFrRkJaU3hIUVhkTGRrUTdRVUY0UzFrc01rSkJRVzFDTEhOQ1FYZExMMElzUTBGQlFUdEJRVVZFTEVsQlFVa3NVMEZCVXl4SFFVRTRRaXhyUWtGQlZTeERRVUZETzBsQlEzSkVMRkZCUVZFc1JVRkJSU3hQUVVGUExFTkJRVU1zYTBKQlFXdENMRU5CUVVNN1NVRkRja01zVlVGQlZTeEZRVUZGTEhOQ1FVRmpPMGxCUXpGQ0xGbEJRVmtzUlVGQlJTeFhRVUZYTzBsQlEzcENMRkZCUVZFc1JVRkJSVHRSUVVOVUxGTkJRVk1zUlVGQlJTeEpRVUZKTzFGQlEyWXNUVUZCVFN4RlFVRkZMRWRCUVVjN1VVRkRXQ3hOUVVGTkxFVkJRVVVzUjBGQlJ6dFJRVU5ZTEdGQlFXRXNSVUZCUlN4SlFVRkpPMUZCUTI1Q0xGTkJRVk1zUlVGQlJTeEpRVUZKTzFGQlEyWXNVVUZCVVN4RlFVRkZMRWRCUVVjN1VVRkRZaXhOUVVGTkxFVkJRVVVzUjBGQlJ6dFJRVU5ZTEd0Q1FVRnJRaXhGUVVGRkxFbEJRVWs3VVVGRGVFSXNWVUZCVlN4RlFVRkZMRWxCUVVrN1MwRkRhRUk3UTBGRFJDeERRVUZETEVOQlFVTTdRVUZGU0N4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVTdTVUZETVVJc1lVRkJZU3hEUVVGRExGVkJRVlU3U1VGRGRFSXNaVUZCWlN4RFFVRkRMRlZCUVZVN1NVRkRNVUlzWTBGQll5eERRVUZETEZWQlFWVTdTVUZEZWtJc2EwSkJRVmM3UTBGRFlpeERRVUZETzB0QlEwRXNVMEZCVXl4RFFVRkRMSEZDUVVGaExFVkJRVVVzVTBGQlV5eERRVUZETzB0QlEyNURMRlZCUVZVc1EwRkJReXh6UWtGQll5eEZRVUZGTEcxQ1FVRnRRaXhEUVVGRExFTkJRVU1pZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy90eXBlYWhlYWQvdHlwZWFoZWFkLmpzXG4gKiogbW9kdWxlIGlkID0gMTk5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiZmllbGRcXFwiIG5nLWNsYXNzPVxcXCJ7ICdoYXMtZXJyb3InOiB0eXBlYWhlYWQubmdNb2RlbC4kaW52YWxpZCB9XFxcIj5cXHJcXG5cXHQ8bGFiZWwgbmctc2hvdz1cXFwidHlwZWFoZWFkLnNlbGVjdGlvblxcXCIgY2xhc3M9XFxcInNob3ctaGlkZSBhbmd1bGFyLWFuaW1hdGVcXFwiPlxcclxcblxcdFxcdHt7Ojp0eXBlYWhlYWQubGFiZWx9fVxcclxcblxcdDwvbGFiZWw+XFxyXFxuXFx0PGRpdiBuZy1pZj1cXFwiIXR5cGVhaGVhZC5jb2xsYXBzZWRcXFwiPlxcclxcblxcdFxcdDx1aS1zZWxlY3QgbmctbW9kZWw9XFxcInR5cGVhaGVhZC5zZWxlY3Rpb25cXFwiIHRoZW1lPVxcXCJib290c3RyYXBcXFwiIG5nLWRpc2FibGVkPVxcXCJ0eXBlYWhlYWQubmdEaXNhYmxlZFxcXCI+XFxyXFxuXFx0XFx0XFx0PHVpLXNlbGVjdC1tYXRjaCBwbGFjZWhvbGRlcj1cXFwie3s6OnR5cGVhaGVhZC5wbGFjZWhvbGRlcn19XFxcIj57e3R5cGVhaGVhZC5nZXREaXNwbGF5TmFtZSgkc2VsZWN0LnNlbGVjdGVkKX19PC91aS1zZWxlY3QtbWF0Y2g+XFxyXFxuXFx0XFx0XFx0PHVpLXNlbGVjdC1jaG9pY2VzIHJlcGVhdD1cXFwiaXRlbSBpbiB0eXBlYWhlYWQudmlzaWJsZUl0ZW1zXFxcIlxcclxcblxcdFxcdFxcdFxcdFxcdFxcdFxcdFxcdHJlZnJlc2g9XFxcInR5cGVhaGVhZC5yZWZyZXNoKCRzZWxlY3Quc2VhcmNoKVxcXCJcXHJcXG5cXHRcXHRcXHRcXHRcXHRcXHRcXHRcXHRyZWZyZXNoLWRlbGF5PVxcXCJ0eXBlYWhlYWQubG9hZERlbGF5XFxcIj5cXHJcXG5cXHRcXHRcXHRcXHR7e3R5cGVhaGVhZC5nZXREaXNwbGF5TmFtZShpdGVtKX19XFxyXFxuXFx0XFx0XFx0PC91aS1zZWxlY3QtY2hvaWNlcz5cXHJcXG5cXHRcXHQ8L3VpLXNlbGVjdD5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG5cXHQ8ZGl2IG5nLWlmPVxcXCJ0eXBlYWhlYWQuY29sbGFwc2VkXFxcIj5cXHJcXG5cXHRcXHQ8c3Bhbj57e3R5cGVhaGVhZC5nZXREaXNwbGF5TmFtZSh0eXBlYWhlYWQuc2VsZWN0aW9uKX19PC9zcGFuPlxcclxcblxcdFxcdDxybC1idXR0b24gdHlwZT1cXFwiZGVmYXVsdCBmbGF0XFxcIiBhY3Rpb249XFxcInR5cGVhaGVhZC5jbGVhcigpXFxcIj48aSBjbGFzcz1cXFwiZmEgZmEtcmVtb3ZlXFxcIj48L2k+PC9ybC1idXR0b24+XFxyXFxuXFx0PC9kaXY+XFxyXFxuXFx0PHNwYW4gY2xhc3M9XFxcImVycm9yLXN0cmluZ1xcXCIgbmctaWY9XFxcInR5cGVhaGVhZC5pbnB1dFZhbGlkYXRvci5lcnJvciB8IGlzRW1wdHk6ZmFsc2VcXFwiPnt7dHlwZWFoZWFkLmlucHV0VmFsaWRhdG9yLmVycm9yfX08L3NwYW4+XFxyXFxuXFx0PHJsLWJ1c3kgbG9hZGluZz1cXFwidHlwZWFoZWFkLmxvYWRpbmdcXFwiPjwvcmwtYnVzeT5cXHJcXG48L2Rpdj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy90eXBlYWhlYWQvdHlwZWFoZWFkLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAyMDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3Mvbm9kZS9ub2RlLmQudHMnIC8+XHJcbid1c2Ugc3RyaWN0JztcclxudmFyIGFuZ3VsYXIgPSByZXF1aXJlKCdhbmd1bGFyJyk7XHJcbnZhciBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX3BhcmVudENoaWxkID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLnBhcmVudENoaWxkQmVoYXZpb3I7XHJcbnZhciBfX2FycmF5ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLmFycmF5O1xyXG52YXIgX190cmFuc2Zvcm0gPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMudHJhbnNmb3JtLnRyYW5zZm9ybTtcclxudmFyIHR5cGVhaGVhZEl0ZW1fMSA9IHJlcXVpcmUoJy4vdHlwZWFoZWFkSXRlbScpO1xyXG5leHBvcnRzLm1vZHVsZU5hbWUgPSAncmwudWkuY29tcG9uZW50cy50eXBlYWhlYWRMaXN0JztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsVHlwZWFoZWFkTGlzdCc7XHJcbmV4cG9ydHMuY29udHJvbGxlck5hbWUgPSAnVHlwZWFoZWFkTGlzdENvbnRyb2xsZXInO1xyXG52YXIgVHlwZWFoZWFkTGlzdENvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVHlwZWFoZWFkTGlzdENvbnRyb2xsZXIoJHNjb3BlLCAkdHJhbnNjbHVkZSwgJHEsIHBhcmVudENoaWxkKSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy4kdHJhbnNjbHVkZSA9ICR0cmFuc2NsdWRlO1xyXG4gICAgICAgIHRoaXMuJHEgPSAkcTtcclxuICAgICAgICB0aGlzLnBhcmVudENoaWxkID0gcGFyZW50Q2hpbGQ7XHJcbiAgICAgICAgdGhpcy50eXBlYWhlYWRMaW5rID0ge307XHJcbiAgICB9XHJcbiAgICBUeXBlYWhlYWRMaXN0Q29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuJHNjb3BlLiRyZW1vdmUgPSB0aGlzLnJlbW92ZUl0ZW0uYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLiRzY29wZS4kdHJhbnNmb3JtID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9fdHJhbnNmb3JtLmdldFZhbHVlKGl0ZW0sIF90aGlzLnRyYW5zZm9ybSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLiRzY29wZS5saXN0RGF0YSA9IHRoaXMubGlzdERhdGE7XHJcbiAgICAgICAgdGhpcy5wYXJlbnRDaGlsZC5yZWdpc3RlckNoaWxkQmVoYXZpb3IodGhpcy5jaGlsZExpbmssIHtcclxuICAgICAgICAgICAgYWRkOiB0aGlzLmFkZEl0ZW0uYmluZCh0aGlzKSxcclxuICAgICAgICAgICAgcmVtb3ZlOiB0aGlzLnJlbW92ZUl0ZW0uYmluZCh0aGlzKSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBUeXBlYWhlYWRMaXN0Q29udHJvbGxlci5wcm90b3R5cGUubG9hZEl0ZW1zID0gZnVuY3Rpb24gKHNlYXJjaCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SXRlbXMoeyBzZWFyY2g6IHNlYXJjaCB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmZpbHRlcihkYXRhLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFfLmZpbmQoX3RoaXMubmdNb2RlbC4kdmlld1ZhbHVlLCBpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVHlwZWFoZWFkTGlzdENvbnRyb2xsZXIucHJvdG90eXBlLmFkZEl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJHEud2hlbih0aGlzLmFkZCh7IGl0ZW06IGl0ZW0gfSkpLnRoZW4oZnVuY3Rpb24gKG5ld0l0ZW0pIHtcclxuICAgICAgICAgICAgbmV3SXRlbSA9IG5ld0l0ZW0gfHwgaXRlbTtcclxuICAgICAgICAgICAgX3RoaXMubmdNb2RlbC4kdmlld1ZhbHVlLnB1c2gobmV3SXRlbSk7XHJcbiAgICAgICAgICAgIF90aGlzLnBhcmVudENoaWxkLnRyaWdnZXJDaGlsZEJlaGF2aW9yKF90aGlzLnR5cGVhaGVhZExpbmssIGZ1bmN0aW9uIChiZWhhdmlvcikge1xyXG4gICAgICAgICAgICAgICAgYmVoYXZpb3IucmVtb3ZlKG5ld0l0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ld0l0ZW07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVHlwZWFoZWFkTGlzdENvbnRyb2xsZXIucHJvdG90eXBlLnJlbW92ZUl0ZW0gPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuJHEud2hlbih0aGlzLnJlbW92ZSh7IGl0ZW06IGl0ZW0gfSkpLnRoZW4oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfX2FycmF5LmFycmF5VXRpbGl0eS5yZW1vdmUoX3RoaXMubmdNb2RlbC4kdmlld1ZhbHVlLCBpdGVtKTtcclxuICAgICAgICAgICAgX3RoaXMucGFyZW50Q2hpbGQudHJpZ2dlckNoaWxkQmVoYXZpb3IoX3RoaXMudHlwZWFoZWFkTGluaywgZnVuY3Rpb24gKGJlaGF2aW9yKSB7XHJcbiAgICAgICAgICAgICAgICBiZWhhdmlvci5hZGQoaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFR5cGVhaGVhZExpc3RDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckdHJhbnNjbHVkZScsICckcScsIF9fcGFyZW50Q2hpbGQuc2VydmljZU5hbWVdO1xyXG4gICAgcmV0dXJuIFR5cGVhaGVhZExpc3RDb250cm9sbGVyO1xyXG59KCkpO1xyXG5leHBvcnRzLlR5cGVhaGVhZExpc3RDb250cm9sbGVyID0gVHlwZWFoZWFkTGlzdENvbnRyb2xsZXI7XHJcbnZhciB0eXBlYWhlYWRMaXN0ID0ge1xyXG4gICAgcmVxdWlyZTogeyBuZ01vZGVsOiAnbmdNb2RlbCcgfSxcclxuICAgIHRyYW5zY2x1ZGU6IHtcclxuICAgICAgICBoZWFkZXJTbG90OiAnP3JsTGlzdEhlYWRlcicsXHJcbiAgICAgICAgbGlzdEl0ZW1TbG90OiAnP3JsTGlzdEl0ZW0nLFxyXG4gICAgfSxcclxuICAgIHRlbXBsYXRlOiByZXF1aXJlKCcuL3R5cGVhaGVhZExpc3QuaHRtbCcpLFxyXG4gICAgY29udHJvbGxlcjogZXhwb3J0cy5jb250cm9sbGVyTmFtZSxcclxuICAgIGNvbnRyb2xsZXJBczogJ2xpc3QnLFxyXG4gICAgYmluZGluZ3M6IHtcclxuICAgICAgICBnZXRJdGVtczogJyYnLFxyXG4gICAgICAgIGFkZDogJyYnLFxyXG4gICAgICAgIHJlbW92ZTogJyYnLFxyXG4gICAgICAgIHRyYW5zZm9ybTogJzw/JyxcclxuICAgICAgICBsYWJlbDogJ0AnLFxyXG4gICAgICAgIHByZWZpeDogJ0AnLFxyXG4gICAgICAgIHVzZUNsaWVudFNlYXJjaGluZzogJzw/JyxcclxuICAgICAgICBuZ0Rpc2FibGVkOiAnPD8nLFxyXG4gICAgICAgIGl0ZW1BczogJ0AnLFxyXG4gICAgICAgIGNoaWxkTGluazogJz0/JyxcclxuICAgICAgICBsaXN0RGF0YTogJzw/JyxcclxuICAgIH0sXHJcbn07XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW19fcGFyZW50Q2hpbGQubW9kdWxlTmFtZV0pXHJcbiAgICAuY29tcG9uZW50KGV4cG9ydHMuY29tcG9uZW50TmFtZSwgdHlwZWFoZWFkTGlzdClcclxuICAgIC5jb250cm9sbGVyKGV4cG9ydHMuY29udHJvbGxlck5hbWUsIFR5cGVhaGVhZExpc3RDb250cm9sbGVyKVxyXG4gICAgLmNvbXBvbmVudCh0eXBlYWhlYWRJdGVtXzEuY29tcG9uZW50TmFtZSwgdHlwZWFoZWFkSXRlbV8xLnR5cGVhaGVhZEl0ZW0pO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lkSGx3WldGb1pXRmtUR2x6ZEM1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJblI1Y0dWaGFHVmhaRXhwYzNRdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzTWtSQlFUSkVPMEZCUlRORUxGbEJRVmtzUTBGQlF6dEJRVVZpTEVsQlFWa3NUMEZCVHl4WFFVRk5MRk5CUVZNc1EwRkJReXhEUVVGQk8wRkJRMjVETEVsQlFWa3NRMEZCUXl4WFFVRk5MRkZCUVZFc1EwRkJReXhEUVVGQk8wRkJSVFZDTERaRFFVRjVRaXc0UWtGQk9FSXNRMEZCUXl4RFFVRkJPMEZCUTNoRUxFbEJRVThzWVVGQllTeEhRVUZITEhWRFFVRlJMRU5CUVVNc2JVSkJRVzFDTEVOQlFVTTdRVUZEY0VRc1NVRkJUeXhQUVVGUExFZEJRVWNzZFVOQlFWRXNRMEZCUXl4TFFVRkxMRU5CUVVNN1FVRkRhRU1zU1VGQlR5eFhRVUZYTEVkQlFVY3NkVU5CUVZFc1EwRkJReXhUUVVGVExFTkJRVU1zVTBGQlV5eERRVUZETzBGQlIyeEVMRGhDUVVGclJTeHBRa0ZCYVVJc1EwRkJReXhEUVVGQk8wRkJSWHBGTEd0Q1FVRlZMRWRCUVZjc1owTkJRV2RETEVOQlFVTTdRVUZEZEVRc2NVSkJRV0VzUjBGQlZ5eHBRa0ZCYVVJc1EwRkJRenRCUVVNeFF5eHpRa0ZCWXl4SFFVRlhMSGxDUVVGNVFpeERRVUZETzBGQmFVWTVSRHRKUVd0Q1F5eHBRMEZCYjBJc1RVRkJNa0lzUlVGRGNFTXNWMEZCZDBNc1JVRkRka01zUlVGQmNVSXNSVUZEY2tJc1YwRkJjMFE3VVVGSU9VTXNWMEZCVFN4SFFVRk9MRTFCUVUwc1EwRkJjVUk3VVVGRGNFTXNaMEpCUVZjc1IwRkJXQ3hYUVVGWExFTkJRVFpDTzFGQlEzWkRMRTlCUVVVc1IwRkJSaXhGUVVGRkxFTkJRVzFDTzFGQlEzSkNMR2RDUVVGWExFZEJRVmdzVjBGQlZ5eERRVUV5UXp0UlFWQnNSU3hyUWtGQllTeEhRVUZyUkN4RlFVRkZMRU5CUVVNN1NVRlBTU3hEUVVGRE8wbEJSWFpGTEhsRFFVRlBMRWRCUVZBN1VVRkJRU3hwUWtGVlF6dFJRVlJCTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1QwRkJUeXhIUVVGSExFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhEUVVGRE8xRkJRMnBFTEVsQlFVa3NRMEZCUXl4TlFVRk5MRU5CUVVNc1ZVRkJWU3hIUVVGSExGVkJRVU1zU1VGQlV6dFpRVU5zUXl4TlFVRk5MRU5CUVVNc1YwRkJWeXhEUVVGRExGRkJRVkVzUTBGQlF5eEpRVUZKTEVWQlFVVXNTMEZCU1N4RFFVRkRMRk5CUVZNc1EwRkJReXhEUVVGRE8xRkJRMjVFTEVOQlFVTXNRMEZCUXp0UlFVTkdMRWxCUVVrc1EwRkJReXhOUVVGTkxFTkJRVU1zVVVGQlVTeEhRVUZITEVsQlFVa3NRMEZCUXl4UlFVRlJMRU5CUVVNN1VVRkRja01zU1VGQlNTeERRVUZETEZkQlFWY3NRMEZCUXl4eFFrRkJjVUlzUTBGQlF5eEpRVUZKTEVOQlFVTXNVMEZCVXl4RlFVRkZPMWxCUTNSRUxFZEJRVWNzUlVGQlJTeEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU03V1VGRE5VSXNUVUZCVFN4RlFVRkZMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXp0VFFVTnNReXhEUVVGRExFTkJRVU03U1VGRFNpeERRVUZETzBsQlJVUXNNa05CUVZNc1IwRkJWQ3hWUVVGVkxFMUJRV1U3VVVGQmVrSXNhVUpCVFVNN1VVRk1RU3hOUVVGTkxFTkJRVU1zU1VGQlNTeERRVUZETEZGQlFWRXNRMEZCUXl4RlFVRkZMRTFCUVUwc1JVRkJSU3hOUVVGTkxFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VlFVRkRMRWxCUVZjN1dVRkRla1FzVFVGQlRTeERRVUZETEVOQlFVTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1NVRkJTU3hGUVVGRkxGVkJRVU1zU1VGQlV6dG5Ra0ZETDBJc1RVRkJUU3hEUVVGRExFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkpMRU5CUVVNc1QwRkJUeXhEUVVGRExGVkJRVlVzUlVGQlJTeEpRVUZKTEVOQlFVTXNRMEZCUXp0WlFVTXZReXhEUVVGRExFTkJRVU1zUTBGQlF6dFJRVU5LTEVOQlFVTXNRMEZCUXl4RFFVRkRPMGxCUTBvc1EwRkJRenRKUVVWRUxIbERRVUZQTEVkQlFWQXNWVUZCVVN4SlFVRlRPMUZCUVdwQ0xHbENRVk5ETzFGQlVrRXNUVUZCVFN4RFFVRkRMRWxCUVVrc1EwRkJReXhGUVVGRkxFTkJRVU1zU1VGQlNTeERRVUZETEVsQlFVa3NRMEZCUXl4SFFVRkhMRU5CUVVNc1JVRkJSU3hKUVVGSkxFVkJRVVVzU1VGQlNTeEZRVUZGTEVOQlFVTXNRMEZCUXl4RFFVRkRMRWxCUVVrc1EwRkJReXhWUVVGRExFOUJRVms3V1VGREwwUXNUMEZCVHl4SFFVRkhMRTlCUVU4c1NVRkJTU3hKUVVGSkxFTkJRVU03V1VGRE1VSXNTMEZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhWUVVGVkxFTkJRVU1zU1VGQlNTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRPMWxCUTNSRExFdEJRVWtzUTBGQlF5eFhRVUZYTEVOQlFVTXNiMEpCUVc5Q0xFTkJRVU1zUzBGQlNTeERRVUZETEdGQlFXRXNSVUZCUlN4VlFVRkRMRkZCUVRSQ08yZENRVU4wUml4UlFVRlJMRU5CUVVNc1RVRkJUU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETzFsQlF6RkNMRU5CUVVNc1EwRkJReXhEUVVGRE8xbEJRMGdzVFVGQlRTeERRVUZETEU5QlFVOHNRMEZCUXp0UlFVTm9RaXhEUVVGRExFTkJRVU1zUTBGQlF6dEpRVU5LTEVOQlFVTTdTVUZGUkN3MFEwRkJWU3hIUVVGV0xGVkJRVmNzU1VGQlV6dFJRVUZ3UWl4cFFrRlBRenRSUVU1QkxFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTXNSVUZCUlN4RFFVRkRMRWxCUVVrc1EwRkJReXhKUVVGSkxFTkJRVU1zVFVGQlRTeERRVUZETEVWQlFVVXNTVUZCU1N4RlFVRkZMRWxCUVVrc1JVRkJSU3hEUVVGRExFTkJRVU1zUTBGQlF5eEpRVUZKTEVOQlFVTTdXVUZEY2tRc1QwRkJUeXhEUVVGRExGbEJRVmtzUTBGQlF5eE5RVUZOTEVOQlFVTXNTMEZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhWUVVGVkxFVkJRVVVzU1VGQlNTeERRVUZETEVOQlFVTTdXVUZETTBRc1MwRkJTU3hEUVVGRExGZEJRVmNzUTBGQlF5eHZRa0ZCYjBJc1EwRkJReXhMUVVGSkxFTkJRVU1zWVVGQllTeEZRVUZGTEZWQlFVTXNVVUZCTkVJN1owSkJRM1JHTEZGQlFWRXNRMEZCUXl4SFFVRkhMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03V1VGRGNFSXNRMEZCUXl4RFFVRkRMRU5CUVVNN1VVRkRTaXhEUVVGRExFTkJRVU1zUTBGQlF6dEpRVU5LTEVOQlFVTTdTVUUxUTAwc0swSkJRVThzUjBGQllTeERRVUZETEZGQlFWRXNSVUZCUlN4aFFVRmhMRVZCUVVVc1NVRkJTU3hGUVVGRkxHRkJRV0VzUTBGQlF5eFhRVUZYTEVOQlFVTXNRMEZCUXp0SlFUWkRka1lzT0VKQlFVTTdRVUZCUkN4RFFVRkRMRUZCT1VSRUxFbEJPRVJETzBGQk9VUlpMQ3RDUVVGMVFpd3dRa0U0Ukc1RExFTkJRVUU3UVVGRlJDeEpRVUZKTEdGQlFXRXNSMEZCT0VJN1NVRkRPVU1zVDBGQlR5eEZRVUZGTEVWQlFVVXNUMEZCVHl4RlFVRkZMRk5CUVZNc1JVRkJSVHRKUVVNdlFpeFZRVUZWTEVWQlFVODdVVUZEYUVJc1ZVRkJWU3hGUVVGRkxHVkJRV1U3VVVGRE0wSXNXVUZCV1N4RlFVRkZMR0ZCUVdFN1MwRkRNMEk3U1VGRFJDeFJRVUZSTEVWQlFVVXNUMEZCVHl4RFFVRkRMSE5DUVVGelFpeERRVUZETzBsQlEzcERMRlZCUVZVc1JVRkJSU3h6UWtGQll6dEpRVU14UWl4WlFVRlpMRVZCUVVVc1RVRkJUVHRKUVVOd1FpeFJRVUZSTEVWQlFVVTdVVUZEVkN4UlFVRlJMRVZCUVVVc1IwRkJSenRSUVVOaUxFZEJRVWNzUlVGQlJTeEhRVUZITzFGQlExSXNUVUZCVFN4RlFVRkZMRWRCUVVjN1VVRkRXQ3hUUVVGVExFVkJRVVVzU1VGQlNUdFJRVU5tTEV0QlFVc3NSVUZCUlN4SFFVRkhPMUZCUTFZc1RVRkJUU3hGUVVGRkxFZEJRVWM3VVVGRFdDeHJRa0ZCYTBJc1JVRkJSU3hKUVVGSk8xRkJRM2hDTEZWQlFWVXNSVUZCUlN4SlFVRkpPMUZCUTFZc1RVRkJUU3hGUVVGRkxFZEJRVWM3VVVGRGFrSXNVMEZCVXl4RlFVRkZMRWxCUVVrN1VVRkRaaXhSUVVGUkxFVkJRVVVzU1VGQlNUdExRVU5rTzBOQlEwUXNRMEZCUXp0QlFVVkdMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zYTBKQlFWVXNSVUZCUlN4RFFVRkRMR0ZCUVdFc1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dExRVU53UkN4VFFVRlRMRU5CUVVNc2NVSkJRV0VzUlVGQlJTeGhRVUZoTEVOQlFVTTdTMEZEZGtNc1ZVRkJWU3hEUVVGRExITkNRVUZqTEVWQlFVVXNkVUpCUVhWQ0xFTkJRVU03UzBGRGJrUXNVMEZCVXl4RFFVRkRMRFpDUVVGcFFpeEZRVUZGTERaQ1FVRmhMRU5CUVVNc1EwRkJReUo5XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9jb21wb25lbnRzL3R5cGVhaGVhZExpc3QvdHlwZWFoZWFkTGlzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDIwMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vdHlwaW5ncy9ub2RlL25vZGUuZC50cycgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG5leHBvcnRzLmNvbXBvbmVudE5hbWUgPSAncmxUeXBlYWhlYWRMaXN0SXRlbSc7XHJcbnZhciBUeXBlYWhlYWRJdGVtQ29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBUeXBlYWhlYWRJdGVtQ29udHJvbGxlcigkc2NvcGUsICRlbGVtZW50LCAkY29tcGlsZSkge1xyXG4gICAgICAgIHRoaXMuJHNjb3BlID0gJHNjb3BlO1xyXG4gICAgICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcclxuICAgICAgICB0aGlzLiRjb21waWxlID0gJGNvbXBpbGU7XHJcbiAgICB9XHJcbiAgICBUeXBlYWhlYWRJdGVtQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaXRlbVNjb3BlID0gdGhpcy4kc2NvcGUuJHBhcmVudC4kbmV3KCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnRBcmVhID0gdGhpcy4kZWxlbWVudC5maW5kKCcuY29udGVudC10YXJnZXQnKTtcclxuICAgICAgICBpZiAodGhpcy50cmFuc2NsdWRlLmlzU2xvdEZpbGxlZCgnbGlzdEl0ZW1TbG90JykpIHtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2NsdWRlKGl0ZW1TY29wZSwgZnVuY3Rpb24gKHRlbXBsYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50QXJlYS5hcHBlbmQodGVtcGxhdGUpO1xyXG4gICAgICAgICAgICB9LCBudWxsLCAnbGlzdEl0ZW1TbG90Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBjb250ZW50QXJlYS5hcHBlbmQocmVxdWlyZSgnLi9kZWZhdWx0TGlzdEl0ZW0uaHRtbCcpKTtcclxuICAgICAgICAgICAgdGhpcy4kY29tcGlsZSh0ZW1wbGF0ZSkoaXRlbVNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVHlwZWFoZWFkSXRlbUNvbnRyb2xsZXIuJGluamVjdCA9IFsnJHNjb3BlJywgJyRlbGVtZW50JywgJyRjb21waWxlJ107XHJcbiAgICByZXR1cm4gVHlwZWFoZWFkSXRlbUNvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMudHlwZWFoZWFkSXRlbSA9IHtcclxuICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgdHJhbnNjbHVkZTogJzwnLFxyXG4gICAgfSxcclxuICAgIGNvbnRyb2xsZXI6IFR5cGVhaGVhZEl0ZW1Db250cm9sbGVyLFxyXG4gICAgdGVtcGxhdGU6IFwiPGRpdiBjbGFzcz1cXFwiY29udGVudC10YXJnZXRcXFwiPjwvZGl2PlwiLFxyXG59O1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lkSGx3WldGb1pXRmtTWFJsYlM1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJblI1Y0dWaGFHVmhaRWwwWlcwdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzTWtSQlFUSkVPMEZCUlRORUxGbEJRVmtzUTBGQlF6dEJRVWxHTEhGQ1FVRmhMRWRCUVZjc2NVSkJRWEZDTEVOQlFVTTdRVUZGZWtRN1NVRkpReXhwUTBGQmIwSXNUVUZCYzBJc1JVRkRMMElzVVVGQmEwTXNSVUZEYkVNc1VVRkJhVU03VVVGR2VFSXNWMEZCVFN4SFFVRk9MRTFCUVUwc1EwRkJaMEk3VVVGREwwSXNZVUZCVVN4SFFVRlNMRkZCUVZFc1EwRkJNRUk3VVVGRGJFTXNZVUZCVVN4SFFVRlNMRkZCUVZFc1EwRkJlVUk3U1VGQlNTeERRVUZETzBsQlJXcEVMSGxEUVVGUExFZEJRVkE3VVVGRFF5eEpRVUZKTEZOQlFWTXNSMEZCUnl4SlFVRkpMRU5CUVVNc1RVRkJUU3hEUVVGRExFOUJRVThzUTBGQlF5eEpRVUZKTEVWQlFVVXNRMEZCUXp0UlFVTXpReXhKUVVGSkxGZEJRVmNzUjBGQlZ5eEpRVUZKTEVOQlFVTXNVVUZCVVN4RFFVRkRMRWxCUVVrc1EwRkJReXhwUWtGQmFVSXNRMEZCUXl4RFFVRkRPMUZCUTJoRkxFVkJRVVVzUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1dVRkJXU3hEUVVGRExHTkJRV01zUTBGQlF5eERRVUZETEVOQlFVTXNRMEZCUXp0WlFVTnNSQ3hKUVVGSkxFTkJRVU1zVlVGQlZTeERRVUZETEZOQlFWTXNSVUZCUlN4VlFVRkRMRkZCUVdkQ08yZENRVU16UXl4WFFVRlhMRU5CUVVNc1RVRkJUU3hEUVVGRExGRkJRVkVzUTBGQlF5eERRVUZETzFsQlF6bENMRU5CUVVNc1JVRkJSU3hKUVVGSkxFVkJRVVVzWTBGQll5eERRVUZETEVOQlFVTTdVVUZETVVJc1EwRkJRenRSUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzFsQlExQXNTVUZCU1N4UlFVRlJMRWRCUVZjc1YwRkJWeXhEUVVGRExFMUJRVTBzUTBGQlF5eFBRVUZQTEVOQlFVTXNkMEpCUVhkQ0xFTkJRVU1zUTBGQlF5eERRVUZETzFsQlF6ZEZMRWxCUVVrc1EwRkJReXhSUVVGUkxFTkJRVU1zVVVGQlVTeERRVUZETEVOQlFVTXNVMEZCVXl4RFFVRkRMRU5CUVVNN1VVRkRjRU1zUTBGQlF6dEpRVU5HTEVOQlFVTTdTVUZvUWswc0swSkJRVThzUjBGQllTeERRVUZETEZGQlFWRXNSVUZCUlN4VlFVRlZMRVZCUVVVc1ZVRkJWU3hEUVVGRExFTkJRVU03U1VGcFFpOUVMRGhDUVVGRE8wRkJRVVFzUTBGQlF5eEJRWEJDUkN4SlFXOUNRenRCUVVWVkxIRkNRVUZoTEVkQlFUaENPMGxCUTNKRUxGRkJRVkVzUlVGQlJUdFJRVU5VTEZWQlFWVXNSVUZCUlN4SFFVRkhPMHRCUTJZN1NVRkRSQ3hWUVVGVkxFVkJRVVVzZFVKQlFYVkNPMGxCUTI1RExGRkJRVkVzUlVGQlJTeHpRMEZCYjBNN1EwRkRPVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvdHlwZWFoZWFkTGlzdC90eXBlYWhlYWRJdGVtLmpzXG4gKiogbW9kdWxlIGlkID0gMjAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiY29sLXhzLTEwXFxcIj57eyR0cmFuc2Zvcm0oJGl0ZW0pfX08L2Rpdj5cXHJcXG48ZGl2IGNsYXNzPVxcXCJjb2wteHMtMlxcXCI+XFxyXFxuXFx0PHJsLWJ1dHRvbi1hc3luYyB0eXBlPVxcXCJkYW5nZXJcXFwiIGFjdGlvbj1cXFwiJHJlbW92ZSgkaXRlbSlcXFwiPjxpIGNsYXNzPVxcXCJmYSBmYS1yZW1vdmVcXFwiPjwvaT48L3JsLWJ1dHRvbi1hc3luYz5cXHJcXG48L2Rpdj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy90eXBlYWhlYWRMaXN0L2RlZmF1bHRMaXN0SXRlbS5odG1sXG4gKiogbW9kdWxlIGlkID0gMjAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHJsLXR5cGVhaGVhZCBuZy1tb2RlbD1cXFwibGlzdC5tb2RlbFxcXCIgc2VsZWN0PVxcXCJsaXN0LmFkZEl0ZW0odmFsdWUpXFxcIiBhbGxvdy1jb2xsYXBzZT1cXFwiZmFsc2VcXFwiIGNoaWxkLWxpbms9XFxcImxpc3QudHlwZWFoZWFkTGlua1xcXCJcXHJcXG5cXHRcXHRcXHQgIHRyYW5zZm9ybT1cXFwibGlzdC50cmFuc2Zvcm1cXFwiIGdldC1pdGVtcz1cXFwibGlzdC5sb2FkSXRlbXMoc2VhcmNoKVxcXCIgbGFiZWw9XFxcInt7bGlzdC5sYWJlbH19XFxcIlxcclxcblxcdFxcdFxcdCAgcHJlZml4PVxcXCJ7e2xpc3QucHJlZml4fX1cXFwiIHVzZS1jbGllbnQtc2VhcmNoaW5nPVxcXCJsaXN0LnVzZUNsaWVudFNlYXJjaGluZ1xcXCIgbmctZGlzYWJsZWQ9XFxcImxpc3QubmdEaXNhYmxlZFxcXCI+PC9ybC10eXBlYWhlYWQ+XFxyXFxuPGRpdiBjbGFzcz1cXFwidGFibGUtY29udGFpbmVyIGNvbC14cy0xMlxcXCI+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwicm93IHRhYmxlLWhlYWRlclxcXCI+XFxyXFxuXFx0XFx0PGRpdiBuZy10cmFuc2NsdWRlPVxcXCJoZWFkZXJTbG90XFxcIj5cXHJcXG5cXHRcXHRcXHQ8ZGl2IGNsYXNzPVxcXCJjb2wteHMtMTJcXFwiPk5hbWU8L2Rpdj5cXHJcXG5cXHRcXHQ8L2Rpdj5cXHJcXG5cXHQ8L2Rpdj5cXHJcXG5cXHQ8ZGl2IGNsYXNzPVxcXCJyb3cgdGFibGUtcm93XFxcIiBuZy1yZXBlYXQ9XFxcIiRpdGVtIGluIGxpc3QubmdNb2RlbC4kdmlld1ZhbHVlXFxcIiBybC1hbGlhcz1cXFwiJGl0ZW0gYXMge3tsaXN0Lml0ZW1Bc319XFxcIj5cXHJcXG5cXHRcXHQ8cmwtdHlwZWFoZWFkLWxpc3QtaXRlbSB0cmFuc2NsdWRlPVxcXCJsaXN0LiR0cmFuc2NsdWRlXFxcIj48L3JsLXR5cGVhaGVhZC1saXN0LWl0ZW0+XFxyXFxuXFx0PC9kaXY+XFxyXFxuPC9kaXY+XCJcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvdHlwZWFoZWFkTGlzdC90eXBlYWhlYWRMaXN0Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAyMDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxucmVxdWlyZSgnLi91c2VyUmF0aW5nLmNzcycpO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIGNvbXBvbmVudHNEZWZhdWx0VGhlbWVfMSA9IHJlcXVpcmUoJy4uL2NvbXBvbmVudHNEZWZhdWx0VGhlbWUnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLmNvbXBvbmVudHMudXNlclJhdGluZyc7XHJcbmV4cG9ydHMuY29tcG9uZW50TmFtZSA9ICdybFVzZXJSYXRpbmcnO1xyXG5leHBvcnRzLmNvbnRyb2xsZXJOYW1lID0gJ1VzZXJSYXRpbmdDb250cm9sbGVyJztcclxudmFyIFVzZXJSYXRpbmdDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFVzZXJSYXRpbmdDb250cm9sbGVyKCR0aW1lb3V0LCB1c2VEZWZhdWx0VGhlbWUpIHtcclxuICAgICAgICB0aGlzLiR0aW1lb3V0ID0gJHRpbWVvdXQ7XHJcbiAgICAgICAgdGhpcy51c2VEZWZhdWx0VGhlbWUgPSB1c2VEZWZhdWx0VGhlbWU7XHJcbiAgICB9XHJcbiAgICBVc2VyUmF0aW5nQ29udHJvbGxlci5wcm90b3R5cGUuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuc3RhcnMgPSBbXTtcclxuICAgICAgICB2YXIgcmFuZ2VTaXplID0gdGhpcy5yYW5nZSAhPSBudWxsID8gdGhpcy5yYW5nZSA6IDU7XHJcbiAgICAgICAgLy8gY3NzIHN0eWxlIHJlcXVpcmVzIHRoZSBzdGFycyB0byBzaG93IHJpZ2h0IHRvIGxlZnQuIFJldmVyc2UgdGhlIGxpc3Qgc28gdGhlIGhpZ2hlc3QgdmFsdWUgaXMgZmlyc3RcclxuICAgICAgICB2YXIgcmFuZ2UgPSBfLnJhbmdlKDEsIHJhbmdlU2l6ZSArIDEpLnJldmVyc2UoKTtcclxuICAgICAgICBfLmVhY2gocmFuZ2UsIGZ1bmN0aW9uIChyYXRpbmcpIHtcclxuICAgICAgICAgICAgX3RoaXMuc3RhcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogcmF0aW5nLFxyXG4gICAgICAgICAgICAgICAgZmlsbGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy4kdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLnVwZGF0ZVN0YXJWaWV3KF90aGlzLm5nTW9kZWwuJHZpZXdWYWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgVXNlclJhdGluZ0NvbnRyb2xsZXIucHJvdG90eXBlLnNldFJhdGluZyA9IGZ1bmN0aW9uIChyYXRpbmcpIHtcclxuICAgICAgICB0aGlzLm5nTW9kZWwuJHNldFZpZXdWYWx1ZShyYXRpbmcpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RhclZpZXcocmF0aW5nKTtcclxuICAgIH07XHJcbiAgICBVc2VyUmF0aW5nQ29udHJvbGxlci5wcm90b3R5cGUudXBkYXRlU3RhclZpZXcgPSBmdW5jdGlvbiAocmF0aW5nKSB7XHJcbiAgICAgICAgXy5lYWNoKHRoaXMuc3RhcnMsIGZ1bmN0aW9uIChzdGFyKSB7XHJcbiAgICAgICAgICAgIGlmIChzdGFyLnZhbHVlIDw9IHJhdGluZykge1xyXG4gICAgICAgICAgICAgICAgc3Rhci5maWxsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc3Rhci5maWxsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFVzZXJSYXRpbmdDb250cm9sbGVyLiRpbmplY3QgPSBbJyR0aW1lb3V0JywgY29tcG9uZW50c0RlZmF1bHRUaGVtZV8xLmRlZmF1bHRUaGVtZVZhbHVlTmFtZV07XHJcbiAgICByZXR1cm4gVXNlclJhdGluZ0NvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVXNlclJhdGluZ0NvbnRyb2xsZXIgPSBVc2VyUmF0aW5nQ29udHJvbGxlcjtcclxudmFyIHVzZXJSYXRpbmcgPSB7XHJcbiAgICByZXF1aXJlOiB7IG5nTW9kZWw6ICduZ01vZGVsJyB9LFxyXG4gICAgdGVtcGxhdGU6IFwiXFxuXFx0XFx0PHNwYW4gY2xhc3M9XFxcInJhdGluZ1xcXCIgbmctY2xhc3M9XFxcInsgJ2RlZmF1bHQtdGhlbWUnOiB1c2VyUmF0aW5nLnVzZURlZmF1bHRUaGVtZSB9XFxcIj5cXG5cXHRcXHRcXHQ8c3BhbiBjbGFzcz1cXFwic3RhclxcXCIgbmctcmVwZWF0PVxcXCJzdGFyIGluIHVzZXJSYXRpbmcuc3RhcnNcXFwiIG5nLWNsYXNzPVxcXCJ7ICdmaWxsZWQnOiBzdGFyLmZpbGxlZCB9XFxcIiBuZy1jbGljaz1cXFwidXNlclJhdGluZy5zZXRSYXRpbmcoc3Rhci52YWx1ZSlcXFwiPjwvc3Bhbj5cXG5cXHRcXHQ8L3NwYW4+XFxuXFx0XCIsXHJcbiAgICBjb250cm9sbGVyOiBleHBvcnRzLmNvbnRyb2xsZXJOYW1lLFxyXG4gICAgY29udHJvbGxlckFzOiAndXNlclJhdGluZycsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIHJhbmdlOiAnPScsXHJcbiAgICB9LFxyXG59O1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtdKVxyXG4gICAgLmNvbXBvbmVudChleHBvcnRzLmNvbXBvbmVudE5hbWUsIHVzZXJSYXRpbmcpXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBVc2VyUmF0aW5nQ29udHJvbGxlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWRYTmxjbEpoZEdsdVp5NXFjeUlzSW5OdmRYSmpaVkp2YjNRaU9pSWlMQ0p6YjNWeVkyVnpJanBiSW5WelpYSlNZWFJwYm1jdWRITWlYU3dpYm1GdFpYTWlPbHRkTENKdFlYQndhVzVuY3lJNklrRkJRVUVzV1VGQldTeERRVUZETzBGQlJXSXNVVUZCVHl4clFrRkJhMElzUTBGQlF5eERRVUZCTzBGQlJURkNMRWxCUVZrc1QwRkJUeXhYUVVGTkxGTkJRVk1zUTBGQlF5eERRVUZCTzBGQlEyNURMRWxCUVZrc1EwRkJReXhYUVVGTkxGRkJRVkVzUTBGQlF5eERRVUZCTzBGQlJUVkNMSFZEUVVGelF5d3lRa0ZCTWtJc1EwRkJReXhEUVVGQk8wRkJSWFpFTEd0Q1FVRlZMRWRCUVZjc01FSkJRVEJDTEVOQlFVTTdRVUZGYUVRc2NVSkJRV0VzUjBGQlZ5eGpRVUZqTEVOQlFVTTdRVUZEZGtNc2MwSkJRV01zUjBGQlZ5eHpRa0ZCYzBJc1EwRkJRenRCUVdkQ00wUTdTVUZQUXl3NFFrRkJiMElzVVVGQmFVTXNSVUZCVXl4bFFVRjNRanRSUVVGc1JTeGhRVUZSTEVkQlFWSXNVVUZCVVN4RFFVRjVRanRSUVVGVExHOUNRVUZsTEVkQlFXWXNaVUZCWlN4RFFVRlRPMGxCUVVrc1EwRkJRenRKUVVVelJpeHpRMEZCVHl4SFFVRlFPMUZCUVVFc2FVSkJaVU03VVVGa1FTeEpRVUZKTEVOQlFVTXNTMEZCU3l4SFFVRkhMRVZCUVVVc1EwRkJRenRSUVVOb1FpeEpRVUZKTEZOQlFWTXNSMEZCVnl4SlFVRkpMRU5CUVVNc1MwRkJTeXhKUVVGSkxFbEJRVWtzUjBGQlJ5eEpRVUZKTEVOQlFVTXNTMEZCU3l4SFFVRkhMRU5CUVVNc1EwRkJRenRSUVVNMVJDeHhSMEZCY1VjN1VVRkRja2NzU1VGQlNTeExRVUZMTEVkQlFXRXNRMEZCUXl4RFFVRkRMRXRCUVVzc1EwRkJReXhEUVVGRExFVkJRVVVzVTBGQlV5eEhRVUZITEVOQlFVTXNRMEZCUXl4RFFVRkRMRTlCUVU4c1JVRkJSU3hEUVVGRE8xRkJRekZFTEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1MwRkJTeXhGUVVGRkxGVkJRVU1zVFVGQll6dFpRVU0xUWl4TFFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFbEJRVWtzUTBGQlF6dG5Ra0ZEWml4TFFVRkxMRVZCUVVVc1RVRkJUVHRuUWtGRFlpeE5RVUZOTEVWQlFVVXNTMEZCU3p0aFFVTmlMRU5CUVVNc1EwRkJRenRSUVVOS0xFTkJRVU1zUTBGQlF5eERRVUZETzFGQlJVZ3NTVUZCU1N4RFFVRkRMRkZCUVZFc1EwRkJRenRaUVVOaUxFdEJRVWtzUTBGQlF5eGpRVUZqTEVOQlFVTXNTMEZCU1N4RFFVRkRMRTlCUVU4c1EwRkJReXhWUVVGVkxFTkJRVU1zUTBGQlF6dFJRVU01UXl4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGRlJDeDNRMEZCVXl4SFFVRlVMRlZCUVZVc1RVRkJZenRSUVVOMlFpeEpRVUZKTEVOQlFVTXNUMEZCVHl4RFFVRkRMR0ZCUVdFc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF6dFJRVU51UXl4SlFVRkpMRU5CUVVNc1kwRkJZeXhEUVVGRExFMUJRVTBzUTBGQlF5eERRVUZETzBsQlF6ZENMRU5CUVVNN1NVRkZUeXcyUTBGQll5eEhRVUYwUWl4VlFVRjFRaXhOUVVGak8xRkJRM0JETEVOQlFVTXNRMEZCUXl4SlFVRkpMRU5CUVVNc1NVRkJTU3hEUVVGRExFdEJRVXNzUlVGQlJTeFZRVUZETEVsQlFWYzdXVUZET1VJc1JVRkJSU3hEUVVGRExFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NTVUZCU1N4TlFVRk5MRU5CUVVNc1EwRkJReXhEUVVGRE8yZENRVU14UWl4SlFVRkpMRU5CUVVNc1RVRkJUU3hIUVVGSExFbEJRVWtzUTBGQlF6dFpRVU53UWl4RFFVRkRPMWxCUVVNc1NVRkJTU3hEUVVGRExFTkJRVU03WjBKQlExQXNTVUZCU1N4RFFVRkRMRTFCUVUwc1IwRkJSeXhMUVVGTExFTkJRVU03V1VGRGNrSXNRMEZCUXp0UlFVTkdMRU5CUVVNc1EwRkJReXhEUVVGRE8wbEJRMG9zUTBGQlF6dEpRV3BEVFN3MFFrRkJUeXhIUVVGaExFTkJRVU1zVlVGQlZTeEZRVUZGTERoRFFVRnhRaXhEUVVGRExFTkJRVU03U1VGclEyaEZMREpDUVVGRE8wRkJRVVFzUTBGQlF5eEJRWGhEUkN4SlFYZERRenRCUVhoRFdTdzBRa0ZCYjBJc2RVSkJkME5vUXl4RFFVRkJPMEZCUlVRc1NVRkJTU3hWUVVGVkxFZEJRVGhDTzBsQlF6TkRMRTlCUVU4c1JVRkJSU3hGUVVGRkxFOUJRVThzUlVGQlJTeFRRVUZUTEVWQlFVVTdTVUZETDBJc1VVRkJVU3hGUVVGRkxEWlJRVWxVTzBsQlEwUXNWVUZCVlN4RlFVRkZMSE5DUVVGak8wbEJRekZDTEZsQlFWa3NSVUZCUlN4WlFVRlpPMGxCUXpGQ0xGRkJRVkVzUlVGQlJUdFJRVU5VTEV0QlFVc3NSVUZCUlN4SFFVRkhPMHRCUTFZN1EwRkRSQ3hEUVVGRE8wRkJSVVlzVDBGQlR5eERRVUZETEUxQlFVMHNRMEZCUXl4clFrRkJWU3hGUVVGRkxFVkJRVVVzUTBGQlF6dExRVU0xUWl4VFFVRlRMRU5CUVVNc2NVSkJRV0VzUlVGQlJTeFZRVUZWTEVOQlFVTTdTMEZEY0VNc1ZVRkJWU3hEUVVGRExITkNRVUZqTEVWQlFVVXNiMEpCUVc5Q0xFTkJRVU1zUTBGQlF5SjlcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2NvbXBvbmVudHMvdXNlclJhdGluZy91c2VyUmF0aW5nLmpzXG4gKiogbW9kdWxlIGlkID0gMjA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL3VzZXJSYXRpbmcuY3NzXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuL3VzZXJSYXRpbmcuY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vdXNlclJhdGluZy5jc3NcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy91c2VyUmF0aW5nL3VzZXJSYXRpbmcuY3NzXG4gKiogbW9kdWxlIGlkID0gMjA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5yYXRpbmcuZGVmYXVsdC10aGVtZSB7XFxyXFxuICAgIHVuaWNvZGUtYmlkaTpiaWRpLW92ZXJyaWRlO1xcclxcbiAgICBkaXJlY3Rpb246cnRsO1xcclxcbiAgICBmb250LXNpemU6MS41ZW07XFxyXFxufVxcclxcblxcclxcbi5yYXRpbmcuZGVmYXVsdC10aGVtZSAuc3RhciB7XFxyXFxuXFx0Zm9udC1mYW1pbHk6Rm9udEF3ZXNvbWU7XFxyXFxuXFx0Zm9udC13ZWlnaHQ6bm9ybWFsO1xcclxcblxcdGZvbnQtc3R5bGU6bm9ybWFsO1xcclxcblxcdGRpc3BsYXk6aW5saW5lLWJsb2NrO1xcclxcbn1cXHJcXG5cXHJcXG4ucmF0aW5nLmRlZmF1bHQtdGhlbWUgLnN0YXI6aG92ZXIgeyBjdXJzb3I6IHBvaW50ZXI7IH1cXHJcXG5cXHJcXG4ucmF0aW5nLmRlZmF1bHQtdGhlbWUgLnN0YXI6YmVmb3JlIHtcXHJcXG5cXHRjb250ZW50OlxcXCJcXFxcRjAwNlxcXCI7XFxyXFxuXFx0cGFkZGluZy1yaWdodDo1cHg7XFxyXFxuXFx0Y29sb3I6Izk5OTk5OTtcXHJcXG59XFxyXFxuXFxyXFxuLnJhdGluZy5kZWZhdWx0LXRoZW1lIC5zdGFyLmZpbGxlZDpiZWZvcmUge1xcclxcblxcdGNvbnRlbnQ6XFxcIlxcXFxGMDA1XFxcIjtcXHJcXG5cXHRjb2xvcjojZWVjMjc3O1xcclxcbn1cXHJcXG5cXHJcXG4ucmF0aW5nLmRlZmF1bHQtdGhlbWUgLnN0YXI6aG92ZXI6YmVmb3JlLCAucmF0aW5nLmRlZmF1bHQtdGhlbWUgLnN0YXI6aG92ZXJ+LnN0YXI6YmVmb3JlIHsgY29sb3I6I2ZmZDI4ODsgfVxcclxcblxcclxcbi5maWxsZWQgeyBjb2xvcjojZWVjMjc3OyB9XFxyXFxuXCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL3NvdXJjZS9jb21wb25lbnRzL3VzZXJSYXRpbmcvdXNlclJhdGluZy5jc3NcbiAqKiBtb2R1bGUgaWQgPSAyMDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIC8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL3R5cGluZ3MvY29tbW9uanMuZC50cycgLz5cclxuJ3VzZSBzdHJpY3QnO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcclxudmFyIGNvbXBvbmVudFZhbGlkYXRvcl9zZXJ2aWNlXzEgPSByZXF1aXJlKCcuLi8uLi9zZXJ2aWNlcy9jb21wb25lbnRWYWxpZGF0b3IvY29tcG9uZW50VmFsaWRhdG9yLnNlcnZpY2UnKTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmNvbXBvbmVudHMudmFsaWRhdGlvbkdyb3VwJztcclxuZXhwb3J0cy5jb21wb25lbnROYW1lID0gJ3JsVmFsaWRhdGlvbkdyb3VwJztcclxuZXhwb3J0cy5jb250cm9sbGVyTmFtZSA9ICdWYWxpZGF0aW9uR3JvdXBDb250cm9sbGVyJztcclxudmFyIFZhbGlkYXRpb25Hcm91cENvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVmFsaWRhdGlvbkdyb3VwQ29udHJvbGxlcigkc2NvcGUsICR0aW1lb3V0LCBjb21wb25lbnRWYWxpZGF0b3JGYWN0b3J5KSB7XHJcbiAgICAgICAgdGhpcy4kc2NvcGUgPSAkc2NvcGU7XHJcbiAgICAgICAgdGhpcy4kdGltZW91dCA9ICR0aW1lb3V0O1xyXG4gICAgICAgIHRoaXMuY29tcG9uZW50VmFsaWRhdG9yRmFjdG9yeSA9IGNvbXBvbmVudFZhbGlkYXRvckZhY3Rvcnk7XHJcbiAgICB9XHJcbiAgICBWYWxpZGF0aW9uR3JvdXBDb250cm9sbGVyLnByb3RvdHlwZS4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy4kdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghXy5pc1VuZGVmaW5lZChfdGhpcy52YWxpZGF0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5ncm91cFZhbGlkYXRvciA9IF90aGlzLmNvbXBvbmVudFZhbGlkYXRvckZhY3RvcnkuZ2V0SW5zdGFuY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGZvcm06IF90aGlzLiRzY29wZS52YWxpZGF0aW9uR3JvdXBGb3JtLFxyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZTogX3RoaXMuJHNjb3BlLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbGlkYXRvcnM6IFtfdGhpcy52YWxpZGF0b3JdLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBWYWxpZGF0aW9uR3JvdXBDb250cm9sbGVyLiRpbmplY3QgPSBbJyRzY29wZScsICckdGltZW91dCcsIGNvbXBvbmVudFZhbGlkYXRvcl9zZXJ2aWNlXzEuZmFjdG9yeU5hbWVdO1xyXG4gICAgcmV0dXJuIFZhbGlkYXRpb25Hcm91cENvbnRyb2xsZXI7XHJcbn0oKSk7XHJcbmV4cG9ydHMuVmFsaWRhdGlvbkdyb3VwQ29udHJvbGxlciA9IFZhbGlkYXRpb25Hcm91cENvbnRyb2xsZXI7XHJcbnZhciB2YWxpZGF0aW9uR3JvdXAgPSB7XHJcbiAgICB0cmFuc2NsdWRlOiB0cnVlLFxyXG4gICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vdmFsaWRhdGlvbkdyb3VwLmh0bWwnKSxcclxuICAgIGNvbnRyb2xsZXI6IGV4cG9ydHMuY29udHJvbGxlck5hbWUsXHJcbiAgICBjb250cm9sbGVyQXM6ICdncm91cCcsXHJcbiAgICBiaW5kaW5nczoge1xyXG4gICAgICAgIHZhbGlkYXRvcjogJz0nLFxyXG4gICAgfSxcclxufTtcclxuYW5ndWxhci5tb2R1bGUoZXhwb3J0cy5tb2R1bGVOYW1lLCBbY29tcG9uZW50VmFsaWRhdG9yX3NlcnZpY2VfMS5tb2R1bGVOYW1lXSlcclxuICAgIC5jb21wb25lbnQoZXhwb3J0cy5jb21wb25lbnROYW1lLCB2YWxpZGF0aW9uR3JvdXApXHJcbiAgICAuY29udHJvbGxlcihleHBvcnRzLmNvbnRyb2xsZXJOYW1lLCBWYWxpZGF0aW9uR3JvdXBDb250cm9sbGVyKTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pZG1Gc2FXUmhkR2x2YmtkeWIzVndMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWRtRnNhV1JoZEdsdmJrZHliM1Z3TG5SeklsMHNJbTVoYldWeklqcGJYU3dpYldGd2NHbHVaM01pT2lKQlFVRkJMREJFUVVFd1JEdEJRVVV4UkN4WlFVRlpMRU5CUVVNN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVTnVReXhKUVVGWkxFTkJRVU1zVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVMDFRaXd5UTBGTFR5dzRSRUZCT0VRc1EwRkJReXhEUVVGQk8wRkJSVE5FTEd0Q1FVRlZMRWRCUVZjc2EwTkJRV3RETEVOQlFVTTdRVUZEZUVRc2NVSkJRV0VzUjBGQlZ5eHRRa0ZCYlVJc1EwRkJRenRCUVVNMVF5eHpRa0ZCWXl4SFFVRlhMREpDUVVFeVFpeERRVUZETzBGQlRXaEZPMGxCVDBNc2JVTkJRVzlDTEUxQlFUWkNMRVZCUTNKRExGRkJRV2xETEVWQlEycERMSGxDUVVGeFJEdFJRVVkzUXl4WFFVRk5MRWRCUVU0c1RVRkJUU3hEUVVGMVFqdFJRVU55UXl4aFFVRlJMRWRCUVZJc1VVRkJVU3hEUVVGNVFqdFJRVU5xUXl3NFFrRkJlVUlzUjBGQmVrSXNlVUpCUVhsQ0xFTkJRVFJDTzBsQlFVY3NRMEZCUXp0SlFVVnlSU3d5UTBGQlR5eEhRVUZRTzFGQlFVRXNhVUpCVlVNN1VVRlVRU3hKUVVGSkxFTkJRVU1zVVVGQlVTeERRVUZETzFsQlEySXNSVUZCUlN4RFFVRkRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU1zVjBGQlZ5eERRVUZETEV0QlFVa3NRMEZCUXl4VFFVRlRMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03WjBKQlEzQkRMRXRCUVVrc1EwRkJReXhqUVVGakxFZEJRVWNzUzBGQlNTeERRVUZETEhsQ1FVRjVRaXhEUVVGRExGZEJRVmNzUTBGQlF6dHZRa0ZEYUVVc1NVRkJTU3hGUVVGRkxFdEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNiVUpCUVcxQ08yOUNRVU55UXl4TlFVRk5MRVZCUVVVc1MwRkJTU3hEUVVGRExFMUJRVTA3YjBKQlEyNUNMRlZCUVZVc1JVRkJSU3hEUVVGRExFdEJRVWtzUTBGQlF5eFRRVUZUTEVOQlFVTTdhVUpCUXpWQ0xFTkJRVU1zUTBGQlF6dFpRVU5LTEVOQlFVTTdVVUZEUml4RFFVRkRMRU5CUVVNc1EwRkJRenRKUVVOS0xFTkJRVU03U1VGbVRTeHBRMEZCVHl4SFFVRmhMRU5CUVVNc1VVRkJVU3hGUVVGRkxGVkJRVlVzUlVGQlJTeDNRMEZCTmtJc1EwRkJReXhEUVVGRE8wbEJaMEpzUml4blEwRkJRenRCUVVGRUxFTkJRVU1zUVVGMFFrUXNTVUZ6UWtNN1FVRjBRbGtzYVVOQlFYbENMRFJDUVhOQ2NrTXNRMEZCUVR0QlFVVkVMRWxCUVVrc1pVRkJaU3hIUVVFNFFqdEpRVU5vUkN4VlFVRlZMRVZCUVVVc1NVRkJTVHRKUVVOb1FpeFJRVUZSTEVWQlFVVXNUMEZCVHl4RFFVRkRMSGRDUVVGM1FpeERRVUZETzBsQlF6TkRMRlZCUVZVc1JVRkJSU3h6UWtGQll6dEpRVU14UWl4WlFVRlpMRVZCUVVVc1QwRkJUenRKUVVOeVFpeFJRVUZSTEVWQlFVVTdVVUZEVkN4VFFVRlRMRVZCUVVVc1IwRkJSenRMUVVOa08wTkJRMFFzUTBGQlF6dEJRVVZHTEU5QlFVOHNRMEZCUXl4TlFVRk5MRU5CUVVNc2EwSkJRVlVzUlVGQlJTeERRVUZETEhWRFFVRTBRaXhEUVVGRExFTkJRVU03UzBGRGVFUXNVMEZCVXl4RFFVRkRMSEZDUVVGaExFVkJRVVVzWlVGQlpTeERRVUZETzB0QlEzcERMRlZCUVZVc1EwRkJReXh6UWtGQll5eEZRVUZGTEhsQ1FVRjVRaXhEUVVGRExFTkJRVU1pZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy92YWxpZGF0aW9uR3JvdXAvdmFsaWRhdGlvbkdyb3VwLmpzXG4gKiogbW9kdWxlIGlkID0gMjA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwiY29udGVudC1ncm91cFxcXCIgbmctZm9ybT1cXFwidmFsaWRhdGlvbkdyb3VwRm9ybVxcXCI+XFxyXFxuXFx0PGRpdiBjbGFzcz1cXFwiZXJyb3ItbWVzc2FnZVxcXCIgbmctaWY9XFxcInZhbGlkYXRpb25Hcm91cEZvcm0uJGVycm9yLmN1c3RvbVZhbGlkYXRpb25cXFwiPlxcclxcblxcdFxcdDxsYWJlbD57e2dyb3VwLmdyb3VwVmFsaWRhdG9yLmVycm9yfX08L2xhYmVsPlxcclxcblxcdDwvZGl2PlxcclxcblxcdDxkaXYgbmctdHJhbnNjbHVkZT48L2Rpdj5cXHJcXG48L2Rpdj5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvY29tcG9uZW50cy92YWxpZGF0aW9uR3JvdXAvdmFsaWRhdGlvbkdyb3VwLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAyMDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgYW5ndWxhciA9IHJlcXVpcmUoJ2FuZ3VsYXInKTtcclxudmFyIGRhdGUgPSByZXF1aXJlKCcuL2RhdGUvZGF0ZS5maWx0ZXInKTtcclxuZXhwb3J0cy5kYXRlID0gZGF0ZTtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmZpbHRlcnMnO1xyXG5hbmd1bGFyLm1vZHVsZShleHBvcnRzLm1vZHVsZU5hbWUsIFtcclxuICAgIGRhdGUubW9kdWxlTmFtZSxcclxuXSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVptbHNkR1Z5Y3k1dGIyUjFiR1V1YW5NaUxDSnpiM1Z5WTJWU2IyOTBJam9pSWl3aWMyOTFjbU5sY3lJNld5Sm1hV3gwWlhKekxtMXZaSFZzWlM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaU8wRkJRVUVzU1VGQldTeFBRVUZQTEZkQlFVMHNVMEZCVXl4RFFVRkRMRU5CUVVFN1FVRkZia01zU1VGQldTeEpRVUZKTEZkQlFVMHNiMEpCUVc5Q0xFTkJRVU1zUTBGQlFUdEJRVVZzUXl4WlFVRkpPMEZCUlVZc2EwSkJRVlVzUjBGQlZ5eGxRVUZsTEVOQlFVTTdRVUZGYUVRc1QwRkJUeXhEUVVGRExFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZPMGxCUXpGQ0xFbEJRVWtzUTBGQlF5eFZRVUZWTzBOQlEyWXNRMEZCUXl4RFFVRkRJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS9maWx0ZXJzL2ZpbHRlcnMubW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMjEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIndXNlIHN0cmljdCc7XHJcbnZhciBhbmd1bGFyID0gcmVxdWlyZSgnYW5ndWxhcicpO1xyXG52YXIgbW9tZW50ID0gcmVxdWlyZSgnbW9tZW50Jyk7XHJcbnZhciB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEgPSByZXF1aXJlKCd0eXBlc2NyaXB0LWFuZ3VsYXItdXRpbGl0aWVzJyk7XHJcbnZhciBfX2RhdGUgPSB0eXBlc2NyaXB0X2FuZ3VsYXJfdXRpbGl0aWVzXzEuc2VydmljZXMuZGF0ZTtcclxudmFyIF9fb2JqZWN0ID0gdHlwZXNjcmlwdF9hbmd1bGFyX3V0aWxpdGllc18xLnNlcnZpY2VzLm9iamVjdDtcclxuZXhwb3J0cy5tb2R1bGVOYW1lID0gJ3JsLnVpLmZpbHRlcnMuZGF0ZSc7XHJcbmV4cG9ydHMuZmlsdGVyTmFtZSA9ICdybERhdGUnO1xyXG5kYXRlRmlsdGVyLiRpbmplY3QgPSBbXTtcclxuZnVuY3Rpb24gZGF0ZUZpbHRlcigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSwgaW5jbHVkZVRpbWUpIHtcclxuICAgICAgICBpZiAoX19vYmplY3Qub2JqZWN0VXRpbGl0eS5pc051bGxPckVtcHR5KGRhdGUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1vbWVudERhdGUgPSBtb21lbnQoZGF0ZSk7XHJcbiAgICAgICAgaWYgKGluY2x1ZGVUaW1lKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtb21lbnREYXRlLmZvcm1hdChfX2RhdGUuZGVmYXVsdEZvcm1hdHMuZGF0ZVRpbWVGb3JtYXQpICsgJyAnICsgbW9tZW50RGF0ZS56b25lQWJicigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1vbWVudERhdGUuZm9ybWF0KF9fZGF0ZS5kZWZhdWx0Rm9ybWF0cy5kYXRlRm9ybWF0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbmFuZ3VsYXIubW9kdWxlKGV4cG9ydHMubW9kdWxlTmFtZSwgW10pXHJcbiAgICAuZmlsdGVyKGV4cG9ydHMuZmlsdGVyTmFtZSwgZGF0ZUZpbHRlcik7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaVpHRjBaUzVtYVd4MFpYSXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKa1lYUmxMbVpwYkhSbGNpNTBjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lRVUZCUVN4WlFVRlpMRU5CUVVNN1FVRkZZaXhKUVVGWkxFOUJRVThzVjBGQlRTeFRRVUZUTEVOQlFVTXNRMEZCUVR0QlFVTnVReXhKUVVGWkxFMUJRVTBzVjBGQlRTeFJRVUZSTEVOQlFVTXNRMEZCUVR0QlFVVnFReXcyUTBGQmVVSXNPRUpCUVRoQ0xFTkJRVU1zUTBGQlFUdEJRVU40UkN4SlFVRlBMRTFCUVUwc1IwRkJSeXgxUTBGQlVTeERRVUZETEVsQlFVa3NRMEZCUXp0QlFVTTVRaXhKUVVGUExGRkJRVkVzUjBGQlJ5eDFRMEZCVVN4RFFVRkRMRTFCUVUwc1EwRkJRenRCUVVWMlFpeHJRa0ZCVlN4SFFVRlhMRzlDUVVGdlFpeERRVUZETzBGQlF6RkRMR3RDUVVGVkxFZEJRVmNzVVVGQlVTeERRVUZETzBGQlRYcERMRlZCUVZVc1EwRkJReXhQUVVGUExFZEJRVWNzUlVGQlJTeERRVUZETzBGQlEzaENPMGxCUTBNc1dVRkJXU3hEUVVGRE8wbEJRMklzVFVGQlRTeERRVUZETEZWQlFVTXNTVUZCYjBJc1JVRkJSU3hYUVVGeFFqdFJRVU5zUkN4RlFVRkZMRU5CUVVNc1EwRkJReXhSUVVGUkxFTkJRVU1zWVVGQllTeERRVUZETEdGQlFXRXNRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJReXhEUVVGRExFTkJRVU03V1VGRGFFUXNUVUZCVFN4RFFVRkRMRVZCUVVVc1EwRkJRenRSUVVOWUxFTkJRVU03VVVGRlJDeEpRVUZKTEZWQlFWVXNSMEZCYTBJc1RVRkJUU3hEUVVGRExFbEJRVWtzUTBGQlF5eERRVUZETzFGQlF6ZERMRVZCUVVVc1EwRkJReXhEUVVGRExGZEJRVmNzUTBGQlF5eERRVUZETEVOQlFVTTdXVUZEYWtJc1RVRkJUU3hEUVVGRExGVkJRVlVzUTBGQlF5eE5RVUZOTEVOQlFVTXNUVUZCVFN4RFFVRkRMR05CUVdNc1EwRkJReXhqUVVGakxFTkJRVU1zUjBGQlJ5eEhRVUZITEVkQlFVY3NWVUZCVlN4RFFVRkRMRkZCUVZFc1JVRkJSU3hEUVVGRE8xRkJRemxHTEVOQlFVTTdVVUZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRenRaUVVOUUxFMUJRVTBzUTBGQlF5eFZRVUZWTEVOQlFVTXNUVUZCVFN4RFFVRkRMRTFCUVUwc1EwRkJReXhqUVVGakxFTkJRVU1zVlVGQlZTeERRVUZETEVOQlFVTTdVVUZETlVRc1EwRkJRenRKUVVOR0xFTkJRVU1zUTBGQlF6dEJRVU5JTEVOQlFVTTdRVUZGUkN4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExHdENRVUZWTEVWQlFVVXNSVUZCUlN4RFFVRkRPMHRCUXpWQ0xFMUJRVTBzUTBGQlF5eHJRa0ZCVlN4RlFVRkZMRlZCUVZVc1EwRkJReXhEUVVGREluMD1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc291cmNlL2ZpbHRlcnMvZGF0ZS9kYXRlLmZpbHRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDIxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG52YXIgbmdNb2RlbCA9IHJlcXVpcmUoJy4vZm9ybVZhbGlkYXRvcnMnKTtcclxuZXhwb3J0cy5uZ01vZGVsID0gbmdNb2RlbDtcclxudmFyIHZpZXdEYXRhID0gcmVxdWlyZSgnLi92aWV3RGF0YScpO1xyXG5leHBvcnRzLnZpZXdEYXRhID0gdmlld0RhdGE7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsZXlKMlpYSnphVzl1SWpvekxDSm1hV3hsSWpvaWRIbHdaWE11Ylc5a2RXeGxMbXB6SWl3aWMyOTFjbU5sVW05dmRDSTZJaUlzSW5OdmRYSmpaWE1pT2xzaWRIbHdaWE11Ylc5a2RXeGxMblJ6SWwwc0ltNWhiV1Z6SWpwYlhTd2liV0Z3Y0dsdVozTWlPaUpCUVVGQkxGbEJRVmtzUTBGQlF6dEJRVVZpTEVsQlFWa3NUMEZCVHl4WFFVRk5MR3RDUVVGclFpeERRVUZETEVOQlFVRTdRVUZIYmtNc1pVRkJUenRCUVVab1FpeEpRVUZaTEZGQlFWRXNWMEZCVFN4WlFVRlpMRU5CUVVNc1EwRkJRVHRCUVVWeVFpeG5Ra0ZCVVR0QlFVRkhJbjA9XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS90eXBlcy90eXBlcy5tb2R1bGUuanNcbiAqKiBtb2R1bGUgaWQgPSAyMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIid1c2Ugc3RyaWN0JztcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pWm05eWJWWmhiR2xrWVhSdmNuTXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKbWIzSnRWbUZzYVdSaGRHOXljeTUwY3lKZExDSnVZVzFsY3lJNlcxMHNJbTFoY0hCcGJtZHpJam9pUVVGQlFTeFpRVUZaTEVOQlFVTWlmUT09XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NvdXJjZS90eXBlcy9mb3JtVmFsaWRhdG9ycy5qc1xuICoqIG1vZHVsZSBpZCA9IDIxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xyXG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0ptYVd4bElqb2lkbWxsZDBSaGRHRXVhbk1pTENKemIzVnlZMlZTYjI5MElqb2lJaXdpYzI5MWNtTmxjeUk2V3lKMmFXVjNSR0YwWVM1MGN5SmRMQ0p1WVcxbGN5STZXMTBzSW0xaGNIQnBibWR6SWpvaVFVRkJRU3haUVVGWkxFTkJRVU1pZlE9PVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zb3VyY2UvdHlwZXMvdmlld0RhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAyMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJzb3VyY2VSb290IjoiIn0=